var __defProp = Object.defineProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};

// src/noclip/gfx/helpers/DebugTextDrawer.ts
var DebugTextDrawer_exports = {};
__export(DebugTextDrawer_exports, {
  DebugTextDrawer: () => DebugTextDrawer,
  makeDebugTextDrawer: () => makeDebugTextDrawer
});
async function makeDebugTextDrawer() {
  return new DebugTextDrawer();
}
var DebugTextDrawer;
var init_DebugTextDrawer = __esm({
  "src/noclip/gfx/helpers/DebugTextDrawer.ts"() {
    DebugTextDrawer = class {
    };
  }
});

// src/main.ts
import { mat4 as mat419, vec3 as vec320 } from "gl-matrix";

// src/constants.ts
var BALL_FLAGS = {
  FLAG_00: 1 << 0,
  FLAG_01: 1 << 1,
  FLAG_02: 1 << 2,
  FLAG_03: 1 << 3,
  INVISIBLE: 1 << 4,
  FLAG_05: 1 << 5,
  FLAG_06: 1 << 6,
  FLAG_07: 1 << 7,
  FLAG_08: 1 << 8,
  FLAG_09: 1 << 9,
  FLAG_10: 1 << 10,
  FLAG_11: 1 << 11,
  GOAL: 1 << 12,
  FLAG_13: 1 << 13,
  FLAG_14: 1 << 14,
  TIMEOVER: 1 << 15,
  FLAG_16: 1 << 16,
  FLAG_17: 1 << 17,
  FLAG_18: 1 << 18,
  FLAG_19: 1 << 19,
  FLAG_20: 1 << 20,
  FLAG_21: 1 << 21,
  FLAG_22: 1 << 22,
  FLAG_23: 1 << 23,
  FLAG_24: 1 << 24,
  FLAG_25: 1 << 25,
  FLAG_26: 1 << 26,
  FLAG_27: 1 << 27,
  FLAG_28: 1 << 28,
  FLAG_29: 1 << 29,
  FLAG_30: 1 << 30,
  FLAG_31: 1 << 31
};
var BALL_STATES = {
  READY: 0,
  DROP: 3,
  PLAY: 4,
  GOAL_INIT: 5,
  GOAL_MAIN: 6
};
var INFO_FLAGS = {
  GOAL: 1 << 0,
  TIMEOVER: 1 << 1,
  FALLOUT: 1 << 2,
  TIMER_PAUSED: 1 << 3,
  REPLAY: 1 << 4,
  FLAG_05: 1 << 5,
  BONUS_STAGE: 1 << 6,
  FLAG_07: 1 << 7,
  FLAG_08: 1 << 8,
  BONUS_CLEAR: 1 << 9,
  FLAG_10: 1 << 10,
  FLAG_11: 1 << 11,
  FINAL_FLOOR: 1 << 12,
  FLAG_13: 1 << 13
};
var CAMERA_STATE = {
  LEVEL_MAIN: 1,
  FALLOUT_REPLAY: 8,
  READY_INIT: 10,
  READY_MAIN: 11,
  GOAL_MAIN: 15
};
var COLI_FLAGS = {
  OCCURRED: 1 << 0
};
var DEG_TO_S16 = 65536 / 360;
var S16_TO_RAD = Math.PI / 32768;
var DEFAULT_STAGE_TIME = 60 * 60;
var GAME_SOURCES = {
  SMB1: "smb1",
  SMB2: "smb2",
  MB2WS: "mb2ws"
};
var STAGE_BASE_PATHS = {
  [GAME_SOURCES.SMB1]: "./smb1_content/test",
  [GAME_SOURCES.SMB2]: "./smb2_content/test",
  [GAME_SOURCES.MB2WS]: "./mb2ws_content/test"
};
var BUMPER_MODEL_RADIUS = 0.4243819714;
var BUMPER_BOUND_RADIUS = 0.75 * BUMPER_MODEL_RADIUS;
var BUMPER_BOUND_CENTER = { x: 0, y: 0.35, z: 0 };
var GOAL_BAG_BASE_CENTER = { x: 0, y: -0.7499997616, z: 0 };
var GOAL_BAG_BASE_RADIUS = 0.7500002384;
var GOAL_BAG_OPEN_SCALE = 0.5;
var GOAL_BAG_OFFSET = { x: 0, y: 2.8, z: 0 };
var GOAL_BAG_GUIDE_POS = { x: 0, y: 3.5499999523, z: 0 };
var GOAL_BAG_GUIDE_DIR = { x: 1, y: 0, z: 0 };
function stageIdFromName(name) {
  const match = /ST_(\d{3})/.exec(name);
  if (!match) {
    return 0;
  }
  return Number.parseInt(match[1], 10);
}
function stageLabelFromName(name) {
  const match = /ST_\d{3}_(.*)/.exec(name);
  if (!match) {
    return name;
  }
  return match[1].replace(/_/g, " ");
}

// src/course.ts
var CMD_FLOOR = "CMD_FLOOR";
var CMD_IF = "CMD_IF";
var CMD_THEN = "CMD_THEN";
var CMD_COURSE_END = "CMD_COURSE_END";
var IF_FLOOR_CLEAR = "IF_FLOOR_CLEAR";
var IF_GOAL_TYPE = "IF_GOAL_TYPE";
var IF_TIME_ELAPSED = "IF_TIME_ELAPSED";
var THEN_JUMP_FLOOR = "THEN_JUMP_FLOOR";
var FLOOR_STAGE_ID = "FLOOR_STAGE_ID";
var FLOOR_TIME = "FLOOR_TIME";
var beginnerMainScript = [
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_001_PLAIN" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_002_DIAMOND" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "G" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 3 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_003_HAIRPIN" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_004_WIDE_BRIDGE" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_091_BONUS_BASIC" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_005_SLOPES" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_006_STEPS" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_007_BLOCKS" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_008_JUMP_SINGLE" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_009_EXAM_A" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "2", value: 0 },
  { op: "CMD_COURSE_END", type: "0", value: 0 }
];
var advancedMainScript = [
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_011_BUMP" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_012_WALKING" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_013_REPULSE" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_014_NARROW_BRIDGE" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_091_BONUS_BASIC" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_015_BREAK" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "G" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 4 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_016_CURVES" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_017_DOWNHILL" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_018_BLOCKS_SLIM" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_092_BONUS_WAVE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_021_CHOICE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "G" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 3 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_022_BOWL" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_023_JUMPIES" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_024_STOPPERS" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_025_FLOOR_BENT" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_026_CONVEYOR" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_027_EXAM_B" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_028_CHASER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "G" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 2 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "R" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 7 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_029_JUMP_DOUBLE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_093_BONUS_GRID" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_031_MIDDLE_JAM" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_032_ANTLION" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_033_COLLAPSE" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_034_SWING_BAR" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_035_LABYRINTH" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "G" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 3 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_036_SPIRAL" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_037_WAVY_JUMP" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_038_SPIKY" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_039_UNREST" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_040_POLAR" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "2", value: 0 },
  { op: "CMD_COURSE_END", type: "0", value: 0 }
];
var expertMainScript = [
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_041_RUIN" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_042_BRANCH" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "R" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 3 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_043_OVERTURN" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "G" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 2 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_044_EXCURSION" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_091_BONUS_BASIC" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_045_DODECAGON" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_046_EXAM_C" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_047_SKELETON" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_048_TRACKS" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_092_BONUS_WAVE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_051_DOWNHILL_HARD" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_052_GEARS" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_053_DESTRUCTION" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_054_INVASION" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_055_DIVING" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_056_FLOOR_SLANT" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_057_TRAM" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_058_SWING_BAR_LONG" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_059_PAPERWORK" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_093_BONUS_GRID" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_061_TWIN_ATTACKER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_062_SEGA_LOGO" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_063_SNAKE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_064_WIND" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_065_WINDY_SLIDE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_066_FALL_DOWN" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_067_TWIN_CROSS" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_068_SPIRAL_HARD" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_069_CONVEYOR_PARTS" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_094_BONUS_BUMPY" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_071_GAPS" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_072_CURVATURE" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_073_ANT_LION_SUPER" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_074_DRUM" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_075_TWIST_AND_SPIN" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_076_SPEEDY_JAM" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_077_QUAKE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_078_CASSIOPEIA" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_079_PIRATES" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_095_BONUS_HUNTING" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_081_BOWL_OPEN" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_082_CHECKER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "G" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 2 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "R" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 3 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_083_CARPET" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_084_RIDGE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_085_MIXER" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_086_RINGS" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "B" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_IF", type: "IF_GOAL_TYPE", value: "G" },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 2 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_087_STAIRS" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_088_CLOVER" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_089_COFFEE_CUP" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_090_METAMORPHASIS" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "2", value: 0 },
  { op: "CMD_COURSE_END", type: "0", value: 0 }
];
var beginnerExtraScript = [
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_101_BLUR_BRIDGE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_102_HITTER" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_103_AV_LOGO" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "2", value: 0 },
  { op: "CMD_COURSE_END", type: "0", value: 0 }
];
var advancedExtraScript = [
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_101_BLUR_BRIDGE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_104_HARD_HITTER" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_105_PUZZLE" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_103_AV_LOGO" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_106_POLAR_LARGE" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "2", value: 0 },
  { op: "CMD_COURSE_END", type: "0", value: 0 }
];
var expertExtraScript = [
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_101_BLUR_BRIDGE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_107_BREATHE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_104_HARD_HITTER" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_108_FERRIS_WHEEL" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_109_FACTORY" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_110_CURL_PIPE" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_111_MAGIC_HAND" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_103_AV_LOGO" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_112_SANCTUARY" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_113_DAA_LOO_MAA" },
  { op: "CMD_FLOOR", type: "FLOOR_TIME", value: 1800 },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "2", value: 0 },
  { op: "CMD_COURSE_END", type: "0", value: 0 }
];
var masterScript = [
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_121_WAVE_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_122_FAN_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_123_STAMINA_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_124_SPRING_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_125_DANCE_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_126_ROLL_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_127_EDGE_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_128_DODGE_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_129_BRIDGE_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "THEN_JUMP_FLOOR", value: 1 },
  { op: "CMD_FLOOR", type: "FLOOR_STAGE_ID", value: "ST_130_MONKEY_MASTER" },
  { op: "CMD_IF", type: "IF_FLOOR_CLEAR", value: 0 },
  { op: "CMD_THEN", type: "2", value: 0 },
  { op: "CMD_COURSE_END", type: "0", value: 0 }
];
var scripts = {
  beginner: beginnerMainScript,
  advanced: advancedMainScript,
  expert: expertMainScript,
  "beginner-extra": beginnerExtraScript,
  "advanced-extra": advancedExtraScript,
  "expert-extra": expertExtraScript,
  master: masterScript
};
function isBonusStage(stageId) {
  return stageId >= 91 && stageId <= 95;
}
function buildStageList(script) {
  const list = [];
  for (let i = 0; i < script.length; i += 1) {
    const cmd = script[i];
    if (cmd.op === CMD_FLOOR && cmd.type === FLOOR_STAGE_ID) {
      const name = cmd.value;
      list.push({
        id: stageIdFromName(name),
        name,
        label: stageLabelFromName(name),
        nextIndex: i + 1
      });
    }
  }
  return list;
}
function getStageListForDifficulty(difficulty) {
  const script = scripts[difficulty];
  if (!script) {
    return [];
  }
  return buildStageList(script).map((entry) => ({
    id: entry.id,
    name: entry.name,
    label: entry.label
  }));
}
var Course = class {
  constructor(difficulty, stageIndex = 0) {
    this.difficulty = difficulty;
    this.script = scripts[difficulty];
    if (!this.script || this.script.length === 0) {
      throw new Error(`Missing course script for ${difficulty}`);
    }
    this.stageList = buildStageList(this.script);
    this.scriptIndex = 0;
    this.currentFloor = 1;
    this.currentStageName = "";
    this.currentStageId = 0;
    this.jumpFloors = -1;
    this.init();
    if (stageIndex > 0) {
      this.setStageIndex(stageIndex);
    }
  }
  init() {
    const first = this.stageList[0];
    if (!first) {
      return;
    }
    this.currentStageName = first.name;
    this.currentStageId = first.id;
    this.scriptIndex = first.nextIndex;
    this.currentFloor = 1;
  }
  getTimeLimitFrames() {
    const next = this.script[this.scriptIndex];
    if (next && next.op === CMD_FLOOR && next.type === FLOOR_TIME) {
      return next.value;
    }
    return DEFAULT_STAGE_TIME;
  }
  getStageLabel() {
    return stageLabelFromName(this.currentStageName);
  }
  getFloorInfo() {
    const total = this.stageList.length;
    const current = this.currentFloor;
    let prefix = "FLOOR";
    if (typeof this.difficulty === "string") {
      if (this.difficulty === "master") {
        prefix = "MASTER";
      } else if (this.difficulty.includes("extra")) {
        prefix = "EXTRA";
      }
    }
    const difficultyIndex = this.difficulty === "beginner" || this.difficulty === "beginner-extra" ? 0 : this.difficulty === "advanced" || this.difficulty === "advanced-extra" ? 1 : 2;
    const difficultyIconIndex = prefix === "MASTER" ? 4 : difficultyIndex + 1;
    return {
      current,
      total,
      prefix,
      difficultyIndex,
      difficultyIconIndex,
      showDifficultyIcon: prefix !== "MASTER",
      isFinal: current >= total
    };
  }
  setStageIndex(stageIndex) {
    if (!this.stageList.length) {
      return;
    }
    const clamped = Math.max(0, Math.min(stageIndex, this.stageList.length - 1));
    const entry = this.stageList[clamped];
    if (!entry) {
      return;
    }
    this.currentStageName = entry.name;
    this.currentStageId = entry.id;
    this.scriptIndex = entry.nextIndex;
    this.currentFloor = clamped + 1;
  }
  advance(info) {
    let prevOpcode = null;
    let condResult = 0;
    this.jumpFloors = -1;
    for (let i = this.scriptIndex; i < this.script.length; i += 1) {
      const cmd = this.script[i];
      if (cmd.op === CMD_COURSE_END) {
        return false;
      }
      if (cmd.op === CMD_FLOOR && cmd.type === FLOOR_STAGE_ID) {
        break;
      }
      if (cmd.op === CMD_IF) {
        const result = this.evalIf(cmd, info);
        if (prevOpcode !== CMD_IF) {
          condResult = result ? 1 : 0;
        } else if (condResult) {
          condResult = result ? 1 : 0;
        }
      }
      if (cmd.op === CMD_THEN && condResult) {
        this.evalThen(cmd);
      }
      if (this.jumpFloors !== -1) {
        const jumped = this.performJump(i);
        if (!jumped) {
          return false;
        }
        return true;
      }
      prevOpcode = cmd.op;
    }
    return false;
  }
  peekJumpCount(info) {
    let prevOpcode = null;
    let condResult = 0;
    let jumpFloors = -1;
    for (let i = this.scriptIndex; i < this.script.length; i += 1) {
      const cmd = this.script[i];
      if (cmd.op === CMD_COURSE_END) {
        return null;
      }
      if (cmd.op === CMD_FLOOR && cmd.type === FLOOR_STAGE_ID) {
        break;
      }
      if (cmd.op === CMD_IF) {
        const result = this.evalIf(cmd, info);
        if (prevOpcode !== CMD_IF) {
          condResult = result ? 1 : 0;
        } else if (condResult) {
          condResult = result ? 1 : 0;
        }
      }
      if (cmd.op === CMD_THEN && condResult && cmd.type === THEN_JUMP_FLOOR) {
        jumpFloors = cmd.value;
      }
      if (jumpFloors !== -1) {
        let jumpCount = 0;
        for (let j = i; j < this.script.length; j += 1) {
          const jumpCmd = this.script[j];
          if (jumpCmd.op === CMD_COURSE_END) {
            return null;
          }
          if (jumpCmd.op === CMD_FLOOR && jumpCmd.type === FLOOR_STAGE_ID) {
            jumpCount += 1;
            if (jumpCount === jumpFloors) {
              return jumpCount;
            }
          }
        }
        return null;
      }
      prevOpcode = cmd.op;
    }
    return null;
  }
  evalIf(cmd, info) {
    switch (cmd.type) {
      case IF_FLOOR_CLEAR:
        if (info.flags & INFO_FLAGS.GOAL || info.flags & INFO_FLAGS.BONUS_CLEAR) {
          return true;
        }
        if (isBonusStage(info.u_currStageId) && (info.flags & INFO_FLAGS.TIMEOVER || info.flags & INFO_FLAGS.FALLOUT)) {
          return true;
        }
        return false;
      case IF_GOAL_TYPE:
        return info.goalType === cmd.value;
      case IF_TIME_ELAPSED:
        return info.timerCurr >= cmd.value;
      default:
        return false;
    }
  }
  evalThen(cmd) {
    if (cmd.type === THEN_JUMP_FLOOR) {
      this.jumpFloors = cmd.value;
    }
  }
  performJump(fromIndex) {
    let jumpCount = 0;
    for (let i = fromIndex; i < this.script.length; i += 1) {
      const cmd = this.script[i];
      if (cmd.op === CMD_COURSE_END) {
        return false;
      }
      if (cmd.op === CMD_FLOOR && cmd.type === FLOOR_STAGE_ID) {
        jumpCount += 1;
        if (jumpCount === this.jumpFloors) {
          const stageName = cmd.value;
          const stageId = stageIdFromName(stageName);
          this.currentStageName = stageName;
          this.currentStageId = stageId;
          this.currentFloor += jumpCount;
          this.scriptIndex = i + 1;
          this.jumpFloors = -1;
          return true;
        }
      }
    }
    return false;
  }
  findNextStage(startIndex) {
    for (let i = startIndex; i < this.script.length; i += 1) {
      const cmd = this.script[i];
      if (cmd.op === CMD_FLOOR && cmd.type === FLOOR_STAGE_ID) {
        return {
          id: stageIdFromName(cmd.value),
          name: cmd.value,
          nextIndex: i + 1
        };
      }
    }
    return null;
  }
};

// node_modules/fflate/esm/browser.js
var u8 = Uint8Array;
var u16 = Uint16Array;
var i32 = Int32Array;
var fleb = new u8([
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  0,
  /* unused */
  0,
  0,
  /* impossible */
  0
]);
var fdeb = new u8([
  0,
  0,
  0,
  0,
  1,
  1,
  2,
  2,
  3,
  3,
  4,
  4,
  5,
  5,
  6,
  6,
  7,
  7,
  8,
  8,
  9,
  9,
  10,
  10,
  11,
  11,
  12,
  12,
  13,
  13,
  /* unused */
  0,
  0
]);
var clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
var freb = function(eb, start) {
  var b = new u16(31);
  for (var i = 0; i < 31; ++i) {
    b[i] = start += 1 << eb[i - 1];
  }
  var r = new i32(b[30]);
  for (var i = 1; i < 30; ++i) {
    for (var j = b[i]; j < b[i + 1]; ++j) {
      r[j] = j - b[i] << 5 | i;
    }
  }
  return { b, r };
};
var _a = freb(fleb, 2);
var fl = _a.b;
var revfl = _a.r;
fl[28] = 258, revfl[258] = 28;
var _b = freb(fdeb, 0);
var fd = _b.b;
var revfd = _b.r;
var rev = new u16(32768);
for (i = 0; i < 32768; ++i) {
  x = (i & 43690) >> 1 | (i & 21845) << 1;
  x = (x & 52428) >> 2 | (x & 13107) << 2;
  x = (x & 61680) >> 4 | (x & 3855) << 4;
  rev[i] = ((x & 65280) >> 8 | (x & 255) << 8) >> 1;
}
var x;
var i;
var hMap = (function(cd, mb, r) {
  var s = cd.length;
  var i = 0;
  var l = new u16(mb);
  for (; i < s; ++i) {
    if (cd[i])
      ++l[cd[i] - 1];
  }
  var le = new u16(mb);
  for (i = 1; i < mb; ++i) {
    le[i] = le[i - 1] + l[i - 1] << 1;
  }
  var co;
  if (r) {
    co = new u16(1 << mb);
    var rvb = 15 - mb;
    for (i = 0; i < s; ++i) {
      if (cd[i]) {
        var sv = i << 4 | cd[i];
        var r_1 = mb - cd[i];
        var v = le[cd[i] - 1]++ << r_1;
        for (var m = v | (1 << r_1) - 1; v <= m; ++v) {
          co[rev[v] >> rvb] = sv;
        }
      }
    }
  } else {
    co = new u16(s);
    for (i = 0; i < s; ++i) {
      if (cd[i]) {
        co[i] = rev[le[cd[i] - 1]++] >> 15 - cd[i];
      }
    }
  }
  return co;
});
var flt = new u8(288);
for (i = 0; i < 144; ++i)
  flt[i] = 8;
var i;
for (i = 144; i < 256; ++i)
  flt[i] = 9;
var i;
for (i = 256; i < 280; ++i)
  flt[i] = 7;
var i;
for (i = 280; i < 288; ++i)
  flt[i] = 8;
var i;
var fdt = new u8(32);
for (i = 0; i < 32; ++i)
  fdt[i] = 5;
var i;
var flrm = /* @__PURE__ */ hMap(flt, 9, 1);
var fdrm = /* @__PURE__ */ hMap(fdt, 5, 1);
var max = function(a) {
  var m = a[0];
  for (var i = 1; i < a.length; ++i) {
    if (a[i] > m)
      m = a[i];
  }
  return m;
};
var bits = function(d, p, m) {
  var o = p / 8 | 0;
  return (d[o] | d[o + 1] << 8) >> (p & 7) & m;
};
var bits16 = function(d, p) {
  var o = p / 8 | 0;
  return (d[o] | d[o + 1] << 8 | d[o + 2] << 16) >> (p & 7);
};
var shft = function(p) {
  return (p + 7) / 8 | 0;
};
var slc = function(v, s, e) {
  if (s == null || s < 0)
    s = 0;
  if (e == null || e > v.length)
    e = v.length;
  return new u8(v.subarray(s, e));
};
var ec = [
  "unexpected EOF",
  "invalid block type",
  "invalid length/literal",
  "invalid distance",
  "stream finished",
  "no stream handler",
  ,
  "no callback",
  "invalid UTF-8 data",
  "extra field too long",
  "date not in range 1980-2099",
  "filename too long",
  "stream finishing",
  "invalid zip data"
  // determined by unknown compression method
];
var err = function(ind, msg, nt) {
  var e = new Error(msg || ec[ind]);
  e.code = ind;
  if (Error.captureStackTrace)
    Error.captureStackTrace(e, err);
  if (!nt)
    throw e;
  return e;
};
var inflt = function(dat, st, buf, dict) {
  var sl = dat.length, dl = dict ? dict.length : 0;
  if (!sl || st.f && !st.l)
    return buf || new u8(0);
  var noBuf = !buf;
  var resize = noBuf || st.i != 2;
  var noSt = st.i;
  if (noBuf)
    buf = new u8(sl * 3);
  var cbuf = function(l2) {
    var bl = buf.length;
    if (l2 > bl) {
      var nbuf = new u8(Math.max(bl * 2, l2));
      nbuf.set(buf);
      buf = nbuf;
    }
  };
  var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;
  var tbts = sl * 8;
  do {
    if (!lm) {
      final = bits(dat, pos, 1);
      var type = bits(dat, pos + 1, 3);
      pos += 3;
      if (!type) {
        var s = shft(pos) + 4, l = dat[s - 4] | dat[s - 3] << 8, t = s + l;
        if (t > sl) {
          if (noSt)
            err(0);
          break;
        }
        if (resize)
          cbuf(bt + l);
        buf.set(dat.subarray(s, t), bt);
        st.b = bt += l, st.p = pos = t * 8, st.f = final;
        continue;
      } else if (type == 1)
        lm = flrm, dm = fdrm, lbt = 9, dbt = 5;
      else if (type == 2) {
        var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;
        var tl = hLit + bits(dat, pos + 5, 31) + 1;
        pos += 14;
        var ldt = new u8(tl);
        var clt = new u8(19);
        for (var i = 0; i < hcLen; ++i) {
          clt[clim[i]] = bits(dat, pos + i * 3, 7);
        }
        pos += hcLen * 3;
        var clb = max(clt), clbmsk = (1 << clb) - 1;
        var clm = hMap(clt, clb, 1);
        for (var i = 0; i < tl; ) {
          var r = clm[bits(dat, pos, clbmsk)];
          pos += r & 15;
          var s = r >> 4;
          if (s < 16) {
            ldt[i++] = s;
          } else {
            var c = 0, n = 0;
            if (s == 16)
              n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];
            else if (s == 17)
              n = 3 + bits(dat, pos, 7), pos += 3;
            else if (s == 18)
              n = 11 + bits(dat, pos, 127), pos += 7;
            while (n--)
              ldt[i++] = c;
          }
        }
        var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);
        lbt = max(lt);
        dbt = max(dt);
        lm = hMap(lt, lbt, 1);
        dm = hMap(dt, dbt, 1);
      } else
        err(1);
      if (pos > tbts) {
        if (noSt)
          err(0);
        break;
      }
    }
    if (resize)
      cbuf(bt + 131072);
    var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;
    var lpos = pos;
    for (; ; lpos = pos) {
      var c = lm[bits16(dat, pos) & lms], sym = c >> 4;
      pos += c & 15;
      if (pos > tbts) {
        if (noSt)
          err(0);
        break;
      }
      if (!c)
        err(2);
      if (sym < 256)
        buf[bt++] = sym;
      else if (sym == 256) {
        lpos = pos, lm = null;
        break;
      } else {
        var add = sym - 254;
        if (sym > 264) {
          var i = sym - 257, b = fleb[i];
          add = bits(dat, pos, (1 << b) - 1) + fl[i];
          pos += b;
        }
        var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;
        if (!d)
          err(3);
        pos += d & 15;
        var dt = fd[dsym];
        if (dsym > 3) {
          var b = fdeb[dsym];
          dt += bits16(dat, pos) & (1 << b) - 1, pos += b;
        }
        if (pos > tbts) {
          if (noSt)
            err(0);
          break;
        }
        if (resize)
          cbuf(bt + 131072);
        var end = bt + add;
        if (bt < dt) {
          var shift = dl - dt, dend = Math.min(dt, end);
          if (shift + bt < 0)
            err(3);
          for (; bt < dend; ++bt)
            buf[bt] = dict[shift + bt];
        }
        for (; bt < end; ++bt)
          buf[bt] = buf[bt - dt];
      }
    }
    st.l = lm, st.p = lpos, st.b = bt, st.f = final;
    if (lm)
      final = 1, st.m = lbt, st.d = dm, st.n = dbt;
  } while (!final);
  return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);
};
var et = /* @__PURE__ */ new u8(0);
var b2 = function(d, b) {
  return d[b] | d[b + 1] << 8;
};
var b4 = function(d, b) {
  return (d[b] | d[b + 1] << 8 | d[b + 2] << 16 | d[b + 3] << 24) >>> 0;
};
var b8 = function(d, b) {
  return b4(d, b) + b4(d, b + 4) * 4294967296;
};
function inflateSync(data, opts) {
  return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);
}
var td = typeof TextDecoder != "undefined" && /* @__PURE__ */ new TextDecoder();
var tds = 0;
try {
  td.decode(et, { stream: true });
  tds = 1;
} catch (e) {
}
var dutf8 = function(d) {
  for (var r = "", i = 0; ; ) {
    var c = d[i++];
    var eb = (c > 127) + (c > 223) + (c > 239);
    if (i + eb > d.length)
      return { s: r, r: slc(d, i - 1) };
    if (!eb)
      r += String.fromCharCode(c);
    else if (eb == 3) {
      c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | d[i++] & 63) - 65536, r += String.fromCharCode(55296 | c >> 10, 56320 | c & 1023);
    } else if (eb & 1)
      r += String.fromCharCode((c & 31) << 6 | d[i++] & 63);
    else
      r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | d[i++] & 63);
  }
};
function strFromU8(dat, latin1) {
  if (latin1) {
    var r = "";
    for (var i = 0; i < dat.length; i += 16384)
      r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));
    return r;
  } else if (td) {
    return td.decode(dat);
  } else {
    var _a2 = dutf8(dat), s = _a2.s, r = _a2.r;
    if (r.length)
      err(8);
    return s;
  }
}
var slzh = function(d, b) {
  return b + 30 + b2(d, b + 26) + b2(d, b + 28);
};
var zh = function(d, b, z) {
  var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);
  var _a2 = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a2[0], su = _a2[1], off = _a2[2];
  return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];
};
var z64e = function(d, b) {
  for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))
    ;
  return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];
};
function unzipSync(data, opts) {
  var files = {};
  var e = data.length - 22;
  for (; b4(data, e) != 101010256; --e) {
    if (!e || data.length - e > 65558)
      err(13);
  }
  ;
  var c = b2(data, e + 8);
  if (!c)
    return {};
  var o = b4(data, e + 16);
  var z = o == 4294967295 || c == 65535;
  if (z) {
    var ze = b4(data, e - 12);
    z = b4(data, ze) == 101075792;
    if (z) {
      c = b4(data, ze + 32);
      o = b4(data, ze + 48);
    }
  }
  var fltr = opts && opts.filter;
  for (var i = 0; i < c; ++i) {
    var _a2 = zh(data, o, z), c_2 = _a2[0], sc = _a2[1], su = _a2[2], fn = _a2[3], no = _a2[4], off = _a2[5], b = slzh(data, off);
    o = no;
    if (!fltr || fltr({
      name: fn,
      size: sc,
      originalSize: su,
      compression: c_2
    })) {
      if (!c_2)
        files[fn] = slc(data, b, b + sc);
      else if (c_2 == 8)
        files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });
      else
        err(14, "unknown compression type " + c_2);
    }
  }
  return files;
}

// src/noclip/util.ts
function assert(b, message = "") {
  if (!b) {
    console.error(new Error().stack);
    throw new Error(`Assert fail: ${message}`);
  }
}
function assertExists(v, name = "") {
  if (v !== void 0 && v !== null)
    return v;
  else
    throw new Error(`Missing object ${name}`);
}
function nullify(v) {
  return v === void 0 ? null : v;
}
function readString(buffer, offs, length = -1, nulTerminated = true, encoding = null) {
  const buf = buffer.createTypedArray(Uint8Array, offs);
  if (length < 0)
    length = buf.byteLength;
  let byteLength = 0;
  while (true) {
    if (byteLength >= length)
      break;
    if (nulTerminated && buf[byteLength] === 0)
      break;
    byteLength++;
  }
  if (byteLength === 0)
    return "";
  if (encoding !== null) {
    return decodeString(buffer, offs, byteLength, encoding);
  } else {
    return copyBufferToString(buffer, offs, byteLength);
  }
}
function copyBufferToString(buffer, offs, byteLength) {
  const buf = buffer.createTypedArray(Uint8Array, offs);
  let S = "";
  for (let i = 0; i < byteLength; i++)
    S += String.fromCharCode(buf[i]);
  return S;
}
function decodeString(buffer, offs = void 0, byteLength = void 0, encoding = "utf8") {
  return new TextDecoder(encoding).decode(buffer.copyToBuffer(offs, byteLength));
}
function align(n, multiple) {
  const mask = multiple - 1;
  return n + mask & ~mask;
}
function nArray(n, c) {
  const d = new Array(n);
  for (let i = 0; i < n; i++)
    d[i] = c(i);
  return d;
}
function leftPad(S, spaces, ch = "0") {
  return S.padStart(spaces, ch);
}
function hexzero(n, spaces) {
  let S = (n >>> 0).toString(16);
  return leftPad(S, spaces);
}
function fallbackUndefined(v, fallback) {
  return v !== null && v !== void 0 ? v : fallback;
}

// src/noclip/endian.ts
var test = new Uint16Array([65279]);
var testView = new DataView(test.buffer);
var systemEndianness = testView.getUint8(0) === 255 ? 0 /* LITTLE_ENDIAN */ : 1 /* BIG_ENDIAN */;
function getSystemEndianness() {
  return systemEndianness;
}

// src/noclip/ArrayBufferSlice.ts
function isAligned(n, m) {
  return (n & m - 1) === 0;
}
var ArrayBufferSlice = class _ArrayBufferSlice {
  constructor(arrayBuffer, byteOffset = 0, byteLength = arrayBuffer.byteLength - byteOffset) {
    this.arrayBuffer = arrayBuffer;
    this.byteOffset = byteOffset;
    this.byteLength = byteLength;
    assert(byteOffset >= 0 && byteLength >= 0 && byteOffset + byteLength <= this.arrayBuffer.byteLength);
  }
  static fromView(view) {
    return new _ArrayBufferSlice(view.buffer, view.byteOffset, view.byteLength);
  }
  /**
   * Detach this ArrayBufferSlice from its underlying contents, in the hope that the underlying
   * ArrayBuffer storage can be GC'd. Note that this will break any type-safety that the ArrayBufferSlice
   * has. It is a quick fix for where it might be difficult to break reference cycles elswhere.
   * Use with caution!
   */
  destroy() {
    this.arrayBuffer = null;
  }
  /**
   * Return a sub-section of the buffer starting at byte offset {@param begin} and ending at byte
   * offset {@param end}. If no value is provided for end, or it is {@constant 0}, then the end is
   * the same as this {@see ArrayBufferSlice}.
   *
   * If you want a sub-section from a begin and *length* pair, see {@see subarray}.
   *
   * Note that by default, this sub-section is not a copy like {@see ArrayBuffer.prototype.slice},
   * it is a new {@see ArrayBufferSlice} object with the same underlying {@see ArrayBuffer}. However,
   * {@param copyData} can be passed in which will force a copy of the underlying {@see ArrayBuffer}.
   * This can be useful if there are plans to modify the underlying data, or if one wishes to save
   * off a small section of a larger buffer, letting the larger buffer get garbage collected.
   */
  slice(begin, end = 0, copyData = false) {
    const absBegin = this.byteOffset + begin;
    const absEnd = this.byteOffset + (end !== 0 ? end : this.byteLength);
    const byteLength = absEnd - absBegin;
    assert(byteLength >= 0 && byteLength <= this.byteLength);
    if (copyData)
      return new _ArrayBufferSlice(this.arrayBuffer.slice(absBegin, absEnd));
    else
      return new _ArrayBufferSlice(this.arrayBuffer, absBegin, byteLength);
  }
  /**
   * Return a sub-section of the buffer starting at byte offset {@param begin} and ending at byte
   * offset {@param end}. If no value is provided for end, or it is {@constant 0}, then the end is
   * the same as this {@see ArrayBufferSlice}.
   *
   * If you want a sub-section from a begin and *end* byte offset pair, see {@see slice}.
   *
   * Note that by default, this sub-section is not a copy like {@see ArrayBuffer.prototype.slice},
   * it is a new {@see ArrayBufferSlice} object with the same underlying {@see ArrayBuffer}. However,
   * {@param copyData} can be passed in which will force a copy of the underlying {@see ArrayBuffer}.
   * This can be useful if there are plans to modify the underlying data, or if one wishes to save
   * off a small section of a larger buffer, letting the larger buffer get garbage collected.
   */
  subarray(begin, byteLength, copyData = false) {
    const absBegin = this.byteOffset + begin;
    if (byteLength === void 0)
      byteLength = this.byteLength - begin;
    assert(byteLength >= 0 && byteLength <= this.byteLength);
    if (copyData)
      return new _ArrayBufferSlice(this.arrayBuffer.slice(absBegin, absBegin + byteLength));
    else
      return new _ArrayBufferSlice(this.arrayBuffer, absBegin, byteLength);
  }
  /**
   * Return a copy of the sub-section of the array starting at byte offset {@param begin} and with
   * length {@param byteLength}. If no value is provided for {@param begin}, then the sub-section
   * will start where this {@see ArrayBufferSlice} does. If no value is provided for
   * {@param byteLength}, then this sub-section will end where this {@see ArrayBufferSlice} does.
   *
   * Note that this will make a copy of the underlying ArrayBuffer. This should be used sparingly.
   *
   * A good use case for this is if you wish to save off a smaller portion of a larger buffer while
   * letting the larger buffer be garbage collected.
   */
  copyToBuffer(begin = 0, byteLength) {
    const absBegin = this.byteOffset + begin;
    if (byteLength === void 0)
      byteLength = this.byteLength - begin;
    return this.arrayBuffer.slice(absBegin, absBegin + byteLength);
  }
  createDataView(offs = 0, length) {
    if (offs === 0 && length === void 0) {
      return new DataView(this.arrayBuffer, this.byteOffset, this.byteLength);
    } else {
      return this.subarray(offs, length).createDataView();
    }
  }
  bswap16() {
    assert(this.byteLength % 2 === 0);
    const a = this.createTypedArray(Uint8Array);
    const o = new Uint8Array(this.byteLength);
    for (let i = 0; i < a.byteLength; i += 2) {
      o[i + 0] = a[i + 1];
      o[i + 1] = a[i + 0];
    }
    return new _ArrayBufferSlice(o.buffer);
  }
  bswap32() {
    assert(this.byteLength % 4 === 0);
    const a = this.createTypedArray(Uint8Array);
    const o = new Uint8Array(a.byteLength);
    for (let i = 0; i < a.byteLength; i += 4) {
      o[i + 0] = a[i + 3];
      o[i + 1] = a[i + 2];
      o[i + 2] = a[i + 1];
      o[i + 3] = a[i + 0];
    }
    return new _ArrayBufferSlice(o.buffer);
  }
  bswap(componentSize) {
    if (componentSize === 2) {
      return this.bswap16();
    } else if (componentSize === 4) {
      return this.bswap32();
    } else {
      throw new Error("Invalid componentSize");
    }
  }
  convertFromEndianness(endianness, componentSize) {
    if (componentSize !== 1 && endianness !== getSystemEndianness())
      return this.bswap(componentSize);
    else
      return this;
  }
  createTypedArray(clazz, offs = 0, count, endianness = 0 /* LITTLE_ENDIAN */) {
    const begin = this.byteOffset + offs;
    let byteLength;
    if (count !== void 0) {
      byteLength = clazz.BYTES_PER_ELEMENT * count;
    } else {
      byteLength = this.byteLength - offs;
      count = byteLength / clazz.BYTES_PER_ELEMENT;
      assert((count | 0) === count);
    }
    const componentSize = clazz.BYTES_PER_ELEMENT;
    const needsEndianSwap = componentSize > 1 && endianness !== getSystemEndianness();
    if (needsEndianSwap) {
      const componentSize_ = componentSize;
      const copy = this.subarray(offs, byteLength).bswap(componentSize_);
      return copy.createTypedArray(clazz);
    } else if (isAligned(begin, componentSize)) {
      return new clazz(this.arrayBuffer, begin, count);
    } else {
      return new clazz(this.copyToBuffer(offs, byteLength), 0);
    }
  }
};

// src/pack.ts
var activePack = null;
var packEnabled = true;
function normalizePackPath(path) {
  return path.replace(/^\.\//, "").replace(/^\//, "");
}
function joinBasePath(basePath, path) {
  const normalized = normalizePackPath(path);
  const normalizedBase = basePath.replace(/\/+$/, "");
  if (!basePath) {
    return normalized;
  }
  if (normalizedBase && (normalized === normalizedBase || normalized.startsWith(`${normalizedBase}/`))) {
    return normalized;
  }
  if (/^https?:\/\//.test(normalized)) {
    return normalized;
  }
  return `${normalizedBase}/${normalized}`;
}
function setActivePack(pack) {
  activePack = pack;
}
function setPackEnabled(enabled) {
  packEnabled = enabled;
}
function getActivePack() {
  return activePack;
}
function getPackStageEnv(stageId) {
  if (!packEnabled || !activePack?.manifest.stageEnv) {
    return null;
  }
  return activePack.manifest.stageEnv[String(stageId)] ?? null;
}
function getPackCourseData() {
  if (!packEnabled) {
    return null;
  }
  return activePack?.manifest.courses ?? null;
}
function getPackStageTimeOverride(stageId) {
  if (!packEnabled) {
    return null;
  }
  const override = activePack?.manifest.content?.stageTimeOverrides?.[String(stageId)];
  if (override === void 0) {
    return null;
  }
  return override === null ? 0 : override;
}
function getPackStageBasePath(gameSource) {
  if (!activePack) {
    return null;
  }
  if (!packEnabled) {
    return null;
  }
  if (activePack.manifest.gameSource !== gameSource) {
    return null;
  }
  return activePack.basePath;
}
function hasPackForGameSource(gameSource) {
  return !!packEnabled && activePack?.manifest.gameSource === gameSource;
}
async function fetchPackSlice(path) {
  const pack = activePack;
  const normalized = normalizePackPath(path);
  const defaultBasePaths = Object.values(STAGE_BASE_PATHS).map((base) => normalizePackPath(base));
  const isDefaultPath = defaultBasePaths.some((base) => normalized === base || normalized.startsWith(`${base}/`));
  if (pack && isDefaultPath) {
    const response = await fetch(path);
    if (!response.ok) {
      throw new Error(`Failed to load ${path}: ${response.status} ${response.statusText}`);
    }
    return new ArrayBufferSlice(await response.arrayBuffer());
  }
  if (!pack) {
    const response = await fetch(path);
    if (!response.ok) {
      throw new Error(`Failed to load ${path}: ${response.status} ${response.statusText}`);
    }
    return new ArrayBufferSlice(await response.arrayBuffer());
  }
  const resolved = joinBasePath(pack.basePath, normalized);
  return new ArrayBufferSlice(await pack.provider.fetch(resolved));
}
async function fetchPackBuffer(path) {
  const slice = await fetchPackSlice(path);
  return slice.arrayBuffer.slice(slice.byteOffset, slice.byteOffset + slice.byteLength);
}
async function loadPackFromUrl(url) {
  if (url.endsWith(".zip")) {
    const response2 = await fetch(url);
    if (!response2.ok) {
      throw new Error(`Failed to load pack: ${response2.status} ${response2.statusText}`);
    }
    const buffer = await response2.arrayBuffer();
    return loadPackFromZipBuffer(buffer, "");
  }
  const basePath = url.endsWith("/") || url.endsWith("pack.json") ? url.replace(/\/pack\.json$/, "") : url;
  const response = await fetch(`${basePath.replace(/\/+$/, "")}/pack.json`);
  if (!response.ok) {
    throw new Error(`Failed to load pack.json: ${response.status} ${response.statusText}`);
  }
  const manifest = await response.json();
  const provider = {
    fetch: async (path) => {
      const res = await fetch(path);
      if (!res.ok) {
        throw new Error(`Failed to load ${path}: ${res.status} ${res.statusText}`);
      }
      return res.arrayBuffer();
    }
  };
  return { manifest, provider, basePath: manifest.basePath ?? basePath };
}
async function loadPackFromZipFile(file) {
  const buffer = await file.arrayBuffer();
  return loadPackFromZipBuffer(buffer, "");
}
async function loadPackFromFileList(fileList) {
  const files = Array.from(fileList);
  const map = /* @__PURE__ */ new Map();
  for (const file of files) {
    const rawPath = file.webkitRelativePath || file.name;
    const normalized = normalizePackPath(rawPath.replace(/^[^/]+\//, ""));
    map.set(normalized, file);
  }
  const manifestFile = map.get("pack.json");
  if (!manifestFile) {
    throw new Error("pack.json not found in selected folder");
  }
  const manifest = JSON.parse(await manifestFile.text());
  const provider = {
    fetch: async (path) => {
      const normalized = normalizePackPath(path);
      const file = map.get(normalized);
      if (!file) {
        throw new Error(`Missing pack entry: ${normalized}`);
      }
      return file.arrayBuffer();
    }
  };
  return { manifest, provider, basePath: "" };
}
function loadPackFromZipBuffer(buffer, basePath) {
  const entries = unzipSync(new Uint8Array(buffer));
  const map = /* @__PURE__ */ new Map();
  for (const [name, data] of Object.entries(entries)) {
    map.set(normalizePackPath(name), data);
  }
  const manifestBytes = map.get("pack.json");
  if (!manifestBytes) {
    throw new Error("pack.json not found in zip");
  }
  const manifest = JSON.parse(new TextDecoder("utf-8").decode(manifestBytes));
  const provider = {
    fetch: async (path) => {
      const normalized = normalizePackPath(path);
      const entry = map.get(normalized);
      if (!entry) {
        throw new Error(`Missing pack entry: ${normalized}`);
      }
      return entry.buffer.slice(entry.byteOffset, entry.byteOffset + entry.byteLength);
    }
  };
  return { manifest, provider, basePath };
}

// src/course_smb2.ts
var SMB2_CHALLENGE_ORDER = {
  "beginner": [201, 202, 203, 204, 205, 206, 207, 208, 209, 210],
  "advanced": [
    221,
    222,
    223,
    224,
    225,
    226,
    227,
    228,
    229,
    230,
    231,
    232,
    233,
    234,
    235,
    236,
    237,
    238,
    239,
    240,
    241,
    242,
    243,
    244,
    245,
    246,
    247,
    248,
    249,
    250
  ],
  "expert": [
    261,
    262,
    263,
    264,
    265,
    266,
    267,
    268,
    269,
    270,
    271,
    272,
    273,
    274,
    275,
    276,
    277,
    278,
    279,
    280,
    281,
    282,
    283,
    284,
    285,
    286,
    287,
    288,
    289,
    290,
    291,
    292,
    293,
    294,
    295,
    296,
    297,
    298,
    299,
    300,
    301,
    302,
    303,
    304,
    305,
    306,
    307,
    308,
    309,
    310
  ],
  "beginner-extra": [211, 212, 213, 214, 215, 216, 217, 218, 219, 220],
  "advanced-extra": [251, 252, 253, 254, 255, 256, 257, 258, 259, 260],
  "expert-extra": [311, 312, 313, 314, 315, 316, 317, 318, 319, 320],
  "master": [321, 322, 323, 324, 325, 326, 327, 328, 329, 330],
  "master-extra": [331, 332, 333, 334, 335, 336, 337, 338, 339, 340]
};
var SMB2_STORY_ORDER = [
  [201, 202, 203, 204, 1, 2, 3, 4, 5, 6],
  [7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
  [231, 232, 233, 234, 235, 236, 237, 238, 239, 17],
  [18, 19, 20, 21, 22, 23, 24, 25, 26, 27],
  [28, 29, 30, 31, 32, 33, 34, 35, 36, 37],
  [38, 39, 40, 41, 42, 43, 44, 45, 46, 47],
  [281, 282, 283, 284, 285, 286, 287, 288, 289, 48],
  [49, 50, 51, 52, 53, 54, 55, 56, 57, 58],
  [59, 60, 61, 62, 63, 64, 65, 66, 67, 68],
  [341, 342, 343, 344, 345, 346, 347, 348, 349, 350]
];
var SMB2_CHALLENGE_BONUS = Object.fromEntries(
  Object.entries(SMB2_CHALLENGE_ORDER).map(([key, list]) => [
    key,
    list.map((_id, index) => {
      const stageNumber = index + 1;
      if (stageNumber === 5) {
        return true;
      }
      if (stageNumber % 10 === 0) {
        return stageNumber !== list.length;
      }
      return false;
    })
  ])
);
function computeChallengeBonusFlags(list) {
  return list.map((_id, index) => {
    const stageNumber = index + 1;
    if (stageNumber === 5) {
      return true;
    }
    if (stageNumber % 10 === 0) {
      return stageNumber !== list.length;
    }
    return false;
  });
}
function normalizeBonusFlags(list, flags) {
  if (!flags || flags.length === 0) {
    return computeChallengeBonusFlags(list);
  }
  const normalized = flags.slice(0, list.length);
  while (normalized.length < list.length) {
    normalized.push(false);
  }
  return normalized;
}
function getPackCourses() {
  if (!hasPackForGameSource(GAME_SOURCES.SMB2)) {
    return null;
  }
  return getPackCourseData();
}
function flattenStoryOrder(order) {
  return order.reduce((acc, list) => acc.concat(list), []);
}
function getStoryIndex(order, worldIndex, stageIndex) {
  if (order.length === 0) {
    return 0;
  }
  const safeWorld = clampIndex(worldIndex, order.length);
  const worldStages = order[safeWorld] ?? [];
  const safeStage = clampIndex(stageIndex, worldStages.length);
  let index = safeStage;
  for (let i = 0; i < safeWorld; i += 1) {
    index += order[i]?.length ?? 0;
  }
  return index;
}
function clampIndex(value, max2) {
  if (max2 <= 0) {
    return 0;
  }
  return Math.max(0, Math.min(max2 - 1, value));
}
function titleCaseDifficulty(difficulty) {
  return difficulty.split("-").map((part) => part.charAt(0).toUpperCase() + part.slice(1)).join(" ");
}
var Smb2Course = class {
  currentStageId;
  mode;
  stageList;
  bonusFlags;
  currentIndex;
  difficultyLabel;
  constructor(config) {
    this.mode = config.mode;
    this.difficultyLabel = null;
    const packCourses = getPackCourses();
    if (config.mode === "challenge") {
      const packOrder = packCourses?.challenge?.order?.[config.difficulty];
      const list = packOrder ?? SMB2_CHALLENGE_ORDER[config.difficulty] ?? [];
      this.stageList = list.slice();
      const packBonus = packCourses?.challenge?.bonus?.[config.difficulty];
      const defaultBonus = SMB2_CHALLENGE_BONUS[config.difficulty];
      this.bonusFlags = normalizeBonusFlags(this.stageList, packBonus ?? defaultBonus);
      this.currentIndex = clampIndex(config.stageIndex, this.stageList.length);
      this.difficultyLabel = titleCaseDifficulty(config.difficulty);
    } else {
      const storyOrder = packCourses?.story ?? SMB2_STORY_ORDER;
      this.stageList = flattenStoryOrder(storyOrder);
      this.bonusFlags = [];
      const storyIndex = getStoryIndex(storyOrder, config.worldIndex, config.stageIndex);
      this.currentIndex = clampIndex(storyIndex, this.stageList.length);
    }
    this.currentStageId = this.stageList[this.currentIndex] ?? 0;
  }
  getTimeLimitFrames() {
    if (hasPackForGameSource(GAME_SOURCES.SMB2)) {
      const override = getPackStageTimeOverride(this.currentStageId);
      if (override !== null) {
        return override;
      }
    }
    return DEFAULT_STAGE_TIME;
  }
  getStageLabel() {
    if (this.mode === "challenge") {
      const label = this.difficultyLabel ?? "Challenge";
      return `Challenge ${label} ${this.currentIndex + 1}`;
    }
    const world = Math.floor(this.currentIndex / 10) + 1;
    const stage = this.currentIndex % 10 + 1;
    return `Story W${world}-${stage}`;
  }
  getFloorInfo() {
    const total = this.stageList.length;
    const current = this.currentIndex + 1;
    return {
      current,
      total,
      prefix: "FLOOR",
      difficultyIndex: 2,
      difficultyIconIndex: 3,
      showDifficultyIcon: false,
      isFinal: current >= total
    };
  }
  isBonusStage() {
    if (this.mode !== "challenge") {
      return false;
    }
    return this.bonusFlags[this.currentIndex] ?? false;
  }
  advance(_info) {
    if (this.currentIndex + 1 >= this.stageList.length) {
      return false;
    }
    this.currentIndex += 1;
    this.currentStageId = this.stageList[this.currentIndex] ?? this.currentStageId;
    return true;
  }
};

// src/course_mb2ws.ts
var MB2WS_CHALLENGE_ENTRIES = {
  "beginner": [
    { id: 1 },
    { id: 2, time: 1800 },
    { id: 3 },
    { id: 4 },
    { id: 5, time: 12e3 },
    { id: 6 },
    { id: 7, time: 1800 },
    { id: 8 },
    { id: 9 },
    { id: 10, time: 12e3 },
    { id: 11, time: 1800 },
    { id: 12 },
    { id: 13 },
    { id: 14 },
    { id: 375 },
    { id: 16 },
    { id: 17 },
    { id: 18, time: 1800 },
    { id: 19 },
    { id: 20 }
  ],
  "advanced": [
    { id: 31, time: 1800 },
    { id: 32, time: 1800 },
    { id: 33 },
    { id: 34 },
    { id: 35, time: 12e3 },
    { id: 36, time: 1800 },
    { id: 37 },
    { id: 38 },
    { id: 39 },
    { id: 40, time: 12e3 },
    { id: 41 },
    { id: 42 },
    { id: 43, time: 1800 },
    { id: 44, time: 1800 },
    { id: 45 },
    { id: 46 },
    { id: 47 },
    { id: 48, time: 1800 },
    { id: 49, time: 1800 },
    { id: 50, time: 12e3 },
    { id: 51 },
    { id: 52 },
    { id: 53, time: 7200 },
    { id: 54 },
    { id: 55 },
    { id: 56 },
    { id: 57 },
    { id: 58, time: 1800 },
    { id: 59, time: 1800 },
    { id: 60, time: 12e3 },
    { id: 61, time: 1800 },
    { id: 62, time: 1800 },
    { id: 63 },
    { id: 64 },
    { id: 65 },
    { id: 66, time: 1800 },
    { id: 67 },
    { id: 68 },
    { id: 69 },
    { id: 70 }
  ],
  "expert": [
    { id: 81, time: 1800 },
    { id: 82, time: 1800 },
    { id: 83, time: 1800 },
    { id: 84, time: 1800 },
    { id: 85, time: 12e3 },
    { id: 86, time: 1800 },
    { id: 87, time: 1800 },
    { id: 88 },
    { id: 89 },
    { id: 90, time: 12e3 },
    { id: 91, time: 1800 },
    { id: 191 },
    { id: 93, time: 1800 },
    { id: 94, time: 1800 },
    { id: 95 },
    { id: 96, time: 1800 },
    { id: 97, time: 1800 },
    { id: 98, time: 1800 },
    { id: 99 },
    { id: 100, time: 12e3 },
    { id: 361, time: 1800 },
    { id: 362 },
    { id: 363 },
    { id: 364, time: 1800 },
    { id: 365, time: 1800 },
    { id: 366, time: 1800 },
    { id: 367 },
    { id: 368, time: 1800 },
    { id: 369 },
    { id: 370, time: 12e3 },
    { id: 181 },
    { id: 182, time: 1800 },
    { id: 183 },
    { id: 384 },
    { id: 185, time: 7200 },
    { id: 186 },
    { id: 187, time: 1800 },
    { id: 188, time: 1800 },
    { id: 189, time: 1800 },
    { id: 396, time: 12e3 },
    { id: 201 },
    { id: 202 },
    { id: 203 },
    { id: 204 },
    { id: 205 },
    { id: 206 },
    { id: 207 },
    { id: 208, time: 1800 },
    { id: 209 },
    { id: 210, time: 12e3 },
    { id: 211, time: 1800 },
    { id: 212 },
    { id: 213, time: 1800 },
    { id: 214, time: 1800 },
    { id: 215 },
    { id: 216, time: 1800 },
    { id: 217 },
    { id: 218 },
    { id: 219 },
    { id: 220 }
  ],
  "beginner-extra": [
    { id: 381, time: 1800 },
    { id: 22, time: 1800 },
    { id: 23, time: 1800 },
    { id: 24, time: 1800 },
    { id: 25, time: 1800 },
    { id: 26, time: 1800 },
    { id: 27, time: 1800 },
    { id: 28, time: 1800 },
    { id: 29, time: 1800 },
    { id: 30 }
  ],
  "advanced-extra": [
    { id: 71, time: 1800 },
    { id: 72, time: 1800 },
    { id: 73, time: 1800 },
    { id: 74, time: 1800 },
    { id: 75, time: 1800 },
    { id: 76, time: 1800 },
    { id: 77, time: 1800 },
    { id: 78, time: 1800 },
    { id: 79, time: 1800 },
    { id: 80 }
  ],
  "expert-extra": [
    { id: 221, time: 1800 },
    { id: 222, time: 1800 },
    { id: 223, time: 1800 },
    { id: 224, time: 1800 },
    { id: 225, time: 1800 },
    { id: 226, time: 1800 },
    { id: 227, time: 1800 },
    { id: 228, time: 1800 },
    { id: 389, time: 1800 },
    { id: 230 }
  ],
  "master": [
    { id: 231, time: 7200 },
    { id: 232, time: 7200 },
    { id: 233, time: 7200 },
    { id: 234, time: 7200 },
    { id: 235, time: 7200 },
    { id: 236, time: 7200 },
    { id: 237, time: 7200 },
    { id: 238, time: 7200 },
    { id: 239, time: 7200 },
    { id: 240, time: 7200 }
  ],
  "master-extra": [
    { id: 241, time: 7200 },
    { id: 242, time: 7200 },
    { id: 243, time: 7200 },
    { id: 244, time: 7200 },
    { id: 245, time: 7200 },
    { id: 246, time: 7200 },
    { id: 247, time: 7200 },
    { id: 248, time: 7200 },
    { id: 249, time: 7200 },
    { id: 250, time: 7200 }
  ]
};
var MB2WS_CHALLENGE_ORDER = Object.fromEntries(
  Object.entries(MB2WS_CHALLENGE_ENTRIES).map(([key, list]) => [key, list.map((entry) => entry.id)])
);
var MB2WS_CHALLENGE_BONUS = Object.fromEntries(
  Object.entries(MB2WS_CHALLENGE_ORDER).map(([key, list]) => [
    key,
    list.map((_id, index) => {
      const stageNumber = index + 1;
      if (stageNumber === 5) {
        return true;
      }
      if (stageNumber % 10 === 0) {
        return stageNumber !== list.length;
      }
      return false;
    })
  ])
);
var MB2WS_CHALLENGE_TIMERS = Object.fromEntries(
  Object.entries(MB2WS_CHALLENGE_ENTRIES).map(([key, list]) => [
    key,
    list.map((entry) => entry.time ?? null)
  ])
);
var MB2WS_STORY_ORDER = [
  [21, 102, 121, 122, 123, 131, 132, 133, 134, 135],
  [136, 137, 150, 161, 162, 163, 164, 165, 166, 167],
  [168, 169, 170, 171, 172, 173, 174, 175, 176, 177],
  [178, 192, 193, 194, 195, 321, 251, 252, 253, 254],
  [255, 256, 257, 258, 259, 260, 261, 262, 263, 264],
  [265, 266, 267, 268, 269, 270, 271, 272, 273, 274],
  [275, 276, 277, 278, 279, 281, 282, 283, 284, 285],
  [286, 287, 288, 289, 291, 292, 293, 294, 295, 296],
  [297, 298, 299, 301, 302, 303, 304, 305, 306, 307],
  [308, 309, 310, 311, 312, 313, 314, 315, 316, 317]
];
function computeChallengeBonusFlags2(list) {
  return list.map((_id, index) => {
    const stageNumber = index + 1;
    if (stageNumber === 5) {
      return true;
    }
    if (stageNumber % 10 === 0) {
      return stageNumber !== list.length;
    }
    return false;
  });
}
function normalizeBonusFlags2(list, flags) {
  if (!flags || flags.length === 0) {
    return computeChallengeBonusFlags2(list);
  }
  const normalized = flags.slice(0, list.length);
  while (normalized.length < list.length) {
    normalized.push(false);
  }
  return normalized;
}
function normalizeTimers(list, timers) {
  if (!timers || timers.length === 0) {
    return list.map(() => null);
  }
  const normalized = timers.slice(0, list.length);
  while (normalized.length < list.length) {
    normalized.push(null);
  }
  return normalized;
}
function getPackCourses2() {
  if (!hasPackForGameSource(GAME_SOURCES.MB2WS)) {
    return null;
  }
  return getPackCourseData();
}
function flattenStoryOrder2(order) {
  return order.reduce((acc, list) => acc.concat(list), []);
}
function getStoryIndex2(order, worldIndex, stageIndex) {
  if (order.length === 0) {
    return 0;
  }
  const safeWorld = clampIndex2(worldIndex, order.length);
  const worldStages = order[safeWorld] ?? [];
  const safeStage = clampIndex2(stageIndex, worldStages.length);
  let index = safeStage;
  for (let i = 0; i < safeWorld; i += 1) {
    index += order[i]?.length ?? 0;
  }
  return index;
}
function clampIndex2(value, max2) {
  if (max2 <= 0) {
    return 0;
  }
  return Math.max(0, Math.min(max2 - 1, value));
}
function titleCaseDifficulty2(difficulty) {
  return difficulty.split("-").map((part) => part.charAt(0).toUpperCase() + part.slice(1)).join(" ");
}
var Mb2wsCourse = class {
  currentStageId;
  mode;
  stageList;
  timeList;
  bonusFlags;
  currentIndex;
  difficultyLabel;
  constructor(config) {
    this.mode = config.mode;
    this.difficultyLabel = null;
    const packCourses = getPackCourses2();
    if (config.mode === "challenge") {
      const packOrder = packCourses?.challenge?.order?.[config.difficulty];
      const list = packOrder ?? MB2WS_CHALLENGE_ORDER[config.difficulty] ?? [];
      const packTimers = packCourses?.challenge?.timers?.[config.difficulty];
      const times = packTimers ?? MB2WS_CHALLENGE_TIMERS[config.difficulty] ?? [];
      this.stageList = list.slice();
      this.timeList = normalizeTimers(this.stageList, times);
      const packBonus = packCourses?.challenge?.bonus?.[config.difficulty];
      const defaultBonus = MB2WS_CHALLENGE_BONUS[config.difficulty];
      this.bonusFlags = normalizeBonusFlags2(this.stageList, packBonus ?? defaultBonus);
      this.currentIndex = clampIndex2(config.stageIndex, this.stageList.length);
      this.difficultyLabel = titleCaseDifficulty2(config.difficulty);
    } else {
      const storyOrder = packCourses?.story ?? MB2WS_STORY_ORDER;
      this.stageList = flattenStoryOrder2(storyOrder);
      this.timeList = [];
      this.bonusFlags = [];
      const storyIndex = getStoryIndex2(storyOrder, config.worldIndex, config.stageIndex);
      this.currentIndex = clampIndex2(storyIndex, this.stageList.length);
    }
    this.currentStageId = this.stageList[this.currentIndex] ?? 0;
  }
  getTimeLimitFrames() {
    if (hasPackForGameSource(GAME_SOURCES.MB2WS)) {
      const override = getPackStageTimeOverride(this.currentStageId);
      if (override !== null) {
        return override;
      }
    }
    if (this.mode === "challenge") {
      const override = this.timeList[this.currentIndex];
      if (override !== null && override !== void 0) {
        return override;
      }
    }
    return DEFAULT_STAGE_TIME;
  }
  getStageLabel() {
    if (this.mode === "challenge") {
      const label = this.difficultyLabel ?? "Challenge";
      return `Challenge ${label} ${this.currentIndex + 1}`;
    }
    const world = Math.floor(this.currentIndex / 10) + 1;
    const stage = this.currentIndex % 10 + 1;
    return `Story W${world}-${stage}`;
  }
  getFloorInfo() {
    const total = this.stageList.length;
    const current = this.currentIndex + 1;
    return {
      current,
      total,
      prefix: "FLOOR",
      difficultyIndex: 2,
      difficultyIconIndex: 3,
      showDifficultyIcon: false,
      isFinal: current >= total
    };
  }
  isBonusStage() {
    if (this.mode !== "challenge") {
      return false;
    }
    return this.bonusFlags[this.currentIndex] ?? false;
  }
  advance(_info) {
    if (this.currentIndex + 1 >= this.stageList.length) {
      return false;
    }
    this.currentIndex += 1;
    this.currentStageId = this.stageList[this.currentIndex] ?? this.currentStageId;
    return true;
  }
};

// src/lzs.ts
function lzssDecompress(buffer) {
  const view = new DataView(buffer);
  const srcSize = view.getUint32(0, true);
  const destSize = view.getUint32(4, true);
  if (!srcSize || !destSize) {
    return new Uint8Array();
  }
  const src = new Uint8Array(buffer, 8, srcSize - 8);
  const dest = new Uint8Array(destSize);
  const ring = new Uint8Array(4096);
  ring.fill(0);
  let bufPos = 4078;
  let flags = 0;
  let srcp = 0;
  let destp = 0;
  while (true) {
    flags >>= 1;
    if ((flags & 256) === 0) {
      if (srcp >= src.length) {
        break;
      }
      flags = src[srcp] | 65280;
      srcp += 1;
    }
    if (flags & 1) {
      if (srcp >= src.length) {
        break;
      }
      const byte = src[srcp];
      srcp += 1;
      dest[destp] = byte;
      ring[bufPos] = byte;
      bufPos = bufPos + 1 & 4095;
      destp += 1;
    } else {
      if (srcp + 1 >= src.length) {
        break;
      }
      let offset = src[srcp];
      const r8 = src[srcp + 1];
      srcp += 2;
      const length = (r8 & 15) + 2;
      offset |= (r8 & 240) << 4;
      for (let i = 0; i <= length; i += 1) {
        const byte = ring[offset + i & 4095];
        dest[destp] = byte;
        ring[bufPos] = byte;
        bufPos = bufPos + 1 & 4095;
        destp += 1;
      }
    }
  }
  return dest;
}

// src/noclip/SuperMonkeyBall/NaomiLib.ts
import { mat4 as mat44, vec2, vec3 as vec33 } from "gl-matrix";

// src/noclip/MathHelpers.ts
import { mat4, vec3 } from "gl-matrix";
var Vec3Zero = vec3.fromValues(0, 0, 0);
var Vec3One = vec3.fromValues(1, 1, 1);
var Vec3UnitX = vec3.fromValues(1, 0, 0);
var Vec3UnitY = vec3.fromValues(0, 1, 0);
var Vec3UnitZ = vec3.fromValues(0, 0, 1);
var Vec3NegX = vec3.fromValues(-1, 0, 0);
var Vec3NegY = vec3.fromValues(0, -1, 0);
var Vec3NegZ = vec3.fromValues(0, 0, -1);
var Mat4Identity = mat4.fromValues(
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  1
);
function transformVec3Mat4w1(dst, m, v) {
  const x = v[0], y = v[1], z = v[2];
  dst[0] = m[0] * x + m[4] * y + m[8] * z + m[12];
  dst[1] = m[1] * x + m[5] * y + m[9] * z + m[13];
  dst[2] = m[2] * x + m[6] * y + m[10] * z + m[14];
}
function transformVec3Mat4w0(dst, m, v) {
  const x = v[0], y = v[1], z = v[2];
  dst[0] = m[0] * x + m[4] * y + m[8] * z;
  dst[1] = m[1] * x + m[5] * y + m[9] * z;
  dst[2] = m[2] * x + m[6] * y + m[10] * z;
}
var scratchVec3a = vec3.create();
var scratchVec3b = vec3.create();
var scratchVec3c = vec3.create();
var scratchVec3d = vec3.create();
var scratchVec3e = vec3.create();
function clamp(v, min, max2) {
  return Math.max(min, Math.min(v, max2));
}
function lerp(a, b, t) {
  return a + (b - a) * t;
}
function invlerp(a, b, v) {
  return (v - a) / (b - a);
}
function smoothstep(t) {
  return t * t * (3 - t * 2);
}
function projectionMatrixForFrustum(m, left, right, bottom, top, near, far) {
  const rl = 1 / (right - left);
  const tb = 1 / (top - bottom);
  m[0] = near * 2 * rl;
  m[1] = 0;
  m[2] = 0;
  m[3] = 0;
  m[4] = 0;
  m[5] = near * 2 * tb;
  m[6] = 0;
  m[7] = 0;
  m[8] = (right + left) * rl;
  m[9] = (top + bottom) * tb;
  m[11] = -1;
  m[12] = 0;
  m[13] = 0;
  m[15] = 0;
  if (far !== Infinity) {
    const nf = 1 / (near - far);
    m[10] = (far + near) * nf;
    m[14] = far * near * 2 * nf;
  } else {
    m[10] = -1;
    m[14] = -2 * near;
  }
}
function projectionMatrixForCuboid(m, left, right, bottom, top, near, far) {
  const rl = 1 / (right - left);
  const tb = 1 / (top - bottom);
  const nf = 1 / (near - far);
  m[0] = 2 * rl;
  m[1] = 0;
  m[2] = 0;
  m[3] = 0;
  m[4] = 0;
  m[5] = 2 * tb;
  m[6] = 0;
  m[7] = 0;
  m[8] = 0;
  m[9] = 0;
  m[10] = 2 * nf;
  m[11] = 0;
  m[12] = -(right + left) * rl;
  m[13] = -(top + bottom) * tb;
  m[14] = (far + near) * nf;
  m[15] = 1;
}
function setMatrixTranslation(dst, v) {
  dst[12] = v[0];
  dst[13] = v[1];
  dst[14] = v[2];
}
var baseBuffer = new ArrayBuffer(4);
var asFloat32 = new Float32Array(baseBuffer);
var asUint32 = new Uint32Array(baseBuffer);

// src/noclip/Color.ts
function colorNewFromRGBA(r, g, b, a = 1) {
  return { r, g, b, a };
}
function colorFromRGBA(dst, r, g, b, a = 1) {
  dst.r = r;
  dst.g = g;
  dst.b = b;
  dst.a = a;
}
function colorCopy(dst, src, a = src.a) {
  dst.r = src.r;
  dst.g = src.g;
  dst.b = src.b;
  dst.a = a;
}
function colorNewCopy(src, a = src.a) {
  return { r: src.r, g: src.g, b: src.b, a };
}
function colorFromRGBA8(dst, n) {
  dst.r = (n >>> 24 & 255) / 255;
  dst.g = (n >>> 16 & 255) / 255;
  dst.b = (n >>> 8 & 255) / 255;
  dst.a = (n >>> 0 & 255) / 255;
}
function colorNewFromRGBA8(n) {
  const dst = colorNewFromRGBA(0, 0, 0, 0);
  colorFromRGBA8(dst, n);
  return dst;
}
function colorScale(dst, a, v) {
  dst.r = a.r * v;
  dst.g = a.g * v;
  dst.b = a.b * v;
  dst.a = a.a;
}
function colorMult(dst, a, b) {
  dst.g = a.g * b.g;
  dst.r = a.r * b.r;
  dst.b = a.b * b.b;
  dst.a = a.a * b.a;
}
function colorToRGBA8(src) {
  return (src.r * 255 << 24 | src.g * 255 << 16 | src.b * 255 << 8 | src.a * 255 << 0) >>> 0;
}
var TransparentBlack = colorNewFromRGBA(0, 0, 0, 0);
var OpaqueBlack = colorNewFromRGBA(0, 0, 0, 1);
var TransparentWhite = colorNewFromRGBA(1, 1, 1, 0);
var White = colorNewFromRGBA(1, 1, 1, 1);
var Red = colorNewFromRGBA(1, 0, 0, 1);
var Green = colorNewFromRGBA(0, 1, 0, 1);
var Blue = colorNewFromRGBA(0, 0, 1, 1);
var Magenta = colorNewFromRGBA(1, 0, 1, 1);
var Yellow = colorNewFromRGBA(1, 1, 0, 1);
var Cyan = colorNewFromRGBA(0, 1, 1, 1);

// src/noclip/gfx/platform/GfxPlatformFormat.ts
function getFormatCompFlagsComponentCount(n) {
  return n;
}
function makeFormat(type, comp, flags) {
  return type << 16 | comp << 8 | flags;
}
var GfxFormat = ((GfxFormat3) => {
  GfxFormat3[GfxFormat3["F16_R"] = makeFormat(7 /* F16 */, 1 /* R */, 0 /* None */)] = "F16_R";
  GfxFormat3[GfxFormat3["F16_RG"] = makeFormat(7 /* F16 */, 2 /* RG */, 0 /* None */)] = "F16_RG";
  GfxFormat3[GfxFormat3["F16_RGB"] = makeFormat(7 /* F16 */, 3 /* RGB */, 0 /* None */)] = "F16_RGB";
  GfxFormat3[GfxFormat3["F16_RGBA"] = makeFormat(7 /* F16 */, 4 /* RGBA */, 0 /* None */)] = "F16_RGBA";
  GfxFormat3[GfxFormat3["F32_R"] = makeFormat(8 /* F32 */, 1 /* R */, 0 /* None */)] = "F32_R";
  GfxFormat3[GfxFormat3["F32_RG"] = makeFormat(8 /* F32 */, 2 /* RG */, 0 /* None */)] = "F32_RG";
  GfxFormat3[GfxFormat3["F32_RGB"] = makeFormat(8 /* F32 */, 3 /* RGB */, 0 /* None */)] = "F32_RGB";
  GfxFormat3[GfxFormat3["F32_RGBA"] = makeFormat(8 /* F32 */, 4 /* RGBA */, 0 /* None */)] = "F32_RGBA";
  GfxFormat3[GfxFormat3["U8_R"] = makeFormat(1 /* U8 */, 1 /* R */, 0 /* None */)] = "U8_R";
  GfxFormat3[GfxFormat3["U8_R_NORM"] = makeFormat(1 /* U8 */, 1 /* R */, 1 /* Normalized */)] = "U8_R_NORM";
  GfxFormat3[GfxFormat3["U8_RG"] = makeFormat(1 /* U8 */, 2 /* RG */, 0 /* None */)] = "U8_RG";
  GfxFormat3[GfxFormat3["U8_RG_NORM"] = makeFormat(1 /* U8 */, 2 /* RG */, 1 /* Normalized */)] = "U8_RG_NORM";
  GfxFormat3[GfxFormat3["U8_RGB"] = makeFormat(1 /* U8 */, 3 /* RGB */, 0 /* None */)] = "U8_RGB";
  GfxFormat3[GfxFormat3["U8_RGB_NORM"] = makeFormat(1 /* U8 */, 3 /* RGB */, 1 /* Normalized */)] = "U8_RGB_NORM";
  GfxFormat3[GfxFormat3["U8_RGB_SRGB"] = makeFormat(1 /* U8 */, 3 /* RGB */, 3)] = "U8_RGB_SRGB";
  GfxFormat3[GfxFormat3["U8_RGBA"] = makeFormat(1 /* U8 */, 4 /* RGBA */, 0 /* None */)] = "U8_RGBA";
  GfxFormat3[GfxFormat3["U8_RGBA_NORM"] = makeFormat(1 /* U8 */, 4 /* RGBA */, 1 /* Normalized */)] = "U8_RGBA_NORM";
  GfxFormat3[GfxFormat3["U8_RGBA_SRGB"] = makeFormat(1 /* U8 */, 4 /* RGBA */, 3)] = "U8_RGBA_SRGB";
  GfxFormat3[GfxFormat3["U16_R"] = makeFormat(2 /* U16 */, 1 /* R */, 0 /* None */)] = "U16_R";
  GfxFormat3[GfxFormat3["U16_R_NORM"] = makeFormat(2 /* U16 */, 1 /* R */, 1 /* Normalized */)] = "U16_R_NORM";
  GfxFormat3[GfxFormat3["U16_RG_NORM"] = makeFormat(2 /* U16 */, 2 /* RG */, 1 /* Normalized */)] = "U16_RG_NORM";
  GfxFormat3[GfxFormat3["U16_RGBA_NORM"] = makeFormat(2 /* U16 */, 4 /* RGBA */, 1 /* Normalized */)] = "U16_RGBA_NORM";
  GfxFormat3[GfxFormat3["U16_RGB"] = makeFormat(2 /* U16 */, 3 /* RGB */, 0 /* None */)] = "U16_RGB";
  GfxFormat3[GfxFormat3["U32_R"] = makeFormat(3 /* U32 */, 1 /* R */, 0 /* None */)] = "U32_R";
  GfxFormat3[GfxFormat3["U32_RG"] = makeFormat(3 /* U32 */, 2 /* RG */, 0 /* None */)] = "U32_RG";
  GfxFormat3[GfxFormat3["S8_R"] = makeFormat(4 /* S8 */, 1 /* R */, 0 /* None */)] = "S8_R";
  GfxFormat3[GfxFormat3["S8_RG"] = makeFormat(4 /* S8 */, 2 /* RG */, 0 /* None */)] = "S8_RG";
  GfxFormat3[GfxFormat3["S8_RGBA"] = makeFormat(4 /* S8 */, 4 /* RGBA */, 0 /* None */)] = "S8_RGBA";
  GfxFormat3[GfxFormat3["S8_R_NORM"] = makeFormat(4 /* S8 */, 1 /* R */, 1 /* Normalized */)] = "S8_R_NORM";
  GfxFormat3[GfxFormat3["S8_RG_NORM"] = makeFormat(4 /* S8 */, 2 /* RG */, 1 /* Normalized */)] = "S8_RG_NORM";
  GfxFormat3[GfxFormat3["S8_RGB_NORM"] = makeFormat(4 /* S8 */, 3 /* RGB */, 1 /* Normalized */)] = "S8_RGB_NORM";
  GfxFormat3[GfxFormat3["S8_RGBA_NORM"] = makeFormat(4 /* S8 */, 4 /* RGBA */, 1 /* Normalized */)] = "S8_RGBA_NORM";
  GfxFormat3[GfxFormat3["S16_R"] = makeFormat(5 /* S16 */, 1 /* R */, 0 /* None */)] = "S16_R";
  GfxFormat3[GfxFormat3["S16_RG"] = makeFormat(5 /* S16 */, 2 /* RG */, 0 /* None */)] = "S16_RG";
  GfxFormat3[GfxFormat3["S16_R_NORM"] = makeFormat(5 /* S16 */, 1 /* R */, 1 /* Normalized */)] = "S16_R_NORM";
  GfxFormat3[GfxFormat3["S16_RG_NORM"] = makeFormat(5 /* S16 */, 2 /* RG */, 1 /* Normalized */)] = "S16_RG_NORM";
  GfxFormat3[GfxFormat3["S16_RGB_NORM"] = makeFormat(5 /* S16 */, 3 /* RGB */, 1 /* Normalized */)] = "S16_RGB_NORM";
  GfxFormat3[GfxFormat3["S16_RGBA"] = makeFormat(5 /* S16 */, 4 /* RGBA */, 0 /* None */)] = "S16_RGBA";
  GfxFormat3[GfxFormat3["S16_RGBA_NORM"] = makeFormat(5 /* S16 */, 4 /* RGBA */, 1 /* Normalized */)] = "S16_RGBA_NORM";
  GfxFormat3[GfxFormat3["S32_R"] = makeFormat(6 /* S32 */, 1 /* R */, 0 /* None */)] = "S32_R";
  GfxFormat3[GfxFormat3["U16_RGBA_5551"] = makeFormat(97 /* U16_PACKED_5551 */, 4 /* RGBA */, 1 /* Normalized */)] = "U16_RGBA_5551";
  GfxFormat3[GfxFormat3["U16_RGB_565"] = makeFormat(98 /* U16_PACKED_565 */, 3 /* RGB */, 1 /* Normalized */)] = "U16_RGB_565";
  GfxFormat3[GfxFormat3["BC1"] = makeFormat(65 /* BC1 */, 4 /* RGBA */, 1 /* Normalized */)] = "BC1";
  GfxFormat3[GfxFormat3["BC1_SRGB"] = makeFormat(65 /* BC1 */, 4 /* RGBA */, 3)] = "BC1_SRGB";
  GfxFormat3[GfxFormat3["BC2"] = makeFormat(66 /* BC2 */, 4 /* RGBA */, 1 /* Normalized */)] = "BC2";
  GfxFormat3[GfxFormat3["BC2_SRGB"] = makeFormat(66 /* BC2 */, 4 /* RGBA */, 3)] = "BC2_SRGB";
  GfxFormat3[GfxFormat3["BC3"] = makeFormat(67 /* BC3 */, 4 /* RGBA */, 1 /* Normalized */)] = "BC3";
  GfxFormat3[GfxFormat3["BC3_SRGB"] = makeFormat(67 /* BC3 */, 4 /* RGBA */, 3)] = "BC3_SRGB";
  GfxFormat3[GfxFormat3["BC4_UNORM"] = makeFormat(68 /* BC4_UNORM */, 1 /* R */, 1 /* Normalized */)] = "BC4_UNORM";
  GfxFormat3[GfxFormat3["BC4_SNORM"] = makeFormat(69 /* BC4_SNORM */, 1 /* R */, 1 /* Normalized */)] = "BC4_SNORM";
  GfxFormat3[GfxFormat3["BC5_UNORM"] = makeFormat(70 /* BC5_UNORM */, 2 /* RG */, 1 /* Normalized */)] = "BC5_UNORM";
  GfxFormat3[GfxFormat3["BC5_SNORM"] = makeFormat(71 /* BC5_SNORM */, 2 /* RG */, 1 /* Normalized */)] = "BC5_SNORM";
  GfxFormat3[GfxFormat3["BC6H_UNORM"] = makeFormat(72 /* BC6H_UNORM */, 3 /* RGB */, 1 /* Normalized */)] = "BC6H_UNORM";
  GfxFormat3[GfxFormat3["BC6H_SNORM"] = makeFormat(73 /* BC6H_SNORM */, 3 /* RGB */, 1 /* Normalized */)] = "BC6H_SNORM";
  GfxFormat3[GfxFormat3["BC7"] = makeFormat(74 /* BC7 */, 4 /* RGBA */, 1 /* Normalized */)] = "BC7";
  GfxFormat3[GfxFormat3["BC7_SRGB"] = makeFormat(74 /* BC7 */, 4 /* RGBA */, 3)] = "BC7_SRGB";
  GfxFormat3[GfxFormat3["D24"] = makeFormat(129 /* D24 */, 1 /* R */, 4 /* Depth */)] = "D24";
  GfxFormat3[GfxFormat3["D24_S8"] = makeFormat(131 /* D24S8 */, 2 /* RG */, 12)] = "D24_S8";
  GfxFormat3[GfxFormat3["D32F"] = makeFormat(130 /* D32F */, 1 /* R */, 4 /* Depth */)] = "D32F";
  GfxFormat3[GfxFormat3["D32F_S8"] = makeFormat(132 /* D32FS8 */, 2 /* RG */, 12)] = "D32F_S8";
  GfxFormat3[GfxFormat3["U8_RGB_RT"] = makeFormat(1 /* U8 */, 3 /* RGB */, 17)] = "U8_RGB_RT";
  GfxFormat3[GfxFormat3["U8_RGBA_RT"] = makeFormat(1 /* U8 */, 4 /* RGBA */, 17)] = "U8_RGBA_RT";
  GfxFormat3[GfxFormat3["U8_RGBA_RT_SRGB"] = makeFormat(1 /* U8 */, 4 /* RGBA */, 19)] = "U8_RGBA_RT_SRGB";
  return GfxFormat3;
})(GfxFormat || {});
function getFormatCompFlags(fmt) {
  return fmt >>> 8 & 255;
}
function getFormatTypeFlags(fmt) {
  return fmt >>> 16 & 255;
}
function getFormatFlags(fmt) {
  return fmt & 255;
}
function getFormatTypeFlagsByteSize(typeFlags) {
  switch (typeFlags) {
    case 8 /* F32 */:
    case 3 /* U32 */:
    case 6 /* S32 */:
      return 4;
    case 2 /* U16 */:
    case 5 /* S16 */:
    case 7 /* F16 */:
      return 2;
    case 1 /* U8 */:
    case 4 /* S8 */:
      return 1;
    default:
      throw "whoops";
  }
}
function getFormatCompByteSize(fmt) {
  return getFormatTypeFlagsByteSize(getFormatTypeFlags(fmt));
}
function getFormatComponentCount(fmt) {
  return getFormatCompFlagsComponentCount(getFormatCompFlags(fmt));
}
function getFormatByteSize(fmt) {
  const typeFlags = getFormatTypeFlags(fmt);
  switch (typeFlags) {
    case 97 /* U16_PACKED_5551 */:
    case 98 /* U16_PACKED_565 */:
      return 2;
    case 65 /* BC1 */:
    case 66 /* BC2 */:
    case 67 /* BC3 */:
    case 68 /* BC4_UNORM */:
    case 69 /* BC4_SNORM */:
    case 70 /* BC5_UNORM */:
    case 71 /* BC5_SNORM */:
    case 74 /* BC7 */:
      throw "whoops";
    // Not valid to call on compressed texture formats...
    default:
      const typeByteSize = getFormatTypeFlagsByteSize(typeFlags);
      const componentCount = getFormatCompFlagsComponentCount(getFormatCompFlags(fmt));
      return typeByteSize * componentCount;
  }
}
function getFormatSamplerKind(fmt) {
  const flags = getFormatFlags(fmt);
  if (!!(flags & 4 /* Depth */))
    return 4 /* Depth */;
  if (!!(flags & 1 /* Normalized */))
    return 0 /* Float */;
  const typeFlags = getFormatTypeFlags(fmt);
  if (typeFlags === 8 /* F32 */)
    return 1 /* UnfilterableFloat */;
  else if (typeFlags === 7 /* F16 */)
    return 0 /* Float */;
  else if (typeFlags === 1 /* U8 */ || typeFlags === 2 /* U16 */ || typeFlags === 3 /* U32 */)
    return 2 /* Uint */;
  else if (typeFlags === 4 /* S8 */ || typeFlags === 5 /* S16 */ || typeFlags === 6 /* S32 */)
    return 3 /* Sint */;
  else
    throw "whoops";
}

// src/noclip/gfx/platform/GfxPlatform.ts
var GfxCompareMode = ((GfxCompareMode2) => {
  GfxCompareMode2[GfxCompareMode2["Never"] = WebGLRenderingContext.NEVER] = "Never";
  GfxCompareMode2[GfxCompareMode2["Less"] = WebGLRenderingContext.LESS] = "Less";
  GfxCompareMode2[GfxCompareMode2["Equal"] = WebGLRenderingContext.EQUAL] = "Equal";
  GfxCompareMode2[GfxCompareMode2["LessEqual"] = WebGLRenderingContext.LEQUAL] = "LessEqual";
  GfxCompareMode2[GfxCompareMode2["Greater"] = WebGLRenderingContext.GREATER] = "Greater";
  GfxCompareMode2[GfxCompareMode2["NotEqual"] = WebGLRenderingContext.NOTEQUAL] = "NotEqual";
  GfxCompareMode2[GfxCompareMode2["GreaterEqual"] = WebGLRenderingContext.GEQUAL] = "GreaterEqual";
  GfxCompareMode2[GfxCompareMode2["Always"] = WebGLRenderingContext.ALWAYS] = "Always";
  return GfxCompareMode2;
})(GfxCompareMode || {});
var GfxFrontFaceMode = ((GfxFrontFaceMode2) => {
  GfxFrontFaceMode2[GfxFrontFaceMode2["CCW"] = WebGLRenderingContext.CCW] = "CCW";
  GfxFrontFaceMode2[GfxFrontFaceMode2["CW"] = WebGLRenderingContext.CW] = "CW";
  return GfxFrontFaceMode2;
})(GfxFrontFaceMode || {});
var GfxBlendFactor = ((GfxBlendFactor2) => {
  GfxBlendFactor2[GfxBlendFactor2["Zero"] = WebGLRenderingContext.ZERO] = "Zero";
  GfxBlendFactor2[GfxBlendFactor2["One"] = WebGLRenderingContext.ONE] = "One";
  GfxBlendFactor2[GfxBlendFactor2["Src"] = WebGLRenderingContext.SRC_COLOR] = "Src";
  GfxBlendFactor2[GfxBlendFactor2["OneMinusSrc"] = WebGLRenderingContext.ONE_MINUS_SRC_COLOR] = "OneMinusSrc";
  GfxBlendFactor2[GfxBlendFactor2["Dst"] = WebGLRenderingContext.DST_COLOR] = "Dst";
  GfxBlendFactor2[GfxBlendFactor2["OneMinusDst"] = WebGLRenderingContext.ONE_MINUS_DST_COLOR] = "OneMinusDst";
  GfxBlendFactor2[GfxBlendFactor2["SrcAlpha"] = WebGLRenderingContext.SRC_ALPHA] = "SrcAlpha";
  GfxBlendFactor2[GfxBlendFactor2["OneMinusSrcAlpha"] = WebGLRenderingContext.ONE_MINUS_SRC_ALPHA] = "OneMinusSrcAlpha";
  GfxBlendFactor2[GfxBlendFactor2["DstAlpha"] = WebGLRenderingContext.DST_ALPHA] = "DstAlpha";
  GfxBlendFactor2[GfxBlendFactor2["OneMinusDstAlpha"] = WebGLRenderingContext.ONE_MINUS_DST_ALPHA] = "OneMinusDstAlpha";
  GfxBlendFactor2[GfxBlendFactor2["ConstantColor"] = WebGLRenderingContext.CONSTANT_COLOR] = "ConstantColor";
  GfxBlendFactor2[GfxBlendFactor2["OneMinusConstantColor"] = WebGLRenderingContext.ONE_MINUS_CONSTANT_COLOR] = "OneMinusConstantColor";
  return GfxBlendFactor2;
})(GfxBlendFactor || {});
var GfxBlendMode = ((GfxBlendMode2) => {
  GfxBlendMode2[GfxBlendMode2["Add"] = WebGLRenderingContext.FUNC_ADD] = "Add";
  GfxBlendMode2[GfxBlendMode2["Subtract"] = WebGLRenderingContext.FUNC_SUBTRACT] = "Subtract";
  GfxBlendMode2[GfxBlendMode2["ReverseSubtract"] = WebGLRenderingContext.FUNC_REVERSE_SUBTRACT] = "ReverseSubtract";
  return GfxBlendMode2;
})(GfxBlendMode || {});
var GfxChannelWriteMask = /* @__PURE__ */ ((GfxChannelWriteMask2) => {
  GfxChannelWriteMask2[GfxChannelWriteMask2["None"] = 0] = "None";
  GfxChannelWriteMask2[GfxChannelWriteMask2["Red"] = 1] = "Red";
  GfxChannelWriteMask2[GfxChannelWriteMask2["Green"] = 2] = "Green";
  GfxChannelWriteMask2[GfxChannelWriteMask2["Blue"] = 4] = "Blue";
  GfxChannelWriteMask2[GfxChannelWriteMask2["Alpha"] = 8] = "Alpha";
  GfxChannelWriteMask2[GfxChannelWriteMask2["RGB"] = 7] = "RGB";
  GfxChannelWriteMask2[GfxChannelWriteMask2["AllChannels"] = 15] = "AllChannels";
  return GfxChannelWriteMask2;
})(GfxChannelWriteMask || {});
var GfxStencilOp = ((GfxStencilOp2) => {
  GfxStencilOp2[GfxStencilOp2["Keep"] = WebGLRenderingContext.KEEP] = "Keep";
  GfxStencilOp2[GfxStencilOp2["Zero"] = WebGLRenderingContext.ZERO] = "Zero";
  GfxStencilOp2[GfxStencilOp2["Replace"] = WebGLRenderingContext.REPLACE] = "Replace";
  GfxStencilOp2[GfxStencilOp2["Invert"] = WebGLRenderingContext.INVERT] = "Invert";
  GfxStencilOp2[GfxStencilOp2["IncrementClamp"] = WebGLRenderingContext.INCR] = "IncrementClamp";
  GfxStencilOp2[GfxStencilOp2["DecrementClamp"] = WebGLRenderingContext.DECR] = "DecrementClamp";
  GfxStencilOp2[GfxStencilOp2["IncrementWrap"] = WebGLRenderingContext.INCR_WRAP] = "IncrementWrap";
  GfxStencilOp2[GfxStencilOp2["DecrementWrap"] = WebGLRenderingContext.DECR_WRAP] = "DecrementWrap";
  return GfxStencilOp2;
})(GfxStencilOp || {});
function makeTextureDescriptor2D(pixelFormat, width, height, numLevels) {
  const dimension = 0 /* n2D */, depth = 1;
  const usage = 1 /* Sampled */;
  return { dimension, pixelFormat, width, height, depthOrArrayLayers: depth, numLevels, usage };
}

// src/noclip/gfx/helpers/ReversedDepthHelpers.ts
import { mat4 as mat42 } from "gl-matrix";
var IsDepthReversed = true;
var reverseDepthMatrix = mat42.fromValues(
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  -1,
  0,
  0,
  0,
  0,
  1
);
function projectionMatrixReverseDepth(m, isDepthReversed = IsDepthReversed) {
  if (isDepthReversed)
    mat42.mul(m, reverseDepthMatrix, m);
}
function reverseDepthForCompareMode(compareMode, isDepthReversed = IsDepthReversed) {
  if (isDepthReversed) {
    switch (compareMode) {
      case GfxCompareMode.Less:
        return GfxCompareMode.Greater;
      case GfxCompareMode.LessEqual:
        return GfxCompareMode.GreaterEqual;
      case GfxCompareMode.GreaterEqual:
        return GfxCompareMode.LessEqual;
      case GfxCompareMode.Greater:
        return GfxCompareMode.Less;
      default:
        return compareMode;
    }
  } else {
    return compareMode;
  }
}
function reverseDepthForClearValue(n, isDepthReversed = IsDepthReversed) {
  if (isDepthReversed) {
    return 1 - n;
  } else {
    return n;
  }
}

// src/noclip/gfx/platform/GfxPlatformUtil.ts
function assert2(b, message = "") {
  if (!b) {
    console.error(new Error().stack);
    throw new Error(`Assert fail: ${message}`);
  }
}
function assertExists2(v) {
  if (v !== void 0 && v !== null)
    return v;
  else
    throw new Error("Missing object");
}
function leftPad2(S, spaces, ch = "0") {
  return S.padStart(spaces, ch);
}
function nArray2(n, c) {
  const d = new Array(n);
  for (let i = 0; i < n; i++)
    d[i] = c();
  return d;
}
function nullify2(v) {
  return v === void 0 ? null : v;
}
function align2(n, multiple) {
  const mask = multiple - 1;
  return n + mask & ~mask;
}
function alignNonPowerOfTwo(n, multiple) {
  return ((n + multiple - 1) / multiple | 0) * multiple;
}
function fallbackUndefined2(v, fallback) {
  return v !== null && v !== void 0 ? v : fallback;
}
function findall(haystack, needle) {
  const results = [];
  while (true) {
    const result = needle.exec(haystack);
    if (!result)
      break;
    results.push(result);
  }
  return results;
}

// src/noclip/gfx/helpers/GfxMegaStateDescriptorHelpers.ts
function copyChannelBlendState(dst, src) {
  dst.blendDstFactor = src.blendDstFactor;
  dst.blendSrcFactor = src.blendSrcFactor;
  dst.blendMode = src.blendMode;
}
function copyAttachmentState(dst, src) {
  if (dst === void 0) {
    dst = {
      rgbBlendState: {},
      alphaBlendState: {},
      channelWriteMask: 0
    };
  }
  copyChannelBlendState(dst.rgbBlendState, src.rgbBlendState);
  copyChannelBlendState(dst.alphaBlendState, src.alphaBlendState);
  dst.channelWriteMask = src.channelWriteMask;
  return dst;
}
function copyAttachmentsState(dst, src) {
  if (dst.length !== src.length)
    dst.length = src.length;
  for (let i = 0; i < src.length; i++)
    dst[i] = copyAttachmentState(dst[i], src[i]);
}
function setMegaStateFlags(dst, src) {
  if (src.attachmentsState !== void 0)
    copyAttachmentsState(dst.attachmentsState, src.attachmentsState);
  dst.depthCompare = fallbackUndefined2(src.depthCompare, dst.depthCompare);
  dst.depthWrite = fallbackUndefined2(src.depthWrite, dst.depthWrite);
  dst.stencilCompare = fallbackUndefined2(src.stencilCompare, dst.stencilCompare);
  dst.stencilWrite = fallbackUndefined2(src.stencilWrite, dst.stencilWrite);
  dst.stencilPassOp = fallbackUndefined2(src.stencilPassOp, dst.stencilPassOp);
  dst.cullMode = fallbackUndefined2(src.cullMode, dst.cullMode);
  dst.frontFace = fallbackUndefined2(src.frontFace, dst.frontFace);
  dst.polygonOffset = fallbackUndefined2(src.polygonOffset, dst.polygonOffset);
  dst.wireframe = fallbackUndefined2(src.wireframe, dst.wireframe);
}
function copyMegaState(src) {
  const dst = Object.assign({}, src);
  dst.attachmentsState = [];
  copyAttachmentsState(dst.attachmentsState, src.attachmentsState);
  return dst;
}
function makeMegaState(other = null, src = defaultMegaState) {
  const dst = copyMegaState(src);
  if (other !== null)
    setMegaStateFlags(dst, other);
  return dst;
}
function copyAttachmentStateFromSimple(dst, src) {
  if (src.channelWriteMask !== void 0)
    dst.channelWriteMask = src.channelWriteMask;
  if (src.blendMode !== void 0) {
    dst.rgbBlendState.blendMode = src.blendMode;
    dst.alphaBlendState.blendMode = src.blendMode;
  }
  if (src.blendSrcFactor !== void 0) {
    dst.rgbBlendState.blendSrcFactor = src.blendSrcFactor;
    dst.alphaBlendState.blendSrcFactor = src.blendSrcFactor;
  }
  if (src.blendDstFactor !== void 0) {
    dst.rgbBlendState.blendDstFactor = src.blendDstFactor;
    dst.alphaBlendState.blendDstFactor = src.blendDstFactor;
  }
}
function setAttachmentStateSimple(dst, simple) {
  if (dst.attachmentsState === void 0) {
    dst.attachmentsState = [];
    copyAttachmentsState(dst.attachmentsState, defaultMegaState.attachmentsState);
  }
  copyAttachmentStateFromSimple(dst.attachmentsState[0], simple);
  return dst;
}
var defaultBlendState = {
  blendMode: GfxBlendMode.Add,
  blendSrcFactor: GfxBlendFactor.One,
  blendDstFactor: GfxBlendFactor.Zero
};
var defaultMegaState = {
  attachmentsState: [{
    channelWriteMask: 7 /* RGB */,
    rgbBlendState: defaultBlendState,
    alphaBlendState: defaultBlendState
  }],
  depthCompare: reverseDepthForCompareMode(GfxCompareMode.LessEqual),
  depthWrite: true,
  stencilCompare: GfxCompareMode.Always,
  stencilWrite: false,
  stencilPassOp: GfxStencilOp.Keep,
  cullMode: 0 /* None */,
  frontFace: GfxFrontFaceMode.CCW,
  polygonOffset: false,
  wireframe: false
};
var fullscreenMegaState = makeMegaState({ depthCompare: GfxCompareMode.Always, depthWrite: false }, defaultMegaState);

// src/noclip/gx/gx_enum.ts
var TexFormat = /* @__PURE__ */ ((TexFormat2) => {
  TexFormat2[TexFormat2["I4"] = 0] = "I4";
  TexFormat2[TexFormat2["I8"] = 1] = "I8";
  TexFormat2[TexFormat2["IA4"] = 2] = "IA4";
  TexFormat2[TexFormat2["IA8"] = 3] = "IA8";
  TexFormat2[TexFormat2["RGB565"] = 4] = "RGB565";
  TexFormat2[TexFormat2["RGB5A3"] = 5] = "RGB5A3";
  TexFormat2[TexFormat2["RGBA8"] = 6] = "RGBA8";
  TexFormat2[TexFormat2["C4"] = 8] = "C4";
  TexFormat2[TexFormat2["C8"] = 9] = "C8";
  TexFormat2[TexFormat2["C14X2"] = 10] = "C14X2";
  TexFormat2[TexFormat2["CMPR"] = 14] = "CMPR";
  return TexFormat2;
})(TexFormat || {});
var TexPalette = /* @__PURE__ */ ((TexPalette2) => {
  TexPalette2[TexPalette2["IA8"] = 0] = "IA8";
  TexPalette2[TexPalette2["RGB565"] = 1] = "RGB565";
  TexPalette2[TexPalette2["RGB5A3"] = 2] = "RGB5A3";
  return TexPalette2;
})(TexPalette || {});

// src/noclip/gx/gx_render.ts
import { mat4 as mat43 } from "gl-matrix";

// src/noclip/gx/gx_material.ts
import { vec3 as vec32 } from "gl-matrix";

// src/noclip/HashMap.ts
function hashCodeNumberUpdate(hash, v) {
  hash += v;
  hash += hash << 10;
  hash += hash >>> 6;
  return hash >>> 0;
}
function hashCodeNumberFinish(hash) {
  hash += hash << 3;
  hash ^= hash >>> 11;
  hash += hash << 15;
  return hash >>> 0;
}
function nullHashFunc(k) {
  return 0;
}
var HashBucket = class {
  keys = [];
  values = [];
};
var HashMap = class {
  constructor(keyEqualFunc, keyHashFunc) {
    this.keyEqualFunc = keyEqualFunc;
    this.keyHashFunc = keyHashFunc;
  }
  buckets = /* @__PURE__ */ new Map();
  findBucketIndex(bucket, k) {
    for (let i = 0; i < bucket.keys.length; i++)
      if (this.keyEqualFunc(k, bucket.keys[i]))
        return i;
    return -1;
  }
  get(k) {
    const bw = this.keyHashFunc(k);
    const bucket = this.buckets.get(bw);
    if (bucket === void 0) return null;
    const bi = this.findBucketIndex(bucket, k);
    if (bi < 0) return null;
    return bucket.values[bi];
  }
  add(k, v) {
    const bw = this.keyHashFunc(k);
    if (this.buckets.get(bw) === void 0) this.buckets.set(bw, new HashBucket());
    const bucket = this.buckets.get(bw);
    bucket.keys.push(k);
    bucket.values.push(v);
  }
  delete(k) {
    const bw = this.keyHashFunc(k);
    const bucket = this.buckets.get(bw);
    if (bucket === void 0) return;
    const bi = this.findBucketIndex(bucket, k);
    if (bi === -1) return;
    bucket.keys.splice(bi, 1);
    bucket.values.splice(bi, 1);
    if (bucket.keys.length === 0)
      this.buckets.delete(bw);
  }
  clear() {
    this.buckets.clear();
  }
  size() {
    let acc = 0;
    for (const bucket of this.buckets.values())
      acc += bucket.values.length;
    return acc;
  }
  *values() {
    for (const bucket of this.buckets.values())
      for (let j = bucket.values.length - 1; j >= 0; j--)
        yield bucket.values[j];
  }
  *items() {
    for (const bucket of this.buckets.values())
      for (let j = bucket.keys.length - 1; j >= 0; j--)
        yield [bucket.keys[j], bucket.values[j]];
  }
};

// src/noclip/gfx/platform/GfxPlatformObjUtil.ts
function arrayCopy(a, copyFunc) {
  const b = Array(a.length);
  for (let i = 0; i < a.length; i++)
    b[i] = copyFunc(a[i]);
  return b;
}
function arrayEqual(a, b, e) {
  if (a.length !== b.length)
    return false;
  for (let i = 0; i < a.length; i++)
    if (!e(a[i], b[i]))
      return false;
  return true;
}
function gfxSamplerBindingCopy(a) {
  const gfxSampler = a.gfxSampler, gfxTexture = a.gfxTexture, lateBinding = a.lateBinding;
  return { gfxSampler, gfxTexture, lateBinding };
}
function gfxBufferBindingCopy(a) {
  const buffer = a.buffer;
  const byteSize = a.byteSize;
  return { buffer, byteSize };
}
function gfxBindingsDescriptorCopy(a) {
  const bindingLayout = a.bindingLayout;
  const samplerBindings = arrayCopy(a.samplerBindings, gfxSamplerBindingCopy);
  const uniformBufferBindings = arrayCopy(a.uniformBufferBindings, gfxBufferBindingCopy);
  return { bindingLayout, samplerBindings, uniformBufferBindings };
}
function gfxBindingLayoutSamplerDescriptorCopy(a) {
  const dimension = a.dimension, formatKind = a.formatKind, comparison = a.comparison === true;
  return { dimension, formatKind, comparison };
}
function gfxBindingLayoutDescriptorCopy(a) {
  const numSamplers = a.numSamplers;
  const numUniformBuffers = a.numUniformBuffers;
  const samplerEntries = a.samplerEntries !== void 0 ? arrayCopy(a.samplerEntries, gfxBindingLayoutSamplerDescriptorCopy) : void 0;
  return { numSamplers, numUniformBuffers, samplerEntries };
}
function gfxRenderPipelineDescriptorCopy(a) {
  const bindingLayouts = arrayCopy(a.bindingLayouts, gfxBindingLayoutDescriptorCopy);
  const inputLayout = a.inputLayout;
  const program = a.program;
  const topology = a.topology;
  const megaStateDescriptor = copyMegaState(a.megaStateDescriptor);
  const colorAttachmentFormats = a.colorAttachmentFormats.slice();
  const depthStencilAttachmentFormat = a.depthStencilAttachmentFormat;
  const sampleCount = a.sampleCount;
  return { bindingLayouts, inputLayout, megaStateDescriptor, program, topology, colorAttachmentFormats, depthStencilAttachmentFormat, sampleCount };
}
function gfxVertexAttributeDescriptorCopy(a) {
  const location = a.location, format = a.format, bufferIndex = a.bufferIndex, bufferByteOffset = a.bufferByteOffset;
  return { location, format, bufferIndex, bufferByteOffset };
}
function gfxInputLayoutBufferDescriptorCopy(a) {
  if (a !== null) {
    const byteStride = a.byteStride, frequency = a.frequency;
    return { byteStride, frequency };
  } else {
    return null;
  }
}
function gfxInputLayoutDescriptorCopy(a) {
  const vertexAttributeDescriptors = arrayCopy(a.vertexAttributeDescriptors, gfxVertexAttributeDescriptorCopy);
  const vertexBufferDescriptors = arrayCopy(a.vertexBufferDescriptors, gfxInputLayoutBufferDescriptorCopy);
  const indexBufferFormat = a.indexBufferFormat;
  return { vertexAttributeDescriptors, vertexBufferDescriptors, indexBufferFormat };
}
function gfxBufferBindingEquals(a, b) {
  return a.buffer === b.buffer && a.byteSize === b.byteSize;
}
function gfxSamplerBindingEquals(a, b) {
  if (a === null) return b === null;
  if (b === null) return false;
  return a.gfxSampler === b.gfxSampler && a.gfxTexture === b.gfxTexture;
}
function gfxBindingsDescriptorEquals(a, b) {
  if (a.samplerBindings.length !== b.samplerBindings.length) return false;
  if (!arrayEqual(a.samplerBindings, b.samplerBindings, gfxSamplerBindingEquals)) return false;
  if (!arrayEqual(a.uniformBufferBindings, b.uniformBufferBindings, gfxBufferBindingEquals)) return false;
  if (!gfxBindingLayoutEquals(a.bindingLayout, b.bindingLayout)) return false;
  return true;
}
function gfxChannelBlendStateEquals(a, b) {
  return a.blendMode === b.blendMode && a.blendSrcFactor === b.blendSrcFactor && a.blendDstFactor === b.blendDstFactor;
}
function gfxAttachmentStateEquals(a, b) {
  if (!gfxChannelBlendStateEquals(a.rgbBlendState, b.rgbBlendState)) return false;
  if (!gfxChannelBlendStateEquals(a.alphaBlendState, b.alphaBlendState)) return false;
  if (a.channelWriteMask !== b.channelWriteMask) return false;
  return true;
}
function gfxMegaStateDescriptorEquals(a, b) {
  if (!arrayEqual(a.attachmentsState, b.attachmentsState, gfxAttachmentStateEquals))
    return false;
  return a.depthCompare === b.depthCompare && a.depthWrite === b.depthWrite && a.stencilCompare === b.stencilCompare && a.stencilWrite === b.stencilWrite && a.stencilPassOp === b.stencilPassOp && a.cullMode === b.cullMode && a.frontFace === b.frontFace && a.polygonOffset === b.polygonOffset;
}
function gfxBindingLayoutEquals(a, b) {
  return a.numSamplers === b.numSamplers && a.numUniformBuffers === b.numUniformBuffers;
}
function gfxProgramEquals(a, b) {
  return a.ResourceUniqueId === b.ResourceUniqueId;
}
function gfxFormatEquals(a, b) {
  return a === b;
}
function gfxRenderPipelineDescriptorEquals(a, b) {
  if (a.topology !== b.topology) return false;
  if (a.inputLayout !== b.inputLayout) return false;
  if (a.sampleCount !== b.sampleCount) return false;
  if (!gfxMegaStateDescriptorEquals(a.megaStateDescriptor, b.megaStateDescriptor)) return false;
  if (!gfxProgramEquals(a.program, b.program)) return false;
  if (!arrayEqual(a.bindingLayouts, b.bindingLayouts, gfxBindingLayoutEquals)) return false;
  if (!arrayEqual(a.colorAttachmentFormats, b.colorAttachmentFormats, gfxFormatEquals)) return false;
  if (a.depthStencilAttachmentFormat !== b.depthStencilAttachmentFormat) return false;
  return true;
}
function gfxVertexAttributeDescriptorEquals(a, b) {
  return a.bufferIndex === b.bufferIndex && a.bufferByteOffset === b.bufferByteOffset && a.location === b.location && a.format === b.format;
}
function gfxInputLayoutBufferDescriptorEquals(a, b) {
  if (a === null) return b === null;
  if (b === null) return false;
  return a.byteStride === b.byteStride && a.frequency === b.frequency;
}
function gfxInputLayoutDescriptorEquals(a, b) {
  if (a.indexBufferFormat !== b.indexBufferFormat) return false;
  if (!arrayEqual(a.vertexBufferDescriptors, b.vertexBufferDescriptors, gfxInputLayoutBufferDescriptorEquals)) return false;
  if (!arrayEqual(a.vertexAttributeDescriptors, b.vertexAttributeDescriptors, gfxVertexAttributeDescriptorEquals)) return false;
  return true;
}
function gfxSamplerDescriptorEquals(a, b) {
  return a.wrapS === b.wrapS && a.wrapT === b.wrapT && a.wrapQ === b.wrapQ && a.minFilter === b.minFilter && a.magFilter === b.magFilter && a.mipFilter === b.mipFilter && a.minLOD === b.minLOD && a.maxLOD === b.maxLOD && a.maxAnisotropy === b.maxAnisotropy && a.compareMode === b.compareMode;
}
function gfxRenderAttachmentViewEquals(a, b) {
  if (a === b) return true;
  if (a === null || b === null) return false;
  return a.level === b.level && a.z === b.z;
}

// src/noclip/gx/gx_displaylist.ts
function getAttrInputForAttr(attrib) {
  if (attrib === 9 /* POS */)
    return 2 /* POS */;
  else if (attrib === 10 /* NRM */)
    return 3 /* NRM */;
  else if (attrib === 11 /* CLR0 */)
    return 6 /* CLR0 */;
  else if (attrib === 12 /* CLR1 */)
    return 7 /* CLR1 */;
  else
    throw "whoops";
}
function getAttributeComponentByteSizeRaw(compType) {
  switch (compType) {
    case 0 /* U8 */:
    case 1 /* S8 */:
    case 5 /* RGBA8 */:
      return 1;
    case 2 /* U16 */:
    case 3 /* S16 */:
      return 2;
    case 4 /* F32 */:
      return 4;
  }
}
function isVtxAttribMtxIdx(vtxAttrib) {
  return vtxAttrib === 0 /* PNMTXIDX */ || isVtxAttribTexMtxIdx(vtxAttrib);
}
function isVtxAttribTexMtxIdx(vtxAttrib) {
  switch (vtxAttrib) {
    case 1 /* TEX0MTXIDX */:
    case 2 /* TEX1MTXIDX */:
    case 3 /* TEX2MTXIDX */:
    case 4 /* TEX3MTXIDX */:
    case 5 /* TEX4MTXIDX */:
    case 6 /* TEX5MTXIDX */:
    case 7 /* TEX6MTXIDX */:
    case 8 /* TEX7MTXIDX */:
      return true;
    default:
      return false;
  }
}
function isVtxAttribColor(vtxAttrib) {
  switch (vtxAttrib) {
    case 11 /* CLR0 */:
    case 12 /* CLR1 */:
      return true;
    default:
      return false;
  }
}
function isVtxAttribTex(vtxAttrib) {
  switch (vtxAttrib) {
    case 13 /* TEX0 */:
    case 14 /* TEX1 */:
    case 15 /* TEX2 */:
    case 16 /* TEX3 */:
    case 17 /* TEX4 */:
    case 18 /* TEX5 */:
    case 19 /* TEX6 */:
    case 20 /* TEX7 */:
      return true;
    default:
      return false;
  }
}
function getAttributeComponentByteSize(vtxAttrib, vatFormat) {
  if (isVtxAttribMtxIdx(vtxAttrib))
    return 1;
  return getAttributeComponentByteSizeRaw(vatFormat.compType);
}
function getAttributeByteSizeRaw(vtxAttrib, vatFormat) {
  if (isVtxAttribMtxIdx(vtxAttrib))
    return 1;
  if (isVtxAttribColor(vtxAttrib)) {
    switch (vatFormat.compType) {
      case 0 /* RGB565 */:
        return 2;
      case 1 /* RGB8 */:
        return 3;
      case 2 /* RGBX8 */:
        return 4;
      case 3 /* RGBA4 */:
        return 2;
      case 4 /* RGBA6 */:
        return 3;
      case 5 /* RGBA8 */:
        return 4;
    }
  }
  const compSize = getAttributeComponentByteSize(vtxAttrib, vatFormat);
  const compCount = getAttributeComponentCount(vtxAttrib, vatFormat);
  return compSize * compCount;
}
function getAttributeFormatCompFlagsRaw(vtxAttrib, compCnt) {
  switch (vtxAttrib) {
    case 9 /* POS */:
      if (compCnt === 0 /* POS_XY */)
        return 2 /* RG */;
      else if (compCnt === 1 /* POS_XYZ */)
        return 3 /* RGB */;
    case 10 /* NRM */:
      return 3 /* RGB */;
    case 11 /* CLR0 */:
    case 12 /* CLR1 */:
      if (compCnt === 0 /* CLR_RGB */)
        return 3 /* RGB */;
      else if (compCnt === 1 /* CLR_RGBA */)
        return 4 /* RGBA */;
    case 13 /* TEX0 */:
    case 14 /* TEX1 */:
    case 15 /* TEX2 */:
    case 16 /* TEX3 */:
    case 17 /* TEX4 */:
    case 18 /* TEX5 */:
    case 19 /* TEX6 */:
    case 20 /* TEX7 */:
      if (compCnt === 0 /* TEX_S */)
        return 1 /* R */;
      else if (compCnt === 1 /* TEX_ST */)
        return 2 /* RG */;
    case 255 /* NULL */:
    default:
      throw new Error("whoops");
  }
}
function getAttributeFormatCompFlags(vtxAttrib, vatFormat) {
  if (isVtxAttribMtxIdx(vtxAttrib))
    return 1 /* R */;
  return getAttributeFormatCompFlagsRaw(vtxAttrib, vatFormat.compCnt);
}
function getAttributeComponentCount(vtxAttrib, vatFormat) {
  if (vtxAttrib === 10 /* NRM */ && vatFormat.compCnt === 1 /* NRM_NBT */)
    return 9;
  else
    return getFormatCompFlagsComponentCount(getAttributeFormatCompFlags(vtxAttrib, vatFormat));
}
function getComponentShiftRaw(compType, compShift) {
  switch (compType) {
    case 4 /* F32 */:
    case 5 /* RGBA8 */:
      return 0;
    case 0 /* U8 */:
    case 2 /* U16 */:
    case 1 /* S8 */:
    case 3 /* S16 */:
      return compShift;
  }
}
function getComponentShift(vtxAttrib, vatFormat) {
  if (isVtxAttribMtxIdx(vtxAttrib))
    return 0;
  if (vtxAttrib === 10 /* NRM */) {
    if (vatFormat.compType === 0 /* U8 */ || vatFormat.compType === 1 /* S8 */)
      return 6;
    else if (vatFormat.compType === 2 /* U16 */ || vatFormat.compType === 3 /* S16 */)
      return 14;
    else
      throw "whoops";
  }
  return getComponentShiftRaw(vatFormat.compType, vatFormat.compShift);
}
function getComponentType(vtxAttrib, vatFormat) {
  if (isVtxAttribMtxIdx(vtxAttrib))
    return 0 /* U8 */;
  return vatFormat.compType;
}
function getIndexNumComponents(vtxAttrib, vatFormat) {
  if (vtxAttrib === 10 /* NRM */ && vatFormat.compCnt === 2 /* NRM_NBT3 */)
    return 3;
  else
    return 1;
}
function getAttrName(vtxAttrib) {
  switch (vtxAttrib) {
    case 0 /* PNMTXIDX */:
      return `PNMTXIDX`;
    case 1 /* TEX0MTXIDX */:
      return `TEX0MTXIDX`;
    case 2 /* TEX1MTXIDX */:
      return `TEX1MTXIDX`;
    case 3 /* TEX2MTXIDX */:
      return `TEX2MTXIDX`;
    case 4 /* TEX3MTXIDX */:
      return `TEX3MTXIDX`;
    case 5 /* TEX4MTXIDX */:
      return `TEX4MTXIDX`;
    case 6 /* TEX5MTXIDX */:
      return `TEX5MTXIDX`;
    case 7 /* TEX6MTXIDX */:
      return `TEX6MTXIDX`;
    case 8 /* TEX7MTXIDX */:
      return `TEX7MTXIDX`;
    case 9 /* POS */:
      return `POS`;
    case 10 /* NRM */:
      return `NRM`;
    case 11 /* CLR0 */:
      return `CLR0`;
    case 12 /* CLR1 */:
      return `CLR1`;
    case 13 /* TEX0 */:
      return `TEX0`;
    case 14 /* TEX1 */:
      return `TEX1`;
    case 15 /* TEX2 */:
      return `TEX2`;
    case 16 /* TEX3 */:
      return `TEX3`;
    case 17 /* TEX4 */:
      return `TEX4`;
    case 18 /* TEX5 */:
      return `TEX5`;
    case 19 /* TEX6 */:
      return `TEX6`;
    case 20 /* TEX7 */:
      return `TEX7`;
    default:
      throw new Error("whoops");
  }
}
function translateSourceVatLayout(vatFormat, vcd) {
  let srcVertexSize = 0;
  for (let vtxAttrib = 0; vtxAttrib < vcd.length; vtxAttrib++) {
    const vtxAttrDesc = vcd[vtxAttrib];
    const vtxAttrFmt = vatFormat[vtxAttrib];
    if (!vtxAttrDesc || vtxAttrDesc.type === 0 /* NONE */ || vtxAttrDesc.type === 4 /* ZERO */)
      continue;
    const srcIndexComponentCount = getIndexNumComponents(vtxAttrib, vtxAttrFmt);
    if (isVtxAttribMtxIdx(vtxAttrib))
      assert(vtxAttrDesc.type === 1 /* DIRECT */);
    if (vtxAttrDesc.type === 1 /* DIRECT */)
      srcVertexSize += getAttributeByteSizeRaw(vtxAttrib, vtxAttrFmt);
    else if (vtxAttrDesc.type === 2 /* INDEX8 */)
      srcVertexSize += 1 * srcIndexComponentCount;
    else if (vtxAttrDesc.type === 3 /* INDEX16 */)
      srcVertexSize += 2 * srcIndexComponentCount;
  }
  return { srcVertexSize, vatFormat, vcd };
}
function compileLoadedVertexLayout(vcd, useNBT = false) {
  const bufferIndex = 0;
  function getFormatForAttrInput(attrInput) {
    switch (attrInput) {
      case 0 /* TEX0123MTXIDX */:
      case 1 /* TEX4567MTXIDX */:
        return GfxFormat.U8_RGBA_NORM;
      case 2 /* POS */:
        return GfxFormat.F32_RGBA;
      // Also can include PNMTXIDX if the material requests it; assume it does.
      case 3 /* NRM */:
      case 4 /* BINRM */:
      case 5 /* TANGENT */:
        return GfxFormat.F32_RGB;
      case 6 /* CLR0 */:
      case 7 /* CLR1 */:
        return GfxFormat.U8_RGBA_NORM;
      case 8 /* TEX01 */:
      case 9 /* TEX23 */:
      case 10 /* TEX45 */:
      case 11 /* TEX67 */:
        return GfxFormat.F32_RGBA;
      default:
        throw "whoops";
    }
  }
  function allocateVertexInput(attrInput, format = getFormatForAttrInput(attrInput)) {
    const existingInput = singleVertexInputLayouts.find((layout) => layout.attrInput === attrInput);
    if (existingInput !== void 0) {
      return existingInput;
    } else {
      const formatComponentSize = getFormatCompByteSize(format);
      const formatComponentCount = getFormatComponentCount(format);
      dstVertexSize = align(dstVertexSize, formatComponentSize);
      const bufferOffset = dstVertexSize;
      dstVertexSize += formatComponentSize * formatComponentCount;
      const input = { attrInput, bufferIndex, bufferOffset, format };
      singleVertexInputLayouts.push(input);
      return input;
    }
  }
  let dstVertexSize = 0;
  const singleVertexInputLayouts = [];
  const vertexAttributeOffsets = [];
  const vertexAttributeFormats = [];
  for (let vtxAttrib = 0; vtxAttrib < vcd.length; vtxAttrib++) {
    const vtxAttrDesc = vcd[vtxAttrib];
    if (!vtxAttrDesc || vtxAttrDesc.type === 0 /* NONE */)
      continue;
    const outputMode = fallbackUndefined(vtxAttrDesc.outputMode, 0 /* VertexData */);
    if (outputMode === 2 /* None */)
      continue;
    let input;
    let fieldFormat;
    let fieldCompOffset = 0;
    if (outputMode === 1 /* Index */) {
      const attrInput = getAttrInputForAttr(vtxAttrib);
      input = allocateVertexInput(attrInput, GfxFormat.U16_R);
      fieldFormat = input.format;
    } else if (isVtxAttribTexMtxIdx(vtxAttrib)) {
      const attrInput = vtxAttrib < 5 /* TEX4MTXIDX */ ? 0 /* TEX0123MTXIDX */ : 1 /* TEX4567MTXIDX */;
      input = allocateVertexInput(attrInput);
      fieldCompOffset = vtxAttrib - 1 /* TEX0MTXIDX */ & 3;
      fieldFormat = GfxFormat.U8_RGBA;
    } else if (vtxAttrib === 9 /* POS */) {
      input = allocateVertexInput(2 /* POS */);
      fieldFormat = GfxFormat.F32_RGB;
    } else if (vtxAttrib === 0 /* PNMTXIDX */) {
      input = allocateVertexInput(2 /* POS */);
      fieldCompOffset = 3;
      fieldFormat = GfxFormat.F32_R;
    } else if (vtxAttrib === 10 /* NRM */ && useNBT) {
      input = allocateVertexInput(3 /* NRM */);
      allocateVertexInput(4 /* BINRM */);
      allocateVertexInput(5 /* TANGENT */);
      fieldFormat = input.format;
    } else if (vtxAttrib === 10 /* NRM */) {
      input = allocateVertexInput(3 /* NRM */);
      fieldFormat = input.format;
    } else if (isVtxAttribTex(vtxAttrib)) {
      const texAttr = vtxAttrib - 13 /* TEX0 */;
      const attrInput = 8 /* TEX01 */ + (texAttr >>> 1);
      input = allocateVertexInput(attrInput);
      fieldCompOffset = (texAttr & 1) * 2;
      fieldFormat = GfxFormat.F32_RG;
    } else if (isVtxAttribColor(vtxAttrib)) {
      const attrInput = getAttrInputForAttr(vtxAttrib);
      input = allocateVertexInput(attrInput);
      fieldFormat = input.format;
    } else {
      throw "whoops";
    }
    const fieldByteOffset = getFormatCompByteSize(input.format) * fieldCompOffset;
    vertexAttributeOffsets[vtxAttrib] = input.bufferOffset + fieldByteOffset;
    vertexAttributeFormats[vtxAttrib] = fieldFormat;
  }
  dstVertexSize = align(dstVertexSize, 4);
  const vertexBufferStrides = [dstVertexSize];
  const indexFormat = GfxFormat.U16_R;
  return { indexFormat, vertexBufferStrides, singleVertexInputLayouts, vertexAttributeOffsets, vertexAttributeFormats };
}
function generateRunVertices(loadedVertexLayout, vatLayout) {
  function compileVtxArrayViewName(vtxAttrib) {
    return `vtxArrayViews[${vtxAttrib}]`;
  }
  function compileVatLayoutAttribute(vtxAttrib) {
    const vtxAttrFmt = vatLayout.vatFormat[vtxAttrib];
    const vtxAttrDesc = vatLayout.vcd[vtxAttrib];
    if (!vtxAttrDesc || vtxAttrDesc.type === 0 /* NONE */)
      return "";
    const outputMode = fallbackUndefined(vtxAttrDesc.outputMode, 0 /* VertexData */);
    const dstFormat = loadedVertexLayout.vertexAttributeFormats[vtxAttrib];
    const dstBaseOffs = loadedVertexLayout.vertexAttributeOffsets[vtxAttrib];
    let srcAttrByteSize = -1;
    if (vtxAttrDesc.type === 1 /* DIRECT */)
      srcAttrByteSize = getAttributeByteSizeRaw(vtxAttrib, vtxAttrFmt);
    function compileShift(n) {
      const srcAttrCompShift = getComponentShift(vtxAttrib, vtxAttrFmt);
      const divisor = 1 << srcAttrCompShift;
      if (divisor === 1)
        return n;
      else
        return `(${n} / ${divisor})`;
    }
    function compileReadOneComponent(viewName, attrOffset) {
      switch (getComponentType(vtxAttrib, vtxAttrFmt)) {
        case 4 /* F32 */:
          return `${viewName}.getFloat32(${attrOffset})`;
        case 0 /* U8 */:
          return compileShift(`${viewName}.getUint8(${attrOffset})`);
        case 2 /* U16 */:
          return compileShift(`${viewName}.getUint16(${attrOffset})`);
        case 1 /* S8 */:
          return compileShift(`${viewName}.getInt8(${attrOffset})`);
        case 3 /* S16 */:
          return compileShift(`${viewName}.getInt16(${attrOffset})`);
        default:
          throw "whoops";
      }
    }
    function compileWriteOneComponentF32(offs, value) {
      const littleEndian = getSystemEndianness() === 0 /* LITTLE_ENDIAN */;
      const dstOffs = `dstVertexDataOffs + ${offs}`;
      return `dstVertexDataView.setFloat32(${dstOffs}, ${value}, ${littleEndian})`;
    }
    function compileWriteOneComponentU16(offs, value) {
      const littleEndian = getSystemEndianness() === 0 /* LITTLE_ENDIAN */;
      const dstOffs = `dstVertexDataOffs + ${offs}`;
      return `dstVertexDataView.setUint16(${dstOffs}, ${value}, ${littleEndian})`;
    }
    function compileWriteOneComponentU8Norm(offs, value) {
      const dstOffs = `dstVertexDataOffs + ${offs}`;
      return `dstVertexDataView.setUint8(${dstOffs}, ${value} * 0xFF)`;
    }
    function compileWriteOneComponentU8(offs, value) {
      const dstOffs = `dstVertexDataOffs + ${offs}`;
      return `dstVertexDataView.setUint8(${dstOffs}, ${value})`;
    }
    function compileWriteOneComponent(offs, value) {
      const typeFlags = getFormatTypeFlags(dstFormat);
      const isNorm = getFormatFlags(dstFormat) & 1 /* Normalized */;
      if (typeFlags === 8 /* F32 */)
        return compileWriteOneComponentF32(offs, value);
      else if (typeFlags === 1 /* U8 */ && isNorm)
        return compileWriteOneComponentU8Norm(offs, value);
      else if (typeFlags === 1 /* U8 */)
        return compileWriteOneComponentU8(offs, value);
      else
        throw "whoops";
    }
    function compileOneAttribColor(viewName, attrOffs) {
      const dstOffs = dstBaseOffs;
      assert(getFormatComponentCount(dstFormat) === 4);
      const temp = `_T${vtxAttrib}`;
      const componentType = getComponentType(vtxAttrib, vtxAttrFmt);
      if (componentType === 0 /* RGB565 */) {
        return `
    var ${temp} = ${viewName}.getUint16(${attrOffs});
    ${compileWriteOneComponent(dstOffs + 0, `(((${temp} >>> 11) & 0x1F) / 0x1F)`)};
    ${compileWriteOneComponent(dstOffs + 1, `(((${temp} >>>  5) & 0x3F) / 0x3F)`)};
    ${compileWriteOneComponent(dstOffs + 2, `(((${temp} >>>  0) & 0x1F) / 0x1F)`)};
    ${compileWriteOneComponent(dstOffs + 3, `1.0`)};
`;
      } else if (componentType === 1 /* RGB8 */ || componentType === 2 /* RGBX8 */) {
        return `
    ${compileWriteOneComponent(dstOffs + 0, `${viewName}.getUint8(${attrOffs} + 0) / 0xFF`)};
    ${compileWriteOneComponent(dstOffs + 1, `${viewName}.getUint8(${attrOffs} + 1) / 0xFF`)};
    ${compileWriteOneComponent(dstOffs + 2, `${viewName}.getUint8(${attrOffs} + 2) / 0xFF`)};
    ${compileWriteOneComponent(dstOffs + 3, `1.0`)};
`;
      } else if (componentType === 3 /* RGBA4 */) {
        return `
    var ${temp} = ${viewName}.getUint16(${attrOffs});
    ${compileWriteOneComponent(dstOffs + 0, `(((${temp} >>> 12) & 0x0F) / 0x0F)`)};
    ${compileWriteOneComponent(dstOffs + 1, `(((${temp} >>>  8) & 0x0F) / 0x0F)`)};
    ${compileWriteOneComponent(dstOffs + 2, `(((${temp} >>>  4) & 0x0F) / 0x0F)`)};
    ${compileWriteOneComponent(dstOffs + 3, `(((${temp} >>>  0) & 0x0F) / 0x0F)`)};
`;
      } else if (componentType === 4 /* RGBA6 */) {
        return `
    var ${temp} = (${viewName}.getUint8(${attrOffs} + 0) << 16) | (${viewName}.getUint8(${attrOffs} + 1) << 8) | (${viewName}.getUint8(${attrOffs} + 2));
    ${compileWriteOneComponent(dstOffs + 0, `(((${temp} >>> 18) & 0x3F) / 0x3F)`)};
    ${compileWriteOneComponent(dstOffs + 1, `(((${temp} >>> 12) & 0x3F) / 0x3F)`)};
    ${compileWriteOneComponent(dstOffs + 2, `(((${temp} >>>  6) & 0x3F) / 0x3F)`)};
    ${compileWriteOneComponent(dstOffs + 3, `(((${temp} >>>  0) & 0x3F) / 0x3F)`)};
`;
      } else if (componentType === 5 /* RGBA8 */) {
        return `
    ${compileWriteOneComponent(dstOffs + 0, `${viewName}.getUint8(${attrOffs} + 0) / 0xFF`)};
    ${compileWriteOneComponent(dstOffs + 1, `${viewName}.getUint8(${attrOffs} + 1) / 0xFF`)};
    ${compileWriteOneComponent(dstOffs + 2, `${viewName}.getUint8(${attrOffs} + 2) / 0xFF`)};
    ${compileWriteOneComponent(dstOffs + 3, `${viewName}.getUint8(${attrOffs} + 3) / 0xFF`)};
`;
      } else {
        throw "whoops";
      }
    }
    function compileOneAttribMtxIdx(viewName, attrOffs) {
      let S2 = ``;
      const srcAttrCompSize = getAttributeComponentByteSize(vtxAttrib, vtxAttrFmt);
      const srcAttrCompCount = getAttributeComponentCount(vtxAttrib, vtxAttrFmt);
      assertExists(srcAttrCompSize === 1 && srcAttrCompCount === 1);
      const dstOffs = dstBaseOffs;
      const srcOffs = `${attrOffs}`;
      const value = compileReadOneComponent(viewName, srcOffs);
      S2 += `
    ${compileWriteOneComponent(dstOffs, `(${value} / 3)`)};`;
      return S2;
    }
    function compileOneAttribOther(viewName, attrOffs) {
      let S2 = ``;
      const srcAttrCompSize = getAttributeComponentByteSize(vtxAttrib, vtxAttrFmt);
      const srcAttrCompCount = getAttributeComponentCount(vtxAttrib, vtxAttrFmt);
      const dstComponentSize = getFormatCompByteSize(dstFormat);
      for (let i = 0; i < srcAttrCompCount; i++) {
        const dstOffs = dstBaseOffs + i * dstComponentSize;
        const srcOffs = `${attrOffs} + ${i * srcAttrCompSize}`;
        const value = compileReadOneComponent(viewName, srcOffs);
        S2 += `
    ${compileWriteOneComponent(dstOffs, value)};`;
      }
      const dstComponentCount = getFormatComponentCount(dstFormat);
      for (let i = srcAttrCompCount; i < dstComponentCount; i++) {
        const dstOffs = dstBaseOffs + i * dstComponentSize;
        S2 += `
    ${compileWriteOneComponent(dstOffs, "0.0")};`;
      }
      return S2;
    }
    function compileOneAttrib(viewName, attrOffsetBase) {
      if (outputMode === 0 /* VertexData */) {
        if (isVtxAttribMtxIdx(vtxAttrib))
          return compileOneAttribMtxIdx(viewName, attrOffsetBase);
        else if (isVtxAttribColor(vtxAttrib))
          return compileOneAttribColor(viewName, attrOffsetBase);
        else
          return compileOneAttribOther(viewName, attrOffsetBase);
      } else if (outputMode === 1 /* Index */) {
        throw "whoops";
      } else {
        return ``;
      }
    }
    function compileZero() {
      let S2 = ``;
      const dstComponentSize = getFormatCompByteSize(dstFormat);
      const dstComponentCount = getFormatComponentCount(dstFormat);
      for (let i = 0; i < dstComponentCount; i++) {
        const dstOffs = dstBaseOffs + i * dstComponentSize;
        S2 += `
    ${compileWriteOneComponent(dstOffs, "0.0")};`;
      }
      return S2;
    }
    function compileOneIndex(viewName, readIndex, drawCallIdxIncr, uniqueSuffix = "") {
      if (outputMode === 0 /* VertexData */) {
        const stride = `vtxArrayStrides[${vtxAttrib}]`;
        const attrOffsetBase = `(${readIndex}) * ${stride}`;
        const arrayOffsetVarName = `arrayOffset${vtxAttrib}${uniqueSuffix}`;
        return `
    const ${arrayOffsetVarName} = ${attrOffsetBase};${compileOneAttrib(viewName, arrayOffsetVarName)}
    drawCallIdx += ${drawCallIdxIncr};`;
      } else if (outputMode === 1 /* Index */) {
        return `
    // ${getAttrName(vtxAttrib)} - Index
    ${compileWriteOneComponentU16(dstBaseOffs, readIndex)};
    drawCallIdx += ${drawCallIdxIncr};`;
      } else {
        return `
    // ${getAttrName(vtxAttrib)} - None
    drawCallIdx += ${drawCallIdxIncr};`;
      }
    }
    function compileAttribIndex(viewName, readIndex, drawCallIdxIncr) {
      if (vtxAttrib === 10 /* NRM */ && vtxAttrFmt.compCnt === 2 /* NRM_NBT3 */) {
        return `
    // NRM
    ${compileOneIndex(viewName, readIndex, drawCallIdxIncr, `_N`)}
    // BINRM
    ${compileOneIndex(viewName, readIndex, drawCallIdxIncr, `_B`)}
    // TANGENT
    ${compileOneIndex(viewName, readIndex, drawCallIdxIncr, `_T`)}`;
      } else {
        return `
    // ${getAttrName(vtxAttrib)}
    ${compileOneIndex(viewName, readIndex, drawCallIdxIncr)}`;
      }
    }
    if (vtxAttrDesc.type === 1 /* DIRECT */) {
      return `
    // ${getAttrName(vtxAttrib)}
    ${compileOneAttrib(`dlView`, `drawCallIdx`)}
    drawCallIdx += ${srcAttrByteSize};`;
    } else if (vtxAttrDesc.type === 2 /* INDEX8 */) {
      return compileAttribIndex(compileVtxArrayViewName(vtxAttrib), `dlView.getUint8(drawCallIdx)`, 1);
    } else if (vtxAttrDesc.type === 3 /* INDEX16 */) {
      return compileAttribIndex(compileVtxArrayViewName(vtxAttrib), `dlView.getUint16(drawCallIdx)`, 2);
    } else if (vtxAttrDesc.type === 4 /* ZERO */) {
      return `
    // ${getAttrName(vtxAttrib)} - ZERO
    ${compileZero()}`;
    } else {
      throw "whoops";
    }
  }
  let S = "";
  for (let vtxAttrib = 0; vtxAttrib <= 20 /* MAX */; vtxAttrib++)
    S += compileVatLayoutAttribute(vtxAttrib);
  return S;
}
function compileFunction(source, entryPoint) {
  const fullSource = `
"use strict";

${source}

return function() {
    return ${entryPoint};
}();
`;
  const generator = new Function(fullSource);
  const func = generator();
  return func;
}
function compileSingleVtxLoader(loadedVertexLayout, srcLayout) {
  const runVertices = generateRunVertices(loadedVertexLayout, srcLayout);
  const source = `
function run(dstVertexDataView, dstVertexDataOffs, dlView, drawCallIdx, vtxArrayViews, vtxArrayStrides) {
    ${runVertices}
    return drawCallIdx;
}
`;
  return compileFunction(source, `run`);
}
function compileSingleVatLoader(loadedVertexLayout, srcLayout) {
  const runVertices = generateRunVertices(loadedVertexLayout, srcLayout);
  const source = `
function run(dstVertexDataView, dstVertexDataOffs, loadedVertexLayout, dlView, drawCalls, vtxArrayViews, vtxArrayStrides) {
    for (let i = 0; i < drawCalls.length; i++) {
        const drawCall = drawCalls[i];

        let drawCallIdx = drawCall.srcOffs;
        for (let j = 0; j < drawCall.vertexCount; j++) {
            ${runVertices}
            dstVertexDataOffs += loadedVertexLayout.vertexBufferStrides[0];
        }
    }
}
`;
  return compileFunction(source, `run`);
}
function getSingleVatIndex(vat) {
  let singleVatIndex = -1;
  for (let i = 0; i < vat.length; i++) {
    const vatLayout = vat[i];
    if (vatLayout === void 0)
      continue;
    if (singleVatIndex >= 0)
      return null;
    singleVatIndex = i;
  }
  assert(singleVatIndex >= 0);
  return singleVatIndex;
}
var VtxLoaderImpl = class {
  constructor(vat, vcd, loadedVertexLayout) {
    this.loadedVertexLayout = loadedVertexLayout;
    const singleVat = getSingleVatIndex(vat);
    if (singleVat !== null) {
      const sourceLayout = translateSourceVatLayout(vat[singleVat], vcd);
      this.sourceLayouts[singleVat] = sourceLayout;
      this.singleVatLoader = compileSingleVatLoader(loadedVertexLayout, sourceLayout);
    } else {
      for (let i = 0; i < vat.length; i++) {
        const vatLayout = vat[i];
        if (vatLayout === void 0)
          continue;
        const sourceLayout = translateSourceVatLayout(vat[i], vcd);
        this.sourceLayouts[i] = sourceLayout;
        this.vtxLoaders[i] = compileSingleVtxLoader(loadedVertexLayout, sourceLayout);
      }
    }
    this.vat = arrayCopy(vat, vatCopy);
    this.vcd = arrayCopy(vcd, vcdCopy);
  }
  vat;
  vcd;
  sourceLayouts = [];
  vtxLoaders = [];
  // For Single VAT cases (optimization).
  singleVatLoader = null;
  parseDisplayList(srcBuffer, loadOptions) {
    function newDraw(indexOffset) {
      return {
        indexOffset,
        indexCount: 0,
        posMatrixTable: Array(10).fill(65535),
        texMatrixTable: Array(10).fill(65535)
      };
    }
    const dlView = srcBuffer.createDataView();
    const drawCalls = [];
    const draws = [];
    let totalVertexCount = 0;
    let totalIndexCount = 0;
    let drawCallIdx = 0;
    let currentDraw = null;
    let currentXfmem = null;
    while (true) {
      if (drawCallIdx >= srcBuffer.byteLength)
        break;
      const cmd = dlView.getUint8(drawCallIdx);
      if (cmd === 0)
        break;
      switch (cmd) {
        case 32 /* LOAD_INDX_A */: {
          currentDraw = null;
          if (currentXfmem === null)
            currentXfmem = newDraw(totalIndexCount);
          const memoryElemSize = 3 * 4;
          const memoryBaseAddr = 0;
          const table = currentXfmem.posMatrixTable;
          const arrayIndex = dlView.getUint16(drawCallIdx + 1);
          const addrLen = dlView.getUint16(drawCallIdx + 3);
          const len = (addrLen >>> 12) + 1;
          const addr = addrLen & 4095;
          const tableIndex = (addr - memoryBaseAddr) / memoryElemSize | 0;
          if (len !== memoryElemSize)
            throw Error();
          table[tableIndex] = arrayIndex;
          drawCallIdx += 5;
          continue;
        }
        case 48 /* LOAD_INDX_C */: {
          currentDraw = null;
          if (currentXfmem === null)
            currentXfmem = newDraw(totalIndexCount);
          const memoryElemSize = 3 * 4;
          const memoryBaseAddr = 120;
          const table = currentXfmem.texMatrixTable;
          const arrayIndex = dlView.getUint16(drawCallIdx + 1);
          const addrLen = dlView.getUint16(drawCallIdx + 3);
          const len = (addrLen >>> 12) + 1;
          const addr = addrLen & 4095;
          const tableIndex = (addr - memoryBaseAddr) / memoryElemSize | 0;
          if (len !== memoryElemSize)
            throw Error();
          table[tableIndex] = arrayIndex;
          drawCallIdx += 5;
          continue;
        }
        case 40 /* LOAD_INDX_B */:
        // Normal Matrices
        case 56 /* LOAD_INDX_D */:
          drawCallIdx += 5;
          continue;
      }
      const primType = cmd & 248;
      const vertexFormat = cmd & 7;
      const vertexCount = dlView.getUint16(drawCallIdx + 1);
      drawCallIdx += 3;
      const srcOffs = drawCallIdx;
      totalVertexCount += vertexCount;
      if (currentDraw === null) {
        if (currentXfmem !== null) {
          currentDraw = currentXfmem;
          currentXfmem = null;
        } else {
          currentDraw = newDraw(totalIndexCount);
        }
        draws.push(currentDraw);
      }
      let indexCount = 0;
      switch (primType) {
        case 144 /* DRAW_TRIANGLES */:
          indexCount = vertexCount;
          break;
        case 128 /* DRAW_QUADS */:
        case 136 /* DRAW_QUAD_STRIP */:
          indexCount = vertexCount * 6 / 4;
          break;
        case 160 /* DRAW_TRIANGLE_FAN */:
        case 152 /* DRAW_TRIANGLE_STRIP */:
          indexCount = (vertexCount - 2) * 3;
          break;
        default:
          throw new Error(`Invalid data at ${hexzero(srcBuffer.byteOffset, 8)} / ${hexzero(drawCallIdx - 3, 4)} cmd ${hexzero(cmd, 2)}`);
      }
      drawCalls.push({ primType, vertexFormat, srcOffs, vertexCount });
      currentDraw.indexCount += indexCount;
      totalIndexCount += indexCount;
      const srcLayout = this.sourceLayouts[vertexFormat];
      drawCallIdx += srcLayout.srcVertexSize * vertexCount;
    }
    const firstVertexId = loadOptions !== void 0 && loadOptions.firstVertexId !== void 0 ? loadOptions.firstVertexId : 0;
    let indexDataIdx = 0;
    const dstIndexData = new Uint16Array(totalIndexCount);
    let baseVertex = firstVertexId;
    for (let z = 0; z < drawCalls.length; z++) {
      const drawCall = drawCalls[z];
      switch (drawCall.primType) {
        case 144 /* DRAW_TRIANGLES */:
          for (let i = 0; i < drawCall.vertexCount; i++)
            dstIndexData[indexDataIdx++] = baseVertex + i;
          break;
        case 128 /* DRAW_QUADS */:
        case 136 /* DRAW_QUAD_STRIP */:
          for (let i = 0; i < drawCall.vertexCount; i += 4) {
            dstIndexData[indexDataIdx++] = baseVertex + i + 0;
            dstIndexData[indexDataIdx++] = baseVertex + i + 1;
            dstIndexData[indexDataIdx++] = baseVertex + i + 2;
            dstIndexData[indexDataIdx++] = baseVertex + i + 0;
            dstIndexData[indexDataIdx++] = baseVertex + i + 2;
            dstIndexData[indexDataIdx++] = baseVertex + i + 3;
          }
          break;
        case 152 /* DRAW_TRIANGLE_STRIP */:
          for (let i = 2; i < drawCall.vertexCount; i++) {
            dstIndexData[indexDataIdx++] = baseVertex + i - 2;
            dstIndexData[indexDataIdx++] = baseVertex + i - (~i & 1);
            dstIndexData[indexDataIdx++] = baseVertex + i - (i & 1);
          }
          break;
        case 160 /* DRAW_TRIANGLE_FAN */:
          for (let i = 2; i < drawCall.vertexCount; i++) {
            dstIndexData[indexDataIdx++] = baseVertex;
            dstIndexData[indexDataIdx++] = baseVertex + i - 1;
            dstIndexData[indexDataIdx++] = baseVertex + i;
          }
          break;
      }
      baseVertex += drawCall.vertexCount;
    }
    const dstVertexDataSize = this.loadedVertexLayout.vertexBufferStrides[0] * totalVertexCount;
    const dstVertexData = new ArrayBuffer(dstVertexDataSize);
    const vertexBuffers = [dstVertexData];
    const indexData = dstIndexData.buffer;
    return { indexData, totalIndexCount, totalVertexCount, draws, vertexId: baseVertex, vertexBuffers, dlView, drawCalls };
  }
  loadVertexDataInto(dst, dstOffs, loadedVertexData, vtxArrays) {
    const vtxArrayViews = [];
    const vtxArrayStrides = [];
    for (let i = 0; i <= 20 /* MAX */; i++) {
      if (vtxArrays[i] !== void 0) {
        vtxArrayViews[i] = vtxArrays[i].buffer.createDataView(vtxArrays[i].offs);
        vtxArrayStrides[i] = vtxArrays[i].stride;
      }
    }
    const dlView = assertExists(loadedVertexData.dlView);
    const drawCalls = assertExists(loadedVertexData.drawCalls);
    const dstVertexDataSize = this.loadedVertexLayout.vertexBufferStrides[0] * loadedVertexData.totalVertexCount;
    assert(dst.byteLength >= dstVertexDataSize);
    let dstVertexDataOffs = dstOffs;
    if (this.singleVatLoader !== null) {
      this.singleVatLoader(dst, dstVertexDataOffs, this.loadedVertexLayout, dlView, drawCalls, vtxArrayViews, vtxArrayStrides);
    } else {
      for (let i = 0; i < drawCalls.length; i++) {
        const drawCall = drawCalls[i];
        let drawCallIdx = drawCall.srcOffs;
        for (let j = 0; j < drawCall.vertexCount; j++) {
          drawCallIdx = this.vtxLoaders[drawCall.vertexFormat](dst, dstVertexDataOffs, dlView, drawCallIdx, vtxArrayViews, vtxArrayStrides);
          dstVertexDataOffs += this.loadedVertexLayout.vertexBufferStrides[0];
        }
      }
    }
  }
  loadVertexData(loadedVertexData, vtxArrays) {
    const dstVertexData = assertExists(loadedVertexData.vertexBuffers[0]);
    const dstVertexDataView = new DataView(dstVertexData);
    return this.loadVertexDataInto(dstVertexDataView, 0, loadedVertexData, vtxArrays);
  }
  runVertices(vtxArrays, srcBuffer, loadOptions) {
    const loadedVertexData = this.parseDisplayList(srcBuffer, loadOptions);
    this.loadVertexData(loadedVertexData, vtxArrays);
    return loadedVertexData;
  }
};
function vtxAttrFmtCopy(a) {
  if (a === void 0)
    return void 0;
  else
    return { compCnt: a.compCnt, compShift: a.compShift, compType: a.compType };
}
function vtxAttrFmtEqual(a, b) {
  if (a === void 0 || b === void 0) return a === b;
  return a.compCnt === b.compCnt && a.compShift === b.compShift && a.compType === b.compType;
}
function vatCopy(a) {
  if (a === void 0)
    return void 0;
  else
    return arrayCopy(a, vtxAttrFmtCopy);
}
function vatEqual(a, b) {
  if (a === void 0 || b === void 0) return a === b;
  return arrayEqual(a, b, vtxAttrFmtEqual);
}
function vcdCopy(a) {
  if (a === void 0)
    return void 0;
  else
    return { outputMode: a.outputMode, type: a.type };
}
function vcdEqual(a, b) {
  if (a === void 0 || b === void 0) return a === b;
  return a.outputMode === b.outputMode && a.type === b.type;
}
function vtxLoaderDescEqual(a, b) {
  if (!arrayEqual(a.vat, b.vat, vatEqual)) return false;
  if (!arrayEqual(a.vcd, b.vcd, vcdEqual)) return false;
  return true;
}
function vatUsesNBT(vat) {
  for (let i = 0; i < vat.length; i++) {
    const vatLayout = vat[i];
    if (vatLayout === void 0)
      continue;
    const fmt = vatLayout[10 /* NRM */];
    if (fmt === void 0)
      continue;
    const compCnt = fmt.compCnt;
    if (compCnt === 1 /* NRM_NBT */ || compCnt === 2 /* NRM_NBT3 */)
      return true;
  }
  return false;
}
var cache = new HashMap(vtxLoaderDescEqual, nullHashFunc);
function compileVtxLoaderDesc(desc) {
  let loader = cache.get(desc);
  if (loader === null) {
    const { vat, vcd } = desc;
    const useNBT = vatUsesNBT(vat);
    const loadedVertexLayout = compileLoadedVertexLayout(vcd, useNBT);
    const loaderImpl = new VtxLoaderImpl(vat, vcd, loadedVertexLayout);
    cache.add(loaderImpl, loaderImpl);
    loader = loaderImpl;
  }
  return loader;
}
function compileVtxLoaderMultiVat(vat, vcd) {
  const desc = { vat, vcd };
  return compileVtxLoaderDesc(desc);
}

// src/noclip/CodeEditor.ts
var MONOSPACE = '"Source Code Pro", "Droid Sans Mono", monospace';
function visibleRAF(elem, func) {
  const window2 = elem.ownerDocument.defaultView;
  let isRunning = false;
  function setRunning(running2) {
    if (isRunning === running2)
      return;
    isRunning = running2;
    if (isRunning)
      window2.requestAnimationFrame(update);
  }
  function update(t) {
    func(t);
    if (isRunning)
      window2.requestAnimationFrame(update);
  }
  function callback(entries) {
    const { intersectionRatio } = entries[entries.length - 1];
    const shouldBeRunning = intersectionRatio > 0;
    setRunning(shouldBeRunning);
  }
  const observer = new IntersectionObserver(callback);
  observer.observe(elem);
}
function colorLerp(ca, cb, t) {
  console.assert(ca[0] === "#" && ca.length === 7);
  const ar = parseInt(ca.slice(1, 3), 16), ag = parseInt(ca.slice(3, 5), 16), ab = parseInt(ca.slice(5, 7), 16);
  console.assert(cb[0] === "#" && cb.length === 7);
  const br = parseInt(cb.slice(1, 3), 16), bg = parseInt(cb.slice(3, 5), 16), bb = parseInt(cb.slice(5, 7), 16);
  const nr = ar + (br - ar) * t, ng = ag + (bg - ag) * t, nb = ab + (bb - ab) * t;
  const r = (nr | 0).toString(16), g = (ng | 0).toString(16), b = (nb | 0).toString(16);
  return `#${r}${g}${b}`;
}
function colorGrayscale(c) {
  console.assert(c[0] === "#" && c.length === 7);
  const r = parseInt(c.slice(1, 3), 16), g = parseInt(c.slice(3, 5), 16), b = parseInt(c.slice(5, 7), 16);
  const ny = r * 0.299 + g * 0.587 + b * 0.114;
  const y = (ny | 0).toString(16);
  return `#${y}${y}${y}`;
}
var CursorOverride = class {
  constructor(_document) {
    this._document = _document;
    this._styleElem = this._document.createElement("style");
    this._document.head.appendChild(this._styleElem);
    this._style = this._styleElem.sheet;
    this._owner = null;
  }
  _styleElem;
  _style;
  _owner;
  setCursor(owner, cursor) {
    if (this._owner && owner !== this._owner)
      return;
    if (this._style.cssRules.length)
      this._style.deleteRule(0);
    if (cursor) {
      const rule = `* { cursor: ${cursor} !important; }`;
      this._style.insertRule(rule, 0);
      this._owner = owner;
    } else {
      this._owner = null;
    }
  }
};
function formatDecimal(value, places = 2) {
  let valueStr = value.toFixed(places);
  while (valueStr.includes(".") && ".0".includes(valueStr.slice(-1)))
    valueStr = valueStr.slice(0, -1);
  if (!valueStr.includes("."))
    valueStr += ".0";
  return valueStr;
}
var NumberDragger = class {
  constructor(_document, _cursorOverride) {
    this._document = _document;
    this._cursorOverride = _cursorOverride;
    this.onvalue = null;
    this.onend = null;
    this._toplevel = this._document.createElement("div");
    this._toplevel.style.position = "absolute";
    this._toplevel.style.transform = "translate(0, 0)";
    this._toplevel.style.fontFamily = MONOSPACE;
    this._toplevel.style.backgroundColor = "#232323";
    this._toplevel.style.color = "#c93";
    this._toplevel.style.border = "2px solid #c93";
    this._toplevel.style.lineHeight = "2em";
    this._toplevel.style.marginLeft = "1em";
    this._toplevel.style.borderRadius = "6px";
    this._toplevel.style.boxShadow = "rgba(0, 0, 0, .4) 0px 4px 16px";
    this._toplevel.style.zIndex = "9999";
    this._segments = [];
    for (let exp = 2; exp >= -2; exp--) {
      const incr = Math.pow(10, exp);
      const segment = this._document.createElement("div");
      segment._incr = incr;
      segment.style.padding = ".5em 1em";
      segment.textContent = "" + incr;
      this._toplevel.appendChild(segment);
      this._segments.push(segment);
    }
    this._anchorMouseX = 0;
    this._anchorValue = void 0;
    this._value = void 0;
  }
  onvalue = null;
  onend = null;
  _toplevel;
  _segments;
  _anchorMouseX;
  _anchorValue;
  _value;
  _currentIncr;
  _showTimeout;
  _onMouseMove = (e) => {
    e.stopPropagation();
    const accel = 15;
    const dx = Math.round((e.clientX - this._anchorMouseX) / accel);
    const newValue = this._anchorValue + dx * this._currentIncr;
    if (this._value !== newValue) {
      this._value = newValue;
      this.onvalue(this._value);
    }
    const y = e.clientY;
    for (const segment of this._segments) {
      const bbox = segment.getBoundingClientRect();
      if (y < bbox.bottom) {
        if (this._selectSegment(segment)) {
          if (this._anchorValue !== this._value) {
            this._anchorMouseX = e.clientX;
            this._anchorValue = this._value;
          }
        }
        break;
      }
    }
  };
  _onMouseUp = (e) => {
    this._cursorOverride.setCursor(this, "");
    this._document.documentElement.removeEventListener("mouseup", this._onMouseUp);
    this.onend();
    if (this._showTimeout) {
      clearTimeout(this._showTimeout);
      this._showTimeout = 0;
      return;
    }
    this._document.documentElement.removeEventListener("mousemove", this._onMouseMove, { capture: true });
    this._document.body.removeChild(this._toplevel);
  };
  _selectSegment(segment) {
    const incr = segment._incr;
    if (this._currentIncr === incr)
      return false;
    this._currentIncr = incr;
    for (const seg of this._segments) {
      const hilite = seg === segment;
      seg.style.backgroundColor = hilite ? "#c93" : "";
      seg.style.color = hilite ? "#222" : "";
      seg.style.fontWeight = hilite ? "bold" : "";
    }
    return true;
  }
  _show() {
    this._showTimeout = 0;
    this._document.body.appendChild(this._toplevel);
    this._document.documentElement.addEventListener("mousemove", this._onMouseMove, { capture: true });
  }
  setPosition(x, y) {
    this._toplevel.style.left = x + "px";
    this._toplevel.style.top = y + "px";
  }
  show(value, e) {
    this._anchorMouseX = e.clientX;
    this._anchorValue = value;
    let segmentExp = 0;
    for (let exp = -2; exp <= 2; exp++) {
      const incr = Math.pow(10, exp + 1);
      if (value > -incr && value < incr) {
        segmentExp = exp;
        break;
      }
    }
    const segmentIdx = 4 - (segmentExp + 2);
    this._selectSegment(this._segments[segmentIdx]);
    const pcts = ["-10.5%", "-30%", "-50%", "-70%", "-89.5%"];
    this._toplevel.style.transform = `translate(0, ${pcts[segmentIdx]}`;
    this._document.documentElement.addEventListener("mouseup", this._onMouseUp);
    this._showTimeout = window.setTimeout(this._show.bind(this), 100);
    this._cursorOverride.setCursor(this, "e-resize");
  }
};
function expensiveMeasureTextMargin(document2, width, height, font) {
  const canvas2 = document2.createElement("canvas");
  canvas2.width = width;
  canvas2.height = height;
  const ctx = canvas2.getContext("2d");
  ctx.font = font;
  ctx.textBaseline = "top";
  ctx.fillStyle = "black";
  ctx.fillText("l", 0, 0);
  const image = ctx.getImageData(0, 0, width, height);
  for (let y = 0; y < image.height; y++)
    for (let x = 0; x < image.width; x++)
      if (image.data[4 * (y * image.width + x) + 3])
        return y;
  throw new Error("wtf");
}
var CodeEditor = class {
  constructor(_document) {
    this._document = _document;
    this.onvaluechanged = null;
    this._prefix = "";
    this._suffix = "";
    this._paddingTop = 0.2;
    this._paddingBottom = 1.5;
    this._toplevel = this._document.createElement("div");
    this._toplevel.style.position = "relative";
    this._document.body.appendChild(this._toplevel);
    this._document.addEventListener("scroll", this._onScroll);
    this._canvas = this._document.createElement("canvas");
    this._toplevel.appendChild(this._canvas);
    this._textarea = this._document.createElement("textarea");
    this._textarea.style.fontFamily = MONOSPACE;
    this._textarea.oninput = this._onInput;
    this._textarea.onkeydown = this._onKeyDown;
    this._toplevel.appendChild(this._textarea);
    this._canvas.onmousedown = this._onMouseDown;
    this._canvas.onmouseleave = this._onMouseLeave;
    this._canvas.onmousemove = this._onMouseMove;
    this._textarea.style.whiteSpace = "pre-wrap";
    this._textarea.style.wordBreak = "break-all";
    this._textarea.style.position = "absolute";
    this._textarea.style.left = "-99999px";
    this._textarea.style.overflow = "hidden";
    this._canvas.style.position = "fixed";
    this._cursorOverride = new CursorOverride(this._document);
    this._numberDragger = new NumberDragger(this._document, this._cursorOverride);
    this._numberDragger.onvalue = this._onNumberDraggerValue;
    this._numberDragger.onend = this._onNumberDraggerEnd;
    this.elem = this._toplevel;
    visibleRAF(this._canvas, this._redraw);
  }
  onvaluechanged = null;
  elem;
  _toplevel;
  _textarea;
  _canvas;
  _numberDragger;
  _cursorOverride;
  _prefix;
  _suffix;
  _paddingTop;
  _paddingBottom;
  _width;
  _minHeight;
  _lineFlairs;
  _prefixLines;
  _suffixLines;
  _valueChanged = false;
  _valueChangedImmediate = false;
  _needsRecalculate = false;
  _cols;
  _height;
  _charWidth;
  _rowHeight;
  _charMarginTop;
  _gutterMargin;
  _gutterWidth;
  _textMargin;
  _lineModel;
  _syntaxRuns;
  _textareaStyle;
  _draggableNumbers;
  // Redraw-internal state.
  _redraw_cursorPosition;
  _redraw_cursorBlinkStart;
  _mouseX;
  _mouseY;
  _mouseIdx;
  _dragging = false;
  _dragStartIdx;
  _draggingNumber = null;
  _setNeedsRecalculate() {
    this._needsRecalculate = true;
  }
  _setValueChanged(immediate = false) {
    this._valueChanged = true;
    this._valueChangedImmediate = immediate;
    this._needsRecalculate = true;
  }
  // Sets a chunk of text at the beginning and end that the user cannot modify.
  setPrefixSuffix(prefix, suffix) {
    this._prefix = prefix;
    this._suffix = suffix;
    this._setNeedsRecalculate();
  }
  setFontSize(size) {
    this._textarea.style.fontSize = size;
    this._setNeedsRecalculate();
  }
  setLineFlairs(lineFlairs) {
    this._lineFlairs = lineFlairs;
  }
  // Sets the size. The height here is actually a minimum height. Since we don't
  // yet have scrolling, the Editor always expands to fill however many lines it
  // takes up...
  setSize(w, h) {
    if (h !== void 0)
      this._minHeight = h;
    if (w !== void 0) {
      this._width = w;
      this._canvas.style.width = `${w}px`;
      this._toplevel.style.width = `${w}px`;
      this._cols = this._xyToRowCol(w, 0).col;
      this._textarea.style.width = `${this._cols}ch`;
    }
    if (w !== void 0 || h !== void 0)
      this._setNeedsRecalculate();
  }
  getValue() {
    return this._textarea.value;
  }
  setValue(t) {
    this._textarea.value = t;
    this._setValueChanged(true);
  }
  getFullText() {
    return this._prefix + this._textarea.value + this._suffix;
  }
  _isLineLocked(line) {
    if (line.lineno < this._prefixLines)
      return true;
    if (line.lineno >= this._suffixLines)
      return true;
    return false;
  }
  _recalculate() {
    if (!this._needsRecalculate)
      return;
    if (!this._toplevel.parentNode)
      return;
    const chars = this.getFullText() + "\n";
    const lineModel = [];
    let idx = 0, row = 0, lineno = 0;
    while (true) {
      let newIdx = chars.indexOf("\n", idx);
      if (newIdx < 0)
        break;
      const start = idx, end = newIdx + 1;
      const length = end - start - 1;
      const startRow = row;
      const rows = Math.max(Math.ceil(length / this._cols), 1);
      lineModel.push({ start, end, length, rows, startRow, lineno });
      row += rows;
      lineno++;
      idx = end;
    }
    this._lineModel = lineModel;
    this._prefixLines = this._prefix.split("\n").length - 1;
    this._suffixLines = this._lineModel.length - (this._suffix.split("\n").length - 1);
    const syntaxRuns = [];
    const draggableNumbers = [];
    let match;
    const keywords = /\b(function|for|while|if|else|break|continue|in|out|attribute|uniform|varying|return|struct|layout|precision|mediump|lowp|highp|discard)\b/g;
    while ((match = keywords.exec(chars)) !== null)
      syntaxRuns.push({ start: match.index, end: match.index + match[0].length, color: "#c26230" });
    const types = /\b(void|bool|float|[ui]?vec[234]|mat[234]|mat[234]x[234]|[u]?int|sampler[23]D)\b/g;
    while ((match = types.exec(chars)) !== null)
      syntaxRuns.push({ start: match.index, end: match.index + match[0].length, color: "#6d9cbe" });
    const comments = /\/\/.*$/gm;
    while ((match = comments.exec(chars)) !== null)
      syntaxRuns.push({ start: match.index, end: match.index + match[0].length, color: "#bc9458", style: "italic" });
    const numbers = /\W-?\d+(\.\d+)?\b/g;
    while ((match = numbers.exec(chars)) !== null) {
      const start = match.index + 1, end = start + match[0].length - 1;
      if (syntaxRuns.some((run) => start >= run.start && end <= run.end))
        continue;
      draggableNumbers.push({ start, end });
      syntaxRuns.push({ start, end, color: "#a5c261" });
    }
    syntaxRuns.sort((a, b) => a.start - b.start);
    this._syntaxRuns = syntaxRuns;
    this._draggableNumbers = draggableNumbers;
    const textareaStyle = this._document.defaultView.getComputedStyle(this._textarea);
    this._textareaStyle = textareaStyle;
    const ctx = this._canvas.getContext("2d");
    ctx.font = `${textareaStyle.fontSize} ${textareaStyle.fontFamily}`;
    this._charWidth = ctx.measureText(" ").width;
    const rowHeight = textareaStyle.lineHeight;
    let rowHeightN;
    if (rowHeight === "normal")
      rowHeightN = 1.15 * parseFloat(textareaStyle.fontSize);
    else
      rowHeightN = parseFloat(rowHeight);
    this._rowHeight = Math.ceil(rowHeightN);
    if (this._charMarginTop === void 0) {
      const stdMargin = 4;
      this._charMarginTop = stdMargin - expensiveMeasureTextMargin(this._document, this._charWidth, this._rowHeight, ctx.font);
    }
    const numLines = this._lineModel.length;
    const gutterChars = ("" + numLines).length;
    this._gutterMargin = 10;
    this._gutterWidth = this._charWidth * Math.max(gutterChars, 2) + this._gutterMargin * 2;
    this._textMargin = 10;
    const lastRow = this._lineModel[this._lineModel.length - 1];
    const numRows = lastRow.startRow + lastRow.rows - 1;
    const newHeight = Math.ceil(Math.max(this._minHeight, this._rowHeight * (numRows + this._paddingTop + this._paddingBottom)));
    if (newHeight !== this._height) {
      this._height = newHeight;
      this._toplevel.style.height = `${this._height}px`;
      this._textarea.style.height = this._height - this._rowHeight + "px";
    }
    this._needsRecalculate = false;
    this._recalculateMouseIdx();
    if (this._valueChanged && this.onvaluechanged)
      this.onvaluechanged(this._valueChangedImmediate);
    this._valueChanged = false;
    this._valueChangedImmediate = false;
  }
  _recalculateMouseIdx() {
    if (this._mouseX === void 0 || this._mouseY === void 0) {
      this._mouseIdx = void 0;
    } else {
      const { row, col } = this._xyToRowCol(this._mouseX, this._mouseY);
      const { line, idx } = this._rowColToLineIdx(row, col, false);
      const isLineLocked = this._isLineLocked(line);
      this._mouseIdx = isLineLocked ? void 0 : idx;
    }
  }
  _calculateIndentedLineStart(line) {
    const chars = this.getFullText();
    let idx = line.start;
    while (chars.charAt(idx) === " " && idx <= line.end)
      idx++;
    return idx;
  }
  _onInput = () => {
    this._setValueChanged();
  };
  _onKeyDown = (e) => {
    if (e.key === "Tab" && !e.shiftKey) {
      if (!this._hasSelection()) {
        this._insertAtCursor("    ");
      }
      e.preventDefault();
    } else if (e.key === "Tab" && e.shiftKey) {
      e.preventDefault();
    } else if (e.key === "Home") {
      const cursorIdx = this._getCursorIdx();
      const { line, lineIdx } = this._getCharPos(cursorIdx);
      const indentedIdx = this._calculateIndentedLineStart(line);
      if (cursorIdx !== indentedIdx) {
        if (e.shiftKey) {
          const [selectionPoint] = this._getSelection();
          this._setSelection(this._idxToTextarea(selectionPoint), this._idxToTextarea(indentedIdx));
        } else {
          this._setCursor(this._idxToTextarea(indentedIdx));
        }
        e.preventDefault();
      }
    }
  };
  _onMouseDown = (e) => {
    e.preventDefault();
    const defaultView = this._document.defaultView;
    const mouseX = e.offsetX + defaultView.scrollX;
    const mouseY = e.offsetY + defaultView.scrollY;
    const { row, col } = this._xyToRowCol(mouseX, mouseY);
    const { line } = this._rowColToLineIdx(row, 0, true);
    if (this._isLineLocked(line)) {
      this._textarea.blur();
    } else if (col === -1) {
      this._setSelection(this._idxToTextarea(line.start), this._idxToTextarea(line.end));
      this._textarea.focus();
    } else {
      const { idx } = this._rowColToLineIdx(row, col, true);
      const { idx: exactIdx } = this._rowColToLineIdx(row, col, false);
      const draggableNumber = this._findDraggableNumber(exactIdx);
      if (!e.shiftKey && draggableNumber) {
        const start = this._idxToTextarea(draggableNumber.start);
        const end = this._idxToTextarea(draggableNumber.end);
        const value = +this.getValue().slice(start, end);
        this._draggingNumber = { start, end, value };
        this._syncNumberDraggerPosition();
        this._setCursor(this._idxToTextarea(idx));
        this._numberDragger.show(value, e);
      } else {
        if (e.shiftKey) {
          if (!this._hasSelection())
            this._dragStartIdx = this._textarea.selectionStart;
          this._setSelection(this._dragStartIdx, this._idxToTextarea(idx));
        } else {
          this._dragStartIdx = this._idxToTextarea(idx);
          this._setCursor(this._dragStartIdx);
        }
        this._dragging = true;
        this._document.documentElement.addEventListener("mousemove", this._onMouseMove, { capture: true });
        this._document.documentElement.addEventListener("mouseup", this._onMouseUp);
      }
      this._textarea.focus();
    }
  };
  _onMouseUp = (e) => {
    this._dragging = false;
    this._document.documentElement.removeEventListener("mousemove", this._onMouseMove, { capture: true });
    this._document.documentElement.removeEventListener("mouseup", this._onMouseUp);
  };
  _onMouseMove = (e) => {
    e.stopPropagation();
    const defaultView = this._document.defaultView;
    this._mouseX = e.offsetX + defaultView.scrollX;
    this._mouseY = e.offsetY + defaultView.scrollY;
    this._recalculateMouseIdx();
    const { row, col } = this._xyToRowCol(this._mouseX, this._mouseY);
    const { line, idx } = this._rowColToLineIdx(row, col, true);
    if (this._dragging) {
      this._setSelection(this._dragStartIdx, this._idxToTextarea(idx));
      this._textarea.focus();
    }
    const { idx: exactIdx } = this._rowColToLineIdx(row, col, false);
    const isLineLocked = this._isLineLocked(line);
    let cursor;
    if (this._dragging) {
      cursor = "text";
    } else if (col === -1 || isLineLocked) {
      cursor = "default";
    } else if (!e.shiftKey && this._findDraggableNumber(exactIdx)) {
      cursor = "e-resize";
    } else {
      cursor = "text";
    }
    this._canvas.style.cursor = cursor;
    if (this._dragging)
      this._cursorOverride.setCursor(this, cursor);
    else
      this._cursorOverride.setCursor(this, "");
  };
  _onMouseLeave = (e) => {
    this._mouseX = void 0;
    this._mouseY = void 0;
    this._mouseIdx = void 0;
  };
  _onScroll = () => {
    this._setNeedsRecalculate();
  };
  _onNumberDraggerValue = (newValue) => {
    const { start, end } = this._draggingNumber;
    const newValueString = formatDecimal(newValue);
    this.setValue(this._spliceValue(start, end, newValueString));
    this._draggingNumber.end = start + newValueString.length;
    this._syncNumberDraggerPosition();
  };
  _onNumberDraggerEnd = () => {
    this._draggingNumber = null;
  };
  _syncNumberDraggerPosition() {
    const { end } = this._draggingNumber;
    const endPos = this._getCharPos(this._textareaToIdx(end));
    const { x, y } = this._rowColToXY(endPos.row, endPos.col);
    const bbox = this._toplevel.getBoundingClientRect();
    const absX = bbox.left + x;
    const absY = bbox.top + y + this._rowHeight / 2 + this._document.defaultView.scrollY;
    this._numberDragger.setPosition(absX, absY);
  }
  _spliceValue(start, end, v) {
    const chars = this.getValue();
    return chars.slice(0, start) + v + chars.slice(end);
  }
  _findDraggableNumber(idx) {
    this._recalculate();
    return this._draggableNumbers.find(({ start, end }) => {
      return idx >= start && idx <= end;
    });
  }
  _idxToTextarea(idx) {
    return idx - this._prefix.length;
  }
  _textareaToIdx(idx) {
    return idx + this._prefix.length;
  }
  _rowColToLineIdx(row, col, clampIdx) {
    this._recalculate();
    let line = this._lineModel[0];
    for (line of this._lineModel)
      if (row >= line.startRow && row < line.startRow + line.rows)
        break;
    let lineIdx;
    if (line.rows === 1) {
      lineIdx = col;
    } else {
      lineIdx = (row - line.startRow) * this._cols + col;
    }
    let idx;
    if (clampIdx)
      idx = line.start + Math.min(Math.max(lineIdx, 0), line.length);
    else if (lineIdx > line.length)
      idx = -1;
    else
      idx = line.start + lineIdx;
    return { line, idx };
  }
  _xyToRowCol(x, y) {
    this._recalculate();
    y -= this._paddingTop * this._rowHeight;
    const row = Math.floor(y / this._rowHeight);
    let col;
    if (x < this._gutterWidth)
      col = -1;
    x -= this._gutterWidth;
    if (col === void 0 && x < this._textMargin)
      col = 0;
    x -= this._textMargin;
    if (col === void 0)
      col = Math.round(x / this._charWidth);
    return { row, col };
  }
  _rowColToXY(row, col) {
    const x = this._gutterWidth + this._textMargin + col * this._charWidth;
    const y = (this._paddingTop + row) * this._rowHeight;
    return { x, y };
  }
  _getRowLength(row) {
    this._recalculate();
    let line = this._lineModel[0];
    for (line of this._lineModel)
      if (row >= line.startRow && row < line.startRow + line.rows)
        break;
    if (line.rows === 1)
      return line.length;
    if (row === line.startRow + line.rows - 1)
      return line.length % this._cols;
    else
      return this._cols;
  }
  _getCharPos(idx) {
    this._recalculate();
    let line = this._lineModel[0];
    for (line of this._lineModel)
      if (idx >= line.start && idx < line.end)
        break;
    const lineIdx = idx - line.start;
    if (line.rows === 1)
      return { line, lineIdx, row: line.startRow, col: lineIdx };
    const col = lineIdx % this._cols;
    const row = line.startRow + Math.min(lineIdx / this._cols | 0, line.rows);
    return { line, lineIdx, row, col };
  }
  _hasSelection() {
    return this._textarea.selectionStart !== this._textarea.selectionEnd;
  }
  _getSelection() {
    const selStartIdx = this._textareaToIdx(this._textarea.selectionStart);
    const selEndIdx = this._textareaToIdx(this._textarea.selectionEnd);
    if (this._textarea.selectionDirection === "forward")
      return [selStartIdx, selEndIdx];
    else
      return [selEndIdx, selStartIdx];
  }
  _getCursorIdx() {
    const [selectionPointIdx, cursorIdx] = this._getSelection();
    return cursorIdx;
  }
  _setSelection(a, b) {
    const start = Math.min(a, b), end = Math.max(a, b);
    const direction = a < b ? "forward" : "backward";
    this._textarea.setSelectionRange(start, end, direction);
  }
  _setCursor(a) {
    this._textarea.setSelectionRange(a, a);
  }
  _insertAtCursor(s) {
    this._textarea.focus();
    if (!this._document.execCommand("insertText", false, s)) {
      const value = this._textarea.value;
      const selStart = this._textarea.selectionStart;
      const selEnd = this._textarea.selectionEnd;
      this._textarea.value = value.slice(0, selStart) + s + value.slice(selEnd);
      this._textarea.focus();
    }
    this._setValueChanged();
  }
  _redraw = (t) => {
    const hasFocus = this._document.hasFocus();
    if (!this._needsRecalculate && !hasFocus)
      return;
    this._recalculate();
    const defaultView = this._document.defaultView;
    const viewportWidth = defaultView.innerWidth;
    const viewportHeight = defaultView.innerHeight;
    const scrollX = defaultView.scrollX;
    const scrollY = defaultView.scrollY;
    const ratio = defaultView.devicePixelRatio;
    const canvasWidth = viewportWidth * ratio;
    const canvasHeight = viewportHeight * ratio;
    let sizeChanged = false;
    if (this._canvas.width !== canvasWidth || this._canvas.height !== canvasHeight) {
      this._canvas.width = canvasWidth;
      this._canvas.height = canvasHeight;
      sizeChanged = true;
    }
    const scissorX1 = Math.max(0, scrollX);
    const scissorY1 = Math.max(0, scrollY);
    const clipRectX = scissorX1;
    const clipRectY = scissorY1;
    const clipRectW = viewportWidth;
    const clipRectH = viewportHeight;
    const vizRow0 = Math.floor(clipRectY / this._rowHeight - this._paddingTop);
    const vizRow1 = Math.ceil((clipRectY + clipRectH) / this._rowHeight - this._paddingTop);
    const isRowVisible = (row) => {
      return row >= vizRow0 && row <= vizRow1;
    };
    const getRowY = (row) => {
      return (this._paddingTop + row) * this._rowHeight - clipRectY;
    };
    const ctx = this._canvas.getContext("2d");
    ctx.save();
    if (!sizeChanged) {
      ctx.rect(clipRectX, clipRectY, clipRectW, clipRectH);
      ctx.clip();
    }
    ctx.scale(ratio, ratio);
    const bgcolor = "#232323";
    ctx.fillStyle = bgcolor;
    ctx.fillRect(0, 0, this._width, this._height);
    if (hasFocus) {
      const cursorPosition = this._idxToTextarea(this._getCursorIdx());
      if (this._redraw_cursorPosition !== cursorPosition) {
        this._redraw_cursorPosition = cursorPosition;
        this._redraw_cursorBlinkStart = t;
      }
    } else {
      this._redraw_cursorPosition = void 0;
    }
    const textareaStyleFontSize = this._textareaStyle.fontSize;
    const textareaStyleFontFamily = this._textareaStyle.fontFamily;
    ctx.font = `${textareaStyleFontSize} ${textareaStyleFontFamily}`;
    const drawFlair = (line, flair) => {
      const y = getRowY(line.startRow);
      const height = this._rowHeight * line.rows;
      ctx.fillStyle = flair.color;
      ctx.fillRect(0, y, this._canvas.width, height);
    };
    if (this._redraw_cursorPosition) {
      const { line } = this._getCharPos(this._textareaToIdx(this._redraw_cursorPosition));
      drawFlair(line, { color: "#2f2a34", lineno: -1 });
    }
    if (this._lineFlairs) {
      for (const flair of this._lineFlairs) {
        const line = this._lineModel[flair.lineno];
        if (!line)
          continue;
        drawFlair(line, flair);
      }
    }
    ctx.save();
    ctx.fillStyle = "#445";
    ctx.fillRect(0, 0, this._gutterWidth, this._canvas.height);
    ctx.restore();
    for (let i = 0; i < this._lineModel.length; i++) {
      const line = this._lineModel[i];
      if (!isRowVisible(line.startRow))
        continue;
      const no = line.lineno + 1;
      const y = getRowY(line.startRow);
      ctx.fillStyle = this._isLineLocked(line) ? "#888" : "#ccc";
      ctx.textBaseline = "top";
      ctx.textAlign = "right";
      const noString = "" + no;
      ctx.fillText(noString, this._gutterWidth - this._gutterMargin, this._charMarginTop + y);
    }
    const chars = this.getFullText() + "\n";
    ctx.save();
    ctx.translate(this._gutterWidth + this._textMargin, 0);
    if (this._hasSelection()) {
      const startPos = this._getCharPos(this._textareaToIdx(this._textarea.selectionStart));
      const endPos = this._getCharPos(this._textareaToIdx(this._textarea.selectionEnd));
      for (let row = startPos.row; row <= endPos.row; row++) {
        let colStart = row === startPos.row ? startPos.col : 0;
        let colEnd = row === endPos.row ? endPos.col : this._getRowLength(row);
        const selectionColor = hasFocus ? "#336" : "#333";
        const startX = colStart * this._charWidth;
        const endX = colEnd * this._charWidth;
        const y = getRowY(row);
        ctx.fillStyle = selectionColor;
        ctx.fillRect(startX, y, endX - startX, this._rowHeight);
      }
    }
    const syntaxRuns = this._syntaxRuns;
    let currentSyntaxRun = 0;
    let draggableNumber;
    if (this._draggingNumber !== null) {
      const { start, end } = this._draggingNumber;
      draggableNumber = { start: this._textareaToIdx(start), end: this._textareaToIdx(end) };
    } else if (!this._dragging && this._mouseIdx > -1) {
      draggableNumber = this._findDraggableNumber(this._mouseIdx);
    }
    let currentFont;
    for (let m = 0; m < this._lineModel.length; m++) {
      const line = this._lineModel[m];
      let row = line.startRow, col = 0;
      for (let i = line.start; i < line.end; i++) {
        if (col === this._cols && row - line.startRow < line.rows - 1) {
          row++;
          col = 0;
        }
        if (!isRowVisible(row))
          continue;
        const char = chars.charAt(i);
        const x = col * this._charWidth, y = getRowY(row);
        if (i === this._textareaToIdx(this._redraw_cursorPosition)) {
          ctx.save();
          ctx.fillStyle = "#fff";
          const blinkAnimationT = (t - this._redraw_cursorBlinkStart) / 1e3;
          const blinkAlpha = Math.sin(blinkAnimationT * 6) + 1;
          ctx.globalAlpha = blinkAlpha;
          ctx.fillRect(Math.floor(x), y, 2, this._rowHeight);
          ctx.restore();
        }
        if (char === "\n")
          break;
        if (draggableNumber !== void 0 && i >= draggableNumber.start && i < draggableNumber.end) {
          ctx.save();
          ctx.beginPath();
          ctx.moveTo(x | 0, y + this._rowHeight);
          ctx.lineTo(x + this._charWidth | 0, y + this._rowHeight);
          ctx.setLineDash([1, 1]);
          ctx.strokeStyle = "rgba(255, 255, 255, 0.6)";
          ctx.lineWidth = 1;
          ctx.stroke();
          ctx.restore();
        }
        let color = "#e6e1dc";
        let style = "";
        while (currentSyntaxRun < syntaxRuns.length && i >= syntaxRuns[currentSyntaxRun].end)
          currentSyntaxRun++;
        if (currentSyntaxRun < syntaxRuns.length) {
          const run = syntaxRuns[currentSyntaxRun];
          if (i >= run.start && i < run.end) {
            if (run.color)
              color = run.color;
            if (run.style)
              style = run.style;
          }
        }
        if (this._isLineLocked(line)) {
          color = colorLerp(color, colorGrayscale(color), 0.75);
        }
        ctx.textBaseline = "top";
        ctx.textAlign = "left";
        ctx.fillStyle = color;
        const newFont = `${style} ${textareaStyleFontSize} ${textareaStyleFontFamily}`;
        if (currentFont !== newFont) {
          ctx.font = newFont;
          currentFont = newFont;
        }
        ctx.fillText(char, x, y + this._charMarginTop);
        col++;
      }
    }
    ctx.restore();
    ctx.restore();
  };
};

// src/noclip/gfx/helpers/GfxShaderLibrary.ts
var GfxShaderLibrary;
((GfxShaderLibrary2) => {
  GfxShaderLibrary2.MatrixLibrary = `
struct Mat2x4 { vec4 mx; vec4 my; };
struct Mat3x4 { vec4 mx; vec4 my; vec4 mz; };
struct Mat4x4 { vec4 mx; vec4 my; vec4 mz; vec4 mw; };

mat4x2 UnpackMatrix(Mat2x4 m) { return mat4x2(transpose(mat4(m.mx, m.my, vec4(0, 0, 0, 0), vec4(0, 0, 0, 1)))); }
mat4x3 UnpackMatrix(Mat3x4 m) { return mat4x3(transpose(mat4(m.mx, m.my, m.mz, vec4(0, 0, 0, 1)))); }
mat4 UnpackMatrix(Mat4x4 m) { return transpose(mat4(m.mx, m.my, m.mz, m.mw)); }
`;
  GfxShaderLibrary2.saturate = `
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, vec2(0.0), vec2(1.0)); }
vec3 saturate(vec3 v) { return clamp(v, vec3(0.0), vec3(1.0)); }
vec4 saturate(vec4 v) { return clamp(v, vec4(0.0), vec4(1.0)); }
`;
  GfxShaderLibrary2.invlerp = `
float invlerp(float a, float b, float v) { return (v - a) / (b - a); }
`;
  GfxShaderLibrary2.MulNormalMatrix = `
vec3 MulNormalMatrix(mat4x3 t_Matrix, vec3 t_Value) {
    // Pull out the squared scaling.
    vec3 t_SqScale = vec3(dot(t_Matrix[0], t_Matrix[0]), dot(t_Matrix[1], t_Matrix[1]), dot(t_Matrix[2], t_Matrix[2]));
    return normalize(t_Matrix * vec4(t_Value / t_SqScale, 0.0));
}
`;
  GfxShaderLibrary2.CalcScaleBias = `
vec2 CalcScaleBias(in vec2 t_Pos, in vec4 t_SB) {
    return t_Pos.xy * t_SB.xy + t_SB.zw;
}
`;
  function makeFullscreenVS(z = `1.0`, w = `1.0`) {
    return `
out vec2 v_TexCoord;

void main() {
    v_TexCoord.x = (gl_VertexID == 1) ? 2.0 : 0.0;
    v_TexCoord.y = (gl_VertexID == 2) ? 2.0 : 0.0;
    gl_Position.xy = v_TexCoord * vec2(2) - vec2(1);
    gl_Position.zw = vec2(${z}, ${w});

#if GFX_CLIPSPACE_NEAR_ZERO()
    gl_Position.z = (gl_Position.z + gl_Position.w) * 0.5;
#endif

#if GFX_VIEWPORT_ORIGIN_TL()
    v_TexCoord.y = 1.0 - v_TexCoord.y;
#endif
}
`;
  }
  GfxShaderLibrary2.makeFullscreenVS = makeFullscreenVS;
  GfxShaderLibrary2.fullscreenVS = makeFullscreenVS();
  GfxShaderLibrary2.fullscreenBlitOneTexPS = `
uniform sampler2D u_Texture;
in vec2 v_TexCoord;

void main() {
    gl_FragColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}
`;
  GfxShaderLibrary2.MonochromeNTSC = `
float MonochromeNTSC(vec3 t_Color) {
    // NTSC primaries. Note that this is designed for gamma-space values.
    return dot(t_Color.rgb, vec3(0.299, 0.587, 0.114));
}
`;
  GfxShaderLibrary2.MonochromeNTSCLinear = `
float MonochromeNTSCLinear(vec3 t_Color) {
    // NTSC primaries. Note that this is designed for linear-space values.
    return dot(t_Color.rgb, vec3(0.2125, 0.7154, 0.0721));
}
`;
})(GfxShaderLibrary || (GfxShaderLibrary = {}));
function glslGenerateFloat(v) {
  let s = v.toString();
  if (!s.includes("."))
    s += ".0";
  if (s.includes("e"))
    s = v.toFixed(5);
  return s;
}

// src/noclip/gfx/shaderc/GfxShaderCompiler.ts
function defineStr(k, v) {
  return `#define ${k} ${v}`;
}
function parseBinding(layout) {
  if (layout === void 0)
    return null;
  const g = /binding\s*=\s*(\d+)/.exec(layout);
  if (g !== null) {
    const bindingNum = parseInt(g[1], 10);
    if (!Number.isNaN(bindingNum))
      return bindingNum;
  }
  return null;
}
function getSeparateSamplerTypes(combinedSamplerType) {
  let samplerType = ``, textureType = combinedSamplerType;
  if (combinedSamplerType.endsWith(`Shadow`)) {
    textureType = textureType.slice(0, -6);
    samplerType = `Shadow`;
  }
  return [textureType, samplerType];
}
function preprocessShader_GLSL(vendorInfo, type, source, defines = null, maxSamplerBinding = -1) {
  const lines = source.split("\n").map((n) => {
    return n.replace(/\s*[/][/].*$/, "");
  }).filter((n) => {
    const isEmpty = !n || /^\s+$/.test(n);
    return !isEmpty;
  });
  let definesString = "";
  if (defines !== null)
    definesString = [...defines.entries()].map(([k, v]) => defineStr(k, v)).join("\n");
  let precision = lines.filter((line) => line.startsWith("precision")).join("\n") || "precision highp float;";
  let rest = lines.filter((line) => !line.startsWith("precision")).join("\n");
  let extraDefines = `
#define GFX_CLIPSPACE_NEAR_Z()     (${glslGenerateFloat(vendorInfo.clipSpaceNearZ)})
#define GFX_CLIPSPACE_NEAR_ZERO()  (${vendorInfo.clipSpaceNearZ === 0 /* Zero */ ? "1" : "0"})
#define GFX_VIEWPORT_ORIGIN_TL()   (${vendorInfo.viewportOrigin === 1 /* UpperLeft */ ? "1" : "0"})
#define GFX_PLATFORM_WEBGPU()      (${vendorInfo.platform === 1 /* WebGPU */ ? "1" : "0"})
`;
  if (vendorInfo.explicitBindingLocations) {
    let set = 0, implicitBinding = 0, location = 0;
    assert2(vendorInfo.separateSamplerTextures);
    rest = rest.replace(/^(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm, (substr, cap, layout, combinedSamplerType, samplerName) => {
      let binding = parseBinding(layout);
      if (binding === null)
        binding = implicitBinding++;
      maxSamplerBinding = Math.max(maxSamplerBinding, binding);
      const [textureType, samplerType] = getSeparateSamplerTypes(combinedSamplerType);
      return `
layout(set = ${set}, binding = ${binding * 2 + 0}) uniform texture${textureType} T_${samplerName};
layout(set = ${set}, binding = ${binding * 2 + 1}) uniform sampler${samplerType} S_${samplerName};`.trim();
    });
    let bufferBinding = maxSamplerBinding * 2 + 2;
    rest = rest.replace(/^(layout\((.*)\))?\s*uniform(.+{)$/gm, (substr, cap, layout, rest2) => {
      const layout2 = layout ? `${layout}, ` : ``;
      return `layout(${layout2}set = ${set}, binding = ${bufferBinding++}) uniform ${rest2}`;
    });
    rest = rest.replace(type === "frag" ? /^\b(flat\W+)?(varying|in)\b/gm : /^\b(flat\W+)?(varying|out)\b/gm, (tok) => {
      return `layout(location = ${location++}) ${tok}`;
    });
    extraDefines += `${defineStr(`gl_VertexID`, `gl_VertexIndex`)}
`;
    extraDefines += `${defineStr(`gl_InstanceID`, `gl_InstanceIndex`)}
`;
    precision = precision.replace(/^precision (.*) sampler(.*);$/gm, "");
  } else {
    let implicitBinding = 0;
    rest = rest.replace(/^(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm, (substr, cap, layout, combinedSamplerType, samplerName) => {
      let binding = parseBinding(layout);
      if (binding === null)
        binding = implicitBinding++;
      return `uniform sampler${combinedSamplerType} ${samplerName}; // BINDING=${binding}`;
    });
  }
  rest = rest.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g, (substr, combinedSamplerType, samplerName) => {
    return `SAMPLER_${combinedSamplerType}(P_${samplerName})`;
  });
  rest = rest.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g, (substr, combinedSamplerType, samplerName) => {
    return `PP_SAMPLER_${combinedSamplerType}(P_${samplerName})`;
  });
  rest = rest.replace(/\bPU_TEXTURE\((.*?)\)/g, (substr, samplerName) => {
    return `TEXTURE(P_${samplerName})`;
  });
  if (vendorInfo.separateSamplerTextures) {
    rest = rest.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g, (substr, combinedSamplerType, samplerName) => {
      const [textureType, samplerType] = getSeparateSamplerTypes(combinedSamplerType);
      return `texture${textureType} T_P_${samplerName}, sampler${samplerType} S_P_${samplerName}`;
    });
    rest = rest.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g, (substr, combinedSamplerType, samplerName) => {
      return `T_${samplerName}, S_${samplerName}`;
    });
    rest = rest.replace(/\bSAMPLER_(\w+)\((.*?)\)/g, (substr, combinedSamplerType, samplerName) => {
      return `sampler${combinedSamplerType}(T_${samplerName}, S_${samplerName})`;
    });
    rest = rest.replace(/\bTEXTURE\((.*?)\)/g, (substr, samplerName) => {
      return `T_${samplerName}`;
    });
  } else {
    rest = rest.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g, (substr, combinedSamplerType, samplerName) => {
      return `sampler${combinedSamplerType} P_${samplerName}`;
    });
    rest = rest.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g, (substr, combinedSamplerType, samplerName) => {
      return samplerName;
    });
    rest = rest.replace(/\bSAMPLER_(\w+)\((.*?)\)/g, (substr, combinedSamplerType, samplerName) => {
      return samplerName;
    });
    rest = rest.replace(/\bTEXTURE\((.*?)\)/g, (substr, samplerName) => {
      return samplerName;
    });
  }
  const hasFragColor = rest.includes("gl_FragColor");
  return `
${vendorInfo.glslVersion}
${precision}
#define ${type.toUpperCase()}
#define attribute in
#define varying ${type === "vert" ? "out" : "in"}
#define main${type === "vert" ? "VS" : "PS"} main
${extraDefines}
${hasFragColor ? `
#define gl_FragColor o_color
${type === "frag" ? `layout(location = 0) out vec4 o_color;` : ""}
` : ``}
${definesString}
${rest}
`.trim();
}
function preprocessProgram_GLSL(vendorInfo, vert, frag, defines = null) {
  const preprocessedVert = preprocessShader_GLSL(vendorInfo, "vert", vert, defines);
  const preprocessedFrag = preprocessShader_GLSL(vendorInfo, "frag", frag, defines);
  return { vert, frag, preprocessedVert, preprocessedFrag };
}

// src/noclip/Program.ts
var DeviceProgram = class {
  name = "(unnamed DeviceProgram)";
  // Compiled program.
  preprocessedVert = "";
  preprocessedFrag = "";
  // Inputs.
  both = "";
  vert = "";
  frag = "";
  defines = /* @__PURE__ */ new Map();
  maxSamplerBinding = -1;
  definesChanged() {
    this.preprocessedVert = "";
    this.preprocessedFrag = "";
  }
  setDefineString(name, v) {
    if (v !== null) {
      if (this.defines.get(name) === v)
        return false;
      this.defines.set(name, v);
    } else {
      if (!this.defines.has(name))
        return false;
      this.defines.delete(name);
    }
    this.definesChanged();
    return true;
  }
  setDefineBool(name, v) {
    return this.setDefineString(name, v ? "1" : null);
  }
  getDefineString(name) {
    return nullify(this.defines.get(name));
  }
  getDefineBool(name) {
    const str = this.getDefineString(name);
    if (str !== null)
      assert(str === "1");
    return str !== null;
  }
  ensurePreprocessed(vendorInfo) {
    if (this.preprocessedVert === "") {
      this.preprocessedVert = preprocessShader_GLSL(vendorInfo, "vert", this.both + this.vert, this.defines, this.maxSamplerBinding);
      this.preprocessedFrag = preprocessShader_GLSL(vendorInfo, "frag", this.both + this.frag, this.defines, this.maxSamplerBinding);
    }
  }
  _gfxDevice = null;
  _gfxProgram = null;
  associate(device, program) {
    this._gfxDevice = device;
    this._gfxProgram = program;
    if (this.name === "(unnamed DeviceProgram)")
      this.name = this.constructor.name;
    this._gfxDevice.setResourceName(program, this.name);
  }
  _editShader(n) {
    const win = assertExists(window.open("about:blank", void 0, `location=off, resizable, alwaysRaised, left=20, top=20, width=1200, height=900`));
    const init = () => {
      const editor = new CodeEditor(win.document);
      const document2 = win.document;
      const title = n === "vert" ? `${this.name} - Vertex Shader` : `${this.name} - Fragment Shader`;
      document2.title = title;
      document2.body.style.margin = "0";
      const shader = this[n];
      editor.setValue(shader);
      editor.setFontSize("16px");
      let timeout = 0;
      const tryCompile = () => {
        timeout = 0;
        this[n] = editor.getValue();
        if (this._gfxDevice !== null && this._gfxProgram !== null) {
          this.preprocessedVert = "";
          this.ensurePreprocessed(this._gfxDevice.queryVendorInfo());
          this._gfxDevice.programPatched(this._gfxProgram, this);
        }
      };
      editor.onvaluechanged = function(immediate) {
        if (timeout > 0)
          clearTimeout(timeout);
        if (immediate) {
          tryCompile();
        } else {
          timeout = window.setTimeout(tryCompile, 500);
        }
      };
      const onresize = win.onresize = () => {
        editor.setSize(document2.body.offsetWidth, window.innerHeight);
      };
      onresize();
      win.editor = editor;
      window.editor = editor;
      win.document.body.appendChild(editor.elem);
      window.addEventListener("beforeunload", () => {
        win.close();
      });
      window.addEventListener("loadNewScene", () => {
        win.close();
      });
    };
    if (win.document.readyState === "complete")
      init();
    else
      win.onload = init;
  }
  editb() {
    this._editShader("both");
  }
  editv() {
    this._editShader("vert");
  }
  editf() {
    this._editShader("frag");
  }
};

// src/noclip/gx/gx_material.ts
var EFB_WIDTH = 640;
var EFB_HEIGHT = 528;
var GXShaderLibrary;
((GXShaderLibrary2) => {
  GXShaderLibrary2.TevOverflow = `
float TevOverflow(float a) { return float(int(a * 255.0) & 255) / 255.0; }
vec3 TevOverflow(vec3 a) { return vec3(TevOverflow(a.r), TevOverflow(a.g), TevOverflow(a.b)); }
vec4 TevOverflow(vec4 a) { return vec4(TevOverflow(a.r), TevOverflow(a.g), TevOverflow(a.b), TevOverflow(a.a)); }
`;
  GXShaderLibrary2.GXIntensity = `
float GXIntensity(vec3 t_Color) {
    // https://github.com/dolphin-emu/dolphin/blob/4cd48e609c507e65b95bca5afb416b59eaf7f683/Source/Core/VideoCommon/TextureConverterShaderGen.cpp#L237-L241
    return dot(t_Color, vec3(0.257, 0.504, 0.098)) + 16.0/255.0;
}
`;
  function generateBlurFunction(functionName, tapCount, radiusStr, intensityPerTapStr, angleOffset = 0) {
    let S = `
vec3 ${functionName}(PD_SAMPLER_2D(t_Texture), in vec2 t_TexCoord, in vec2 t_Aspect) {
    vec3 c = vec3(0.0);
`;
    for (let i = 0; i < tapCount; i++) {
      const theta = angleOffset + 6.283185307179586 /* TAU */ * (i / tapCount);
      const x = Math.cos(theta), y = -Math.sin(theta);
      S += `
    c += (texture(PU_SAMPLER_2D(t_Texture), t_TexCoord + t_Aspect * vec2(${glslGenerateFloat(x)} * ${radiusStr}, ${glslGenerateFloat(y)} * ${radiusStr})).rgb * ${intensityPerTapStr});`;
    }
    S += `
    return c;
}
`;
    return S;
  }
  GXShaderLibrary2.generateBlurFunction = generateBlurFunction;
})(GXShaderLibrary || (GXShaderLibrary = {}));
var Light = class {
  Position = vec32.create();
  Direction = vec32.create();
  DistAtten = vec32.create();
  CosAtten = vec32.create();
  Color = colorNewCopy(TransparentBlack);
  constructor() {
    this.reset();
  }
  reset() {
    vec32.zero(this.Position);
    vec32.set(this.Direction, 0, 0, -1);
    vec32.set(this.DistAtten, 1, 0, 0);
    vec32.set(this.CosAtten, 1, 0, 0);
    colorFromRGBA(this.Color, 0, 0, 0, 1);
  }
  copy(o) {
    vec32.copy(this.Position, o.Position);
    vec32.copy(this.Direction, o.Direction);
    vec32.copy(this.DistAtten, o.DistAtten);
    vec32.copy(this.CosAtten, o.CosAtten);
    colorCopy(this.Color, o.Color);
  }
};
var FogBlock = class {
  Color = colorNewCopy(TransparentBlack);
  A = 0;
  B = 0;
  C = 0;
  AdjTable = new Uint16Array(10);
  AdjCenter = 0;
  reset() {
    colorFromRGBA(this.Color, 0, 0, 0, 0);
    this.A = 0;
    this.B = 0;
    this.C = 0;
    this.AdjTable.fill(0);
    this.AdjCenter = 0;
  }
  copy(o) {
    colorCopy(this.Color, o.Color);
    this.A = o.A;
    this.B = o.B;
    this.C = o.C;
    this.AdjTable.set(o.AdjTable);
    this.AdjCenter = o.AdjCenter;
  }
};
var TevDefaultSwapTables = [
  [0 /* R */, 1 /* G */, 2 /* B */, 3 /* A */],
  [0 /* R */, 0 /* R */, 0 /* R */, 3 /* A */],
  [1 /* G */, 1 /* G */, 1 /* G */, 3 /* A */],
  [2 /* B */, 2 /* B */, 2 /* B */, 3 /* A */]
];
var vtxAttributeGenDefs = [
  { attrInput: 2 /* POS */, name: "Position", format: GfxFormat.F32_RGBA },
  { attrInput: 0 /* TEX0123MTXIDX */, name: "TexMtx0123Idx", format: GfxFormat.F32_RGBA },
  { attrInput: 1 /* TEX4567MTXIDX */, name: "TexMtx4567Idx", format: GfxFormat.F32_RGBA },
  { attrInput: 3 /* NRM */, name: "Normal", format: GfxFormat.F32_RGB },
  { attrInput: 4 /* BINRM */, name: "Binormal", format: GfxFormat.F32_RGB },
  { attrInput: 5 /* TANGENT */, name: "Tangent", format: GfxFormat.F32_RGB },
  { attrInput: 6 /* CLR0 */, name: "Color0", format: GfxFormat.F32_RGBA },
  { attrInput: 7 /* CLR1 */, name: "Color1", format: GfxFormat.F32_RGBA },
  { attrInput: 8 /* TEX01 */, name: "Tex01", format: GfxFormat.F32_RGBA },
  { attrInput: 9 /* TEX23 */, name: "Tex23", format: GfxFormat.F32_RGBA },
  { attrInput: 10 /* TEX45 */, name: "Tex45", format: GfxFormat.F32_RGBA },
  { attrInput: 11 /* TEX67 */, name: "Tex67", format: GfxFormat.F32_RGBA }
];
function getVertexInputLocation(attrInput) {
  return vtxAttributeGenDefs.findIndex((genDef) => genDef.attrInput === attrInput);
}
function colorChannelsEqual(a, b) {
  if (a.lightingEnabled !== b.lightingEnabled) return false;
  if (a.litMask !== b.litMask) return false;
  if (a.ambColorSource !== b.ambColorSource) return false;
  if (a.matColorSource !== b.matColorSource) return false;
  if (a.attenuationFunction !== b.attenuationFunction) return false;
  if (a.diffuseFunction !== b.diffuseFunction) return false;
  return true;
}
function materialHasPostTexMtxBlock(material) {
  return material.hasPostTexMtxBlock !== void 0 ? material.hasPostTexMtxBlock : true;
}
function materialHasLightsBlock(material) {
  return material.hasLightsBlock !== void 0 ? material.hasLightsBlock : true;
}
function materialHasFogBlock(material) {
  return material.hasFogBlock !== void 0 ? material.hasFogBlock : false;
}
function materialUsePnMtxIdx(material) {
  return material.usePnMtxIdx !== void 0 ? material.usePnMtxIdx : true;
}
function materialUseTexMtxIdx(material, i) {
  return material.useTexMtxIdx !== void 0 ? material.useTexMtxIdx[i] : false;
}
function materialHasDynamicAlphaTest(material) {
  return material.hasDynamicAlphaTest !== void 0 ? material.hasDynamicAlphaTest : false;
}
function generateBindingsDefinition(material) {
  return `
${GfxShaderLibrary.MatrixLibrary}

// Expected to be constant across the entire scene.
layout(std140) uniform ub_SceneParams {
    Mat4x4 u_Projection;
    vec4 u_Misc0;
};

#define u_SceneTextureLODBias u_Misc0[0]
#define u_SceneTimeFrames u_Misc0[1]

struct Light {
    vec4 Color;
    vec4 Position;
    vec4 Direction;
    vec4 DistAtten;
    vec4 CosAtten;
};

struct FogBlock {
    // A, B, C, Center
    vec4 Param;
    // 10 items
    vec4 AdjTable[3];
    // Fog color is RGB
    vec4 Color;
};

// Expected to change with each material.
layout(std140) uniform ub_MaterialParams {
    vec4 u_ColorMatReg[2];
    vec4 u_ColorAmbReg[2];
    vec4 u_KonstColor[4];
    vec4 u_Color[4];
    Mat3x4 u_TexMtx[10];
    vec4 u_TextureSizes[4];
    vec4 u_TextureBiases[2];
    Mat2x4 u_IndTexMtx[3];

    // Optional parameters.
${materialHasPostTexMtxBlock(material) ? `
    Mat3x4 u_PostTexMtx[20];
` : ``}
${materialHasLightsBlock(material) ? `
    Light u_LightParams[8];
` : ``}
${materialHasFogBlock(material) ? `
    FogBlock u_FogBlock;
` : ``}
${materialHasDynamicAlphaTest(material) ? `
    vec4 u_DynamicAlphaParams;
` : ``}
};

// Expected to change with each shape draw.
layout(std140) uniform ub_DrawParams {
${materialUsePnMtxIdx(material) ? `
    Mat3x4 u_PosMtx[10];
` : `
    Mat3x4 u_PosMtx[1];
`}
};

uniform sampler2D u_Texture0;
uniform sampler2D u_Texture1;
uniform sampler2D u_Texture2;
uniform sampler2D u_Texture3;
uniform sampler2D u_Texture4;
uniform sampler2D u_Texture5;
uniform sampler2D u_Texture6;
uniform sampler2D u_Texture7;
`;
}
function getMaterialParamsBlockSize(material) {
  let size = 4 * 2 + 4 * 2 + 4 * 4 + 4 * 4 + 4 * 3 * 10 + 4 * 4 + 4 * 2 + 4 * 2 * 3;
  if (materialHasPostTexMtxBlock(material))
    size += 4 * 3 * 20;
  if (materialHasLightsBlock(material))
    size += 4 * 5 * 8;
  if (materialHasFogBlock(material))
    size += 4 * 5;
  if (materialHasDynamicAlphaTest(material))
    size += 4 * 1;
  return size;
}
function getDrawParamsBlockSize(material) {
  let size = 0;
  if (materialUsePnMtxIdx(material))
    size += 4 * 3 * 10;
  else
    size += 4 * 3 * 1;
  return size;
}
var GX_Program = class extends DeviceProgram {
  constructor(material, hacks = null) {
    super();
    this.material = material;
    this.hacks = hacks;
    this.name = material.name;
    this.generateShaders();
  }
  static ub_SceneParams = 0;
  static ub_MaterialParams = 1;
  static ub_DrawParams = 2;
  name;
  generateFloat(v) {
    return glslGenerateFloat(v);
  }
  // Color Channels
  generateMaterialSource(chan, i) {
    if (this.hacks !== null && this.hacks.disableVertexColors && chan.matColorSource === 1 /* VTX */)
      return `vec4(1.0, 1.0, 1.0, 1.0)`;
    switch (chan.matColorSource) {
      case 1 /* VTX */:
        return `a_Color${i}`;
      case 0 /* REG */:
        return `u_ColorMatReg[${i}]`;
    }
  }
  generateAmbientSource(chan, i) {
    if (this.hacks !== null && this.hacks.disableVertexColors && chan.ambColorSource === 1 /* VTX */)
      return `vec4(1.0, 1.0, 1.0, 1.0)`;
    switch (chan.ambColorSource) {
      case 1 /* VTX */:
        return `a_Color${i}`;
      case 0 /* REG */:
        return `u_ColorAmbReg[${i}]`;
    }
  }
  generateLightDiffFn(chan, lightName) {
    const NdotL = `dot(t_Normal, t_LightDeltaDir)`;
    let diffFn = chan.diffuseFunction;
    if (chan.attenuationFunction === 0 /* SPEC */)
      diffFn = 0 /* NONE */;
    switch (diffFn) {
      case 0 /* NONE */:
        return `1.0`;
      case 1 /* SIGN */:
        return `${NdotL}`;
      case 2 /* CLAMP */:
        return `max(${NdotL}, 0.0)`;
    }
  }
  generateLightAttnFn(chan, lightName) {
    if (chan.attenuationFunction === 2 /* NONE */) {
      return `
    t_Attenuation = 1.0;`;
    } else if (chan.attenuationFunction === 1 /* SPOT */) {
      const attn = `max(0.0, dot(t_LightDeltaDir, ${lightName}.Direction.xyz))`;
      const cosAttn = `max(0.0, ApplyAttenuation(${lightName}.CosAtten.xyz, ${attn}))`;
      const distAttn = `dot(${lightName}.DistAtten.xyz, vec3(1.0, t_LightDeltaDist, t_LightDeltaDist2))`;
      return `
    t_Attenuation = max(0.0, ${cosAttn} / ${distAttn});`;
    } else if (chan.attenuationFunction === 0 /* SPEC */) {
      const attn = `(dot(t_Normal, t_LightDeltaDir) >= 0.0) ? max(0.0, dot(t_Normal, ${lightName}.Direction.xyz)) : 0.0`;
      const cosAttn = `ApplyAttenuation(${lightName}.CosAtten.xyz, t_Attenuation)`;
      const normalize = chan.diffuseFunction !== 0 /* NONE */ ? `normalize` : ``;
      const distAttn = `max(0.0, ApplyAttenuation(${normalize}(${lightName}.DistAtten.xyz), t_Attenuation))`;
      return `
    t_Attenuation = ${attn};
    t_Attenuation = max(0.0, ${cosAttn} / ${distAttn});`;
    } else {
      throw "whoops";
    }
  }
  generateColorChannel(chan, outputName, i) {
    const matSource = this.generateMaterialSource(chan, i);
    const ambSource = this.generateAmbientSource(chan, i);
    let lightingEnabled = chan.lightingEnabled;
    if (this.hacks !== null && this.hacks.disableLighting)
      lightingEnabled = false;
    if (lightingEnabled && this.hacks !== null && this.hacks.lightingFudge) {
      const vtx = `a_Color${i}`;
      const amb = `u_ColorAmbReg[${i}]`;
      const mat = `u_ColorMatReg[${i}]`;
      const fudged = this.hacks.lightingFudge({ vtx, amb, mat, ambSource, matSource });
      return `${outputName} = vec4(${fudged}); // Fudge!`;
    }
    let generateLightAccum = ``;
    if (lightingEnabled) {
      generateLightAccum = `
    t_LightAccum = ${ambSource};`;
      if (chan.litMask !== 0)
        assert(materialHasLightsBlock(this.material));
      for (let j = 0; j < 8; j++) {
        if (!(chan.litMask & 1 << j))
          continue;
        const lightName = `u_LightParams[${j}]`;
        generateLightAccum += `
    t_LightDelta = ${lightName}.Position.xyz - v_Position.xyz;
    t_LightDeltaDist2 = dot(t_LightDelta, t_LightDelta);
    t_LightDeltaDist = sqrt(t_LightDeltaDist2);
    t_LightDeltaDir = t_LightDelta / t_LightDeltaDist;
${this.generateLightAttnFn(chan, lightName)}
    t_LightAccum += ${this.generateLightDiffFn(chan, lightName)} * t_Attenuation * ${lightName}.Color;
`;
      }
    } else {
      generateLightAccum += `
    t_LightAccum = vec4(1.0);`;
    }
    return `${generateLightAccum}
    ${outputName} = ${matSource} * clamp(t_LightAccum, 0.0, 1.0);`.trim();
  }
  generateLightChannel(lightChannel, outputName, i) {
    if (colorChannelsEqual(lightChannel.colorChannel, lightChannel.alphaChannel)) {
      return `
    ${this.generateColorChannel(lightChannel.colorChannel, outputName, i)}`;
    } else {
      return `
    ${this.generateColorChannel(lightChannel.colorChannel, `t_ColorChanTemp`, i)}
    ${outputName}.rgb = t_ColorChanTemp.rgb;

    ${this.generateColorChannel(lightChannel.alphaChannel, `t_ColorChanTemp`, i)}
    ${outputName}.a = t_ColorChanTemp.a;`;
    }
  }
  generatePosition() {
    return `vec3 t_Position = ${this.generateMul(`a_Position`, true, false)};`;
  }
  generateLightChannels() {
    return this.material.lightChannels.map((lightChannel, i) => {
      return this.generateLightChannel(lightChannel, `v_Color${i}`, i);
    }).join("\n");
  }
  // Output is a vec3, src is a vec4.
  generateMulPntMatrixStatic(pnt, src, nrm = false) {
    if (pnt === 60 /* IDENTITY */) {
      return `${src}.xyz`;
    } else if (pnt >= 30 /* TEXMTX0 */) {
      const texMtxIdx = (pnt - 30 /* TEXMTX0 */) / 3;
      return nrm ? `MulNormalMatrix(UnpackMatrix(u_TexMtx[${texMtxIdx}]), ${src})` : `(UnpackMatrix(u_TexMtx[${texMtxIdx}]) * ${src})`;
    } else if (pnt >= 0 /* PNMTX0 */) {
      const pnMtxIdx = (pnt - 0 /* PNMTX0 */) / 3;
      return nrm ? `MulNormalMatrix(UnpackMatrix(u_PosMtx[${pnMtxIdx}]), ${src})` : `(UnpackMatrix(u_PosMtx[${pnMtxIdx}]) * ${src})`;
    } else {
      throw "whoops";
    }
  }
  // Output is a vec3, src is a vec4.
  generateMulPntMatrixDynamic(attrStr, src, nrm = false) {
    return nrm ? `MulNormalMatrix(GetPosTexMatrix(${attrStr}), ${src})` : `(GetPosTexMatrix(${attrStr}) * ${src})`;
  }
  generateTexMtxIdxAttr(index) {
    if (index === 0 /* TEXCOORD0 */) return `(a_TexMtx0123Idx.x * 256.0)`;
    if (index === 1 /* TEXCOORD1 */) return `(a_TexMtx0123Idx.y * 256.0)`;
    if (index === 2 /* TEXCOORD2 */) return `(a_TexMtx0123Idx.z * 256.0)`;
    if (index === 3 /* TEXCOORD3 */) return `(a_TexMtx0123Idx.w * 256.0)`;
    if (index === 4 /* TEXCOORD4 */) return `(a_TexMtx4567Idx.x * 256.0)`;
    if (index === 5 /* TEXCOORD5 */) return `(a_TexMtx4567Idx.y * 256.0)`;
    if (index === 6 /* TEXCOORD6 */) return `(a_TexMtx4567Idx.z * 256.0)`;
    if (index === 7 /* TEXCOORD7 */) return `(a_TexMtx4567Idx.w * 256.0)`;
    throw "whoops";
  }
  // TexGen
  // Output is a vec4.
  generateTexGenSource(src) {
    switch (src) {
      case 0 /* POS */:
        return `vec4(a_Position.xyz, 1.0)`;
      case 1 /* NRM */:
        return `vec4(a_Normal.xyz, 1.0)`;
      case 2 /* BINRM */:
        return `vec4(a_Binormal.xyz, 1.0)`;
      case 3 /* TANGENT */:
        return `vec4(a_Tangent.xyz, 1.0)`;
      case 19 /* COLOR0 */:
        return `v_Color0`;
      case 20 /* COLOR1 */:
        return `v_Color1`;
      case 4 /* TEX0 */:
        return `vec4(a_Tex01.xy, 1.0, 1.0)`;
      case 5 /* TEX1 */:
        return `vec4(a_Tex01.zw, 1.0, 1.0)`;
      case 6 /* TEX2 */:
        return `vec4(a_Tex23.xy, 1.0, 1.0)`;
      case 7 /* TEX3 */:
        return `vec4(a_Tex23.zw, 1.0, 1.0)`;
      case 8 /* TEX4 */:
        return `vec4(a_Tex45.xy, 1.0, 1.0)`;
      case 9 /* TEX5 */:
        return `vec4(a_Tex45.zw, 1.0, 1.0)`;
      case 10 /* TEX6 */:
        return `vec4(a_Tex67.xy, 1.0, 1.0)`;
      case 11 /* TEX7 */:
        return `vec4(a_Tex67.zw, 1.0, 1.0)`;
      // Use a previously generated texcoordgen.
      case 12 /* TEXCOORD0 */:
        return `vec4(t_TexCoord0, 1.0)`;
      case 13 /* TEXCOORD1 */:
        return `vec4(t_TexCoord1, 1.0)`;
      case 14 /* TEXCOORD2 */:
        return `vec4(t_TexCoord2, 1.0)`;
      case 15 /* TEXCOORD3 */:
        return `vec4(t_TexCoord3, 1.0)`;
      case 16 /* TEXCOORD4 */:
        return `vec4(t_TexCoord4, 1.0)`;
      case 17 /* TEXCOORD5 */:
        return `vec4(t_TexCoord5, 1.0)`;
      case 18 /* TEXCOORD6 */:
        return `vec4(t_TexCoord6, 1.0)`;
      default:
        throw new Error("whoops");
    }
  }
  // Output is a vec3, src is a vec4.
  generatePostTexGenMatrixMult(texCoordGen, src) {
    if (texCoordGen.postMatrix === 125 /* PTIDENTITY */) {
      return `${src}.xyz`;
    } else if (texCoordGen.postMatrix >= 64 /* PTTEXMTX0 */) {
      const texMtxIdx = (texCoordGen.postMatrix - 64 /* PTTEXMTX0 */) / 3;
      return `(UnpackMatrix(u_PostTexMtx[${texMtxIdx}]) * ${src})`;
    } else {
      throw "whoops";
    }
  }
  // Output is a vec3, src is a vec3.
  generateTexGenMatrixMult(texCoordGenIndex, src) {
    if (materialUseTexMtxIdx(this.material, texCoordGenIndex)) {
      const attrStr = this.generateTexMtxIdxAttr(texCoordGenIndex);
      return this.generateMulPntMatrixDynamic(attrStr, src);
    } else {
      return this.generateMulPntMatrixStatic(this.material.texGens[texCoordGenIndex].matrix, src);
    }
  }
  // Output is a vec3, src is a vec4.
  generateTexGenBump(texCoordGenIndex, src) {
    const texCoordGen = this.material.texGens[texCoordGenIndex];
    assert(texCoordGen.type >= 2 /* BUMP0 */ && texCoordGen.type <= 9 /* BUMP7 */);
    const lightIdx = texCoordGen.type - 2 /* BUMP0 */;
    const lightDir = `normalize(u_LightParams[${lightIdx}].Position.xyz - v_Position.xyz)`;
    const t = this.generateMul(`a_Tangent`, false, false);
    const b = this.generateMul(`a_Binormal`, false, false);
    return `${src}.xyz + vec3(dot(${lightDir}, ${t}.xyz), dot(${lightDir}, ${b}.xyz), 0.0)`;
  }
  // Output is a vec3, src is a vec4.
  generateTexGenType(texCoordGenIndex) {
    const texCoordGen = this.material.texGens[texCoordGenIndex];
    const src = this.generateTexGenSource(texCoordGen.source);
    if (texCoordGen.type === 10 /* SRTG */)
      return `vec3(${src}.xy, 1.0)`;
    else if (texCoordGen.type === 1 /* MTX2x4 */)
      return `vec3(${this.generateTexGenMatrixMult(texCoordGenIndex, src)}.xy, 1.0)`;
    else if (texCoordGen.type === 0 /* MTX3x4 */)
      return `${this.generateTexGenMatrixMult(texCoordGenIndex, src)}`;
    else
      return `${this.generateTexGenBump(texCoordGenIndex, src)}`;
  }
  // Output is a vec3.
  generateTexGenNrm(texCoordGenIndex) {
    const texCoordGen = this.material.texGens[texCoordGenIndex];
    const src = this.generateTexGenType(texCoordGenIndex);
    if (texCoordGen.normalize)
      return `normalize(${src})`;
    else
      return src;
  }
  // Output is a vec3.
  generateTexGenPost(texCoordGenIndex) {
    const texCoordGen = this.material.texGens[texCoordGenIndex];
    const src = this.generateTexGenNrm(texCoordGenIndex);
    if (texCoordGen.postMatrix === 125 /* PTIDENTITY */) {
      return src;
    } else {
      return this.generatePostTexGenMatrixMult(texCoordGen, `vec4(${src}, 1.0)`);
    }
  }
  generateTexGen(i) {
    const tg = this.material.texGens[i];
    let suffix;
    if (tg.type === 1 /* MTX2x4 */ || tg.type === 10 /* SRTG */)
      suffix = `.xy`;
    else
      suffix = `.xyz`;
    return `
    // TexGen ${i} Type: ${tg.type} Source: ${tg.source} Matrix: ${tg.matrix}
    vec3 t_TexCoord${i} = ${this.generateTexGenPost(i)};
    v_TexCoord${i} = t_TexCoord${i}${suffix};`;
  }
  generateTexGens() {
    return this.material.texGens.map((tg, i) => {
      return this.generateTexGen(i);
    }).join("");
  }
  generateColorVaryings() {
    return `
varying vec4 v_Color0;
varying vec4 v_Color1;
`;
  }
  generateTexCoordVaryings() {
    return this.material.texGens.map((tg, i) => {
      if (tg.type === 1 /* MTX2x4 */ || tg.type === 10 /* SRTG */)
        return `varying vec2 v_TexCoord${i};
`;
      else
        return `varying highp vec3 v_TexCoord${i};
`;
    }).join("");
  }
  generateTexCoordGetters() {
    return this.material.texGens.map((tg, i) => {
      if (tg.type === 1 /* MTX2x4 */ || tg.type === 10 /* SRTG */)
        return `vec2 ReadTexCoord${i}() { return v_TexCoord${i}.xy; }
`;
      else
        return `vec2 ReadTexCoord${i}() { return v_TexCoord${i}.xy / v_TexCoord${i}.z; }
`;
    }).join("");
  }
  // IndTex
  generateIndTexStageScaleN(scale) {
    switch (scale) {
      case 0 /* _1 */:
        return `1.0`;
      case 1 /* _2 */:
        return `1.0/2.0`;
      case 2 /* _4 */:
        return `1.0/4.0`;
      case 3 /* _8 */:
        return `1.0/8.0`;
      case 4 /* _16 */:
        return `1.0/16.0`;
      case 5 /* _32 */:
        return `1.0/32.0`;
      case 6 /* _64 */:
        return `1.0/64.0`;
      case 7 /* _128 */:
        return `1.0/128.0`;
      case 8 /* _256 */:
        return `1.0/256.0`;
      default:
        throw "whoops";
    }
  }
  generateIndTexStageScale(stage) {
    const baseCoord = `ReadTexCoord${stage.texCoordId}()`;
    if (stage.scaleS === 0 /* _1 */ && stage.scaleT === 0 /* _1 */)
      return baseCoord;
    else
      return `${baseCoord} * vec2(${this.generateIndTexStageScaleN(stage.scaleS)}, ${this.generateIndTexStageScaleN(stage.scaleT)})`;
  }
  generateTextureSample(index, coord) {
    return `texture(SAMPLER_2D(u_Texture${index}), ${coord}, TextureLODBias(${index}))`;
  }
  generateIndTexStage(indTexStageIndex) {
    const stage = this.material.indTexStages[indTexStageIndex];
    return `
    // Indirect ${indTexStageIndex}
    vec3 t_IndTexCoord${indTexStageIndex} = 255.0 * ${this.generateTextureSample(stage.texture, this.generateIndTexStageScale(stage))}.abg;`;
  }
  generateIndTexStages() {
    return this.material.indTexStages.map((stage, i) => {
      if (stage.texCoordId >= this.material.texGens.length)
        return "";
      return this.generateIndTexStage(i);
    }).join("");
  }
  // TEV
  generateKonstColorSel(konstColor) {
    switch (konstColor) {
      case 0 /* KCSEL_1 */:
        return "vec3(8.0/8.0)";
      case 1 /* KCSEL_7_8 */:
        return "vec3(7.0/8.0)";
      case 2 /* KCSEL_6_8 */:
        return "vec3(6.0/8.0)";
      case 3 /* KCSEL_5_8 */:
        return "vec3(5.0/8.0)";
      case 4 /* KCSEL_4_8 */:
        return "vec3(4.0/8.0)";
      case 5 /* KCSEL_3_8 */:
        return "vec3(3.0/8.0)";
      case 6 /* KCSEL_2_8 */:
        return "vec3(2.0/8.0)";
      case 7 /* KCSEL_1_8 */:
        return "vec3(1.0/8.0)";
      case 12 /* KCSEL_K0 */:
        return "s_kColor0.rgb";
      case 16 /* KCSEL_K0_R */:
        return "s_kColor0.rrr";
      case 20 /* KCSEL_K0_G */:
        return "s_kColor0.ggg";
      case 24 /* KCSEL_K0_B */:
        return "s_kColor0.bbb";
      case 28 /* KCSEL_K0_A */:
        return "s_kColor0.aaa";
      case 13 /* KCSEL_K1 */:
        return "s_kColor1.rgb";
      case 17 /* KCSEL_K1_R */:
        return "s_kColor1.rrr";
      case 21 /* KCSEL_K1_G */:
        return "s_kColor1.ggg";
      case 25 /* KCSEL_K1_B */:
        return "s_kColor1.bbb";
      case 29 /* KCSEL_K1_A */:
        return "s_kColor1.aaa";
      case 14 /* KCSEL_K2 */:
        return "s_kColor2.rgb";
      case 18 /* KCSEL_K2_R */:
        return "s_kColor2.rrr";
      case 22 /* KCSEL_K2_G */:
        return "s_kColor2.ggg";
      case 26 /* KCSEL_K2_B */:
        return "s_kColor2.bbb";
      case 30 /* KCSEL_K2_A */:
        return "s_kColor2.aaa";
      case 15 /* KCSEL_K3 */:
        return "s_kColor3.rgb";
      case 19 /* KCSEL_K3_R */:
        return "s_kColor3.rrr";
      case 23 /* KCSEL_K3_G */:
        return "s_kColor3.ggg";
      case 27 /* KCSEL_K3_B */:
        return "s_kColor3.bbb";
      case 31 /* KCSEL_K3_A */:
        return "s_kColor3.aaa";
    }
  }
  generateKonstAlphaSel(konstAlpha) {
    switch (konstAlpha) {
      case 0 /* KASEL_1 */:
        return "(8.0/8.0)";
      case 1 /* KASEL_7_8 */:
        return "(7.0/8.0)";
      case 2 /* KASEL_6_8 */:
        return "(6.0/8.0)";
      case 3 /* KASEL_5_8 */:
        return "(5.0/8.0)";
      case 4 /* KASEL_4_8 */:
        return "(4.0/8.0)";
      case 5 /* KASEL_3_8 */:
        return "(3.0/8.0)";
      case 6 /* KASEL_2_8 */:
        return "(2.0/8.0)";
      case 7 /* KASEL_1_8 */:
        return "(1.0/8.0)";
      case 16 /* KASEL_K0_R */:
        return "s_kColor0.r";
      case 20 /* KASEL_K0_G */:
        return "s_kColor0.g";
      case 24 /* KASEL_K0_B */:
        return "s_kColor0.b";
      case 28 /* KASEL_K0_A */:
        return "s_kColor0.a";
      case 17 /* KASEL_K1_R */:
        return "s_kColor1.r";
      case 21 /* KASEL_K1_G */:
        return "s_kColor1.g";
      case 25 /* KASEL_K1_B */:
        return "s_kColor1.b";
      case 29 /* KASEL_K1_A */:
        return "s_kColor1.a";
      case 18 /* KASEL_K2_R */:
        return "s_kColor2.r";
      case 22 /* KASEL_K2_G */:
        return "s_kColor2.g";
      case 26 /* KASEL_K2_B */:
        return "s_kColor2.b";
      case 30 /* KASEL_K2_A */:
        return "s_kColor2.a";
      case 19 /* KASEL_K3_R */:
        return "s_kColor3.r";
      case 23 /* KASEL_K3_G */:
        return "s_kColor3.g";
      case 27 /* KASEL_K3_B */:
        return "s_kColor3.b";
      case 31 /* KASEL_K3_A */:
        return "s_kColor3.a";
    }
  }
  generateIndTexCoordBase(stage) {
    return `(t_IndTexCoord${stage.indTexStage})`;
  }
  generateAlphaBumpSelChannel(stage) {
    const baseCoord = this.generateIndTexCoordBase(stage);
    switch (stage.indTexAlphaSel) {
      case 1 /* S */:
        return `${baseCoord}.x`;
      case 2 /* T */:
        return `${baseCoord}.y`;
      case 3 /* U */:
        return `${baseCoord}.z`;
      default:
        throw "whoops";
    }
  }
  generateAlphaBumpSel(stage) {
    const baseCoord = this.generateAlphaBumpSelChannel(stage);
    switch (stage.indTexFormat) {
      case 0 /* _8 */:
        return `TevMask(${baseCoord}, 0xF8)`;
      case 1 /* _5 */:
        return `TevMask(${baseCoord}, 0xE0)`;
      case 2 /* _4 */:
        return `TevMask(${baseCoord}, 0xF0)`;
      case 3 /* _3 */:
        return `TevMask(${baseCoord}, 0xF8)`;
      default:
        throw "whoops";
    }
  }
  generateRas(stage) {
    switch (stage.channelId) {
      case 0 /* COLOR0A0 */:
        return `v_Color0`;
      case 1 /* COLOR1A1 */:
        return `v_Color1`;
      case 5 /* ALPHA_BUMP */:
        return `vec4(${this.generateAlphaBumpSel(stage)})`;
      case 6 /* ALPHA_BUMP_N */:
        return `vec4(${this.generateAlphaBumpSel(stage)} * (255.0/248.0))`;
      case 7 /* COLOR_ZERO */:
        return `vec4(0, 0, 0, 0)`;
      default:
        throw new Error(`whoops ${stage.channelId}`);
    }
  }
  stageUsesSimpleCoords(stage) {
    return stage.indTexMatrix === 0 /* OFF */ && !stage.indTexAddPrev;
  }
  generateTexAccess(stage) {
    if (stage.texMap === 255 /* TEXMAP_NULL */)
      return "vec4(1.0, 1.0, 1.0, 1.0)";
    if (this.hacks !== null && this.hacks.disableTextures)
      return "vec4(1.0, 1.0, 1.0, 1.0)";
    const texScale = this.stageUsesSimpleCoords(stage) ? `` : ` * TextureInvScale(${stage.texMap})`;
    return this.generateTextureSample(stage.texMap, `t_TexCoord${texScale}`);
  }
  generateComponentSwizzle(swapTable, channel) {
    const suffixes = ["r", "g", "b", "a"];
    if (swapTable)
      channel = swapTable[channel];
    return suffixes[channel];
  }
  generateColorSwizzle(swapTable, colorIn) {
    const swapR = this.generateComponentSwizzle(swapTable, 0 /* R */);
    const swapG = this.generateComponentSwizzle(swapTable, 1 /* G */);
    const swapB = this.generateComponentSwizzle(swapTable, 2 /* B */);
    const swapA = this.generateComponentSwizzle(swapTable, 3 /* A */);
    switch (colorIn) {
      case 8 /* TEXC */:
      case 10 /* RASC */:
        return `${swapR}${swapG}${swapB}`;
      case 9 /* TEXA */:
      case 11 /* RASA */:
        return `${swapA}${swapA}${swapA}`;
      default:
        throw "whoops";
    }
  }
  generateColorIn(stage, colorIn) {
    switch (colorIn) {
      case 0 /* CPREV */:
        return `t_ColorPrev.rgb`;
      case 1 /* APREV */:
        return `t_ColorPrev.aaa`;
      case 2 /* C0 */:
        return `t_Color0.rgb`;
      case 3 /* A0 */:
        return `t_Color0.aaa`;
      case 4 /* C1 */:
        return `t_Color1.rgb`;
      case 5 /* A1 */:
        return `t_Color1.aaa`;
      case 6 /* C2 */:
        return `t_Color2.rgb`;
      case 7 /* A2 */:
        return `t_Color2.aaa`;
      case 8 /* TEXC */:
        return `t_TexSample.${this.generateColorSwizzle(stage.texSwapTable, colorIn)}`;
      case 9 /* TEXA */:
        return `t_TexSample.${this.generateColorSwizzle(stage.texSwapTable, colorIn)}`;
      case 10 /* RASC */:
        return `saturate(${this.generateRas(stage)}.${this.generateColorSwizzle(stage.rasSwapTable, colorIn)})`;
      case 11 /* RASA */:
        return `saturate(${this.generateRas(stage)}.${this.generateColorSwizzle(stage.rasSwapTable, colorIn)})`;
      case 12 /* ONE */:
        return `vec3(1)`;
      case 13 /* HALF */:
        return `vec3(1.0/2.0)`;
      case 14 /* KONST */:
        return `${this.generateKonstColorSel(stage.konstColorSel)}`;
      case 15 /* ZERO */:
        return `vec3(0)`;
    }
  }
  generateAlphaIn(stage, alphaIn) {
    switch (alphaIn) {
      case 0 /* APREV */:
        return `t_ColorPrev.a`;
      case 1 /* A0 */:
        return `t_Color0.a`;
      case 2 /* A1 */:
        return `t_Color1.a`;
      case 3 /* A2 */:
        return `t_Color2.a`;
      case 4 /* TEXA */:
        return `t_TexSample.${this.generateComponentSwizzle(stage.texSwapTable, 3 /* A */)}`;
      case 5 /* RASA */:
        return `saturate(${this.generateRas(stage)}.${this.generateComponentSwizzle(stage.rasSwapTable, 3 /* A */)})`;
      case 6 /* KONST */:
        return `${this.generateKonstAlphaSel(stage.konstAlphaSel)}`;
      case 7 /* ZERO */:
        return `0.0`;
      default:
        throw "whoops";
    }
  }
  generateTevInputs(stage) {
    return `
    t_TevA = TevOverflow(vec4(${this.generateColorIn(stage, stage.colorInA)}, ${this.generateAlphaIn(stage, stage.alphaInA)}));
    t_TevB = TevOverflow(vec4(${this.generateColorIn(stage, stage.colorInB)}, ${this.generateAlphaIn(stage, stage.alphaInB)}));
    t_TevC = TevOverflow(vec4(${this.generateColorIn(stage, stage.colorInC)}, ${this.generateAlphaIn(stage, stage.alphaInC)}));
    t_TevD = vec4(${this.generateColorIn(stage, stage.colorInD)}, ${this.generateAlphaIn(stage, stage.alphaInD)});
`.trim();
  }
  generateTevRegister(regId) {
    switch (regId) {
      case 0 /* PREV */:
        return `t_ColorPrev`;
      case 1 /* REG0 */:
        return `t_Color0`;
      case 2 /* REG1 */:
        return `t_Color1`;
      case 3 /* REG2 */:
        return `t_Color2`;
    }
  }
  generateTevOpBiasScaleClamp(value, bias, scale) {
    let v = value;
    if (bias === 1 /* ADDHALF */)
      v = `TevBias(${v}, 0.5)`;
    else if (bias === 2 /* SUBHALF */)
      v = `TevBias(${v}, -0.5)`;
    if (scale === 1 /* SCALE_2 */)
      v = `(${v}) * 2.0`;
    else if (scale === 2 /* SCALE_4 */)
      v = `(${v}) * 4.0`;
    else if (scale === 3 /* DIVIDE_2 */)
      v = `(${v}) * 0.5`;
    return v;
  }
  generateTevOp(op, bias, scale, a, b, c, d, zero) {
    switch (op) {
      case 0 /* ADD */:
      case 1 /* SUB */:
        const neg = op === 1 /* SUB */ ? "-" : "";
        const v = `${neg}mix(${a}, ${b}, ${c}) + ${d}`;
        return this.generateTevOpBiasScaleClamp(v, bias, scale);
      case 8 /* COMP_R8_GT */:
        return `((t_TevA.r >  t_TevB.r) ? ${c} : ${zero}) + ${d}`;
      case 9 /* COMP_R8_EQ */:
        return `((t_TevA.r == t_TevB.r) ? ${c} : ${zero}) + ${d}`;
      case 10 /* COMP_GR16_GT */:
        return `((TevPack16(t_TevA.rg) >  TevPack16(t_TevB.rg)) ? ${c} : ${zero}) + ${d}`;
      case 11 /* COMP_GR16_EQ */:
        return `((TevPack16(t_TevA.rg) == TevPack16(t_TevB.rg)) ? ${c} : ${zero}) + ${d}`;
      case 12 /* COMP_BGR24_GT */:
        return `((TevPack24(t_TevA.rgb) >  TevPack24(t_TevB.rgb)) ? ${c} : ${zero}) + ${d}`;
      case 13 /* COMP_BGR24_EQ */:
        return `((TevPack24(t_TevA.rgb) == TevPack24(t_TevB.rgb)) ? ${c} : ${zero}) + ${d}`;
      case 14 /* COMP_RGB8_GT */:
        return `(TevPerCompGT(${a}, ${b}) * ${c}) + ${d}`;
      case 15 /* COMP_RGB8_EQ */:
        return `(TevPerCompEQ(${a}, ${b}) * ${c}) + ${d}`;
      default:
        debugger;
        throw new Error("whoops");
    }
  }
  generateTevOpValue(op, bias, scale, clamp6, a, b, c, d, zero) {
    const expr = this.generateTevOp(op, bias, scale, a, b, c, d, zero);
    if (clamp6)
      return `saturate(${expr})`;
    else
      return `clamp(${expr}, -4.0, 4.0)`;
  }
  generateColorOp(stage) {
    const a = `t_TevA.rgb`, b = `t_TevB.rgb`, c = `t_TevC.rgb`, d = `t_TevD.rgb`, zero = `vec3(0)`;
    const value = this.generateTevOpValue(stage.colorOp, stage.colorBias, stage.colorScale, stage.colorClamp, a, b, c, d, zero);
    return `${this.generateTevRegister(stage.colorRegId)}.rgb = ${value};`;
  }
  generateAlphaOp(stage) {
    const a = `t_TevA.a`, b = `t_TevB.a`, c = `t_TevC.a`, d = `t_TevD.a`, zero = "0.0";
    const value = this.generateTevOpValue(stage.alphaOp, stage.alphaBias, stage.alphaScale, stage.alphaClamp, a, b, c, d, zero);
    return `${this.generateTevRegister(stage.alphaRegId)}.a = ${value};`;
  }
  generateTevTexCoordWrapN(texCoord, wrap) {
    switch (wrap) {
      case 0 /* OFF */:
        return texCoord;
      case 6 /* _0 */:
        return "0.0";
      case 1 /* _256 */:
        return `mod(${texCoord}, 256.0)`;
      case 2 /* _128 */:
        return `mod(${texCoord}, 128.0)`;
      case 3 /* _64 */:
        return `mod(${texCoord}, 64.0)`;
      case 4 /* _32 */:
        return `mod(${texCoord}, 32.0)`;
      case 5 /* _16 */:
        return `mod(${texCoord}, 16.0)`;
    }
  }
  generateTevTexCoordWrap(stage) {
    if (stage.texCoordId === 255 /* TEXCOORD_NULL */ || stage.texMap === 255 /* TEXMAP_NULL */)
      return ``;
    const lastTexGenId = this.material.texGens.length - 1;
    let texGenId = stage.texCoordId;
    if (texGenId >= lastTexGenId)
      texGenId = lastTexGenId;
    if (texGenId < 0)
      return `vec2(0.0, 0.0)`;
    const texScale = this.stageUsesSimpleCoords(stage) ? `` : ` * TextureScale(${stage.texMap})`;
    const baseCoord = `ReadTexCoord${texGenId}()${texScale}`;
    if (stage.indTexWrapS === 0 /* OFF */ && stage.indTexWrapT === 0 /* OFF */)
      return baseCoord;
    else
      return `vec2(${this.generateTevTexCoordWrapN(`${baseCoord}.x`, stage.indTexWrapS)}, ${this.generateTevTexCoordWrapN(`${baseCoord}.y`, stage.indTexWrapT)})`;
  }
  generateTevTexCoordIndTexCoordBias(stage) {
    const bias = stage.indTexFormat === 0 /* _8 */ ? "-128.0" : `1.0`;
    switch (stage.indTexBiasSel) {
      case 0 /* NONE */:
        return ``;
      case 1 /* S */:
        return ` + vec3(${bias}, 0.0, 0.0)`;
      case 3 /* ST */:
        return ` + vec3(${bias}, ${bias}, 0.0)`;
      case 5 /* SU */:
        return ` + vec3(${bias}, 0.0, ${bias})`;
      case 2 /* T */:
        return ` + vec3(0.0, ${bias}, 0.0)`;
      case 6 /* TU */:
        return ` + vec3(0.0, ${bias}, ${bias})`;
      case 4 /* U */:
        return ` + vec3(0.0, 0.0, ${bias})`;
      case 7 /* STU */:
        return ` + vec3(${bias})`;
    }
  }
  generateTevTexCoordIndTexCoord(stage) {
    const baseCoord = this.generateIndTexCoordBase(stage);
    switch (stage.indTexFormat) {
      case 0 /* _8 */:
        return baseCoord;
      default:
      case 1 /* _5 */:
        throw new Error("whoops");
    }
  }
  generateTevTexCoordIndirectMtx(stage) {
    const indTexCoord = `(${this.generateTevTexCoordIndTexCoord(stage)}${this.generateTevTexCoordIndTexCoordBias(stage)})`;
    const indTexMtxIdx = (stage.indTexMatrix & 3) - 1;
    switch (stage.indTexMatrix) {
      case 1 /* _0 */:
      case 2 /* _1 */:
      case 3 /* _2 */:
        return `UnpackMatrix(u_IndTexMtx[${indTexMtxIdx}]) * vec4(${indTexCoord}, 0.0)`;
      case 5 /* S0 */:
      case 6 /* S1 */:
      case 7 /* S2 */:
        return `(u_IndTexMtx[${indTexMtxIdx}].mx.w * ReadTexCoord${stage.texCoordId}() * ${indTexCoord}.xx)`;
      case 9 /* T0 */:
      case 10 /* T1 */:
      case 11 /* T2 */:
        return `(u_IndTexMtx[${indTexMtxIdx}].mx.w * ReadTexCoord${stage.texCoordId}() * ${indTexCoord}.yy)`;
      default:
        throw "whoops";
    }
  }
  generateTevTexCoordIndirectTranslation(stage) {
    if (stage.indTexMatrix !== 0 /* OFF */ && stage.indTexStage < this.material.indTexStages.length)
      return `${this.generateTevTexCoordIndirectMtx(stage)}`;
    else
      return ``;
  }
  generateTevTexCoordIndirect(stage) {
    const baseCoord = this.generateTevTexCoordWrap(stage);
    const indCoord = this.generateTevTexCoordIndirectTranslation(stage);
    if (baseCoord !== `` && indCoord !== ``)
      return `${baseCoord} + ${indCoord}`;
    else if (baseCoord !== ``)
      return baseCoord;
    else
      return indCoord;
  }
  generateTevTexCoord(stage) {
    const finalCoord = this.generateTevTexCoordIndirect(stage);
    if (finalCoord !== ``) {
      if (stage.indTexAddPrev) {
        return `t_TexCoord += ${finalCoord};`;
      } else {
        return `t_TexCoord = ${finalCoord};`;
      }
    } else {
      return ``;
    }
  }
  generateTevStage(tevStageIndex) {
    const stage = this.material.tevStages[tevStageIndex];
    return `
    // TEV Stage ${tevStageIndex}
    ${this.generateTevTexCoord(stage)}
    // Color Combine
    // colorIn: ${stage.colorInA} ${stage.colorInB} ${stage.colorInC} ${stage.colorInD}  colorOp: ${stage.colorOp} colorBias: ${stage.colorBias} colorScale: ${stage.colorScale} colorClamp: ${stage.colorClamp} colorRegId: ${stage.colorRegId}
    // alphaIn: ${stage.alphaInA} ${stage.alphaInB} ${stage.alphaInC} ${stage.alphaInD}  alphaOp: ${stage.alphaOp} alphaBias: ${stage.alphaBias} alphaScale: ${stage.alphaScale} alphaClamp: ${stage.alphaClamp} alphaRegId: ${stage.alphaRegId}
    // texCoordId: ${stage.texCoordId} texMap: ${stage.texMap} channelId: ${stage.channelId}
    t_TexSample = ${this.generateTexAccess(stage)};
    ${this.generateTevInputs(stage)}
    ${this.generateColorOp(stage)}
    ${this.generateAlphaOp(stage)}`;
  }
  generateTevStages() {
    return this.material.tevStages.map((s, i) => this.generateTevStage(i)).join(`
`);
  }
  generateTevStagesLastMinuteFixup() {
    const tevStages = this.material.tevStages;
    const lastTevStage = tevStages[tevStages.length - 1];
    const colorReg = this.generateTevRegister(lastTevStage.colorRegId);
    const alphaReg = this.generateTevRegister(lastTevStage.alphaRegId);
    if (colorReg === alphaReg) {
      return `
    vec4 t_TevOutput = ${colorReg};`;
    } else {
      return `
    vec4 t_TevOutput = vec4(${colorReg}.rgb, ${alphaReg}.a);`;
    }
  }
  generateAlphaTestCompare(compare, ref) {
    switch (compare) {
      case 0 /* NEVER */:
        return `false`;
      case 1 /* LESS */:
        return `t_PixelOut.a <  ${ref}`;
      case 2 /* EQUAL */:
        return `t_PixelOut.a == ${ref}`;
      case 3 /* LEQUAL */:
        return `t_PixelOut.a <= ${ref}`;
      case 4 /* GREATER */:
        return `t_PixelOut.a >  ${ref}`;
      case 5 /* NEQUAL */:
        return `t_PixelOut.a != ${ref}`;
      case 6 /* GEQUAL */:
        return `t_PixelOut.a >= ${ref}`;
      case 7 /* ALWAYS */:
        return `true`;
    }
  }
  generateAlphaTestOp(op) {
    switch (op) {
      case 0 /* AND */:
        return `t_AlphaTestA && t_AlphaTestB`;
      case 1 /* OR */:
        return `t_AlphaTestA || t_AlphaTestB`;
      case 2 /* XOR */:
        return `t_AlphaTestA != t_AlphaTestB`;
      case 3 /* XNOR */:
        return `t_AlphaTestA == t_AlphaTestB`;
    }
  }
  generateAlphaTest() {
    const alphaTest = this.material.alphaTest;
    if (alphaTest.op === 1 /* OR */ && (alphaTest.compareA === 7 /* ALWAYS */ || alphaTest.compareB === 7 /* ALWAYS */))
      return "";
    const referenceA = materialHasDynamicAlphaTest(this.material) ? `u_DynamicAlphaParams.x` : this.generateFloat(alphaTest.referenceA);
    const referenceB = materialHasDynamicAlphaTest(this.material) ? `u_DynamicAlphaParams.y` : this.generateFloat(alphaTest.referenceB);
    return `
    bool t_AlphaTestA = ${this.generateAlphaTestCompare(alphaTest.compareA, referenceA)};
    bool t_AlphaTestB = ${this.generateAlphaTestCompare(alphaTest.compareB, referenceB)};
    if (!(${this.generateAlphaTestOp(alphaTest.op)}))
        discard;`;
  }
  generateFogZCoord() {
    const isDepthReversed = IsDepthReversed;
    if (isDepthReversed)
      return `(1.0 - gl_FragCoord.z)`;
    else
      return `gl_FragCoord.z`;
  }
  generateFogBase() {
    const isProjection = `(u_FogBlock.Param.y != 0.0)`;
    const A = `u_FogBlock.Param.x`;
    const B = `u_FogBlock.Param.y`;
    const z = this.generateFogZCoord();
    return `(${isProjection}) ? (${A} / (${B} - ${z})) : (${A} * ${z})`;
  }
  generateFogAdj(base) {
    if (this.material.ropInfo.fogAdjEnabled) {
      return ``;
    } else {
      return ``;
    }
  }
  generateFogFunc(base) {
    const fogType = this.material.ropInfo.fogType & 7;
    if (fogType === 2 /* PERSP_LIN */) {
      return base;
    } else if (fogType === 4 /* PERSP_EXP */) {
      return `1.0 - exp2(-8.0 * ${base});`;
    } else if (fogType === 5 /* PERSP_EXP2 */) {
      return `1.0 - exp2(-8.0 * ${base} * ${base});`;
    } else if (fogType === 14 /* ORTHO_REVEXP */) {
      return `1.0 - exp2(-8.0 * (1.0 - ${base}));`;
    } else if (fogType === 15 /* ORTHO_REVEXP2 */) {
      return `1.0 - exp2(-8.0 * (1.0 - ${base}) * (1.0 - ${base}));`;
    } else {
      throw "whoops";
    }
  }
  generateFog() {
    const ropInfo = this.material.ropInfo;
    if (ropInfo.fogType === 0 /* NONE */)
      return "";
    const C = `u_FogBlock.Param.z`;
    return `
    float t_FogBase = ${this.generateFogBase()};
${this.generateFogAdj(`t_FogBase`)}
    float t_FogZ = saturate(t_FogBase - ${C});
    float t_Fog = ${this.generateFogFunc(`t_FogZ`)};
    t_PixelOut.rgb = mix(t_PixelOut.rgb, u_FogBlock.Color.rgb, t_Fog);
`;
  }
  generateDstAlpha() {
    const ropInfo = this.material.ropInfo;
    if (ropInfo.dstAlpha === void 0)
      return "";
    return `
    t_PixelOut.a = ${this.generateFloat(ropInfo.dstAlpha)};
`;
  }
  generateAttributeStorageType(fmt) {
    switch (fmt) {
      case GfxFormat.F32_R:
        return "float";
      case GfxFormat.F32_RG:
        return "vec2";
      case GfxFormat.F32_RGB:
        return "vec3";
      case GfxFormat.F32_RGBA:
        return "vec4";
      default:
        throw "whoops";
    }
  }
  usesColorChannel(c) {
    return c.matColorSource === 1 /* VTX */ || c.ambColorSource === 1 /* VTX */;
  }
  usesLightChannel(c) {
    if (c === void 0)
      return false;
    return this.usesColorChannel(c.colorChannel) || this.usesColorChannel(c.alphaChannel);
  }
  usesNormalColorChannel(c) {
    if (!c.lightingEnabled || c.litMask === 0)
      return false;
    if (c.diffuseFunction !== 0 /* NONE */)
      return true;
    if (c.attenuationFunction === 0 /* SPEC */)
      return true;
    return false;
  }
  usesNormal() {
    return this.material.lightChannels.some((c) => {
      return this.usesNormalColorChannel(c.colorChannel) || this.usesNormalColorChannel(c.alphaChannel);
    });
  }
  usesTexGenInput(s) {
    return this.material.texGens.some((g) => {
      return g.source === s;
    });
  }
  usesBump() {
    return this.material.texGens.some((g) => {
      return g.type >= 2 /* BUMP0 */ && g.type <= 9 /* BUMP7 */;
    });
  }
  usesAttrib(a) {
    switch (a.attrInput) {
      case 2 /* POS */:
        return true;
      case 0 /* TEX0123MTXIDX */:
        return materialUseTexMtxIdx(this.material, 0) || materialUseTexMtxIdx(this.material, 1) || materialUseTexMtxIdx(this.material, 2) || materialUseTexMtxIdx(this.material, 3);
      case 1 /* TEX4567MTXIDX */:
        return materialUseTexMtxIdx(this.material, 4) || materialUseTexMtxIdx(this.material, 5) || materialUseTexMtxIdx(this.material, 6) || materialUseTexMtxIdx(this.material, 7);
      case 3 /* NRM */:
        return this.usesNormal() || this.usesTexGenInput(1 /* NRM */);
      case 5 /* TANGENT */:
        return this.usesTexGenInput(3 /* TANGENT */) || this.usesBump();
      case 4 /* BINRM */:
        return this.usesTexGenInput(2 /* BINRM */) || this.usesBump();
      case 6 /* CLR0 */:
        return this.usesLightChannel(this.material.lightChannels[0]);
      case 7 /* CLR1 */:
        return this.usesLightChannel(this.material.lightChannels[1]);
      case 8 /* TEX01 */:
        return this.usesTexGenInput(4 /* TEX0 */) || this.usesTexGenInput(5 /* TEX1 */);
      case 9 /* TEX23 */:
        return this.usesTexGenInput(6 /* TEX2 */) || this.usesTexGenInput(7 /* TEX3 */);
      case 10 /* TEX45 */:
        return this.usesTexGenInput(8 /* TEX4 */) || this.usesTexGenInput(9 /* TEX5 */);
      case 11 /* TEX67 */:
        return this.usesTexGenInput(10 /* TEX6 */) || this.usesTexGenInput(11 /* TEX7 */);
      default:
        return false;
    }
  }
  generateVertAttributeDefs() {
    return vtxAttributeGenDefs.map((a, i) => {
      if (!this.usesAttrib(a))
        return ``;
      return `layout(location = ${i}) in ${this.generateAttributeStorageType(a.format)} a_${a.name};`;
    }).join("\n");
  }
  generateMul(attr, pos, nrm) {
    const src = nrm ? attr : `vec4(${attr}.xyz, ${pos ? `1.0` : `0.0`})`;
    const gen = materialUsePnMtxIdx(this.material) ? this.generateMulPntMatrixDynamic(`a_Position.w`, src, nrm) : this.generateMulPntMatrixStatic(0 /* PNMTX0 */, src, nrm);
    return pos ? gen : `normalize(${gen}.xyz)`;
  }
  generateShaders() {
    const bindingsDefinition = generateBindingsDefinition(this.material);
    const both = `
// ${this.material.name}
precision highp float;
${bindingsDefinition}
${GfxShaderLibrary.saturate}
${GXShaderLibrary.TevOverflow}

varying vec3 v_Position;
${this.generateColorVaryings()}
${this.generateTexCoordVaryings()}
`;
    this.vert = `
${both}
${this.generateVertAttributeDefs()}

mat4x3 GetPosTexMatrix(float t_MtxIdxFloat) {
    uint t_MtxIdx = uint(t_MtxIdxFloat);
    if (t_MtxIdx == 20u)
        return mat4x3(1.0);
    else if (t_MtxIdx >= 10u)
        return UnpackMatrix(u_TexMtx[(t_MtxIdx - 10u)]);
    else
        return UnpackMatrix(u_PosMtx[t_MtxIdx]);
}

${GfxShaderLibrary.MulNormalMatrix}

float ApplyAttenuation(vec3 t_Coeff, float t_Value) {
    return dot(t_Coeff, vec3(1.0, t_Value, t_Value*t_Value));
}

${this.generateExtraVertexGlobal()}

void main() {
    ${this.generatePosition()}
    v_Position = t_Position;
    vec3 t_Normal = ${this.usesNormal() ? this.generateMul(`a_Normal`, false, true) : `vec3(0.0)`};

    vec4 t_LightAccum;
    vec3 t_LightDelta, t_LightDeltaDir;
    float t_LightDeltaDist2, t_LightDeltaDist, t_Attenuation;
    vec4 t_ColorChanTemp;
${this.generateExtraVertexMain()}
${this.generateLightChannels()}
${this.generateTexGens()}
    gl_Position = UnpackMatrix(u_Projection) * vec4(t_Position, 1.0);
}
`;
    this.frag = `
${both}
${this.generateTexCoordGetters()}

float TextureLODBias(int index) {
    vec4 elem = u_TextureBiases[index / 4]; // 01
    int sub = index % 4; // 0123
    return u_SceneTextureLODBias + elem[sub];
}
vec2 TextureScale(int index) {
    vec4 elem = u_TextureSizes[index / 2];
    int sub = 2 * (index % 2);
    return vec2(elem[sub + 0], elem[sub + 1]);
}
vec2 TextureInvScale(int index) { return 1.0 / TextureScale(index); }

vec3 TevBias(vec3 a, float b) { return a + vec3(b); }
float TevBias(float a, float b) { return a + b; }
float TevPack16(vec2 a) { return dot(a, vec2(1.0, 256.0)); }
float TevPack24(vec3 a) { return dot(a, vec3(1.0, 256.0, 256.0 * 256.0)); }
float TevPerCompGT(float a, float b) { return float(a >  b); }
float TevPerCompEQ(float a, float b) { return float(a == b); }
vec3 TevPerCompGT(vec3 a, vec3 b) { return vec3(greaterThan(a, b)); }
vec3 TevPerCompEQ(vec3 a, vec3 b) { return vec3(equal(a, b)); }
float TevMask(float n, int mask) { return float(int((n * 255.0)) & mask) / 255.0; }

${this.generateExtraPixelGlobal()}

vec4 MainColor() {
    vec4 s_kColor0   = u_KonstColor[0];
    vec4 s_kColor1   = u_KonstColor[1];
    vec4 s_kColor2   = u_KonstColor[2];
    vec4 s_kColor3   = u_KonstColor[3];

    vec4 t_ColorPrev = u_Color[0];
    vec4 t_Color0    = u_Color[1];
    vec4 t_Color1    = u_Color[2];
    vec4 t_Color2    = u_Color[3];

${this.generateIndTexStages()}

    vec2 t_TexCoord = vec2(0.0);
    vec4 t_TexSample = vec4(0.0);
    vec4 t_TevA, t_TevB, t_TevC, t_TevD;
${this.generateTevStages()}

${this.generateTevStagesLastMinuteFixup()}
    vec4 t_PixelOut = TevOverflow(t_TevOutput);
${this.generateAlphaTest()}
${this.generateFog()}
${this.generateDstAlpha()}

    return t_PixelOut;
}

layout(location = 0) out vec4 o_OutColor0;

void main() {
    o_OutColor0 = MainColor();
${this.generateExtraPixelMain()}
}
`;
  }
  generateExtraVertexGlobal() {
    return this.hacks?.extraVertexGlobal ?? "";
  }
  generateExtraVertexMain() {
    return this.hacks?.extraVertexMain ?? "";
  }
  generateExtraPixelGlobal() {
    return "";
  }
  generateExtraPixelMain() {
    return "";
  }
  generateExtraPixelMainColor() {
    return "";
  }
};
function lightSetSpot(light, cutoff, spotFunc) {
  if (cutoff <= 0 || cutoff >= 90)
    spotFunc = 0 /* OFF */;
  const cr = Math.cos(cutoff * 0.017453292519943295 /* DEG_TO_RAD */);
  if (spotFunc === 1 /* FLAT */) {
    vec32.set(light.CosAtten, -1e3 * cr, 1e3, 0);
  } else if (spotFunc === 2 /* COS */) {
    vec32.set(light.CosAtten, -cr / (1 - cr), 1 / (1 - cr), 0);
  } else if (spotFunc === 3 /* COS2 */) {
    vec32.set(light.CosAtten, 0, -cr / (1 - cr), 1 / (1 - cr));
  } else if (spotFunc === 4 /* SHARP */) {
    const d = (1 - cr) * (1 - cr);
    vec32.set(light.CosAtten, cr * (cr - 2) / d, 2 / d, -1 / d);
  } else if (spotFunc === 5 /* RING1 */) {
    const d = (1 - cr) * (1 - cr);
    vec32.set(light.CosAtten, -4 * cr / d, 4 * (1 + cr) / d, -4 / d);
  } else if (spotFunc === 6 /* RING2 */) {
    const d = (1 - cr) * (1 - cr);
    vec32.set(light.CosAtten, 1 - 2 * cr * cr / d, 4 * cr / d, -2 / d);
  } else if (spotFunc === 0 /* OFF */) {
    vec32.set(light.CosAtten, 1, 0, 0);
  }
}

// src/noclip/gx/gx_texture.ts
var texBlockInfo = {
  [0 /* I4 */]: { blockWidth: 8, blockHeight: 8, bytesPerPixelShift: 1 },
  [1 /* I8 */]: { blockWidth: 8, blockHeight: 4, bytesPerPixelShift: 0 },
  [2 /* IA4 */]: { blockWidth: 8, blockHeight: 4, bytesPerPixelShift: 0 },
  [3 /* IA8 */]: { blockWidth: 4, blockHeight: 4, bytesPerPixelShift: -1 },
  [4 /* RGB565 */]: { blockWidth: 4, blockHeight: 4, bytesPerPixelShift: -1 },
  [5 /* RGB5A3 */]: { blockWidth: 4, blockHeight: 4, bytesPerPixelShift: -1 },
  [6 /* RGBA8 */]: { blockWidth: 4, blockHeight: 4, bytesPerPixelShift: -2 },
  [8 /* C4 */]: { blockWidth: 8, blockHeight: 8, bytesPerPixelShift: 1 },
  [9 /* C8 */]: { blockWidth: 8, blockHeight: 4, bytesPerPixelShift: 0 },
  [10 /* C14X2 */]: { blockWidth: 4, blockHeight: 4, bytesPerPixelShift: -1 },
  [14 /* CMPR */]: { blockWidth: 8, blockHeight: 8, bytesPerPixelShift: 1 }
};
function calcTextureSize(format, width, height) {
  const blockInfo = texBlockInfo[format];
  const numPixels = align(width, blockInfo.blockWidth) * align(height, blockInfo.blockHeight);
  if (blockInfo.bytesPerPixelShift > 0)
    return numPixels >>> blockInfo.bytesPerPixelShift;
  else
    return numPixels << -blockInfo.bytesPerPixelShift;
}
function calcMipChain(texture, mipCount = texture.mipCount) {
  const mipLevels = [];
  const name = texture.name;
  let mipOffs = 0;
  let mipLevel = 0;
  const format = texture.format;
  let width = texture.width;
  let height = texture.height;
  while (mipLevel < mipCount) {
    const data = texture.data !== null ? texture.data.subarray(mipOffs) : null;
    const paletteFormat = texture.paletteFormat;
    const paletteData = texture.paletteData;
    const mipSize = calcTextureSize(format, width, height);
    if (data && mipSize > data.byteLength)
      break;
    mipLevels.push({ name: `${texture.name} mip level ${mipLevel}`, format, width, height, data, paletteFormat, paletteData, mipCount: 1 });
    mipLevel++;
    mipOffs += Math.max(mipSize, 32);
    width /= 2;
    height /= 2;
  }
  return { name, mipLevels, fullTextureSize: mipOffs };
}
function decode_Dummy(texture) {
  const pixels = new Uint8Array(texture.width * texture.height * 4);
  pixels.fill(255);
  return { pixels };
}
function getPaletteFormatName(paletteFormat) {
  return TexPalette[assertExists(paletteFormat)];
}
function getFormatName(format, paletteFormat) {
  switch (format) {
    case 0 /* I4 */:
    case 1 /* I8 */:
    case 2 /* IA4 */:
    case 3 /* IA8 */:
    case 4 /* RGB565 */:
    case 5 /* RGB5A3 */:
    case 6 /* RGBA8 */:
    case 14 /* CMPR */:
      return TexFormat[format];
    case 8 /* C4 */:
      return `C4 (${getPaletteFormatName(paletteFormat)})`;
    case 9 /* C8 */:
      return `C8 (${getPaletteFormatName(paletteFormat)})`;
    case 10 /* C14X2 */:
      return `C14X2 (${getPaletteFormatName(paletteFormat)})`;
    default:
      return "invalid";
  }
}
function decodeRGB565(value) {
  const r = (value >> 11 & 31) * 255 / 31;
  const g = (value >> 5 & 63) * 255 / 63;
  const b = (value & 31) * 255 / 31;
  return [r, g, b, 255];
}
function decodeRGB5A3(value) {
  if (value & 32768) {
    const r2 = (value >> 10 & 31) * 255 / 31;
    const g2 = (value >> 5 & 31) * 255 / 31;
    const b3 = (value & 31) * 255 / 31;
    return [r2, g2, b3, 255];
  }
  const a = (value >> 12 & 7) * 255 / 7;
  const r = (value >> 8 & 15) * 255 / 15;
  const g = (value >> 4 & 15) * 255 / 15;
  const b = (value & 15) * 255 / 15;
  return [r, g, b, a];
}
function decodeCmprBlock(dst, dstIndex, stride, src, srcIndex) {
  const c1 = src[srcIndex] << 8 | src[srcIndex + 1];
  const c2 = src[srcIndex + 2] << 8 | src[srcIndex + 3];
  const [r1, g1, b1] = decodeRGB565(c1);
  const [r2, g2, b22] = decodeRGB565(c2);
  const colors = new Array(4);
  colors[0] = [r1, g1, b1, 255];
  colors[1] = [r2, g2, b22, 255];
  if (c1 > c2) {
    colors[2] = [(2 * r1 + r2) / 3, (2 * g1 + g2) / 3, (2 * b1 + b22) / 3, 255];
    colors[3] = [(r1 + 2 * r2) / 3, (g1 + 2 * g2) / 3, (b1 + 2 * b22) / 3, 255];
  } else {
    colors[2] = [(r1 + r2) / 2, (g1 + g2) / 2, (b1 + b22) / 2, 255];
    colors[3] = [r2, g2, b22, 0];
  }
  let bitIndex = srcIndex + 4;
  for (let y = 0; y < 4; y++) {
    let val = src[bitIndex++];
    for (let x = 0; x < 4; x++) {
      const idx = val >> 6 & 3;
      val = val << 2 & 255;
      const color = colors[idx];
      const out = dstIndex + y * stride + x * 4;
      dst[out] = color[0];
      dst[out + 1] = color[1];
      dst[out + 2] = color[2];
      dst[out + 3] = color[3];
    }
  }
}
function decodeTileI4(dst, dstPos, stride, src, srcPos) {
  let srcIndex = srcPos;
  let dstIndex = dstPos;
  for (let y = 0; y < 8; y++) {
    for (let x = 0; x < 8; x++) {
      const byte = src[srcIndex];
      const value = (x & 1) === 0 ? byte >> 4 : byte & 15;
      const intensity = value << 4 | value;
      dst[dstIndex] = intensity;
      dst[dstIndex + 1] = intensity;
      dst[dstIndex + 2] = intensity;
      dst[dstIndex + 3] = 255;
      dstIndex += 4;
      if (x & 1) {
        srcIndex += 1;
      }
    }
    dstIndex += stride - 8 * 4;
  }
}
function decodeTileI8(dst, dstPos, stride, src, srcPos) {
  let srcIndex = srcPos;
  let dstIndex = dstPos;
  for (let y = 0; y < 4; y++) {
    for (let x = 0; x < 8; x++) {
      const intensity = src[srcIndex++];
      dst[dstIndex] = intensity;
      dst[dstIndex + 1] = intensity;
      dst[dstIndex + 2] = intensity;
      dst[dstIndex + 3] = 255;
      dstIndex += 4;
    }
    dstIndex += stride - 8 * 4;
  }
}
function decodeTileIA4(dst, dstPos, stride, src, srcPos) {
  let srcIndex = srcPos;
  let dstIndex = dstPos;
  for (let y = 0; y < 4; y++) {
    for (let x = 0; x < 8; x++) {
      const byte = src[srcIndex++];
      const intensity = (byte & 15) * 17;
      const alpha = (byte >> 4) * 17;
      dst[dstIndex] = intensity;
      dst[dstIndex + 1] = intensity;
      dst[dstIndex + 2] = intensity;
      dst[dstIndex + 3] = alpha;
      dstIndex += 4;
    }
    dstIndex += stride - 8 * 4;
  }
}
function decodeTileIA8(dst, dstPos, stride, src, srcPos) {
  let srcIndex = srcPos;
  let dstIndex = dstPos;
  for (let y = 0; y < 4; y++) {
    for (let x = 0; x < 4; x++) {
      const intensity = src[srcIndex++];
      const alpha = src[srcIndex++];
      dst[dstIndex] = intensity;
      dst[dstIndex + 1] = intensity;
      dst[dstIndex + 2] = intensity;
      dst[dstIndex + 3] = alpha;
      dstIndex += 4;
    }
    dstIndex += stride - 4 * 4;
  }
}
function decodeTileRGB565(dst, dstPos, stride, src, srcPos) {
  let srcIndex = srcPos;
  let dstIndex = dstPos;
  for (let y = 0; y < 4; y++) {
    for (let x = 0; x < 4; x++) {
      const value = src[srcIndex] << 8 | src[srcIndex + 1];
      srcIndex += 2;
      const [r, g, b, a] = decodeRGB565(value);
      dst[dstIndex] = r;
      dst[dstIndex + 1] = g;
      dst[dstIndex + 2] = b;
      dst[dstIndex + 3] = a;
      dstIndex += 4;
    }
    dstIndex += stride - 4 * 4;
  }
}
function decodeTileRGB5A3(dst, dstPos, stride, src, srcPos) {
  let srcIndex = srcPos;
  let dstIndex = dstPos;
  for (let y = 0; y < 4; y++) {
    for (let x = 0; x < 4; x++) {
      const value = src[srcIndex] << 8 | src[srcIndex + 1];
      srcIndex += 2;
      const [r, g, b, a] = decodeRGB5A3(value);
      dst[dstIndex] = r;
      dst[dstIndex + 1] = g;
      dst[dstIndex + 2] = b;
      dst[dstIndex + 3] = a;
      dstIndex += 4;
    }
    dstIndex += stride - 4 * 4;
  }
}
function decodeTileRGBA8(dst, dstPos, stride, src, srcPos) {
  let dstIndex = dstPos;
  for (let y = 0; y < 4; y++) {
    for (let x = 0; x < 4; x++) {
      const srcMv = srcPos + y * 8 + x * 2;
      const a = src[srcMv];
      const r = src[srcMv + 1];
      const g = src[srcMv + 32];
      const b = src[srcMv + 33];
      dst[dstIndex] = r;
      dst[dstIndex + 1] = g;
      dst[dstIndex + 2] = b;
      dst[dstIndex + 3] = a;
      dstIndex += 4;
    }
    dstIndex += stride - 4 * 4;
  }
}
function decodeTextureToRGBA8(texture) {
  if (texture.paletteFormat !== null && texture.paletteFormat !== void 0) {
    throw new Error("Palette textures are not supported in this build.");
  }
  const src = texture.data.createTypedArray(Uint8Array, 0, calcTextureSize(texture.format, texture.width, texture.height));
  const dst = new Uint8Array(texture.width * texture.height * 4);
  const stride = texture.width * 4;
  const blockInfo = texBlockInfo[texture.format];
  for (let y = 0; y < texture.height; y += blockInfo.blockHeight) {
    for (let x = 0; x < texture.width; x += blockInfo.blockWidth) {
      const srcPos = calcTextureOffset(texture.format, texture.width, x, y);
      const dstPos = (y * texture.width + x) * 4;
      switch (texture.format) {
        case 0 /* I4 */:
          decodeTileI4(dst, dstPos, stride, src, srcPos);
          break;
        case 1 /* I8 */:
          decodeTileI8(dst, dstPos, stride, src, srcPos);
          break;
        case 2 /* IA4 */:
          decodeTileIA4(dst, dstPos, stride, src, srcPos);
          break;
        case 3 /* IA8 */:
          decodeTileIA8(dst, dstPos, stride, src, srcPos);
          break;
        case 4 /* RGB565 */:
          decodeTileRGB565(dst, dstPos, stride, src, srcPos);
          break;
        case 5 /* RGB5A3 */:
          decodeTileRGB5A3(dst, dstPos, stride, src, srcPos);
          break;
        case 6 /* RGBA8 */:
          decodeTileRGBA8(dst, dstPos, stride, src, srcPos);
          break;
        case 14 /* CMPR */:
          decodeCmprBlock(dst, dstPos, stride, src, srcPos);
          decodeCmprBlock(dst, dstPos + 16, stride, src, srcPos + 8);
          decodeCmprBlock(dst, dstPos + stride * 4, stride, src, srcPos + 16);
          decodeCmprBlock(dst, dstPos + stride * 4 + 16, stride, src, srcPos + 24);
          break;
        default:
          throw new Error(`Unsupported texture format ${TexFormat[texture.format]}`);
      }
    }
  }
  return dst;
}
function calcTextureOffset(format, width, x, y) {
  const blockInfo = texBlockInfo[format];
  const bytesPerBlock = calcTextureSize(format, blockInfo.blockWidth, blockInfo.blockHeight);
  const blocksPerRow = align(width, blockInfo.blockWidth) / blockInfo.blockWidth;
  const blockX = x / blockInfo.blockWidth;
  const blockY = y / blockInfo.blockHeight;
  return (blockY * blocksPerRow + blockX) * bytesPerBlock;
}
async function decodeTexture(texture) {
  if (texture.data === null)
    return decode_Dummy(texture);
  const pixels = decodeTextureToRGBA8(texture);
  return { pixels };
}

// src/noclip/TextureHolder.ts
var TextureMapping = class {
  gfxTexture = null;
  gfxSampler = null;
  lateBinding = null;
  reset() {
    this.gfxTexture = null;
    this.gfxSampler = null;
    this.lateBinding = null;
  }
  copy(other) {
    this.gfxTexture = other.gfxTexture;
    this.gfxSampler = other.gfxSampler;
    this.lateBinding = other.lateBinding;
  }
};

// src/noclip/gfx/helpers/BufferHelpers.ts
function coalesceBuffer(device, usage, datas) {
  let dataLength = 0;
  for (let i = 0; i < datas.length; i++)
    dataLength += datas[i].byteLength;
  const buffer = device.createBuffer(dataLength, usage, 1 /* Static */);
  const coalescedBuffers = [];
  const combinedData = new Uint8Array(dataLength);
  let byteOffset = 0;
  for (let i = 0; i < datas.length; i++) {
    const data = datas[i];
    combinedData.set(data.createTypedArray(Uint8Array), byteOffset);
    coalescedBuffers.push({ buffer, byteOffset, byteCount: data.byteLength });
    byteOffset += data.byteLength;
  }
  device.uploadBufferData(buffer, 0, combinedData);
  return coalescedBuffers;
}
var GfxBufferCoalescerCombo = class {
  coalescedBuffers = [];
  vertexBuffer = null;
  indexBuffer = null;
  constructor(device, vertexDatas, indexDatas, name = "") {
    assert2(vertexDatas.length === indexDatas.length);
    if (vertexDatas.length === 0)
      return;
    const allVertexDatas = [];
    let maxSlice = 0;
    while (true) {
      let sliceHasBuffer = false;
      for (let i = 0; i < vertexDatas.length; i++) {
        if (vertexDatas[i][maxSlice] === void 0)
          continue;
        allVertexDatas.push(vertexDatas[i][maxSlice]);
        sliceHasBuffer = true;
      }
      if (!sliceHasBuffer)
        break;
      maxSlice++;
    }
    const vertexCoalescedBuffers = coalesceBuffer(device, 2 /* Vertex */, allVertexDatas);
    const indexCoalescedBuffers = coalesceBuffer(device, 1 /* Index */, indexDatas);
    const coalescedBuffers = [];
    let z = 0;
    for (let i = 0; i < vertexDatas.length; i++) {
      const vertexBuffers = [vertexCoalescedBuffers[z++]];
      const indexBuffer = indexCoalescedBuffers[i];
      coalescedBuffers.push({ vertexBuffers, indexBuffer });
    }
    for (let slice = 1; slice < maxSlice; slice++) {
      for (let i = 0; i < vertexDatas.length; i++) {
        if (vertexDatas[i][slice] === void 0)
          continue;
        coalescedBuffers[i].vertexBuffers.push(vertexCoalescedBuffers[z++]);
      }
    }
    this.coalescedBuffers = coalescedBuffers;
    this.vertexBuffer = this.coalescedBuffers[0].vertexBuffers[0].buffer;
    this.indexBuffer = this.coalescedBuffers[0].indexBuffer.buffer;
    device.setResourceName(this.vertexBuffer, name);
    device.setResourceName(this.indexBuffer, `${name} (IB)`);
  }
  destroy(device) {
    if (this.vertexBuffer !== null)
      device.destroyBuffer(this.vertexBuffer);
    if (this.indexBuffer !== null)
      device.destroyBuffer(this.indexBuffer);
  }
};

// src/noclip/gfx/helpers/UniformBufferHelpers.ts
function fillVec3v(d, offs, v, v3 = 0) {
  d[offs + 0] = v[0];
  d[offs + 1] = v[1];
  d[offs + 2] = v[2];
  d[offs + 3] = v3;
  return 4;
}
function fillVec4(d, offs, v0, v1 = 0, v2 = 0, v3 = 0) {
  d[offs + 0] = v0;
  d[offs + 1] = v1;
  d[offs + 2] = v2;
  d[offs + 3] = v3;
  return 4;
}
function fillColor(d, offs, c, a = c.a) {
  d[offs + 0] = c.r;
  d[offs + 1] = c.g;
  d[offs + 2] = c.b;
  d[offs + 3] = a;
  return 4;
}
function fillMatrix4x4(d, offs, m) {
  d[offs + 0] = m[0];
  d[offs + 1] = m[4];
  d[offs + 2] = m[8];
  d[offs + 3] = m[12];
  d[offs + 4] = m[1];
  d[offs + 5] = m[5];
  d[offs + 6] = m[9];
  d[offs + 7] = m[13];
  d[offs + 8] = m[2];
  d[offs + 9] = m[6];
  d[offs + 10] = m[10];
  d[offs + 11] = m[14];
  d[offs + 12] = m[3];
  d[offs + 13] = m[7];
  d[offs + 14] = m[11];
  d[offs + 15] = m[15];
  return 4 * 4;
}
function fillMatrix4x3(d, offs, m) {
  d[offs + 0] = m[0];
  d[offs + 1] = m[4];
  d[offs + 2] = m[8];
  d[offs + 3] = m[12];
  d[offs + 4] = m[1];
  d[offs + 5] = m[5];
  d[offs + 6] = m[9];
  d[offs + 7] = m[13];
  d[offs + 8] = m[2];
  d[offs + 9] = m[6];
  d[offs + 10] = m[10];
  d[offs + 11] = m[14];
  return 4 * 3;
}
function fillMatrix4x2(d, offs, m) {
  d[offs + 0] = m[0];
  d[offs + 1] = m[4];
  d[offs + 2] = m[8];
  d[offs + 3] = m[12];
  d[offs + 4] = m[1];
  d[offs + 5] = m[5];
  d[offs + 6] = m[9];
  d[offs + 7] = m[13];
  return 4 * 2;
}

// src/noclip/gfx/render/GfxRenderGraph.ts
var GfxrRenderTargetDescription = class {
  constructor(pixelFormat) {
    this.pixelFormat = pixelFormat;
  }
  width = 0;
  height = 0;
  numLevels = 1;
  sampleCount = 0;
  clearColor = "load";
  clearDepth = "load";
  clearStencil = "load";
  /**
   * Set the dimensions of a render target description.
   */
  setDimensions(width, height, sampleCount) {
    this.width = width;
    this.height = height;
    this.sampleCount = sampleCount;
  }
  copyDimensions(desc) {
    this.width = desc.width;
    this.height = desc.height;
    this.sampleCount = desc.sampleCount;
  }
};
var noopClearDescriptor = {
  clearColor: "load",
  clearDepth: "load",
  clearStencil: "load"
};
var PassImpl = class {
  constructor(passType) {
    this.passType = passType;
  }
  debugName = "";
  debugGroups = [];
  // Input state used for scheduling.
  // Attachment information. Either one of attachmentRenderTargetID or attachmentTexture should be set for a given slot.
  attachmentRenderTargetID = [];
  attachmentTexture = [];
  attachmentClearDescriptor = [];
  attachmentView = [];
  // Resolve information. Either one of resolveTextureOutputIDs or resolveTextureOutputExternalTexture should be set for a given slot.
  resolveOutputIDs = [];
  resolveOutputExternalTexture = [];
  resolveOutputExternalTextureView = [];
  // List of resolveTextureIDs that we have a reference to.
  resolveTextureInputIDs = [];
  // GfxrAttachmentSlot => refcount.
  renderTargetExtraRefs = [];
  resolveTextureInputTextures = [];
  renderTargets = [];
  // Execution state computed by scheduling.
  descriptor = {
    colorAttachments: [],
    depthStencilAttachment: null,
    occlusionQueryPool: null
  };
  viewportX = 0;
  viewportY = 0;
  viewportW = 1;
  viewportH = 1;
  // Execution callback from user.
  execFunc = null;
  postFunc = null;
  setDebugName(debugName) {
    this.debugName = debugName;
    this.debugGroups.push(debugName);
  }
  setViewport(x, y, w, h) {
    this.viewportX = x;
    this.viewportY = y;
    this.viewportW = w;
    this.viewportH = h;
  }
  attachRenderTargetID(attachmentSlot, renderTargetID, view = null) {
    assert2(this.attachmentRenderTargetID[attachmentSlot] === void 0 && this.attachmentTexture[attachmentSlot] === void 0);
    this.attachmentRenderTargetID[attachmentSlot] = renderTargetID;
    this.attachmentView[attachmentSlot] = view !== null ? view : { level: 0, z: 0 };
  }
  attachTexture(attachmentSlot, texture, view = null, clearDescriptor = noopClearDescriptor) {
    assert2(this.attachmentRenderTargetID[attachmentSlot] === void 0 && this.attachmentTexture[attachmentSlot] === void 0);
    this.attachmentTexture[attachmentSlot] = texture;
    this.attachmentClearDescriptor[attachmentSlot] = clearDescriptor;
    this.attachmentView[attachmentSlot] = view !== null ? view : { level: 0, z: 0 };
  }
  attachResolveTexture(resolveTextureID) {
    this.resolveTextureInputIDs.push(resolveTextureID);
  }
  attachOcclusionQueryPool(queryPool) {
    this.descriptor.occlusionQueryPool = queryPool;
  }
  exec(func) {
    assert2(this.execFunc === null);
    this.execFunc = func;
  }
  post(func) {
    assert2(this.postFunc === null);
    this.postFunc = func;
  }
  addExtraRef(slot) {
    this.renderTargetExtraRefs[slot] = true;
  }
};
var GraphImpl = class {
  [Symbol.species];
  // Used for determining scheduling.
  renderTargetDescriptions = [];
  resolveTextureRenderTargetIDs = [];
  passes = [];
  // Debugging.
  renderTargetDebugNames = [];
  debugThumbnails = [];
};
var RenderTarget = class {
  debugName = "";
  dimension = 0 /* n2D */;
  depthOrArrayLayers = 1;
  pixelFormat;
  width = 0;
  height = 0;
  numLevels = 1;
  sampleCount = 0;
  usage = 2 /* RenderTarget */;
  needsClear = true;
  texture = null;
  renderTarget;
  age = 0;
  constructor(device, desc) {
    this.pixelFormat = desc.pixelFormat;
    this.width = desc.width;
    this.height = desc.height;
    this.numLevels = desc.numLevels;
    this.sampleCount = desc.sampleCount;
    assert2(this.sampleCount >= 1);
    if (this.sampleCount > 1) {
      this.renderTarget = device.createRenderTarget(this);
    } else {
      this.texture = device.createTexture(this);
      this.renderTarget = device.createRenderTargetFromTexture(this.texture);
    }
  }
  setDebugName(device, debugName) {
    this.debugName = debugName;
    if (this.texture !== null)
      device.setResourceName(this.texture, this.debugName);
    device.setResourceName(this.renderTarget, this.debugName);
  }
  matchesDescription(desc) {
    return this.pixelFormat === desc.pixelFormat && this.width === desc.width && this.height === desc.height && this.numLevels === desc.numLevels && this.sampleCount === desc.sampleCount;
  }
  reset() {
    this.age = 0;
  }
  destroy(device) {
    if (this.texture !== null)
      device.destroyTexture(this.texture);
    device.destroyRenderTarget(this.renderTarget);
  }
};
var SingleSampledTexture = class {
  dimension = 0 /* n2D */;
  depthOrArrayLayers = 1;
  numLevels = 1;
  usage = 2 /* RenderTarget */;
  pixelFormat;
  width = 0;
  height = 0;
  texture;
  age = 0;
  constructor(device, desc) {
    this.pixelFormat = desc.pixelFormat;
    this.width = desc.width;
    this.height = desc.height;
    this.texture = device.createTexture(this);
  }
  matchesDescription(desc) {
    return this.pixelFormat === desc.pixelFormat && this.width === desc.width && this.height === desc.height;
  }
  reset() {
    this.age = 0;
  }
  destroy(device) {
    device.destroyTexture(this.texture);
  }
};
function fillArray(L, n, v) {
  L.length = n;
  L.fill(v);
}
var GfxrDebugThumbnailDesc = class {
  constructor(renderTargetID, pass, attachmentSlot, debugLabel) {
    this.renderTargetID = renderTargetID;
    this.pass = pass;
    this.attachmentSlot = attachmentSlot;
    this.debugLabel = debugLabel;
  }
};
var GfxrRenderGraphImpl = class {
  constructor(device) {
    this.device = device;
  }
  currentPass = null;
  //#region GfxrRenderGraph
  newGraphBuilder() {
    this.beginGraphBuilder();
    return this;
  }
  execute(builder) {
    assert2(builder === this);
    const graph = assertExists2(this.currentGraph);
    this.execGraph(graph);
    this.currentGraph = null;
  }
  destroy() {
    for (let i = 0; i < this.renderTargetAliveForID.length; i++)
      assert2(this.renderTargetAliveForID[i] === void 0);
    for (let i = 0; i < this.singleSampledTextureForResolveTextureID.length; i++)
      assert2(this.singleSampledTextureForResolveTextureID[i] === void 0);
    for (let i = 0; i < this.renderTargetDeadPool.length; i++)
      this.renderTargetDeadPool[i].destroy(this.device);
    for (let i = 0; i < this.singleSampledTextureDeadPool.length; i++)
      this.singleSampledTextureDeadPool[i].destroy(this.device);
  }
  //#endregion
  //#region GfxrGraphBuilder
  currentGraph = null;
  debugGroups = [];
  beginGraphBuilder() {
    assert2(this.currentGraph === null);
    this.currentGraph = new GraphImpl();
  }
  pushPass(setupFunc) {
    const pass = new PassImpl("render");
    pass.debugGroups = this.debugGroups.slice();
    setupFunc(pass);
    this.currentGraph.passes.push(pass);
  }
  pushComputePass(setupFunc) {
    const pass = new PassImpl("compute");
    pass.debugGroups = this.debugGroups.slice();
    setupFunc(pass);
    this.currentGraph.passes.push(pass);
  }
  createRenderTargetID(desc, debugName) {
    this.currentGraph.renderTargetDebugNames.push(debugName);
    return this.currentGraph.renderTargetDescriptions.push(desc) - 1;
  }
  createResolveTextureID(renderTargetID) {
    return this.currentGraph.resolveTextureRenderTargetIDs.push(renderTargetID) - 1;
  }
  findMostRecentPassThatAttachedRenderTarget(renderTargetID) {
    for (let i = this.currentGraph.passes.length - 1; i >= 0; i--) {
      const pass = this.currentGraph.passes[i];
      if (pass.attachmentRenderTargetID.includes(renderTargetID))
        return pass;
    }
    return null;
  }
  findPassForResolveRenderTarget(renderTargetID) {
    const renderPass = assertExists2(this.findMostRecentPassThatAttachedRenderTarget(renderTargetID));
    const attachmentSlot = renderPass.attachmentRenderTargetID.indexOf(renderTargetID);
    assert2(renderPass.resolveOutputExternalTexture[attachmentSlot] === void 0);
    return renderPass;
  }
  resolveRenderTargetPassAttachmentSlot(pass, attachmentSlot) {
    const renderPass = pass;
    if (renderPass.resolveOutputIDs[attachmentSlot] === void 0) {
      const renderTargetID = renderPass.attachmentRenderTargetID[attachmentSlot];
      const resolveTextureID = this.createResolveTextureID(renderTargetID);
      renderPass.resolveOutputIDs[attachmentSlot] = resolveTextureID;
    }
    return renderPass.resolveOutputIDs[attachmentSlot];
  }
  resolveRenderTarget(renderTargetID) {
    const renderPass = this.findPassForResolveRenderTarget(renderTargetID);
    const attachmentSlot = renderPass.attachmentRenderTargetID.indexOf(renderTargetID);
    return this.resolveRenderTargetPassAttachmentSlot(renderPass, attachmentSlot);
  }
  resolveRenderTargetToExternalTexture(renderTargetID, texture, view = null) {
    const renderPass = this.findPassForResolveRenderTarget(renderTargetID);
    const attachmentSlot = renderPass.attachmentRenderTargetID.indexOf(renderTargetID);
    assert2(renderPass.resolveOutputIDs[attachmentSlot] === void 0);
    renderPass.resolveOutputExternalTexture[attachmentSlot] = texture;
    renderPass.resolveOutputExternalTextureView[attachmentSlot] = view !== null ? view : { level: 0, z: 0 };
  }
  getRenderTargetDescription(renderTargetID) {
    return assertExists2(this.currentGraph.renderTargetDescriptions[renderTargetID]);
  }
  pushDebugThumbnail(renderTargetID, debugLabel) {
    const renderPass = this.findPassForResolveRenderTarget(renderTargetID);
    const attachmentSlot = renderPass.attachmentRenderTargetID.indexOf(renderTargetID);
    if (debugLabel === void 0) {
      const renderTargetDebugName = this.currentGraph.renderTargetDebugNames[renderTargetID];
      const debugGroups = renderPass.debugGroups.length !== 0 ? renderPass.debugGroups.join("\n") + "\n" : "";
      debugLabel = `${debugGroups}${renderTargetDebugName}`;
    }
    this.currentGraph.debugThumbnails.push(new GfxrDebugThumbnailDesc(renderTargetID, renderPass, attachmentSlot, debugLabel));
  }
  pushDebugGroup(name) {
    this.debugGroups.push(name);
  }
  popDebugGroup() {
    this.debugGroups.pop();
  }
  getDebug() {
    return this;
  }
  //#endregion
  //#region GfxrGraphBuilderDebug
  getDebugThumbnails() {
    return this.currentGraph.debugThumbnails;
  }
  //#endregion
  //#region GfxrPassScope
  getResolveTextureForID(resolveTextureID) {
    const currentGraphPass = this.currentPass;
    const i = currentGraphPass.resolveTextureInputIDs.indexOf(resolveTextureID);
    assert2(i >= 0);
    return assertExists2(currentGraphPass.resolveTextureInputTextures[i]);
  }
  getRenderTargetTexture(slot) {
    const currentGraphPass = this.currentPass;
    const renderTarget = currentGraphPass.renderTargets[slot];
    if (!renderTarget)
      return null;
    return renderTarget.texture;
  }
  //#endregion
  //#region Resource Creation & Caching
  renderTargetDeadPool = [];
  singleSampledTextureDeadPool = [];
  acquireRenderTargetForDescription(desc) {
    for (let i = 0; i < this.renderTargetDeadPool.length; i++) {
      const freeRenderTarget = this.renderTargetDeadPool[i];
      if (freeRenderTarget.matchesDescription(desc)) {
        freeRenderTarget.reset();
        this.renderTargetDeadPool.splice(i--, 1);
        return freeRenderTarget;
      }
    }
    return new RenderTarget(this.device, desc);
  }
  acquireSingleSampledTextureForDescription(desc) {
    for (let i = 0; i < this.singleSampledTextureDeadPool.length; i++) {
      const freeSingleSampledTexture = this.singleSampledTextureDeadPool[i];
      if (freeSingleSampledTexture.matchesDescription(desc)) {
        freeSingleSampledTexture.reset();
        this.singleSampledTextureDeadPool.splice(i--, 1);
        return freeSingleSampledTexture;
      }
    }
    return new SingleSampledTexture(this.device, desc);
  }
  //#endregion
  //#region Scheduling
  renderTargetOutputCount = [];
  renderTargetResolveCount = [];
  resolveTextureUseCount = [];
  renderTargetAliveForID = [];
  singleSampledTextureForResolveTextureID = [];
  scheduleAddUseCount(graph, pass) {
    for (let slot = 0; slot < pass.attachmentRenderTargetID.length; slot++) {
      const renderTargetID = pass.attachmentRenderTargetID[slot];
      if (renderTargetID === void 0)
        continue;
      this.renderTargetOutputCount[renderTargetID]++;
      if (pass.renderTargetExtraRefs[slot])
        this.renderTargetOutputCount[renderTargetID]++;
    }
    for (let i = 0; i < pass.resolveTextureInputIDs.length; i++) {
      const resolveTextureID = pass.resolveTextureInputIDs[i];
      if (resolveTextureID === void 0)
        continue;
      this.resolveTextureUseCount[resolveTextureID]++;
      const renderTargetID = graph.resolveTextureRenderTargetIDs[resolveTextureID];
      this.renderTargetResolveCount[renderTargetID]++;
    }
  }
  acquireRenderTargetForID(graph, renderTargetID) {
    assert2(this.renderTargetOutputCount[renderTargetID] > 0);
    if (!this.renderTargetAliveForID[renderTargetID]) {
      const desc = graph.renderTargetDescriptions[renderTargetID];
      const newRenderTarget = this.acquireRenderTargetForDescription(desc);
      newRenderTarget.setDebugName(this.device, graph.renderTargetDebugNames[renderTargetID]);
      this.renderTargetAliveForID[renderTargetID] = newRenderTarget;
    }
    return this.renderTargetAliveForID[renderTargetID];
  }
  externalTextureRenderTargetPool = [];
  acquireRenderTargetForTexture(graph, texture) {
    const p = this.device.createRenderTargetFromTexture(texture);
    this.externalTextureRenderTargetPool.push(p);
    return p;
  }
  releaseRenderTargetForID(renderTargetID, forOutput) {
    if (renderTargetID === void 0)
      return null;
    const renderTarget = assertExists2(this.renderTargetAliveForID[renderTargetID]);
    if (forOutput) {
      assert2(this.renderTargetOutputCount[renderTargetID] > 0);
      this.renderTargetOutputCount[renderTargetID]--;
    } else {
      assert2(this.renderTargetResolveCount[renderTargetID] > 0);
      this.renderTargetResolveCount[renderTargetID]--;
    }
    if (this.renderTargetOutputCount[renderTargetID] === 0 && this.renderTargetResolveCount[renderTargetID] === 0) {
      renderTarget.needsClear = true;
      delete this.renderTargetAliveForID[renderTargetID];
      this.renderTargetDeadPool.push(renderTarget);
    }
    return renderTarget;
  }
  acquireResolveTextureInputTextureForID(graph, resolveTextureID) {
    const renderTargetID = graph.resolveTextureRenderTargetIDs[resolveTextureID];
    assert2(this.resolveTextureUseCount[resolveTextureID] > 0);
    this.resolveTextureUseCount[resolveTextureID]--;
    const renderTarget = assertExists2(this.releaseRenderTargetForID(renderTargetID, false));
    if (this.singleSampledTextureForResolveTextureID[resolveTextureID] !== void 0) {
      const singleSampledTexture = this.singleSampledTextureForResolveTextureID[resolveTextureID];
      if (this.resolveTextureUseCount[resolveTextureID] === 0) {
        this.singleSampledTextureDeadPool.push(singleSampledTexture);
      }
      return singleSampledTexture.texture;
    } else {
      return assertExists2(renderTarget.texture);
    }
  }
  determineResolveParam(graph, pass, slot) {
    const renderTargetID = pass.attachmentRenderTargetID[slot];
    assert2(renderTargetID !== void 0);
    const resolveTextureOutputID = pass.resolveOutputIDs[slot];
    const externalTexture = pass.resolveOutputExternalTexture[slot];
    const hasResolveTextureOutputID = resolveTextureOutputID !== void 0;
    const hasExternalTexture = externalTexture !== void 0;
    assert2(!(hasResolveTextureOutputID && hasExternalTexture));
    let resolveTo = null;
    let store = false;
    let resolveView = null;
    if (this.renderTargetOutputCount[renderTargetID] > 1) {
      store = true;
    }
    if (hasResolveTextureOutputID) {
      assert2(graph.resolveTextureRenderTargetIDs[resolveTextureOutputID] === renderTargetID);
      assert2(this.resolveTextureUseCount[resolveTextureOutputID] > 0);
      assert2(this.renderTargetOutputCount[renderTargetID] > 0);
      const renderTarget = assertExists2(this.renderTargetAliveForID[renderTargetID]);
      if (renderTarget.texture !== null && this.renderTargetOutputCount[renderTargetID] === 1) {
        resolveTo = null;
        store = true;
      } else {
        if (!this.singleSampledTextureForResolveTextureID[resolveTextureOutputID]) {
          const desc = assertExists2(graph.renderTargetDescriptions[renderTargetID]);
          this.singleSampledTextureForResolveTextureID[resolveTextureOutputID] = this.acquireSingleSampledTextureForDescription(desc);
          this.device.setResourceName(this.singleSampledTextureForResolveTextureID[resolveTextureOutputID].texture, renderTarget.debugName + ` (Resolve ${resolveTextureOutputID})`);
        }
        resolveTo = this.singleSampledTextureForResolveTextureID[resolveTextureOutputID].texture;
        resolveView = { level: 0, z: 0 };
      }
    } else if (hasExternalTexture) {
      resolveTo = externalTexture;
      resolveView = pass.resolveOutputExternalTextureView[slot];
    } else {
      resolveTo = null;
    }
    return { resolveTo, resolveView, store };
  }
  determinePassAttachment(graph, pass, slot) {
    const renderTargetID = pass.attachmentRenderTargetID[slot];
    const texture = pass.attachmentTexture[slot];
    const view = pass.attachmentView[slot];
    if (renderTargetID !== void 0) {
      const graphRenderTarget = this.acquireRenderTargetForID(graph, renderTargetID);
      const width = graphRenderTarget.width, height = graphRenderTarget.height, sampleCount = graphRenderTarget.sampleCount;
      const { resolveTo, resolveView, store } = this.determineResolveParam(graph, pass, slot);
      const renderTarget = graphRenderTarget.renderTarget;
      const clearColor = graphRenderTarget.needsClear ? graph.renderTargetDescriptions[renderTargetID].clearColor : "load";
      const clearDepth = graphRenderTarget.needsClear ? graph.renderTargetDescriptions[renderTargetID].clearDepth : "load";
      const clearStencil = graphRenderTarget.needsClear ? graph.renderTargetDescriptions[renderTargetID].clearStencil : "load";
      return { graphRenderTarget, renderTarget, view, clearColor, clearDepth, clearStencil, resolveTo, resolveView, store, width, height, sampleCount };
    } else if (texture !== void 0) {
      const graphRenderTarget = null;
      const width = texture.width, height = texture.height, sampleCount = 1;
      const resolveTo = null;
      const resolveView = null;
      const store = true;
      const renderTarget = this.acquireRenderTargetForTexture(graph, texture);
      const clearDescriptor = pass.attachmentClearDescriptor[slot];
      const clearColor = clearDescriptor.clearColor;
      const clearDepth = clearDescriptor.clearDepth;
      const clearStencil = clearDescriptor.clearStencil;
      return { graphRenderTarget, renderTarget, view, clearColor, clearDepth, clearStencil, resolveTo, resolveView, store, width, height, sampleCount };
    } else {
      return null;
    }
  }
  schedulePass(graph, pass) {
    let rtWidth = 0, rtHeight = 0, rtSampleCount = 0;
    for (let slot = 0 /* Color0 */; slot <= 4 /* DepthStencil */; slot++) {
      const attachment = this.determinePassAttachment(graph, pass, slot);
      if (attachment === null) {
        pass.renderTargets[slot] = null;
        if (slot === 4 /* DepthStencil */)
          pass.descriptor.depthStencilAttachment = null;
        else
          pass.descriptor.colorAttachments[slot] = null;
      } else {
        const level = attachment.view.level;
        const width = attachment.width >>> level;
        const height = attachment.height >>> level;
        if (rtWidth === 0) {
          rtWidth = width;
          rtHeight = height;
          rtSampleCount = attachment.sampleCount;
        }
        assert2(width === rtWidth);
        assert2(height === rtHeight);
        assert2(attachment.sampleCount === rtSampleCount);
        if (attachment.graphRenderTarget !== null)
          attachment.graphRenderTarget.needsClear = false;
        pass.renderTargets[slot] = attachment.graphRenderTarget;
        if (slot === 4 /* DepthStencil */)
          pass.descriptor.depthStencilAttachment = attachment;
        else
          pass.descriptor.colorAttachments[slot] = attachment;
      }
    }
    if (rtWidth > 0 && rtHeight > 0) {
      const x = rtWidth * pass.viewportX;
      const y = rtHeight * pass.viewportY;
      const w = rtWidth * pass.viewportW;
      const h = rtHeight * pass.viewportH;
      pass.viewportX = x;
      pass.viewportY = y;
      pass.viewportW = w;
      pass.viewportH = h;
    }
    for (let i = 0; i < pass.resolveTextureInputIDs.length; i++) {
      const resolveTextureID = pass.resolveTextureInputIDs[i];
      pass.resolveTextureInputTextures[i] = this.acquireResolveTextureInputTextureForID(graph, resolveTextureID);
    }
    for (let i = 0; i < pass.attachmentRenderTargetID.length; i++)
      this.releaseRenderTargetForID(pass.attachmentRenderTargetID[i], true);
    for (let slot = 0; slot < pass.renderTargetExtraRefs.length; slot++)
      if (pass.renderTargetExtraRefs[slot])
        this.releaseRenderTargetForID(pass.attachmentRenderTargetID[slot], true);
  }
  scheduleGraph(graph) {
    assert2(this.renderTargetOutputCount.length === 0);
    assert2(this.renderTargetResolveCount.length === 0);
    assert2(this.resolveTextureUseCount.length === 0);
    assert2(this.debugGroups.length === 0);
    for (let i = 0; i < this.renderTargetDeadPool.length; i++)
      this.renderTargetDeadPool[i].age++;
    for (let i = 0; i < this.singleSampledTextureDeadPool.length; i++)
      this.singleSampledTextureDeadPool[i].age++;
    fillArray(this.renderTargetOutputCount, graph.renderTargetDescriptions.length, 0);
    fillArray(this.renderTargetResolveCount, graph.renderTargetDescriptions.length, 0);
    fillArray(this.resolveTextureUseCount, graph.resolveTextureRenderTargetIDs.length, 0);
    for (let i = 0; i < graph.passes.length; i++)
      this.scheduleAddUseCount(graph, graph.passes[i]);
    for (let i = 0; i < graph.passes.length; i++)
      this.schedulePass(graph, graph.passes[i]);
    for (let i = 0; i < this.renderTargetOutputCount.length; i++)
      assert2(this.renderTargetOutputCount[i] === 0);
    for (let i = 0; i < this.renderTargetResolveCount.length; i++)
      assert2(this.renderTargetResolveCount[i] === 0);
    for (let i = 0; i < this.resolveTextureUseCount.length; i++)
      assert2(this.resolveTextureUseCount[i] === 0);
    for (let i = 0; i < this.renderTargetAliveForID.length; i++)
      assert2(this.renderTargetAliveForID[i] === void 0);
    const ageThreshold = 1;
    for (let i = 0; i < this.renderTargetDeadPool.length; i++) {
      if (this.renderTargetDeadPool[i].age >= ageThreshold) {
        this.renderTargetDeadPool[i].destroy(this.device);
        this.renderTargetDeadPool.splice(i--, 1);
      }
    }
    for (let i = 0; i < this.singleSampledTextureDeadPool.length; i++) {
      if (this.singleSampledTextureDeadPool[i].age >= ageThreshold) {
        this.singleSampledTextureDeadPool[i].destroy(this.device);
        this.singleSampledTextureDeadPool.splice(i--, 1);
      }
    }
    for (let i = 0; i < this.externalTextureRenderTargetPool.length; i++)
      this.device.destroyRenderTarget(this.externalTextureRenderTargetPool[i]);
    this.externalTextureRenderTargetPool.length = 0;
    this.renderTargetResolveCount.length = 0;
    this.renderTargetOutputCount.length = 0;
    this.resolveTextureUseCount.length = 0;
  }
  //#endregion
  //#region Execution
  currentDebugGroups = [];
  adjustDebugGroups(debugCommands, debugGroups) {
    for (let i = this.currentDebugGroups.length - 1; i >= 0; i--) {
      if (this.currentDebugGroups[i] !== debugGroups[i]) {
        for (let j = i; j < this.currentDebugGroups.length; j++) {
          debugCommands.popDebugGroup();
          this.currentDebugGroups.pop();
        }
      }
    }
    for (let i = this.currentDebugGroups.length; i < debugGroups.length; i++) {
      debugCommands.pushDebugGroup(debugGroups[i]);
      this.currentDebugGroups.push(debugGroups[i]);
    }
  }
  execRenderPass(pass) {
    this.adjustDebugGroups(this.device, pass.debugGroups);
    const renderPass = this.device.createRenderPass(pass.descriptor);
    renderPass.setViewport(pass.viewportX, pass.viewportY, pass.viewportW, pass.viewportH);
    if (pass.execFunc !== null)
      pass.execFunc(renderPass, this);
    this.device.submitPass(renderPass);
    if (pass.postFunc !== null)
      pass.postFunc(this);
  }
  execComputePass(pass) {
    this.adjustDebugGroups(this.device, pass.debugGroups);
    const computePass = this.device.createComputePass();
    if (pass.execFunc !== null)
      pass.execFunc(computePass, this);
    this.device.submitPass(computePass);
    if (pass.postFunc !== null)
      pass.postFunc(this);
  }
  execPass(pass) {
    assert2(this.currentPass === null);
    this.currentPass = pass;
    if (pass.passType === "render")
      this.execRenderPass(pass);
    else if (pass.passType === "compute")
      this.execComputePass(pass);
    this.currentPass = null;
  }
  execGraph(graph) {
    this.scheduleGraph(graph);
    for (let i = 0; i < graph.passes.length; i++)
      this.execPass(graph.passes[i]);
    this.adjustDebugGroups(this.device, []);
    this.singleSampledTextureForResolveTextureID.length = 0;
  }
  //#endregion
};

// src/noclip/gfx/passes/FXAA.ts
function createProgram(cache2) {
  const vert = GfxShaderLibrary.fullscreenVS;
  const frag = `
uniform sampler2D u_Texture;
in vec2 v_TexCoord;

${GfxShaderLibrary.MonochromeNTSC}

vec4 FXAA(PD_SAMPLER_2D(t_Texture), in vec2 t_PixelCenter, in vec2 t_InvResolution) {
    // FXAA v2, based on implementations:
    // http://www.geeks3d.com/20110405/fxaa-fast-approximate-anti-aliasing-demo-glsl-opengl-test-radeon-geforce/
    // https://github.com/mitsuhiko/webgl-meincraft

    float lumaMM = MonochromeNTSC(texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy).rgb);

#if 1
    vec2 t_PixelTopLeft = t_PixelCenter.xy - t_InvResolution.xy * 0.5;
    float lumaNW = MonochromeNTSC(texture      (PU_SAMPLER_2D(t_Texture), t_PixelTopLeft.xy)             .rgb);
    float lumaNE = MonochromeNTSC(textureOffset(PU_SAMPLER_2D(t_Texture), t_PixelTopLeft.xy, ivec2(1, 0)).rgb);
    float lumaSW = MonochromeNTSC(textureOffset(PU_SAMPLER_2D(t_Texture), t_PixelTopLeft.xy, ivec2(0, 1)).rgb);
    float lumaSE = MonochromeNTSC(textureOffset(PU_SAMPLER_2D(t_Texture), t_PixelTopLeft.xy, ivec2(1, 1)).rgb);
#else
    // We're at the pixel center -- pixel edges are 0.5 units away.
    // NOTE(jstpierre): mitsuhiko's port seems to get this wrong?
    vec2 t_PixelSize = t_InvResolution.xy * 0.5;

    float lumaNW = MonochromeNTSC(texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy + t_PixelSize * vec2(-1.0, -1.0)).rgb);
    float lumaNE = MonochromeNTSC(texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy + t_PixelSize * vec2( 1.0, -1.0)).rgb);
    float lumaSW = MonochromeNTSC(texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy + t_PixelSize * vec2(-1.0,  1.0)).rgb);
    float lumaSE = MonochromeNTSC(texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy + t_PixelSize * vec2( 1.0,  1.0)).rgb);
#endif

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    const float FXAA_REDUCE_MIN = 1.0/128.0;
    const float FXAA_REDUCE_MUL = 1.0/8.0;
    const float FXAA_SPAN_MAX = 8.0;

    float dirReduce = max(
        (lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL),
        FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0/(min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX), max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) * t_InvResolution.xy;

    float lumaMin = min(lumaMM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaMM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec4 rgbA = (1.0/2.0) * (
        texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy + dir * (1.0/3.0 - 0.5)) +
        texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy + dir * (2.0/3.0 - 0.5)));
    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (
        texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy + dir * (0.0/3.0 - 0.5)) +
        texture(PU_SAMPLER_2D(t_Texture), t_PixelCenter.xy + dir * (3.0/3.0 - 0.5)));
    float lumaB = MonochromeNTSC(rgbB.rgb);

    vec4 rgbOutput = ((lumaB < lumaMin) || (lumaB > lumaMax)) ? rgbA : rgbB;
    return rgbOutput;
}

void main() {
    vec2 t_InvResolution = 1.0 / vec2(textureSize(TEXTURE(u_Texture), 0));
    gl_FragColor.rgba = FXAA(PP_SAMPLER_2D(u_Texture), v_TexCoord.xy, t_InvResolution);
}
`;
  const program = preprocessProgram_GLSL(cache2.device.queryVendorInfo(), vert, frag);
  return cache2.createProgramSimple(program);
}
var FXAA = class {
  gfxProgram;
  gfxSampler;
  constructor(renderCache) {
    this.gfxProgram = createProgram(renderCache);
    this.gfxSampler = renderCache.createSampler({
      wrapS: 1 /* Repeat */,
      wrapT: 1 /* Repeat */,
      minFilter: 0 /* Point */,
      magFilter: 0 /* Point */,
      mipFilter: 0 /* Nearest */
    });
  }
  pushPasses(builder, renderHelper, mainColorTargetID) {
    builder.pushPass((pass) => {
      pass.setDebugName("FXAA");
      pass.attachRenderTargetID(0 /* Color0 */, mainColorTargetID);
      const mainColorResolveTextureID = builder.resolveRenderTarget(mainColorTargetID);
      pass.attachResolveTexture(mainColorResolveTextureID);
      const renderInst = renderHelper.renderInstManager.newRenderInst();
      renderInst.setUniformBuffer(renderHelper.uniformBuffer);
      renderInst.setAllowSkippingIfPipelineNotReady(false);
      renderInst.setMegaStateFlags(fullscreenMegaState);
      renderInst.setBindingLayouts([{ numUniformBuffers: 0, numSamplers: 1 }]);
      renderInst.setDrawCount(3);
      renderInst.setGfxProgram(this.gfxProgram);
      pass.exec((passRenderer, scope) => {
        renderInst.setSamplerBindingsFromTextureMappings([
          { gfxTexture: scope.getResolveTextureForID(mainColorResolveTextureID), gfxSampler: this.gfxSampler, lateBinding: null }
        ]);
        renderInst.drawOnPass(renderHelper.renderCache, passRenderer);
      });
    });
  }
};

// src/noclip/gfx/helpers/RenderGraphHelpers.ts
function makeAttachmentClearDescriptor(clearColor) {
  return {
    clearColor,
    clearDepth: reverseDepthForClearValue(1),
    clearStencil: 0
  };
}
var standardFullClearRenderPassDescriptor = makeAttachmentClearDescriptor(colorNewFromRGBA(0.88, 0.88, 0.88, 1));
var opaqueBlackFullClearRenderPassDescriptor = makeAttachmentClearDescriptor(OpaqueBlack);
function selectFormatSimple(slot) {
  if (slot === 0 /* Color0 */)
    return GfxFormat.U8_RGBA_RT;
  else if (slot === 4 /* DepthStencil */)
    return GfxFormat.D24;
  else
    throw "whoops";
}
function selectSampleCount(renderInput) {
  if (renderInput.antialiasingMode === 2 /* MSAAx4 */)
    return 4;
  else
    return 1;
}
function setBackbufferDescSimple(desc, renderInput) {
  const sampleCount = selectSampleCount(renderInput);
  desc.setDimensions(renderInput.backbufferWidth, renderInput.backbufferHeight, sampleCount);
}
function makeBackbufferDescSimple(slot, renderInput, clearDescriptor) {
  const pixelFormat = selectFormatSimple(slot);
  const desc = new GfxrRenderTargetDescription(pixelFormat);
  setBackbufferDescSimple(desc, renderInput);
  if (clearDescriptor !== null) {
    desc.clearColor = clearDescriptor.clearColor;
    desc.clearDepth = clearDescriptor.clearDepth;
    desc.clearStencil = clearDescriptor.clearStencil;
  }
  return desc;
}
var AntialiasingSupport = class {
  constructor(renderHelper) {
    this.renderHelper = renderHelper;
  }
  fxaa = null;
  pushPasses(builder, renderInput, mainColorTargetID) {
    if (renderInput.antialiasingMode === 1 /* FXAA */) {
      if (this.fxaa === null)
        this.fxaa = new FXAA(this.renderHelper.renderCache);
      this.fxaa.pushPasses(builder, this.renderHelper, mainColorTargetID);
    }
  }
};

// src/noclip/gfx/render/GfxRenderInstManager.ts
var renderPassDescriptorFormatCache = /* @__PURE__ */ new WeakMap();
function setSortKeyProgramKey(sortKey, programKey) {
  const isTransparent = !!(sortKey >>> 31 & 1);
  if (isTransparent)
    return sortKey;
  else
    return (sortKey & 4278190335 | (programKey & 65535) << 8) >>> 0;
}
var GfxRenderInst = class {
  sortKey = 0;
  // Debugging pointer for whomever wants it...
  debug = null;
  debugMarker = null;
  // Pipeline building.
  _renderPipelineDescriptor;
  // Bindings building.
  _uniformBuffer;
  _bindingDescriptors = nArray(1, () => ({ bindingLayout: null, samplerBindings: [], uniformBufferBindings: [] }));
  _dynamicUniformBufferByteOffsets = nArray(4, () => 0);
  _dynamicUniformBufferByteOffsetsScratch = [];
  _allowSkippingPipelineIfNotReady = true;
  _vertexBuffers = null;
  _indexBuffer = null;
  _drawStart = 0;
  _drawCount = 0;
  _drawInstanceCount = 1;
  _stencilRef = null;
  _blendColor = null;
  constructor() {
    this._renderPipelineDescriptor = {
      bindingLayouts: [],
      inputLayout: null,
      megaStateDescriptor: copyMegaState(defaultMegaState),
      program: null,
      topology: 0 /* Triangles */,
      colorAttachmentFormats: [],
      depthStencilAttachmentFormat: null,
      sampleCount: 1
    };
  }
  reset() {
    this.sortKey = 0;
    this.debug = null;
    this.debugMarker = null;
    setMegaStateFlags(this._renderPipelineDescriptor.megaStateDescriptor, defaultMegaState);
    this._renderPipelineDescriptor.bindingLayouts.length = 0;
    this._renderPipelineDescriptor.inputLayout = null;
    this._renderPipelineDescriptor.program = null;
    this._renderPipelineDescriptor.topology = 0 /* Triangles */;
    this._renderPipelineDescriptor.colorAttachmentFormats.length = 0;
    this._renderPipelineDescriptor.depthStencilAttachmentFormat = null;
    this._renderPipelineDescriptor.sampleCount = 1;
    this._uniformBuffer = null;
    this._drawCount = 0;
    this._drawStart = 0;
    this._drawInstanceCount = 1;
    this._vertexBuffers = null;
    this._indexBuffer = null;
    this._allowSkippingPipelineIfNotReady = true;
    this._stencilRef = null;
    this._blendColor = null;
    for (let i = 0; i < this._bindingDescriptors.length; i++) {
      const bindingDescriptor = this._bindingDescriptors[i];
      bindingDescriptor.bindingLayout = null;
      for (let j = 0; j < bindingDescriptor.uniformBufferBindings.length; j++) {
        bindingDescriptor.uniformBufferBindings[j].buffer = null;
        bindingDescriptor.uniformBufferBindings[j].byteSize = 0;
      }
      for (let j = 0; j < bindingDescriptor.samplerBindings.length; j++) {
        bindingDescriptor.samplerBindings[j].gfxTexture = null;
        bindingDescriptor.samplerBindings[j].gfxSampler = null;
        bindingDescriptor.samplerBindings[j].lateBinding = null;
      }
    }
    for (let i = 0; i < this._dynamicUniformBufferByteOffsets.length; i++)
      this._dynamicUniformBufferByteOffsets[i] = 0;
  }
  /**
   * Copies the fields from another render inst {@param o} to this render inst.
   */
  copyFrom(o) {
    setMegaStateFlags(this._renderPipelineDescriptor.megaStateDescriptor, o._renderPipelineDescriptor.megaStateDescriptor);
    this._renderPipelineDescriptor.program = o._renderPipelineDescriptor.program;
    this._renderPipelineDescriptor.inputLayout = o._renderPipelineDescriptor.inputLayout;
    this._renderPipelineDescriptor.topology = o._renderPipelineDescriptor.topology;
    this._renderPipelineDescriptor.colorAttachmentFormats.length = Math.max(this._renderPipelineDescriptor.colorAttachmentFormats.length, o._renderPipelineDescriptor.colorAttachmentFormats.length);
    for (let i = 0; i < o._renderPipelineDescriptor.colorAttachmentFormats.length; i++)
      this._renderPipelineDescriptor.colorAttachmentFormats[i] = o._renderPipelineDescriptor.colorAttachmentFormats[i];
    this._renderPipelineDescriptor.depthStencilAttachmentFormat = o._renderPipelineDescriptor.depthStencilAttachmentFormat;
    this._renderPipelineDescriptor.sampleCount = o._renderPipelineDescriptor.sampleCount;
    this._uniformBuffer = o._uniformBuffer;
    this._drawCount = o._drawCount;
    this._drawStart = o._drawStart;
    this._drawInstanceCount = o._drawInstanceCount;
    this._vertexBuffers = o._vertexBuffers;
    this._indexBuffer = o._indexBuffer;
    this._allowSkippingPipelineIfNotReady = o._allowSkippingPipelineIfNotReady;
    this._stencilRef = o._stencilRef;
    this._blendColor = o._blendColor;
    this.sortKey = o.sortKey;
    for (let i = 0; i < o._bindingDescriptors.length; i++) {
      const tbd = this._bindingDescriptors[i], obd = o._bindingDescriptors[i];
      if (obd.bindingLayout !== null)
        this._setBindingLayout(i, obd.bindingLayout);
      for (let j = 0; j < Math.min(tbd.uniformBufferBindings.length, obd.uniformBufferBindings.length); j++)
        tbd.uniformBufferBindings[j].byteSize = obd.uniformBufferBindings[j].byteSize;
      this.setSamplerBindingsFromTextureMappings(obd.samplerBindings);
    }
    for (let i = 0; i < o._dynamicUniformBufferByteOffsets.length; i++)
      this._dynamicUniformBufferByteOffsets[i] = o._dynamicUniformBufferByteOffsets[i];
  }
  validate() {
    assert(this._drawCount > 0);
  }
  /**
   * Set the {@see GfxPrimitiveTopology} that this render inst will render with.
   */
  setPrimitiveTopology(topology) {
    this._renderPipelineDescriptor.topology = topology;
  }
  /**
   * Set the {@see GfxProgram} that this render inst will render with.
   */
  setGfxProgram(program) {
    this._renderPipelineDescriptor.program = program;
  }
  /**
   * Set the {@see GfxMegaStateDescriptor} that this render inst will render with.
   */
  setMegaStateFlags(r) {
    setMegaStateFlags(this._renderPipelineDescriptor.megaStateDescriptor, r);
    return this._renderPipelineDescriptor.megaStateDescriptor;
  }
  /**
   * Retrieve the {@see GfxMegaStateDescriptor} property bag that this will render with. This is similar to
   * {@see setMegaStateFlags} but allows you to set fields directly on the internal property bag, rather than
   * merge them. This can be slightly more efficient.
   */
  getMegaStateFlags() {
    return this._renderPipelineDescriptor.megaStateDescriptor;
  }
  /**
   * Sets the vertex input configuration to be used by this render instance.
   * The {@see GfxInputLayout} is used to construct the pipeline as part of the automatic pipeline building
   * facilities, while the {@see GfxVertexBufferDescriptor} and {@see GfxIndexBufferDescriptor} is used for the render.
   */
  setVertexInput(inputLayout, vertexBuffers, indexBuffer) {
    this._vertexBuffers = vertexBuffers;
    this._indexBuffer = indexBuffer;
    this._renderPipelineDescriptor.inputLayout = inputLayout;
  }
  _setBindingLayout(i, bindingLayout) {
    assert(bindingLayout.numUniformBuffers <= this._dynamicUniformBufferByteOffsets.length);
    this._renderPipelineDescriptor.bindingLayouts[i] = bindingLayout;
    const bindingDescriptor = this._bindingDescriptors[i];
    bindingDescriptor.bindingLayout = bindingLayout;
    for (let j = bindingDescriptor.uniformBufferBindings.length; j < bindingLayout.numUniformBuffers; j++)
      bindingDescriptor.uniformBufferBindings.push({ buffer: null, byteSize: 0 });
    for (let j = bindingDescriptor.samplerBindings.length; j < bindingLayout.numSamplers; j++)
      bindingDescriptor.samplerBindings.push({ gfxSampler: null, gfxTexture: null, lateBinding: null });
  }
  /**
   * Sets the {@see GfxBindingLayoutDescriptor}s that this render inst will render with.
   */
  setBindingLayouts(bindingLayouts) {
    assert(bindingLayouts.length <= this._bindingDescriptors.length);
    for (let i = 0; i < this._bindingDescriptors.length; i++)
      this._setBindingLayout(i, bindingLayouts[i]);
  }
  /**
   * Sets the draw count parameters for this render inst. Whether this is an indexed or an unindexed draw is
   * determined by whether an index buffer is bound in the input layout. If this is an indexed draw, then
   * the counts are index counts. If this is an unindexed draw, then this is a vertex count.
   *
   * @param count The index count, or vertex count.
   * @param start The first index, or first vertex to render with.
   */
  setDrawCount(count, start = 0) {
    this._drawCount = count;
    this._drawStart = start;
  }
  getDrawCount() {
    return this._drawCount;
  }
  /**
   * Sets the number of instances to draw.
   *
   * Instance counts are the same for both indexed and unindexed draws, however instanced draws are (currently)
   * only supported for indexed draws.
   *
   * @param instanceCount The number of instances to render.
   */
  setInstanceCount(instanceCount) {
    this._drawInstanceCount = instanceCount;
  }
  setUniformBuffer(uniformBuffer) {
    this._uniformBuffer = uniformBuffer;
  }
  /**
   * Allocates {@param wordCount} words from the uniform buffer and assigns it to the buffer
   * slot at index {@param bufferIndex}, and returns the index into the buffer.
   */
  allocateUniformBuffer(bufferIndex, wordCount) {
    assert(this._bindingDescriptors[0].bindingLayout.numUniformBuffers <= this._dynamicUniformBufferByteOffsets.length);
    assert(bufferIndex < this._bindingDescriptors[0].bindingLayout.numUniformBuffers);
    const wordOffset = this._uniformBuffer.allocateChunk(wordCount);
    this._dynamicUniformBufferByteOffsets[bufferIndex] = wordOffset << 2;
    const dst = this._bindingDescriptors[0].uniformBufferBindings[bufferIndex];
    dst.byteSize = wordCount << 2;
    return wordOffset;
  }
  /**
   * This is a convenience wrapper for {@param allocateUniformBuffer} and {@param mapUniformBufferF32}
   * that returns a pre-sliced {@see Float32Array} for the given offset.
   */
  allocateUniformBufferF32(bufferIndex, wordCount) {
    const wordOffset = this.allocateUniformBuffer(bufferIndex, wordCount);
    return this._uniformBuffer.mapBufferF32().subarray(wordOffset);
  }
  /**
   * Directly sets the uniform buffer assigned to the buffer slot at index {@param bufferIndex}
   * to be {@param wordOffset}. Use this if you have already allocated a uniform buffer chunk through
   * some other means and wish to directly assign it to this render inst.
   */
  setUniformBufferOffset(bufferIndex, wordOffset, wordCount) {
    this._dynamicUniformBufferByteOffsets[bufferIndex] = wordOffset << 2;
    const dst = this._bindingDescriptors[0].uniformBufferBindings[bufferIndex];
    dst.byteSize = wordCount << 2;
  }
  /**
   * This is a convenience wrapper for {@see GfxRenderDynamicUniformBuffer.mapBufferF32}, but uses
   * the values previously assigned for the uniform buffer slot at index {@param bufferIndex}.
   * Like {@see GfxRenderDynamicUniformBuffer.mapBufferF32}, this does not return a slice for the
   * buffer; you need to write to it with the correct uniform buffer offset; this will usually be
   * returned by {@see allocateUniformBuffer}.
   */
  mapUniformBufferF32(bufferIndex) {
    return this._uniformBuffer.mapBufferF32();
  }
  /**
   * Retrieve the {@see GfxRenderDynamicUniformBuffer} that this render inst will use to allocate.
   */
  getUniformBuffer() {
    return this._uniformBuffer;
  }
  setSamplerBindings(bindingIndex, m) {
    const bindingDescriptor = this._bindingDescriptors[bindingIndex];
    for (let i = 0; i < bindingDescriptor.samplerBindings.length; i++) {
      const dst = bindingDescriptor.samplerBindings[i];
      const binding = m[i];
      if (binding === void 0 || binding === null) {
        dst.gfxTexture = null;
        dst.gfxSampler = null;
        dst.lateBinding = null;
        continue;
      }
      dst.gfxTexture = binding.gfxTexture;
      dst.gfxSampler = binding.gfxSampler;
      dst.lateBinding = binding.lateBinding;
    }
  }
  /**
   * Sets the {@param GfxSamplerBinding}s in use by this render instance.
   *
   * Note that {@see GfxRenderInst} has a method of doing late binding, intended to solve cases where live render
   * targets are used, which can have difficult control flow consequences for users. Pass a string instead of a
   * GfxSamplerBinding to record that it can be resolved later, and use {@see GfxRenderInst.resolveLateSamplerBinding}
   * or equivalent to fill it in later.
   */
  setSamplerBindingsFromTextureMappings(m) {
    assert(this._bindingDescriptors.length === 1);
    this.setSamplerBindings(0, m);
  }
  hasLateSamplerBinding(name) {
    for (let i = 0; i < this._bindingDescriptors.length; i++) {
      const bindingDescriptor = this._bindingDescriptors[i];
      for (let j = 0; j < bindingDescriptor.samplerBindings.length; j++) {
        const dst = bindingDescriptor.samplerBindings[j];
        if (dst.lateBinding === name)
          return true;
      }
    }
    return false;
  }
  /**
   * Resolve a previously registered "late bound" sampler binding for the given {@param name} to the provided
   * {@param binding}, as registered through {@see setSamplerBindingsFromTextureMappings}.
   *
   * This is intended to be called by high-level code, and is especially helpful when juggling render targets
   * for framebuffer effects.
   */
  resolveLateSamplerBinding(name, binding) {
    for (let i = 0; i < this._bindingDescriptors.length; i++) {
      const bindingDescriptor = this._bindingDescriptors[i];
      for (let j = 0; j < bindingDescriptor.samplerBindings.length; j++) {
        const dst = bindingDescriptor.samplerBindings[j];
        if (dst.lateBinding === name) {
          if (binding === null) {
            dst.gfxTexture = null;
            dst.gfxSampler = null;
          } else {
            assert(binding.lateBinding === null);
            dst.gfxTexture = binding.gfxTexture;
            if (binding.gfxSampler !== null)
              dst.gfxSampler = binding.gfxSampler;
          }
          dst.lateBinding = null;
        }
      }
    }
  }
  /**
   * Sets whether this render inst should be skipped if the render pipeline isn't ready.
   *
   * Some draws of objects can be skipped if the pipelines aren't ready. Others are more
   * crucial to draw, and so this can be set to force for the pipeline to become available.
   *
   * By default, this is true.
   */
  setAllowSkippingIfPipelineNotReady(v) {
    this._allowSkippingPipelineIfNotReady = v;
  }
  setAttachmentFormatsFromRenderPass(device, passRenderer) {
    const passDescriptor = device.queryRenderPass(passRenderer);
    let cached = renderPassDescriptorFormatCache.get(passDescriptor);
    if (cached === void 0) {
      const colorAttachmentFormats = [];
      let sampleCount = -1;
      for (let i = 0; i < passDescriptor.colorAttachments.length; i++) {
        const colorAttachmentDescriptor = passDescriptor.colorAttachments[i] !== null ? device.queryRenderTarget(passDescriptor.colorAttachments[i].renderTarget) : null;
        colorAttachmentFormats[i] = colorAttachmentDescriptor !== null ? colorAttachmentDescriptor.pixelFormat : null;
        if (colorAttachmentDescriptor !== null) {
          if (sampleCount === -1)
            sampleCount = colorAttachmentDescriptor.sampleCount;
          else
            assert(sampleCount === colorAttachmentDescriptor.sampleCount);
        }
      }
      const depthStencilAttachmentDescriptor = passDescriptor.depthStencilAttachment !== null ? device.queryRenderTarget(passDescriptor.depthStencilAttachment.renderTarget) : null;
      const depthStencilAttachmentFormat = depthStencilAttachmentDescriptor !== null ? depthStencilAttachmentDescriptor.pixelFormat : null;
      if (depthStencilAttachmentDescriptor !== null) {
        if (sampleCount === -1)
          sampleCount = depthStencilAttachmentDescriptor.sampleCount;
        else
          assert(sampleCount === depthStencilAttachmentDescriptor.sampleCount);
      }
      assert(sampleCount > 0);
      cached = {
        colorAttachmentFormats,
        depthStencilAttachmentFormat,
        sampleCount
      };
      renderPassDescriptorFormatCache.set(passDescriptor, cached);
    }
    this._renderPipelineDescriptor.colorAttachmentFormats.length = cached.colorAttachmentFormats.length;
    for (let i = 0; i < cached.colorAttachmentFormats.length; i++)
      this._renderPipelineDescriptor.colorAttachmentFormats[i] = cached.colorAttachmentFormats[i];
    this._renderPipelineDescriptor.depthStencilAttachmentFormat = cached.depthStencilAttachmentFormat;
    this._renderPipelineDescriptor.sampleCount = cached.sampleCount;
  }
  setStencilRef(value) {
    this._stencilRef = value;
  }
  setBlendColor(value) {
    this._blendColor = value;
  }
  drawOnPass(cache2, passRenderer) {
    const device = cache2.device;
    this.setAttachmentFormatsFromRenderPass(device, passRenderer);
    const gfxPipeline = cache2.createRenderPipeline(this._renderPipelineDescriptor);
    const pipelineReady = device.pipelineQueryReady(gfxPipeline);
    if (!pipelineReady) {
      if (this._allowSkippingPipelineIfNotReady)
        return;
      device.pipelineForceReady(gfxPipeline);
    }
    if (this.debugMarker !== null)
      passRenderer.insertDebugMarker(this.debugMarker);
    passRenderer.setPipeline(gfxPipeline);
    passRenderer.setVertexInput(this._renderPipelineDescriptor.inputLayout, this._vertexBuffers, this._indexBuffer);
    let uboIndex = 0;
    for (let i = 0; i < this._bindingDescriptors.length; i++) {
      const bindingDescriptor = this._bindingDescriptors[i];
      for (let j = 0; j < bindingDescriptor.uniformBufferBindings.length; j++)
        bindingDescriptor.uniformBufferBindings[j].buffer = assertExists(this._uniformBuffer.gfxBuffer);
      const gfxBindings = cache2.createBindings(bindingDescriptor);
      const numBuffers = bindingDescriptor.bindingLayout.numUniformBuffers;
      this._dynamicUniformBufferByteOffsetsScratch.length = numBuffers;
      for (let j = 0; j < numBuffers; j++)
        this._dynamicUniformBufferByteOffsetsScratch[j] = this._dynamicUniformBufferByteOffsets[uboIndex + j];
      passRenderer.setBindings(i, gfxBindings, this._dynamicUniformBufferByteOffsetsScratch);
      uboIndex += numBuffers;
    }
    if (this._stencilRef !== null)
      passRenderer.setStencilRef(this._stencilRef);
    if (this._blendColor !== null)
      passRenderer.setBlendColor(this._blendColor);
    const indexed = this._indexBuffer !== null;
    if (this._drawInstanceCount > 1) {
      assert(indexed);
      passRenderer.drawIndexedInstanced(this._drawCount, this._drawStart, this._drawInstanceCount);
    } else if (indexed) {
      passRenderer.drawIndexed(this._drawCount, this._drawStart);
    } else {
      passRenderer.draw(this._drawCount, this._drawStart);
    }
  }
};
function gfxRenderInstCompareSortKey(a, b) {
  return a.sortKey - b.sortKey;
}
var GfxRenderInstList = class {
  constructor(compareFunction = gfxRenderInstCompareSortKey, executionOrder = 0 /* Forwards */) {
    this.compareFunction = compareFunction;
    this.executionOrder = executionOrder;
  }
  renderInsts = [];
  submitRenderInst(renderInst) {
    renderInst.validate();
    this.renderInsts.push(renderInst);
  }
  hasLateSamplerBinding(name) {
    for (let i = 0; i < this.renderInsts.length; i++)
      if (this.renderInsts[i].hasLateSamplerBinding(name))
        return true;
    return false;
  }
  /**
   * Resolve sampler bindings for all render insts on this render inst list. See the
   * documentation for {@see GfxRenderInst.resolveLateSamplerBinding}.
   */
  resolveLateSamplerBinding(name, binding) {
    for (let i = 0; i < this.renderInsts.length; i++)
      this.renderInsts[i].resolveLateSamplerBinding(name, binding);
  }
  ensureSorted() {
    if (this.compareFunction !== null && this.renderInsts.length !== 0)
      this.renderInsts.sort(this.compareFunction);
  }
  drawOnPassRendererNoReset(cache2, passRenderer) {
    this.ensureSorted();
    if (this.executionOrder === 0 /* Forwards */) {
      for (let i = 0; i < this.renderInsts.length; i++)
        this.renderInsts[i].drawOnPass(cache2, passRenderer);
    } else {
      for (let i = this.renderInsts.length - 1; i >= 0; i--)
        this.renderInsts[i].drawOnPass(cache2, passRenderer);
    }
  }
  reset() {
    this.renderInsts.length = 0;
  }
  /**
   * Execute all scheduled render insts in this list onto the {@param GfxRenderPass},
   * using {@param device} and {@param cache} to create any device-specific resources
   * necessary to complete the draws.
   */
  drawOnPassRenderer(cache2, passRenderer) {
    this.drawOnPassRendererNoReset(cache2, passRenderer);
    this.reset();
  }
};
var GfxRenderInstManager = class {
  constructor(gfxRenderCache) {
    this.gfxRenderCache = gfxRenderCache;
  }
  templateStack = [];
  currentList = null;
  renderInstPool = [];
  renderInstPoolUsed = 0;
  templatePool = [];
  templatePoolUsed = 0;
  reset() {
    this.renderInstPoolUsed = 0;
    this.templatePoolUsed = 0;
  }
  /**
   * Creates a new {@see GfxRenderInst} object and returns it. If there is a template
   * pushed onto the template stack, then its values will be used as a base for this
   * render inst.
   */
  newRenderInst() {
    let renderInst;
    if (this.renderInstPoolUsed < this.renderInstPool.length) {
      renderInst = this.renderInstPool[this.renderInstPoolUsed];
      renderInst.reset();
    } else {
      renderInst = new GfxRenderInst();
      this.renderInstPool.push(renderInst);
    }
    this.renderInstPoolUsed += 1;
    if (this.templateStack.length > 0)
      renderInst.copyFrom(this.getCurrentTemplate());
    return renderInst;
  }
  /**
   * Submits {@param renderInst} to the current render inst list. Note that
   * this assumes the render inst was fully filled in, so do not modify it
   * after submitting it.
   */
  submitRenderInst(renderInst) {
    this.currentList.submitRenderInst(renderInst);
  }
  /**
   * Sets the currently active render inst list. This is the list that will
   * be used by {@see submitRenderInst}. This is provided as convenience so
   * you don't need to pass a {@see GfxRenderInstList} around at the same time
   * you pass the manager, you can also call {@see submitRenderInst} directly
   * on the provided list.
   */
  setCurrentList(list) {
    this.currentList = list;
  }
  /**
   * Pushes a new template render inst to the template stack. All properties set
   * on the topmost template on the template stack will be the defaults for both
   * for any future render insts created. Once done with a template, call
   * {@see popTemplateRenderInst} to pop it off the template stack.
   */
  pushTemplate() {
    let newTemplate;
    if (this.templatePoolUsed < this.templatePool.length) {
      newTemplate = this.templatePool[this.templatePoolUsed];
      newTemplate.reset();
    } else {
      newTemplate = new GfxRenderInst();
      this.templatePool.push(newTemplate);
    }
    this.templatePoolUsed += 1;
    if (this.templateStack.length > 0)
      newTemplate.copyFrom(this.getCurrentTemplate());
    this.templateStack.push(newTemplate);
    return newTemplate;
  }
  popTemplate() {
    this.templateStack.pop();
  }
  /**
   * Retrieves the current template render inst on the top of the template stack.
   */
  getCurrentTemplate() {
    return this.templateStack[this.templateStack.length - 1];
  }
};

// src/noclip/gfx/render/GfxRenderCache.ts
function gfxProgramDescriptorEquals(a, b) {
  assert2(a.preprocessedVert !== "" && b.preprocessedVert !== "");
  assert2(a.preprocessedFrag !== "" && b.preprocessedFrag !== "");
  return a.preprocessedVert === b.preprocessedVert && a.preprocessedFrag === b.preprocessedFrag;
}
function gfxProgramDescriptorCopy(a) {
  const preprocessedVert = a.preprocessedVert;
  const preprocessedFrag = a.preprocessedFrag;
  return { preprocessedVert, preprocessedFrag };
}
function gfxRenderBindingLayoutHash(hash, a) {
  hash = hashCodeNumberUpdate(hash, a.numUniformBuffers);
  hash = hashCodeNumberUpdate(hash, a.numSamplers);
  return hash;
}
function gfxBlendStateHash(hash, a) {
  hash = hashCodeNumberUpdate(hash, a.blendMode);
  hash = hashCodeNumberUpdate(hash, a.blendSrcFactor);
  hash = hashCodeNumberUpdate(hash, a.blendDstFactor);
  return hash;
}
function gfxAttachmentStateHash(hash, a) {
  hash = gfxBlendStateHash(hash, a.rgbBlendState);
  hash = gfxBlendStateHash(hash, a.alphaBlendState);
  hash = hashCodeNumberUpdate(hash, a.channelWriteMask);
  return hash;
}
function gfxMegaStateDescriptorHash(hash, a) {
  for (let i = 0; i < a.attachmentsState.length; i++)
    hash = gfxAttachmentStateHash(hash, a.attachmentsState[i]);
  hash = hashCodeNumberUpdate(hash, a.depthCompare);
  hash = hashCodeNumberUpdate(hash, a.depthWrite ? 1 : 0);
  hash = hashCodeNumberUpdate(hash, a.stencilCompare);
  hash = hashCodeNumberUpdate(hash, a.stencilPassOp);
  hash = hashCodeNumberUpdate(hash, a.stencilWrite ? 1 : 0);
  hash = hashCodeNumberUpdate(hash, a.cullMode);
  hash = hashCodeNumberUpdate(hash, a.frontFace ? 1 : 0);
  hash = hashCodeNumberUpdate(hash, a.polygonOffset ? 1 : 0);
  hash = hashCodeNumberUpdate(hash, a.wireframe ? 1 : 0);
  return hash;
}
function gfxRenderPipelineDescriptorHash(a) {
  let hash = 0;
  hash = hashCodeNumberUpdate(hash, a.program.ResourceUniqueId);
  if (a.inputLayout !== null)
    hash = hashCodeNumberUpdate(hash, a.inputLayout.ResourceUniqueId);
  for (let i = 0; i < a.bindingLayouts.length; i++)
    hash = gfxRenderBindingLayoutHash(hash, a.bindingLayouts[i]);
  hash = gfxMegaStateDescriptorHash(hash, a.megaStateDescriptor);
  for (let i = 0; i < a.colorAttachmentFormats.length; i++)
    hash = hashCodeNumberUpdate(hash, a.colorAttachmentFormats[i] || 0);
  hash = hashCodeNumberUpdate(hash, a.depthStencilAttachmentFormat || 0);
  return hashCodeNumberFinish(hash);
}
function gfxBindingsDescriptorHash(a) {
  let hash = 0;
  for (let i = 0; i < a.samplerBindings.length; i++) {
    const binding = a.samplerBindings[i];
    if (binding !== null && binding.gfxTexture !== null)
      hash = hashCodeNumberUpdate(hash, binding.gfxTexture.ResourceUniqueId);
  }
  for (let i = 0; i < a.uniformBufferBindings.length; i++) {
    const binding = a.uniformBufferBindings[i];
    if (binding !== null && binding.buffer !== null) {
      hash = hashCodeNumberUpdate(hash, binding.buffer.ResourceUniqueId);
      hash = hashCodeNumberUpdate(hash, binding.byteSize);
    }
  }
  return hashCodeNumberFinish(hash);
}
var DynamicBufferEntry = class {
  constructor(device, byteCount, usage) {
    this.byteCount = byteCount;
    this.usage = usage;
    this.buffer = device.createBuffer(byteCount, usage, 2 /* Dynamic */);
  }
  buffer;
  allocOffs = 0;
  age = 0;
  allocate(device, data) {
    if (this.allocOffs + data.byteLength <= this.byteCount) {
      let byteOffset = this.allocOffs;
      device.uploadBufferData(this.buffer, byteOffset, data);
      this.allocOffs += align2(data.byteLength, 4);
      this.age = 4;
      return byteOffset;
    } else {
      return -1;
    }
  }
  prepareToRender() {
    this.allocOffs = 0;
    return this.age-- > 0;
  }
  destroy(device) {
    device.destroyBuffer(this.buffer);
  }
};
var GfxDynamicBufferCache = class {
  constructor(device) {
    this.device = device;
  }
  entry = [];
  prepareToRender() {
    for (let i = 0; i < this.entry.length; i++) {
      if (!this.entry[i].prepareToRender()) {
        this.entry[i].destroy(this.device);
        this.entry.splice(i--, 1);
      }
    }
  }
  allocateData(usage, data) {
    for (let i = 0; i < this.entry.length; i++) {
      const entry2 = this.entry[i];
      if (entry2.usage !== usage)
        continue;
      const byteOffset2 = entry2.allocate(this.device, data);
      if (byteOffset2 >= 0)
        return { buffer: entry2.buffer, byteOffset: byteOffset2 };
    }
    const newBufferSize = align2(data.byteLength, 64);
    const entry = new DynamicBufferEntry(this.device, newBufferSize, usage);
    this.entry.push(entry);
    const byteOffset = entry.allocate(this.device, data);
    assert2(byteOffset === 0);
    return { buffer: entry.buffer, byteOffset };
  }
  destroy() {
    for (let i = 0; i < this.entry.length; i++)
      this.entry[i].destroy(this.device);
    this.entry.length = 0;
  }
};
var GfxRenderCache = class {
  constructor(device) {
    this.device = device;
    this.dynamicBufferCache = new GfxDynamicBufferCache(device);
  }
  gfxBindingsCache = new HashMap(gfxBindingsDescriptorEquals, gfxBindingsDescriptorHash);
  gfxRenderPipelinesCache = new HashMap(gfxRenderPipelineDescriptorEquals, gfxRenderPipelineDescriptorHash);
  gfxInputLayoutsCache = new HashMap(gfxInputLayoutDescriptorEquals, nullHashFunc);
  gfxProgramCache = new HashMap(gfxProgramDescriptorEquals, nullHashFunc);
  gfxSamplerCache = new HashMap(gfxSamplerDescriptorEquals, nullHashFunc);
  dynamicBufferCache;
  createBindings(descriptor) {
    let bindings = this.gfxBindingsCache.get(descriptor);
    if (bindings === null) {
      const descriptorCopy = gfxBindingsDescriptorCopy(descriptor);
      bindings = this.device.createBindings(descriptorCopy);
      this.gfxBindingsCache.add(descriptorCopy, bindings);
    }
    bindings.expireFrameNum = 4;
    return bindings;
  }
  createRenderPipeline(descriptor) {
    let renderPipeline = this.gfxRenderPipelinesCache.get(descriptor);
    if (renderPipeline === null) {
      const descriptorCopy = gfxRenderPipelineDescriptorCopy(descriptor);
      renderPipeline = this.device.createRenderPipeline(descriptorCopy);
      this.gfxRenderPipelinesCache.add(descriptorCopy, renderPipeline);
    }
    return renderPipeline;
  }
  createInputLayout(descriptor) {
    let inputLayout = this.gfxInputLayoutsCache.get(descriptor);
    if (inputLayout === null) {
      const descriptorCopy = gfxInputLayoutDescriptorCopy(descriptor);
      inputLayout = this.device.createInputLayout(descriptorCopy);
      this.gfxInputLayoutsCache.add(descriptorCopy, inputLayout);
    }
    return inputLayout;
  }
  createProgramSimple(descriptor) {
    let program = this.gfxProgramCache.get(descriptor);
    if (program === null) {
      const descriptorCopy = gfxProgramDescriptorCopy(descriptor);
      program = this.device.createProgram(descriptorCopy);
      this.gfxProgramCache.add(descriptorCopy, program);
      if ("associate" in descriptor) {
        const p = descriptor;
        p.associate(this.device, program);
        descriptorCopy.orig = p;
      }
    }
    return program;
  }
  createProgram(descriptor) {
    const p = descriptor;
    p.ensurePreprocessed(this.device.queryVendorInfo());
    return this.createProgramSimple(descriptor);
  }
  createSampler(descriptor) {
    let sampler = this.gfxSamplerCache.get(descriptor);
    if (sampler === null) {
      sampler = this.device.createSampler(descriptor);
      this.gfxSamplerCache.add(descriptor, sampler);
    }
    return sampler;
  }
  numBindings() {
    return this.gfxBindingsCache.size();
  }
  prepareToRender() {
    for (const [key, value] of this.gfxBindingsCache.items()) {
      if (--value.expireFrameNum <= 0) {
        this.gfxBindingsCache.delete(key);
        this.device.destroyBindings(value);
      }
    }
    this.dynamicBufferCache.prepareToRender();
  }
  destroy() {
    for (const bindings of this.gfxBindingsCache.values())
      this.device.destroyBindings(bindings);
    for (const renderPipeline of this.gfxRenderPipelinesCache.values())
      this.device.destroyRenderPipeline(renderPipeline);
    for (const inputLayout of this.gfxInputLayoutsCache.values())
      this.device.destroyInputLayout(inputLayout);
    for (const program of this.gfxProgramCache.values())
      this.device.destroyProgram(program);
    for (const sampler of this.gfxSamplerCache.values())
      this.device.destroySampler(sampler);
    this.gfxBindingsCache.clear();
    this.gfxRenderPipelinesCache.clear();
    this.gfxInputLayoutsCache.clear();
    this.gfxProgramCache.clear();
    this.gfxSamplerCache.clear();
    this.dynamicBufferCache.destroy();
  }
};

// src/noclip/gfx/render/GfxRenderDynamicUniformBuffer.ts
var GfxRenderDynamicUniformBuffer = class {
  constructor(device) {
    this.device = device;
    const limits = device.queryLimits();
    this.uniformBufferByteAlignment = limits.uniformBufferByteAlignment;
    this.uniformBufferMaxPageByteSize = limits.uniformBufferMaxPageByteSize;
  }
  uniformBufferByteAlignment;
  uniformBufferMaxPageByteSize;
  currentBufferByteSize = -1;
  currentByteOffset = 0;
  gfxBuffer = null;
  shadowBufferF32 = null;
  shadowBufferU8 = null;
  findPageIndex(byteOffset) {
    return byteOffset / this.uniformBufferMaxPageByteSize * 4 | 0;
  }
  allocateChunk(wordCount) {
    wordCount = alignNonPowerOfTwo(wordCount, this.uniformBufferByteAlignment);
    const byteSize = wordCount * 4;
    assert2(byteSize <= this.uniformBufferMaxPageByteSize);
    let byteOffset = this.currentByteOffset;
    if (this.findPageIndex(byteOffset) !== this.findPageIndex(byteOffset + byteSize - 1))
      byteOffset = alignNonPowerOfTwo(byteOffset, this.uniformBufferMaxPageByteSize);
    this.currentByteOffset = byteOffset + byteSize;
    this.ensureShadowBuffer(byteOffset, byteSize);
    const wordOffset = byteOffset >> 2;
    return wordOffset;
  }
  ensureShadowBuffer(byteOffset, byteSize) {
    if (this.shadowBufferU8 === null) {
      const newWordCount = alignNonPowerOfTwo(this.currentByteOffset, this.uniformBufferMaxPageByteSize);
      const buffer = new ArrayBuffer(newWordCount << 2);
      this.shadowBufferU8 = new Uint8Array(buffer);
      this.shadowBufferF32 = new Float32Array(buffer);
    } else if (byteOffset + byteSize >= this.shadowBufferF32.byteLength) {
      assert2(byteOffset < this.currentByteOffset && byteOffset + byteSize <= this.currentByteOffset);
      const newByteSize = alignNonPowerOfTwo(Math.max(this.currentByteOffset, this.shadowBufferF32.length * 2), this.uniformBufferMaxPageByteSize);
      const buffer = this.shadowBufferU8.buffer;
      const newBuffer = buffer.transfer(newByteSize);
      this.shadowBufferU8 = new Uint8Array(newBuffer);
      this.shadowBufferF32 = new Float32Array(newBuffer);
      if (!(this.currentByteOffset <= newByteSize))
        throw new Error(`Assert fail: this.currentWordOffset [${this.currentByteOffset}] <= newWordCount [${newByteSize}]`);
    }
  }
  /**
   * Return the CPU data buffer used internally. Fill this in to submit data to the CPU. Write to
   * it with the offset that was returned from {@see allocateChunk}.
   */
  mapBufferF32() {
    return this.shadowBufferF32;
  }
  prepareToRender() {
    if (this.shadowBufferF32 === null) {
      return;
    }
    const shadowBufferF32 = assertExists2(this.shadowBufferF32);
    if (shadowBufferF32.byteLength !== this.currentBufferByteSize) {
      this.currentBufferByteSize = shadowBufferF32.byteLength;
      if (this.gfxBuffer !== null)
        this.device.destroyBuffer(this.gfxBuffer);
      this.gfxBuffer = this.device.createBuffer(this.currentBufferByteSize, 4 /* Uniform */, 2 /* Dynamic */);
      this.device.setResourceName(this.gfxBuffer, `GfxRenderDynamicUniformBuffer`);
    }
    const byteSize = alignNonPowerOfTwo(this.currentByteOffset, this.uniformBufferMaxPageByteSize);
    if (!(byteSize <= this.currentBufferByteSize))
      throw new Error(`Assert fail: byteSize [${byteSize}] (${this.currentByteOffset} aligned ${this.uniformBufferMaxPageByteSize}) <= this.currentBufferByteSize [${this.currentBufferByteSize}]`);
    const gfxBuffer = assertExists2(this.gfxBuffer);
    this.device.uploadBufferData(gfxBuffer, 0, this.shadowBufferU8, 0, byteSize);
    this.currentByteOffset = 0;
  }
  destroy() {
    if (this.gfxBuffer !== null)
      this.device.destroyBuffer(this.gfxBuffer);
    this.shadowBufferF32 = null;
    this.shadowBufferU8 = null;
  }
};

// src/noclip/gfx/helpers/DebugThumbnailHelpers.ts
var DebugThumbnailDrawer = class {
  constructor(_helper) {
  }
  destroy() {
  }
};

// src/noclip/gfx/helpers/DebugDraw.ts
var DebugDraw = class {
  constructor(_renderCache, _uniformBuffer) {
  }
  destroy() {
  }
};

// src/noclip/gfx/render/GfxRenderHelper.ts
var GfxRenderHelperBase = class {
  constructor(device, renderCache = null) {
    this.device = device;
    if (renderCache === null) {
      this.renderCacheOwn = new GfxRenderCache(device);
      this.renderCache = this.renderCacheOwn;
    } else {
      this.renderCache = renderCache;
    }
    this.renderGraph = new GfxrRenderGraphImpl(this.device);
    this.renderInstManager = new GfxRenderInstManager(this.renderCache);
    this.uniformBuffer = new GfxRenderDynamicUniformBuffer(this.device);
    this.debugDraw = new DebugDraw(this.renderCache, this.uniformBuffer);
    this.debugThumbnails = new DebugThumbnailDrawer(this);
    this.antialiasingSupport = new AntialiasingSupport(this);
  }
  renderCache;
  renderGraph;
  renderInstManager;
  uniformBuffer;
  debugThumbnails;
  debugDraw;
  antialiasingSupport;
  renderCacheOwn = null;
  pushTemplateRenderInst() {
    const template = this.renderInstManager.pushTemplate();
    template.setUniformBuffer(this.uniformBuffer);
    return template;
  }
  prepareToRender() {
    this.renderCache.prepareToRender();
    this.uniformBuffer.prepareToRender();
  }
  destroy() {
    if (this.renderCacheOwn !== null)
      this.renderCacheOwn.destroy();
    this.uniformBuffer.destroy();
    this.renderGraph.destroy();
    this.debugDraw.destroy();
  }
  getDebugTextDrawer() {
    return null;
  }
};
var PromiseWithSavedValue = class {
  constructor(func) {
    this.func = func;
  }
  value = null;
  completed = false;
  promise = null;
  getValueOrStart() {
    if (this.completed)
      return this.value;
    if (this.promise === null) {
      this.promise = this.func();
      this.promise.then((value) => {
        this.value = value;
        this.promise = null;
        this.completed = true;
      });
    }
    return null;
  }
};
var GfxRenderHelper = class extends GfxRenderHelperBase {
  debugTextDrawer;
  constructor(device, context = null, renderCache = null) {
    super(device, renderCache);
    this.debugTextDrawer = new PromiseWithSavedValue(async () => {
      const { makeDebugTextDrawer: makeDebugTextDrawer2 } = await Promise.resolve().then(() => (init_DebugTextDrawer(), DebugTextDrawer_exports));
      return context !== null ? makeDebugTextDrawer2(context) : null;
    });
  }
  getDebugTextDrawer() {
    return this.debugTextDrawer.getValueOrStart();
  }
  destroy() {
    super.destroy();
    this.debugThumbnails.destroy();
  }
};

// src/noclip/gfx/helpers/TextureConversionHelpers.ts
function setImageDataS8(dst, src) {
  for (let i = 0; i < src.length; i++)
    dst.data[i] = src[i] + 128;
}
function convertToImageData(dst, buffer, format) {
  if (format === GfxFormat.U8_RGBA_NORM)
    dst.data.set(buffer.createTypedArray(Uint8Array));
  else if (format === GfxFormat.S8_RGBA_NORM)
    setImageDataS8(dst, buffer.createTypedArray(Int8Array));
  else
    throw "whoops";
}
function convertToCanvasData(canvas2, buffer, format = GfxFormat.U8_RGBA_NORM) {
  const ctx = canvas2.getContext("2d");
  const imgData = ctx.createImageData(canvas2.width, canvas2.height);
  convertToImageData(imgData, buffer, format);
  ctx.putImageData(imgData, 0, 0);
}

// src/noclip/gx/gx_render.ts
var SceneParams = class {
  u_Projection = mat43.create();
  // TODO(jstpierre): Remove this in favor of putting it on the texture itself.
  // u_Misc0[0]
  u_SceneTextureLODBias = 0;
  u_SceneTimeFrames = 0;
};
var GXTextureMapping = class extends TextureMapping {
  width = 0;
  height = 0;
  lodBias = 0;
  // GL sucks. This is a convenience when building texture matrices.
  // The core renderer does not use this code at all.
  flipY = false;
  reset() {
    super.reset();
    this.width = 0;
    this.height = 0;
    this.lodBias = 0;
    this.flipY = false;
  }
  copy(other) {
    super.copy(other);
    this.width = other.width;
    this.height = other.height;
    this.lodBias = other.lodBias;
    this.flipY = other.flipY;
  }
};
var MaterialParams = class {
  m_TextureMapping = nArray(8, () => new GXTextureMapping());
  u_Color = nArray(12 /* COUNT */, () => colorNewCopy(TransparentBlack));
  u_TexMtx = nArray(10, () => mat43.create());
  // mat4x3
  u_PostTexMtx = nArray(20, () => mat43.create());
  // mat4x3
  u_IndTexMtx = nArray(3, () => mat43.create());
  // mat4x2
  u_Lights = nArray(8, () => new Light());
  u_FogBlock = new FogBlock();
  u_DynamicAlphaRefA = 0;
  u_DynamicAlphaRefB = 0;
  constructor() {
    colorFromRGBA(this.u_Color[0 /* MAT0 */], 1, 1, 1, 1);
    colorFromRGBA(this.u_Color[1 /* MAT1 */], 1, 1, 1, 1);
  }
  clear() {
    for (let i = 0; i < 8; i++)
      this.m_TextureMapping[i].reset();
  }
};
var DrawParams = class {
  u_PosMtx = nArray(10, () => mat43.create());
  clear() {
    for (let i = 0; i < 10; i++)
      mat43.identity(this.u_PosMtx[i]);
  }
};
var ub_SceneParamsBufferSize = 4 * 4 + 4;
function fillSceneParamsData(d, bOffs, sceneParams2) {
  let offs = bOffs;
  offs += fillMatrix4x4(d, offs, sceneParams2.u_Projection);
  offs += fillVec4(d, offs, sceneParams2.u_SceneTextureLODBias, sceneParams2.u_SceneTimeFrames);
  assert(offs === bOffs + ub_SceneParamsBufferSize);
  assert(d.length >= offs);
}
function fillLightData(d, offs, light) {
  offs += fillColor(d, offs, light.Color);
  offs += fillVec3v(d, offs, light.Position);
  offs += fillVec3v(d, offs, light.Direction);
  offs += fillVec3v(d, offs, light.DistAtten);
  offs += fillVec3v(d, offs, light.CosAtten);
  return 4 * 5;
}
function fillFogBlock(d, offs, fog) {
  offs += fillVec4(d, offs, fog.A, fog.B, fog.C, fog.AdjCenter);
  offs += fillVec4(d, offs, fog.AdjTable[0], fog.AdjTable[1], fog.AdjTable[2], fog.AdjTable[3]);
  offs += fillVec4(d, offs, fog.AdjTable[4], fog.AdjTable[5], fog.AdjTable[6], fog.AdjTable[7]);
  offs += fillVec4(d, offs, fog.AdjTable[8], fog.AdjTable[9]);
  offs += fillColor(d, offs, fog.Color);
  return 4 * 5;
}
function fillTextureSize(d, offs, m) {
  d[offs++] = m.width;
  d[offs++] = m.height * (m.flipY ? -1 : 1);
  return 2;
}
function fillTextureBias(d, offs, m) {
  d[offs++] = m.lodBias;
  return 1;
}
function fillMaterialParamsDataWithOptimizations(material, d, bOffs, materialParams) {
  let offs = bOffs;
  for (let i = 0; i < 12; i++)
    offs += fillColor(d, offs, materialParams.u_Color[i]);
  for (let i = 0; i < 10; i++)
    offs += fillMatrix4x3(d, offs, materialParams.u_TexMtx[i]);
  for (let i = 0; i < 8; i++)
    offs += fillTextureSize(d, offs, materialParams.m_TextureMapping[i]);
  for (let i = 0; i < 8; i++)
    offs += fillTextureBias(d, offs, materialParams.m_TextureMapping[i]);
  for (let i = 0; i < 3; i++)
    offs += fillMatrix4x2(d, offs, materialParams.u_IndTexMtx[i]);
  if (materialHasPostTexMtxBlock(material))
    for (let i = 0; i < 20; i++)
      offs += fillMatrix4x3(d, offs, materialParams.u_PostTexMtx[i]);
  if (materialHasLightsBlock(material))
    for (let i = 0; i < 8; i++)
      offs += fillLightData(d, offs, materialParams.u_Lights[i]);
  if (materialHasFogBlock(material))
    offs += fillFogBlock(d, offs, materialParams.u_FogBlock);
  if (materialHasDynamicAlphaTest(material))
    offs += fillVec4(d, offs, materialParams.u_DynamicAlphaRefA, materialParams.u_DynamicAlphaRefB);
  assert(d.length >= offs);
}
function fillDrawParamsDataWithOptimizations(material, d, bOffs, drawParams) {
  let offs = bOffs;
  if (materialUsePnMtxIdx(material))
    for (let i = 0; i < 10; i++)
      offs += fillMatrix4x3(d, offs, drawParams.u_PosMtx[i]);
  else
    offs += fillMatrix4x3(d, offs, drawParams.u_PosMtx[0]);
  assert(d.length >= offs);
}
function calcLODBias(viewportWidth, viewportHeight) {
  const textureLODBias = Math.log2(Math.min(viewportWidth / EFB_WIDTH, viewportHeight / EFB_HEIGHT));
  return textureLODBias;
}
function loadedDataCoalescerComboGfx(device, loadedVertexDatas, name = "") {
  return new GfxBufferCoalescerCombo(
    device,
    loadedVertexDatas.map((data) => data.vertexBuffers.map((buffer) => new ArrayBufferSlice(buffer))),
    loadedVertexDatas.map((data) => new ArrayBufferSlice(data.indexData)),
    name
  );
}
var GXViewerTexture = class {
  constructor(mipChain, extraInfo = null, name = mipChain.name) {
    this.mipChain = mipChain;
    this.extraInfo = extraInfo;
    this.name = name;
  }
  surfaces = [];
  activate() {
    assert(this.surfaces.length === 0);
    const promises = [];
    for (let i = 0; i < this.mipChain.mipLevels.length; i++) {
      const mipLevel = this.mipChain.mipLevels[i];
      const canvas2 = document.createElement("canvas");
      canvas2.width = mipLevel.width;
      canvas2.height = mipLevel.height;
      canvas2.title = mipLevel.name;
      this.surfaces.push(canvas2);
      promises.push(decodeTexture(mipLevel).then((rgbaTexture) => {
        convertToCanvasData(canvas2, ArrayBufferSlice.fromView(rgbaTexture.pixels));
      }));
    }
    return Promise.all(promises);
  }
};
function loadTextureFromMipChain(device, mipChain) {
  const firstMipLevel = mipChain.mipLevels[0];
  const gfxTexture = device.createTexture(makeTextureDescriptor2D(GfxFormat.U8_RGBA_NORM, firstMipLevel.width, firstMipLevel.height, mipChain.mipLevels.length));
  device.setResourceName(gfxTexture, mipChain.name);
  const promises = [];
  for (let i = 0; i < mipChain.mipLevels.length; i++) {
    const level = i;
    const mipLevel = mipChain.mipLevels[i];
    promises.push(decodeTexture(mipLevel).then((rgbaTexture) => {
      device.uploadTextureData(gfxTexture, level, [rgbaTexture.pixels]);
    }));
  }
  const viewerExtraInfo = /* @__PURE__ */ new Map();
  viewerExtraInfo.set("Format", getFormatName(firstMipLevel.format, firstMipLevel.paletteFormat));
  const viewerTexture = new GXViewerTexture(mipChain, viewerExtraInfo);
  return { gfxTexture, viewerTexture };
}
function translateWrapModeGfx(wrapMode) {
  switch (wrapMode) {
    case 0 /* CLAMP */:
      return 0 /* Clamp */;
    case 2 /* MIRROR */:
      return 2 /* Mirror */;
    case 1 /* REPEAT */:
      return 1 /* Repeat */;
  }
}
function autoOptimizeMaterialHasPostTexMtxBlock(material) {
  for (let i = 0; i < material.texGens.length; i++)
    if (material.texGens[i].postMatrix !== 125 /* PTIDENTITY */)
      return true;
  return false;
}
function channelControlUsesLights(chan) {
  return chan.lightingEnabled && chan.litMask !== 0;
}
function autoOptimizeMaterialHasLightsBlock(material) {
  if (material.lightChannels[0] !== void 0) {
    if (channelControlUsesLights(material.lightChannels[0].colorChannel))
      return true;
    if (channelControlUsesLights(material.lightChannels[0].alphaChannel))
      return true;
  }
  if (material.lightChannels[1] !== void 0) {
    if (channelControlUsesLights(material.lightChannels[1].colorChannel))
      return true;
    if (channelControlUsesLights(material.lightChannels[1].alphaChannel))
      return true;
  }
  return false;
}
function autoOptimizeMaterialHasFogBlock(material) {
  return material.ropInfo.fogType !== 0 /* NONE */;
}
function autoOptimizeMaterial(material) {
  if (material.hasPostTexMtxBlock === void 0)
    material.hasPostTexMtxBlock = autoOptimizeMaterialHasPostTexMtxBlock(material);
  if (material.hasLightsBlock === void 0)
    material.hasLightsBlock = autoOptimizeMaterialHasLightsBlock(material);
  if (material.hasFogBlock === void 0)
    material.hasFogBlock = autoOptimizeMaterialHasFogBlock(material);
}
function translateCullMode(cullMode) {
  switch (cullMode) {
    case 3 /* ALL */:
      throw "whoops";
    case 1 /* FRONT */:
      return 1 /* Front */;
    case 2 /* BACK */:
      return 2 /* Back */;
    case 0 /* NONE */:
      return 0 /* None */;
  }
}
function translateBlendFactorCommon(blendFactor) {
  switch (blendFactor) {
    case 0 /* ZERO */:
      return GfxBlendFactor.Zero;
    case 1 /* ONE */:
      return GfxBlendFactor.One;
    case 4 /* SRCALPHA */:
      return GfxBlendFactor.SrcAlpha;
    case 5 /* INVSRCALPHA */:
      return GfxBlendFactor.OneMinusSrcAlpha;
    case 6 /* DSTALPHA */:
      return GfxBlendFactor.DstAlpha;
    case 7 /* INVDSTALPHA */:
      return GfxBlendFactor.OneMinusDstAlpha;
    default:
      throw new Error("whoops");
  }
}
function translateBlendSrcFactor(blendFactor) {
  switch (blendFactor) {
    case 2 /* SRCCLR */:
      return GfxBlendFactor.Dst;
    case 3 /* INVSRCCLR */:
      return GfxBlendFactor.OneMinusDst;
    default:
      return translateBlendFactorCommon(blendFactor);
  }
}
function translateBlendDstFactor(blendFactor) {
  switch (blendFactor) {
    case 2 /* SRCCLR */:
      return GfxBlendFactor.Src;
    case 3 /* INVSRCCLR */:
      return GfxBlendFactor.OneMinusSrc;
    default:
      return translateBlendFactorCommon(blendFactor);
  }
}
function translateCompareType(compareType) {
  switch (compareType) {
    case 0 /* NEVER */:
      return GfxCompareMode.Never;
    case 1 /* LESS */:
      return GfxCompareMode.Less;
    case 2 /* EQUAL */:
      return GfxCompareMode.Equal;
    case 3 /* LEQUAL */:
      return GfxCompareMode.LessEqual;
    case 4 /* GREATER */:
      return GfxCompareMode.Greater;
    case 5 /* NEQUAL */:
      return GfxCompareMode.NotEqual;
    case 6 /* GEQUAL */:
      return GfxCompareMode.GreaterEqual;
    case 7 /* ALWAYS */:
      return GfxCompareMode.Always;
  }
}
function translateGfxMegaState(material) {
  const megaState = {};
  megaState.cullMode = translateCullMode(material.cullMode);
  megaState.depthWrite = material.ropInfo.depthWrite;
  megaState.depthCompare = material.ropInfo.depthTest ? reverseDepthForCompareMode(translateCompareType(material.ropInfo.depthFunc)) : GfxCompareMode.Always;
  megaState.frontFace = GfxFrontFaceMode.CW;
  const attachmentStateSimple = {};
  if (material.ropInfo.blendMode === 0 /* NONE */) {
    attachmentStateSimple.blendMode = GfxBlendMode.Add;
    attachmentStateSimple.blendSrcFactor = GfxBlendFactor.One;
    attachmentStateSimple.blendDstFactor = GfxBlendFactor.Zero;
  } else if (material.ropInfo.blendMode === 1 /* BLEND */) {
    attachmentStateSimple.blendMode = GfxBlendMode.Add;
    attachmentStateSimple.blendSrcFactor = translateBlendSrcFactor(material.ropInfo.blendSrcFactor);
    attachmentStateSimple.blendDstFactor = translateBlendDstFactor(material.ropInfo.blendDstFactor);
  } else if (material.ropInfo.blendMode === 3 /* SUBTRACT */) {
    attachmentStateSimple.blendMode = GfxBlendMode.ReverseSubtract;
    attachmentStateSimple.blendSrcFactor = GfxBlendFactor.One;
    attachmentStateSimple.blendDstFactor = GfxBlendFactor.One;
  } else if (material.ropInfo.blendMode === 2 /* LOGIC */) {
    attachmentStateSimple.blendMode = GfxBlendMode.Add;
    attachmentStateSimple.blendSrcFactor = GfxBlendFactor.One;
    attachmentStateSimple.blendDstFactor = GfxBlendFactor.Zero;
    console.warn(`Unimplemented LOGIC blend mode`);
  }
  attachmentStateSimple.channelWriteMask = 0 /* None */;
  if (material.ropInfo.colorUpdate)
    attachmentStateSimple.channelWriteMask |= 7 /* RGB */;
  if (material.ropInfo.alphaUpdate)
    attachmentStateSimple.channelWriteMask |= 8 /* Alpha */;
  setAttachmentStateSimple(megaState, attachmentStateSimple);
  return megaState;
}
var GXMaterialHelperGfx = class {
  constructor(material, materialHacks) {
    this.material = material;
    if (materialHacks)
      Object.assign(this.materialHacks, materialHacks);
    this.invalidateMaterial();
  }
  programKey;
  megaStateFlags;
  materialParamsBufferSize;
  drawParamsBufferSize;
  materialHacks = {};
  program = null;
  gfxProgram = null;
  valid = true;
  checkValid() {
    if (this.material.cullMode === 3 /* ALL */)
      return false;
    return true;
  }
  invalidateMaterial() {
    this.valid = this.checkValid();
    if (!this.valid)
      return;
    autoOptimizeMaterial(this.material);
    this.megaStateFlags = translateGfxMegaState(this.material);
    this.materialParamsBufferSize = getMaterialParamsBlockSize(this.material);
    this.drawParamsBufferSize = getDrawParamsBlockSize(this.material);
    this.program = null;
  }
  cacheProgram(cache2) {
    if (this.program === null)
      this.createProgram();
    if (this.gfxProgram === null) {
      this.gfxProgram = cache2.createProgram(this.program);
      this.programKey = this.gfxProgram.ResourceUniqueId;
    }
  }
  createProgram(klass = GX_Program) {
    this.program = new klass(this.material, this.materialHacks);
    this.gfxProgram = null;
  }
  setMaterialHacks(materialHacks) {
    Object.assign(this.materialHacks, materialHacks);
    this.createProgram();
  }
  fillMaterialParamsData(renderInstManager, offs, materialParams) {
    const uniformBuffer = renderInstManager.getCurrentTemplate().getUniformBuffer();
    const d = uniformBuffer.mapBufferF32();
    fillMaterialParamsDataWithOptimizations(this.material, d, offs, materialParams);
  }
  allocateMaterialParamsBlock(renderInstManager) {
    const uniformBuffer = renderInstManager.getCurrentTemplate().getUniformBuffer();
    return uniformBuffer.allocateChunk(this.materialParamsBufferSize);
  }
  allocateMaterialParamsDataOnInst(renderInst, materialParams) {
    const offs = renderInst.allocateUniformBuffer(GX_Program.ub_MaterialParams, this.materialParamsBufferSize);
    const d = renderInst.mapUniformBufferF32(GX_Program.ub_MaterialParams);
    fillMaterialParamsDataWithOptimizations(this.material, d, offs, materialParams);
  }
  allocateDrawParamsDataOnInst(renderInst, drawParams) {
    const offs = renderInst.allocateUniformBuffer(GX_Program.ub_DrawParams, this.drawParamsBufferSize);
    const d = renderInst.mapUniformBufferF32(GX_Program.ub_DrawParams);
    fillDrawParamsDataWithOptimizations(this.material, d, offs, drawParams);
  }
  setOnRenderInst(cache2, renderInst) {
    assert(this.valid);
    this.cacheProgram(cache2);
    renderInst.setMegaStateFlags(this.megaStateFlags);
    renderInst.setGfxProgram(this.gfxProgram);
    setSortKeyProgramKey(renderInst.sortKey, this.programKey);
  }
};
function createInputLayout(cache2, loadedVertexLayout) {
  const vertexAttributeDescriptors = [];
  for (let attrInput = 0; attrInput < 12 /* COUNT */; attrInput++) {
    const attribLocation = getVertexInputLocation(attrInput);
    const attrib = loadedVertexLayout.singleVertexInputLayouts.find((attrib2) => attrib2.attrInput === attrInput);
    if (attrib !== void 0) {
      const bufferByteOffset = attrib.bufferOffset;
      const bufferIndex = attrib.bufferIndex;
      vertexAttributeDescriptors.push({ location: attribLocation, format: attrib.format, bufferIndex, bufferByteOffset });
    }
  }
  const vertexBufferDescriptors = [];
  for (let i = 0; i < loadedVertexLayout.vertexBufferStrides.length; i++) {
    vertexBufferDescriptors.push({
      byteStride: loadedVertexLayout.vertexBufferStrides[i],
      frequency: 1 /* PerVertex */
    });
  }
  const indexBufferFormat = loadedVertexLayout.indexFormat;
  return cache2.createInputLayout({
    vertexAttributeDescriptors,
    vertexBufferDescriptors,
    indexBufferFormat
  });
}
var gxBindingLayouts = [
  { numUniformBuffers: 3, numSamplers: 8 }
];
var sceneParams = new SceneParams();
function fillSceneParamsDataOnTemplate(renderInst, viewerInput2, customLODBias = null, sceneTimeFrames = null, sceneParamsScratch = sceneParams) {
  mat43.copy(sceneParamsScratch.u_Projection, viewerInput2.camera.projectionMatrix);
  sceneParamsScratch.u_SceneTextureLODBias = customLODBias !== null ? customLODBias : calcLODBias(viewerInput2.backbufferWidth, viewerInput2.backbufferHeight);
  sceneParamsScratch.u_SceneTimeFrames = sceneTimeFrames ?? 0;
  let d = renderInst.allocateUniformBufferF32(GX_Program.ub_SceneParams, ub_SceneParamsBufferSize);
  fillSceneParamsData(d, 0, sceneParamsScratch);
}
var GXRenderHelperGfx = class extends GfxRenderHelper {
  pushTemplateRenderInst() {
    const template = super.pushTemplateRenderInst();
    template.setBindingLayouts(gxBindingLayouts);
    return template;
  }
};

// src/noclip/gx/GXMaterialBuilder.ts
function copyColorChannelControl(colorChannel) {
  return {
    lightingEnabled: colorChannel.lightingEnabled,
    matColorSource: colorChannel.matColorSource,
    ambColorSource: colorChannel.ambColorSource,
    litMask: colorChannel.litMask,
    diffuseFunction: colorChannel.diffuseFunction,
    attenuationFunction: colorChannel.attenuationFunction
  };
}
function copyLightChannelControl(lightChannel) {
  return {
    alphaChannel: copyColorChannelControl(lightChannel.alphaChannel),
    colorChannel: copyColorChannelControl(lightChannel.colorChannel)
  };
}
function copyTexGen(texGen) {
  return {
    type: texGen.type,
    source: texGen.source,
    matrix: texGen.matrix,
    normalize: texGen.normalize,
    postMatrix: texGen.postMatrix
  };
}
function copyTevStage(tevStage) {
  return {
    colorInA: tevStage.colorInA,
    colorInB: tevStage.colorInB,
    colorInC: tevStage.colorInC,
    colorInD: tevStage.colorInD,
    colorOp: tevStage.colorOp,
    colorBias: tevStage.colorBias,
    colorScale: tevStage.colorScale,
    colorClamp: tevStage.colorClamp,
    colorRegId: tevStage.colorRegId,
    alphaInA: tevStage.alphaInA,
    alphaInB: tevStage.alphaInB,
    alphaInC: tevStage.alphaInC,
    alphaInD: tevStage.alphaInD,
    alphaOp: tevStage.alphaOp,
    alphaBias: tevStage.alphaBias,
    alphaScale: tevStage.alphaScale,
    alphaClamp: tevStage.alphaClamp,
    alphaRegId: tevStage.alphaRegId,
    texCoordId: tevStage.texCoordId,
    texMap: tevStage.texMap,
    channelId: tevStage.channelId,
    konstColorSel: tevStage.konstColorSel,
    konstAlphaSel: tevStage.konstAlphaSel,
    indTexStage: tevStage.indTexStage,
    indTexFormat: tevStage.indTexFormat,
    indTexBiasSel: tevStage.indTexBiasSel,
    indTexAlphaSel: tevStage.indTexAlphaSel,
    indTexMatrix: tevStage.indTexMatrix,
    indTexWrapS: tevStage.indTexWrapS,
    indTexWrapT: tevStage.indTexWrapT,
    indTexAddPrev: tevStage.indTexAddPrev,
    indTexUseOrigLOD: tevStage.indTexUseOrigLOD,
    texSwapTable: tevStage.texSwapTable,
    rasSwapTable: tevStage.rasSwapTable
  };
}
function copyIndTexStage(indStage) {
  return {
    texture: indStage.texture,
    texCoordId: indStage.texCoordId,
    scaleS: indStage.scaleS,
    scaleT: indStage.scaleT
  };
}
function copyRopInfo(ropInfo) {
  return {
    fogType: ropInfo.fogType,
    fogAdjEnabled: ropInfo.fogAdjEnabled,
    blendMode: ropInfo.blendMode,
    blendSrcFactor: ropInfo.blendSrcFactor,
    blendDstFactor: ropInfo.blendDstFactor,
    blendLogicOp: ropInfo.blendLogicOp,
    depthTest: ropInfo.depthTest,
    depthFunc: ropInfo.depthFunc,
    depthWrite: ropInfo.depthWrite,
    dstAlpha: ropInfo.dstAlpha,
    colorUpdate: ropInfo.colorUpdate,
    alphaUpdate: ropInfo.alphaUpdate
  };
}
function copyAlphaTest(alphaTest) {
  return {
    compareA: alphaTest.compareA,
    referenceA: alphaTest.referenceA,
    op: alphaTest.op,
    compareB: alphaTest.compareB,
    referenceB: alphaTest.referenceB
  };
}
var GXMaterialBuilder = class {
  constructor(name = null) {
    this.name = name;
    this.reset();
  }
  cullMode;
  lightChannels = [];
  texGens = [];
  tevStages = [];
  indTexStages = [];
  alphaTest;
  ropInfo;
  usePnMtxIdx;
  hasDynamicAlphaTest;
  reset() {
    this.cullMode = 0 /* NONE */;
    this.lightChannels.length = 0;
    this.texGens.length = 0;
    this.tevStages.length = 0;
    this.indTexStages.length = 0;
    this.alphaTest = {};
    this.setAlphaCompare(7 /* ALWAYS */, 0, 0 /* AND */, 7 /* ALWAYS */, 0);
    this.ropInfo = {};
    this.setFog(0 /* NONE */, false);
    this.setBlendMode(0 /* NONE */, 4 /* SRCALPHA */, 5 /* INVSRCALPHA */, 0 /* CLEAR */);
    this.setZMode(true, 3 /* LEQUAL */, true);
    this.setColorUpdate(true);
    this.setAlphaUpdate(false);
    this.usePnMtxIdx = true;
    this.hasDynamicAlphaTest = false;
  }
  setCullMode(cullMode) {
    this.cullMode = cullMode;
  }
  ensureTexCoordGen(idx) {
    if (this.texGens[idx] === void 0)
      this.texGens[idx] = {};
    return this.texGens[idx];
  }
  setTexCoordGen(idx, type, source, matrix, normalize = false, postMatrix = 125 /* PTIDENTITY */) {
    const texGen = this.ensureTexCoordGen(idx);
    texGen.type = type;
    texGen.source = source;
    texGen.matrix = matrix;
    texGen.normalize = normalize;
    texGen.postMatrix = postMatrix;
  }
  ensureLightChannel(idx) {
    if (this.lightChannels[idx] === void 0) {
      this.lightChannels[idx] = {
        colorChannel: {},
        alphaChannel: {}
      };
      this.setChanCtrlInternal(this.lightChannels[idx].colorChannel, false, 0 /* REG */, 0 /* REG */, 0, 0 /* NONE */, 2 /* NONE */);
      this.setChanCtrlInternal(this.lightChannels[idx].alphaChannel, false, 0 /* REG */, 0 /* REG */, 0, 0 /* NONE */, 2 /* NONE */);
    }
    return this.lightChannels[idx];
  }
  setChanCtrlInternal(chanCtrl, enable, ambSrc, matSrc, lightMask, diffFn, attnFn) {
    chanCtrl.lightingEnabled = enable;
    chanCtrl.ambColorSource = ambSrc;
    chanCtrl.matColorSource = matSrc;
    chanCtrl.litMask = lightMask;
    chanCtrl.diffuseFunction = diffFn;
    chanCtrl.attenuationFunction = attnFn;
  }
  setChanCtrl(idx, enable, ambSrc, matSrc, lightMask, diffFn, attnFn) {
    const lightChannel = this.ensureLightChannel(idx & 1);
    const set = (idx >>> 1) + 1;
    if (!!(set & 1))
      this.setChanCtrlInternal(lightChannel.colorChannel, enable, ambSrc, matSrc, lightMask, diffFn, attnFn);
    if (!!(set & 2))
      this.setChanCtrlInternal(lightChannel.alphaChannel, enable, ambSrc, matSrc, lightMask, diffFn, attnFn);
  }
  ensureTevStage(idx) {
    if (this.tevStages[idx] === void 0) {
      this.tevStages[idx] = {};
      if (idx <= 7)
        this.setTevOrder(idx, 0 /* TEXCOORD0 */ + idx, 0 /* TEXMAP0 */ + idx, 0 /* COLOR0A0 */);
      else
        this.setTevOrder(idx, 255 /* TEXCOORD_NULL */, 255 /* TEXMAP_NULL */, 0 /* COLOR0A0 */);
      this.setTevColorOp(idx, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */), this.setTevAlphaOp(idx, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */), this.setTevColorIn(idx, 15 /* ZERO */, 15 /* ZERO */, 15 /* ZERO */, 8 /* TEXC */), this.setTevAlphaIn(idx, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, 4 /* TEXA */), this.setTevKColorSel(idx, 6 /* KCSEL_2_8 */);
      this.setTevKAlphaSel(idx, 0 /* KASEL_1 */);
      this.setTevDirect(idx);
    }
    return this.tevStages[idx];
  }
  setTevOrder(idx, texCoordID, texMap, channelId) {
    const tevStage = this.ensureTevStage(idx);
    tevStage.texCoordId = texCoordID;
    tevStage.texMap = texMap;
    tevStage.channelId = channelId;
  }
  setTevColorOp(idx, colorOp, colorBias, colorScale2, colorClamp, colorRegId) {
    const tevStage = this.ensureTevStage(idx);
    tevStage.colorOp = colorOp;
    tevStage.colorBias = colorBias;
    tevStage.colorScale = colorScale2;
    tevStage.colorClamp = colorClamp;
    tevStage.colorRegId = colorRegId;
  }
  setTevAlphaOp(idx, alphaOp, alphaBias, alphaScale, alphaClamp, alphaRegId) {
    const tevStage = this.ensureTevStage(idx);
    tevStage.alphaOp = alphaOp;
    tevStage.alphaBias = alphaBias;
    tevStage.alphaScale = alphaScale;
    tevStage.alphaClamp = alphaClamp;
    tevStage.alphaRegId = alphaRegId;
  }
  setTevColorIn(idx, colorInA, colorInB, colorInC, colorInD) {
    const tevStage = this.ensureTevStage(idx);
    tevStage.colorInA = colorInA;
    tevStage.colorInB = colorInB;
    tevStage.colorInC = colorInC;
    tevStage.colorInD = colorInD;
  }
  setTevAlphaIn(idx, alphaInA, alphaInB, alphaInC, alphaInD) {
    const tevStage = this.ensureTevStage(idx);
    tevStage.alphaInA = alphaInA;
    tevStage.alphaInB = alphaInB;
    tevStage.alphaInC = alphaInC;
    tevStage.alphaInD = alphaInD;
  }
  setTevKColorSel(idx, sel) {
    const tevStage = this.ensureTevStage(idx);
    tevStage.konstColorSel = sel;
  }
  setTevKAlphaSel(idx, sel) {
    const tevStage = this.ensureTevStage(idx);
    tevStage.konstAlphaSel = sel;
  }
  setTevSwapMode(idx, rasSwapTable, texSwapTable) {
    const tevStage = this.ensureTevStage(idx);
    tevStage.rasSwapTable = rasSwapTable;
    tevStage.texSwapTable = texSwapTable;
  }
  setTevIndirect(tevStageIdx, indTexStage, format, biasSel, matrixSel, wrapS, wrapT, addPrev, utcLod, alphaSel) {
    const tevStage = this.ensureTevStage(tevStageIdx);
    tevStage.indTexStage = indTexStage;
    tevStage.indTexFormat = format;
    tevStage.indTexBiasSel = biasSel;
    tevStage.indTexAlphaSel = alphaSel;
    tevStage.indTexMatrix = matrixSel;
    tevStage.indTexWrapS = wrapS;
    tevStage.indTexWrapT = wrapT;
    tevStage.indTexAddPrev = addPrev;
    tevStage.indTexUseOrigLOD = utcLod;
  }
  setTevIndWarp(tevStageIdx, indTexStage, signedOffsets, replaceMode, matrixSel) {
    const biasSel = signedOffsets ? 3 /* ST */ : 0 /* NONE */;
    const wrap = replaceMode ? 6 /* _0 */ : 0 /* OFF */;
    this.setTevIndirect(tevStageIdx, indTexStage, 0 /* _8 */, biasSel, matrixSel, wrap, wrap, false, false, 0 /* OFF */);
  }
  setTevDirect(tevStageIdx) {
    this.setTevIndirect(tevStageIdx, 0 /* STAGE0 */, 0 /* _8 */, 0 /* NONE */, 0 /* OFF */, 0 /* OFF */, 0 /* OFF */, false, false, 0 /* OFF */);
  }
  ensureIndTexStage(idx) {
    if (this.indTexStages[idx] === void 0) {
      this.indTexStages[idx] = {};
      this.setIndTexScale(idx, 0 /* _1 */, 0 /* _1 */);
    }
    return this.indTexStages[idx];
  }
  setIndTexOrder(idx, texcoord, texmap) {
    const indStage = this.ensureIndTexStage(idx);
    indStage.texCoordId = texcoord;
    indStage.texture = texmap;
  }
  setIndTexScale(idx, scaleS, scaleT) {
    const indStage = this.ensureIndTexStage(idx);
    indStage.scaleS = scaleS;
    indStage.scaleT = scaleT;
  }
  setAlphaCompare(compareA, referenceA, op, compareB, referenceB) {
    this.alphaTest.compareA = compareA;
    this.alphaTest.referenceA = referenceA / 255;
    this.alphaTest.op = op;
    this.alphaTest.compareB = compareB;
    this.alphaTest.referenceB = referenceB / 255;
  }
  setFog(fogType, fogAdjEnabled) {
    this.ropInfo.fogType = fogType;
    this.ropInfo.fogAdjEnabled = fogAdjEnabled;
  }
  setBlendMode(blendMode, srcFactor, dstFactor, logicOp = 0 /* CLEAR */) {
    this.ropInfo.blendMode = blendMode;
    this.ropInfo.blendSrcFactor = srcFactor;
    this.ropInfo.blendDstFactor = dstFactor;
    this.ropInfo.blendLogicOp = logicOp;
  }
  setZMode(depthTest, depthFunc, depthWrite) {
    this.ropInfo.depthTest = depthTest;
    this.ropInfo.depthFunc = depthFunc;
    this.ropInfo.depthWrite = depthWrite;
  }
  setDstAlpha(v) {
    this.ropInfo.dstAlpha = v;
  }
  setColorUpdate(v) {
    this.ropInfo.colorUpdate = v;
  }
  setAlphaUpdate(v) {
    this.ropInfo.alphaUpdate = v;
  }
  setUsePnMtxIdx(v) {
    this.usePnMtxIdx = v;
  }
  setDynamicAlphaTest(v) {
    this.hasDynamicAlphaTest = v;
  }
  setTexGenFromRegisters(r, i) {
    const v = r.xfGet(4160 /* XF_TEX0_ID */ + i);
    let TexProjection;
    ((TexProjection2) => {
      TexProjection2[TexProjection2["ST"] = 0] = "ST";
      TexProjection2[TexProjection2["STQ"] = 1] = "STQ";
    })(TexProjection || (TexProjection = {}));
    let TexForm;
    ((TexForm2) => {
      TexForm2[TexForm2["AB11"] = 0] = "AB11";
      TexForm2[TexForm2["ABC1"] = 1] = "ABC1";
    })(TexForm || (TexForm = {}));
    let TexGenType2;
    ((TexGenType3) => {
      TexGenType3[TexGenType3["REGULAR"] = 0] = "REGULAR";
      TexGenType3[TexGenType3["EMBOSS_MAP"] = 1] = "EMBOSS_MAP";
      TexGenType3[TexGenType3["COLOR_STRGBC0"] = 2] = "COLOR_STRGBC0";
      TexGenType3[TexGenType3["COLOR_STRGBC1"] = 2] = "COLOR_STRGBC1";
    })(TexGenType2 || (TexGenType2 = {}));
    let TexSourceRow;
    ((TexSourceRow2) => {
      TexSourceRow2[TexSourceRow2["GEOM"] = 0] = "GEOM";
      TexSourceRow2[TexSourceRow2["NRM"] = 1] = "NRM";
      TexSourceRow2[TexSourceRow2["CLR"] = 2] = "CLR";
      TexSourceRow2[TexSourceRow2["BNT"] = 3] = "BNT";
      TexSourceRow2[TexSourceRow2["BNB"] = 4] = "BNB";
      TexSourceRow2[TexSourceRow2["TEX0"] = 5] = "TEX0";
      TexSourceRow2[TexSourceRow2["TEX1"] = 6] = "TEX1";
      TexSourceRow2[TexSourceRow2["TEX2"] = 7] = "TEX2";
      TexSourceRow2[TexSourceRow2["TEX3"] = 8] = "TEX3";
      TexSourceRow2[TexSourceRow2["TEX4"] = 9] = "TEX4";
      TexSourceRow2[TexSourceRow2["TEX5"] = 10] = "TEX5";
      TexSourceRow2[TexSourceRow2["TEX6"] = 11] = "TEX6";
      TexSourceRow2[TexSourceRow2["TEX7"] = 12] = "TEX7";
    })(TexSourceRow || (TexSourceRow = {}));
    const proj = v >>> 1 & 1;
    const form = v >>> 2 & 1;
    const tgType = v >>> 4 & 2;
    const src = v >>> 7 & 15;
    const embossSrc = v >>> 12 & 7;
    const embossLgt = v >>> 15 & 7;
    let texGenType;
    let texGenSrc;
    if (tgType === 0 /* REGULAR */) {
      const srcLookup = [
        0 /* POS */,
        1 /* NRM */,
        19 /* COLOR0 */,
        2 /* BINRM */,
        3 /* TANGENT */,
        4 /* TEX0 */,
        5 /* TEX1 */,
        6 /* TEX2 */,
        7 /* TEX3 */,
        8 /* TEX4 */,
        9 /* TEX5 */,
        10 /* TEX6 */,
        11 /* TEX7 */
      ];
      texGenType = proj === 0 /* ST */ ? 1 /* MTX2x4 */ : 0 /* MTX3x4 */;
      texGenSrc = srcLookup[src];
    } else if (tgType === 1 /* EMBOSS_MAP */) {
      texGenType = 2 /* BUMP0 */ + embossLgt;
      texGenSrc = 12 /* TEXCOORD0 */ + embossSrc;
    } else if (tgType === 2 /* COLOR_STRGBC0 */) {
      texGenType = 10 /* SRTG */;
      texGenSrc = 19 /* COLOR0 */;
    } else if (tgType === 2 /* COLOR_STRGBC1 */) {
      texGenType = 10 /* SRTG */;
      texGenSrc = 20 /* COLOR1 */;
    } else {
      throw "whoops";
    }
    const matrix = 60 /* IDENTITY */;
    const dv = r.xfGet(4176 /* XF_DUALTEX0_ID */ + i);
    const postMatrix = (dv >>> 0 & 255) + 64 /* PTTEXMTX0 */;
    const normalize = !!(dv >>> 8 & 1);
    this.setTexCoordGen(i, texGenType, texGenSrc, matrix, normalize, postMatrix);
  }
  setColorChannelFromRegisters(r, i) {
    const colorCntrl = r.xfGet(4110 /* XF_COLOR0CNTRL_ID */ + i);
    const alphaCntrl = r.xfGet(4112 /* XF_ALPHA0CNTRL_ID */ + i);
    const setChanCtrl = (dst, chanCtrl) => {
      const matColorSource = chanCtrl >>> 0 & 1;
      const lightingEnabled = !!(chanCtrl >>> 1 & 1);
      const litMaskL = chanCtrl >>> 2 & 15;
      const ambColorSource = chanCtrl >>> 6 & 1;
      const diffuseFunction = chanCtrl >>> 7 & 3;
      const attnEn = !!(chanCtrl >>> 9 & 1);
      const attnSelect = !!(chanCtrl >>> 10 & 1);
      const litMaskH = chanCtrl >>> 11 & 15;
      const litMask = litMaskH << 4 | litMaskL;
      const attenuationFunction = attnEn ? attnSelect ? 1 /* SPOT */ : 0 /* SPEC */ : 2 /* NONE */;
      this.setChanCtrlInternal(dst, lightingEnabled, ambColorSource, matColorSource, litMask, diffuseFunction, attenuationFunction);
    };
    const dstChannel = this.ensureLightChannel(i);
    setChanCtrl(dstChannel.colorChannel, colorCntrl);
    setChanCtrl(dstChannel.alphaChannel, alphaCntrl);
  }
  setTevStageFromRegisters(r, i) {
    const v = r.bp[40 /* RAS1_TREF_0_ID */ + (i >>> 1)];
    const ti = v >>> (i & 1 ? 12 : 0) & 7;
    const tc = v >>> (i & 1 ? 15 : 3) & 7;
    const te = !!(v >>> (i & 1 ? 18 : 6) & 1);
    const cc = v >>> (i & 1 ? 19 : 7) & 7;
    this.setTevOrder(i, tc, te ? ti : 255 /* TEXMAP_NULL */, cc);
    const color = r.bp[192 /* TEV_COLOR_ENV_0_ID */ + i * 2];
    const colorInD = color >>> 0 & 15;
    const colorInC = color >>> 4 & 15;
    const colorInB = color >>> 8 & 15;
    const colorInA = color >>> 12 & 15;
    const colorBias = color >>> 16 & 3;
    const colorSub = !!(color >>> 18 & 1);
    const colorClamp = !!(color >>> 19 & 1);
    const colorScale2 = color >>> 20 & 3;
    const colorRegId = color >>> 22 & 3;
    const colorOp = findTevOp(colorBias, colorScale2, colorSub);
    function findTevOp(bias, scale, sub) {
      if (bias === 3 /* $HWB_COMPARE */) {
        switch (scale) {
          case 0 /* $HWB_R8 */:
            return sub ? 9 /* COMP_R8_EQ */ : 8 /* COMP_R8_GT */;
          case 1 /* $HWB_GR16 */:
            return sub ? 11 /* COMP_GR16_EQ */ : 10 /* COMP_GR16_GT */;
          case 2 /* $HWB_BGR24 */:
            return sub ? 13 /* COMP_BGR24_EQ */ : 12 /* COMP_BGR24_GT */;
          case 3 /* $HWB_RGB8 */:
            return sub ? 15 /* COMP_RGB8_EQ */ : 14 /* COMP_RGB8_GT */;
          default:
            throw "whoops 2";
        }
      } else {
        return sub ? 1 /* SUB */ : 0 /* ADD */;
      }
    }
    const alpha = r.bp[193 /* TEV_ALPHA_ENV_0_ID */ + i * 2];
    const rswap = alpha >>> 0 & 3;
    const tswap = alpha >>> 2 & 3;
    const alphaInD = alpha >>> 4 & 7;
    const alphaInC = alpha >>> 7 & 7;
    const alphaInB = alpha >>> 10 & 7;
    const alphaInA = alpha >>> 13 & 7;
    const alphaBias = alpha >>> 16 & 3;
    const alphaSub = !!(alpha >>> 18 & 1);
    const alphaClamp = !!(alpha >>> 19 & 1);
    const alphaScale = alpha >>> 20 & 3;
    const alphaRegId = alpha >>> 22 & 3;
    const alphaOp = findTevOp(alphaBias, alphaScale, alphaSub);
    this.setTevColorIn(i, colorInA, colorInB, colorInC, colorInD);
    this.setTevColorOp(i, colorOp, colorBias, colorScale2, colorClamp, colorRegId);
    this.setTevAlphaIn(i, alphaInA, alphaInB, alphaInC, alphaInD);
    this.setTevAlphaOp(i, alphaOp, alphaBias, alphaScale, alphaClamp, alphaRegId);
    const ksel = r.bp[246 /* TEV_KSEL_0_ID */ + (i >>> 1)];
    const konstColorSel = (i & 1 ? ksel >>> 14 : ksel >>> 4) & 31;
    const konstAlphaSel = (i & 1 ? ksel >>> 19 : ksel >>> 9) & 31;
    this.setTevKColorSel(i, konstColorSel);
    this.setTevKAlphaSel(i, konstAlphaSel);
    const indCmd = r.bp[16 /* IND_CMD0_ID */ + i];
    const indTexStage = indCmd >>> 0 & 3;
    const indTexFormat = indCmd >>> 2 & 3;
    const indTexBiasSel = indCmd >>> 4 & 7;
    const indTexAlphaSel = indCmd >>> 7 & 3;
    const indTexMatrix = indCmd >>> 9 & 15;
    const indTexWrapS = indCmd >>> 13 & 7;
    const indTexWrapT = indCmd >>> 16 & 7;
    const indTexUseOrigLOD = !!(indCmd >>> 19 & 1);
    const indTexAddPrev = !!(indCmd >>> 20 & 1);
    this.setTevIndirect(i, indTexStage, indTexFormat, indTexBiasSel, indTexMatrix, indTexWrapS, indTexWrapT, indTexAddPrev, indTexUseOrigLOD, indTexAlphaSel);
    const rasSwapTableRG = r.bp[246 /* TEV_KSEL_0_ID */ + rswap * 2];
    const rasSwapTableBA = r.bp[246 /* TEV_KSEL_0_ID */ + rswap * 2 + 1];
    const rasSwapTable = [
      rasSwapTableRG >>> 0 & 3,
      rasSwapTableRG >>> 2 & 3,
      rasSwapTableBA >>> 0 & 3,
      rasSwapTableBA >>> 2 & 3
    ];
    const texSwapTableRG = r.bp[246 /* TEV_KSEL_0_ID */ + tswap * 2];
    const texSwapTableBA = r.bp[246 /* TEV_KSEL_0_ID */ + tswap * 2 + 1];
    const texSwapTable = [
      texSwapTableRG >>> 0 & 3,
      texSwapTableRG >>> 2 & 3,
      texSwapTableBA >>> 0 & 3,
      texSwapTableBA >>> 2 & 3
    ];
    this.setTevSwapMode(i, rasSwapTable, texSwapTable);
  }
  setIndTexStageFromRegisters(r, i) {
    const iref = r.bp[39 /* RAS1_IREF_ID */];
    const ss = r.bp[37 /* RAS1_SS0_ID */ + (i >>> 2)];
    const scaleS = ss >>> 8 * (i & 1) + 0 & 15;
    const scaleT = ss >>> 8 * (i & 1) + 4 & 15;
    const texture = iref >>> 6 * i & 7;
    const texCoordId = iref >>> 6 * i & 7;
    this.setIndTexOrder(i, texCoordId, texture);
    this.setIndTexScale(i, scaleS, scaleT);
  }
  setRopStateFromRegisters(r) {
    const fogType = 0 /* NONE */;
    const fogAdjEnabled = false;
    if (r.bpRegIsSet(65 /* PE_CMODE0_ID */)) {
      const cm0 = r.bp[65 /* PE_CMODE0_ID */];
      const bmboe = cm0 >>> 0 & 1;
      const bmloe = cm0 >>> 1 & 1;
      const colorUpdate = !!(cm0 >>> 3 & 1);
      const alphaUpdate = !!(cm0 >>> 4 & 1);
      this.setColorUpdate(colorUpdate);
      this.setAlphaUpdate(alphaUpdate);
      const bmbop = cm0 >>> 11 & 1;
      const blendMode = bmboe ? bmbop ? 3 /* SUBTRACT */ : 1 /* BLEND */ : bmloe ? 2 /* LOGIC */ : 0 /* NONE */;
      ;
      const blendDstFactor = cm0 >>> 5 & 7;
      const blendSrcFactor = cm0 >>> 8 & 7;
      const blendLogicOp = cm0 >>> 12 & 15;
      this.setBlendMode(blendMode, blendSrcFactor, blendDstFactor, blendLogicOp);
    }
    if (r.bpRegIsSet(64 /* PE_ZMODE_ID */)) {
      const zm = r.bp[64 /* PE_ZMODE_ID */];
      const depthTest = !!(zm >>> 0 & 1);
      const depthFunc = zm >>> 1 & 7;
      const depthWrite = !!(zm >>> 4 & 1);
      this.setZMode(depthTest, depthFunc, depthWrite);
    }
    if (r.bpRegIsSet(243 /* TEV_ALPHAFUNC_ID */)) {
      const ap = r.bp[243 /* TEV_ALPHAFUNC_ID */];
      const refA = ap >>> 0 & 255;
      const refB = ap >>> 8 & 255;
      const compareA = ap >>> 16 & 7;
      const compareB = ap >>> 19 & 7;
      const op = ap >>> 22 & 7;
      this.setAlphaCompare(compareA, refA, op, compareB, refB);
    }
    if (r.bpRegIsSet(0 /* GEN_MODE_ID */)) {
      const genMode = r.bp[0 /* GEN_MODE_ID */];
      const hw2cm = [0 /* NONE */, 2 /* BACK */, 1 /* FRONT */, 3 /* ALL */];
      const cullMode = hw2cm[genMode >>> 14 & 3];
      this.setCullMode(cullMode);
    }
  }
  setFromRegisters(r) {
    const genMode = r.bp[0 /* GEN_MODE_ID */];
    const numTexGens = genMode >>> 0 & 15;
    for (let i = 0; i < numTexGens; i++)
      this.setTexGenFromRegisters(r, i);
    const numTevStages = (genMode >>> 10 & 15) + 1;
    for (let i = 0; i < numTevStages; i++)
      this.setTevStageFromRegisters(r, i);
    const numInds = genMode >>> 16 & 7;
    for (let i = 0; i < numInds; i++)
      this.setIndTexStageFromRegisters(r, i);
    const numColors = r.xfGet(4105 /* XF_NUMCOLORS_ID */);
    for (let i = 0; i < numColors; i++)
      this.setColorChannelFromRegisters(r, i);
    this.setRopStateFromRegisters(r);
  }
  finish(name = null) {
    if (name === null)
      name = this.name;
    if (name === null)
      name = "";
    const material = {
      name,
      cullMode: this.cullMode,
      lightChannels: this.lightChannels.map(copyLightChannelControl),
      texGens: this.texGens.map(copyTexGen),
      tevStages: this.tevStages.map(copyTevStage),
      indTexStages: this.indTexStages.map(copyIndTexStage),
      alphaTest: copyAlphaTest(this.alphaTest),
      ropInfo: copyRopInfo(this.ropInfo),
      usePnMtxIdx: this.usePnMtxIdx,
      hasDynamicAlphaTest: this.hasDynamicAlphaTest
    };
    autoOptimizeMaterial(material);
    return material;
  }
};

// src/noclip/gfx/helpers/TopologyHelpers.ts
function convertToTrianglesRange(dstBuffer, dstOffs, topology, baseVertex, numVertices) {
  assert2(dstOffs + getTriangleIndexCountForTopologyIndexCount(topology, numVertices) <= dstBuffer.length);
  let dst = dstOffs;
  if (topology === 3 /* Quads */) {
    for (let i = 0; i < numVertices; i += 4) {
      dstBuffer[dst++] = baseVertex + i + 0;
      dstBuffer[dst++] = baseVertex + i + 1;
      dstBuffer[dst++] = baseVertex + i + 2;
      dstBuffer[dst++] = baseVertex + i + 0;
      dstBuffer[dst++] = baseVertex + i + 2;
      dstBuffer[dst++] = baseVertex + i + 3;
    }
  } else if (topology === 1 /* TriStrips */) {
    for (let i = 2; i < numVertices; i++) {
      dstBuffer[dst++] = baseVertex + i - 2;
      dstBuffer[dst++] = baseVertex + i - (~i & 1);
      dstBuffer[dst++] = baseVertex + i - (i & 1);
    }
  } else if (topology === 2 /* TriFans */) {
    for (let i = 2; i < numVertices; i++) {
      dstBuffer[dst++] = baseVertex;
      dstBuffer[dst++] = baseVertex + i - 1;
      dstBuffer[dst++] = baseVertex + i;
    }
  } else if (topology === 0 /* Triangles */) {
    for (let i = 0; i < numVertices; i++)
      dstBuffer[dst++] = baseVertex + i;
  }
  return dst - dstOffs;
}
function getTriangleCountForTopologyIndexCount(topology, indexCount) {
  switch (topology) {
    case 0 /* Triangles */:
      return indexCount / 3;
    case 1 /* TriStrips */:
    case 2 /* TriFans */:
      return indexCount - 2;
    case 3 /* Quads */:
      return 2 * (indexCount / 4);
  }
}
function getTriangleIndexCountForTopologyIndexCount(topology, indexCount) {
  return 3 * getTriangleCountForTopologyIndexCount(topology, indexCount);
}

// src/noclip/SuperMarioGalaxy/DDraw.ts
function getGfxToplogyFromCommand(cmd) {
  if (cmd === 128 /* DRAW_QUADS */) return 3 /* Quads */;
  if (cmd === 152 /* DRAW_TRIANGLE_STRIP */) return 1 /* TriStrips */;
  if (cmd === 144 /* DRAW_TRIANGLES */) return 0 /* Triangles */;
  if (cmd === 160 /* DRAW_TRIANGLE_FAN */) return 2 /* TriFans */;
  throw "whoops";
}
var TDDrawBase = class {
  constructor(name) {
    this.name = name;
    for (let i = 9 /* POS */; i <= 20 /* TEX7 */; i++) {
      this.vcd[i] = { type: 0 /* NONE */ };
    }
    this.vertexBufferDescriptors = [{ buffer: null }];
    this.indexBufferDescriptor = { buffer: null };
  }
  vcd = [];
  useNBT = false;
  loadedVertexLayout = null;
  inputLayout = null;
  vertexBuffer = null;
  indexBuffer = null;
  vertexBufferDescriptors;
  indexBufferDescriptor;
  // Global information
  currentVertex;
  currentIndex;
  indexData;
  vertexData;
  // Current primitive information
  currentPrimVertex;
  currentPrim;
  setVtxDesc(attr, enabled) {
    assert(this.loadedVertexLayout === null);
    if (attr === 25 /* _NBT */) {
      attr = 10 /* NRM */;
      this.useNBT = enabled;
    }
    const vcd = assertExists(this.vcd[attr]);
    vcd.type = enabled ? 1 /* DIRECT */ : 0 /* NONE */;
  }
  allocVertices(numVertex) {
    const vertexCount = this.currentVertex + 1 + numVertex;
    const stride = this.loadedVertexLayout.vertexBufferStrides[0];
    this.ensureVertexBufferData(vertexCount * stride);
  }
  allocPrimitives(type, numVertex) {
    const vertexCount = this.currentVertex + 1 + numVertex;
    const topology = getGfxToplogyFromCommand(type);
    const stride = this.loadedVertexLayout.vertexBufferStrides[0];
    this.ensureVertexBufferData(vertexCount * stride);
    this.ensureIndexBufferData(getTriangleIndexCountForTopologyIndexCount(topology, vertexCount));
  }
  getOffs(v, attr) {
    const stride = this.loadedVertexLayout.vertexBufferStrides[0];
    return v * stride + this.loadedVertexLayout.vertexAttributeOffsets[attr];
  }
  writeFloat32(offs, v) {
    const e = getSystemEndianness() === 0 /* LITTLE_ENDIAN */;
    this.vertexData.setFloat32(offs, v, e);
  }
  position3f32(x, y, z) {
    ++this.currentVertex;
    ++this.currentPrimVertex;
    this.allocVertices(0);
    const offs = this.getOffs(this.currentVertex, 9 /* POS */);
    this.writeFloat32(offs + 0, x);
    this.writeFloat32(offs + 4, y);
    this.writeFloat32(offs + 8, z);
  }
  position3vec3(v) {
    this.position3f32(v[0], v[1], v[2]);
  }
  normal3f32(x, y, z) {
    const offs = this.getOffs(this.currentVertex, 10 /* NRM */);
    this.writeFloat32(offs + 0, x);
    this.writeFloat32(offs + 4, y);
    this.writeFloat32(offs + 8, z);
  }
  normal3vec3(v) {
    this.normal3f32(v[0], v[1], v[2]);
  }
  texCoord2f32(attr, s, t) {
    const offs = this.getOffs(this.currentVertex, attr);
    this.writeFloat32(offs + 0, s);
    this.writeFloat32(offs + 4, t);
  }
  texCoord2vec2(attr, v) {
    this.texCoord2f32(attr, v[0], v[1]);
  }
  color4rgba8(attr, r, g, b, a) {
    const offs = this.getOffs(this.currentVertex, attr);
    this.vertexData.setUint32(offs + 0, r << 24 | g << 16 | b << 8 | a, false);
  }
  color4color(attr, c) {
    const offs = this.getOffs(this.currentVertex, attr);
    this.vertexData.setUint32(offs + 0, colorToRGBA8(c), false);
  }
  begin(type, numVertex = null) {
    this.currentPrim = type;
    this.currentPrimVertex = -1;
    if (numVertex !== null) this.allocPrimitives(type, numVertex);
  }
  end() {
    const gfxTopo = getGfxToplogyFromCommand(this.currentPrim);
    const numIndices = getTriangleIndexCountForTopologyIndexCount(gfxTopo, this.currentPrimVertex + 1);
    this.ensureIndexBufferData(this.currentIndex + numIndices);
    const baseVertex = this.currentVertex - this.currentPrimVertex;
    const numVertices = this.currentPrimVertex + 1;
    convertToTrianglesRange(this.indexData, this.currentIndex, gfxTopo, baseVertex, numVertices);
    this.currentIndex += numIndices;
  }
};
var TDDraw = class extends TDDrawBase {
  recreateVertexBuffer = true;
  recreateIndexBuffer = true;
  startIndex;
  constructor(name = "") {
    super(name);
    this.vertexData = new DataView(new ArrayBuffer(1024));
    this.indexData = new Uint16Array(256);
  }
  ensureVertexBufferData(newByteSize) {
    if (newByteSize > this.vertexData.byteLength) {
      assert(this.startIndex === 0);
      const newByteSizeAligned = align(newByteSize, this.vertexData.byteLength);
      const newBuffer = this.vertexData.buffer.transfer(newByteSizeAligned);
      this.vertexData = new DataView(newBuffer);
      this.recreateVertexBuffer = true;
    }
  }
  ensureIndexBufferData(newSize) {
    if (newSize > this.indexData.length) {
      assert(this.startIndex === 0);
      const newSizeAligned = align(newSize, this.indexData.length);
      const newBuffer = this.indexData.buffer.transfer(newSizeAligned * 2);
      this.indexData = new Uint16Array(newBuffer);
      this.recreateIndexBuffer = true;
    }
  }
  beginDraw(cache2) {
    if (this.loadedVertexLayout === null) this.loadedVertexLayout = compileLoadedVertexLayout(this.vcd, this.useNBT);
    if (this.inputLayout === null) this.inputLayout = createInputLayout(cache2, this.loadedVertexLayout);
    this.currentVertex = -1;
    this.currentIndex = 0;
    this.startIndex = 0;
  }
  flushDeviceObjects(device) {
    if (this.recreateVertexBuffer) {
      if (this.vertexBuffer !== null) device.destroyBuffer(this.vertexBuffer);
      this.vertexBuffer = device.createBuffer(
        this.vertexData.byteLength,
        2 /* Vertex */,
        2 /* Dynamic */
      );
      device.setResourceName(this.vertexBuffer, `TDDraw ${this.name}`);
      this.vertexBufferDescriptors[0].buffer = this.vertexBuffer;
      this.recreateVertexBuffer = false;
    }
    if (this.recreateIndexBuffer) {
      if (this.indexBuffer !== null) device.destroyBuffer(this.indexBuffer);
      this.indexBuffer = device.createBuffer(
        this.indexData.byteLength,
        1 /* Index */,
        2 /* Dynamic */
      );
      device.setResourceName(this.indexBuffer, `TDDraw ${this.name} (IB)`);
      this.indexBufferDescriptor.buffer = this.indexBuffer;
      this.recreateIndexBuffer = false;
    }
  }
  setOnRenderInst(renderInst) {
    renderInst.setVertexInput(this.inputLayout, this.vertexBufferDescriptors, this.indexBufferDescriptor);
    renderInst.setDrawCount(this.currentIndex - this.startIndex, this.startIndex);
  }
  hasIndicesToDraw() {
    return this.currentIndex > this.startIndex;
  }
  makeRenderInst(renderInstManager) {
    this.flushDeviceObjects(renderInstManager.gfxRenderCache.device);
    const renderInst = renderInstManager.newRenderInst();
    this.setOnRenderInst(renderInst);
    this.startIndex = this.currentIndex;
    return renderInst;
  }
  endDraw(renderInstManager) {
    const device = renderInstManager.gfxRenderCache.device;
    this.flushDeviceObjects(device);
    device.uploadBufferData(this.vertexBuffer, 0, new Uint8Array(this.vertexData.buffer));
    device.uploadBufferData(this.indexBuffer, 0, new Uint8Array(this.indexData.buffer));
  }
  endDrawAndMakeRenderInst(renderInstManager) {
    this.endDraw(renderInstManager);
    return this.makeRenderInst(renderInstManager);
  }
  destroy(device) {
    if (this.indexBuffer !== null) {
      device.destroyBuffer(this.indexBuffer);
      this.indexBuffer = null;
      this.recreateIndexBuffer = true;
    }
    if (this.vertexBuffer !== null) {
      device.destroyBuffer(this.vertexBuffer);
      this.vertexBuffer = null;
      this.recreateVertexBuffer = true;
    }
  }
};
var TSDraw = class extends TDDrawBase {
  constructor(name = "") {
    super(name);
    this.vertexData = new DataView(new ArrayBuffer(1024));
    this.indexData = new Uint16Array(256);
  }
  ensureVertexBufferData(newByteSize) {
    if (newByteSize > this.vertexData.byteLength) {
      const newByteSizeAligned = align(newByteSize, this.vertexData.byteLength);
      const newBuffer = this.vertexData.buffer.transfer(newByteSizeAligned);
      this.vertexData = new DataView(newBuffer);
    }
  }
  ensureIndexBufferData(newSize) {
    if (newSize > this.indexData.length) {
      const newSizeAligned = align(newSize, this.indexData.byteLength);
      const newBuffer = this.indexData.buffer.transfer(newSizeAligned * 2);
      this.indexData = new Uint16Array(newBuffer);
    }
  }
  beginDraw(cache2) {
    assert(this.vertexBuffer === null);
    assert(this.indexBuffer === null);
    assert(this.loadedVertexLayout === null);
    this.loadedVertexLayout = compileLoadedVertexLayout(this.vcd, this.useNBT);
    this.inputLayout = createInputLayout(cache2, this.loadedVertexLayout);
    this.currentVertex = -1;
    this.currentIndex = 0;
  }
  flushDeviceObjects(cache2) {
    const device = cache2.device;
    this.vertexBuffer = device.createBuffer(
      this.vertexData.byteLength,
      2 /* Vertex */,
      1 /* Static */
    );
    device.setResourceName(this.vertexBuffer, `TSDraw ${this.name}`);
    this.vertexBufferDescriptors[0].buffer = this.vertexBuffer;
    this.indexBuffer = device.createBuffer(
      this.indexData.byteLength,
      1 /* Index */,
      1 /* Static */
    );
    device.setResourceName(this.indexBuffer, `TSDraw ${this.name} (IB)`);
    this.indexBufferDescriptor.buffer = this.indexBuffer;
  }
  setOnRenderInst(renderInst) {
    renderInst.setVertexInput(this.inputLayout, this.vertexBufferDescriptors, this.indexBufferDescriptor);
    renderInst.setDrawCount(this.currentIndex);
  }
  endDraw(cache2) {
    const device = cache2.device;
    this.flushDeviceObjects(cache2);
    device.uploadBufferData(this.vertexBuffer, 0, new Uint8Array(this.vertexData.buffer));
    device.uploadBufferData(this.indexBuffer, 0, new Uint8Array(this.indexData.buffer));
  }
  destroy(device) {
    if (this.indexBuffer !== null) device.destroyBuffer(this.indexBuffer);
    if (this.vertexBuffer !== null) device.destroyBuffer(this.vertexBuffer);
  }
};

// src/noclip/SuperMonkeyBall/NaomiLib.ts
var VTX_SIZE = 32;
var VTX_OFFSET_DESC_SIZE = 8;
var DISP_LIST_HEADER_SIZE = 8;
var TEXT_DECODER = new TextDecoder("utf-8");
var scratchVec3a2 = vec33.create();
var scratchVec3b2 = vec33.create();
function readU32(view, offset) {
  return view.getUint32(offset, false);
}
function readS32(view, offset) {
  return view.getInt32(offset, false);
}
function readF32(view, offset) {
  return view.getFloat32(offset, false);
}
function parseVec3fBE(view, offset) {
  const x = readF32(view, offset);
  const y = readF32(view, offset + 4);
  const z = readF32(view, offset + 8);
  return vec33.fromValues(x, y, z);
}
function parseVec2fBE(view, offset) {
  const x = readF32(view, offset);
  const y = readF32(view, offset + 4);
  return vec2.fromValues(x, y);
}
var NL_TO_GX_COMPARE = [
  0 /* NEVER */,
  6 /* GEQUAL */,
  2 /* EQUAL */,
  6 /* GEQUAL */,
  3 /* LEQUAL */,
  5 /* NEQUAL */,
  3 /* LEQUAL */,
  7 /* ALWAYS */
];
var NL_TO_GX_CULL_MODE = [3 /* ALL */, 0 /* NONE */, 2 /* BACK */, 1 /* FRONT */];
var FLIP_T_TEX_MTX = mat44.fromValues(
  1,
  0,
  0,
  0,
  0,
  -1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  1
);
function parseVtxTypeA(view, vtxOffs) {
  const pos = parseVec3fBE(view, vtxOffs + 0);
  const materialColor = colorNewFromRGBA8(readU32(view, vtxOffs + 16));
  const texCoord = parseVec2fBE(view, vtxOffs + 24);
  return { pos, materialColor, texCoord };
}
function parseVtxTypeB(view, vtxOffs) {
  const pos = parseVec3fBE(view, vtxOffs + 0);
  const normal = parseVec3fBE(view, vtxOffs + 12);
  const texCoord = parseVec2fBE(view, vtxOffs + 24);
  return { pos, normal, texCoord };
}
function parseDispLists(view, dispListOffs, dispListSize, parseVtxFunc) {
  const dispLists = [];
  const endOffs = dispListOffs + dispListSize;
  let dlOffs = dispListOffs;
  while (dlOffs < endOffs) {
    const flags = readU32(view, dlOffs + 0);
    const vtxOrFaceCount = readU32(view, dlOffs + 4);
    let vtxCount;
    if (flags & 16 /* TriangleStrip */) {
      vtxCount = vtxOrFaceCount;
    } else if (flags & 8 /* Triangles */) {
      vtxCount = vtxOrFaceCount * 3;
    } else if (flags & 4 /* Quads */) {
      vtxCount = vtxOrFaceCount * 4;
    } else {
      throw new Error("Invalid NL display list primitive type");
    }
    const vertices = [];
    let vtxOffs = dlOffs + DISP_LIST_HEADER_SIZE;
    for (let vtxIdx = 0; vtxIdx < vtxCount; vtxIdx++) {
      const posXAsUint = readU32(view, vtxOffs + 0);
      if (posXAsUint & 1) {
        vertices.push(parseVtxFunc(view, vtxOffs));
        vtxOffs += VTX_SIZE;
      } else {
        const relativeVtxOffs = readS32(view, vtxOffs + 4);
        const actualVtxOffs = vtxOffs + relativeVtxOffs + VTX_OFFSET_DESC_SIZE;
        vertices.push(parseVtxFunc(view, actualVtxOffs));
        vtxOffs += VTX_OFFSET_DESC_SIZE;
      }
    }
    dispLists.push({ flags, vertices });
    dlOffs = vtxOffs;
  }
  return dispLists;
}
function parseMeshList(view, meshOffs, parseVtxFunc, tpl) {
  const meshes = [];
  let meshIdx = 0;
  while (true) {
    const flags = readU32(view, meshOffs + 0);
    if (flags === 0) return meshes;
    const texFlags = readU32(view, meshOffs + 8);
    const tplTexIdx = readS32(view, meshOffs + 32);
    const tex = tplTexIdx < 0 ? null : assertExists(tpl.get(tplTexIdx));
    const meshType = readS32(view, meshOffs + 36);
    const ambientColorScale = readF32(view, meshOffs + 40);
    const materialColorA = readF32(view, meshOffs + 44);
    const materialColorR = readF32(view, meshOffs + 48);
    const materialColorG = readF32(view, meshOffs + 52);
    const materialColorB = readF32(view, meshOffs + 56);
    const materialColor = colorNewFromRGBA(materialColorR, materialColorG, materialColorB, materialColorA);
    const dispListSize = readU32(view, meshOffs + 76);
    const dispListOffs = meshOffs + 80;
    const dispLists = parseDispLists(view, dispListOffs, dispListSize, parseVtxFunc);
    meshes.push({
      flags,
      texFlags,
      tex,
      meshType,
      ambientColorScale,
      materialColor,
      dispLists
    });
    meshOffs = dispListOffs + dispListSize;
    meshIdx++;
  }
}
function parseModel(view, modelOffs, tpl) {
  const valid = readS32(view, modelOffs + 0);
  if (valid === -1) return null;
  const flags = readU32(view, modelOffs + 4);
  const boundSphereCenter = parseVec3fBE(view, modelOffs + 8);
  const boundSphereRadius = readF32(view, modelOffs + 20);
  if (flags & 0 /* VtxTypeA */) {
    const meshes2 = parseMeshList(view, modelOffs + 24, parseVtxTypeA, tpl);
    return { flags, boundSphereCenter, boundSphereRadius, meshList: { kind: "A", meshes: meshes2 } };
  }
  const meshes = parseMeshList(view, modelOffs + 24, parseVtxTypeB, tpl);
  return { flags, boundSphereCenter, boundSphereRadius, meshList: { kind: "B", meshes } };
}
function parseObj(nlObjBuffer, tpl) {
  const view = nlObjBuffer.createDataView();
  const obj = /* @__PURE__ */ new Map();
  let offs = 4;
  for (let i = 0; ; i++, offs += 4) {
    const modelOffs = readU32(view, offs);
    if (modelOffs === 0) break;
    const model = parseModel(view, modelOffs, tpl);
    if (model !== null) {
      obj.set(i, model);
    }
  }
  return obj;
}
function buildObjNameMap(nlObjBuffer) {
  const view = nlObjBuffer.createDataView();
  const bytes = nlObjBuffer.createTypedArray(Uint8Array);
  const nameMap = /* @__PURE__ */ new Map();
  let offs = 4;
  for (let i = 0; ; i += 1, offs += 4) {
    const modelOffs = readU32(view, offs);
    if (modelOffs === 0) {
      break;
    }
    const headerOffs = modelOffs - 8;
    if (headerOffs < 0 || headerOffs + 4 > nlObjBuffer.byteLength) {
      continue;
    }
    const namePtr = readU32(view, headerOffs);
    if (namePtr <= 0 || namePtr >= nlObjBuffer.byteLength) {
      continue;
    }
    const nameOffs = namePtr + 4;
    if (nameOffs < 0 || nameOffs >= nlObjBuffer.byteLength) {
      continue;
    }
    let end = nameOffs;
    while (end < nlObjBuffer.byteLength && bytes[end] !== 0) {
      end += 1;
    }
    const name = TEXT_DECODER.decode(bytes.subarray(nameOffs, end));
    if (!name) {
      continue;
    }
    nameMap.set(name, i);
    if (name.startsWith("obj_")) {
      nameMap.set(name.slice(4), i);
    }
  }
  return nameMap;
}
var scratchMaterialParams = new MaterialParams();
var MaterialInst = class {
  constructor(device, renderCache, meshData, textureCache) {
    this.meshData = meshData;
    this.initSampler(device, renderCache, meshData, textureCache);
    this.genGXMaterial(device, renderCache, meshData);
  }
  loadedTex;
  // null if we're using TEXMAP_NULL
  gfxSampler;
  materialHelper;
  initSampler(device, renderCache, meshData, textureCache) {
    if (meshData.tex === null) {
      this.loadedTex = null;
      this.gfxSampler = null;
      return;
    }
    this.loadedTex = textureCache.getTexture(device, meshData.tex);
    let wrapS;
    let wrapT;
    if (meshData.texFlags & 65536 /* SClamp */) {
      wrapS = 0 /* Clamp */;
    } else if (meshData.texFlags & 262144 /* SMirror */) {
      wrapS = 2 /* Mirror */;
    } else {
      wrapS = 1 /* Repeat */;
    }
    if (meshData.texFlags & 32768 /* TClamp */) {
      wrapT = 0 /* Clamp */;
    } else if (meshData.texFlags & 131072 /* TMirror */) {
      wrapT = 2 /* Mirror */;
    } else {
      wrapT = 1 /* Repeat */;
    }
    const texFilter = (meshData.texFlags & 3) === 0 ? 0 /* Point */ : 1 /* Bilinear */;
    this.gfxSampler = renderCache.createSampler({
      wrapS,
      wrapT,
      minFilter: texFilter,
      magFilter: texFilter,
      mipFilter: 0 /* Nearest */,
      minLOD: 0,
      maxLOD: 0
    });
  }
  genGXMaterial(device, renderCache, meshData) {
    const mb = new GXMaterialBuilder();
    const baseDispList = meshData.dispLists[0];
    const cullModeIdx = baseDispList ? baseDispList.flags & 3 : 1;
    mb.setCullMode(NL_TO_GX_CULL_MODE[cullModeIdx]);
    mb.setUsePnMtxIdx(false);
    mb.setTevDirect(0);
    mb.setTexCoordGen(0 /* TEXCOORD0 */, 1 /* MTX2x4 */, 4 /* TEX0 */, 30 /* TEXMTX0 */);
    mb.setBlendMode(0 /* NONE */, 1 /* ONE */, 0 /* ZERO */, 0 /* CLEAR */);
    mb.setFog(0 /* NONE */, false);
    if (this.loadedTex === null) {
      mb.setTevOrder(0, 255 /* TEXCOORD_NULL */, 255 /* TEXMAP_NULL */, 0 /* COLOR0A0 */);
    } else {
      switch (meshData.texFlags >> 6 & 3) {
        case 0: {
          mb.setTevOrder(0, 0 /* TEXCOORD0 */, 0 /* TEXMAP0 */, 0 /* COLOR0A0 */);
          mb.setTevColorIn(0, 15 /* ZERO */, 15 /* ZERO */, 15 /* ZERO */, 8 /* TEXC */);
          mb.setTevColorOp(0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
          mb.setTevAlphaIn(0, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, 4 /* TEXA */);
          mb.setTevAlphaOp(0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
          break;
        }
        case 1: {
          mb.setTevOrder(0, 0 /* TEXCOORD0 */, 0 /* TEXMAP0 */, 0 /* COLOR0A0 */);
          mb.setTevColorIn(0, 15 /* ZERO */, 10 /* RASC */, 8 /* TEXC */, 15 /* ZERO */);
          mb.setTevColorOp(0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
          mb.setTevAlphaIn(0, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, 4 /* TEXA */);
          mb.setTevAlphaOp(0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
          break;
        }
        case 2: {
          mb.setTevOrder(0, 0 /* TEXCOORD0 */, 0 /* TEXMAP0 */, 0 /* COLOR0A0 */);
          mb.setTevColorIn(0, 10 /* RASC */, 8 /* TEXC */, 9 /* TEXA */, 15 /* ZERO */);
          mb.setTevColorOp(0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
          mb.setTevAlphaIn(0, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, 5 /* RASA */);
          mb.setTevAlphaOp(0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
          break;
        }
        case 3: {
          mb.setTevOrder(0, 0 /* TEXCOORD0 */, 0 /* TEXMAP0 */, 0 /* COLOR0A0 */);
          mb.setTevColorIn(0, 15 /* ZERO */, 8 /* TEXC */, 10 /* RASC */, 15 /* ZERO */);
          mb.setTevColorOp(0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
          mb.setTevAlphaIn(0, 7 /* ZERO */, 5 /* RASA */, 4 /* TEXA */, 7 /* ZERO */);
          mb.setTevAlphaOp(0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
          break;
        }
      }
    }
    switch (meshData.meshType) {
      case -1 /* UnlitConstMatColor */: {
        mb.setChanCtrl(
          4 /* COLOR0A0 */,
          false,
          0 /* REG */,
          0 /* REG */,
          0,
          2 /* CLAMP */,
          1 /* SPOT */
        );
        break;
      }
      case -3 /* UnlitVertMatColor */: {
        mb.setChanCtrl(
          4 /* COLOR0A0 */,
          false,
          1 /* VTX */,
          1 /* VTX */,
          0,
          2 /* CLAMP */,
          1 /* SPOT */
        );
        break;
      }
      default: {
        mb.setChanCtrl(
          4 /* COLOR0A0 */,
          true,
          0 /* REG */,
          0 /* REG */,
          1,
          // We only have one directional light for now
          2 /* CLAMP */,
          1 /* SPOT */
        );
        break;
      }
    }
    mb.setAlphaCompare(4 /* GREATER */, 0, 0 /* AND */, 4 /* GREATER */, 0);
    const zCompare = NL_TO_GX_COMPARE[meshData.flags >> 29];
    const depthWrite = !(meshData.flags & 16777216 /* DisableDepthWrite */);
    mb.setZMode(true, zCompare, depthWrite);
    this.materialHelper = new GXMaterialHelperGfx(mb.finish());
  }
  setMaterialHacks(hacks) {
    this.materialHelper.setMaterialHacks(hacks);
  }
  setOnRenderInst(device, renderCache, inst, drawParams, renderParams) {
    this.materialHelper.setOnRenderInst(renderCache, inst);
    const materialParams = scratchMaterialParams;
    materialParams.clear();
    if (this.loadedTex !== null && this.gfxSampler !== null) {
      materialParams.m_TextureMapping[0].gfxTexture = this.loadedTex;
      materialParams.m_TextureMapping[0].gfxSampler = this.gfxSampler;
    }
    const overrideTexture = renderParams.textureOverride;
    if (overrideTexture && overrideTexture.gfxTexture && overrideTexture.gfxSampler) {
      materialParams.m_TextureMapping[0].copy(overrideTexture);
    }
    const lighting = assertExists(renderParams.lighting);
    const targetMatColor = materialParams.u_Color[0 /* MAT0 */];
    colorCopy(targetMatColor, this.meshData.materialColor);
    const colorMul = renderParams.colorMul;
    targetMatColor.r *= colorMul.r;
    targetMatColor.g *= colorMul.g;
    targetMatColor.b *= colorMul.b;
    targetMatColor.a *= colorMul.a * renderParams.alpha;
    const targetC0 = materialParams.u_Color[9 /* C0 */];
    colorCopy(targetC0, this.meshData.materialColor, targetMatColor.a);
    targetC0.r *= colorMul.r;
    targetC0.g *= colorMul.g;
    targetC0.b *= colorMul.b;
    const targetAmbColor = materialParams.u_Color[2 /* AMB0 */];
    colorScale(targetAmbColor, lighting.ambientColor, this.meshData.ambientColorScale);
    mat44.copy(materialParams.u_TexMtx[0], FLIP_T_TEX_MTX);
    materialParams.u_Lights[0].copy(lighting.infLightViewSpace);
    this.materialHelper.allocateMaterialParamsDataOnInst(inst, materialParams);
    inst.setSamplerBindingsFromTextureMappings(materialParams.m_TextureMapping);
    this.materialHelper.allocateDrawParamsDataOnInst(inst, drawParams);
  }
};
var scratchDrawParams = new DrawParams();
var MeshInst = class {
  ddraw;
  material;
  constructor(device, renderCache, meshData, textureCache) {
    this.material = new MaterialInst(device, renderCache, meshData.mesh, textureCache);
    this.ddraw = new TSDraw();
    if (meshData.kind === "A") {
      this.ddraw.setVtxDesc(9 /* POS */, true);
      this.ddraw.setVtxDesc(11 /* CLR0 */, true);
      this.ddraw.setVtxDesc(13 /* TEX0 */, true);
    } else {
      this.ddraw.setVtxDesc(9 /* POS */, true);
      this.ddraw.setVtxDesc(10 /* NRM */, true);
      this.ddraw.setVtxDesc(13 /* TEX0 */, true);
    }
    this.ddraw.beginDraw(renderCache);
    for (const dispList of meshData.mesh.dispLists) {
      if (dispList.flags & 16 /* TriangleStrip */) {
        this.ddraw.begin(152 /* DRAW_TRIANGLE_STRIP */);
      } else if (dispList.flags & 8 /* Triangles */) {
        this.ddraw.begin(144 /* DRAW_TRIANGLES */);
      } else if (dispList.flags & 4 /* Quads */) {
        this.ddraw.begin(128 /* DRAW_QUADS */);
      } else {
        throw new Error("Invalid display list primitive type");
      }
      if (meshData.kind === "A") {
        for (const vtx of dispList.vertices) {
          this.ddraw.position3vec3(vtx.pos);
          this.ddraw.color4color(11 /* CLR0 */, vtx.materialColor);
          this.ddraw.texCoord2vec2(13 /* TEX0 */, vtx.texCoord);
        }
      } else {
        for (const vtx of dispList.vertices) {
          this.ddraw.position3vec3(vtx.pos);
          this.ddraw.normal3vec3(vtx.normal);
          this.ddraw.texCoord2vec2(13 /* TEX0 */, vtx.texCoord);
        }
      }
      this.ddraw.end();
    }
    this.ddraw.endDraw(renderCache);
  }
  setMaterialHacks(hacks) {
    this.material.setMaterialHacks(hacks);
  }
  prepareToRender(ctx, renderParams, forceCullMode) {
    const drawParams = scratchDrawParams;
    mat44.copy(drawParams.u_PosMtx[0], renderParams.viewFromModel);
    const inst = ctx.renderInstManager.newRenderInst();
    this.material.setOnRenderInst(ctx.device, ctx.renderInstManager.gfxRenderCache, inst, drawParams, renderParams);
    this.ddraw.setOnRenderInst(inst);
    if (forceCullMode !== null) {
      inst.getMegaStateFlags().cullMode = forceCullMode;
    }
    if (ctx.forceAlphaWrite) {
      setAttachmentStateSimple(inst.getMegaStateFlags(), {
        channelWriteMask: GfxChannelWriteMask.RGBA
      });
    }
    ctx.opaqueInstList.submitRenderInst(inst);
  }
  prepareToRenderCustom(ctx, renderParams, forceCullMode, configureRenderInst) {
    const inst = ctx.renderInstManager.newRenderInst();
    configureRenderInst(inst, renderParams);
    this.ddraw.setOnRenderInst(inst);
    if (forceCullMode !== null) {
      inst.getMegaStateFlags().cullMode = forceCullMode;
    }
    if (ctx.forceAlphaWrite) {
      setAttachmentStateSimple(inst.getMegaStateFlags(), {
        channelWriteMask: GfxChannelWriteMask.RGBA
      });
    }
    ctx.opaqueInstList.submitRenderInst(inst);
  }
  destroy(device) {
    this.ddraw.destroy(device);
  }
};
var ModelInst = class {
  constructor(device, renderCache, modelData, textureCache) {
    this.modelData = modelData;
    if (modelData.meshList.kind === "A") {
      this.meshes = modelData.meshList.meshes.map(
        (meshData) => new MeshInst(device, renderCache, { kind: "A", mesh: meshData }, textureCache)
      );
    } else {
      this.meshes = modelData.meshList.meshes.map(
        (meshData) => new MeshInst(device, renderCache, { kind: "B", mesh: meshData }, textureCache)
      );
    }
  }
  meshes = [];
  forceCullMode = null;
  setMaterialHacks(hacks) {
    for (let i = 0; i < this.meshes.length; i++) {
      this.meshes[i].setMaterialHacks(hacks);
    }
  }
  setForceCullMode(cullMode) {
    this.forceCullMode = cullMode;
  }
  prepareToRender(ctx, renderParams) {
    const scale = scratchVec3a2;
    mat44.getScaling(scale, renderParams.viewFromModel);
    const maxScale = Math.max(scale[0], scale[1], scale[2]);
    const centerWorldSpace = scratchVec3a2;
    vec33.transformMat4(centerWorldSpace, this.modelData.boundSphereCenter, renderParams.viewFromModel);
    vec33.transformMat4(centerWorldSpace, centerWorldSpace, ctx.viewerInput.camera.worldMatrix);
    const mirrorPlaneNormal = ctx.mirrorPlaneNormal;
    const mirrorPlanePoint = ctx.mirrorPlanePoint;
    if (mirrorPlaneNormal && mirrorPlanePoint) {
      vec33.sub(scratchVec3b2, centerWorldSpace, mirrorPlanePoint);
      const dist = vec33.dot(scratchVec3b2, mirrorPlaneNormal);
      if (dist < -(this.modelData.boundSphereRadius * maxScale)) {
        return;
      }
    }
    for (let i = 0; i < this.meshes.length; i++) {
      this.meshes[i].prepareToRender(ctx, renderParams, this.forceCullMode);
    }
  }
  prepareToRenderCustom(ctx, renderParams, configureRenderInst) {
    const scale = scratchVec3a2;
    mat44.getScaling(scale, renderParams.viewFromModel);
    const maxScale = Math.max(scale[0], scale[1], scale[2]);
    const centerWorldSpace = scratchVec3a2;
    vec33.transformMat4(centerWorldSpace, this.modelData.boundSphereCenter, renderParams.viewFromModel);
    vec33.transformMat4(centerWorldSpace, centerWorldSpace, ctx.viewerInput.camera.worldMatrix);
    const mirrorPlaneNormal = ctx.mirrorPlaneNormal;
    const mirrorPlanePoint = ctx.mirrorPlanePoint;
    if (mirrorPlaneNormal && mirrorPlanePoint) {
      vec33.sub(scratchVec3b2, centerWorldSpace, mirrorPlanePoint);
      const dist = vec33.dot(scratchVec3b2, mirrorPlaneNormal);
      if (dist < -(this.modelData.boundSphereRadius * maxScale)) {
        return;
      }
    }
    for (let i = 0; i < this.meshes.length; i++) {
      this.meshes[i].prepareToRenderCustom(ctx, renderParams, this.forceCullMode, configureRenderInst);
    }
  }
  destroy(device) {
    for (let i = 0; i < this.meshes.length; i++) {
      this.meshes[i].destroy(device);
    }
  }
};
var DynamicModelInst = class {
  ddraws = [];
  material;
  kind;
  baseName;
  constructor(device, renderCache, modelData, textureCache, name = "dynamic-nl") {
    this.baseName = name;
    if (modelData.meshList.meshes.length === 0) {
      throw new Error("DynamicModelInst requires at least one mesh");
    }
    if (modelData.meshList.kind === "A") {
      this.material = new MaterialInst(device, renderCache, modelData.meshList.meshes[0], textureCache);
      this.kind = "A";
    } else {
      this.material = new MaterialInst(device, renderCache, modelData.meshList.meshes[0], textureCache);
      this.kind = "B";
    }
  }
  setMaterialHacks(hacks) {
    this.material.setMaterialHacks(hacks);
  }
  getDraw(index) {
    let ddraw = this.ddraws[index];
    if (ddraw) {
      return ddraw;
    }
    ddraw = new TDDraw(`${this.baseName}-${index}`);
    if (this.kind === "A") {
      ddraw.setVtxDesc(9 /* POS */, true);
      ddraw.setVtxDesc(11 /* CLR0 */, true);
      ddraw.setVtxDesc(13 /* TEX0 */, true);
    } else {
      ddraw.setVtxDesc(9 /* POS */, true);
      ddraw.setVtxDesc(10 /* NRM */, true);
      ddraw.setVtxDesc(13 /* TEX0 */, true);
    }
    this.ddraws[index] = ddraw;
    return ddraw;
  }
  draw(ctx, renderParams, build, instanceIndex = 0) {
    const drawParams = scratchDrawParams;
    mat44.copy(drawParams.u_PosMtx[0], renderParams.viewFromModel);
    const drawIndex = Math.max(0, instanceIndex | 0);
    const ddraw = this.getDraw(drawIndex);
    ddraw.beginDraw(ctx.renderInstManager.gfxRenderCache);
    build(ddraw, this.kind);
    ddraw.endDraw(ctx.renderInstManager);
    if (!ddraw.hasIndicesToDraw()) {
      return;
    }
    const inst = ctx.renderInstManager.newRenderInst();
    this.material.setOnRenderInst(ctx.device, ctx.renderInstManager.gfxRenderCache, inst, drawParams, renderParams);
    ddraw.setOnRenderInst(inst);
    ctx.opaqueInstList.submitRenderInst(inst);
  }
  destroy(device) {
    for (let i = 0; i < this.ddraws.length; i++) {
      this.ddraws[i]?.destroy(device);
    }
    this.ddraws.length = 0;
  }
};

// src/noclip/SuperMonkeyBall/AVLZ.ts
function decompressLZ(compressedBuf) {
  const view = compressedBuf.createDataView();
  const compressedView = compressedBuf.subarray(8).createDataView();
  const uncompressedSize = view.getUint32(4, true);
  const input = compressedBuf.copyToBuffer(0);
  const output = lzssDecompress(input);
  return new ArrayBufferSlice(output.buffer);
}

// src/math_lut.ts
var SIN_TABLE = new Float32Array([
  0,
  958738019107841e-19,
  191747603821568e-18,
  287621398456395e-18,
  383495178539306e-18,
  479368987726048e-18,
  575242738705128e-18,
  67111651878804e-17,
  766990298870951e-18,
  862864078953862e-18,
  958737859036773e-18,
  0.00105461163911968,
  0.00115048524457961,
  0.00124635908287019,
  0.00134223280474544,
  0.00143810652662069,
  0.00153398024849594,
  0.00162985385395586,
  0.00172572745941579,
  0.00182160118129104,
  0.00191747478675097,
  0.00201334850862622,
  0.00210922211408615,
  0.00220509548671544,
  0.00230096909217536,
  0.00239684269763529,
  0.00249271630309522,
  0.00258858967572451,
  0.00268446328118443,
  0.00278033665381372,
  0.002876210026443,
  0.00297208339907229,
  0.00306795677170157,
  0.00316383014433086,
  0.0032597032841295,
  0.00335557665675879,
  0.00345144979655743,
  0.00354732316918671,
  0.00364319630898535,
  0.00373906944878399,
  0.00383494258858263,
  0.00393081549555063,
  0.00402668863534927,
  0.00412256177514791,
  0.00421843491494656,
  0.00431430758908391,
  0.00441018072888255,
  0.00450605340301991,
  0.00460192607715726,
  0.00469779875129461,
  0.00479367142543197,
  0.00488954409956932,
  0.00498541677370667,
  0.00508128944784403,
  0.00517716212198138,
  0.00527303433045745,
  0.0053689070045948,
  0.00546477921307087,
  0.00556065188720822,
  0.00565652409568429,
  0.00575239630416036,
  0.00584826851263642,
  0.00594414072111249,
  0.00604001246392727,
  0.00613588467240334,
  0.00623175641521811,
  0.00632762862369418,
  0.00642350036650896,
  0.00651937210932374,
  0.00661524385213852,
  0.0067111155949533,
  0.00680698733776808,
  0.00690285861492157,
  0.00699873035773635,
  0.00709460163488984,
  0.00719047291204333,
  0.00728634418919683,
  0.00738221546635032,
  0.00747808674350381,
  0.00757395755499601,
  0.00766982883214951,
  0.00776569964364171,
  0.00786157045513391,
  0.00795744173228741,
  0.00805331207811832,
  0.00814918242394924,
  0.00824505370110273,
  0.00834092404693365,
  0.00843679439276457,
  0.00853266473859549,
  0.0086285350844264,
  0.00872440543025732,
  0.00882027484476566,
  0.00891614519059658,
  0.0090120155364275,
  0.00910788495093584,
  0.00920375436544418,
  0.0092996247112751,
  0.00939549412578344,
  0.00949136354029179,
  0.00958723295480013,
  0.00968310236930847,
  0.00977897178381681,
  0.00987484119832516,
  0.00997070968151093,
  0.0100665790960193,
  0.010162447579205,
  0.0102583169937134,
  0.0103541845455766,
  0.0104500539600849,
  0.0105459224432707,
  0.0106417909264565,
  0.0107376594096422,
  0.0108335269615054,
  0.0109293963760138,
  0.0110252639278769,
  0.0111211305484176,
  0.0112169990316033,
  0.0113128665834665,
  0.0114087350666523,
  0.0115046016871929,
  0.0116004701703787,
  0.0116963367909193,
  0.0117922043427825,
  0.0118880709633231,
  0.0119839375838637,
  0.0120798051357269,
  0.0121756717562675,
  0.0122715383768082,
  0.0123674049973488,
  0.0124632706865668,
  0.01255913823843,
  0.0126550039276481,
  0.0127508696168661,
  0.0128467362374067,
  0.0129426019266248,
  0.0130384666845202,
  0.0131343333050609,
  0.0132301980629563,
  0.0133260637521744,
  0.0134219294413924,
  0.0135177941992879,
  0.0136136589571834,
  0.0137095237150788,
  0.0138053894042969,
  0.0139012532308698,
  0.0139971179887652,
  0.0140929818153381,
  0.014188845641911,
  0.0142847103998065,
  0.0143805742263794,
  0.0144764380529523,
  0.0145723018795252,
  0.0146681647747755,
  0.0147640286013484,
  0.0148598924279213,
  0.0149557553231716,
  0.0150516182184219,
  0.0151474811136723,
  0.0152433440089226,
  0.0153392059728503,
  0.0154350688681006,
  0.0155309308320284,
  0.0156267937272787,
  0.0157226547598839,
  0.0158185176551342,
  0.0159143786877394,
  0.0160102397203445,
  0.0161061026155949,
  0.0162019636482,
  0.0162978246808052,
  0.0163936857134104,
  0.0164895467460155,
  0.0165854077786207,
  0.0166812669485807,
  0.0167771279811859,
  0.0168729871511459,
  0.0169688481837511,
  0.0170647073537111,
  0.0171605683863163,
  0.0172564275562763,
  0.0173522867262363,
  0.0174481458961964,
  0.0175440050661564,
  0.0176398642361164,
  0.0177357234060764,
  0.0178315825760365,
  0.0179274398833513,
  0.0180232971906662,
  0.0181191563606262,
  0.0182150136679411,
  0.0183108728379011,
  0.018406730145216,
  0.0185025874525309,
  0.0185984447598457,
  0.0186943020671606,
  0.0187901593744755,
  0.0188860166817904,
  0.0189818721264601,
  0.0190777294337749,
  0.0191735848784447,
  0.0192694403231144,
  0.0193652976304293,
  0.019461153075099,
  0.0195570085197687,
  0.0196528639644384,
  0.0197487194091082,
  0.0198445748537779,
  0.0199404284358025,
  0.0200362838804722,
  0.0201321374624968,
  0.0202279929071665,
  0.0203238464891911,
  0.0204197000712156,
  0.0205155536532402,
  0.0206114072352648,
  0.0207072608172894,
  0.0208031143993139,
  0.0208989661186934,
  0.0209948197007179,
  0.0210906714200974,
  0.0211865231394768,
  0.0212823767215014,
  0.0213782284408808,
  0.0214740801602602,
  0.0215699318796396,
  0.0216657835990191,
  0.0217616334557533,
  0.0218574851751328,
  0.0219533368945122,
  0.0220491867512465,
  0.0221450366079807,
  0.022240886464715,
  0.0223367363214493,
  0.0224325861781836,
  0.022528437897563,
  0.0226242858916521,
  0.0227201357483864,
  0.0228159837424755,
  0.0229118335992098,
  0.0230076815932989,
  0.023103529587388,
  0.0231993775814772,
  0.0232952255755663,
  0.0233910735696554,
  0.0234869215637445,
  0.0235827676951885,
  0.0236786156892776,
  0.0237744618207216,
  0.0238703098148108,
  0.0239661540836096,
  0.0240620002150536,
  0.0241578463464975,
  0.0242536924779415,
  0.0243495386093855,
  0.0244453828781843,
  0.0245412290096283,
  0.0246370732784271,
  0.024732917547226,
  0.0248287618160248,
  0.0249246060848236,
  0.0250204503536224,
  0.0251162946224213,
  0.0252121370285749,
  0.0253079812973738,
  0.0254038237035275,
  0.0254996661096811,
  0.0255955085158348,
  0.0256913509219885,
  0.0257871933281422,
  0.0258830357342958,
  0.0259788762778044,
  0.0260747186839581,
  0.0261705592274666,
  0.0262663997709751,
  0.0263622403144836,
  0.0264580808579922,
  0.0265539214015007,
  0.0266497600823641,
  0.0267456006258726,
  0.026841439306736,
  0.0269372798502445,
  0.0270331185311079,
  0.0271289553493261,
  0.0272247958928347,
  0.0273206327110529,
  0.0274164713919163,
  0.0275123082101345,
  0.0276081468909979,
  0.0277039837092161,
  0.0277998205274343,
  0.0278956554830074,
  0.0279914923012257,
  0.0280873291194439,
  0.028183164075017,
  0.0282790008932352,
  0.0283748358488083,
  0.0284706708043814,
  0.0285665057599545,
  0.0286623407155275,
  0.0287581738084555,
  0.0288540087640285,
  0.0289498418569565,
  0.0290456768125296,
  0.0291415099054575,
  0.0292373411357403,
  0.0293331742286682,
  0.0294290073215961,
  0.0295248385518789,
  0.0296206716448069,
  0.0297165028750896,
  0.0298123341053724,
  0.0299081653356552,
  0.030003996565938,
  0.0300998259335756,
  0.0301956553012133,
  0.030291486531496,
  0.0303873158991337,
  0.0304831452667713,
  0.030578974634409,
  0.0306748021394014,
  0.0307706315070391,
  0.0308664608746767,
  0.0309622883796692,
  0.0310581158846617,
  0.0311539433896542,
  0.0312497708946466,
  0.0313455983996391,
  0.0314414240419865,
  0.0315372496843338,
  0.0316330753266811,
  0.0317289009690285,
  0.0318247266113758,
  0.0319205522537231,
  0.0320163778960705,
  0.0321121998131275,
  0.0322080254554749,
  0.0323038473725319,
  0.0323996730148792,
  0.0324954949319363,
  0.0325913205742836,
  0.0326871424913406,
  0.0327829644083977,
  0.0328787863254547,
  0.0329746082425117,
  0.0330704301595688,
  0.0331662520766258,
  0.0332620702683926,
  0.0333578921854496,
  0.0334537141025066,
  0.0335495322942734,
  0.0336453504860401,
  0.0337411724030972,
  0.0338369905948639,
  0.0339328087866306,
  0.0340286269783974,
  0.0341244451701641,
  0.0342202633619308,
  0.0343160815536976,
  0.0344118997454643,
  0.0345077142119408,
  0.0346035324037075,
  0.0346993468701839,
  0.0347951650619507,
  0.0348909795284271,
  0.0349867939949036,
  0.03508260846138,
  0.0351784266531467,
  0.0352742373943329,
  0.0353700518608093,
  0.0354658663272858,
  0.0355616807937622,
  0.0356574915349483,
  0.0357533060014248,
  0.0358491167426109,
  0.0359449312090874,
  0.0360407419502735,
  0.0361365526914597,
  0.0362323634326458,
  0.0363281741738319,
  0.0364239849150181,
  0.0365197956562042,
  0.0366156063973904,
  0.0367114134132862,
  0.0368072241544724,
  0.0369030311703682,
  0.036998838186264,
  0.0370946489274502,
  0.037190455943346,
  0.0372862629592419,
  0.0373820699751377,
  0.0374778769910336,
  0.0375736840069294,
  0.0376694872975349,
  0.0377652943134308,
  0.0378610976040363,
  0.0379569046199322,
  0.0380527079105377,
  0.0381485112011433,
  0.0382443182170391,
  0.0383401215076447,
  0.0384359247982502,
  0.0385317243635654,
  0.038627527654171,
  0.0387233309447765,
  0.0388191305100918,
  0.0389149338006973,
  0.0390107333660126,
  0.0391065366566181,
  0.0392023362219334,
  0.0392981357872486,
  0.0393939353525639,
  0.0394897349178791,
  0.0395855344831944,
  0.0396813303232193,
  0.0397771298885345,
  0.0398729294538498,
  0.0399687252938747,
  0.0400645211338997,
  0.0401603206992149,
  0.0402561165392399,
  0.0403519123792648,
  0.0404477044939995,
  0.0405435003340244,
  0.0406392961740494,
  0.0407350920140743,
  0.040830884128809,
  0.0409266762435436,
  0.0410224720835686,
  0.0411182641983032,
  0.0412140563130379,
  0.0413098484277725,
  0.0414056405425072,
  0.0415014326572418,
  0.0415972247719765,
  0.0416930131614208,
  0.0417888052761555,
  0.0418845936655998,
  0.0419803857803345,
  0.0420761741697788,
  0.0421719625592232,
  0.0422677509486675,
  0.0423635393381119,
  0.0424593240022659,
  0.0425551123917103,
  0.0426509007811546,
  0.0427466854453087,
  0.0428424701094627,
  0.0429382584989071,
  0.0430340431630611,
  0.0431298278272152,
  0.0432256124913692,
  0.043321393430233,
  0.0434171780943871,
  0.0435129627585411,
  0.0436087436974049,
  0.0437045283615589,
  0.0438003093004227,
  0.0438960902392864,
  0.0439918711781502,
  0.0440876521170139,
  0.0441834330558777,
  0.0442792139947414,
  0.0443749912083149,
  0.0444707721471786,
  0.0445665493607521,
  0.0446623302996159,
  0.0447581075131893,
  0.0448538847267628,
  0.0449496619403362,
  0.0450454391539097,
  0.0451412126421928,
  0.0452369898557663,
  0.0453327670693398,
  0.0454285405576229,
  0.0455243140459061,
  0.0456200912594795,
  0.0457158647477627,
  0.0458116382360458,
  0.045907411724329,
  0.0460031814873219,
  0.046098954975605,
  0.0461947247385979,
  0.046290498226881,
  0.0463862679898739,
  0.0464820377528667,
  0.0465778075158596,
  0.0466735772788525,
  0.0467693470418453,
  0.0468651168048382,
  0.0469608828425407,
  0.0470566526055336,
  0.0471524186432362,
  0.0472481846809387,
  0.0473439507186413,
  0.0474397204816341,
  0.0475354827940464,
  0.047631248831749,
  0.0477270148694515,
  0.0478227771818638,
  0.0479185432195663,
  0.0480143055319786,
  0.0481100678443909,
  0.0482058301568031,
  0.0483015924692154,
  0.0483973547816277,
  0.0484931170940399,
  0.0485888756811619,
  0.0486846379935741,
  0.0487803965806961,
  0.0488761551678181,
  0.0489719174802303,
  0.049067672342062,
  0.049163430929184,
  0.0492591895163059,
  0.0493549481034279,
  0.0494507029652596,
  0.0495464615523815,
  0.0496422164142132,
  0.0497379712760448,
  0.0498337261378765,
  0.0499294809997082,
  0.0500252358615398,
  0.0501209869980812,
  0.0502167418599129,
  0.0503124929964542,
  0.0504082478582859,
  0.0505039989948273,
  0.0505997501313686,
  0.05069550126791,
  0.0507912486791611,
  0.0508869998157024,
  0.0509827472269535,
  0.0510784983634949,
  0.0511742457747459,
  0.051269993185997,
  0.0513657405972481,
  0.0514614880084991,
  0.0515572354197502,
  0.0516529828310013,
  0.0517487265169621,
  0.0518444702029228,
  0.0519402176141739,
  0.0520359613001347,
  0.0521317049860954,
  0.0522274486720562,
  0.052323192358017,
  0.0524189323186874,
  0.0525146760046482,
  0.0526104159653187,
  0.0527061559259892,
  0.0528018958866596,
  0.0528976358473301,
  0.0529933758080006,
  0.053089115768671,
  0.0531848520040512,
  0.0532805919647217,
  0.0533763282001019,
  0.053472064435482,
  0.0535678006708622,
  0.0536635369062424,
  0.0537592731416225,
  0.0538550093770027,
  0.0539507418870926,
  0.0540464743971825,
  0.0541422106325626,
  0.0542379431426525,
  0.0543336756527424,
  0.0544294081628323,
  0.0545251369476318,
  0.0546208694577217,
  0.0547165982425213,
  0.0548123307526112,
  0.0549080595374107,
  0.0550037883222103,
  0.0550995171070099,
  0.0551952421665192,
  0.0552909709513187,
  0.0553866997361183,
  0.0554824247956276,
  0.0555781498551369,
  0.0556738749146461,
  0.0557695999741554,
  0.0558653250336647,
  0.055961050093174,
  0.056056771427393,
  0.0561524964869022,
  0.0562482178211212,
  0.0563439391553402,
  0.0564396604895592,
  0.0565353818237782,
  0.0566310994327068,
  0.0567268207669258,
  0.0568225383758545,
  0.0569182597100735,
  0.0570139773190022,
  0.0571096949279308,
  0.0572054125368595,
  0.0573011264204979,
  0.0573968440294266,
  0.0574925616383553,
  0.0575882755219936,
  0.057683989405632,
  0.0577797032892704,
  0.0578754171729088,
  0.0579711273312569,
  0.0580668412148952,
  0.0581625513732433,
  0.0582582652568817,
  0.0583539754152298,
  0.0584496855735779,
  0.058545395731926,
  0.0586411021649837,
  0.0587368123233318,
  0.0588325224816799,
  0.0589282289147377,
  0.0590239353477955,
  0.0591196417808533,
  0.0592153482139111,
  0.0593110509216785,
  0.0594067573547363,
  0.0595024600625038,
  0.0595981664955616,
  0.0596938692033291,
  0.0597895719110966,
  0.0598852746188641,
  0.0599809736013412,
  0.0600766763091087,
  0.0601723752915859,
  0.0602680742740631,
  0.0603637732565403,
  0.0604594722390175,
  0.0605551712214947,
  0.0606508702039719,
  0.0607465654611588,
  0.0608422607183456,
  0.0609379597008228,
  0.0610336549580097,
  0.0611293464899063,
  0.0612250417470932,
  0.0613207370042801,
  0.0614164285361767,
  0.0615121237933636,
  0.0616078153252602,
  0.0617035068571568,
  0.061799194663763,
  0.0618948861956596,
  0.0619905777275562,
  0.0620862655341625,
  0.0621819533407688,
  0.0622776411473751,
  0.0623733289539814,
  0.0624690167605877,
  0.0625647008419037,
  0.06266038864851,
  0.0627560764551163,
  0.062851756811142,
  0.0629474446177483,
  0.063043124973774,
  0.0631388053297997,
  0.0632344931364059,
  0.0633301734924316,
  0.0634258538484573,
  0.063521534204483,
  0.0636172145605087,
  0.0637128949165344,
  0.0638085678219795,
  0.0639042481780052,
  0.0639999285340309,
  0.064095601439476,
  0.0641912817955017,
  0.0642869547009468,
  0.0643826276063919,
  0.0644783079624176,
  0.0645739808678627,
  0.0646696537733078,
  0.0647653266787529,
  0.064860999584198,
  0.0649566724896431,
  0.0650523379445076,
  0.0651480108499527,
  0.0652436837553978,
  0.0653393492102623,
  0.0654350221157074,
  0.0655306875705719,
  0.0656263530254364,
  0.0657220184803009,
  0.0658176839351654,
  0.0659133493900299,
  0.0660090148448944,
  0.0661046802997589,
  0.0662003457546234,
  0.0662960112094879,
  0.0663916692137718,
  0.0664873346686363,
  0.0665829926729202,
  0.0666786581277847,
  0.0667743161320686,
  0.0668699741363525,
  0.0669656321406364,
  0.0670612901449203,
  0.0671569481492043,
  0.0672526061534882,
  0.0673482641577721,
  0.067443922162056,
  0.0675395727157593,
  0.0676352307200432,
  0.0677308812737465,
  0.0678265392780304,
  0.0679221898317337,
  0.068017840385437,
  0.0681134909391403,
  0.0682091414928436,
  0.0683047920465469,
  0.0684004426002502,
  0.0684960931539536,
  0.0685917437076569,
  0.0686873868107796,
  0.0687830373644829,
  0.0688786804676056,
  0.0689743310213089,
  0.0690699741244316,
  0.0691656172275543,
  0.069261260330677,
  0.0693569034337997,
  0.0694525465369225,
  0.0695481896400452,
  0.0696438327431679,
  0.06973946839571,
  0.0698351114988327,
  0.0699307471513748,
  0.0700263902544975,
  0.0701220259070396,
  0.0702176615595818,
  0.0703133046627045,
  0.0704089403152466,
  0.0705045759677887,
  0.0706002116203308,
  0.0706958398222923,
  0.0707914754748344,
  0.0708871111273766,
  0.0709827393293381,
  0.0710783749818802,
  0.0711740031838417,
  0.0712696313858032,
  0.0713652670383453,
  0.0714608952403069,
  0.0715565234422684,
  0.0716521516442299,
  0.0717477723956108,
  0.0718434005975723,
  0.0719390287995338,
  0.0720346495509148,
  0.0721302777528763,
  0.0722258985042572,
  0.0723215267062187,
  0.0724171474575996,
  0.0725127682089806,
  0.0726083889603615,
  0.0727040097117424,
  0.0727996304631233,
  0.0728952512145042,
  0.0729908645153046,
  0.0730864852666855,
  0.0731820985674858,
  0.0732777193188667,
  0.0733733326196671,
  0.0734689459204674,
  0.0735645666718483,
  0.0736601799726486,
  0.0737557932734489,
  0.0738514065742493,
  0.073947012424469,
  0.0740426257252693,
  0.0741382390260696,
  0.0742338448762894,
  0.0743294507265091,
  0.0744250640273094,
  0.0745206698775291,
  0.0746162757277489,
  0.0747118815779686,
  0.0748074874281883,
  0.0749030932784081,
  0.0749986991286278,
  0.0750942975282669,
  0.0751899033784866,
  0.0752855092287064,
  0.0753811076283455,
  0.0754767060279846,
  0.0755723044276237,
  0.0756679102778435,
  0.0757635086774826,
  0.0758590996265411,
  0.0759546980261803,
  0.0760502964258194,
  0.0761458948254585,
  0.0762414857745171,
  0.0763370841741562,
  0.0764326751232147,
  0.0765282660722733,
  0.0766238644719124,
  0.0767194554209709,
  0.0768150463700294,
  0.076910637319088,
  0.0770062208175659,
  0.0771018117666245,
  0.077197402715683,
  0.0772929862141609,
  0.0773885771632195,
  0.0774841606616974,
  0.0775797441601753,
  0.0776753276586533,
  0.0777709111571312,
  0.0778664946556091,
  0.0779620781540871,
  0.078057661652565,
  0.0781532451510429,
  0.0782488211989403,
  0.0783444046974182,
  0.0784399807453156,
  0.0785355567932129,
  0.0786311328411102,
  0.0787267088890076,
  0.0788222849369049,
  0.0789178609848022,
  0.0790134370326996,
  0.0791090130805969,
  0.0792045816779137,
  0.079300157725811,
  0.0793957263231277,
  0.0794913023710251,
  0.0795868709683418,
  0.0796824395656586,
  0.0797780081629753,
  0.0798735767602921,
  0.0799691453576088,
  0.0800647065043449,
  0.0801602751016617,
  0.0802558362483978,
  0.0803514048457146,
  0.0804469659924507,
  0.0805425271391869,
  0.080638088285923,
  0.0807336494326591,
  0.0808292105793953,
  0.0809247717261314,
  0.0810203328728676,
  0.0811158865690231,
  0.0812114477157593,
  0.0813070014119148,
  0.081402562558651,
  0.0814981162548065,
  0.0815936699509621,
  0.0816892236471176,
  0.0817847773432732,
  0.0818803310394287,
  0.0819758772850037,
  0.0820714309811592,
  0.0821669846773148,
  0.0822625309228897,
  0.0823580771684647,
  0.0824536234140396,
  0.0825491696596146,
  0.0826447159051895,
  0.0827402621507645,
  0.0828358083963394,
  0.0829313546419144,
  0.0830268934369087,
  0.0831224396824837,
  0.083217978477478,
  0.083313524723053,
  0.0834090635180473,
  0.0835046023130417,
  0.083600141108036,
  0.0836956799030304,
  0.0837912112474442,
  0.0838867500424385,
  0.0839822888374329,
  0.0840778201818466,
  0.0841733515262604,
  0.0842688903212547,
  0.0843644216656685,
  0.0844599530100822,
  0.084555484354496,
  0.0846510156989098,
  0.0847465395927429,
  0.0848420709371567,
  0.0849375948309898,
  0.0850331261754036,
  0.0851286500692368,
  0.0852241739630699,
  0.0853196978569031,
  0.0854152217507362,
  0.0855107456445694,
  0.0856062695384026,
  0.0857017934322357,
  0.0857973098754883,
  0.0858928337693214,
  0.085988350212574,
  0.0860838666558266,
  0.0861793905496597,
  0.0862749069929123,
  0.0863704234361649,
  0.0864659324288368,
  0.0865614488720894,
  0.0866569653153419,
  0.0867524743080139,
  0.0868479833006859,
  0.0869434997439384,
  0.0870390087366104,
  0.0871345177292824,
  0.0872300267219543,
  0.0873255357146263,
  0.0874210447072983,
  0.0875165462493896,
  0.0876120552420616,
  0.087707556784153,
  0.087803065776825,
  0.0878985673189163,
  0.0879940688610077,
  0.0880895704030991,
  0.0881850719451904,
  0.0882805734872818,
  0.0883760675787926,
  0.0884715691208839,
  0.0885670632123947,
  0.0886625647544861,
  0.0887580588459969,
  0.0888535529375076,
  0.0889490470290184,
  0.0890445411205292,
  0.0891400352120399,
  0.0892355218529701,
  0.0893310159444809,
  0.0894265025854111,
  0.0895219966769218,
  0.089617483317852,
  0.0897129699587822,
  0.0898084565997124,
  0.0899039432406425,
  0.0899994298815727,
  0.0900949165225029,
  0.0901903957128525,
  0.0902858823537827,
  0.0903813615441322,
  0.0904768407344818,
  0.0905723199248314,
  0.090667799115181,
  0.0907632783055305,
  0.0908587574958801,
  0.0909542366862297,
  0.0910497084259987,
  0.0911451876163483,
  0.0912406593561172,
  0.0913361310958862,
  0.0914316028356552,
  0.0915270745754242,
  0.0916225463151932,
  0.0917180180549622,
  0.0918134897947311,
  0.0919089540839195,
  0.0920044258236885,
  0.0920998901128769,
  0.0921953544020653,
  0.0922908186912537,
  0.092386282980442,
  0.0924817472696304,
  0.0925772115588188,
  0.0926726758480072,
  0.092768132686615,
  0.0928635969758034,
  0.0929590538144112,
  0.093054510653019,
  0.0931499674916267,
  0.0932454243302345,
  0.0933408811688423,
  0.0934363380074501,
  0.0935317873954773,
  0.0936272442340851,
  0.0937226936221123,
  0.0938181430101395,
  0.0939135998487473,
  0.0940090492367744,
  0.0941044986248016,
  0.0941999405622482,
  0.0942953899502754,
  0.0943908393383026,
  0.0944862812757492,
  0.0945817232131958,
  0.094677172601223,
  0.0947726145386696,
  0.0948680564761162,
  0.0949634984135628,
  0.0950589329004288,
  0.0951543748378754,
  0.0952498093247414,
  0.095345251262188,
  0.095440685749054,
  0.09553612023592,
  0.0956315547227859,
  0.0957269892096519,
  0.0958224236965179,
  0.0959178581833839,
  0.0960132852196693,
  0.0961087197065353,
  0.0962041467428207,
  0.0962995737791061,
  0.0963950008153915,
  0.0964904278516769,
  0.0965858548879623,
  0.0966812819242477,
  0.0967767089605331,
  0.0968721285462379,
  0.0969675555825233,
  0.0970629751682281,
  0.097158394753933,
  0.0972538143396378,
  0.0973492339253426,
  0.0974446535110474,
  0.0975400656461716,
  0.0976354852318764,
  0.0977308973670006,
  0.0978263169527054,
  0.0979217290878296,
  0.0980171412229538,
  0.098112553358078,
  0.0982079654932022,
  0.0983033701777458,
  0.09839878231287,
  0.0984941869974136,
  0.0985895991325378,
  0.0986850038170815,
  0.0987804085016251,
  0.0988758131861687,
  0.0989712178707123,
  0.0990666225552559,
  0.0991620197892189,
  0.0992574244737625,
  0.0993528217077255,
  0.0994482189416885,
  0.0995436161756516,
  0.0996390134096146,
  0.0997344106435776,
  0.0998298078775406,
  0.0999252051115036,
  0.100020602345467,
  0.100115992128849,
  0.100211381912231,
  0.100306771695614,
  0.100402161478996,
  0.100497551262379,
  0.100592941045761,
  0.100688323378563,
  0.100783713161945,
  0.100879102945328,
  0.100974477827549,
  0.101069860160351,
  0.101165249943733,
  0.101260632276535,
  0.101356007158756,
  0.101451389491558,
  0.10154677182436,
  0.101642139256001,
  0.101737521588802,
  0.101832896471024,
  0.101928271353245,
  0.102023638784885,
  0.102119021117687,
  0.102214388549328,
  0.102309763431549,
  0.10240513086319,
  0.10250049829483,
  0.102595873177052,
  0.102691240608692,
  0.102786600589752,
  0.102881968021393,
  0.102977328002453,
  0.103072702884674,
  0.103168062865734,
  0.103263422846794,
  0.103358782827854,
  0.103454142808914,
  0.103549502789974,
  0.103644862771034,
  0.103740222752094,
  0.103835567831993,
  0.103930927813053,
  0.104026280343533,
  0.104121632874012,
  0.104216992855072,
  0.104312337934971,
  0.10440769046545,
  0.10450304299593,
  0.104598388075829,
  0.104693733155727,
  0.104789078235626,
  0.104884423315525,
  0.104979768395424,
  0.105075113475323,
  0.105170458555222,
  0.10526580363512,
  0.105361141264439,
  0.105456478893757,
  0.105551816523075,
  0.105647146701813,
  0.105742491781712,
  0.10583782941103,
  0.105933159589767,
  0.106028489768505,
  0.106123827397823,
  0.106219157576561,
  0.106314487755299,
  0.106409817934036,
  0.106505148112774,
  0.106600478291512,
  0.106695801019669,
  0.106791131198406,
  0.106886461377144,
  0.10698177665472,
  0.107077099382877,
  0.107172422111034,
  0.107267752289772,
  0.107363067567348,
  0.107458390295506,
  0.107553698122501,
  0.107649020850658,
  0.107744343578815,
  0.107839651405811,
  0.107934966683388,
  0.108030281960964,
  0.10812558978796,
  0.108220897614956,
  0.108316212892532,
  0.108411520719528,
  0.108506828546524,
  0.10860213637352,
  0.108697436749935,
  0.108792752027512,
  0.108888052403927,
  0.108983360230923,
  0.109078660607338,
  0.109173960983753,
  0.109269261360168,
  0.109364561736584,
  0.109459862112999,
  0.109555162489414,
  0.109650447964668,
  0.109745748341084,
  0.109841041266918,
  0.109936326742172,
  0.110031627118587,
  0.110126920044422,
  0.110222212970257,
  0.110317498445511,
  0.110412776470184,
  0.110508069396019,
  0.110603362321854,
  0.110698640346527,
  0.110793933272362,
  0.110889211297035,
  0.110984489321709,
  0.111079767346382,
  0.111175052821636,
  0.11127033084631,
  0.111365608870983,
  0.111460886895657,
  0.111556157469749,
  0.111651442945004,
  0.111746713519096,
  0.111841976642609,
  0.111937262117863,
  0.112032532691956,
  0.112127803266048,
  0.11222305893898,
  0.112318329513073,
  0.112413600087166,
  0.112508863210678,
  0.11260412633419,
  0.112699389457703,
  0.112794660031796,
  0.112889923155308,
  0.112985178828239,
  0.113080441951752,
  0.113175690174103,
  0.113270953297615,
  0.113366208970547,
  0.113461457192898,
  0.11355672031641,
  0.113651968538761,
  0.113747216761112,
  0.113842472434044,
  0.113937720656395,
  0.114032968878746,
  0.114128217101097,
  0.114223472774029,
  0.114318713545799,
  0.11441396176815,
  0.114509202539921,
  0.114604443311691,
  0.114699691534042,
  0.114794932305813,
  0.114890173077583,
  0.114985398948193,
  0.115080639719963,
  0.115175880491734,
  0.115271106362343,
  0.115366347134113,
  0.115461580455303,
  0.115556806325912,
  0.115652039647102,
  0.115747272968292,
  0.115842498838902,
  0.115937732160091,
  0.116032958030701,
  0.116128176450729,
  0.116223409771919,
  0.116318628191948,
  0.116413846611977,
  0.116509072482586,
  0.116604298353195,
  0.116699509322643,
  0.116794727742672,
  0.116889953613281,
  0.11698517203331,
  0.117080383002758,
  0.117175586521626,
  0.117270812392235,
  0.117366023361683,
  0.11746122688055,
  0.117556437849998,
  0.117651648819447,
  0.117746859788895,
  0.117842063307762,
  0.11793726682663,
  0.118032470345497,
  0.118127666413784,
  0.118222877383232,
  0.1183180809021,
  0.118413276970387,
  0.118508480489254,
  0.11860366910696,
  0.118698872625828,
  0.118794068694115,
  0.118889257311821,
  0.118984453380108,
  0.119079641997814,
  0.119174838066101,
  0.119270026683807,
  0.119365207850933,
  0.119460396468639,
  0.119555592536926,
  0.119650773704052,
  0.119745962321758,
  0.119841143488884,
  0.11993633210659,
  0.120031513273716,
  0.120126686990261,
  0.120221868157387,
  0.120317041873932,
  0.120412223041058,
  0.120507396757603,
  0.120602570474148,
  0.120697736740112,
  0.120792917907238,
  0.120888091623783,
  0.120983257889748,
  0.121078431606293,
  0.121173590421677,
  0.121268756687641,
  0.121363930404186,
  0.12145908921957,
  0.121554248034954,
  0.121649421751499,
  0.121744580566883,
  0.121839739382267,
  0.121934898197651,
  0.122030057013035,
  0.122125208377838,
  0.122220367193222,
  0.122315518558025,
  0.122410677373409,
  0.122505828738213,
  0.122600980103016,
  0.122696131467819,
  0.122791282832623,
  0.122886426746845,
  0.122981570661068,
  0.123076722025871,
  0.123171858489513,
  0.123267002403736,
  0.123362146317959,
  0.123457290232182,
  0.123552426695824,
  0.123647570610046,
  0.123742699623108,
  0.123837843537331,
  0.123932980000973,
  0.124028109014034,
  0.124123238027096,
  0.124218367040157,
  0.124313503503799,
  0.124408632516861,
  0.124503761529922,
  0.124598890542984,
  0.124694019556046,
  0.124789141118526,
  0.124884262681007,
  0.124979391694069,
  0.125074505805969,
  0.125169634819031,
  0.125264748930931,
  0.125359863042831,
  0.125454977154732,
  0.125550106167793,
  0.125645205378532,
  0.125740334391594,
  0.125835433602333,
  0.125930547714233,
  0.126025661826134,
  0.126120775938034,
  0.126215875148773,
  0.126310974359512,
  0.126406088471413,
  0.126501187682152,
  0.126596301794052,
  0.126691401004791,
  0.12678650021553,
  0.12688159942627,
  0.126976698637009,
  0.127071782946587,
  0.127166897058487,
  0.127261981368065,
  0.127357080578804,
  0.127452164888382,
  0.127547264099121,
  0.127642348408699,
  0.127737432718277,
  0.127832531929016,
  0.127927616238594,
  0.128022700548172,
  0.12811778485775,
  0.128212869167328,
  0.128307953476906,
  0.128403022885323,
  0.128498107194901,
  0.128593191504478,
  0.128688275814056,
  0.128783345222473,
  0.12887841463089,
  0.128973484039307,
  0.129068553447723,
  0.12916362285614,
  0.129258707165718,
  0.129353776574135,
  0.129448845982552,
  0.129543915390968,
  0.129638969898224,
  0.129734039306641,
  0.129829093813896,
  0.129924163222313,
  0.130019217729568,
  0.130114287137985,
  0.130209341645241,
  0.130304396152496,
  0.130399450659752,
  0.130494505167007,
  0.130589559674263,
  0.130684614181519,
  0.130779653787613,
  0.130874708294868,
  0.130969762802124,
  0.13106481730938,
  0.131159856915474,
  0.131254896521568,
  0.131349936127663,
  0.131444990634918,
  0.131540030241013,
  0.131635069847107,
  0.131730109453201,
  0.131825149059296,
  0.131920173764229,
  0.132015213370323,
  0.132110252976418,
  0.132205277681351,
  0.132300317287445,
  0.132395356893539,
  0.132490381598473,
  0.132585406303406,
  0.132680431008339,
  0.132775455713272,
  0.132870480418205,
  0.132965505123138,
  0.133060529828072,
  0.133155554533005,
  0.133250564336777,
  0.133345574140549,
  0.133440598845482,
  0.133535623550415,
  0.133630633354187,
  0.133725643157959,
  0.133820652961731,
  0.133915662765503,
  0.134010672569275,
  0.134105697274208,
  0.134200692176819,
  0.134295701980591,
  0.134390696883202,
  0.134485706686974,
  0.134580716490746,
  0.134675711393356,
  0.134770706295967,
  0.134865716099739,
  0.13496071100235,
  0.135055705904961,
  0.135150700807571,
  0.135245695710182,
  0.135340675711632,
  0.135435670614243,
  0.135530665516853,
  0.135625645518303,
  0.135720640420914,
  0.135815620422363,
  0.135910615324974,
  0.136005595326424,
  0.136100575327873,
  0.136195555329323,
  0.136290535330772,
  0.136385515332222,
  0.136480495333672,
  0.136575475335121,
  0.13667044043541,
  0.136765420436859,
  0.136860385537148,
  0.136955365538597,
  0.137050330638885,
  0.137145295739174,
  0.137240275740623,
  0.137335225939751,
  0.1374302059412,
  0.137525156140327,
  0.137620121240616,
  0.137715086340904,
  0.137810036540031,
  0.13790500164032,
  0.137999966740608,
  0.138094916939735,
  0.138189867138863,
  0.13828481733799,
  0.138379767537117,
  0.138474717736244,
  0.138569667935371,
  0.138664618134499,
  0.138759568333626,
  0.138854503631592,
  0.138949453830719,
  0.139044404029846,
  0.139139339327812,
  0.139234274625778,
  0.139329224824905,
  0.139424160122871,
  0.139519095420837,
  0.139614030718803,
  0.139708966016769,
  0.139803901314735,
  0.139898836612701,
  0.139993757009506,
  0.140088692307472,
  0.140183612704277,
  0.140278548002243,
  0.140373468399048,
  0.140468403697014,
  0.140563324093819,
  0.140658244490623,
  0.140753164887428,
  0.140848085284233,
  0.140943005681038,
  0.141037911176682,
  0.141132831573486,
  0.14122773706913,
  0.141322642564774,
  0.141417562961578,
  0.141512468457222,
  0.141607373952866,
  0.14170229434967,
  0.141797184944153,
  0.141892105340958,
  0.14198699593544,
  0.142081901431084,
  0.142176806926727,
  0.14227169752121,
  0.142366603016853,
  0.142461493611336,
  0.142556384205818,
  0.142651289701462,
  0.142746180295944,
  0.142841070890427,
  0.142935961484909,
  0.143030852079391,
  0.143125742673874,
  0.143220618367195,
  0.143315508961678,
  0.143410384654999,
  0.143505275249481,
  0.143600150942802,
  0.143695026636124,
  0.143789917230606,
  0.143884792923927,
  0.143979653716087,
  0.14407454431057,
  0.14416940510273,
  0.144264280796051,
  0.144359156489372,
  0.144454017281532,
  0.144548892974854,
  0.144643753767014,
  0.144738614559174,
  0.144833475351334,
  0.144928351044655,
  0.145023211836815,
  0.145118072628975,
  0.145212918519974,
  0.145307779312134,
  0.145402640104294,
  0.145497485995293,
  0.145592346787453,
  0.145687192678452,
  0.145782053470612,
  0.145876884460449,
  0.145971745252609,
  0.146066591143608,
  0.146161437034607,
  0.146256282925606,
  0.146351113915443,
  0.146445959806442,
  0.146540805697441,
  0.146635636687279,
  0.146730467677116,
  0.146825313568115,
  0.146920144557953,
  0.147014975547791,
  0.147109806537628,
  0.147204637527466,
  0.147299468517303,
  0.14739428460598,
  0.147489115595818,
  0.147583946585655,
  0.147678762674332,
  0.147773593664169,
  0.147868409752846,
  0.147963225841522,
  0.14805805683136,
  0.148152858018875,
  0.148247674107552,
  0.148342490196228,
  0.148437306284904,
  0.148532122373581,
  0.148626923561096,
  0.148721724748611,
  0.148816540837288,
  0.148911356925964,
  0.149006143212318,
  0.149100944399834,
  0.149195745587349,
  0.149290546774864,
  0.149385347962379,
  0.149480149149895,
  0.14957495033741,
  0.149669736623764,
  0.149764522910118,
  0.149859324097633,
  0.149954125285149,
  0.150048911571503,
  0.150143682956696,
  0.150238484144211,
  0.150333255529404,
  0.150428056716919,
  0.150522828102112,
  0.150617614388466,
  0.150712385773659,
  0.150807172060013,
  0.150901943445206,
  0.150996714830399,
  0.151091486215591,
  0.151186272501945,
  0.151281043887138,
  0.151375815272331,
  0.151470586657524,
  0.151565343141556,
  0.151660114526749,
  0.15175487101078,
  0.151849642395973,
  0.151944398880005,
  0.152039155364037,
  0.152133911848068,
  0.1522286683321,
  0.152323424816132,
  0.152418181300163,
  0.152512922883034,
  0.152607694268227,
  0.152702435851097,
  0.152797192335129,
  0.152891933917999,
  0.15298667550087,
  0.15308141708374,
  0.153176173567772,
  0.153270915150642,
  0.153365656733513,
  0.153460383415222,
  0.153555124998093,
  0.153649866580963,
  0.153744593262672,
  0.153839334845543,
  0.153934061527252,
  0.154028788208961,
  0.154123514890671,
  0.154218256473541,
  0.154312968254089,
  0.154407694935799,
  0.154502421617508,
  0.154597133398056,
  0.154691860079765,
  0.154786586761475,
  0.154881298542023,
  0.154976025223732,
  0.15507073700428,
  0.155165433883667,
  0.155260160565376,
  0.155354872345924,
  0.155449584126472,
  0.155544281005859,
  0.155638992786407,
  0.155733689665794,
  0.155828401446342,
  0.155923098325729,
  0.156017795205116,
  0.156112506985664,
  0.156207203865051,
  0.156301885843277,
  0.156396582722664,
  0.156491279602051,
  0.156585976481438,
  0.156680658459663,
  0.15677535533905,
  0.156870037317276,
  0.156964734196663,
  0.157059416174889,
  0.157154083251953,
  0.15724878013134,
  0.157343462109566,
  0.15743812918663,
  0.157532811164856,
  0.157627493143082,
  0.157722160220146,
  0.157816842198372,
  0.157911509275436,
  0.158006176352501,
  0.158100843429565,
  0.15819551050663,
  0.158290177583694,
  0.158384844660759,
  0.158479511737823,
  0.158574163913727,
  0.158668830990791,
  0.158763483166695,
  0.158858135342598,
  0.158952802419662,
  0.159047454595566,
  0.159142106771469,
  0.159236758947372,
  0.159331411123276,
  0.159426063299179,
  0.159520700573921,
  0.159615352749825,
  0.159709990024567,
  0.159804627299309,
  0.159899264574051,
  0.159993916749954,
  0.160088554024696,
  0.160183191299438,
  0.160277813673019,
  0.160372465848923,
  0.160467088222504,
  0.160561725497246,
  0.160656347870827,
  0.160750985145569,
  0.160845592617989,
  0.160940229892731,
  0.161034852266312,
  0.161129474639893,
  0.161224097013474,
  0.161318704485893,
  0.161413326859474,
  0.161507949233055,
  0.161602556705475,
  0.161697164177895,
  0.161791786551476,
  0.161886394023895,
  0.161981001496315,
  0.162075608968735,
  0.162170216441154,
  0.162264823913574,
  0.162359416484833,
  0.162454023957253,
  0.162548616528511,
  0.162643224000931,
  0.162737816572189,
  0.162832409143448,
  0.162927001714706,
  0.163021594285965,
  0.163116186857224,
  0.163210779428482,
  0.163305357098579,
  0.163399949669838,
  0.163494527339935,
  0.163589119911194,
  0.163683697581291,
  0.163778275251389,
  0.163872852921486,
  0.163967430591583,
  0.164062008261681,
  0.164156585931778,
  0.164251163601875,
  0.164345726370811,
  0.164440304040909,
  0.164534866809845,
  0.164629429578781,
  0.164724007248878,
  0.164818555116653,
  0.16491311788559,
  0.165007680654526,
  0.165102243423462,
  0.165196806192398,
  0.165291354060173,
  0.165385916829109,
  0.165480464696884,
  0.165575012564659,
  0.165669560432434,
  0.165764108300209,
  0.165858656167984,
  0.165953204035759,
  0.166047737002373,
  0.166142284870148,
  0.166236832737923,
  0.166331365704536,
  0.16642589867115,
  0.166520446538925,
  0.166614964604378,
  0.166709512472153,
  0.166804045438766,
  0.166898563504219,
  0.166993096470833,
  0.167087614536285,
  0.167182147502899,
  0.167276665568352,
  0.167371183633804,
  0.167465716600418,
  0.167560234665871,
  0.167654752731323,
  0.167749270796776,
  0.167843773961067,
  0.16793829202652,
  0.168032810091972,
  0.168127313256264,
  0.168221816420555,
  0.168316334486008,
  0.168410837650299,
  0.16850534081459,
  0.168599843978882,
  0.168694347143173,
  0.168788835406303,
  0.168883338570595,
  0.168977841734886,
  0.169072329998016,
  0.169166818261147,
  0.169261306524277,
  0.169355794787407,
  0.169450283050537,
  0.169544786214828,
  0.169639259576797,
  0.169733747839928,
  0.169828236103058,
  0.169922709465027,
  0.170017182826996,
  0.170111656188965,
  0.170206144452095,
  0.170300602912903,
  0.170395091176033,
  0.170489564538002,
  0.17058402299881,
  0.170678496360779,
  0.170772954821587,
  0.170867428183556,
  0.170961886644363,
  0.171056345105171,
  0.171150803565979,
  0.171245276927948,
  0.171339735388756,
  0.171434178948402,
  0.17152863740921,
  0.171623095870018,
  0.171717539429665,
  0.171811982989311,
  0.171906426548958,
  0.172000885009766,
  0.172095313668251,
  0.172189772129059,
  0.172284215688705,
  0.172378644347191,
  0.172473073005676,
  0.172567516565323,
  0.172661945223808,
  0.172756388783455,
  0.17285081744194,
  0.172945246100426,
  0.173039674758911,
  0.173134103417397,
  0.173228532075882,
  0.173322945833206,
  0.173417374491692,
  0.173511803150177,
  0.173606216907501,
  0.173700630664825,
  0.17379504442215,
  0.173889458179474,
  0.173983871936798,
  0.174078285694122,
  0.174172684550285,
  0.17426709830761,
  0.174361512064934,
  0.174455910921097,
  0.17455030977726,
  0.174644723534584,
  0.174739107489586,
  0.174833506345749,
  0.174927905201912,
  0.175022304058075,
  0.175116702914238,
  0.17521108686924,
  0.175305485725403,
  0.175399869680405,
  0.175494253635406,
  0.175588637590408,
  0.17568302154541,
  0.175777405500412,
  0.175871774554253,
  0.175966158509254,
  0.176060542464256,
  0.176154911518097,
  0.176249295473099,
  0.176343664526939,
  0.17643803358078,
  0.176532402634621,
  0.176626771688461,
  0.176721125841141,
  0.176815494894981,
  0.176909863948822,
  0.177004218101501,
  0.177098587155342,
  0.177192941308022,
  0.177287295460701,
  0.17738164961338,
  0.17747600376606,
  0.177570343017578,
  0.177664697170258,
  0.177759051322937,
  0.177853390574455,
  0.177947744727135,
  0.178042083978653,
  0.178136423230171,
  0.178230762481689,
  0.178325101733208,
  0.178419440984726,
  0.178513765335083,
  0.178608104586601,
  0.17870244383812,
  0.178796768188477,
  0.178891092538834,
  0.178985416889191,
  0.179079741239548,
  0.179174065589905,
  0.179268389940262,
  0.179362714290619,
  0.179457023739815,
  0.179551333189011,
  0.179645657539368,
  0.179739966988564,
  0.179834276437759,
  0.179928585886955,
  0.180022895336151,
  0.180117204785347,
  0.180211514234543,
  0.180305823683739,
  0.180400118231773,
  0.180494412779808,
  0.180588722229004,
  0.180683016777039,
  0.180777311325073,
  0.180871605873108,
  0.180965885519981,
  0.181060180068016,
  0.181154474616051,
  0.181248754262924,
  0.181343033909798,
  0.181437328457832,
  0.181531608104706,
  0.181625887751579,
  0.181720167398453,
  0.181814447045326,
  0.1819087266922,
  0.182002991437912,
  0.182097256183624,
  0.182191535830498,
  0.18228580057621,
  0.182380065321922,
  0.182474330067635,
  0.182568594813347,
  0.182662859559059,
  0.182757124304771,
  0.182851374149323,
  0.182945623993874,
  0.183039888739586,
  0.183134138584137,
  0.183228388428688,
  0.183322638273239,
  0.18341688811779,
  0.183511137962341,
  0.183605372905731,
  0.183699622750282,
  0.183793872594833,
  0.183888107538223,
  0.183982342481613,
  0.184076577425003,
  0.184170827269554,
  0.184265047311783,
  0.184359282255173,
  0.184453517198563,
  0.184547737240791,
  0.18464195728302,
  0.18473619222641,
  0.184830412268639,
  0.184924632310867,
  0.185018852353096,
  0.185113072395325,
  0.185207277536392,
  0.185301497578621,
  0.185395702719688,
  0.185489922761917,
  0.185584127902985,
  0.185678333044052,
  0.18577253818512,
  0.185866743326187,
  0.185960948467255,
  0.186055153608322,
  0.186149343848228,
  0.186243548989296,
  0.186337739229202,
  0.18643194437027,
  0.186526134610176,
  0.186620324850082,
  0.186714515089989,
  0.186808705329895,
  0.18690288066864,
  0.186997056007385,
  0.187091246247292,
  0.187185436487198,
  0.187279596924782,
  0.187373787164688,
  0.187467962503433,
  0.187562122941017,
  0.187656298279762,
  0.187750473618507,
  0.187844634056091,
  0.187938794493675,
  0.18803296983242,
  0.188127130270004,
  0.188221290707588,
  0.188315451145172,
  0.188409611582756,
  0.18850377202034,
  0.188597917556763,
  0.188692063093185,
  0.188786223530769,
  0.188880369067192,
  0.188974514603615,
  0.189068660140038,
  0.18916280567646,
  0.189256951212883,
  0.189351096749306,
  0.189445227384567,
  0.18953937292099,
  0.189633503556252,
  0.189727634191513,
  0.189821764826775,
  0.189915895462036,
  0.190010026097298,
  0.190104156732559,
  0.19019827246666,
  0.190292403101921,
  0.190386518836021,
  0.190480634570122,
  0.190574750304222,
  0.190668866038322,
  0.190762981772423,
  0.190857097506523,
  0.190951213240623,
  0.191045314073563,
  0.191139414906502,
  0.191233530640602,
  0.191327631473541,
  0.19142173230648,
  0.19151583313942,
  0.191609933972359,
  0.191704034805298,
  0.191798120737076,
  0.191892221570015,
  0.191986307501793,
  0.192080393433571,
  0.192174479365349,
  0.192268565297127,
  0.192362651228905,
  0.192456737160683,
  0.192550823092461,
  0.192644894123077,
  0.192738965153694,
  0.192833051085472,
  0.192927122116089,
  0.193021193146706,
  0.193115264177322,
  0.193209335207939,
  0.193303406238556,
  0.193397462368011,
  0.193491533398628,
  0.193585589528084,
  0.193679645657539,
  0.193773701786995,
  0.193867757916451,
  0.193961814045906,
  0.194055870175362,
  0.194149926304817,
  0.19424395263195,
  0.194338008761406,
  0.194432064890862,
  0.194526106119156,
  0.19462014734745,
  0.194714173674583,
  0.194808214902878,
  0.194902256131172,
  0.194996297359467,
  0.1950903236866,
  0.195184350013733,
  0.195278376340866,
  0.195372402667999,
  0.195466428995132,
  0.195560455322266,
  0.195654481649399,
  0.195748493075371,
  0.195842519402504,
  0.195936530828476,
  0.196030557155609,
  0.19612455368042,
  0.196218565106392,
  0.196312576532364,
  0.196406587958336,
  0.196500584483147,
  0.196594595909119,
  0.196688607335091,
  0.196782603859901,
  0.196876600384712,
  0.196970596909523,
  0.197064593434334,
  0.197158575057983,
  0.197252571582794,
  0.197346553206444,
  0.197440549731255,
  0.197534546256065,
  0.197628512978554,
  0.197722494602203,
  0.197816476225853,
  0.197910457849503,
  0.198004439473152,
  0.198098406195641,
  0.198192372918129,
  0.198286354541779,
  0.198380321264267,
  0.198474287986755,
  0.198568254709244,
  0.198662221431732,
  0.198756173253059,
  0.198850139975548,
  0.198944106698036,
  0.199038058519363,
  0.199132010340691,
  0.199225962162018,
  0.199319913983345,
  0.199413865804672,
  0.199507802724838,
  0.199601754546165,
  0.199695706367493,
  0.199789643287659,
  0.199883580207825,
  0.199977517127991,
  0.200071454048157,
  0.200165390968323,
  0.200259312987328,
  0.200353264808655,
  0.20044718682766,
  0.200541108846664,
  0.20063504576683,
  0.200728952884674,
  0.200822874903679,
  0.200916796922684,
  0.201010718941689,
  0.201104626059532,
  0.201198548078537,
  0.201292455196381,
  0.201386377215385,
  0.201480284333229,
  0.201574191451073,
  0.201668083667755,
  0.20176200568676,
  0.201855897903442,
  0.201949805021286,
  0.202043697237968,
  0.202137589454651,
  0.202231481671333,
  0.202325373888016,
  0.202419266104698,
  0.202513143420219,
  0.202607035636902,
  0.202700912952423,
  0.202794805169106,
  0.202888697385788,
  0.202982574701309,
  0.203076437115669,
  0.20317031443119,
  0.203264191746712,
  0.203358054161072,
  0.203451931476593,
  0.203545793890953,
  0.203639671206474,
  0.203733533620834,
  0.203827396035194,
  0.203921243548393,
  0.204015105962753,
  0.204108968377113,
  0.204202815890312,
  0.204296663403511,
  0.204390525817871,
  0.20448437333107,
  0.204578220844269,
  0.204672068357468,
  0.204765915870667,
  0.204859748482704,
  0.204953595995903,
  0.205047428607941,
  0.205141261219978,
  0.205235093832016,
  0.205328926444054,
  0.205422759056091,
  0.205516591668129,
  0.205610409379005,
  0.205704241991043,
  0.20579805970192,
  0.205891877412796,
  0.205985695123672,
  0.206079512834549,
  0.206173330545425,
  0.206267133355141,
  0.206360965967178,
  0.206454753875732,
  0.206548571586609,
  0.206642374396324,
  0.206736177206039,
  0.206829980015755,
  0.20692378282547,
  0.207017585635185,
  0.207111373543739,
  0.207205176353455,
  0.207298964262009,
  0.207392752170563,
  0.207486540079117,
  0.207580327987671,
  0.207674115896225,
  0.207767888903618,
  0.207861676812172,
  0.207955449819565,
  0.208049222826958,
  0.208143010735512,
  0.208236783742905,
  0.208330556750298,
  0.208424314856529,
  0.208518087863922,
  0.208611845970154,
  0.208705618977547,
  0.208799377083778,
  0.20889313519001,
  0.208986893296242,
  0.209080651402473,
  0.209174394607544,
  0.209268152713776,
  0.209361910820007,
  0.209455654025078,
  0.209549397230148,
  0.209643140435219,
  0.209736883640289,
  0.20983062684536,
  0.20992437005043,
  0.21001809835434,
  0.21011184155941,
  0.210205569863319,
  0.210299298167229,
  0.210393026471138,
  0.210486754775047,
  0.210580483078957,
  0.210674196481705,
  0.210767924785614,
  0.210861638188362,
  0.210955366492271,
  0.21104907989502,
  0.211142793297768,
  0.211236506700516,
  0.211330205202103,
  0.211423918604851,
  0.211517617106438,
  0.211611330509186,
  0.211705029010773,
  0.21179872751236,
  0.211892426013947,
  0.211986124515533,
  0.21207982301712,
  0.212173506617546,
  0.212267205119133,
  0.212360888719559,
  0.212454572319984,
  0.21254825592041,
  0.212641939520836,
  0.212735623121262,
  0.212829306721687,
  0.212922975420952,
  0.213016644120216,
  0.213110312819481,
  0.213203996419907,
  0.213297665119171,
  0.213391333818436,
  0.213484987616539,
  0.213578656315804,
  0.213672310113907,
  0.21376596391201,
  0.213859632611275,
  0.213953286409378,
  0.214046940207481,
  0.214140594005585,
  0.214234232902527,
  0.21432788670063,
  0.214421525597572,
  0.214515164494514,
  0.214608803391457,
  0.21470245718956,
  0.214796096086502,
  0.214889720082283,
  0.214983344078064,
  0.215076982975006,
  0.215170621871948,
  0.215264245867729,
  0.21535786986351,
  0.215451493859291,
  0.215545102953911,
  0.215638726949692,
  0.215732350945473,
  0.215825960040092,
  0.215919584035873,
  0.216013193130493,
  0.216106802225113,
  0.216200396418571,
  0.216294005513191,
  0.216387614607811,
  0.21648120880127,
  0.216574802994728,
  0.216668412089348,
  0.216762006282806,
  0.216855600476265,
  0.216949194669724,
  0.217042773962021,
  0.217136368155479,
  0.217229947447777,
  0.217323541641235,
  0.217417120933533,
  0.21751070022583,
  0.217604264616966,
  0.217697843909264,
  0.217791423201561,
  0.217884987592697,
  0.217978566884995,
  0.218072131276131,
  0.218165695667267,
  0.218259260058403,
  0.218352824449539,
  0.218446373939514,
  0.21853993833065,
  0.218633487820625,
  0.218727052211761,
  0.218820601701736,
  0.218914151191711,
  0.219007685780525,
  0.2191012352705,
  0.219194784760475,
  0.219288319349289,
  0.219381853938103,
  0.219475403428078,
  0.219568938016891,
  0.219662472605705,
  0.219756007194519,
  0.219849526882172,
  0.219943061470985,
  0.220036581158638,
  0.220130115747452,
  0.220223635435104,
  0.220317155122757,
  0.220410659909248,
  0.220504179596901,
  0.220597684383392,
  0.220691204071045,
  0.220784708857536,
  0.220878213644028,
  0.220971718430519,
  0.22106522321701,
  0.221158728003502,
  0.221252217888832,
  0.221345722675323,
  0.221439212560654,
  0.221532717347145,
  0.221626207232475,
  0.221719697117805,
  0.221813172101974,
  0.221906661987305,
  0.222000136971474,
  0.222093626856804,
  0.222187101840973,
  0.222280576825142,
  0.222374051809311,
  0.22246752679348,
  0.222560986876488,
  0.222654461860657,
  0.222747936844826,
  0.222841396927834,
  0.222934857010841,
  0.223028317093849,
  0.223121777176857,
  0.223215237259865,
  0.223308682441711,
  0.223402127623558,
  0.223495572805405,
  0.223589032888412,
  0.223682463169098,
  0.223775923252106,
  0.223869353532791,
  0.223962798714638,
  0.224056243896484,
  0.22414967417717,
  0.224243104457855,
  0.224336534738541,
  0.224429965019226,
  0.224523395299911,
  0.224616825580597,
  0.224710240960121,
  0.224803656339645,
  0.224897086620331,
  0.224990501999855,
  0.225083917379379,
  0.225177317857742,
  0.225270733237267,
  0.22536413371563,
  0.225457549095154,
  0.225550949573517,
  0.225644364953041,
  0.225737765431404,
  0.225831151008606,
  0.225924551486969,
  0.226017937064171,
  0.226111337542534,
  0.226204723119736,
  0.226298108696938,
  0.226391494274139,
  0.226484879851341,
  0.226578265428543,
  0.226671636104584,
  0.226765021681786,
  0.226858407258987,
  0.226951763033867,
  0.227045133709908,
  0.227138504385948,
  0.227231875061989,
  0.227325245738029,
  0.227418601512909,
  0.227511957287788,
  0.227605313062668,
  0.227698683738708,
  0.227792024612427,
  0.227885395288467,
  0.227978736162186,
  0.228072077035904,
  0.228165432810783,
  0.228258773684502,
  0.22835211455822,
  0.228445455431938,
  0.228538796305656,
  0.228632137179375,
  0.228725463151932,
  0.228818789124489,
  0.228912115097046,
  0.229005455970764,
  0.22909876704216,
  0.229192093014717,
  0.229285418987274,
  0.22937873005867,
  0.229472056031227,
  0.229565367102623,
  0.229658678174019,
  0.229751989245415,
  0.229845300316811,
  0.229938596487045,
  0.230031907558441,
  0.230125203728676,
  0.230218514800072,
  0.230311796069145,
  0.230405107140541,
  0.230498388409615,
  0.230591684579849,
  0.230684965848923,
  0.230778262019157,
  0.230871543288231,
  0.230964824557304,
  0.231058105826378,
  0.231151387095451,
  0.231244653463364,
  0.231337934732437,
  0.231431216001511,
  0.231524482369423,
  0.231617748737335,
  0.231711015105247,
  0.23180428147316,
  0.231897532939911,
  0.231990799307823,
  0.232084050774574,
  0.232177317142487,
  0.232270553708076,
  0.232363805174828,
  0.232457056641579,
  0.23255030810833,
  0.23264354467392,
  0.232736796140671,
  0.232830032706261,
  0.232923269271851,
  0.23301650583744,
  0.23310974240303,
  0.233202964067459,
  0.233296200633049,
  0.233389437198639,
  0.233482643961906,
  0.233575880527496,
  0.233669102191925,
  0.233762323856354,
  0.233855530619621,
  0.23394875228405,
  0.234041959047318,
  0.234135165810585,
  0.234228372573853,
  0.23432157933712,
  0.234414786100388,
  0.234507992863655,
  0.234601184725761,
  0.234694376587868,
  0.234787583351135,
  0.234880775213242,
  0.234973967075348,
  0.235067144036293,
  0.235160335898399,
  0.235253512859344,
  0.235346704721451,
  0.235439881682396,
  0.235533058643341,
  0.235626235604286,
  0.235719412565231,
  0.235812574625015,
  0.23590575158596,
  0.235998913645744,
  0.236092075705528,
  0.236185237765312,
  0.236278399825096,
  0.23637156188488,
  0.236464723944664,
  0.236557871103287,
  0.236651018261909,
  0.236744165420532,
  0.236837312579155,
  0.236930459737778,
  0.2370236068964,
  0.237116754055023,
  0.237209886312485,
  0.237303018569946,
  0.237396165728569,
  0.237489283084869,
  0.237582415342331,
  0.237675532698631,
  0.237768664956093,
  0.237861797213554,
  0.237954914569855,
  0.238048031926155,
  0.238141149282455,
  0.238234266638756,
  0.238327383995056,
  0.238420486450195,
  0.238513588905334,
  0.238606706261635,
  0.238699793815613,
  0.238792911171913,
  0.238885998725891,
  0.23897910118103,
  0.239072203636169,
  0.239165291190147,
  0.239258378744125,
  0.239351466298103,
  0.239444553852081,
  0.239537641406059,
  0.239630714058876,
  0.239723801612854,
  0.239816874265671,
  0.239909946918488,
  0.240003019571304,
  0.240096092224121,
  0.240189164876938,
  0.240282222628593,
  0.24037529528141,
  0.240468353033066,
  0.240561410784721,
  0.240654468536377,
  0.240747526288033,
  0.240840584039688,
  0.240933626890182,
  0.241026684641838,
  0.241119712591171,
  0.241212770342827,
  0.241305813193321,
  0.241398856043816,
  0.241491883993149,
  0.241584926843643,
  0.241677954792976,
  0.24177098274231,
  0.241864010691643,
  0.241957038640976,
  0.242050066590309,
  0.242143079638481,
  0.242236092686653,
  0.242329120635986,
  0.242422133684158,
  0.24251514673233,
  0.242608159780502,
  0.242701172828674,
  0.242794170975685,
  0.242887184023857,
  0.242980182170868,
  0.243073180317879,
  0.24316617846489,
  0.2432591766119,
  0.24335215985775,
  0.2434451431036,
  0.24353814125061,
  0.24363112449646,
  0.24372410774231,
  0.243817090988159,
  0.243910074234009,
  0.244003042578697,
  0.244096025824547,
  0.244188994169235,
  0.244281977415085,
  0.244374945759773,
  0.2444678992033,
  0.244560867547989,
  0.244653835892677,
  0.244746789336205,
  0.244839742779732,
  0.244932696223259,
  0.245025649666786,
  0.245118603110313,
  0.245211556553841,
  0.245304495096207,
  0.245397433638573,
  0.2454903870821,
  0.245583325624466,
  0.245676249265671,
  0.245769187808037,
  0.245862126350403,
  0.245955049991608,
  0.246047973632812,
  0.246140897274017,
  0.246233835816383,
  0.246326744556427,
  0.246419668197632,
  0.246512576937675,
  0.24660550057888,
  0.246698409318924,
  0.246791318058968,
  0.246884226799011,
  0.246977135539055,
  0.247070029377937,
  0.24716292321682,
  0.247255831956863,
  0.247348725795746,
  0.247441619634628,
  0.247534513473511,
  0.247627407312393,
  0.247720286250114,
  0.247813165187836,
  0.247906044125557,
  0.247998923063278,
  0.248091816902161,
  0.248184695839882,
  0.248277559876442,
  0.248370423913002,
  0.248463302850723,
  0.248556166887283,
  0.248649030923843,
  0.248741894960403,
  0.248834744095802,
  0.248927608132362,
  0.249020457267761,
  0.24911330640316,
  0.249206155538559,
  0.249299004673958,
  0.249391853809357,
  0.249484702944756,
  0.249577537178993,
  0.249670386314392,
  0.24976322054863,
  0.249856054782867,
  0.249948874115944,
  0.250041723251343,
  0.250134527683258,
  0.250227361917496,
  0.250320196151733,
  0.250413000583649,
  0.250505834817886,
  0.250598639249802,
  0.250691443681717,
  0.250784248113632,
  0.25087708234787,
  0.250969886779785,
  0.2510626912117,
  0.251155495643616,
  0.251248300075531,
  0.251341074705124,
  0.251433879137039,
  0.251526683568954,
  0.251619458198547,
  0.251712262630463,
  0.251805037260056,
  0.251897811889648,
  0.251990586519241,
  0.252083390951157,
  0.252176135778427,
  0.252268940210342,
  0.252361714839935,
  0.252454459667206,
  0.252547234296799,
  0.252640008926392,
  0.252732753753662,
  0.252825528383255,
  0.252918273210526,
  0.253011047840118,
  0.253103792667389,
  0.253196537494659,
  0.25328928232193,
  0.2533820271492,
  0.253474771976471,
  0.253567516803741,
  0.253660261631012,
  0.253753006458282,
  0.253845721483231,
  0.253938466310501,
  0.254031211137772,
  0.25412392616272,
  0.254216641187668,
  0.254309356212616,
  0.254402101039886,
  0.254494816064835,
  0.254587531089783,
  0.254680246114731,
  0.254772961139679,
  0.254865646362305,
  0.254958361387253,
  0.255051076412201,
  0.255143761634827,
  0.255236476659775,
  0.255329161882401,
  0.255421847105026,
  0.255514562129974,
  0.2556072473526,
  0.255699932575226,
  0.255792617797852,
  0.255885303020477,
  0.255977988243103,
  0.256070673465729,
  0.256163328886032,
  0.256256014108658,
  0.256348669528961,
  0.256441354751587,
  0.25653401017189,
  0.256626665592194,
  0.256719350814819,
  0.256812006235123,
  0.256904661655426,
  0.256997317075729,
  0.257089972496033,
  0.257182627916336,
  0.257275283336639,
  0.25736790895462,
  0.257460564374924,
  0.257553189992905,
  0.257645815610886,
  0.257738471031189,
  0.25783109664917,
  0.257923722267151,
  0.258016347885132,
  0.258109003305435,
  0.258201599121094,
  0.258294224739075,
  0.258386850357056,
  0.258479475975037,
  0.258572071790695,
  0.258664697408676,
  0.258757323026657,
  0.258849918842316,
  0.258942514657974,
  0.259035110473633,
  0.259127706289291,
  0.259220331907272,
  0.259312927722931,
  0.259405523538589,
  0.259498089551926,
  0.259590685367584,
  0.259683281183243,
  0.259775847196579,
  0.259868443012238,
  0.259961009025574,
  0.260053604841232,
  0.260146170854568,
  0.260238736867905,
  0.260331302881241,
  0.260423868894577,
  0.260516434907913,
  0.260609000921249,
  0.260701566934586,
  0.260794132947922,
  0.260886669158936,
  0.260979235172272,
  0.261071771383286,
  0.261164307594299,
  0.261256873607635,
  0.261349409818649,
  0.261441946029663,
  0.261534482240677,
  0.261627018451691,
  0.261719554662704,
  0.261812090873718,
  0.261904627084732,
  0.261997133493423,
  0.262089669704437,
  0.262182176113129,
  0.262274712324142,
  0.262367218732834,
  0.262459725141525,
  0.262552261352539,
  0.26264476776123,
  0.262737274169922,
  0.262829780578613,
  0.262922257184982,
  0.263014763593674,
  0.263107270002365,
  0.263199746608734,
  0.263292253017426,
  0.263384729623795,
  0.263477236032486,
  0.263569712638855,
  0.263662189245224,
  0.263754665851593,
  0.263847172260284,
  0.263939619064331,
  0.2640320956707,
  0.264124572277069,
  0.264217048883438,
  0.264309495687485,
  0.264401972293854,
  0.2644944190979,
  0.264586895704269,
  0.264679342508316,
  0.264771789312363,
  0.264864236116409,
  0.264956712722778,
  0.265049159526825,
  0.265141576528549,
  0.265234023332596,
  0.265326470136642,
  0.265418916940689,
  0.265511333942413,
  0.26560378074646,
  0.265696197748184,
  0.265788644552231,
  0.265881061553955,
  0.265973478555679,
  0.266065895557404,
  0.266158312559128,
  0.266250729560852,
  0.266343116760254,
  0.266435533761978,
  0.266527950763702,
  0.266620367765427,
  0.266712754964828,
  0.266805171966553,
  0.266897559165955,
  0.266989946365356,
  0.267082333564758,
  0.26717472076416,
  0.267267107963562,
  0.267359495162964,
  0.267451882362366,
  0.267544269561768,
  0.267636626958847,
  0.267729014158249,
  0.267821401357651,
  0.26791375875473,
  0.26800611615181,
  0.268098503351212,
  0.268190860748291,
  0.26828321814537,
  0.26837557554245,
  0.268467932939529,
  0.268560290336609,
  0.268652617931366,
  0.268744975328445,
  0.268837332725525,
  0.268929660320282,
  0.269022017717361,
  0.269114345312119,
  0.269206672906876,
  0.269299030303955,
  0.269391357898712,
  0.269483685493469,
  0.269576013088226,
  0.269668340682983,
  0.269760638475418,
  0.269852966070175,
  0.269945293664932,
  0.270037591457367,
  0.270129889249802,
  0.270222216844559,
  0.270314514636993,
  0.270406812429428,
  0.270499110221863,
  0.270591408014297,
  0.270683705806732,
  0.270776003599167,
  0.270868301391602,
  0.270960599184036,
  0.271052867174149,
  0.271145164966583,
  0.271237432956696,
  0.27132973074913,
  0.271421998739243,
  0.271514266729355,
  0.271606534719467,
  0.271698802709579,
  0.271791070699692,
  0.271883338689804,
  0.271975606679916,
  0.272067874670029,
  0.272160112857819,
  0.272252380847931,
  0.272344619035721,
  0.272436857223511,
  0.272529095411301,
  0.272621363401413,
  0.272713601589203,
  0.272805839776993,
  0.272898077964783,
  0.27299028635025,
  0.273082554340363,
  0.27317476272583,
  0.27326700091362,
  0.273359209299088,
  0.273451417684555,
  0.273543655872345,
  0.273635864257812,
  0.27372807264328,
  0.273820281028748,
  0.273912489414215,
  0.274004697799683,
  0.27409690618515,
  0.274189114570618,
  0.274281322956085,
  0.27437350153923,
  0.274465709924698,
  0.274557888507843,
  0.274650067090988,
  0.274742245674133,
  0.274834454059601,
  0.274926632642746,
  0.275018811225891,
  0.275110989809036,
  0.275203138589859,
  0.275295317173004,
  0.275387495756149,
  0.275479674339294,
  0.275571823120117,
  0.27566397190094,
  0.275756150484085,
  0.275848299264908,
  0.275940448045731,
  0.276032596826553,
  0.276124745607376,
  0.276216894388199,
  0.276309043169022,
  0.276401162147522,
  0.276493310928345,
  0.276585429906845,
  0.276677578687668,
  0.276769697666168,
  0.276861816644669,
  0.276953965425491,
  0.277046084403992,
  0.277138203382492,
  0.277230322360992,
  0.277322441339493,
  0.277414530515671,
  0.277506649494171,
  0.277598768472672,
  0.277690857648849,
  0.27778297662735,
  0.277875065803528,
  0.277967154979706,
  0.278059273958206,
  0.278151363134384,
  0.278243452310562,
  0.278335511684418,
  0.278427600860596,
  0.278519690036774,
  0.278611779212952,
  0.278703838586807,
  0.278795927762985,
  0.278887987136841,
  0.278980046510696,
  0.279072105884552,
  0.27916419506073,
  0.279256254434586,
  0.279348313808441,
  0.279440373182297,
  0.279532432556152,
  0.279624462127686,
  0.279716521501541,
  0.279808551073074,
  0.27990061044693,
  0.279992640018463,
  0.280084669589996,
  0.280176728963852,
  0.280268758535385,
  0.280360788106918,
  0.280452817678452,
  0.280544817447662,
  0.280636847019196,
  0.280728876590729,
  0.28082087635994,
  0.280912905931473,
  0.281004905700684,
  0.281096935272217,
  0.281188935041428,
  0.281280934810638,
  0.281372934579849,
  0.28146493434906,
  0.281556934118271,
  0.281648933887482,
  0.281740933656693,
  0.281832903623581,
  0.281924903392792,
  0.28201687335968,
  0.282108873128891,
  0.282200843095779,
  0.282292813062668,
  0.282384783029556,
  0.282476752996445,
  0.282568722963333,
  0.282660692930222,
  0.28275266289711,
  0.282844603061676,
  0.282936573028564,
  0.283028542995453,
  0.283120483160019,
  0.283212423324585,
  0.283304363489151,
  0.283396333456039,
  0.283488273620605,
  0.283580213785172,
  0.283672153949738,
  0.283764064311981,
  0.283856004476547,
  0.283947944641113,
  0.284039855003357,
  0.284131765365601,
  0.284223705530167,
  0.28431561589241,
  0.284407526254654,
  0.284499436616898,
  0.284591346979141,
  0.284683257341385,
  0.284775167703629,
  0.284867078065872,
  0.284958988428116,
  0.285050868988037,
  0.285142779350281,
  0.285234659910202,
  0.285326540470123,
  0.285418450832367,
  0.285510331392288,
  0.285602211952209,
  0.285694092512131,
  0.285785973072052,
  0.285877823829651,
  0.285969704389572,
  0.286061555147171,
  0.286153435707092,
  0.286245286464691,
  0.286337167024612,
  0.286429017782211,
  0.28652086853981,
  0.286612719297409,
  0.286704570055008,
  0.286796420812607,
  0.286888271570206,
  0.286980122327805,
  0.287071973085403,
  0.28716379404068,
  0.287255644798279,
  0.287347465753555,
  0.287439286708832,
  0.287531107664108,
  0.287622928619385,
  0.287714749574661,
  0.287806570529938,
  0.287898391485214,
  0.287990212440491,
  0.288082033395767,
  0.288173824548721,
  0.288265615701675,
  0.288357436656952,
  0.288449227809906,
  0.28854101896286,
  0.288632839918137,
  0.288724631071091,
  0.288816422224045,
  0.288908183574677,
  0.288999974727631,
  0.289091765880585,
  0.289183527231216,
  0.289275318384171,
  0.289367079734802,
  0.289458870887756,
  0.289550632238388,
  0.28964239358902,
  0.289734154939651,
  0.289825916290283,
  0.289917677640915,
  0.290009438991547,
  0.290101170539856,
  0.290192931890488,
  0.290284693241119,
  0.290376424789429,
  0.290468156337738,
  0.290559887886047,
  0.290651649236679,
  0.290743380784988,
  0.290835112333298,
  0.290926843881607,
  0.291018545627594,
  0.291110277175903,
  0.291202008724213,
  0.2912937104702,
  0.291385442018509,
  0.291477143764496,
  0.291568845510483,
  0.29166054725647,
  0.291752249002457,
  0.291843950748444,
  0.291935652494431,
  0.292027354240417,
  0.292119055986404,
  0.292210727930069,
  0.292302429676056,
  0.292394131422043,
  0.292485803365707,
  0.292577475309372,
  0.292669147253036,
  0.292760819196701,
  0.292852491140366,
  0.29294416308403,
  0.293035835027695,
  0.293127506971359,
  0.293219149112701,
  0.293310821056366,
  0.293402493000031,
  0.293494135141373,
  0.293585777282715,
  0.293677419424057,
  0.293769061565399,
  0.293860703706741,
  0.293952345848083,
  0.294043987989426,
  0.294135630130768,
  0.29422727227211,
  0.29431888461113,
  0.29441049695015,
  0.294502139091492,
  0.294593751430511,
  0.294685363769531,
  0.294776976108551,
  0.294868588447571,
  0.294960200786591,
  0.29505181312561,
  0.29514342546463,
  0.295235008001328,
  0.295326620340347,
  0.295418232679367,
  0.295509815216064,
  0.295601397752762,
  0.295692980289459,
  0.295784562826157,
  0.295876145362854,
  0.295967727899551,
  0.296059310436249,
  0.296150892972946,
  0.296242445707321,
  0.296334028244019,
  0.296425610780716,
  0.296517163515091,
  0.296608716249466,
  0.296700268983841,
  0.296791821718216,
  0.296883404254913,
  0.296974927186966,
  0.297066479921341,
  0.297158032655716,
  0.297249555587769,
  0.297341108322144,
  0.297432631254196,
  0.297524183988571,
  0.297615706920624,
  0.297707229852676,
  0.297798752784729,
  0.297890275716782,
  0.297981798648834,
  0.298073321580887,
  0.298164844512939,
  0.29825633764267,
  0.298347860574722,
  0.298439353704453,
  0.298530846834183,
  0.298622369766235,
  0.298713862895966,
  0.298805356025696,
  0.298896849155426,
  0.298988342285156,
  0.299079835414886,
  0.299171298742294,
  0.299262791872025,
  0.299354255199432,
  0.299445748329163,
  0.29953721165657,
  0.299628704786301,
  0.299720168113708,
  0.299811631441116,
  0.299903094768524,
  0.29999452829361,
  0.300085991621017,
  0.300177454948425,
  0.300268888473511,
  0.300360351800919,
  0.300451785326004,
  0.300543248653412,
  0.300634682178497,
  0.300726115703583,
  0.300817549228668,
  0.300908982753754,
  0.301000416278839,
  0.301091849803925,
  0.301183253526688,
  0.301274687051773,
  0.301366090774536,
  0.301457524299622,
  0.301548928022385,
  0.301640331745148,
  0.301731735467911,
  0.301823139190674,
  0.301914542913437,
  0.3020059466362,
  0.302097350358963,
  0.302188754081726,
  0.302280128002167,
  0.30237153172493,
  0.30246290564537,
  0.302554279565811,
  0.302645653486252,
  0.302737027406693,
  0.302828401327133,
  0.302919775247574,
  0.303011149168015,
  0.303102523088455,
  0.303193867206573,
  0.303285241127014,
  0.303376585245132,
  0.303467959165573,
  0.303559303283691,
  0.30365064740181,
  0.303741991519928,
  0.303833335638046,
  0.303924679756165,
  0.304016023874283,
  0.304107338190079,
  0.304198682308197,
  0.304289996623993,
  0.304381340742111,
  0.304472655057907,
  0.304563969373703,
  0.304655283689499,
  0.304746598005295,
  0.304837912321091,
  0.304929226636887,
  0.305020540952682,
  0.305111825466156,
  0.305203139781952,
  0.305294454097748,
  0.305385738611221,
  0.305477023124695,
  0.305568307638168,
  0.305659592151642,
  0.305750876665115,
  0.305842161178589,
  0.305933445692062,
  0.306024730205536,
  0.306115984916687,
  0.306207269430161,
  0.306298524141312,
  0.306389808654785,
  0.306481063365936,
  0.306572318077087,
  0.306663572788239,
  0.30675482749939,
  0.306846082210541,
  0.30693730711937,
  0.307028561830521,
  0.307119816541672,
  0.3072110414505,
  0.307302266359329,
  0.30739352107048,
  0.307484745979309,
  0.307575970888138,
  0.307667195796967,
  0.307758420705795,
  0.307849645614624,
  0.307940870523453,
  0.308032065629959,
  0.308123290538788,
  0.308214485645294,
  0.308305680751801,
  0.308396905660629,
  0.308488100767136,
  0.308579295873642,
  0.308670490980148,
  0.308761686086655,
  0.308852851390839,
  0.308944046497345,
  0.309035241603851,
  0.309126406908035,
  0.309217602014542,
  0.309308767318726,
  0.30939993262291,
  0.309491097927094,
  0.309582263231277,
  0.309673428535461,
  0.309764593839645,
  0.309855729341507,
  0.309946894645691,
  0.310038059949875,
  0.310129195451736,
  0.310220330953598,
  0.31031146645546,
  0.310402631759644,
  0.310493767261505,
  0.310584902763367,
  0.310676008462906,
  0.310767143964767,
  0.310858279466629,
  0.310949385166168,
  0.31104052066803,
  0.311131626367569,
  0.311222761869431,
  0.31131386756897,
  0.311404973268509,
  0.311496078968048,
  0.311587184667587,
  0.311678290367126,
  0.311769366264343,
  0.311860471963882,
  0.311951547861099,
  0.312042653560638,
  0.312133729457855,
  0.312224805355072,
  0.312315881252289,
  0.312406957149506,
  0.312498033046722,
  0.312589108943939,
  0.312680184841156,
  0.312771260738373,
  0.312862306833267,
  0.312953382730484,
  0.313044428825378,
  0.313135474920273,
  0.313226521015167,
  0.313317567110062,
  0.313408613204956,
  0.31349965929985,
  0.313590705394745,
  0.313681751489639,
  0.313772767782211,
  0.313863813877106,
  0.313954830169678,
  0.31404584646225,
  0.314136892557144,
  0.314227908849716,
  0.314318895339966,
  0.31440994143486,
  0.31450092792511,
  0.314591944217682,
  0.314682960510254,
  0.314773947000504,
  0.314864963293076,
  0.314955949783325,
  0.315046936273575,
  0.315137922763824,
  0.315228909254074,
  0.315319895744324,
  0.315410882234573,
  0.315501868724823,
  0.31559282541275,
  0.315683811903,
  0.315774768590927,
  0.315865755081177,
  0.315956711769104,
  0.316047668457031,
  0.316138625144958,
  0.316229581832886,
  0.316320538520813,
  0.31641149520874,
  0.316502422094345,
  0.316593378782272,
  0.316684305667877,
  0.316775262355804,
  0.316866189241409,
  0.316957116127014,
  0.317048043012619,
  0.317138969898224,
  0.317229896783829,
  0.317320823669434,
  0.317411750555038,
  0.317502647638321,
  0.317593574523926,
  0.317684471607208,
  0.317775368690491,
  0.317866265773773,
  0.317957192659378,
  0.318048089742661,
  0.318138957023621,
  0.318229854106903,
  0.318320751190186,
  0.318411648273468,
  0.318502515554428,
  0.318593412637711,
  0.318684279918671,
  0.318775147199631,
  0.318866014480591,
  0.318956881761551,
  0.319047749042511,
  0.319138616323471,
  0.319229483604431,
  0.319320321083069,
  0.319411188364029,
  0.319502025842667,
  0.319592893123627,
  0.319683730602264,
  0.319774568080902,
  0.31986540555954,
  0.319956243038177,
  0.320047080516815,
  0.32013788819313,
  0.320228725671768,
  0.320319563150406,
  0.320410370826721,
  0.320501178503036,
  0.320591986179352,
  0.32068282365799,
  0.320773631334305,
  0.32086443901062,
  0.320955216884613,
  0.321046024560928,
  0.321136832237244,
  0.321227610111237,
  0.321318417787552,
  0.321409195661545,
  0.32150000333786,
  0.321590781211853,
  0.321681559085846,
  0.321772336959839,
  0.321863114833832,
  0.321953862905502,
  0.322044640779495,
  0.322135388851166,
  0.322226166725159,
  0.322316914796829,
  0.322407692670822,
  0.322498440742493,
  0.322589188814163,
  0.322679936885834,
  0.322770655155182,
  0.322861403226852,
  0.322952151298523,
  0.323042899370193,
  0.323133617639542,
  0.32322433590889,
  0.32331508398056,
  0.323405802249908,
  0.323496520519257,
  0.323587238788605,
  0.323677957057953,
  0.323768645524979,
  0.323859363794327,
  0.323950082063675,
  0.324040770530701,
  0.324131458997726,
  0.324222177267075,
  0.3243128657341,
  0.324403554201126,
  0.324494242668152,
  0.324584931135178,
  0.324675619602203,
  0.324766278266907,
  0.324856966733932,
  0.324947625398636,
  0.325038313865662,
  0.325128972530365,
  0.325219631195068,
  0.325310289859772,
  0.325400948524475,
  0.325491607189178,
  0.325582265853882,
  0.325672894716263,
  0.325763553380966,
  0.325854182243347,
  0.325944840908051,
  0.326035469770432,
  0.326126098632812,
  0.326216727495193,
  0.326307356357574,
  0.326397985219955,
  0.326488614082336,
  0.326579213142395,
  0.326669842004776,
  0.326760441064835,
  0.326851069927216,
  0.326941668987274,
  0.327032268047333,
  0.327122867107391,
  0.32721346616745,
  0.327304065227509,
  0.327394664287567,
  0.327485233545303,
  0.327575832605362,
  0.327666401863098,
  0.327757000923157,
  0.327847570180893,
  0.327938139438629,
  0.328028708696365,
  0.328119277954102,
  0.328209847211838,
  0.328300386667252,
  0.328390955924988,
  0.328481525182724,
  0.328572064638138,
  0.328662633895874,
  0.328753173351288,
  0.328843712806702,
  0.328934252262115,
  0.329024791717529,
  0.329115331172943,
  0.329205840826035,
  0.329296380281448,
  0.329386919736862,
  0.329477429389954,
  0.329567939043045,
  0.329658448696136,
  0.32974898815155,
  0.329839497804642,
  0.329929977655411,
  0.330020487308502,
  0.330110996961594,
  0.330201476812363,
  0.330291986465454,
  0.330382466316223,
  0.330472975969315,
  0.330563455820084,
  0.330653935670853,
  0.330744415521622,
  0.330834895372391,
  0.33092537522316,
  0.331015825271606,
  0.331106305122375,
  0.331196755170822,
  0.331287235021591,
  0.331377685070038,
  0.331468135118484,
  0.331558585166931,
  0.331649035215378,
  0.331739485263824,
  0.331829935312271,
  0.331920385360718,
  0.332010805606842,
  0.332101255655289,
  0.332191675901413,
  0.332282096147537,
  0.332372516393661,
  0.332462936639786,
  0.33255335688591,
  0.332643777132034,
  0.332734197378159,
  0.332824617624283,
  0.332915008068085,
  0.333005428314209,
  0.333095818758011,
  0.333186209201813,
  0.333276599645615,
  0.333366990089417,
  0.333457380533218,
  0.33354777097702,
  0.333638161420822,
  0.333728522062302,
  0.333818912506104,
  0.333909273147583,
  0.333999663591385,
  0.334090024232864,
  0.334180384874344,
  0.334270745515823,
  0.334361106157303,
  0.33445143699646,
  0.334541797637939,
  0.334632158279419,
  0.334722489118576,
  0.334812849760056,
  0.334903180599213,
  0.33499351143837,
  0.335083842277527,
  0.335174173116684,
  0.335264503955841,
  0.335354834794998,
  0.335445135831833,
  0.33553546667099,
  0.335625767707825,
  0.335716098546982,
  0.335806399583817,
  0.335896700620651,
  0.335987001657486,
  0.336077302694321,
  0.336167603731155,
  0.33625790476799,
  0.336348176002502,
  0.336438477039337,
  0.336528748273849,
  0.336619019508362,
  0.336709320545197,
  0.336799591779709,
  0.336889863014221,
  0.336980134248734,
  0.337070375680923,
  0.337160646915436,
  0.337250918149948,
  0.337341159582138,
  0.337431401014328,
  0.33752167224884,
  0.33761191368103,
  0.33770215511322,
  0.33779239654541,
  0.3378826379776,
  0.337972849607468,
  0.338063091039658,
  0.338153332471848,
  0.338243544101715,
  0.338333755731583,
  0.338423997163773,
  0.33851420879364,
  0.338604420423508,
  0.338694632053375,
  0.338784843683243,
  0.338875025510788,
  0.338965237140656,
  0.339055418968201,
  0.339145630598068,
  0.339235812425613,
  0.339325994253159,
  0.339416176080704,
  0.339506357908249,
  0.339596539735794,
  0.339686721563339,
  0.339776873588562,
  0.339867055416107,
  0.33995720744133,
  0.340047389268875,
  0.340137541294098,
  0.340227693319321,
  0.340317845344543,
  0.340407997369766,
  0.340498149394989,
  0.340588301420212,
  0.340678423643112,
  0.340768545866013,
  0.340858697891235,
  0.340948820114136,
  0.341038972139359,
  0.341129094362259,
  0.341219186782837,
  0.341309309005737,
  0.341399431228638,
  0.341489553451538,
  0.341579645872116,
  0.341669768095016,
  0.341759860515594,
  0.341849952936172,
  0.34194004535675,
  0.342030137777328,
  0.342120230197906,
  0.342210322618484,
  0.342300415039062,
  0.342390477657318,
  0.342480570077896,
  0.342570662498474,
  0.34266072511673,
  0.342750787734985,
  0.342840850353241,
  0.342930912971497,
  0.343020975589752,
  0.343111038208008,
  0.343201071023941,
  0.343291133642197,
  0.34338116645813,
  0.343471229076385,
  0.343561261892319,
  0.343651294708252,
  0.343741327524185,
  0.343831360340118,
  0.343921393156052,
  0.344011396169662,
  0.344101428985596,
  0.344191431999207,
  0.34428146481514,
  0.344371467828751,
  0.344461470842361,
  0.344551473855972,
  0.344641476869583,
  0.344731479883194,
  0.344821482896805,
  0.344911456108093,
  0.345001459121704,
  0.345091432332993,
  0.345181435346603,
  0.345271408557892,
  0.34536138176918,
  0.345451354980469,
  0.345541328191757,
  0.345631301403046,
  0.345721274614334,
  0.3458112180233,
  0.345901161432266,
  0.345991134643555,
  0.346081078052521,
  0.346171021461487,
  0.346260964870453,
  0.346350908279419,
  0.346440851688385,
  0.346530765295029,
  0.346620708703995,
  0.346710652112961,
  0.346800565719604,
  0.346890479326248,
  0.346980422735214,
  0.347070336341858,
  0.347160249948502,
  0.347250163555145,
  0.347340047359467,
  0.34742996096611,
  0.347519874572754,
  0.347609758377075,
  0.347699642181396,
  0.347789525985718,
  0.347879439592361,
  0.347969323396683,
  0.348059177398682,
  0.348149061203003,
  0.348238945007324,
  0.348328799009323,
  0.348418682813644,
  0.348508536815643,
  0.348598420619965,
  0.348688274621964,
  0.348778128623962,
  0.348867982625961,
  0.348957806825638,
  0.349047660827637,
  0.349137514829636,
  0.349227339029312,
  0.349317193031311,
  0.349407017230988,
  0.349496841430664,
  0.349586665630341,
  0.349676489830017,
  0.349766314029694,
  0.34985613822937,
  0.349945932626724,
  0.350035756826401,
  0.350125551223755,
  0.350215345621109,
  0.350305169820786,
  0.35039496421814,
  0.350484758615494,
  0.350574553012848,
  0.35066431760788,
  0.350754112005234,
  0.350843906402588,
  0.35093367099762,
  0.351023435592651,
  0.351113229990005,
  0.351202994585037,
  0.351292759180069,
  0.351382523775101,
  0.351472288370132,
  0.351562023162842,
  0.351651787757874,
  0.351741522550583,
  0.351831287145615,
  0.351921021938324,
  0.352010756731033,
  0.352100491523743,
  0.352190226316452,
  0.352279961109161,
  0.352369666099548,
  0.352459400892258,
  0.352549135684967,
  0.352638840675354,
  0.352728545665741,
  0.35281828045845,
  0.352907955646515,
  0.352997690439224,
  0.353087365627289,
  0.353177070617676,
  0.353266775608063,
  0.353356450796127,
  0.353446125984192,
  0.353535830974579,
  0.353625506162643,
  0.353715181350708,
  0.353804856538773,
  0.353894531726837,
  0.353984206914902,
  0.354073852300644,
  0.354163527488708,
  0.354253172874451,
  0.354342848062515,
  0.354432493448257,
  0.354522138834,
  0.354611784219742,
  0.354701429605484,
  0.354791045188904,
  0.354880690574646,
  0.354970335960388,
  0.355059951543808,
  0.355149567127228,
  0.35523921251297,
  0.35532882809639,
  0.35541844367981,
  0.355508059263229,
  0.355597674846649,
  0.355687260627747,
  0.355776876211166,
  0.355866461992264,
  0.355956077575684,
  0.356045663356781,
  0.356135249137878,
  0.356224834918976,
  0.356314420700073,
  0.356404006481171,
  0.356493562459946,
  0.356583148241043,
  0.356672704219818,
  0.356762290000916,
  0.356851845979691,
  0.356941401958466,
  0.357030957937241,
  0.357120513916016,
  0.357210069894791,
  0.357299596071243,
  0.357389152050018,
  0.357478708028793,
  0.357568234205246,
  0.357657760381699,
  0.357747286558151,
  0.357836812734604,
  0.357926338911057,
  0.358015865087509,
  0.358105391263962,
  0.358194887638092,
  0.358284413814545,
  0.358373910188675,
  0.358463406562805,
  0.358552932739258,
  0.358642429113388,
  0.358731895685196,
  0.358821392059326,
  0.358910888433456,
  0.359000384807587,
  0.359089851379395,
  0.359179317951202,
  0.359268814325333,
  0.359358280897141,
  0.359447747468948,
  0.359537214040756,
  0.359626680612564,
  0.35971611738205,
  0.359805583953857,
  0.359895050525665,
  0.359984487295151,
  0.360073924064636,
  0.360163360834122,
  0.360252797603607,
  0.360342234373093,
  0.360431671142578,
  0.360521107912064,
  0.360610544681549,
  0.360699951648712,
  0.360789358615875,
  0.360878765583038,
  0.360968202352524,
  0.361057609319687,
  0.36114701628685,
  0.361236423254013,
  0.361325800418854,
  0.361415207386017,
  0.361504584550858,
  0.361593991518021,
  0.361683368682861,
  0.361772745847702,
  0.361862123012543,
  0.361951500177383,
  0.362040877342224,
  0.362130254507065,
  0.362219601869583,
  0.362308979034424,
  0.362398326396942,
  0.36248767375946,
  0.362577021121979,
  0.362666368484497,
  0.362755715847015,
  0.362845063209534,
  0.362934410572052,
  0.363023728132248,
  0.363113075494766,
  0.363202393054962,
  0.363291710615158,
  0.363381057977676,
  0.36347034573555,
  0.363559693098068,
  0.363648980855942,
  0.363738298416138,
  0.363827586174011,
  0.363916903734207,
  0.364006191492081,
  0.364095509052277,
  0.36418479681015,
  0.364274084568024,
  0.364363372325897,
  0.364452630281448,
  0.364541918039322,
  0.364631205797195,
  0.364720463752747,
  0.36480975151062,
  0.364899009466171,
  0.364988267421722,
  0.365077525377274,
  0.365166783332825,
  0.365256041288376,
  0.365345269441605,
  0.365434527397156,
  0.365523755550385,
  0.365613013505936,
  0.365702241659164,
  0.365791469812393,
  0.365880697965622,
  0.365969926118851,
  0.366059154272079,
  0.366148352622986,
  0.366237580776215,
  0.366326779127121,
  0.366415977478027,
  0.366505175828934,
  0.366594403982162,
  0.366683602333069,
  0.366772770881653,
  0.366861969232559,
  0.366951167583466,
  0.36704033613205,
  0.367129534482956,
  0.36721870303154,
  0.367307871580124,
  0.367397040128708,
  0.367486208677292,
  0.367575377225876,
  0.36766454577446,
  0.367753714323044,
  0.367842853069305,
  0.367931991815567,
  0.368021160364151,
  0.368110299110413,
  0.368199437856674,
  0.368288576602936,
  0.368377685546875,
  0.368466824293137,
  0.368555963039398,
  0.368645071983337,
  0.368734210729599,
  0.368823319673538,
  0.368912428617477,
  0.369001537561417,
  0.369090646505356,
  0.369179755449295,
  0.369268864393234,
  0.369357943534851,
  0.36944705247879,
  0.369536131620407,
  0.369625210762024,
  0.369714289903641,
  0.369803369045258,
  0.369892448186874,
  0.369981527328491,
  0.370070576667786,
  0.370159655809402,
  0.370248705148697,
  0.370337784290314,
  0.370426833629608,
  0.370515882968903,
  0.370604932308197,
  0.370693981647491,
  0.370783030986786,
  0.370872050523758,
  0.370961099863052,
  0.371050119400024,
  0.371139138936996,
  0.371228158473969,
  0.371317178010941,
  0.371406197547913,
  0.371495217084885,
  0.371584236621857,
  0.371673226356506,
  0.371762245893478,
  0.371851235628128,
  0.3719402551651,
  0.37202924489975,
  0.372118234634399,
  0.372207224369049,
  0.372296214103699,
  0.372385174036026,
  0.372474163770676,
  0.372563123703003,
  0.372652113437653,
  0.37274107336998,
  0.372830033302307,
  0.372918993234634,
  0.373007953166962,
  0.373096913099289,
  0.373185843229294,
  0.373274803161621,
  0.373363733291626,
  0.373452663421631,
  0.373541623353958,
  0.373630553483963,
  0.373719483613968,
  0.373808413743973,
  0.373897314071655,
  0.37398624420166,
  0.374075144529343,
  0.374164074659348,
  0.37425297498703,
  0.374341875314713,
  0.374430775642395,
  0.374519675970078,
  0.37460857629776,
  0.37469744682312,
  0.374786347150803,
  0.374875217676163,
  0.374964118003845,
  0.375052988529205,
  0.375141859054565,
  0.375230729579926,
  0.375319600105286,
  0.375408470630646,
  0.375497311353683,
  0.375586181879044,
  0.375675022602081,
  0.375763893127441,
  0.375852733850479,
  0.375941574573517,
  0.376030415296555,
  0.37611922621727,
  0.376208066940308,
  0.376296907663345,
  0.376385718584061,
  0.376474559307098,
  0.376563370227814,
  0.376652181148529,
  0.376740992069244,
  0.37682980298996,
  0.376918613910675,
  0.37700742483139,
  0.377096205949783,
  0.377184987068176,
  0.377273797988892,
  0.377362579107285,
  0.377451360225677,
  0.37754014134407,
  0.377628922462463,
  0.377717703580856,
  0.377806454896927,
  0.37789523601532,
  0.37798398733139,
  0.378072738647461,
  0.378161519765854,
  0.378250271081924,
  0.378339022397995,
  0.378427743911743,
  0.378516495227814,
  0.378605246543884,
  0.378693968057632,
  0.378782689571381,
  0.378871440887451,
  0.378960162401199,
  0.379048883914948,
  0.379137575626373,
  0.379226297140121,
  0.37931501865387,
  0.379403740167618,
  0.379492431879044,
  0.379581123590469,
  0.379669815301895,
  0.379758507013321,
  0.379847198724747,
  0.379935890436172,
  0.380024582147598,
  0.380113273859024,
  0.380201935768127,
  0.380290597677231,
  0.380379259586334,
  0.38046795129776,
  0.380556613206863,
  0.380645245313644,
  0.380733907222748,
  0.380822569131851,
  0.380911201238632,
  0.380999863147736,
  0.381088495254517,
  0.381177127361298,
  0.381265759468079,
  0.38135439157486,
  0.381443023681641,
  0.381531655788422,
  0.38162025809288,
  0.381708890199661,
  0.38179749250412,
  0.381886124610901,
  0.381974697113037,
  0.382063329219818,
  0.382151901721954,
  0.382240504026413,
  0.382329106330872,
  0.382417678833008,
  0.382506281137466,
  0.382594853639603,
  0.382683426141739,
  0.382771998643875,
  0.382860571146011,
  0.382949143648148,
  0.383037716150284,
  0.383126258850098,
  0.383214831352234,
  0.383303374052048,
  0.383391916751862,
  0.383480459451675,
  0.383569002151489,
  0.383657544851303,
  0.383746087551117,
  0.383834630250931,
  0.383923143148422,
  0.384011656045914,
  0.384100198745728,
  0.384188711643219,
  0.38427722454071,
  0.384365737438202,
  0.384454250335693,
  0.384542763233185,
  0.384631246328354,
  0.384719729423523,
  0.384808242321014,
  0.384896725416183,
  0.384985208511353,
  0.385073691606522,
  0.385162174701691,
  0.38525065779686,
  0.385339111089706,
  0.385427594184875,
  0.385516047477722,
  0.385604500770569,
  0.385692983865738,
  0.385781437158585,
  0.385869890451431,
  0.385958313941956,
  0.386046767234802,
  0.386135220527649,
  0.386223644018173,
  0.386312067508698,
  0.386400520801544,
  0.386488944292068,
  0.38657733798027,
  0.386665761470795,
  0.386754184961319,
  0.386842608451843,
  0.386931002140045,
  0.387019395828247,
  0.387107819318771,
  0.387196213006973,
  0.387284606695175,
  0.387373000383377,
  0.387461394071579,
  0.387549757957458,
  0.38763815164566,
  0.38772651553154,
  0.387814879417419,
  0.387903273105621,
  0.387991607189178,
  0.388079971075058,
  0.388168334960938,
  0.388256698846817,
  0.388345062732697,
  0.388433396816254,
  0.388521730899811,
  0.38861009478569,
  0.388698399066925,
  0.388786762952805,
  0.388875067234039,
  0.388963401317596,
  0.389051705598831,
  0.389140039682388,
  0.389228373765945,
  0.38931667804718,
  0.389404982328415,
  0.38949328660965,
  0.389581590890884,
  0.389669865369797,
  0.389758169651031,
  0.389846473932266,
  0.389934748411179,
  0.390023022890091,
  0.390111297369003,
  0.390199601650238,
  0.390287846326828,
  0.39037612080574,
  0.390464395284653,
  0.390552669763565,
  0.390640914440155,
  0.390729159116745,
  0.390817433595657,
  0.390905648469925,
  0.390993922948837,
  0.391082137823105,
  0.391170382499695,
  0.391258627176285,
  0.391346842050552,
  0.39143505692482,
  0.39152330160141,
  0.391611516475677,
  0.391699731349945,
  0.391787946224213,
  0.391876131296158,
  0.391964346170425,
  0.392052561044693,
  0.392140746116638,
  0.392228931188583,
  0.392317116260529,
  0.392405301332474,
  0.392493486404419,
  0.392581671476364,
  0.392669856548309,
  0.392758011817932,
  0.392846196889877,
  0.3929343521595,
  0.393022507429123,
  0.393110662698746,
  0.393198817968369,
  0.393286973237991,
  0.393375128507614,
  0.393463253974915,
  0.393551409244537,
  0.393639534711838,
  0.393727660179138,
  0.393815785646439,
  0.393903911113739,
  0.393992036581039,
  0.39408016204834,
  0.394168257713318,
  0.394256383180618,
  0.394344478845596,
  0.394432604312897,
  0.394520699977875,
  0.39460876584053,
  0.394696891307831,
  0.394784957170486,
  0.394873052835464,
  0.39496111869812,
  0.395049214363098,
  0.395137280225754,
  0.395225346088409,
  0.395313411951065,
  0.395401477813721,
  0.395489543676376,
  0.39557757973671,
  0.395665645599365,
  0.395753681659698,
  0.395841747522354,
  0.395929783582687,
  0.396017819643021,
  0.396105855703354,
  0.396193891763687,
  0.396281898021698,
  0.396369934082031,
  0.396457940340042,
  0.396545946598053,
  0.396633982658386,
  0.396721988916397,
  0.396809995174408,
  0.396898001432419,
  0.396985977888107,
  0.397073984146118,
  0.397161960601807,
  0.397249937057495,
  0.397337943315506,
  0.397425919771194,
  0.397513896226883,
  0.397601872682571,
  0.397689819335938,
  0.397777795791626,
  0.397865772247314,
  0.397953718900681,
  0.398041665554047,
  0.398129612207413,
  0.398217558860779,
  0.398305505514145,
  0.398393452167511,
  0.398481369018555,
  0.398569315671921,
  0.398657232522964,
  0.398745149374008,
  0.398833066225052,
  0.398921012878418,
  0.399008899927139,
  0.399096816778183,
  0.399184733629227,
  0.399272620677948,
  0.399360537528992,
  0.399448424577713,
  0.399536311626434,
  0.399624198675156,
  0.399712085723877,
  0.399799972772598,
  0.399887830018997,
  0.399975717067719,
  0.400063574314117,
  0.400151461362839,
  0.400239318609238,
  0.400327175855637,
  0.400415033102036,
  0.400502860546112,
  0.400590717792511,
  0.400678545236588,
  0.400766402482986,
  0.400854229927063,
  0.40094205737114,
  0.401029914617538,
  0.401117712259293,
  0.401205539703369,
  0.401293367147446,
  0.4013811647892,
  0.401468992233276,
  0.401556789875031,
  0.401644587516785,
  0.401732385158539,
  0.401820182800293,
  0.401907980442047,
  0.401995778083801,
  0.402083545923233,
  0.402171343564987,
  0.402259111404419,
  0.402346879243851,
  0.402434647083282,
  0.402522414922714,
  0.402610182762146,
  0.402697950601578,
  0.402785688638687,
  0.402873426675797,
  0.402961194515228,
  0.403048932552338,
  0.403136670589447,
  0.403224408626556,
  0.403312146663666,
  0.403399884700775,
  0.403487592935562,
  0.403575330972672,
  0.403663039207458,
  0.403750747442245,
  0.403838455677032,
  0.403926163911819,
  0.404013872146606,
  0.404101580381393,
  0.404189258813858,
  0.404276937246323,
  0.40436464548111,
  0.404452323913574,
  0.404540002346039,
  0.404627680778503,
  0.404715359210968,
  0.40480300784111,
  0.404890686273575,
  0.404978364706039,
  0.405066013336182,
  0.405153661966324,
  0.405241310596466,
  0.405328959226608,
  0.40541660785675,
  0.40550422668457,
  0.405591875314713,
  0.405679523944855,
  0.405767142772675,
  0.405854761600494,
  0.405942380428314,
  0.406029999256134,
  0.406117618083954,
  0.406205207109451,
  0.406292825937271,
  0.406380444765091,
  0.406468033790588,
  0.406555622816086,
  0.406643211841583,
  0.406730800867081,
  0.406818389892578,
  0.406905978918076,
  0.406993538141251,
  0.407081127166748,
  0.407168686389923,
  0.407256245613098,
  0.407343804836273,
  0.407431364059448,
  0.407518923282623,
  0.407606482505798,
  0.407694011926651,
  0.407781571149826,
  0.407869100570679,
  0.407956629991531,
  0.408044159412384,
  0.408131688833237,
  0.408219218254089,
  0.40830671787262,
  0.408394247293472,
  0.408481746912003,
  0.408569276332855,
  0.408656775951385,
  0.408744275569916,
  0.408831775188446,
  0.408919274806976,
  0.409006774425507,
  0.409094244241714,
  0.409181714057922,
  0.409269213676453,
  0.409356683492661,
  0.409444153308868,
  0.409531623125076,
  0.409619092941284,
  0.40970653295517,
  0.409794002771378,
  0.409881442785263,
  0.409968912601471,
  0.410056352615356,
  0.410143792629242,
  0.410231232643127,
  0.410318642854691,
  0.410406082868576,
  0.410493522882462,
  0.410580933094025,
  0.410668343305588,
  0.410755753517151,
  0.410843163728714,
  0.410930573940277,
  0.41101798415184,
  0.411105394363403,
  0.411192774772644,
  0.411280155181885,
  0.411367565393448,
  0.411454945802689,
  0.411542326211929,
  0.41162970662117,
  0.411717057228088,
  0.411804437637329,
  0.411891788244247,
  0.411979168653488,
  0.412066519260406,
  0.412153869867325,
  0.412241220474243,
  0.412328571081161,
  0.41241592168808,
  0.412503242492676,
  0.412590593099594,
  0.41267791390419,
  0.412765264511108,
  0.412852555513382,
  0.412939876317978,
  0.413027197122574,
  0.41311451792717,
  0.413201838731766,
  0.413289129734039,
  0.413376420736313,
  0.413463741540909,
  0.413551032543182,
  0.413638323545456,
  0.413725614547729,
  0.413812875747681,
  0.413900166749954,
  0.413987427949905,
  0.414074689149857,
  0.41416198015213,
  0.414249241352081,
  0.414336502552032,
  0.414423763751984,
  0.414510995149612,
  0.414598226547241,
  0.414685487747192,
  0.414772719144821,
  0.41485995054245,
  0.414947211742401,
  0.415034413337708,
  0.415121644735336,
  0.415208876132965,
  0.415296077728271,
  0.4153833091259,
  0.415470510721207,
  0.415557712316513,
  0.415644913911819,
  0.415732115507126,
  0.415819317102432,
  0.415906488895416,
  0.415993690490723,
  0.416080862283707,
  0.416168063879013,
  0.416255205869675,
  0.416342377662659,
  0.416429549455643,
  0.416516721248627,
  0.416603893041611,
  0.416691035032272,
  0.416778177022934,
  0.416865348815918,
  0.41695249080658,
  0.417039632797241,
  0.417126774787903,
  0.417213886976242,
  0.417301028966904,
  0.417388141155243,
  0.417475283145905,
  0.417562395334244,
  0.417649507522583,
  0.417736619710922,
  0.417823731899261,
  0.417910814285278,
  0.417997926473618,
  0.418085008859634,
  0.418172091245651,
  0.41825920343399,
  0.418346256017685,
  0.418433338403702,
  0.418520420789719,
  0.418607503175735,
  0.41869455575943,
  0.418781638145447,
  0.418868690729141,
  0.418955743312836,
  0.41904279589653,
  0.419129848480225,
  0.419216901063919,
  0.419303923845291,
  0.419390976428986,
  0.419477999210358,
  0.41956502199173,
  0.419652044773102,
  0.419739067554474,
  0.419826090335846,
  0.419913113117218,
  0.420000106096268,
  0.42008712887764,
  0.420174121856689,
  0.420261114835739,
  0.420348107814789,
  0.420435100793839,
  0.420522093772888,
  0.420609056949615,
  0.420696049928665,
  0.420783042907715,
  0.420870006084442,
  0.420956969261169,
  0.421043932437897,
  0.421130895614624,
  0.421217828989029,
  0.421304792165756,
  0.421391725540161,
  0.421478688716888,
  0.421565622091293,
  0.421652555465698,
  0.421739488840103,
  0.421826422214508,
  0.421913355588913,
  0.422000259160995,
  0.4220871925354,
  0.422174096107483,
  0.422260999679565,
  0.422347903251648,
  0.42243480682373,
  0.422521710395813,
  0.422608613967896,
  0.422695487737656,
  0.422782391309738,
  0.422869265079498,
  0.422956138849258,
  0.423043012619019,
  0.423129886388779,
  0.423216760158539,
  0.423303633928299,
  0.423390477895737,
  0.423477321863174,
  0.423564165830612,
  0.423651039600372,
  0.42373788356781,
  0.423824697732925,
  0.423911541700363,
  0.423998385667801,
  0.424085199832916,
  0.424172043800354,
  0.424258857965469,
  0.424345672130585,
  0.424432456493378,
  0.424519270658493,
  0.424606084823608,
  0.424692898988724,
  0.424779683351517,
  0.42486646771431,
  0.424953252077103,
  0.425040036439896,
  0.425126820802689,
  0.425213605165482,
  0.425300389528275,
  0.425387144088745,
  0.425473898649216,
  0.425560683012009,
  0.425647437572479,
  0.42573419213295,
  0.425820916891098,
  0.425907671451569,
  0.425994426012039,
  0.426081150770187,
  0.426167875528336,
  0.426254630088806,
  0.426341354846954,
  0.426428079605103,
  0.426514774560928,
  0.426601499319077,
  0.426688224077225,
  0.426774919033051,
  0.426861613988876,
  0.426948308944702,
  0.427035003900528,
  0.427121698856354,
  0.42720839381218,
  0.427295058965683,
  0.427381753921509,
  0.427468419075012,
  0.427555084228516,
  0.427641749382019,
  0.427728414535522,
  0.427815079689026,
  0.427901744842529,
  0.42798838019371,
  0.428075045347214,
  0.428161680698395,
  0.428248316049576,
  0.428334951400757,
  0.428421586751938,
  0.428508222103119,
  0.428594827651978,
  0.428681463003159,
  0.428768068552017,
  0.428854674100876,
  0.428941279649734,
  0.429027885198593,
  0.429114490747452,
  0.42920109629631,
  0.429287672042847,
  0.429374277591705,
  0.429460853338242,
  0.429547429084778,
  0.429634004831314,
  0.42972058057785,
  0.429807156324387,
  0.429893732070923,
  0.429980278015137,
  0.430066853761673,
  0.430153399705887,
  0.430239945650101,
  0.430326491594315,
  0.430413007736206,
  0.43049955368042,
  0.430586099624634,
  0.430672615766525,
  0.430759161710739,
  0.430845677852631,
  0.430932193994522,
  0.431018710136414,
  0.431105196475983,
  0.431191712617874,
  0.431278198957443,
  0.431364715099335,
  0.431451201438904,
  0.431537687778473,
  0.431624174118042,
  0.431710660457611,
  0.43179714679718,
  0.431883603334427,
  0.431970089673996,
  0.432056546211243,
  0.432143002748489,
  0.432229459285736,
  0.432315915822983,
  0.432402372360229,
  0.432488799095154,
  0.432575255632401,
  0.432661682367325,
  0.432748109102249,
  0.432834535837173,
  0.43292099237442,
  0.433007389307022,
  0.433093816041946,
  0.433180242776871,
  0.433266639709473,
  0.433353036642075,
  0.433439463376999,
  0.433525860309601,
  0.43361222743988,
  0.433698624372482,
  0.433785021305084,
  0.433871388435364,
  0.433957785367966,
  0.434044152498245,
  0.434130519628525,
  0.434216886758804,
  0.434303253889084,
  0.434389621019363,
  0.434475958347321,
  0.434562295675278,
  0.434648662805557,
  0.434735000133514,
  0.434821337461472,
  0.434907674789429,
  0.434994012117386,
  0.435080319643021,
  0.435166656970978,
  0.435252964496613,
  0.435339272022247,
  0.435425579547882,
  0.435511887073517,
  0.435598194599152,
  0.435684502124786,
  0.435770779848099,
  0.435857087373734,
  0.435943365097046,
  0.436029642820358,
  0.436115920543671,
  0.436202198266983,
  0.436288475990295,
  0.436374753713608,
  0.436461001634598,
  0.436547249555588,
  0.436633497476578,
  0.436719745397568,
  0.436805993318558,
  0.436892241239548,
  0.436978489160538,
  0.437064707279205,
  0.437150955200195,
  0.437237173318863,
  0.437323391437531,
  0.437409609556198,
  0.437495827674866,
  0.437582045793533,
  0.437668234109879,
  0.437754452228546,
  0.437840640544891,
  0.437926828861237,
  0.438013017177582,
  0.438099205493927,
  0.438185393810272,
  0.438271582126617,
  0.43835774064064,
  0.438443899154663,
  0.438530087471008,
  0.438616245985031,
  0.438702404499054,
  0.438788563013077,
  0.438874691724777,
  0.4389608502388,
  0.4390469789505,
  0.439133107662201,
  0.439219266176224,
  0.439305394887924,
  0.439391523599625,
  0.439477622509003,
  0.439563751220703,
  0.439649850130081,
  0.439735978841782,
  0.43982207775116,
  0.439908176660538,
  0.439994275569916,
  0.440080374479294,
  0.440166443586349,
  0.440252542495728,
  0.440338611602783,
  0.440424680709839,
  0.440510779619217,
  0.440596848726273,
  0.440682888031006,
  0.440768957138062,
  0.440855026245117,
  0.44094106554985,
  0.441027134656906,
  0.441113173961639,
  0.441199213266373,
  0.441285252571106,
  0.441371262073517,
  0.44145730137825,
  0.441543310880661,
  0.441629350185394,
  0.441715359687805,
  0.441801369190216,
  0.441887378692627,
  0.441973388195038,
  0.442059367895126,
  0.442145377397537,
  0.442231357097626,
  0.442317336797714,
  0.442403346300125,
  0.442489296197891,
  0.44257527589798,
  0.442661255598068,
  0.442747235298157,
  0.442833185195923,
  0.442919164896011,
  0.443005114793777,
  0.443091064691544,
  0.44317701458931,
  0.443262934684753,
  0.44334888458252,
  0.443434834480286,
  0.443520754575729,
  0.443606674671173,
  0.443692594766617,
  0.443778514862061,
  0.443864434957504,
  0.443950325250626,
  0.444036245346069,
  0.444122135639191,
  0.444208025932312,
  0.444293946027756,
  0.444379836320877,
  0.444465696811676,
  0.444551587104797,
  0.444637477397919,
  0.444723337888718,
  0.444809198379517,
  0.444895088672638,
  0.444980949163437,
  0.445066779851913,
  0.445152640342712,
  0.445238500833511,
  0.445324331521988,
  0.445410192012787,
  0.445496022701263,
  0.44558185338974,
  0.445667684078217,
  0.445753514766693,
  0.445839315652847,
  0.445925146341324,
  0.446010947227478,
  0.446096748113632,
  0.446182548999786,
  0.446268349885941,
  0.446354150772095,
  0.446439951658249,
  0.446525722742081,
  0.446611523628235,
  0.446697294712067,
  0.446783065795898,
  0.44686883687973,
  0.446954607963562,
  0.447040379047394,
  0.447126120328903,
  0.447211891412735,
  0.447297632694244,
  0.447383373975754,
  0.447469115257263,
  0.447554856538773,
  0.447640597820282,
  0.447726309299469,
  0.447812050580978,
  0.447897762060165,
  0.447983503341675,
  0.448069214820862,
  0.448154896497726,
  0.448240607976913,
  0.4483263194561,
  0.448412001132965,
  0.448497712612152,
  0.448583394289017,
  0.448669075965881,
  0.448754757642746,
  0.448840439319611,
  0.448926091194153,
  0.449011772871017,
  0.44909742474556,
  0.449183076620102,
  0.449268758296967,
  0.449354410171509,
  0.449440062046051,
  0.449525684118271,
  0.449611335992813,
  0.449696958065033,
  0.449782609939575,
  0.449868232011795,
  0.449953854084015,
  0.450039446353912,
  0.450125068426132,
  0.450210690498352,
  0.45029628276825,
  0.450381904840469,
  0.450467497110367,
  0.450553089380264,
  0.450638681650162,
  0.450724273920059,
  0.450809836387634,
  0.450895428657532,
  0.450980991125107,
  0.451066553592682,
  0.451152116060257,
  0.451237678527832,
  0.451323240995407,
  0.451408803462982,
  0.451494336128235,
  0.451579868793488,
  0.451665431261063,
  0.451750963926315,
  0.451836496591568,
  0.451921999454498,
  0.452007532119751,
  0.452093064785004,
  0.452178567647934,
  0.452264070510864,
  0.452349603176117,
  0.452435076236725,
  0.452520579099655,
  0.452606081962585,
  0.452691584825516,
  0.452777057886124,
  0.452862530946732,
  0.452948004007339,
  0.453033477067947,
  0.453118950128555,
  0.453204423189163,
  0.453289866447449,
  0.453375339508057,
  0.453460782766342,
  0.453546226024628,
  0.453631669282913,
  0.453717112541199,
  0.453802555799484,
  0.45388799905777,
  0.453973412513733,
  0.454058825969696,
  0.454144269227982,
  0.454229682683945,
  0.454315066337585,
  0.454400479793549,
  0.454485893249512,
  0.454571276903152,
  0.454656690359116,
  0.454742074012756,
  0.454827457666397,
  0.454912841320038,
  0.454998195171356,
  0.455083578824997,
  0.455168962478638,
  0.455254316329956,
  0.455339670181274,
  0.455425053834915,
  0.455510377883911,
  0.455595731735229,
  0.455681085586548,
  0.455766409635544,
  0.455851763486862,
  0.455937087535858,
  0.456022411584854,
  0.45610773563385,
  0.456193059682846,
  0.456278383731842,
  0.456363677978516,
  0.456448972225189,
  0.456534266471863,
  0.456619590520859,
  0.456704884767532,
  0.456790149211884,
  0.456875443458557,
  0.456960737705231,
  0.457046002149582,
  0.457131266593933,
  0.457216560840607,
  0.457301795482635,
  0.457387059926987,
  0.457472324371338,
  0.457557588815689,
  0.457642823457718,
  0.457728058099747,
  0.457813292741776,
  0.457898527383804,
  0.457983762025833,
  0.458068996667862,
  0.458154231309891,
  0.458239436149597,
  0.458324640989304,
  0.45840984582901,
  0.458495050668716,
  0.458580255508423,
  0.458665460348129,
  0.458750635385513,
  0.45883584022522,
  0.458921015262604,
  0.459006190299988,
  0.459091365337372,
  0.459176540374756,
  0.45926171541214,
  0.459346890449524,
  0.459432035684586,
  0.459517180919647,
  0.459602326154709,
  0.459687501192093,
  0.459772616624832,
  0.459857761859894,
  0.459942907094955,
  0.460028022527695,
  0.460113137960434,
  0.460198283195496,
  0.460283398628235,
  0.460368514060974,
  0.460453599691391,
  0.46053871512413,
  0.460623800754547,
  0.460708916187286,
  0.460794001817703,
  0.46087908744812,
  0.460964173078537,
  0.461049228906631,
  0.461134314537048,
  0.461219400167465,
  0.46130445599556,
  0.461389511823654,
  0.461474567651749,
  0.461559623479843,
  0.461644679307938,
  0.46172970533371,
  0.461814761161804,
  0.461899787187576,
  0.461984813213348,
  0.46206983923912,
  0.462154865264893,
  0.462239891290665,
  0.462324917316437,
  0.462409913539886,
  0.462494909763336,
  0.462579905986786,
  0.462664932012558,
  0.462749898433685,
  0.462834894657135,
  0.462919890880585,
  0.463004857301712,
  0.463089853525162,
  0.463174819946289,
  0.463259786367416,
  0.463344752788544,
  0.463429719209671,
  0.463514655828476,
  0.463599622249603,
  0.463684558868408,
  0.463769495487213,
  0.463854432106018,
  0.463939368724823,
  0.464024305343628,
  0.464109241962433,
  0.464194148778915,
  0.464279055595398,
  0.464363992214203,
  0.464448869228363,
  0.464533776044846,
  0.464618682861328,
  0.464703589677811,
  0.464788466691971,
  0.464873373508453,
  0.464958250522614,
  0.465043127536774,
  0.465128004550934,
  0.465212851762772,
  0.465297728776932,
  0.46538257598877,
  0.46546745300293,
  0.465552300214767,
  0.465637147426605,
  0.465721994638443,
  0.465806841850281,
  0.465891659259796,
  0.465976506471634,
  0.466061323881149,
  0.466146141290665,
  0.46623095870018,
  0.466315776109695,
  0.466400593519211,
  0.466485381126404,
  0.466570198535919,
  0.466654986143112,
  0.466739773750305,
  0.466824561357498,
  0.466909348964691,
  0.466994136571884,
  0.467078924179077,
  0.467163681983948,
  0.467248439788818,
  0.467333197593689,
  0.46741795539856,
  0.46750271320343,
  0.467587471008301,
  0.467672228813171,
  0.46775695681572,
  0.467841684818268,
  0.467926442623138,
  0.468011140823364,
  0.468095868825912,
  0.468180596828461,
  0.468265324831009,
  0.468350023031235,
  0.468434721231461,
  0.468519419431686,
  0.468604117631912,
  0.468688815832138,
  0.468773514032364,
  0.46885821223259,
  0.468942880630493,
  0.469027549028397,
  0.4691122174263,
  0.469196885824203,
  0.469281554222107,
  0.46936622262001,
  0.469450861215591,
  0.469535529613495,
  0.469620168209076,
  0.469704806804657,
  0.469789445400238,
  0.469874083995819,
  0.4699587225914,
  0.470043331384659,
  0.470127940177917,
  0.470212578773499,
  0.470297187566757,
  0.470381796360016,
  0.470466375350952,
  0.470550984144211,
  0.470635592937469,
  0.470720171928406,
  0.470804750919342,
  0.470889329910278,
  0.470973908901215,
  0.471058487892151,
  0.471143066883087,
  0.471227616071701,
  0.471312165260315,
  0.471396744251251,
  0.471481293439865,
  0.471565842628479,
  0.471650391817093,
  0.471734911203384,
  0.471819460391998,
  0.47190397977829,
  0.471988499164581,
  0.472073018550873,
  0.472157537937164,
  0.472242057323456,
  0.472326546907425,
  0.472411066293716,
  0.472495555877686,
  0.472580045461655,
  0.472664564847946,
  0.472749024629593,
  0.472833514213562,
  0.472918003797531,
  0.473002463579178,
  0.473086923360825,
  0.473171412944794,
  0.47325587272644,
  0.473340302705765,
  0.473424762487411,
  0.473509222269058,
  0.473593652248383,
  0.473678082227707,
  0.473762512207031,
  0.473846942186356,
  0.47393137216568,
  0.474015802145004,
  0.474100202322006,
  0.474184632301331,
  0.474269032478333,
  0.474353432655334,
  0.474437832832336,
  0.474522233009338,
  0.47460663318634,
  0.47469100356102,
  0.474775403738022,
  0.474859774112701,
  0.474944144487381,
  0.475028514862061,
  0.475112855434418,
  0.475197225809097,
  0.475281566381454,
  0.475365936756134,
  0.475450277328491,
  0.475534617900848,
  0.475618958473206,
  0.475703299045563,
  0.475787609815598,
  0.475871950387955,
  0.47595626115799,
  0.476040571928024,
  0.476124912500381,
  0.476209193468094,
  0.476293504238129,
  0.476377785205841,
  0.476462095975876,
  0.476546376943588,
  0.476630657911301,
  0.476714938879013,
  0.476799219846725,
  0.476883500814438,
  0.47696778178215,
  0.47705203294754,
  0.47713628411293,
  0.47722053527832,
  0.47730478644371,
  0.4773890376091,
  0.47747328877449,
  0.477557510137558,
  0.477641761302948,
  0.477725982666016,
  0.477810204029083,
  0.477894425392151,
  0.477978646755219,
  0.478062838315964,
  0.478147059679031,
  0.478231251239777,
  0.478315472602844,
  0.478399664163589,
  0.478483825922012,
  0.478568017482758,
  0.478652209043503,
  0.478736370801926,
  0.478820562362671,
  0.478904724121094,
  0.478988885879517,
  0.479073017835617,
  0.47915717959404,
  0.479241341352463,
  0.479325473308563,
  0.479409605264664,
  0.479493767023087,
  0.479577898979187,
  0.479662030935287,
  0.479746133089066,
  0.479830265045166,
  0.479914367198944,
  0.479998469352722,
  0.4800825715065,
  0.480166703462601,
  0.480250775814056,
  0.480334877967834,
  0.48041895031929,
  0.480503052473068,
  0.480587124824524,
  0.48067119717598,
  0.480755269527435,
  0.480839341878891,
  0.480923384428024,
  0.48100745677948,
  0.481091499328613,
  0.481175541877747,
  0.48125958442688,
  0.481343626976013,
  0.481427669525146,
  0.481511682271957,
  0.481595724821091,
  0.481679737567902,
  0.481763750314713,
  0.481847763061523,
  0.481931775808334,
  0.482015788555145,
  0.482099771499634,
  0.482183784246445,
  0.482267767190933,
  0.482351750135422,
  0.48243573307991,
  0.482519716024399,
  0.482603669166565,
  0.482687652111053,
  0.48277160525322,
  0.482855558395386,
  0.482939511537552,
  0.483023464679718,
  0.483107417821884,
  0.48319137096405,
  0.483275294303894,
  0.483359217643738,
  0.483443170785904,
  0.483527094125748,
  0.483610987663269,
  0.483694911003113,
  0.483778834342957,
  0.483862727880478,
  0.483946621417999,
  0.484030544757843,
  0.484114408493042,
  0.484198302030563,
  0.484282195568085,
  0.484366059303284,
  0.484449952840805,
  0.484533816576004,
  0.484617680311203,
  0.484701544046402,
  0.484785407781601,
  0.484869241714478,
  0.484953105449677,
  0.485036939382553,
  0.48512077331543,
  0.485204607248306,
  0.485288441181183,
  0.485372275114059,
  0.485456079244614,
  0.48553991317749,
  0.485623717308044,
  0.485707521438599,
  0.485791325569153,
  0.485875129699707,
  0.485958933830261,
  0.486042708158493,
  0.486126512289047,
  0.486210286617279,
  0.486294060945511,
  0.48637780547142,
  0.486461579799652,
  0.486545354127884,
  0.486629098653793,
  0.486712872982025,
  0.486796617507935,
  0.486880362033844,
  0.486964106559753,
  0.487047851085663,
  0.48713156580925,
  0.487215310335159,
  0.487299025058746,
  0.487382739782333,
  0.48746645450592,
  0.487550169229507,
  0.487633854150772,
  0.487717568874359,
  0.487801253795624,
  0.487884938716888,
  0.487968653440475,
  0.488052308559418,
  0.488135993480682,
  0.488219678401947,
  0.488303333520889,
  0.488387018442154,
  0.488470673561096,
  0.488554328680038,
  0.488637983798981,
  0.488721609115601,
  0.488805264234543,
  0.488888889551163,
  0.488972544670105,
  0.489056169986725,
  0.489139765501022,
  0.489223390817642,
  0.489307016134262,
  0.489390641450882,
  0.489474236965179,
  0.489557832479477,
  0.489641427993774,
  0.489725023508072,
  0.489808619022369,
  0.489892184734344,
  0.489975780248642,
  0.490059345960617,
  0.490142911672592,
  0.490226477384567,
  0.490310043096542,
  0.490393608808517,
  0.49047714471817,
  0.490560710430145,
  0.490644246339798,
  0.490727782249451,
  0.490811318159103,
  0.490894854068756,
  0.490978360176086,
  0.491061896085739,
  0.491145402193069,
  0.4912289083004,
  0.49131241440773,
  0.49139592051506,
  0.491479426622391,
  0.491562932729721,
  0.491646409034729,
  0.491729885339737,
  0.491813361644745,
  0.491896837949753,
  0.491980314254761,
  0.492063790559769,
  0.492147237062454,
  0.492230713367462,
  0.492314159870148,
  0.492397606372833,
  0.492481052875519,
  0.492564469575882,
  0.492647916078568,
  0.492731362581253,
  0.492814779281616,
  0.492898195981979,
  0.492981612682343,
  0.493065029382706,
  0.493148416280746,
  0.49323183298111,
  0.49331521987915,
  0.493398606777191,
  0.493482023477554,
  0.493565410375595,
  0.493648767471313,
  0.493732154369354,
  0.493815511465073,
  0.493898898363113,
  0.493982255458832,
  0.49406561255455,
  0.494148969650269,
  0.494232296943665,
  0.494315654039383,
  0.494398981332779,
  0.494482338428497,
  0.494565665721893,
  0.494648993015289,
  0.494732290506363,
  0.494815617799759,
  0.494898915290833,
  0.494982242584229,
  0.495065540075302,
  0.495148837566376,
  0.495232135057449,
  0.495315432548523,
  0.495398700237274,
  0.495481997728348,
  0.495565265417099,
  0.49564853310585,
  0.495731800794601,
  0.495815068483353,
  0.495898306369781,
  0.495981574058533,
  0.496064811944962,
  0.49614804983139,
  0.496231287717819,
  0.496314525604248,
  0.496397763490677,
  0.496481001377106,
  0.496564209461212,
  0.496647417545319,
  0.496730625629425,
  0.496813863515854,
  0.496897041797638,
  0.496980249881744,
  0.497063428163528,
  0.497146636247635,
  0.497229814529419,
  0.497312992811203,
  0.497396171092987,
  0.497479349374771,
  0.497562497854233,
  0.497645676136017,
  0.497728824615479,
  0.49781197309494,
  0.497895121574402,
  0.497978270053864,
  0.498061388731003,
  0.498144537210464,
  0.498227655887604,
  0.498310804367065,
  0.498393923044205,
  0.498477041721344,
  0.498560130596161,
  0.4986432492733,
  0.498726338148117,
  0.498809427022934,
  0.498892545700073,
  0.49897563457489,
  0.499058723449707,
  0.499141782522202,
  0.499224871397018,
  0.499307930469513,
  0.499390989542007,
  0.499474048614502,
  0.499557107686996,
  0.499640166759491,
  0.499723196029663,
  0.499806255102158,
  0.49988928437233,
  0.499972313642502,
  0.500055372714996,
  0.500138401985168,
  0.500221371650696,
  0.500304400920868,
  0.50038743019104,
  0.500470399856567,
  0.50055342912674,
  0.500636398792267,
  0.500719428062439,
  0.500802397727966,
  0.500885367393494,
  0.500968337059021,
  0.501051306724548,
  0.501134276390076,
  0.501217246055603,
  0.50130021572113,
  0.501383185386658,
  0.501466155052185,
  0.501549065113068,
  0.501632034778595,
  0.501714944839478,
  0.50179785490036,
  0.501880824565887,
  0.50196373462677,
  0.502046644687653,
  0.502129554748535,
  0.502212464809418,
  0.5022953748703,
  0.502378284931183,
  0.502461194992065,
  0.502544045448303,
  0.502626955509186,
  0.502709805965424,
  0.502792716026306,
  0.502875566482544,
  0.502958416938782,
  0.503041326999664,
  0.503124177455902,
  0.50320702791214,
  0.503289878368378,
  0.503372728824615,
  0.503455579280853,
  0.503538370132446,
  0.503621220588684,
  0.503704011440277,
  0.503786861896515,
  0.503869652748108,
  0.503952503204346,
  0.504035294055939,
  0.504118084907532,
  0.504200875759125,
  0.504283666610718,
  0.504366457462311,
  0.504449248313904,
  0.504532039165497,
  0.50461483001709,
  0.504697561264038,
  0.504780352115631,
  0.504863083362579,
  0.504945874214172,
  0.505028605461121,
  0.505111336708069,
  0.505194127559662,
  0.50527685880661,
  0.505359590053558,
  0.505442321300507,
  0.505525052547455,
  0.505607724189758,
  0.505690455436707,
  0.505773186683655,
  0.505855858325958,
  0.505938589572906,
  0.50602126121521,
  0.506103932857513,
  0.506186664104462,
  0.506269335746765,
  0.506352007389069,
  0.506434679031372,
  0.506517350673676,
  0.506600022315979,
  0.506682634353638,
  0.506765305995941,
  0.506847977638245,
  0.506930589675903,
  0.507013261318207,
  0.507095873355865,
  0.507178544998169,
  0.507261157035828,
  0.507343769073486,
  0.507426381111145,
  0.507508993148804,
  0.507591605186462,
  0.507674217224121,
  0.50775682926178,
  0.507839381694794,
  0.507921993732452,
  0.508004546165466,
  0.508087158203125,
  0.508169710636139,
  0.508252263069153,
  0.508334875106812,
  0.508417427539825,
  0.508499979972839,
  0.508582532405853,
  0.508665084838867,
  0.508747637271881,
  0.50883013010025,
  0.508912682533264,
  0.508995175361633,
  0.509077727794647,
  0.509160220623016,
  0.50924277305603,
  0.509325265884399,
  0.509407758712769,
  0.509490251541138,
  0.509572744369507,
  0.509655237197876,
  0.509737730026245,
  0.509820222854614,
  0.509902715682983,
  0.509985148906708,
  0.510067641735077,
  0.510150074958801,
  0.51023256778717,
  0.510315001010895,
  0.510397434234619,
  0.510479927062988,
  0.510562360286713,
  0.510644793510437,
  0.510727226734161,
  0.510809600353241,
  0.510892033576965,
  0.51097446680069,
  0.511056840419769,
  0.511139273643494,
  0.511221706867218,
  0.511304080486298,
  0.511386454105377,
  0.511468827724457,
  0.511551201343536,
  0.511633634567261,
  0.51171600818634,
  0.511798322200775,
  0.511880695819855,
  0.511963069438934,
  0.512045443058014,
  0.512127757072449,
  0.512210130691528,
  0.512292444705963,
  0.512374818325043,
  0.512457132339478,
  0.512539446353912,
  0.512621760368347,
  0.512704074382782,
  0.512786388397217,
  0.512868702411652,
  0.512951016426086,
  0.513033330440521,
  0.513115584850311,
  0.513197898864746,
  0.513280153274536,
  0.513362467288971,
  0.513444721698761,
  0.513526976108551,
  0.513609230518341,
  0.513691544532776,
  0.513773798942566,
  0.513855993747711,
  0.513938248157501,
  0.514020502567291,
  0.514102756977081,
  0.514184951782227,
  0.514267206192017,
  0.514349400997162,
  0.514431655406952,
  0.514513850212097,
  0.514596045017242,
  0.514678239822388,
  0.514760434627533,
  0.514842689037323,
  0.514924824237823,
  0.515007019042969,
  0.515089213848114,
  0.515171408653259,
  0.51525354385376,
  0.515335738658905,
  0.515417873859406,
  0.515500009059906,
  0.515582203865051,
  0.515664339065552,
  0.515746474266052,
  0.515828609466553,
  0.515910744667053,
  0.515992879867554,
  0.516075015068054,
  0.51615709066391,
  0.51623922586441,
  0.516321301460266,
  0.516403436660767,
  0.516485512256622,
  0.516567647457123,
  0.516649723052979,
  0.516731798648834,
  0.51681387424469,
  0.516895949840546,
  0.516978025436401,
  0.517060101032257,
  0.517142176628113,
  0.517224192619324,
  0.517306268215179,
  0.51738828420639,
  0.517470359802246,
  0.517552375793457,
  0.517634391784668,
  0.517716467380524,
  0.517798483371735,
  0.517880499362946,
  0.517962515354156,
  0.518044471740723,
  0.518126487731934,
  0.518208503723145,
  0.518290519714355,
  0.518372476100922,
  0.518454492092133,
  0.518536448478699,
  0.518618404865265,
  0.518700420856476,
  0.518782377243042,
  0.518864333629608,
  0.518946290016174,
  0.51902824640274,
  0.519110202789307,
  0.519192099571228,
  0.519274055957794,
  0.51935601234436,
  0.519437909126282,
  0.519519865512848,
  0.519601762294769,
  0.519683659076691,
  0.519765555858612,
  0.519847452640533,
  0.5199294090271,
  0.520011305809021,
  0.520093142986298,
  0.520175039768219,
  0.52025693655014,
  0.520338773727417,
  0.520420670509338,
  0.52050256729126,
  0.520584404468536,
  0.520666241645813,
  0.52074807882309,
  0.520829975605011,
  0.520911812782288,
  0.520993649959564,
  0.521075487136841,
  0.521157264709473,
  0.521239101886749,
  0.521320939064026,
  0.521402716636658,
  0.521484553813934,
  0.521566331386566,
  0.521648168563843,
  0.521729946136475,
  0.521811723709106,
  0.521893501281738,
  0.52197527885437,
  0.522057056427002,
  0.522138833999634,
  0.522220611572266,
  0.522302389144897,
  0.522384107112885,
  0.522465884685516,
  0.522547602653503,
  0.52262932062149,
  0.522711098194122,
  0.522792816162109,
  0.522874534130096,
  0.522956252098083,
  0.523037970066071,
  0.523119688034058,
  0.523201406002045,
  0.523283123970032,
  0.523364782333374,
  0.523446500301361,
  0.523528158664703,
  0.52360987663269,
  0.523691534996033,
  0.523773193359375,
  0.523854851722717,
  0.523936569690704,
  0.524018228054047,
  0.524099886417389,
  0.524181485176086,
  0.524263143539429,
  0.524344801902771,
  0.524426400661469,
  0.524508059024811,
  0.524589657783508,
  0.524671316146851,
  0.524752914905548,
  0.524834513664246,
  0.524916112422943,
  0.524997711181641,
  0.525079309940338,
  0.525160908699036,
  0.525242507457733,
  0.525324106216431,
  0.525405645370483,
  0.525487244129181,
  0.525568783283234,
  0.525650382041931,
  0.525731921195984,
  0.525813460350037,
  0.525895059108734,
  0.525976598262787,
  0.52605813741684,
  0.526139616966248,
  0.5262211561203,
  0.526302695274353,
  0.526384234428406,
  0.526465713977814,
  0.526547253131866,
  0.526628732681274,
  0.526710212230682,
  0.526791751384735,
  0.526873230934143,
  0.526954710483551,
  0.527036190032959,
  0.527117669582367,
  0.527199149131775,
  0.527280628681183,
  0.527362048625946,
  0.527443528175354,
  0.527524948120117,
  0.527606427669525,
  0.527687847614288,
  0.527769267559052,
  0.527850747108459,
  0.527932167053223,
  0.528013586997986,
  0.528095006942749,
  0.528176426887512,
  0.528257787227631,
  0.528339207172394,
  0.528420627117157,
  0.528501987457275,
  0.528583407402039,
  0.528664767742157,
  0.528746128082275,
  0.528827548027039,
  0.528908908367157,
  0.528990268707275,
  0.529071629047394,
  0.529152989387512,
  0.529234349727631,
  0.529315650463104,
  0.529397010803223,
  0.529478311538696,
  0.529559671878815,
  0.529640972614288,
  0.529722332954407,
  0.52980363368988,
  0.529884934425354,
  0.529966235160828,
  0.530047535896301,
  0.530128836631775,
  0.530210137367249,
  0.530291438102722,
  0.530372679233551,
  0.530453979969025,
  0.530535221099854,
  0.530616521835327,
  0.530697762966156,
  0.530779004096985,
  0.530860304832458,
  0.530941545963287,
  0.531022787094116,
  0.531104028224945,
  0.531185209751129,
  0.531266450881958,
  0.531347692012787,
  0.531428873538971,
  0.5315101146698,
  0.531591296195984,
  0.531672537326813,
  0.531753718852997,
  0.531834900379181,
  0.531916081905365,
  0.531997263431549,
  0.532078444957733,
  0.532159626483917,
  0.532240808010101,
  0.532321989536285,
  0.532403111457825,
  0.532484292984009,
  0.532565414905548,
  0.532646596431732,
  0.532727718353271,
  0.532808840274811,
  0.53288996219635,
  0.532971084117889,
  0.533052206039429,
  0.533133327960968,
  0.533214449882507,
  0.533295571804047,
  0.533376634120941,
  0.53345775604248,
  0.533538818359375,
  0.533619940280914,
  0.533701002597809,
  0.533782064914703,
  0.533863127231598,
  0.533944189548492,
  0.534025251865387,
  0.534106314182281,
  0.534187376499176,
  0.534268438816071,
  0.53434944152832,
  0.534430503845215,
  0.534511566162109,
  0.534592568874359,
  0.534673571586609,
  0.534754574298859,
  0.534835636615753,
  0.534916639328003,
  0.534997642040253,
  0.535078644752502,
  0.535159587860107,
  0.535240590572357,
  0.535321593284607,
  0.535402536392212,
  0.535483539104462,
  0.535564482212067,
  0.535645484924316,
  0.535726428031921,
  0.535807371139526,
  0.535888314247131,
  0.535969257354736,
  0.536050200462341,
  0.536131143569946,
  0.536212086677551,
  0.536292970180511,
  0.536373913288116,
  0.536454796791077,
  0.536535739898682,
  0.536616623401642,
  0.536697506904602,
  0.536778390407562,
  0.536859273910522,
  0.536940217018127,
  0.537021040916443,
  0.537101924419403,
  0.537182807922363,
  0.537263691425323,
  0.537344515323639,
  0.537425398826599,
  0.537506222724915,
  0.537587106227875,
  0.53766793012619,
  0.537748754024506,
  0.537829577922821,
  0.537910401821136,
  0.537991225719452,
  0.538072049617767,
  0.538152873516083,
  0.538233637809753,
  0.538314461708069,
  0.53839522600174,
  0.538476049900055,
  0.538556814193726,
  0.538637578487396,
  0.538718342781067,
  0.538799166679382,
  0.538879930973053,
  0.538960695266724,
  0.53904139995575,
  0.53912216424942,
  0.539202928543091,
  0.539283633232117,
  0.539364397525787,
  0.539445102214813,
  0.539525866508484,
  0.53960657119751,
  0.539687275886536,
  0.539767980575562,
  0.539848685264587,
  0.539929389953613,
  0.540010094642639,
  0.540090799331665,
  0.540171444416046,
  0.540252149105072,
  0.540332853794098,
  0.540413498878479,
  0.54049414396286,
  0.540574848651886,
  0.540655493736267,
  0.540736138820648,
  0.540816783905029,
  0.54089742898941,
  0.540978074073792,
  0.541058719158173,
  0.541139304637909,
  0.54121994972229,
  0.541300535202026,
  0.541381180286407,
  0.541461765766144,
  0.54154235124588,
  0.541622936725616,
  0.541703522205353,
  0.541784167289734,
  0.541864693164825,
  0.541945278644562,
  0.542025864124298,
  0.542106449604034,
  0.542186975479126,
  0.542267560958862,
  0.542348086833954,
  0.54242867231369,
  0.542509198188782,
  0.542589724063873,
  0.542670249938965,
  0.542750775814056,
  0.542831301689148,
  0.54291182756424,
  0.542992353439331,
  0.543072819709778,
  0.543153345584869,
  0.543233811855316,
  0.543314337730408,
  0.543394804000854,
  0.543475270271301,
  0.543555796146393,
  0.54363626241684,
  0.543716728687286,
  0.543797194957733,
  0.543877601623535,
  0.543958067893982,
  0.544038534164429,
  0.544118940830231,
  0.544199407100677,
  0.544279813766479,
  0.544360280036926,
  0.544440686702728,
  0.54452109336853,
  0.544601500034332,
  0.544681906700134,
  0.544762313365936,
  0.544842720031738,
  0.54492312669754,
  0.545003473758698,
  0.5450838804245,
  0.545164227485657,
  0.545244634151459,
  0.545324981212616,
  0.545405328273773,
  0.545485734939575,
  0.545566082000732,
  0.54564642906189,
  0.545726716518402,
  0.545807063579559,
  0.545887410640717,
  0.545967757701874,
  0.546048045158386,
  0.546128392219543,
  0.546208679676056,
  0.546288967132568,
  0.546369314193726,
  0.546449601650238,
  0.54652988910675,
  0.546610176563263,
  0.546690464019775,
  0.546770691871643,
  0.546850979328156,
  0.546931266784668,
  0.547011494636536,
  0.547091782093048,
  0.547172009944916,
  0.547252297401428,
  0.547332525253296,
  0.547412753105164,
  0.547492980957031,
  0.547573208808899,
  0.547653436660767,
  0.547733664512634,
  0.547813832759857,
  0.547894060611725,
  0.547974288463593,
  0.548054456710815,
  0.548134624958038,
  0.548214852809906,
  0.548295021057129,
  0.548375189304352,
  0.548455357551575,
  0.548535525798798,
  0.548615694046021,
  0.548695862293243,
  0.548775970935822,
  0.548856139183044,
  0.548936247825623,
  0.549016416072845,
  0.549096524715424,
  0.549176633358002,
  0.549256801605225,
  0.549336910247803,
  0.549417018890381,
  0.549497127532959,
  0.549577236175537,
  0.54965728521347,
  0.549737393856049,
  0.549817502498627,
  0.54989755153656,
  0.549977600574493,
  0.550057709217072,
  0.550137758255005,
  0.550217807292938,
  0.550297856330872,
  0.550377905368805,
  0.550457954406738,
  0.550538003444672,
  0.550618052482605,
  0.550698041915894,
  0.550778090953827,
  0.55085813999176,
  0.550938129425049,
  0.551018118858337,
  0.551098167896271,
  0.551178157329559,
  0.551258146762848,
  0.551338136196136,
  0.551418125629425,
  0.551498055458069,
  0.551578044891357,
  0.551658034324646,
  0.55173796415329,
  0.551817953586578,
  0.551897883415222,
  0.551977872848511,
  0.552057802677155,
  0.552137732505798,
  0.552217662334442,
  0.552297592163086,
  0.55237752199173,
  0.552457451820374,
  0.552537322044373,
  0.552617251873016,
  0.552697122097015,
  0.552777051925659,
  0.552856922149658,
  0.552936792373657,
  0.553016722202301,
  0.5530965924263,
  0.553176462650299,
  0.553256332874298,
  0.553336203098297,
  0.553416013717651,
  0.55349588394165,
  0.553575754165649,
  0.553655564785004,
  0.553735435009003,
  0.553815245628357,
  0.553895056247711,
  0.553974866867065,
  0.554054737091064,
  0.554134547710419,
  0.554214298725128,
  0.554294109344482,
  0.554373919963837,
  0.554453730583191,
  0.5545334815979,
  0.554613292217255,
  0.554693043231964,
  0.554772794246674,
  0.554852604866028,
  0.554932355880737,
  0.555012106895447,
  0.555091857910156,
  0.555171608924866,
  0.55525130033493,
  0.55533105134964,
  0.555410802364349,
  0.555490493774414,
  0.555570244789124,
  0.555649936199188,
  0.555729687213898,
  0.555809378623962,
  0.555889070034027,
  0.555968761444092,
  0.556048452854156,
  0.556128144264221,
  0.556207776069641,
  0.556287467479706,
  0.556367158889771,
  0.55644679069519,
  0.556526482105255,
  0.556606113910675,
  0.556685745716095,
  0.556765377521515,
  0.55684506893158,
  0.556924641132355,
  0.557004272937775,
  0.557083904743195,
  0.557163536548615,
  0.557243168354034,
  0.55732274055481,
  0.557402372360229,
  0.557481944561005,
  0.55756151676178,
  0.5576411485672,
  0.557720720767975,
  0.55780029296875,
  0.557879865169525,
  0.5579594373703,
  0.558039009571075,
  0.558118522167206,
  0.558198094367981,
  0.558277606964111,
  0.558357179164886,
  0.558436691761017,
  0.558516204357147,
  0.558595776557922,
  0.558675289154053,
  0.558754801750183,
  0.558834314346313,
  0.558913826942444,
  0.558993279933929,
  0.55907279253006,
  0.55915230512619,
  0.559231758117676,
  0.559311211109161,
  0.559390723705292,
  0.559470176696777,
  0.559549629688263,
  0.559629082679749,
  0.559708535671234,
  0.55978798866272,
  0.559867441654205,
  0.559946894645691,
  0.560026288032532,
  0.560105741024017,
  0.560185134410858,
  0.560264587402344,
  0.560343980789185,
  0.560423374176025,
  0.560502767562866,
  0.560582160949707,
  0.560661554336548,
  0.560740947723389,
  0.560820341110229,
  0.56089973449707,
  0.560979068279266,
  0.561058461666107,
  0.561137795448303,
  0.561217188835144,
  0.56129652261734,
  0.561375856399536,
  0.561455190181732,
  0.561534523963928,
  0.561613857746124,
  0.56169319152832,
  0.561772525310516,
  0.561851799488068,
  0.561931133270264,
  0.562010407447815,
  0.562089741230011,
  0.562169015407562,
  0.562248289585114,
  0.562327563762665,
  0.562406837940216,
  0.562486112117767,
  0.562565386295319,
  0.56264466047287,
  0.562723934650421,
  0.562803149223328,
  0.562882423400879,
  0.562961637973785,
  0.563040912151337,
  0.563120126724243,
  0.56319934129715,
  0.563278555870056,
  0.563357770442963,
  0.563436985015869,
  0.563516199588776,
  0.563595414161682,
  0.563674569129944,
  0.56375378370285,
  0.563832938671112,
  0.563912153244019,
  0.56399130821228,
  0.564070463180542,
  0.564149618148804,
  0.564228773117065,
  0.564307928085327,
  0.564387083053589,
  0.564466238021851,
  0.564545392990112,
  0.564624488353729,
  0.564703643321991,
  0.564782738685608,
  0.56486189365387,
  0.564940989017487,
  0.565020084381104,
  0.56509917974472,
  0.565178275108337,
  0.565257370471954,
  0.565336465835571,
  0.565415561199188,
  0.56549459695816,
  0.565573692321777,
  0.56565272808075,
  0.565731823444366,
  0.565810859203339,
  0.565889894962311,
  0.565968930721283,
  0.5660480260849,
  0.566127002239227,
  0.566206037998199,
  0.566285073757172,
  0.566364109516144,
  0.566443085670471,
  0.566522121429443,
  0.566601097583771,
  0.566680133342743,
  0.56675910949707,
  0.566838085651398,
  0.566917061805725,
  0.566996037960052,
  0.56707501411438,
  0.567153990268707,
  0.567232966423035,
  0.567311882972717,
  0.567390859127045,
  0.567469775676727,
  0.567548751831055,
  0.567627668380737,
  0.56770658493042,
  0.567785501480103,
  0.567864418029785,
  0.567943334579468,
  0.56802225112915,
  0.568101167678833,
  0.568180084228516,
  0.568258941173553,
  0.568337857723236,
  0.568416714668274,
  0.568495571613312,
  0.568574488162994,
  0.568653345108032,
  0.56873220205307,
  0.568811058998108,
  0.568889915943146,
  0.568968772888184,
  0.569047570228577,
  0.569126427173615,
  0.569205224514008,
  0.569284081459045,
  0.569362878799438,
  0.569441735744476,
  0.569520533084869,
  0.569599330425262,
  0.569678127765656,
  0.569756925106049,
  0.569835722446442,
  0.56991446018219,
  0.569993257522583,
  0.570072054862976,
  0.570150792598724,
  0.570229530334473,
  0.570308327674866,
  0.570387065410614,
  0.570465803146362,
  0.570544540882111,
  0.570623278617859,
  0.570702016353607,
  0.570780754089355,
  0.570859491825104,
  0.570938169956207,
  0.571016907691956,
  0.571095585823059,
  0.571174263954163,
  0.571253001689911,
  0.571331679821014,
  0.571410357952118,
  0.571489036083221,
  0.571567714214325,
  0.571646392345428,
  0.571725010871887,
  0.571803689002991,
  0.571882367134094,
  0.571960985660553,
  0.572039604187012,
  0.572118282318115,
  0.572196900844574,
  0.572275519371033,
  0.572354137897491,
  0.57243275642395,
  0.572511374950409,
  0.572589993476868,
  0.572668552398682,
  0.57274717092514,
  0.572825729846954,
  0.572904348373413,
  0.572982907295227,
  0.573061466217041,
  0.573140025138855,
  0.573218584060669,
  0.573297142982483,
  0.573375701904297,
  0.573454260826111,
  0.573532819747925,
  0.573611319065094,
  0.573689877986908,
  0.573768377304077,
  0.573846936225891,
  0.57392543554306,
  0.574003934860229,
  0.574082434177399,
  0.574160933494568,
  0.574239432811737,
  0.574317932128906,
  0.574396431446075,
  0.5744748711586,
  0.574553370475769,
  0.574631810188293,
  0.574710309505463,
  0.574788749217987,
  0.574867188930511,
  0.574945628643036,
  0.57502406835556,
  0.575102508068085,
  0.575180947780609,
  0.575259387493134,
  0.575337767601013,
  0.575416207313538,
  0.575494587421417,
  0.575573027133942,
  0.575651407241821,
  0.575729787349701,
  0.575808167457581,
  0.57588654756546,
  0.57596492767334,
  0.576043307781219,
  0.576121687889099,
  0.576200067996979,
  0.576278388500214,
  0.576356768608093,
  0.576435089111328,
  0.576513469219208,
  0.576591789722443,
  0.576670110225677,
  0.576748430728912,
  0.576826751232147,
  0.576905071735382,
  0.576983392238617,
  0.577061653137207,
  0.577139973640442,
  0.577218234539032,
  0.577296555042267,
  0.577374815940857,
  0.577453136444092,
  0.577531397342682,
  0.577609658241272,
  0.577687919139862,
  0.577766180038452,
  0.577844381332397,
  0.577922642230988,
  0.578000903129578,
  0.578079104423523,
  0.578157365322113,
  0.578235566616058,
  0.578313827514648,
  0.578392028808594,
  0.578470230102539,
  0.578548431396484,
  0.57862663269043,
  0.578704833984375,
  0.578782975673676,
  0.578861176967621,
  0.578939378261566,
  0.579017519950867,
  0.579095661640167,
  0.579173862934113,
  0.579252004623413,
  0.579330146312714,
  0.579408288002014,
  0.579486429691315,
  0.579564571380615,
  0.579642713069916,
  0.579720795154572,
  0.579798936843872,
  0.579877018928528,
  0.579955160617828,
  0.580033242702484,
  0.58011132478714,
  0.580189406871796,
  0.580267488956451,
  0.580345571041107,
  0.580423653125763,
  0.580501735210419,
  0.580579817295074,
  0.580657839775085,
  0.580735921859741,
  0.580813944339752,
  0.580892026424408,
  0.580970048904419,
  0.58104807138443,
  0.581126093864441,
  0.581204116344452,
  0.581282138824463,
  0.581360161304474,
  0.58143812417984,
  0.581516146659851,
  0.581594169139862,
  0.581672132015228,
  0.581750094890594,
  0.581828117370605,
  0.581906080245972,
  0.581984043121338,
  0.582062005996704,
  0.58213996887207,
  0.582217872142792,
  0.582295835018158,
  0.582373797893524,
  0.582451701164246,
  0.582529664039612,
  0.582607567310333,
  0.582685470581055,
  0.582763433456421,
  0.582841336727142,
  0.582919239997864,
  0.582997143268585,
  0.583074986934662,
  0.583152890205383,
  0.583230793476105,
  0.583308637142181,
  0.583386540412903,
  0.583464384078979,
  0.583542227745056,
  0.583620071411133,
  0.583697974681854,
  0.583775818347931,
  0.583853662014008,
  0.583931446075439,
  0.584009289741516,
  0.584087133407593,
  0.584164917469025,
  0.584242761135101,
  0.584320545196533,
  0.58439838886261,
  0.584476172924042,
  0.584553956985474,
  0.584631741046906,
  0.584709525108337,
  0.584787309169769,
  0.584865033626556,
  0.584942817687988,
  0.585020542144775,
  0.585098326206207,
  0.585176050662994,
  0.585253834724426,
  0.585331559181213,
  0.585409283638,
  0.585487008094788,
  0.585564732551575,
  0.585642457008362,
  0.585720121860504,
  0.585797846317291,
  0.585875570774078,
  0.585953235626221,
  0.586030960083008,
  0.58610862493515,
  0.586186289787292,
  0.586263954639435,
  0.586341619491577,
  0.586419284343719,
  0.586496949195862,
  0.586574614048004,
  0.586652278900146,
  0.586729884147644,
  0.586807548999786,
  0.586885154247284,
  0.586962759494781,
  0.587040364742279,
  0.587118029594421,
  0.587195634841919,
  0.587273240089417,
  0.587350785732269,
  0.587428390979767,
  0.587505996227264,
  0.587583541870117,
  0.587661147117615,
  0.587738692760468,
  0.587816298007965,
  0.587893843650818,
  0.587971389293671,
  0.588048934936523,
  0.588126480579376,
  0.588204026222229,
  0.588281571865082,
  0.58835905790329,
  0.588436603546143,
  0.588514089584351,
  0.588591635227203,
  0.588669121265411,
  0.588746607303619,
  0.588824093341827,
  0.58890163898468,
  0.588979065418243,
  0.589056551456451,
  0.589134037494659,
  0.589211523532867,
  0.589288949966431,
  0.589366436004639,
  0.589443862438202,
  0.58952134847641,
  0.589598774909973,
  0.589676201343536,
  0.5897536277771,
  0.589831054210663,
  0.589908480644226,
  0.589985907077789,
  0.590063273906708,
  0.590140700340271,
  0.590218067169189,
  0.590295493602753,
  0.590372860431671,
  0.59045022726059,
  0.590527594089508,
  0.590604960918427,
  0.590682327747345,
  0.590759694576263,
  0.590837061405182,
  0.5909144282341,
  0.590991735458374,
  0.591069102287292,
  0.591146409511566,
  0.59122371673584,
  0.591301083564758,
  0.591378390789032,
  0.591455698013306,
  0.591533005237579,
  0.591610252857208,
  0.591687560081482,
  0.591764867305756,
  0.591842174530029,
  0.591919422149658,
  0.591996669769287,
  0.592073976993561,
  0.59215122461319,
  0.592228472232819,
  0.592305719852448,
  0.592382967472076,
  0.592460215091705,
  0.592537462711334,
  0.592614650726318,
  0.592691898345947,
  0.592769086360931,
  0.59284633398056,
  0.592923521995544,
  0.593000710010529,
  0.593077898025513,
  0.593155086040497,
  0.593232274055481,
  0.593309462070465,
  0.593386650085449,
  0.593463838100433,
  0.593540966510773,
  0.593618154525757,
  0.593695282936096,
  0.593772411346436,
  0.59384959936142,
  0.593926727771759,
  0.594003856182098,
  0.594080984592438,
  0.594158053398132,
  0.594235181808472,
  0.594312310218811,
  0.594389379024506,
  0.594466507434845,
  0.59454357624054,
  0.594620704650879,
  0.594697773456573,
  0.594774842262268,
  0.594851911067963,
  0.594928979873657,
  0.595006048679352,
  0.595083057880402,
  0.595160126686096,
  0.595237195491791,
  0.595314204692841,
  0.59539121389389,
  0.595468282699585,
  0.595545291900635,
  0.595622301101685,
  0.595699310302734,
  0.595776319503784,
  0.595853328704834,
  0.595930278301239,
  0.596007287502289,
  0.596084296703339,
  0.596161246299744,
  0.596238195896149,
  0.596315205097198,
  0.596392154693604,
  0.596469104290009,
  0.596546053886414,
  0.596623003482819,
  0.596699953079224,
  0.596776843070984,
  0.596853792667389,
  0.596930682659149,
  0.597007632255554,
  0.597084522247314,
  0.597161412239075,
  0.59723836183548,
  0.59731525182724,
  0.597392141819,
  0.59746903181076,
  0.597545862197876,
  0.597622752189636,
  0.597699642181396,
  0.597776472568512,
  0.597853362560272,
  0.597930192947388,
  0.598007023334503,
  0.598083853721619,
  0.598160684108734,
  0.59823751449585,
  0.598314344882965,
  0.598391175270081,
  0.598468005657196,
  0.598544776439667,
  0.598621606826782,
  0.598698377609253,
  0.598775207996368,
  0.598851978778839,
  0.59892874956131,
  0.599005520343781,
  0.599082291126251,
  0.599159061908722,
  0.599235773086548,
  0.599312543869019,
  0.599389314651489,
  0.599466025829315,
  0.599542796611786,
  0.599619507789612,
  0.599696218967438,
  0.599772930145264,
  0.59984964132309,
  0.599926352500916,
  0.600003063678741,
  0.600079774856567,
  0.600156426429749,
  0.600233137607574,
  0.6003098487854,
  0.600386500358582,
  0.600463151931763,
  0.600539803504944,
  0.600616455078125,
  0.600693106651306,
  0.600769758224487,
  0.600846409797668,
  0.60092306137085,
  0.600999653339386,
  0.601076304912567,
  0.601152956485748,
  0.601229548454285,
  0.601306140422821,
  0.601382732391357,
  0.601459324359894,
  0.60153591632843,
  0.601612508296967,
  0.601689100265503,
  0.601765692234039,
  0.601842224597931,
  0.601918816566467,
  0.601995348930359,
  0.602071940898895,
  0.602148473262787,
  0.602225005626678,
  0.60230153799057,
  0.602378070354462,
  0.602454602718353,
  0.602531135082245,
  0.602607607841492,
  0.602684140205383,
  0.60276061296463,
  0.602837145328522,
  0.602913618087769,
  0.602990090847015,
  0.603066623210907,
  0.603143095970154,
  0.603219568729401,
  0.603295981884003,
  0.60337245464325,
  0.603448927402496,
  0.603525340557098,
  0.603601813316345,
  0.603678226470947,
  0.603754699230194,
  0.603831112384796,
  0.603907525539398,
  0.603983938694,
  0.604060351848602,
  0.604136765003204,
  0.604213118553162,
  0.604289531707764,
  0.604365944862366,
  0.604442298412323,
  0.60451865196228,
  0.604595065116882,
  0.60467141866684,
  0.604747772216797,
  0.604824125766754,
  0.604900479316711,
  0.604976832866669,
  0.605053126811981,
  0.605129480361938,
  0.605205774307251,
  0.605282127857208,
  0.605358421802521,
  0.605434715747833,
  0.605511069297791,
  0.605587363243103,
  0.605663657188416,
  0.605739891529083,
  0.605816185474396,
  0.605892479419708,
  0.605968713760376,
  0.606045007705688,
  0.606121242046356,
  0.606197535991669,
  0.606273770332336,
  0.606350004673004,
  0.606426239013672,
  0.60650247335434,
  0.606578707695007,
  0.60665488243103,
  0.606731116771698,
  0.606807351112366,
  0.606883525848389,
  0.606959700584412,
  0.607035934925079,
  0.607112109661102,
  0.607188284397125,
  0.607264459133148,
  0.607340633869171,
  0.607416808605194,
  0.607492983341217,
  0.607569098472595,
  0.607645273208618,
  0.607721388339996,
  0.607797503471375,
  0.607873678207397,
  0.607949793338776,
  0.608025908470154,
  0.608102023601532,
  0.60817813873291,
  0.608254253864288,
  0.608330309391022,
  0.6084064245224,
  0.608482480049133,
  0.608558595180511,
  0.608634650707245,
  0.608710706233978,
  0.608786761760712,
  0.608862817287445,
  0.608938872814178,
  0.609014928340912,
  0.609090983867645,
  0.609167039394379,
  0.609243035316467,
  0.609319090843201,
  0.609395086765289,
  0.609471082687378,
  0.609547078609467,
  0.609623074531555,
  0.609699070453644,
  0.609775066375732,
  0.609851062297821,
  0.60992705821991,
  0.610002994537354,
  0.610078990459442,
  0.610154926776886,
  0.610230922698975,
  0.610306859016418,
  0.610382795333862,
  0.610458731651306,
  0.61053466796875,
  0.610610604286194,
  0.610686540603638,
  0.610762476921082,
  0.610838353633881,
  0.61091423034668,
  0.610990166664124,
  0.611066043376923,
  0.611141979694366,
  0.611217856407166,
  0.611293733119965,
  0.611369550228119,
  0.611445426940918,
  0.611521303653717,
  0.611597180366516,
  0.61167299747467,
  0.611748874187469,
  0.611824691295624,
  0.611900508403778,
  0.611976385116577,
  0.612052202224731,
  0.612128019332886,
  0.612203776836395,
  0.61227959394455,
  0.612355411052704,
  0.612431228160858,
  0.612506985664368,
  0.612582743167877,
  0.612658560276031,
  0.612734317779541,
  0.612810075283051,
  0.61288583278656,
  0.61296159029007,
  0.613037347793579,
  0.613113105297089,
  0.613188803195953,
  0.613264560699463,
  0.613340258598328,
  0.613416016101837,
  0.613491714000702,
  0.613567411899567,
  0.613643109798431,
  0.613718807697296,
  0.613794505596161,
  0.613870203495026,
  0.61394590139389,
  0.61402153968811,
  0.614097237586975,
  0.614172875881195,
  0.61424857378006,
  0.61432421207428,
  0.6143998503685,
  0.61447548866272,
  0.61455112695694,
  0.61462676525116,
  0.61470240354538,
  0.614777982234955,
  0.614853620529175,
  0.61492919921875,
  0.61500483751297,
  0.615080416202545,
  0.61515599489212,
  0.615231573581696,
  0.615307152271271,
  0.615382730960846,
  0.615458309650421,
  0.615533888339996,
  0.615609407424927,
  0.615684986114502,
  0.615760505199432,
  0.615836083889008,
  0.615911602973938,
  0.615987122058868,
  0.616062641143799,
  0.616138160228729,
  0.61621367931366,
  0.61628919839859,
  0.616364657878876,
  0.616440176963806,
  0.616515636444092,
  0.616591155529022,
  0.616666615009308,
  0.616742074489594,
  0.616817533969879,
  0.616892993450165,
  0.61696845293045,
  0.617043912410736,
  0.617119371891022,
  0.617194771766663,
  0.617270231246948,
  0.617345631122589,
  0.617421090602875,
  0.617496490478516,
  0.617571890354156,
  0.617647290229797,
  0.617722690105438,
  0.617798089981079,
  0.61787348985672,
  0.617948889732361,
  0.618024230003357,
  0.618099629878998,
  0.618174970149994,
  0.61825031042099,
  0.618325650691986,
  0.618401050567627,
  0.618476390838623,
  0.618551671504974,
  0.61862701177597,
  0.618702352046967,
  0.618777692317963,
  0.618852972984314,
  0.61892831325531,
  0.619003593921661,
  0.619078874588013,
  0.619154155254364,
  0.619229435920715,
  0.619304716587067,
  0.619379997253418,
  0.619455277919769,
  0.619530558586121,
  0.619605779647827,
  0.619681060314178,
  0.619756281375885,
  0.619831502437592,
  0.619906783103943,
  0.619982004165649,
  0.620057225227356,
  0.620132446289062,
  0.620207667350769,
  0.620282828807831,
  0.620358049869537,
  0.620433211326599,
  0.620508432388306,
  0.620583593845367,
  0.620658755302429,
  0.620733976364136,
  0.620809137821198,
  0.620884299278259,
  0.620959401130676,
  0.621034562587738,
  0.6211097240448,
  0.621184825897217,
  0.621259987354279,
  0.621335089206696,
  0.621410191059113,
  0.621485352516174,
  0.621560454368591,
  0.621635556221008,
  0.621710658073425,
  0.621785700321198,
  0.621860802173615,
  0.621935904026031,
  0.622010946273804,
  0.622086048126221,
  0.622161090373993,
  0.622236132621765,
  0.622311174869537,
  0.62238621711731,
  0.622461259365082,
  0.622536301612854,
  0.622611343860626,
  0.622686386108398,
  0.622761368751526,
  0.622836410999298,
  0.622911393642426,
  0.622986376285553,
  0.62306135892868,
  0.623136341571808,
  0.623211324214935,
  0.623286306858063,
  0.62336128950119,
  0.623436272144318,
  0.6235111951828,
  0.623586177825928,
  0.62366110086441,
  0.623736083507538,
  0.623811006546021,
  0.623885929584503,
  0.623960852622986,
  0.624035775661469,
  0.624110698699951,
  0.624185562133789,
  0.624260485172272,
  0.624335408210754,
  0.624410271644592,
  0.62448513507843,
  0.624560058116913,
  0.624634921550751,
  0.624709784984589,
  0.624784648418427,
  0.624859511852264,
  0.624934315681458,
  0.625009179115295,
  0.625084042549133,
  0.625158846378326,
  0.62523365020752,
  0.625308513641357,
  0.625383317470551,
  0.625458121299744,
  0.625532925128937,
  0.62560772895813,
  0.625682532787323,
  0.625757277011871,
  0.625832080841064,
  0.625906884670258,
  0.625981628894806,
  0.626056373119354,
  0.626131176948547,
  0.626205921173096,
  0.626280665397644,
  0.626355409622192,
  0.626430094242096,
  0.626504838466644,
  0.626579582691193,
  0.626654267311096,
  0.626729011535645,
  0.626803696155548,
  0.626878380775452,
  0.626953125,
  0.627027809619904,
  0.627102494239807,
  0.627177119255066,
  0.627251803874969,
  0.627326488494873,
  0.627401113510132,
  0.627475798130035,
  0.627550423145294,
  0.627625107765198,
  0.627699732780457,
  0.627774357795715,
  0.627848982810974,
  0.627923607826233,
  0.627998232841492,
  0.628072798252106,
  0.628147423267365,
  0.628221988677979,
  0.628296613693237,
  0.628371179103851,
  0.628445744514465,
  0.628520369529724,
  0.628594934940338,
  0.628669440746307,
  0.628744006156921,
  0.628818571567535,
  0.628893136978149,
  0.628967642784119,
  0.629042208194733,
  0.629116714000702,
  0.629191219806671,
  0.62926572561264,
  0.62934023141861,
  0.629414737224579,
  0.629489243030548,
  0.629563748836517,
  0.629638254642487,
  0.629712700843811,
  0.62978720664978,
  0.629861652851105,
  0.629936158657074,
  0.630010604858398,
  0.630085051059723,
  0.630159497261047,
  0.630233943462372,
  0.630308330059052,
  0.630382776260376,
  0.6304572224617,
  0.63053160905838,
  0.630606055259705,
  0.630680441856384,
  0.630754828453064,
  0.630829215049744,
  0.630903601646423,
  0.630977988243103,
  0.631052374839783,
  0.631126761436462,
  0.631201088428497,
  0.631275475025177,
  0.631349802017212,
  0.631424188613892,
  0.631498515605927,
  0.631572842597961,
  0.631647169589996,
  0.631721496582031,
  0.631795823574066,
  0.631870150566101,
  0.631944417953491,
  0.632018744945526,
  0.632093012332916,
  0.632167339324951,
  0.632241606712341,
  0.632315874099731,
  0.632390141487122,
  0.632464408874512,
  0.632538676261902,
  0.632612943649292,
  0.632687151432037,
  0.632761418819427,
  0.632835686206818,
  0.632909893989563,
  0.632984101772308,
  0.633058309555054,
  0.633132576942444,
  0.633206784725189,
  0.63328093290329,
  0.633355140686035,
  0.633429348468781,
  0.633503556251526,
  0.633577704429626,
  0.633651852607727,
  0.633726060390472,
  0.633800208568573,
  0.633874356746674,
  0.633948504924774,
  0.634022653102875,
  0.634096801280975,
  0.634170949459076,
  0.634245038032532,
  0.634319186210632,
  0.634393274784088,
  0.634467363357544,
  0.634541511535645,
  0.6346156001091,
  0.634689688682556,
  0.634763777256012,
  0.634837865829468,
  0.634911894798279,
  0.634985983371735,
  0.63506007194519,
  0.635134100914001,
  0.635208189487457,
  0.635282218456268,
  0.635356247425079,
  0.63543027639389,
  0.635504305362701,
  0.635578334331512,
  0.635652363300323,
  0.63572633266449,
  0.635800361633301,
  0.635874330997467,
  0.635948359966278,
  0.636022329330444,
  0.636096298694611,
  0.636170268058777,
  0.636244237422943,
  0.636318206787109,
  0.636392176151276,
  0.636466145515442,
  0.636540055274963,
  0.63661402463913,
  0.636687934398651,
  0.636761844158173,
  0.636835753917694,
  0.63690972328186,
  0.636983633041382,
  0.637057483196259,
  0.63713139295578,
  0.637205302715302,
  0.637279212474823,
  0.6373530626297,
  0.637426912784576,
  0.637500822544098,
  0.637574672698975,
  0.637648522853851,
  0.637722373008728,
  0.637796223163605,
  0.637870073318481,
  0.637943923473358,
  0.63801771402359,
  0.638091564178467,
  0.638165354728699,
  0.638239204883575,
  0.638312995433807,
  0.638386785984039,
  0.638460576534271,
  0.638534367084503,
  0.638608157634735,
  0.638681948184967,
  0.638755679130554,
  0.638829469680786,
  0.638903200626373,
  0.63897693157196,
  0.639050722122192,
  0.63912445306778,
  0.639198184013367,
  0.639271914958954,
  0.639345645904541,
  0.639419376850128,
  0.639493048191071,
  0.639566779136658,
  0.6396404504776,
  0.639714121818542,
  0.63978785276413,
  0.639861524105072,
  0.639935195446014,
  0.640008866786957,
  0.640082538127899,
  0.640156209468842,
  0.640229821205139,
  0.640303492546082,
  0.640377104282379,
  0.640450775623322,
  0.640524387359619,
  0.640597999095917,
  0.640671610832214,
  0.640745222568512,
  0.64081883430481,
  0.640892446041107,
  0.640966057777405,
  0.641039609909058,
  0.641113221645355,
  0.641186773777008,
  0.641260325908661,
  0.641333878040314,
  0.641407489776611,
  0.641480982303619,
  0.641554534435272,
  0.641628086566925,
  0.641701638698578,
  0.641775131225586,
  0.641848683357239,
  0.641922175884247,
  0.6419957280159,
  0.642069220542908,
  0.642142713069916,
  0.642216205596924,
  0.642289698123932,
  0.64236319065094,
  0.642436623573303,
  0.642510116100311,
  0.642583608627319,
  0.642657041549683,
  0.642730474472046,
  0.642803907394409,
  0.642877340316772,
  0.642950773239136,
  0.643024206161499,
  0.643097639083862,
  0.643171072006226,
  0.643244504928589,
  0.643317878246307,
  0.643391251564026,
  0.643464684486389,
  0.643538057804108,
  0.643611431121826,
  0.643684804439545,
  0.643758177757263,
  0.643831551074982,
  0.6439049243927,
  0.643978238105774,
  0.644051611423492,
  0.644124925136566,
  0.644198298454285,
  0.644271612167358,
  0.644344925880432,
  0.644418239593506,
  0.64449155330658,
  0.644564867019653,
  0.644638121128082,
  0.644711434841156,
  0.64478474855423,
  0.644858002662659,
  0.644931256771088,
  0.645004510879517,
  0.64507782459259,
  0.645151078701019,
  0.645224273204803,
  0.645297527313232,
  0.645370781421661,
  0.64544403553009,
  0.645517230033875,
  0.645590484142303,
  0.645663678646088,
  0.645736873149872,
  0.645810067653656,
  0.64588326215744,
  0.645956456661224,
  0.646029651165009,
  0.646102845668793,
  0.646175980567932,
  0.646249175071716,
  0.6463223695755,
  0.64639550447464,
  0.646468639373779,
  0.646541774272919,
  0.646614909172058,
  0.646688044071198,
  0.646761178970337,
  0.646834313869476,
  0.646907389163971,
  0.64698052406311,
  0.647053599357605,
  0.647126734256744,
  0.647199809551239,
  0.647272884845734,
  0.647345960140228,
  0.647419035434723,
  0.647492110729218,
  0.647565186023712,
  0.647638201713562,
  0.647711277008057,
  0.647784292697906,
  0.647857367992401,
  0.647930383682251,
  0.648003399372101,
  0.648076415061951,
  0.648149430751801,
  0.64822244644165,
  0.6482954621315,
  0.648368418216705,
  0.648441433906555,
  0.64851438999176,
  0.64858740568161,
  0.648660361766815,
  0.64873331785202,
  0.648806273937225,
  0.64887923002243,
  0.648952186107635,
  0.649025082588196,
  0.649098038673401,
  0.649170994758606,
  0.649243891239166,
  0.649316787719727,
  0.649389743804932,
  0.649462640285492,
  0.649535536766052,
  0.649608433246613,
  0.649681329727173,
  0.649754166603088,
  0.649827063083649,
  0.649899959564209,
  0.649972796440125,
  0.65004563331604,
  0.6501185297966,
  0.650191366672516,
  0.650264203548431,
  0.650337040424347,
  0.650409877300262,
  0.650482654571533,
  0.650555491447449,
  0.650628268718719,
  0.650701105594635,
  0.650773882865906,
  0.650846660137177,
  0.650919497013092,
  0.650992274284363,
  0.651064991950989,
  0.65113776922226,
  0.65121054649353,
  0.651283323764801,
  0.651356041431427,
  0.651428818702698,
  0.651501536369324,
  0.65157425403595,
  0.651646971702576,
  0.651719689369202,
  0.651792407035828,
  0.651865124702454,
  0.65193784236908,
  0.652010500431061,
  0.652083218097687,
  0.652155876159668,
  0.652228593826294,
  0.652301251888275,
  0.652373909950256,
  0.652446568012238,
  0.652519226074219,
  0.6525918841362,
  0.652664542198181,
  0.652737140655518,
  0.652809798717499,
  0.652882397174835,
  0.652955055236816,
  0.653027653694153,
  0.653100252151489,
  0.653172850608826,
  0.653245449066162,
  0.653318047523499,
  0.65339058637619,
  0.653463184833527,
  0.653535723686218,
  0.653608322143555,
  0.653680860996246,
  0.653753399848938,
  0.653825998306274,
  0.653898537158966,
  0.653971016407013,
  0.654043555259705,
  0.654116094112396,
  0.654188632965088,
  0.654261112213135,
  0.654333591461182,
  0.654406130313873,
  0.65447860956192,
  0.654551088809967,
  0.654623568058014,
  0.654696047306061,
  0.654768526554108,
  0.65484094619751,
  0.654913425445557,
  0.654985904693604,
  0.655058324337006,
  0.655130743980408,
  0.65520316362381,
  0.655275583267212,
  0.655348002910614,
  0.655420422554016,
  0.655492842197418,
  0.65556526184082,
  0.655637621879578,
  0.65571004152298,
  0.655782401561737,
  0.655854821205139,
  0.655927181243896,
  0.655999541282654,
  0.656071901321411,
  0.656144261360168,
  0.656216561794281,
  0.656288921833038,
  0.656361281871796,
  0.656433582305908,
  0.656505942344666,
  0.656578242778778,
  0.656650543212891,
  0.656722843647003,
  0.656795144081116,
  0.656867444515228,
  0.656939744949341,
  0.657011985778809,
  0.657084286212921,
  0.657156527042389,
  0.657228827476501,
  0.657301068305969,
  0.657373309135437,
  0.657445549964905,
  0.657517790794373,
  0.65759003162384,
  0.657662272453308,
  0.657734453678131,
  0.657806694507599,
  0.657878875732422,
  0.65795111656189,
  0.658023297786713,
  0.658095479011536,
  0.658167660236359,
  0.658239841461182,
  0.658312022686005,
  0.658384203910828,
  0.658456325531006,
  0.658528506755829,
  0.658600628376007,
  0.65867280960083,
  0.658744931221008,
  0.658817052841187,
  0.658889174461365,
  0.658961296081543,
  0.659033417701721,
  0.659105539321899,
  0.659177601337433,
  0.659249722957611,
  0.659321784973145,
  0.659393846988678,
  0.659465968608856,
  0.65953803062439,
  0.659610092639923,
  0.659682154655457,
  0.659754157066345,
  0.659826219081879,
  0.659898281097412,
  0.659970283508301,
  0.660042345523834,
  0.660114347934723,
  0.660186350345612,
  0.6602583527565,
  0.660330355167389,
  0.660402357578278,
  0.660474359989166,
  0.660546362400055,
  0.660618305206299,
  0.660690307617188,
  0.660762250423431,
  0.660834193229675,
  0.660906136035919,
  0.660978138446808,
  0.661050021648407,
  0.661121964454651,
  0.661193907260895,
  0.661265850067139,
  0.661337733268738,
  0.661409676074982,
  0.661481559276581,
  0.66155344247818,
  0.661625385284424,
  0.661697268486023,
  0.661769151687622,
  0.661840975284576,
  0.661912858486176,
  0.661984741687775,
  0.662056565284729,
  0.662128448486328,
  0.662200272083282,
  0.662272095680237,
  0.662343978881836,
  0.66241580247879,
  0.662487626075745,
  0.662559390068054,
  0.662631213665009,
  0.662703037261963,
  0.662774801254272,
  0.662846624851227,
  0.662918388843536,
  0.662990152835846,
  0.663061916828156,
  0.663133680820465,
  0.663205444812775,
  0.663277208805084,
  0.663348972797394,
  0.663420677185059,
  0.663492441177368,
  0.663564145565033,
  0.663635909557343,
  0.663707613945007,
  0.663779318332672,
  0.663851022720337,
  0.663922727108002,
  0.663994371891022,
  0.664066076278687,
  0.664137780666351,
  0.664209425449371,
  0.664281070232391,
  0.664352774620056,
  0.664424419403076,
  0.664496064186096,
  0.664567708969116,
  0.664639353752136,
  0.664710998535156,
  0.664782583713531,
  0.664854228496552,
  0.664925813674927,
  0.664997458457947,
  0.665069043636322,
  0.665140628814697,
  0.665212213993073,
  0.665283799171448,
  0.665355384349823,
  0.665426969528198,
  0.665498495101929,
  0.665570080280304,
  0.665641605854034,
  0.665713131427765,
  0.66578471660614,
  0.665856242179871,
  0.665927767753601,
  0.665999293327332,
  0.666070818901062,
  0.666142284870148,
  0.666213810443878,
  0.666285276412964,
  0.666356801986694,
  0.66642826795578,
  0.666499733924866,
  0.666571199893951,
  0.666642665863037,
  0.666714131832123,
  0.666785597801208,
  0.666857063770294,
  0.666928470134735,
  0.666999936103821,
  0.667071342468262,
  0.667142748832703,
  0.667214214801788,
  0.667285621166229,
  0.66735702753067,
  0.667428374290466,
  0.667499780654907,
  0.667571187019348,
  0.667642533779144,
  0.667713940143585,
  0.667785286903381,
  0.667856633663177,
  0.667927980422974,
  0.667999386787415,
  0.668070733547211,
  0.668142020702362,
  0.668213367462158,
  0.668284714221954,
  0.668356001377106,
  0.668427348136902,
  0.668498635292053,
  0.668569922447205,
  0.668641209602356,
  0.668712496757507,
  0.668783783912659,
  0.66885507106781,
  0.668926358222961,
  0.668997585773468,
  0.669068872928619,
  0.669140100479126,
  0.669211328029633,
  0.669282615184784,
  0.669353842735291,
  0.669425070285797,
  0.669496297836304,
  0.669567465782166,
  0.669638693332672,
  0.669709861278534,
  0.669781088829041,
  0.669852256774902,
  0.669923424720764,
  0.669994652271271,
  0.670065820217133,
  0.670136988162994,
  0.670208096504211,
  0.670279264450073,
  0.670350432395935,
  0.670421540737152,
  0.670492708683014,
  0.670563817024231,
  0.670634925365448,
  0.670706033706665,
  0.670777142047882,
  0.670848250389099,
  0.670919358730316,
  0.670990467071533,
  0.671061515808105,
  0.671132624149323,
  0.671203672885895,
  0.671274721622467,
  0.671345829963684,
  0.671416878700256,
  0.671487927436829,
  0.671558976173401,
  0.671629965305328,
  0.671701014041901,
  0.671772062778473,
  0.6718430519104,
  0.671914041042328,
  0.6719850897789,
  0.672056078910828,
  0.672127068042755,
  0.672198057174683,
  0.67226904630661,
  0.672339975833893,
  0.67241096496582,
  0.672481894493103,
  0.672552883625031,
  0.672623813152313,
  0.672694742679596,
  0.672765672206879,
  0.672836601734161,
  0.672907531261444,
  0.672978460788727,
  0.67304939031601,
  0.673120260238647,
  0.67319118976593,
  0.673262059688568,
  0.673332989215851,
  0.673403859138489,
  0.673474729061127,
  0.673545598983765,
  0.673616468906403,
  0.673687338829041,
  0.673758149147034,
  0.673829019069672,
  0.673899829387665,
  0.673970699310303,
  0.674041509628296,
  0.674112319946289,
  0.674183130264282,
  0.674253940582275,
  0.674324750900269,
  0.674395501613617,
  0.67446631193161,
  0.674537062644958,
  0.674607872962952,
  0.6746786236763,
  0.674749374389648,
  0.674820125102997,
  0.674890875816345,
  0.674961626529694,
  0.675032377243042,
  0.67510312795639,
  0.675173819065094,
  0.675244569778442,
  0.675315260887146,
  0.67538595199585,
  0.675456702709198,
  0.675527393817902,
  0.675598084926605,
  0.675668716430664,
  0.675739407539368,
  0.675810098648071,
  0.67588073015213,
  0.675951421260834,
  0.676022052764893,
  0.676092684268951,
  0.67616331577301,
  0.676233947277069,
  0.676304578781128,
  0.676375210285187,
  0.676445841789246,
  0.67651641368866,
  0.676587045192719,
  0.676657617092133,
  0.676728248596191,
  0.676798820495605,
  0.67686939239502,
  0.676939964294434,
  0.677010536193848,
  0.677081048488617,
  0.677151620388031,
  0.677222192287445,
  0.677292704582214,
  0.677363216876984,
  0.677433788776398,
  0.677504301071167,
  0.677574813365936,
  0.677645325660706,
  0.677715837955475,
  0.677786290645599,
  0.677856802940369,
  0.677927255630493,
  0.677997767925262,
  0.678068220615387,
  0.678138673305511,
  0.678209125995636,
  0.67827957868576,
  0.678350031375885,
  0.67842048406601,
  0.678490936756134,
  0.678561329841614,
  0.678631782531738,
  0.678702175617218,
  0.678772568702698,
  0.678842961788177,
  0.678913354873657,
  0.678983747959137,
  0.679054141044617,
  0.679124534130096,
  0.679194927215576,
  0.679265260696411,
  0.679335594177246,
  0.679405987262726,
  0.679476320743561,
  0.679546654224396,
  0.679616987705231,
  0.679687321186066,
  0.679757654666901,
  0.679827928543091,
  0.679898262023926,
  0.679968535900116,
  0.680038869380951,
  0.680109143257141,
  0.680179417133331,
  0.680249691009521,
  0.680319964885712,
  0.680390238761902,
  0.680460512638092,
  0.680530726909637,
  0.680601000785828,
  0.680671215057373,
  0.680741488933563,
  0.680811703205109,
  0.680881917476654,
  0.680952131748199,
  0.681022346019745,
  0.68109256029129,
  0.681162714958191,
  0.681232929229736,
  0.681303083896637,
  0.681373298168182,
  0.681443452835083,
  0.681513607501984,
  0.681583762168884,
  0.681653916835785,
  0.681724071502686,
  0.681794226169586,
  0.681864321231842,
  0.681934475898743,
  0.682004570960999,
  0.682074725627899,
  0.682144820690155,
  0.682214915752411,
  0.682285010814667,
  0.682355105876923,
  0.682425200939178,
  0.68249523639679,
  0.682565331459045,
  0.682635366916656,
  0.682705461978912,
  0.682775497436523,
  0.682845532894135,
  0.682915568351746,
  0.682985603809357,
  0.683055639266968,
  0.683125674724579,
  0.683195650577545,
  0.683265686035156,
  0.683335661888123,
  0.683405697345734,
  0.6834756731987,
  0.683545649051666,
  0.683615624904633,
  0.683685600757599,
  0.683755576610565,
  0.683825492858887,
  0.683895468711853,
  0.683965384960175,
  0.684035360813141,
  0.684105277061462,
  0.684175193309784,
  0.684245109558105,
  0.684315025806427,
  0.684384942054749,
  0.68445485830307,
  0.684524714946747,
  0.684594631195068,
  0.684664487838745,
  0.684734404087067,
  0.684804260730743,
  0.68487411737442,
  0.684943974018097,
  0.685013830661774,
  0.68508368730545,
  0.685153484344482,
  0.685223340988159,
  0.685293138027191,
  0.685362994670868,
  0.6854327917099,
  0.685502588748932,
  0.685572385787964,
  0.685642182826996,
  0.685711979866028,
  0.68578177690506,
  0.685851514339447,
  0.685921311378479,
  0.685991048812866,
  0.686060845851898,
  0.686130583286285,
  0.686200320720673,
  0.68627005815506,
  0.686339795589447,
  0.686409473419189,
  0.686479210853577,
  0.686548948287964,
  0.686618626117706,
  0.686688363552094,
  0.686758041381836,
  0.686827719211578,
  0.686897397041321,
  0.686967074871063,
  0.687036752700806,
  0.687106370925903,
  0.687176048755646,
  0.687245726585388,
  0.687315344810486,
  0.687384963035583,
  0.687454581260681,
  0.687524259090424,
  0.687593877315521,
  0.687663435935974,
  0.687733054161072,
  0.687802672386169,
  0.687872231006622,
  0.68794184923172,
  0.688011407852173,
  0.688080966472626,
  0.688150525093079,
  0.688220083713531,
  0.688289642333984,
  0.688359200954437,
  0.68842875957489,
  0.688498318195343,
  0.688567817211151,
  0.688637316226959,
  0.688706874847412,
  0.68877637386322,
  0.688845872879028,
  0.688915371894836,
  0.688984870910645,
  0.689054310321808,
  0.689123809337616,
  0.689193308353424,
  0.689262747764587,
  0.689332187175751,
  0.689401686191559,
  0.689471125602722,
  0.689540565013885,
  0.689610004425049,
  0.689679384231567,
  0.689748823642731,
  0.689818263053894,
  0.689887642860413,
  0.689957022666931,
  0.690026462078094,
  0.690095841884613,
  0.690165221691132,
  0.69023460149765,
  0.690303981304169,
  0.690373301506042,
  0.690442681312561,
  0.690512001514435,
  0.690581381320953,
  0.690650701522827,
  0.690720021724701,
  0.690789341926575,
  0.690858662128448,
  0.690927982330322,
  0.690997302532196,
  0.69106662273407,
  0.691135883331299,
  0.691205203533173,
  0.691274464130402,
  0.691343724727631,
  0.69141298532486,
  0.691482245922089,
  0.691551506519318,
  0.691620767116547,
  0.691690027713776,
  0.691759288311005,
  0.691828489303589,
  0.691897690296173,
  0.691966950893402,
  0.692036151885986,
  0.692105352878571,
  0.692174553871155,
  0.692243754863739,
  0.692312896251678,
  0.692382097244263,
  0.692451298236847,
  0.692520439624786,
  0.692589581012726,
  0.692658722400665,
  0.69272792339325,
  0.692797064781189,
  0.692866146564484,
  0.692935287952423,
  0.693004429340363,
  0.693073511123657,
  0.693142652511597,
  0.693211734294891,
  0.693280875682831,
  0.693349957466125,
  0.69341903924942,
  0.693488121032715,
  0.693557143211365,
  0.693626224994659,
  0.693695306777954,
  0.693764328956604,
  0.693833410739899,
  0.693902432918549,
  0.693971455097198,
  0.694040477275848,
  0.694109499454498,
  0.694178521633148,
  0.694247543811798,
  0.694316506385803,
  0.694385528564453,
  0.694454491138458,
  0.694523513317108,
  0.694592475891113,
  0.694661438465118,
  0.694730401039124,
  0.694799363613129,
  0.694868326187134,
  0.694937229156494,
  0.695006191730499,
  0.69507509469986,
  0.695144057273865,
  0.695212960243225,
  0.695281863212585,
  0.695350766181946,
  0.695419669151306,
  0.695488572120667,
  0.695557475090027,
  0.695626318454742,
  0.695695221424103,
  0.695764064788818,
  0.695832908153534,
  0.69590175151825,
  0.69597065448761,
  0.696039497852325,
  0.696108281612396,
  0.696177124977112,
  0.696245968341827,
  0.696314752101898,
  0.696383595466614,
  0.696452379226685,
  0.696521162986755,
  0.696589946746826,
  0.696658730506897,
  0.696727514266968,
  0.696796298027039,
  0.696865081787109,
  0.696933805942535,
  0.697002589702606,
  0.697071313858032,
  0.697140038013458,
  0.697208762168884,
  0.69727748632431,
  0.697346210479736,
  0.697414934635162,
  0.697483658790588,
  0.69755232334137,
  0.697621047496796,
  0.697689712047577,
  0.697758436203003,
  0.697827100753784,
  0.697895765304565,
  0.697964429855347,
  0.698033094406128,
  0.698101699352264,
  0.698170363903046,
  0.698239028453827,
  0.698307633399963,
  0.6983762383461,
  0.698444843292236,
  0.698513507843018,
  0.698582053184509,
  0.698650658130646,
  0.698719263076782,
  0.698787868022919,
  0.69885641336441,
  0.698925018310547,
  0.698993563652039,
  0.69906210899353,
  0.699130654335022,
  0.699199259281158,
  0.699267745018005,
  0.699336290359497,
  0.699404835700989,
  0.699473321437836,
  0.699541866779327,
  0.699610352516174,
  0.699678897857666,
  0.699747383594513,
  0.69981586933136,
  0.699884355068207,
  0.699952781200409,
  0.700021266937256,
  0.700089752674103,
  0.700158178806305,
  0.700226664543152,
  0.700295090675354,
  0.700363516807556,
  0.700431942939758,
  0.70050036907196,
  0.700568795204163,
  0.700637221336365,
  0.700705587863922,
  0.700774013996124,
  0.700842380523682,
  0.700910806655884,
  0.700979173183441,
  0.701047539710999,
  0.701115906238556,
  0.701184272766113,
  0.701252639293671,
  0.701320946216583,
  0.701389312744141,
  0.701457619667053,
  0.701525986194611,
  0.701594293117523,
  0.701662600040436,
  0.701730906963348,
  0.701799213886261,
  0.701867520809174,
  0.701935768127441,
  0.702004075050354,
  0.702072322368622,
  0.702140629291534,
  0.702208876609802,
  0.70227712392807,
  0.702345371246338,
  0.702413618564606,
  0.702481865882874,
  0.702550113201141,
  0.702618300914764,
  0.702686548233032,
  0.702754735946655,
  0.702822923660278,
  0.702891170978546,
  0.702959358692169,
  0.703027546405792,
  0.703095674514771,
  0.703163862228394,
  0.703232049942017,
  0.703300178050995,
  0.703368365764618,
  0.703436493873596,
  0.703504621982574,
  0.703572750091553,
  0.703640878200531,
  0.703709006309509,
  0.703777134418488,
  0.703845262527466,
  0.703913331031799,
  0.703981459140778,
  0.704049527645111,
  0.704117596149445,
  0.704185664653778,
  0.704253733158112,
  0.704321801662445,
  0.704389870166779,
  0.704457938671112,
  0.704525947570801,
  0.704594016075134,
  0.704662024974823,
  0.704730033874512,
  0.7047980427742,
  0.704866051673889,
  0.704934060573578,
  0.705002069473267,
  0.705070078372955,
  0.705138027667999,
  0.705206036567688,
  0.705273985862732,
  0.705341994762421,
  0.705409944057465,
  0.705477893352509,
  0.705545842647552,
  0.705613732337952,
  0.705681681632996,
  0.70574963092804,
  0.705817520618439,
  0.705885469913483,
  0.705953359603882,
  0.706021249294281,
  0.70608913898468,
  0.706157028675079,
  0.706224918365479,
  0.706292808055878,
  0.706360638141632,
  0.706428527832031,
  0.706496357917786,
  0.706564247608185,
  0.706632077693939,
  0.706699907779694,
  0.706767737865448,
  0.706835567951202,
  0.706903398036957,
  0.706971168518066,
  0.707038998603821,
  0.70710676908493,
  0.707174599170685,
  0.707242369651794,
  0.707310140132904,
  0.707377910614014,
  0.707445681095123,
  0.707513391971588,
  0.707581162452698,
  0.707648932933807,
  0.707716643810272,
  0.707784414291382,
  0.707852125167847,
  0.707919836044312,
  0.707987546920776,
  0.708055257797241,
  0.708122968673706,
  0.708190619945526,
  0.708258330821991,
  0.708325982093811,
  0.708393692970276,
  0.708461344242096,
  0.708528995513916,
  0.708596646785736,
  0.708664298057556,
  0.708731949329376,
  0.708799540996552,
  0.708867192268372,
  0.708934843540192,
  0.709002435207367,
  0.709070026874542,
  0.709137618541718,
  0.709205210208893,
  0.709272801876068,
  0.709340393543243,
  0.709407985210419,
  0.709475576877594,
  0.709543108940125,
  0.709610641002655,
  0.70967823266983,
  0.709745764732361,
  0.709813296794891,
  0.709880828857422,
  0.709948360919952,
  0.710015833377838,
  0.710083365440369,
  0.710150897502899,
  0.710218369960785,
  0.710285842418671,
  0.710353374481201,
  0.710420846939087,
  0.710488319396973,
  0.710555732250214,
  0.710623204708099,
  0.710690677165985,
  0.710758090019226,
  0.710825562477112,
  0.710892975330353,
  0.710960388183594,
  0.711027801036835,
  0.711095213890076,
  0.711162626743317,
  0.711230039596558,
  0.711297452449799,
  0.711364805698395,
  0.711432218551636,
  0.711499571800232,
  0.711566925048828,
  0.711634278297424,
  0.711701631546021,
  0.711768984794617,
  0.711836338043213,
  0.711903691291809,
  0.71197098493576,
  0.712038338184357,
  0.712105631828308,
  0.71217292547226,
  0.712240219116211,
  0.712307512760162,
  0.712374806404114,
  0.712442100048065,
  0.712509393692017,
  0.712576627731323,
  0.712643921375275,
  0.712711155414581,
  0.712778389453888,
  0.712845623493195,
  0.712912857532501,
  0.712980091571808,
  0.713047325611115,
  0.713114559650421,
  0.713181734085083,
  0.71324896812439,
  0.713316142559052,
  0.713383316993713,
  0.713450491428375,
  0.713517725467682,
  0.713584840297699,
  0.713652014732361,
  0.713719189167023,
  0.713786363601685,
  0.713853478431702,
  0.713920593261719,
  0.713987767696381,
  0.714054882526398,
  0.714121997356415,
  0.714189112186432,
  0.714256227016449,
  0.714323282241821,
  0.714390397071838,
  0.714457452297211,
  0.714524567127228,
  0.7145916223526,
  0.714658677577972,
  0.714725732803345,
  0.714792788028717,
  0.714859843254089,
  0.714926898479462,
  0.714993894100189,
  0.715060949325562,
  0.715127944946289,
  0.715194940567017,
  0.715261995792389,
  0.715328991413116,
  0.715395987033844,
  0.715462923049927,
  0.715529918670654,
  0.715596914291382,
  0.715663850307465,
  0.715730845928192,
  0.715797781944275,
  0.715864717960358,
  0.71593165397644,
  0.715998589992523,
  0.716065526008606,
  0.716132462024689,
  0.716199338436127,
  0.716266274452209,
  0.716333150863647,
  0.71640008687973,
  0.716466963291168,
  0.716533839702606,
  0.716600716114044,
  0.716667532920837,
  0.716734409332275,
  0.716801285743713,
  0.716868102550507,
  0.716934978961945,
  0.717001795768738,
  0.717068612575531,
  0.717135429382324,
  0.717202246189117,
  0.717269062995911,
  0.717335879802704,
  0.717402696609497,
  0.717469453811646,
  0.717536211013794,
  0.717603027820587,
  0.717669785022736,
  0.717736542224884,
  0.717803299427032,
  0.717870056629181,
  0.717936813831329,
  0.718003511428833,
  0.718070268630981,
  0.718136966228485,
  0.718203663825989,
  0.718270421028137,
  0.718337118625641,
  0.718403816223145,
  0.718470454216003,
  0.718537151813507,
  0.718603849411011,
  0.71867048740387,
  0.718737185001373,
  0.718803822994232,
  0.718870460987091,
  0.71893709897995,
  0.719003736972809,
  0.719070374965668,
  0.719137012958527,
  0.719203650951385,
  0.7192702293396,
  0.719336867332458,
  0.719403445720673,
  0.719470024108887,
  0.719536602497101,
  0.719603180885315,
  0.719669759273529,
  0.719736337661743,
  0.719802856445312,
  0.719869434833527,
  0.719935953617096,
  0.72000253200531,
  0.720069050788879,
  0.720135569572449,
  0.720202088356018,
  0.720268607139587,
  0.720335066318512,
  0.720401585102081,
  0.720468103885651,
  0.720534563064575,
  0.7206010222435,
  0.720667481422424,
  0.720734000205994,
  0.720800459384918,
  0.720866918563843,
  0.720933318138123,
  0.720999777317047,
  0.721066176891327,
  0.721132636070251,
  0.721199035644531,
  0.721265435218811,
  0.721331834793091,
  0.721398234367371,
  0.72146463394165,
  0.72153103351593,
  0.72159743309021,
  0.721663773059845,
  0.72173011302948,
  0.72179651260376,
  0.721862852573395,
  0.72192919254303,
  0.721995532512665,
  0.7220618724823,
  0.722128212451935,
  0.722194492816925,
  0.72226083278656,
  0.72232711315155,
  0.722393453121185,
  0.722459733486176,
  0.722526013851166,
  0.722592294216156,
  0.722658574581146,
  0.722724795341492,
  0.722791075706482,
  0.722857356071472,
  0.722923576831818,
  0.722989797592163,
  0.723056077957153,
  0.723122298717499,
  0.723188519477844,
  0.723254680633545,
  0.72332090139389,
  0.723387122154236,
  0.723453283309937,
  0.723519504070282,
  0.723585665225983,
  0.723651826381683,
  0.723717987537384,
  0.723784148693085,
  0.723850309848785,
  0.723916471004486,
  0.723982572555542,
  0.724048733711243,
  0.724114835262299,
  0.724180996417999,
  0.724247097969055,
  0.724313199520111,
  0.724379301071167,
  0.724445402622223,
  0.724511444568634,
  0.72457754611969,
  0.724643647670746,
  0.724709689617157,
  0.724775731563568,
  0.724841773509979,
  0.72490781545639,
  0.724973857402802,
  0.725039899349213,
  0.725105941295624,
  0.72517192363739,
  0.725237965583801,
  0.725303947925568,
  0.725369989871979,
  0.725435972213745,
  0.725501954555511,
  0.725567936897278,
  0.725633919239044,
  0.725699841976166,
  0.725765824317932,
  0.725831806659698,
  0.72589772939682,
  0.725963652133942,
  0.726029574871063,
  0.726095497608185,
  0.726161420345306,
  0.726227343082428,
  0.72629326581955,
  0.726359188556671,
  0.726425051689148,
  0.726490914821625,
  0.726556837558746,
  0.726622700691223,
  0.7266885638237,
  0.726754426956177,
  0.726820230484009,
  0.726886093616486,
  0.726951956748962,
  0.727017760276794,
  0.727083623409271,
  0.727149426937103,
  0.727215230464935,
  0.727281033992767,
  0.727346837520599,
  0.727412641048431,
  0.727478384971619,
  0.727544188499451,
  0.727609932422638,
  0.72767573595047,
  0.727741479873657,
  0.727807223796844,
  0.727872967720032,
  0.727938711643219,
  0.728004455566406,
  0.728070199489594,
  0.728135883808136,
  0.728201627731323,
  0.728267312049866,
  0.728332996368408,
  0.728398680686951,
  0.728464365005493,
  0.728530049324036,
  0.728595733642578,
  0.728661417961121,
  0.728727042675018,
  0.728792726993561,
  0.728858351707458,
  0.728923976421356,
  0.728989601135254,
  0.729055225849152,
  0.729120850563049,
  0.729186475276947,
  0.729252099990845,
  0.729317665100098,
  0.729383289813995,
  0.729448854923248,
  0.729514420032501,
  0.729579985141754,
  0.729645550251007,
  0.72971111536026,
  0.729776680469513,
  0.729842245578766,
  0.729907751083374,
  0.729973316192627,
  0.730038821697235,
  0.730104327201843,
  0.730169832706451,
  0.73023533821106,
  0.730300843715668,
  0.730366349220276,
  0.730431795120239,
  0.730497300624847,
  0.730562746524811,
  0.730628252029419,
  0.730693697929382,
  0.730759143829346,
  0.730824589729309,
  0.730890035629272,
  0.730955421924591,
  0.731020867824554,
  0.731086313724518,
  0.731151700019836,
  0.731217086315155,
  0.731282472610474,
  0.731347918510437,
  0.731413245201111,
  0.731478631496429,
  0.731544017791748,
  0.731609404087067,
  0.73167473077774,
  0.731740117073059,
  0.731805443763733,
  0.731870770454407,
  0.731936097145081,
  0.732001423835754,
  0.732066750526428,
  0.732132017612457,
  0.732197344303131,
  0.73226261138916,
  0.732327938079834,
  0.732393205165863,
  0.732458472251892,
  0.732523739337921,
  0.73258900642395,
  0.732654273509979,
  0.732719540596008,
  0.732784748077393,
  0.732850015163422,
  0.732915222644806,
  0.73298043012619,
  0.733045637607574,
  0.733110845088959,
  0.733176052570343,
  0.733241260051727,
  0.733306467533112,
  0.733371615409851,
  0.733436822891235,
  0.733501970767975,
  0.733567118644714,
  0.733632266521454,
  0.733697414398193,
  0.733762562274933,
  0.733827710151672,
  0.733892858028412,
  0.733957946300507,
  0.734023094177246,
  0.734088182449341,
  0.734153270721436,
  0.73421835899353,
  0.734283447265625,
  0.73434853553772,
  0.734413623809814,
  0.734478652477264,
  0.734543740749359,
  0.734608769416809,
  0.734673857688904,
  0.734738886356354,
  0.734803915023804,
  0.734868943691254,
  0.734933972358704,
  0.734998941421509,
  0.735063970088959,
  0.735128998756409,
  0.735193967819214,
  0.735258936882019,
  0.735323905944824,
  0.735388875007629,
  0.735453844070435,
  0.73551881313324,
  0.735583782196045,
  0.735648691654205,
  0.73571366071701,
  0.735778570175171,
  0.735843539237976,
  0.735908448696136,
  0.735973358154297,
  0.736038267612457,
  0.736103117465973,
  0.736168026924133,
  0.736232936382294,
  0.736297786235809,
  0.73636269569397,
  0.736427545547485,
  0.736492395401001,
  0.736557245254517,
  0.736622095108032,
  0.736686944961548,
  0.736751735210419,
  0.736816585063934,
  0.736881375312805,
  0.736946165561676,
  0.737011015415192,
  0.737075805664062,
  0.737140595912933,
  0.737205386161804,
  0.73727011680603,
  0.737334907054901,
  0.737399697303772,
  0.737464427947998,
  0.737529158592224,
  0.737593948841095,
  0.737658679485321,
  0.737723350524902,
  0.737788081169128,
  0.737852811813354,
  0.737917542457581,
  0.737982213497162,
  0.738046944141388,
  0.738111615180969,
  0.738176286220551,
  0.738240957260132,
  0.738305628299713,
  0.738370299339294,
  0.738434910774231,
  0.738499581813812,
  0.738564252853394,
  0.73862886428833,
  0.738693475723267,
  0.738758087158203,
  0.73882269859314,
  0.738887310028076,
  0.738951921463013,
  0.739016532897949,
  0.739081084728241,
  0.739145696163177,
  0.739210247993469,
  0.739274799823761,
  0.739339351654053,
  0.739403903484344,
  0.739468455314636,
  0.739533007144928,
  0.73959755897522,
  0.739662051200867,
  0.739726603031158,
  0.739791095256805,
  0.739855587482452,
  0.739920079708099,
  0.739984571933746,
  0.740049064159393,
  0.74011355638504,
  0.740178048610687,
  0.740242481231689,
  0.740306913852692,
  0.740371406078339,
  0.740435838699341,
  0.740500271320343,
  0.740564703941345,
  0.740629136562347,
  0.740693509578705,
  0.740757942199707,
  0.740822315216064,
  0.740886747837067,
  0.740951120853424,
  0.741015493869781,
  0.741079866886139,
  0.741144239902496,
  0.741208612918854,
  0.741272985935211,
  0.741337299346924,
  0.741401672363281,
  0.741465985774994,
  0.741530299186707,
  0.741594612598419,
  0.741658926010132,
  0.741723239421844,
  0.741787552833557,
  0.74185186624527,
  0.741916120052338,
  0.74198043346405,
  0.742044687271118,
  0.742108941078186,
  0.742173194885254,
  0.742237448692322,
  0.74230170249939,
  0.742365956306458,
  0.742430150508881,
  0.742494404315948,
  0.742558598518372,
  0.742622852325439,
  0.742687046527863,
  0.742751240730286,
  0.742815434932709,
  0.742879629135132,
  0.74294376373291,
  0.743007957935333,
  0.743072092533112,
  0.743136286735535,
  0.743200421333313,
  0.743264555931091,
  0.74332869052887,
  0.743392825126648,
  0.743456959724426,
  0.743521094322205,
  0.743585169315338,
  0.743649303913116,
  0.74371337890625,
  0.743777453899384,
  0.743841528892517,
  0.743905603885651,
  0.743969678878784,
  0.744033753871918,
  0.744097828865051,
  0.74416184425354,
  0.744225919246674,
  0.744289934635162,
  0.744353950023651,
  0.74441796541214,
  0.744481980800629,
  0.744545996189117,
  0.744609951972961,
  0.74467396736145,
  0.744737982749939,
  0.744801938533783,
  0.744865894317627,
  0.744929909706116,
  0.744993805885315,
  0.745057761669159,
  0.745121717453003,
  0.745185673236847,
  0.745249629020691,
  0.74531352519989,
  0.745377421379089,
  0.745441377162933,
  0.745505273342133,
  0.745569169521332,
  0.745633065700531,
  0.745696902275085,
  0.745760798454285,
  0.745824694633484,
  0.745888531208038,
  0.745952367782593,
  0.746016204357147,
  0.746080040931702,
  0.746143937110901,
  0.746207714080811,
  0.746271550655365,
  0.746335387229919,
  0.746399164199829,
  0.746463000774384,
  0.746526777744293,
  0.746590554714203,
  0.746654331684113,
  0.746718108654022,
  0.746781885623932,
  0.746845662593842,
  0.746909379959106,
  0.746973156929016,
  0.747036874294281,
  0.747100591659546,
  0.747164309024811,
  0.747228026390076,
  0.747291743755341,
  0.747355461120605,
  0.74741917848587,
  0.74748283624649,
  0.747546553611755,
  0.747610211372375,
  0.747673869132996,
  0.747737526893616,
  0.747801184654236,
  0.747864842414856,
  0.747928500175476,
  0.747992157936096,
  0.748055756092072,
  0.748119354248047,
  0.748183012008667,
  0.748246610164642,
  0.748310208320618,
  0.748373806476593,
  0.748437404632568,
  0.748500943183899,
  0.748564541339874,
  0.74862813949585,
  0.74869167804718,
  0.748755216598511,
  0.748818755149841,
  0.748882293701172,
  0.748945832252502,
  0.749009370803833,
  0.749072909355164,
  0.749136388301849,
  0.74919992685318,
  0.749263405799866,
  0.749326884746552,
  0.749390363693237,
  0.749453842639923,
  0.749517321586609,
  0.749580800533295,
  0.749644219875336,
  0.749707698822021,
  0.749771118164062,
  0.749834597110748,
  0.749898016452789,
  0.74996143579483,
  0.750024855136871,
  0.750088214874268,
  0.750151634216309,
  0.75021505355835,
  0.750278413295746,
  0.750341832637787,
  0.750405192375183,
  0.750468552112579,
  0.750531911849976,
  0.750595271587372,
  0.750658631324768,
  0.75072193145752,
  0.750785291194916,
  0.750848591327667,
  0.750911951065063,
  0.750975251197815,
  0.751038551330566,
  0.751101851463318,
  0.751165151596069,
  0.751228392124176,
  0.751291692256927,
  0.751354932785034,
  0.751418232917786,
  0.751481473445892,
  0.751544713973999,
  0.751607954502106,
  0.751671195030212,
  0.751734435558319,
  0.751797676086426,
  0.751860857009888,
  0.751924097537994,
  0.751987278461456,
  0.752050459384918,
  0.75211364030838,
  0.752176821231842,
  0.752240002155304,
  0.752303183078766,
  0.752366364002228,
  0.752429485321045,
  0.752492666244507,
  0.752555787563324,
  0.752618908882141,
  0.752682030200958,
  0.752745151519775,
  0.752808272838593,
  0.75287139415741,
  0.752934455871582,
  0.752997577190399,
  0.753060638904572,
  0.753123700618744,
  0.753186821937561,
  0.753249883651733,
  0.753312945365906,
  0.753375947475433,
  0.753439009189606,
  0.753502011299133,
  0.753565073013306,
  0.753628075122833,
  0.753691136837006,
  0.753754138946533,
  0.753817141056061,
  0.753880083560944,
  0.753943085670471,
  0.754006087779999,
  0.754069030284882,
  0.754132032394409,
  0.754194974899292,
  0.754257917404175,
  0.754320859909058,
  0.75438380241394,
  0.754446744918823,
  0.754509687423706,
  0.754572570323944,
  0.754635512828827,
  0.754698395729065,
  0.754761278629303,
  0.754824161529541,
  0.754887044429779,
  0.754949927330017,
  0.755012810230255,
  0.755075693130493,
  0.755138516426086,
  0.755201399326324,
  0.755264222621918,
  0.755327045917511,
  0.755389869213104,
  0.755452692508698,
  0.755515515804291,
  0.755578339099884,
  0.755641102790833,
  0.755703926086426,
  0.755766689777374,
  0.755829453468323,
  0.755892276763916,
  0.75595498085022,
  0.756017744541168,
  0.756080508232117,
  0.756143271923065,
  0.756205976009369,
  0.756268739700317,
  0.756331443786621,
  0.756394147872925,
  0.756456851959229,
  0.756519556045532,
  0.756582260131836,
  0.75664496421814,
  0.756707668304443,
  0.756770312786102,
  0.756833016872406,
  0.756895661354065,
  0.756958305835724,
  0.757020950317383,
  0.757083594799042,
  0.757146239280701,
  0.757208824157715,
  0.757271468639374,
  0.757334053516388,
  0.757396697998047,
  0.757459282875061,
  0.757521867752075,
  0.757584452629089,
  0.757647037506104,
  0.757709622383118,
  0.757772147655487,
  0.757834732532501,
  0.757897257804871,
  0.75795978307724,
  0.758022367954254,
  0.758084893226624,
  0.758147418498993,
  0.758209884166718,
  0.758272409439087,
  0.758334934711456,
  0.758397400379181,
  0.75845992565155,
  0.758522391319275,
  0.758584856987,
  0.758647322654724,
  0.758709788322449,
  0.758772194385529,
  0.758834660053253,
  0.758897125720978,
  0.758959531784058,
  0.759021937847137,
  0.759084403514862,
  0.759146809577942,
  0.759209215641022,
  0.759271562099457,
  0.759333968162537,
  0.759396374225616,
  0.759458720684052,
  0.759521126747131,
  0.759583473205566,
  0.759645819664001,
  0.759708166122437,
  0.759770512580872,
  0.759832859039307,
  0.759895145893097,
  0.759957492351532,
  0.760019779205322,
  0.760082066059113,
  0.760144412517548,
  0.760206699371338,
  0.760268986225128,
  0.760331213474274,
  0.760393500328064,
  0.760455787181854,
  0.760518014431,
  0.76058030128479,
  0.760642528533936,
  0.760704755783081,
  0.760766983032227,
  0.760829210281372,
  0.760891437530518,
  0.760953605175018,
  0.761015832424164,
  0.761078000068665,
  0.76114022731781,
  0.761202394962311,
  0.761264562606812,
  0.761326730251312,
  0.761388897895813,
  0.761451005935669,
  0.76151317358017,
  0.761575281620026,
  0.761637449264526,
  0.761699557304382,
  0.761761665344238,
  0.761823773384094,
  0.76188588142395,
  0.761947989463806,
  0.762010097503662,
  0.762072145938873,
  0.762134253978729,
  0.76219630241394,
  0.762258350849152,
  0.762320399284363,
  0.762382447719574,
  0.762444496154785,
  0.762506544589996,
  0.762568533420563,
  0.762630581855774,
  0.76269257068634,
  0.762754619121552,
  0.762816607952118,
  0.762878596782684,
  0.762940585613251,
  0.763002514839172,
  0.763064503669739,
  0.76312643289566,
  0.763188421726227,
  0.763250350952148,
  0.763312339782715,
  0.763374269008636,
  0.763436198234558,
  0.763498067855835,
  0.763559997081757,
  0.763621926307678,
  0.763683795928955,
  0.763745725154877,
  0.763807594776154,
  0.76386946439743,
  0.763931334018707,
  0.763993203639984,
  0.764055073261261,
  0.764116883277893,
  0.76417875289917,
  0.764240562915802,
  0.764302372932434,
  0.764364242553711,
  0.764426052570343,
  0.764487862586975,
  0.764549672603607,
  0.764611423015594,
  0.764673233032227,
  0.764734983444214,
  0.764796793460846,
  0.764858543872833,
  0.764920294284821,
  0.764982044696808,
  0.765043795108795,
  0.765105545520782,
  0.76516729593277,
  0.765228986740112,
  0.765290677547455,
  0.765352427959442,
  0.765414118766785,
  0.765475809574127,
  0.76553750038147,
  0.765599191188812,
  0.76566082239151,
  0.765722513198853,
  0.765784204006195,
  0.765845835208893,
  0.765907466411591,
  0.765969097614288,
  0.766030728816986,
  0.766092360019684,
  0.766153991222382,
  0.766215622425079,
  0.766277194023132,
  0.76633882522583,
  0.766400396823883,
  0.766461968421936,
  0.766523540019989,
  0.766585111618042,
  0.766646683216095,
  0.766708254814148,
  0.766769766807556,
  0.766831338405609,
  0.766892850399017,
  0.766954362392426,
  0.767015874385834,
  0.767077386379242,
  0.76713889837265,
  0.767200410366058,
  0.767261922359467,
  0.76732337474823,
  0.767384886741638,
  0.767446339130402,
  0.767507791519165,
  0.767569243907928,
  0.767630696296692,
  0.767692148685455,
  0.767753541469574,
  0.767814993858337,
  0.767876446247101,
  0.767937839031219,
  0.767999231815338,
  0.768060624599457,
  0.768122017383575,
  0.768183410167694,
  0.768244802951813,
  0.768306136131287,
  0.768367528915405,
  0.768428862094879,
  0.768490254878998,
  0.768551588058472,
  0.768612921237946,
  0.768674254417419,
  0.768735587596893,
  0.768796861171722,
  0.768858194351196,
  0.768919467926025,
  0.768980741500854,
  0.769042074680328,
  0.769103348255157,
  0.769164621829987,
  0.769225895404816,
  0.769287109375,
  0.769348382949829,
  0.769409656524658,
  0.769470870494843,
  0.769532084465027,
  0.769593298435211,
  0.769654512405396,
  0.76971572637558,
  0.769776940345764,
  0.769838154315948,
  0.769899308681488,
  0.769960522651672,
  0.770021677017212,
  0.770082831382751,
  0.770143985748291,
  0.770205140113831,
  0.77026629447937,
  0.77032744884491,
  0.770388543605804,
  0.770449697971344,
  0.770510792732239,
  0.770571887493134,
  0.770632982254028,
  0.770694077014923,
  0.770755171775818,
  0.770816266536713,
  0.770877361297607,
  0.770938396453857,
  0.770999491214752,
  0.771060526371002,
  0.771121561527252,
  0.771182596683502,
  0.771243631839752,
  0.771304666996002,
  0.771365702152252,
  0.771426677703857,
  0.771487712860107,
  0.771548688411713,
  0.771609663963318,
  0.771670639514923,
  0.771731615066528,
  0.771792590618134,
  0.771853566169739,
  0.771914482116699,
  0.771975457668304,
  0.772036373615265,
  0.77209734916687,
  0.772158265113831,
  0.772219181060791,
  0.772280097007751,
  0.772340953350067,
  0.772401869297028,
  0.772462785243988,
  0.772523641586304,
  0.772584557533264,
  0.77264541387558,
  0.772706270217896,
  0.772767126560211,
  0.772827982902527,
  0.772888779640198,
  0.772949635982513,
  0.773010432720184,
  0.7730712890625,
  0.773132085800171,
  0.773192882537842,
  0.773253679275513,
  0.773314476013184,
  0.773375272750854,
  0.773436009883881,
  0.773496806621552,
  0.773557543754578,
  0.773618280887604,
  0.773679077625275,
  0.773739814758301,
  0.773800551891327,
  0.773861289024353,
  0.773921966552734,
  0.77398270368576,
  0.774043381214142,
  0.774104118347168,
  0.774164795875549,
  0.774225473403931,
  0.774286150932312,
  0.774346828460693,
  0.77440744638443,
  0.774468123912811,
  0.774528741836548,
  0.774589419364929,
  0.774650037288666,
  0.774710655212402,
  0.774771273136139,
  0.774831891059875,
  0.774892508983612,
  0.774953126907349,
  0.77501368522644,
  0.775074303150177,
  0.775134861469269,
  0.775195419788361,
  0.775255978107452,
  0.775316536426544,
  0.775377094745636,
  0.775437653064728,
  0.775498151779175,
  0.775558710098267,
  0.775619208812714,
  0.775679707527161,
  0.775740206241608,
  0.775800704956055,
  0.775861203670502,
  0.775921702384949,
  0.775982201099396,
  0.776042640209198,
  0.776103138923645,
  0.776163578033447,
  0.77622401714325,
  0.776284456253052,
  0.776344895362854,
  0.776405334472656,
  0.776465713977814,
  0.776526153087616,
  0.776586532592773,
  0.776646971702576,
  0.776707351207733,
  0.776767730712891,
  0.776828110218048,
  0.776888489723206,
  0.776948809623718,
  0.777009189128876,
  0.777069509029388,
  0.777129888534546,
  0.777190208435059,
  0.777250528335571,
  0.777310848236084,
  0.777371168136597,
  0.777431488037109,
  0.777491748332977,
  0.77755206823349,
  0.777612328529358,
  0.777672648429871,
  0.777732908725739,
  0.777793169021606,
  0.777853429317474,
  0.777913630008698,
  0.777973890304565,
  0.778034150600433,
  0.778094351291656,
  0.77815455198288,
  0.778214752674103,
  0.778275012969971,
  0.778335213661194,
  0.778395354747772,
  0.778455555438995,
  0.778515756130219,
  0.778575897216797,
  0.77863609790802,
  0.778696238994598,
  0.778756380081177,
  0.778816521167755,
  0.778876662254333,
  0.778936743736267,
  0.778996884822845,
  0.779057025909424,
  0.779117107391357,
  0.779177188873291,
  0.779237270355225,
  0.779297351837158,
  0.779357433319092,
  0.779417514801025,
  0.779477596282959,
  0.779537618160248,
  0.779597699642181,
  0.77965772151947,
  0.779717743396759,
  0.779777765274048,
  0.779837787151337,
  0.779897809028625,
  0.779957830905914,
  0.780017793178558,
  0.780077815055847,
  0.780137777328491,
  0.78019779920578,
  0.780257761478424,
  0.780317723751068,
  0.780377626419067,
  0.780437588691711,
  0.780497550964355,
  0.780557453632355,
  0.780617415904999,
  0.780677318572998,
  0.780737221240997,
  0.780797123908997,
  0.780857026576996,
  0.780916929244995,
  0.78097677230835,
  0.781036674976349,
  0.781096577644348,
  0.781156420707703,
  0.781216263771057,
  0.781276106834412,
  0.781335949897766,
  0.781395792961121,
  0.78145557641983,
  0.781515419483185,
  0.781575202941895,
  0.781635046005249,
  0.781694829463959,
  0.781754612922668,
  0.781814396381378,
  0.781874179840088,
  0.781933963298798,
  0.781993687152863,
  0.782053470611572,
  0.782113194465637,
  0.782172918319702,
  0.782232701778412,
  0.782292425632477,
  0.782352149486542,
  0.782411813735962,
  0.782471537590027,
  0.782531201839447,
  0.782590925693512,
  0.782650589942932,
  0.782710254192352,
  0.782769918441772,
  0.782829582691193,
  0.782889246940613,
  0.782948911190033,
  0.783008515834808,
  0.783068180084229,
  0.783127784729004,
  0.783187389373779,
  0.783246994018555,
  0.78330659866333,
  0.783366203308105,
  0.783425807952881,
  0.783485352993011,
  0.783544957637787,
  0.783604502677917,
  0.783664107322693,
  0.783723652362823,
  0.783783197402954,
  0.78384268283844,
  0.783902227878571,
  0.783961772918701,
  0.784021258354187,
  0.784080803394318,
  0.784140288829803,
  0.784199774265289,
  0.784259259700775,
  0.784318745136261,
  0.784378230571747,
  0.784437716007233,
  0.784497141838074,
  0.78455662727356,
  0.784616053104401,
  0.784675478935242,
  0.784734904766083,
  0.784794330596924,
  0.784853756427765,
  0.784913122653961,
  0.784972548484802,
  0.785031914710999,
  0.78509134054184,
  0.785150706768036,
  0.785210072994232,
  0.785269439220428,
  0.785328805446625,
  0.785388171672821,
  0.785447478294373,
  0.785506844520569,
  0.78556615114212,
  0.785625457763672,
  0.785684764385223,
  0.785744071006775,
  0.785803377628326,
  0.785862684249878,
  0.785921990871429,
  0.785981237888336,
  0.786040544509888,
  0.786099791526794,
  0.786159038543701,
  0.786218285560608,
  0.786277532577515,
  0.786336779594421,
  0.786395967006683,
  0.78645521402359,
  0.786514401435852,
  0.786573648452759,
  0.786632835865021,
  0.786692023277283,
  0.786751210689545,
  0.786810398101807,
  0.786869525909424,
  0.786928713321686,
  0.786987841129303,
  0.787047028541565,
  0.787106156349182,
  0.787165284156799,
  0.787224411964417,
  0.787283539772034,
  0.787342667579651,
  0.787401735782623,
  0.78746086359024,
  0.787519931793213,
  0.787578999996185,
  0.787638068199158,
  0.78769713640213,
  0.787756204605103,
  0.787815272808075,
  0.787874341011047,
  0.787933349609375,
  0.787992417812347,
  0.788051426410675,
  0.788110435009003,
  0.78816944360733,
  0.788228452205658,
  0.788287460803986,
  0.788346409797668,
  0.788405418395996,
  0.788464367389679,
  0.788523375988007,
  0.788582324981689,
  0.788641273975372,
  0.788700222969055,
  0.788759112358093,
  0.788818061351776,
  0.788877010345459,
  0.788935899734497,
  0.78899484872818,
  0.789053738117218,
  0.789112627506256,
  0.789171516895294,
  0.789230406284332,
  0.789289236068726,
  0.789348125457764,
  0.789406955242157,
  0.789465844631195,
  0.789524674415588,
  0.789583504199982,
  0.789642333984375,
  0.789701163768768,
  0.789759993553162,
  0.78981876373291,
  0.789877593517303,
  0.789936363697052,
  0.789995133876801,
  0.790053904056549,
  0.790112674236298,
  0.790171444416046,
  0.790230214595795,
  0.790288984775543,
  0.790347695350647,
  0.790406465530396,
  0.790465176105499,
  0.790523886680603,
  0.790582597255707,
  0.790641307830811,
  0.790700018405914,
  0.790758728981018,
  0.790817379951477,
  0.790876030921936,
  0.79093474149704,
  0.790993392467499,
  0.791052043437958,
  0.791110694408417,
  0.791169345378876,
  0.79122793674469,
  0.791286587715149,
  0.791345238685608,
  0.791403830051422,
  0.791462421417236,
  0.791521012783051,
  0.791579604148865,
  0.791638195514679,
  0.791696786880493,
  0.791755318641663,
  0.791813910007477,
  0.791872441768646,
  0.791930973529816,
  0.791989505290985,
  0.792048037052155,
  0.792106568813324,
  0.792165100574493,
  0.792223572731018,
  0.792282104492188,
  0.792340576648712,
  0.792399108409882,
  0.792457580566406,
  0.792516052722931,
  0.792574524879456,
  0.792632937431335,
  0.79269140958786,
  0.79274982213974,
  0.792808294296265,
  0.792866706848145,
  0.792925119400024,
  0.792983531951904,
  0.793041944503784,
  0.793100357055664,
  0.793158769607544,
  0.793217122554779,
  0.793275535106659,
  0.793333888053894,
  0.793392241001129,
  0.793450593948364,
  0.793508946895599,
  0.793567299842834,
  0.79362565279007,
  0.79368394613266,
  0.793742299079895,
  0.793800592422485,
  0.793858885765076,
  0.793917179107666,
  0.793975472450256,
  0.794033765792847,
  0.794092059135437,
  0.794150292873383,
  0.794208586215973,
  0.794266819953918,
  0.794325053691864,
  0.79438328742981,
  0.794441521167755,
  0.794499754905701,
  0.794557988643646,
  0.794616162776947,
  0.794674396514893,
  0.794732570648193,
  0.794790744781494,
  0.79484897851944,
  0.79490715265274,
  0.794965267181396,
  0.795023441314697,
  0.795081615447998,
  0.795139729976654,
  0.795197904109955,
  0.795256018638611,
  0.795314133167267,
  0.795372247695923,
  0.795430362224579,
  0.795488476753235,
  0.795546531677246,
  0.795604646205902,
  0.795662701129913,
  0.795720756053925,
  0.795778870582581,
  0.795836925506592,
  0.795894920825958,
  0.795952975749969,
  0.796011030673981,
  0.796069085597992,
  0.796127080917358,
  0.796185076236725,
  0.796243071556091,
  0.796301066875458,
  0.796359062194824,
  0.796417057514191,
  0.796475052833557,
  0.796532988548279,
  0.796590983867645,
  0.796648919582367,
  0.796706855297089,
  0.79676479101181,
  0.796822726726532,
  0.796880662441254,
  0.796938598155975,
  0.796996474266052,
  0.797054409980774,
  0.797112286090851,
  0.797170162200928,
  0.797228038311005,
  0.797285914421082,
  0.797343790531158,
  0.797401666641235,
  0.797459483146667,
  0.797517359256744,
  0.797575175762177,
  0.797632992267609,
  0.797690868377686,
  0.797748684883118,
  0.797806441783905,
  0.797864258289337,
  0.797922074794769,
  0.797979831695557,
  0.798037648200989,
  0.798095405101776,
  0.798153162002563,
  0.798210918903351,
  0.798268675804138,
  0.798326373100281,
  0.798384130001068,
  0.798441886901855,
  0.798499584197998,
  0.798557281494141,
  0.798614978790283,
  0.798672676086426,
  0.798730373382568,
  0.798788070678711,
  0.798845767974854,
  0.798903405666351,
  0.798961043357849,
  0.799018740653992,
  0.79907637834549,
  0.799134016036987,
  0.799191653728485,
  0.799249231815338,
  0.799306869506836,
  0.799364507198334,
  0.799422085285187,
  0.79947966337204,
  0.799537241458893,
  0.799594879150391,
  0.799652397632599,
  0.799709975719452,
  0.799767553806305,
  0.799825072288513,
  0.799882650375366,
  0.799940168857574,
  0.799997687339783,
  0.800055205821991,
  0.800112724304199,
  0.800170242786407,
  0.800227761268616,
  0.800285220146179,
  0.800342738628387,
  0.800400197505951,
  0.800457656383514,
  0.800515115261078,
  0.800572574138641,
  0.800630033016205,
  0.800687491893768,
  0.800744891166687,
  0.800802290439606,
  0.800859749317169,
  0.800917148590088,
  0.800974547863007,
  0.801031947135925,
  0.801089346408844,
  0.801146745681763,
  0.801204085350037,
  0.801261484622955,
  0.801318824291229,
  0.801376163959503,
  0.801433503627777,
  0.801490843296051,
  0.801548182964325,
  0.801605522632599,
  0.801662802696228,
  0.801720142364502,
  0.801777422428131,
  0.80183470249176,
  0.801891982555389,
  0.801949262619019,
  0.802006542682648,
  0.802063822746277,
  0.802121043205261,
  0.80217832326889,
  0.802235543727875,
  0.802292823791504,
  0.802350044250488,
  0.802407264709473,
  0.802464425563812,
  0.802521646022797,
  0.802578866481781,
  0.802636027336121,
  0.802693247795105,
  0.802750408649445,
  0.802807569503784,
  0.802864730358124,
  0.802921891212463,
  0.802978992462158,
  0.803036153316498,
  0.803093314170837,
  0.803150415420532,
  0.803207516670227,
  0.803264617919922,
  0.803321719169617,
  0.803378820419312,
  0.803435921669006,
  0.803493022918701,
  0.803550064563751,
  0.803607106208801,
  0.803664207458496,
  0.803721249103546,
  0.803778290748596,
  0.803835332393646,
  0.803892314434052,
  0.803949356079102,
  0.804006397724152,
  0.804063379764557,
  0.804120361804962,
  0.804177343845367,
  0.804234325885773,
  0.804291307926178,
  0.804348289966583,
  0.804405272006989,
  0.804462194442749,
  0.804519176483154,
  0.804576098918915,
  0.804633021354675,
  0.804689943790436,
  0.804746866226196,
  0.804803788661957,
  0.804860651493073,
  0.804917573928833,
  0.804974436759949,
  0.805031359195709,
  0.805088222026825,
  0.805145084857941,
  0.805201947689056,
  0.805258750915527,
  0.805315613746643,
  0.805372476577759,
  0.80542927980423,
  0.805486083030701,
  0.805542886257172,
  0.805599749088287,
  0.805656492710114,
  0.805713295936584,
  0.805770099163055,
  0.805826842784882,
  0.805883646011353,
  0.805940389633179,
  0.805997133255005,
  0.806053876876831,
  0.806110620498657,
  0.806167364120483,
  0.80622410774231,
  0.806280791759491,
  0.806337535381317,
  0.806394219398499,
  0.80645090341568,
  0.806507587432861,
  0.806564271450043,
  0.806620955467224,
  0.806677639484406,
  0.806734263896942,
  0.806790888309479,
  0.80684757232666,
  0.806904196739197,
  0.806960821151733,
  0.80701744556427,
  0.807074069976807,
  0.807130634784698,
  0.807187259197235,
  0.807243824005127,
  0.807300448417664,
  0.807357013225555,
  0.807413578033447,
  0.807470142841339,
  0.807526707649231,
  0.807583212852478,
  0.80763977766037,
  0.807696282863617,
  0.807752847671509,
  0.807809352874756,
  0.807865858078003,
  0.80792236328125,
  0.807978868484497,
  0.808035314083099,
  0.808091819286346,
  0.808148264884949,
  0.808204710483551,
  0.808261215686798,
  0.8083176612854,
  0.808374106884003,
  0.80843049287796,
  0.808486938476562,
  0.808543384075165,
  0.808599770069122,
  0.80865615606308,
  0.808712601661682,
  0.80876898765564,
  0.808825373649597,
  0.808881759643555,
  0.808938086032867,
  0.808994472026825,
  0.809050798416138,
  0.80910712480545,
  0.809163510799408,
  0.809219837188721,
  0.809276163578033,
  0.809332430362701,
  0.809388756752014,
  0.809445083141327,
  0.809501349925995,
  0.809557616710663,
  0.809613943099976,
  0.809670209884644,
  0.809726476669312,
  0.809782683849335,
  0.809838950634003,
  0.809895217418671,
  0.809951424598694,
  0.810007631778717,
  0.810063898563385,
  0.810120105743408,
  0.810176312923431,
  0.81023246049881,
  0.810288667678833,
  0.810344874858856,
  0.810401022434235,
  0.810457229614258,
  0.810513377189636,
  0.810569524765015,
  0.810625672340393,
  0.810681760311127,
  0.810737907886505,
  0.810794055461884,
  0.810850143432617,
  0.810906231403351,
  0.810962378978729,
  0.811018466949463,
  0.811074554920197,
  0.811130583286285,
  0.811186671257019,
  0.811242759227753,
  0.811298787593842,
  0.811354875564575,
  0.811410903930664,
  0.811466932296753,
  0.811522960662842,
  0.811578989028931,
  0.811634957790375,
  0.811690986156464,
  0.811746954917908,
  0.811802983283997,
  0.811858952045441,
  0.811914920806885,
  0.811970889568329,
  0.812026858329773,
  0.812082767486572,
  0.812138736248016,
  0.812194645404816,
  0.81225061416626,
  0.812306523323059,
  0.812362432479858,
  0.812418341636658,
  0.812474191188812,
  0.812530100345612,
  0.812586009502411,
  0.812641859054565,
  0.812697768211365,
  0.812753617763519,
  0.812809467315674,
  0.812865316867828,
  0.812921166419983,
  0.812976956367493,
  0.813032805919647,
  0.813088595867157,
  0.813144385814667,
  0.813200235366821,
  0.813256025314331,
  0.813311815261841,
  0.813367545604706,
  0.813423335552216,
  0.813479125499725,
  0.81353485584259,
  0.813590586185455,
  0.813646376132965,
  0.81370210647583,
  0.813757836818695,
  0.813813507556915,
  0.81386923789978,
  0.813924968242645,
  0.813980638980865,
  0.814036309719086,
  0.814091980457306,
  0.814147651195526,
  0.814203321933746,
  0.814258992671967,
  0.814314663410187,
  0.814370274543762,
  0.814425945281982,
  0.814481556415558,
  0.814537167549133,
  0.814592778682709,
  0.814648389816284,
  0.81470400094986,
  0.814759612083435,
  0.814815163612366,
  0.814870774745941,
  0.814926326274872,
  0.814981877803802,
  0.815037429332733,
  0.815092980861664,
  0.815148532390594,
  0.815204083919525,
  0.815259575843811,
  0.815315127372742,
  0.815370619297028,
  0.815426111221313,
  0.815481603145599,
  0.815537095069885,
  0.815592586994171,
  0.815648019313812,
  0.815703511238098,
  0.815758943557739,
  0.815814435482025,
  0.815869867801666,
  0.815925300121307,
  0.815980732440948,
  0.816036105155945,
  0.816091537475586,
  0.816146969795227,
  0.816202342510223,
  0.81625771522522,
  0.816313087940216,
  0.816368460655212,
  0.816423833370209,
  0.816479206085205,
  0.816534578800201,
  0.816589891910553,
  0.816645264625549,
  0.816700577735901,
  0.816755890846252,
  0.816811203956604,
  0.816866517066956,
  0.816921830177307,
  0.816977083683014,
  0.817032396793365,
  0.817087650299072,
  0.817142903804779,
  0.817198216915131,
  0.817253470420837,
  0.817308664321899,
  0.817363917827606,
  0.817419171333313,
  0.817474365234375,
  0.817529618740082,
  0.817584812641144,
  0.817640006542206,
  0.817695200443268,
  0.81775039434433,
  0.817805588245392,
  0.817860722541809,
  0.817915916442871,
  0.817971050739288,
  0.818026185035706,
  0.818081378936768,
  0.818136513233185,
  0.818191587924957,
  0.818246722221375,
  0.818301856517792,
  0.818356931209564,
  0.818412065505981,
  0.818467140197754,
  0.818522214889526,
  0.818577289581299,
  0.818632364273071,
  0.818687438964844,
  0.818742454051971,
  0.818797528743744,
  0.818852543830872,
  0.818907558917999,
  0.818962574005127,
  0.819017589092255,
  0.819072604179382,
  0.81912761926651,
  0.819182574748993,
  0.819237589836121,
  0.819292545318604,
  0.819347500801086,
  0.819402456283569,
  0.819457411766052,
  0.819512367248535,
  0.819567322731018,
  0.819622278213501,
  0.819677174091339,
  0.819732069969177,
  0.819786965847015,
  0.819841861724854,
  0.819896817207336,
  0.81995165348053,
  0.820006549358368,
  0.820061445236206,
  0.820116281509399,
  0.820171117782593,
  0.820225954055786,
  0.820280790328979,
  0.820335626602173,
  0.820390462875366,
  0.82044529914856,
  0.820500135421753,
  0.820554912090302,
  0.82060968875885,
  0.820664465427399,
  0.820719242095947,
  0.820774018764496,
  0.820828795433044,
  0.820883572101593,
  0.820938289165497,
  0.820993065834045,
  0.821047782897949,
  0.821102499961853,
  0.821157217025757,
  0.821211934089661,
  0.821266651153564,
  0.821321368217468,
  0.821376025676727,
  0.821430742740631,
  0.82148540019989,
  0.821540057659149,
  0.821594715118408,
  0.821649372577667,
  0.821704030036926,
  0.821758627891541,
  0.8218132853508,
  0.821867883205414,
  0.821922481060028,
  0.821977138519287,
  0.822031736373901,
  0.822086274623871,
  0.822140872478485,
  0.822195470333099,
  0.822250008583069,
  0.822304606437683,
  0.822359144687653,
  0.822413682937622,
  0.822468221187592,
  0.822522759437561,
  0.822577297687531,
  0.822631776332855,
  0.822686314582825,
  0.822740793228149,
  0.822795271873474,
  0.822849750518799,
  0.822904288768768,
  0.822958707809448,
  0.823013186454773,
  0.823067665100098,
  0.823122084140778,
  0.823176503181458,
  0.823230981826782,
  0.823285400867462,
  0.823339819908142,
  0.823394238948822,
  0.823448598384857,
  0.823503017425537,
  0.823557376861572,
  0.823611795902252,
  0.823666155338287,
  0.823720514774323,
  0.823774874210358,
  0.823829233646393,
  0.823883533477783,
  0.823937892913818,
  0.823992192745209,
  0.824046552181244,
  0.824100852012634,
  0.824155151844025,
  0.824209451675415,
  0.824263751506805,
  0.824317991733551,
  0.824372291564941,
  0.824426531791687,
  0.824480831623077,
  0.824535071849823,
  0.824589312076569,
  0.824643552303314,
  0.82469779253006,
  0.824751973152161,
  0.824806213378906,
  0.824860394001007,
  0.824914574623108,
  0.824968814849854,
  0.825022995471954,
  0.825077176094055,
  0.825131297111511,
  0.825185477733612,
  0.825239598751068,
  0.825293779373169,
  0.825347900390625,
  0.825402021408081,
  0.825456142425537,
  0.825510263442993,
  0.825564384460449,
  0.82561844587326,
  0.825672566890717,
  0.825726628303528,
  0.825780749320984,
  0.825834810733795,
  0.825888872146606,
  0.825942873954773,
  0.825996935367584,
  0.826050996780396,
  0.826104998588562,
  0.826159060001373,
  0.82621306180954,
  0.826267063617706,
  0.826321065425873,
  0.826375067234039,
  0.826429069042206,
  0.826483011245728,
  0.826537013053894,
  0.826590955257416,
  0.826644897460938,
  0.826698839664459,
  0.826752781867981,
  0.826806724071503,
  0.826860666275024,
  0.826914548873901,
  0.826968491077423,
  0.8270223736763,
  0.827076256275177,
  0.827130138874054,
  0.827184021472931,
  0.827237904071808,
  0.827291786670685,
  0.827345609664917,
  0.827399432659149,
  0.827453315258026,
  0.827507138252258,
  0.82756096124649,
  0.827614784240723,
  0.827668607234955,
  0.827722370624542,
  0.827776193618774,
  0.827829957008362,
  0.827883720397949,
  0.827937543392181,
  0.827991306781769,
  0.828045070171356,
  0.828098773956299,
  0.828152537345886,
  0.828206241130829,
  0.828260004520416,
  0.828313708305359,
  0.828367412090302,
  0.828421115875244,
  0.828474819660187,
  0.828528523445129,
  0.828582167625427,
  0.82863587141037,
  0.828689515590668,
  0.82874321937561,
  0.828796863555908,
  0.828850507736206,
  0.828904092311859,
  0.828957736492157,
  0.829011380672455,
  0.829064965248108,
  0.829118609428406,
  0.829172194004059,
  0.829225778579712,
  0.829279363155365,
  0.829332947731018,
  0.829386472702026,
  0.829440057277679,
  0.829493582248688,
  0.829547166824341,
  0.829600691795349,
  0.829654216766357,
  0.829707741737366,
  0.829761207103729,
  0.829814732074738,
  0.829868257045746,
  0.829921722412109,
  0.829975187778473,
  0.830028653144836,
  0.830082178115845,
  0.830135583877563,
  0.830189049243927,
  0.830242514610291,
  0.830295920372009,
  0.830349385738373,
  0.830402791500092,
  0.83045619726181,
  0.830509603023529,
  0.830563008785248,
  0.830616414546967,
  0.830669760704041,
  0.830723166465759,
  0.830776512622833,
  0.830829918384552,
  0.830883264541626,
  0.830936551094055,
  0.830989897251129,
  0.831043243408203,
  0.831096589565277,
  0.831149876117706,
  0.831203162670135,
  0.831256508827209,
  0.831309795379639,
  0.831363081932068,
  0.831416368484497,
  0.831469595432281,
  0.831522881984711,
  0.831576108932495,
  0.831629395484924,
  0.831682622432709,
  0.831735849380493,
  0.831789076328278,
  0.831842303276062,
  0.831895470619202,
  0.831948697566986,
  0.832001864910126,
  0.832055032253265,
  0.83210825920105,
  0.832161426544189,
  0.832214593887329,
  0.832267701625824,
  0.832320868968964,
  0.832374036312103,
  0.832427144050598,
  0.832480251789093,
  0.832533359527588,
  0.832586467266083,
  0.832639575004578,
  0.832692682743073,
  0.832745730876923,
  0.832798838615417,
  0.832851886749268,
  0.832904994487762,
  0.832958042621613,
  0.833011090755463,
  0.833064138889313,
  0.833117127418518,
  0.833170175552368,
  0.833223164081573,
  0.833276212215424,
  0.833329200744629,
  0.833382189273834,
  0.83343517780304,
  0.833488166332245,
  0.833541095256805,
  0.833594083786011,
  0.833647012710571,
  0.833700001239777,
  0.833752930164337,
  0.833805859088898,
  0.833858788013458,
  0.833911716938019,
  0.833964586257935,
  0.834017515182495,
  0.834070384502411,
  0.834123253822327,
  0.834176182746887,
  0.834229052066803,
  0.834281861782074,
  0.83433473110199,
  0.834387600421906,
  0.834440410137177,
  0.834493279457092,
  0.834546089172363,
  0.834598898887634,
  0.834651708602905,
  0.834704518318176,
  0.834757328033447,
  0.834810078144073,
  0.834862887859344,
  0.834915637969971,
  0.834968388080597,
  0.835021138191223,
  0.835073888301849,
  0.835126638412476,
  0.835179388523102,
  0.835232138633728,
  0.835284829139709,
  0.835337519645691,
  0.835390269756317,
  0.835442900657654,
  0.835495591163635,
  0.835548281669617,
  0.835600972175598,
  0.835653603076935,
  0.835706293582916,
  0.835758924484253,
  0.83581155538559,
  0.835864186286926,
  0.835916817188263,
  0.8359694480896,
  0.836022078990936,
  0.836074650287628,
  0.83612722158432,
  0.836179852485657,
  0.836232423782349,
  0.836284995079041,
  0.836337566375732,
  0.836390137672424,
  0.836442649364471,
  0.836495161056519,
  0.83654773235321,
  0.836600244045258,
  0.836652755737305,
  0.836705267429352,
  0.836757779121399,
  0.836810290813446,
  0.836862742900848,
  0.836915254592896,
  0.836967706680298,
  0.8370201587677,
  0.837072610855103,
  0.837125062942505,
  0.837177515029907,
  0.83722996711731,
  0.837282359600067,
  0.837334811687469,
  0.837387204170227,
  0.837439596652985,
  0.837491989135742,
  0.8375443816185,
  0.837596774101257,
  0.83764910697937,
  0.837701499462128,
  0.83775383234024,
  0.837806224822998,
  0.837858557701111,
  0.837910890579224,
  0.837963223457336,
  0.838015496730804,
  0.838067829608917,
  0.838120102882385,
  0.838172435760498,
  0.838224709033966,
  0.838276982307434,
  0.838329255580902,
  0.83838152885437,
  0.838433742523193,
  0.838486015796661,
  0.838538289070129,
  0.838590502738953,
  0.838642716407776,
  0.838694930076599,
  0.838747143745422,
  0.838799357414246,
  0.838851511478424,
  0.838903725147247,
  0.838955879211426,
  0.839008092880249,
  0.839060246944427,
  0.839112401008606,
  0.839164555072784,
  0.839216709136963,
  0.839268803596497,
  0.839320957660675,
  0.839373052120209,
  0.839425146579742,
  0.839477241039276,
  0.83952933549881,
  0.839581429958344,
  0.839633524417877,
  0.839685618877411,
  0.8397376537323,
  0.839789688587189,
  0.839841723442078,
  0.839893817901611,
  0.8399458527565,
  0.839997828006744,
  0.840049862861633,
  0.840101897716522,
  0.840153872966766,
  0.84020584821701,
  0.840257823467255,
  0.840309858322144,
  0.840361773967743,
  0.840413749217987,
  0.840465724468231,
  0.840517699718475,
  0.840569615364075,
  0.840621531009674,
  0.840673446655273,
  0.840725362300873,
  0.840777277946472,
  0.840829193592072,
  0.840881109237671,
  0.840932965278625,
  0.84098482131958,
  0.841036736965179,
  0.841088593006134,
  0.841140449047089,
  0.841192245483398,
  0.841244101524353,
  0.841295957565308,
  0.841347754001617,
  0.841399550437927,
  0.841451406478882,
  0.841503202915192,
  0.841554999351501,
  0.841606736183167,
  0.841658532619476,
  0.841710329055786,
  0.841762065887451,
  0.841813802719116,
  0.841865599155426,
  0.841917335987091,
  0.841969013214111,
  0.842020750045776,
  0.842072486877441,
  0.842124164104462,
  0.842175900936127,
  0.842227578163147,
  0.842279255390167,
  0.842330932617188,
  0.842382609844208,
  0.842434287071228,
  0.842485904693604,
  0.842537581920624,
  0.842589199542999,
  0.842640817165375,
  0.84269243478775,
  0.842744052410126,
  0.842795670032501,
  0.842847287654877,
  0.842898845672607,
  0.842950463294983,
  0.843002021312714,
  0.843053579330444,
  0.843105137348175,
  0.843156695365906,
  0.843208253383636,
  0.843259751796722,
  0.843311309814453,
  0.843362808227539,
  0.84341436624527,
  0.843465864658356,
  0.843517363071442,
  0.843568801879883,
  0.843620300292969,
  0.843671798706055,
  0.843723237514496,
  0.843774735927582,
  0.843826174736023,
  0.843877613544464,
  0.843929052352905,
  0.843980491161346,
  0.844031870365143,
  0.844083309173584,
  0.84413468837738,
  0.844186127185822,
  0.844237506389618,
  0.844288885593414,
  0.844340264797211,
  0.844391644001007,
  0.844442963600159,
  0.844494342803955,
  0.844545662403107,
  0.844596982002258,
  0.84464830160141,
  0.844699621200562,
  0.844750940799713,
  0.844802260398865,
  0.844853579998016,
  0.844904839992523,
  0.844956159591675,
  0.845007419586182,
  0.845058679580688,
  0.845109939575195,
  0.845161199569702,
  0.845212399959564,
  0.845263659954071,
  0.845314860343933,
  0.84536612033844,
  0.845417320728302,
  0.845468521118164,
  0.845519721508026,
  0.845570921897888,
  0.845622062683105,
  0.845673263072968,
  0.845724403858185,
  0.845775544643402,
  0.845826745033264,
  0.845877885818481,
  0.845928966999054,
  0.845980107784271,
  0.846031248569489,
  0.846082329750061,
  0.846133410930634,
  0.846184551715851,
  0.846235632896423,
  0.846286714076996,
  0.846337795257568,
  0.846388816833496,
  0.846439898014069,
  0.846490919589996,
  0.846542000770569,
  0.846593022346497,
  0.846644043922424,
  0.846695065498352,
  0.84674608707428,
  0.846797049045563,
  0.84684807062149,
  0.846899032592773,
  0.846949994564056,
  0.847000956535339,
  0.847051978111267,
  0.847102880477905,
  0.847153842449188,
  0.847204804420471,
  0.847255706787109,
  0.847306668758392,
  0.847357571125031,
  0.847408473491669,
  0.847459375858307,
  0.847510278224945,
  0.847561120986938,
  0.847612023353577,
  0.84766286611557,
  0.847713768482208,
  0.847764611244202,
  0.847815454006195,
  0.847866296768188,
  0.847917139530182,
  0.847967922687531,
  0.848018765449524,
  0.848069548606873,
  0.848120331764221,
  0.84817111492157,
  0.848221898078918,
  0.848272681236267,
  0.848323464393616,
  0.848374247550964,
  0.848424971103668,
  0.848475694656372,
  0.848526477813721,
  0.848577201366425,
  0.848627924919128,
  0.848678588867188,
  0.848729312419891,
  0.848780035972595,
  0.848830699920654,
  0.848881363868713,
  0.848932087421417,
  0.848982691764832,
  0.849033355712891,
  0.84908401966095,
  0.849134683609009,
  0.849185287952423,
  0.849235951900482,
  0.849286556243896,
  0.849337160587311,
  0.849387764930725,
  0.849438369274139,
  0.849488973617554,
  0.849539518356323,
  0.849590122699738,
  0.849640667438507,
  0.849691212177277,
  0.849741756916046,
  0.849792301654816,
  0.849842846393585,
  0.849893391132355,
  0.849943876266479,
  0.849994361400604,
  0.850044906139374,
  0.850095391273499,
  0.850145876407623,
  0.850196361541748,
  0.850246846675873,
  0.850297272205353,
  0.850347757339478,
  0.850398182868958,
  0.850448608398438,
  0.850499033927917,
  0.850549459457397,
  0.850599884986877,
  0.850650310516357,
  0.850700676441193,
  0.850751101970673,
  0.850801467895508,
  0.850851833820343,
  0.850902259349823,
  0.850952565670013,
  0.851002931594849,
  0.851053297519684,
  0.851103603839874,
  0.851153969764709,
  0.8512042760849,
  0.85125458240509,
  0.851304888725281,
  0.851355195045471,
  0.851405501365662,
  0.851455748081207,
  0.851506054401398,
  0.851556301116943,
  0.851606547832489,
  0.851656794548035,
  0.85170704126358,
  0.851757287979126,
  0.851807534694672,
  0.851857721805573,
  0.851907968521118,
  0.851958155632019,
  0.85200834274292,
  0.852058529853821,
  0.852108716964722,
  0.852158904075623,
  0.852209091186523,
  0.85225921869278,
  0.852309346199036,
  0.852359533309937,
  0.852409660816193,
  0.852459788322449,
  0.852509915828705,
  0.852559983730316,
  0.852610111236572,
  0.852660179138184,
  0.85271030664444,
  0.852760374546051,
  0.852810442447662,
  0.852860510349274,
  0.852910578250885,
  0.852960586547852,
  0.853010654449463,
  0.853060662746429,
  0.853110671043396,
  0.853160738945007,
  0.853210747241974,
  0.85326075553894,
  0.853310704231262,
  0.853360712528229,
  0.853410661220551,
  0.853460669517517,
  0.853510618209839,
  0.853560566902161,
  0.853610515594482,
  0.853660464286804,
  0.853710353374481,
  0.853760302066803,
  0.85381019115448,
  0.853860139846802,
  0.853910028934479,
  0.853959918022156,
  0.854009807109833,
  0.85405969619751,
  0.854109525680542,
  0.854159414768219,
  0.854209244251251,
  0.854259073734283,
  0.854308903217316,
  0.854358732700348,
  0.85440856218338,
  0.854458391666412,
  0.8545081615448,
  0.854557991027832,
  0.854607760906219,
  0.854657530784607,
  0.854707300662994,
  0.854757070541382,
  0.854806840419769,
  0.854856610298157,
  0.854906320571899,
  0.854956090450287,
  0.85500580072403,
  0.855055510997772,
  0.855105221271515,
  0.855154931545258,
  0.855204641819,
  0.855254292488098,
  0.855304002761841,
  0.855353653430939,
  0.855403304100037,
  0.855452954769135,
  0.855502605438232,
  0.85555225610733,
  0.855601906776428,
  0.855651497840881,
  0.855701148509979,
  0.855750739574432,
  0.855800330638885,
  0.855849921703339,
  0.855899512767792,
  0.855949103832245,
  0.855998694896698,
  0.856048226356506,
  0.856097757816315,
  0.856147348880768,
  0.856196880340576,
  0.856246411800385,
  0.856295943260193,
  0.856345415115356,
  0.856394946575165,
  0.856444418430328,
  0.856493890285492,
  0.8565434217453,
  0.856592893600464,
  0.856642365455627,
  0.856691777706146,
  0.85674124956131,
  0.856790721416473,
  0.856840133666992,
  0.856889545917511,
  0.85693895816803,
  0.856988370418549,
  0.857037782669067,
  0.857087194919586,
  0.85713654756546,
  0.857185959815979,
  0.857235312461853,
  0.857284665107727,
  0.857334077358246,
  0.857383370399475,
  0.857432723045349,
  0.857482075691223,
  0.857531368732452,
  0.857580721378326,
  0.857630014419556,
  0.857679307460785,
  0.857728600502014,
  0.857777893543243,
  0.857827186584473,
  0.857876420021057,
  0.857925713062286,
  0.857974946498871,
  0.858024179935455,
  0.85807341337204,
  0.858122646808624,
  0.858171880245209,
  0.858221113681793,
  0.858270287513733,
  0.858319520950317,
  0.858368694782257,
  0.858417868614197,
  0.858467042446136,
  0.858516216278076,
  0.858565390110016,
  0.858614504337311,
  0.85866367816925,
  0.858712792396545,
  0.858761966228485,
  0.85881108045578,
  0.858860194683075,
  0.858909249305725,
  0.85895836353302,
  0.859007477760315,
  0.859056532382965,
  0.859105587005615,
  0.859154641628265,
  0.85920375585556,
  0.859252750873566,
  0.859301805496216,
  0.859350860118866,
  0.859399855136871,
  0.859448909759521,
  0.859497904777527,
  0.859546899795532,
  0.859595894813538,
  0.859644889831543,
  0.859693884849548,
  0.859742820262909,
  0.859791815280914,
  0.859840750694275,
  0.859889686107635,
  0.859938621520996,
  0.859987556934357,
  0.860036492347717,
  0.860085368156433,
  0.860134303569794,
  0.86018317937851,
  0.860232055187225,
  0.860280990600586,
  0.860329866409302,
  0.860378682613373,
  0.860427558422089,
  0.860476434230804,
  0.860525250434875,
  0.860574126243591,
  0.860622942447662,
  0.860671758651733,
  0.860720574855804,
  0.860769331455231,
  0.860818147659302,
  0.860866963863373,
  0.860915720462799,
  0.860964477062225,
  0.861013233661652,
  0.861061990261078,
  0.861110746860504,
  0.86115950345993,
  0.861208200454712,
  0.861256957054138,
  0.86130565404892,
  0.861354351043701,
  0.861403107643127,
  0.861451745033264,
  0.861500442028046,
  0.861549139022827,
  0.861597776412964,
  0.861646473407745,
  0.861695110797882,
  0.861743748188019,
  0.861792385578156,
  0.861841022968292,
  0.861889660358429,
  0.861938238143921,
  0.861986875534058,
  0.86203545331955,
  0.862084031105042,
  0.862132608890533,
  0.862181186676025,
  0.862229764461517,
  0.862278342247009,
  0.862326860427856,
  0.862375438213348,
  0.862423956394196,
  0.862472474575043,
  0.86252099275589,
  0.862569510936737,
  0.862618029117584,
  0.862666487693787,
  0.862715005874634,
  0.862763464450836,
  0.862811923027039,
  0.862860381603241,
  0.862908840179443,
  0.862957298755646,
  0.863005757331848,
  0.863054156303406,
  0.863102614879608,
  0.863151013851166,
  0.863199412822723,
  0.863247811794281,
  0.863296210765839,
  0.863344609737396,
  0.863392949104309,
  0.863441348075867,
  0.86348968744278,
  0.863538026809692,
  0.863586366176605,
  0.863634705543518,
  0.863683044910431,
  0.863731384277344,
  0.863779664039612,
  0.863828003406525,
  0.863876283168793,
  0.863924562931061,
  0.863972842693329,
  0.864021122455597,
  0.864069402217865,
  0.864117622375488,
  0.864165902137756,
  0.86421412229538,
  0.864262342453003,
  0.864310562610626,
  0.86435878276825,
  0.864407002925873,
  0.864455223083496,
  0.864503383636475,
  0.864551603794098,
  0.864599764347076,
  0.864647924900055,
  0.864696085453033,
  0.864744246006012,
  0.86479240655899,
  0.864840567111969,
  0.864888668060303,
  0.864936769008636,
  0.864984929561615,
  0.865033030509949,
  0.865081131458282,
  0.865129172801971,
  0.865177273750305,
  0.865225374698639,
  0.865273416042328,
  0.865321457386017,
  0.865369498729706,
  0.865417540073395,
  0.865465581417084,
  0.865513622760773,
  0.865561664104462,
  0.865609645843506,
  0.86565762758255,
  0.865705668926239,
  0.865753650665283,
  0.865801632404327,
  0.865849554538727,
  0.865897536277771,
  0.865945518016815,
  0.865993440151215,
  0.866041362285614,
  0.866089284420013,
  0.866137206554413,
  0.866185128688812,
  0.866233050823212,
  0.866280972957611,
  0.866328835487366,
  0.866376757621765,
  0.86642462015152,
  0.866472482681274,
  0.866520345211029,
  0.866568207740784,
  0.866616010665894,
  0.866663873195648,
  0.866711676120758,
  0.866759479045868,
  0.866807281970978,
  0.866855084896088,
  0.866902887821198,
  0.866950690746307,
  0.866998493671417,
  0.867046236991882,
  0.867093980312347,
  0.867141783237457,
  0.867189526557922,
  0.867237269878387,
  0.867284953594208,
  0.867332696914673,
  0.867380440235138,
  0.867428123950958,
  0.867475807666779,
  0.867523491382599,
  0.867571175098419,
  0.86761885881424,
  0.86766654253006,
  0.86771422624588,
  0.867761850357056,
  0.867809474468231,
  0.867857158184052,
  0.867904782295227,
  0.867952406406403,
  0.867999970912933,
  0.868047595024109,
  0.868095219135284,
  0.868142783641815,
  0.868190348148346,
  0.868237912654877,
  0.868285477161407,
  0.868333041667938,
  0.868380606174469,
  0.868428111076355,
  0.868475675582886,
  0.868523180484772,
  0.868570685386658,
  0.868618190288544,
  0.86866569519043,
  0.868713200092316,
  0.868760704994202,
  0.868808150291443,
  0.868855655193329,
  0.86890310049057,
  0.868950545787811,
  0.868997991085052,
  0.869045436382294,
  0.86909282207489,
  0.869140267372131,
  0.869187653064728,
  0.869235098361969,
  0.869282484054565,
  0.869329869747162,
  0.869377255439758,
  0.869424641132355,
  0.869471967220306,
  0.869519352912903,
  0.869566679000854,
  0.869614005088806,
  0.869661331176758,
  0.869708716869354,
  0.869755983352661,
  0.869803309440613,
  0.869850635528564,
  0.869897902011871,
  0.869945168495178,
  0.869992434978485,
  0.870039701461792,
  0.870086967945099,
  0.870134234428406,
  0.870181500911713,
  0.870228707790375,
  0.870275974273682,
  0.870323181152344,
  0.870370388031006,
  0.870417594909668,
  0.87046480178833,
  0.870511949062347,
  0.87055915594101,
  0.870606303215027,
  0.870653510093689,
  0.870700657367706,
  0.870747804641724,
  0.870794951915741,
  0.870842039585114,
  0.870889186859131,
  0.870936274528503,
  0.870983421802521,
  0.871030509471893,
  0.871077597141266,
  0.871124684810638,
  0.871171772480011,
  0.871218800544739,
  0.871265888214111,
  0.871312916278839,
  0.871360003948212,
  0.871407032012939,
  0.871454060077667,
  0.871501088142395,
  0.871548056602478,
  0.871595084667206,
  0.871642053127289,
  0.871689081192017,
  0.8717360496521,
  0.871783018112183,
  0.871829986572266,
  0.871876955032349,
  0.871923863887787,
  0.87197083234787,
  0.872017741203308,
  0.872064709663391,
  0.872111618518829,
  0.872158527374268,
  0.872205436229706,
  0.872252285480499,
  0.872299194335938,
  0.872346043586731,
  0.872392952442169,
  0.872439801692963,
  0.872486650943756,
  0.87253350019455,
  0.872580349445343,
  0.872627139091492,
  0.872673988342285,
  0.872720777988434,
  0.872767567634583,
  0.872814357280731,
  0.87286114692688,
  0.872907936573029,
  0.872954726219177,
  0.873001456260681,
  0.87304824590683,
  0.873094975948334,
  0.873141705989838,
  0.873188436031342,
  0.873235166072845,
  0.873281896114349,
  0.873328566551208,
  0.873375296592712,
  0.873421967029572,
  0.873468697071075,
  0.873515367507935,
  0.873562037944794,
  0.873608648777008,
  0.873655319213867,
  0.873701989650726,
  0.873748600482941,
  0.873795211315155,
  0.873841822147369,
  0.873888432979584,
  0.873935043811798,
  0.873981654644012,
  0.874028265476227,
  0.874074816703796,
  0.874121367931366,
  0.87416797876358,
  0.87421452999115,
  0.874261021614075,
  0.874307572841644,
  0.874354124069214,
  0.874400615692139,
  0.874447166919708,
  0.874493658542633,
  0.874540150165558,
  0.874586641788483,
  0.874633133411407,
  0.874679625034332,
  0.874726057052612,
  0.874772548675537,
  0.874818980693817,
  0.874865412712097,
  0.874911844730377,
  0.874958276748657,
  0.875004708766937,
  0.875051081180573,
  0.875097513198853,
  0.875143885612488,
  0.875190317630768,
  0.875236690044403,
  0.875283062458038,
  0.875329375267029,
  0.875375747680664,
  0.875422120094299,
  0.87546843290329,
  0.87551474571228,
  0.875561118125916,
  0.875607371330261,
  0.875653684139252,
  0.875699996948242,
  0.875746309757233,
  0.875792562961578,
  0.875838875770569,
  0.875885128974915,
  0.87593138217926,
  0.875977635383606,
  0.876023888587952,
  0.876070082187653,
  0.876116335391998,
  0.876162528991699,
  0.8762087225914,
  0.876254916191101,
  0.876301169395447,
  0.876347303390503,
  0.876393496990204,
  0.876439690589905,
  0.876485824584961,
  0.876531958580017,
  0.876578092575073,
  0.876624286174774,
  0.876670360565186,
  0.876716494560242,
  0.876762628555298,
  0.876808702945709,
  0.876854836940765,
  0.876900911331177,
  0.876946985721588,
  0.876993060112,
  0.877039134502411,
  0.877085208892822,
  0.877131223678589,
  0.877177298069,
  0.877223312854767,
  0.877269327640533,
  0.8773153424263,
  0.877361357212067,
  0.877407312393188,
  0.877453327178955,
  0.877499341964722,
  0.877545297145844,
  0.877591252326965,
  0.877637207508087,
  0.877683162689209,
  0.877729117870331,
  0.877775013446808,
  0.87782096862793,
  0.877866864204407,
  0.877912819385529,
  0.877958714962006,
  0.878004610538483,
  0.87805050611496,
  0.878096342086792,
  0.878142237663269,
  0.878188073635101,
  0.878233969211578,
  0.878279805183411,
  0.878325641155243,
  0.878371477127075,
  0.878417253494263,
  0.878463089466095,
  0.878508925437927,
  0.878554701805115,
  0.878600478172302,
  0.87864625453949,
  0.878692030906677,
  0.878737807273865,
  0.878783583641052,
  0.878829300403595,
  0.878875076770782,
  0.878920793533325,
  0.878966510295868,
  0.879012227058411,
  0.879057943820953,
  0.879103660583496,
  0.879149317741394,
  0.879195034503937,
  0.879240691661835,
  0.879286348819733,
  0.879332005977631,
  0.879377663135529,
  0.879423320293427,
  0.879468977451324,
  0.879514575004578,
  0.879560172557831,
  0.879605829715729,
  0.879651427268982,
  0.879697024822235,
  0.879742562770844,
  0.879788160324097,
  0.87983375787735,
  0.879879295825958,
  0.879924833774567,
  0.87997043132782,
  0.880015969276428,
  0.880061507225037,
  0.880106985569,
  0.880152523517609,
  0.880198001861572,
  0.880243539810181,
  0.880289018154144,
  0.880334496498108,
  0.880379974842072,
  0.880425453186035,
  0.880470871925354,
  0.880516350269318,
  0.880561769008636,
  0.880607187747955,
  0.880652666091919,
  0.880698084831238,
  0.880743443965912,
  0.880788862705231,
  0.88083428144455,
  0.880879640579224,
  0.880924999713898,
  0.880970418453217,
  0.881015777587891,
  0.88106107711792,
  0.881106436252594,
  0.881151795387268,
  0.881197094917297,
  0.881242454051971,
  0.881287753582001,
  0.88133305311203,
  0.881378352642059,
  0.881423652172089,
  0.881468892097473,
  0.881514191627502,
  0.881559431552887,
  0.881604671478271,
  0.881649971008301,
  0.881695210933685,
  0.881740391254425,
  0.88178563117981,
  0.881830871105194,
  0.881876051425934,
  0.881921231746674,
  0.881966471672058,
  0.882011651992798,
  0.882056832313538,
  0.882101953029633,
  0.882147133350372,
  0.882192313671112,
  0.882237434387207,
  0.882282555103302,
  0.882327675819397,
  0.882372796535492,
  0.882417917251587,
  0.882463037967682,
  0.882508099079132,
  0.882553219795227,
  0.882598280906677,
  0.882643342018127,
  0.882688403129578,
  0.882733464241028,
  0.882778525352478,
  0.882823526859283,
  0.882868587970734,
  0.882913589477539,
  0.882958590984344,
  0.88300359249115,
  0.883048593997955,
  0.883093595504761,
  0.883138537406921,
  0.883183538913727,
  0.883228480815887,
  0.883273422718048,
  0.883318424224854,
  0.883363366127014,
  0.88340824842453,
  0.883453190326691,
  0.883498132228851,
  0.883543014526367,
  0.883587896823883,
  0.883632779121399,
  0.883677661418915,
  0.883722543716431,
  0.883767426013947,
  0.883812308311462,
  0.883857131004333,
  0.883901953697205,
  0.88394683599472,
  0.883991658687592,
  0.884036421775818,
  0.884081244468689,
  0.88412606716156,
  0.884170830249786,
  0.884215652942657,
  0.884260416030884,
  0.88430517911911,
  0.884349942207336,
  0.884394705295563,
  0.884439468383789,
  0.884484171867371,
  0.884528875350952,
  0.884573638439178,
  0.88461834192276,
  0.884663045406342,
  0.884707748889923,
  0.88475239276886,
  0.884797096252441,
  0.884841799736023,
  0.88488644361496,
  0.884931087493896,
  0.884975731372833,
  0.88502037525177,
  0.885065019130707,
  0.885109603404999,
  0.885154247283936,
  0.885198831558228,
  0.88524341583252,
  0.885288059711456,
  0.885332584381104,
  0.885377168655396,
  0.885421752929688,
  0.885466337203979,
  0.885510861873627,
  0.885555386543274,
  0.885599911212921,
  0.885644435882568,
  0.885688960552216,
  0.885733485221863,
  0.885777950286865,
  0.885822474956512,
  0.885866940021515,
  0.885911405086517,
  0.885955929756165,
  0.886000335216522,
  0.886044800281525,
  0.886089265346527,
  0.886133670806885,
  0.886178135871887,
  0.886222541332245,
  0.886266946792603,
  0.88631135225296,
  0.886355757713318,
  0.886400103569031,
  0.886444509029388,
  0.886488854885101,
  0.886533200740814,
  0.886577606201172,
  0.886621952056885,
  0.886666297912598,
  0.886710584163666,
  0.886754930019379,
  0.886799216270447,
  0.886843502521515,
  0.886887848377228,
  0.886932134628296,
  0.886976420879364,
  0.887020647525787,
  0.887064933776855,
  0.887109160423279,
  0.887153446674347,
  0.88719767332077,
  0.887241899967194,
  0.887286126613617,
  0.88733035326004,
  0.887374520301819,
  0.887418746948242,
  0.887462913990021,
  0.887507140636444,
  0.887551307678223,
  0.887595474720001,
  0.88763964176178,
  0.887683749198914,
  0.887727916240692,
  0.887772023677826,
  0.887816190719604,
  0.887860298156738,
  0.887904405593872,
  0.887948513031006,
  0.887992560863495,
  0.888036668300629,
  0.888080775737762,
  0.888124823570251,
  0.88816887140274,
  0.888212919235229,
  0.888256967067719,
  0.888301014900208,
  0.888345003128052,
  0.888389050960541,
  0.888433039188385,
  0.888477087020874,
  0.888521075248718,
  0.888565063476562,
  0.888608992099762,
  0.888652980327606,
  0.88869696855545,
  0.88874089717865,
  0.888784825801849,
  0.888828814029694,
  0.888872742652893,
  0.888916611671448,
  0.888960540294647,
  0.889004468917847,
  0.889048337936401,
  0.889092266559601,
  0.889136135578156,
  0.88918000459671,
  0.889223873615265,
  0.88926774263382,
  0.889311552047729,
  0.889355421066284,
  0.889399230480194,
  0.889443039894104,
  0.889486849308014,
  0.889530658721924,
  0.889574468135834,
  0.889618277549744,
  0.889662027359009,
  0.889705836772919,
  0.889749586582184,
  0.889793336391449,
  0.889837086200714,
  0.889880836009979,
  0.889924585819244,
  0.889968276023865,
  0.89001202583313,
  0.89005571603775,
  0.890099406242371,
  0.890143096446991,
  0.890186786651611,
  0.890230476856232,
  0.890274167060852,
  0.890317797660828,
  0.890361428260803,
  0.890405118465424,
  0.890448749065399,
  0.890492379665375,
  0.890535950660706,
  0.890579581260681,
  0.890623152256012,
  0.890666782855988,
  0.890710353851318,
  0.890753924846649,
  0.89079749584198,
  0.890841066837311,
  0.890884637832642,
  0.890928149223328,
  0.890971720218658,
  0.891015231609344,
  0.891058743000031,
  0.891102254390717,
  0.891145765781403,
  0.891189277172089,
  0.89123272895813,
  0.891276240348816,
  0.891319692134857,
  0.891363143920898,
  0.89140659570694,
  0.891450047492981,
  0.891493499279022,
  0.891536951065063,
  0.89158034324646,
  0.891623735427856,
  0.891667187213898,
  0.891710579395294,
  0.891753971576691,
  0.891797363758087,
  0.891840696334839,
  0.891884088516235,
  0.891927421092987,
  0.891970753669739,
  0.892014145851135,
  0.892057478427887,
  0.892100751399994,
  0.892144083976746,
  0.892187416553497,
  0.892230689525604,
  0.892273962497711,
  0.892317295074463,
  0.89236056804657,
  0.892403781414032,
  0.892447054386139,
  0.892490327358246,
  0.892533540725708,
  0.892576813697815,
  0.892620027065277,
  0.892663240432739,
  0.892706453800201,
  0.892749667167664,
  0.892792820930481,
  0.892836034297943,
  0.89287918806076,
  0.892922341823578,
  0.892965495586395,
  0.893008649349213,
  0.89305180311203,
  0.893094956874847,
  0.89313805103302,
  0.893181204795837,
  0.89322429895401,
  0.893267393112183,
  0.893310487270355,
  0.893353581428528,
  0.8933966755867,
  0.893439710140228,
  0.893482804298401,
  0.893525838851929,
  0.893568873405457,
  0.893611907958984,
  0.893654942512512,
  0.89369797706604,
  0.893740952014923,
  0.893783986568451,
  0.893826961517334,
  0.893869996070862,
  0.893912971019745,
  0.893955945968628,
  0.893998861312866,
  0.894041836261749,
  0.894084751605988,
  0.894127726554871,
  0.894170641899109,
  0.894213557243347,
  0.894256472587585,
  0.894299387931824,
  0.894342303276062,
  0.894385159015656,
  0.894428074359894,
  0.894470930099487,
  0.894513785839081,
  0.894556641578674,
  0.894599497318268,
  0.894642293453217,
  0.89468514919281,
  0.894728004932404,
  0.894770801067352,
  0.894813597202301,
  0.89485639333725,
  0.894899189472198,
  0.894941985607147,
  0.894984722137451,
  0.8950275182724,
  0.895070254802704,
  0.895112991333008,
  0.895155727863312,
  0.895198464393616,
  0.89524120092392,
  0.895283937454224,
  0.895326614379883,
  0.895369350910187,
  0.895412027835846,
  0.895454704761505,
  0.895497381687164,
  0.895540058612823,
  0.895582675933838,
  0.895625352859497,
  0.895667970180511,
  0.895710647106171,
  0.895753264427185,
  0.895795881748199,
  0.895838499069214,
  0.895881056785583,
  0.895923674106598,
  0.895966231822968,
  0.896008849143982,
  0.896051406860352,
  0.896093964576721,
  0.896136522293091,
  0.896179020404816,
  0.896221578121185,
  0.896264135837555,
  0.89630663394928,
  0.896349132061005,
  0.896391630172729,
  0.896434128284454,
  0.896476626396179,
  0.896519064903259,
  0.896561563014984,
  0.896604001522064,
  0.896646499633789,
  0.896688938140869,
  0.896731376647949,
  0.896773755550385,
  0.896816194057465,
  0.896858632564545,
  0.89690101146698,
  0.896943390369415,
  0.896985769271851,
  0.897028148174286,
  0.897070527076721,
  0.897112905979156,
  0.897155225276947,
  0.897197604179382,
  0.897239923477173,
  0.897282242774963,
  0.897324562072754,
  0.897366881370544,
  0.897409200668335,
  0.897451460361481,
  0.897493779659271,
  0.897536039352417,
  0.897578358650208,
  0.897620618343353,
  0.897662818431854,
  0.897705078125,
  0.897747337818146,
  0.897789537906647,
  0.897831797599792,
  0.897873997688293,
  0.897916197776794,
  0.897958397865295,
  0.898000597953796,
  0.898042738437653,
  0.898084938526154,
  0.89812707901001,
  0.898169279098511,
  0.898211419582367,
  0.898253500461578,
  0.898295640945435,
  0.898337781429291,
  0.898379921913147,
  0.898422002792358,
  0.89846408367157,
  0.898506164550781,
  0.898548245429993,
  0.898590326309204,
  0.898632407188416,
  0.898674488067627,
  0.898716509342194,
  0.89875853061676,
  0.898800551891327,
  0.898842632770538,
  0.89888459444046,
  0.898926615715027,
  0.898968636989594,
  0.899010598659515,
  0.899052619934082,
  0.899094581604004,
  0.899136543273926,
  0.899178504943848,
  0.89922046661377,
  0.899262368679047,
  0.899304330348969,
  0.899346232414246,
  0.899388134479523,
  0.8994300365448,
  0.899471938610077,
  0.899513840675354,
  0.899555742740631,
  0.899597585201263,
  0.899639487266541,
  0.899681329727173,
  0.899723172187805,
  0.899765014648438,
  0.89980685710907,
  0.899848699569702,
  0.89989048242569,
  0.899932324886322,
  0.89997410774231,
  0.900015890598297,
  0.900057673454285,
  0.900099456310272,
  0.90014123916626,
  0.900182962417603,
  0.90022474527359,
  0.900266468524933,
  0.900308191776276,
  0.900349915027618,
  0.900391638278961,
  0.900433361530304,
  0.900475025177002,
  0.900516748428345,
  0.900558412075043,
  0.900600075721741,
  0.900641798973083,
  0.900683403015137,
  0.900725066661835,
  0.900766730308533,
  0.900808334350586,
  0.900849997997284,
  0.900891602039337,
  0.90093320608139,
  0.900974810123444,
  0.901016414165497,
  0.90105801820755,
  0.901099562644958,
  0.901141107082367,
  0.90118271112442,
  0.901224255561829,
  0.901265799999237,
  0.901307344436646,
  0.901348829269409,
  0.901390373706818,
  0.901431858539581,
  0.90147340297699,
  0.901514887809753,
  0.901556372642517,
  0.901597857475281,
  0.9016392827034,
  0.901680767536163,
  0.901722192764282,
  0.901763677597046,
  0.901805102825165,
  0.901846528053284,
  0.901887953281403,
  0.901929378509521,
  0.901970744132996,
  0.902012169361115,
  0.902053534984589,
  0.902094900608063,
  0.902136266231537,
  0.902177631855011,
  0.902218997478485,
  0.902260303497314,
  0.902301669120789,
  0.902342975139618,
  0.902384340763092,
  0.902425646781921,
  0.902466952800751,
  0.902508199214935,
  0.902549505233765,
  0.902590811252594,
  0.902632057666779,
  0.902673304080963,
  0.902714550495148,
  0.902755796909332,
  0.902797043323517,
  0.902838289737701,
  0.902879476547241,
  0.902920722961426,
  0.902961909770966,
  0.903003096580505,
  0.903044283390045,
  0.903085470199585,
  0.903126657009125,
  0.90316778421402,
  0.90320897102356,
  0.903250098228455,
  0.90329122543335,
  0.903332352638245,
  0.90337347984314,
  0.903414607048035,
  0.903455674648285,
  0.90349680185318,
  0.90353786945343,
  0.90357893705368,
  0.903620004653931,
  0.903661072254181,
  0.903702139854431,
  0.903743207454681,
  0.903784215450287,
  0.903825283050537,
  0.903866291046143,
  0.903907299041748,
  0.903948307037354,
  0.903989315032959,
  0.90403026342392,
  0.904071271419525,
  0.904112219810486,
  0.904153168201447,
  0.904194176197052,
  0.904235064983368,
  0.904276013374329,
  0.904316961765289,
  0.904357850551605,
  0.904398798942566,
  0.904439687728882,
  0.904480576515198,
  0.904521465301514,
  0.90456235408783,
  0.904603242874146,
  0.904644072055817,
  0.904684960842133,
  0.904725790023804,
  0.904766619205475,
  0.904807448387146,
  0.904848277568817,
  0.904889106750488,
  0.904929876327515,
  0.904970705509186,
  0.905011475086212,
  0.905052244663239,
  0.905093014240265,
  0.905133783817291,
  0.905174553394318,
  0.905215263366699,
  0.905256032943726,
  0.905296742916107,
  0.905337452888489,
  0.90537816286087,
  0.905418872833252,
  0.905459582805634,
  0.905500292778015,
  0.905540943145752,
  0.905581653118134,
  0.90562230348587,
  0.905662953853607,
  0.905703604221344,
  0.905744254589081,
  0.905784845352173,
  0.90582549571991,
  0.905866086483002,
  0.905906677246094,
  0.905947327613831,
  0.905987918376923,
  0.90602844953537,
  0.906069040298462,
  0.906109571456909,
  0.906150162220001,
  0.906190693378448,
  0.906231224536896,
  0.906271755695343,
  0.90631228685379,
  0.906352818012238,
  0.90639328956604,
  0.906433820724487,
  0.90647429227829,
  0.906514763832092,
  0.906555235385895,
  0.906595706939697,
  0.9066361784935,
  0.906676590442657,
  0.90671706199646,
  0.906757473945618,
  0.906797885894775,
  0.906838297843933,
  0.906878709793091,
  0.906919121742249,
  0.906959474086761,
  0.906999886035919,
  0.907040238380432,
  0.907080590724945,
  0.907120943069458,
  0.907161295413971,
  0.907201647758484,
  0.907242000102997,
  0.907282292842865,
  0.907322585582733,
  0.907362937927246,
  0.907403230667114,
  0.907443523406982,
  0.907483756542206,
  0.907524049282074,
  0.907564282417297,
  0.907604575157166,
  0.907644808292389,
  0.907685041427612,
  0.907725274562836,
  0.907765507698059,
  0.907805740833282,
  0.907845914363861,
  0.907886147499084,
  0.907926321029663,
  0.907966494560242,
  0.90800666809082,
  0.908046841621399,
  0.908086955547333,
  0.908127129077911,
  0.908167243003845,
  0.908207356929779,
  0.908247530460358,
  0.908287644386292,
  0.908327698707581,
  0.908367812633514,
  0.908407926559448,
  0.908447980880737,
  0.908488035202026,
  0.90852814912796,
  0.908568143844604,
  0.908608198165894,
  0.908648252487183,
  0.908688306808472,
  0.908728301525116,
  0.90876829624176,
  0.908808290958405,
  0.908848345279694,
  0.908888280391693,
  0.908928275108337,
  0.908968269824982,
  0.909008204936981,
  0.909048199653625,
  0.909088134765625,
  0.909128069877625,
  0.909168004989624,
  0.909207880496979,
  0.909247815608978,
  0.909287691116333,
  0.909327626228333,
  0.909367501735687,
  0.909407377243042,
  0.909447252750397,
  0.909487128257751,
  0.909526944160461,
  0.909566819667816,
  0.909606635570526,
  0.909646451473236,
  0.909686326980591,
  0.909726083278656,
  0.909765899181366,
  0.909805715084076,
  0.909845471382141,
  0.909885287284851,
  0.909925043582916,
  0.909964799880981,
  0.910004556179047,
  0.910044312477112,
  0.910084068775177,
  0.910123765468597,
  0.910163462162018,
  0.910203218460083,
  0.910242915153503,
  0.910282611846924,
  0.910322308540344,
  0.91036194562912,
  0.91040164232254,
  0.910441279411316,
  0.910480976104736,
  0.910520613193512,
  0.910560250282288,
  0.910599827766418,
  0.910639464855194,
  0.91067910194397,
  0.910718679428101,
  0.910758256912231,
  0.910797894001007,
  0.910837411880493,
  0.910876989364624,
  0.910916566848755,
  0.910956144332886,
  0.910995662212372,
  0.911035239696503,
  0.911074757575989,
  0.911114275455475,
  0.911153733730316,
  0.911193251609802,
  0.911232769489288,
  0.91127222776413,
  0.911311745643616,
  0.911351203918457,
  0.911390662193298,
  0.91143012046814,
  0.911469578742981,
  0.911508977413177,
  0.911548435688019,
  0.911587834358215,
  0.911627233028412,
  0.911666631698608,
  0.911706030368805,
  0.911745429039001,
  0.911784768104553,
  0.91182416677475,
  0.911863505840302,
  0.911902844905853,
  0.91194224357605,
  0.911981523036957,
  0.912020862102509,
  0.91206020116806,
  0.912099480628967,
  0.912138819694519,
  0.912178099155426,
  0.912217378616333,
  0.91225665807724,
  0.912295937538147,
  0.912335157394409,
  0.912374436855316,
  0.912413656711578,
  0.912452936172485,
  0.912492156028748,
  0.91253137588501,
  0.912570536136627,
  0.912609755992889,
  0.912648975849152,
  0.912688136100769,
  0.912727296352386,
  0.912766456604004,
  0.912805616855621,
  0.912844777107239,
  0.912883937358856,
  0.912923097610474,
  0.912962198257446,
  0.913001298904419,
  0.913040399551392,
  0.913079500198364,
  0.913118600845337,
  0.91315770149231,
  0.913196742534637,
  0.91323584318161,
  0.913274884223938,
  0.913313925266266,
  0.913352966308594,
  0.913392007350922,
  0.91343104839325,
  0.913470029830933,
  0.91350907087326,
  0.913548052310944,
  0.913587033748627,
  0.91362601518631,
  0.913664996623993,
  0.913703978061676,
  0.913742959499359,
  0.913781881332397,
  0.913820803165436,
  0.913859724998474,
  0.913898646831512,
  0.913937568664551,
  0.913976490497589,
  0.914015412330627,
  0.914054274559021,
  0.914093136787415,
  0.914132058620453,
  0.914170920848846,
  0.91420978307724,
  0.914248585700989,
  0.914287447929382,
  0.914326250553131,
  0.914365112781525,
  0.914403915405273,
  0.914442718029022,
  0.914481520652771,
  0.91452032327652,
  0.914559066295624,
  0.914597868919373,
  0.914636611938477,
  0.914675354957581,
  0.914714097976685,
  0.914752840995789,
  0.914791584014893,
  0.914830327033997,
  0.914869010448456,
  0.91490775346756,
  0.914946436882019,
  0.914985120296478,
  0.915023803710938,
  0.915062487125397,
  0.915101110935211,
  0.91513979434967,
  0.915178418159485,
  0.915217041969299,
  0.915255725383759,
  0.915294349193573,
  0.915332913398743,
  0.915371537208557,
  0.915410101413727,
  0.915448725223541,
  0.915487289428711,
  0.915525853633881,
  0.91556441783905,
  0.91560298204422,
  0.91564154624939,
  0.915680050849915,
  0.915718615055084,
  0.915757119655609,
  0.915795624256134,
  0.915834128856659,
  0.915872633457184,
  0.915911138057709,
  0.915949583053589,
  0.915988028049469,
  0.916026532649994,
  0.916064977645874,
  0.916103422641754,
  0.916141867637634,
  0.91618025302887,
  0.91621869802475,
  0.916257083415985,
  0.916295528411865,
  0.916333913803101,
  0.916372299194336,
  0.916410684585571,
  0.916449010372162,
  0.916487395763397,
  0.916525721549988,
  0.916564106941223,
  0.916602432727814,
  0.916640758514404,
  0.916679084300995,
  0.916717350482941,
  0.916755676269531,
  0.916793942451477,
  0.916832268238068,
  0.916870534420013,
  0.916908800601959,
  0.916947066783905,
  0.916985273361206,
  0.917023539543152,
  0.917061746120453,
  0.917100012302399,
  0.9171382188797,
  0.917176425457001,
  0.917214632034302,
  0.917252838611603,
  0.917290985584259,
  0.91732919216156,
  0.917367339134216,
  0.917405486106873,
  0.917443633079529,
  0.917481780052185,
  0.917519927024841,
  0.917558014392853,
  0.917596161365509,
  0.917634248733521,
  0.917672336101532,
  0.917710423469543,
  0.917748510837555,
  0.917786598205566,
  0.917824685573578,
  0.917862713336945,
  0.917900800704956,
  0.917938828468323,
  0.917976856231689,
  0.918014883995056,
  0.918052852153778,
  0.918090879917145,
  0.918128907680511,
  0.918166875839233,
  0.918204843997955,
  0.918242812156677,
  0.918280780315399,
  0.918318748474121,
  0.918356716632843,
  0.91839462518692,
  0.918432533740997,
  0.918470501899719,
  0.918508410453796,
  0.918546319007874,
  0.918584167957306,
  0.918622076511383,
  0.91865998506546,
  0.918697834014893,
  0.918735682964325,
  0.918773531913757,
  0.91881138086319,
  0.918849229812622,
  0.918887078762054,
  0.918924868106842,
  0.918962717056274,
  0.919000506401062,
  0.91903829574585,
  0.919076085090637,
  0.919113874435425,
  0.919151604175568,
  0.919189393520355,
  0.919227123260498,
  0.919264853000641,
  0.919302582740784,
  0.919340312480927,
  0.919378042221069,
  0.919415771961212,
  0.91945344209671,
  0.919491171836853,
  0.919528841972351,
  0.919566512107849,
  0.919604182243347,
  0.919641852378845,
  0.919679522514343,
  0.919717133045197,
  0.919754803180695,
  0.919792413711548,
  0.919830024242401,
  0.919867634773254,
  0.919905245304108,
  0.919942796230316,
  0.919980406761169,
  0.920017957687378,
  0.920055568218231,
  0.92009311914444,
  0.920130670070648,
  0.920168220996857,
  0.92020571231842,
  0.920243263244629,
  0.920280754566193,
  0.920318305492401,
  0.920355796813965,
  0.920393288135529,
  0.920430779457092,
  0.920468211174011,
  0.920505702495575,
  0.920543134212494,
  0.920580565929413,
  0.920618057250977,
  0.920655488967896,
  0.92069286108017,
  0.920730292797089,
  0.920767724514008,
  0.920805096626282,
  0.920842468738556,
  0.92087984085083,
  0.920917212963104,
  0.920954585075378,
  0.920991957187653,
  0.921029329299927,
  0.921066641807556,
  0.921103954315186,
  0.921141266822815,
  0.921178638935089,
  0.921215891838074,
  0.921253204345703,
  0.921290516853333,
  0.921327769756317,
  0.921365022659302,
  0.921402275562286,
  0.921439588069916,
  0.921476781368256,
  0.92151403427124,
  0.921551287174225,
  0.921588480472565,
  0.921625673770905,
  0.921662926673889,
  0.921700060367584,
  0.921737253665924,
  0.921774446964264,
  0.921811640262604,
  0.921848773956299,
  0.921885967254639,
  0.921923100948334,
  0.921960234642029,
  0.921997368335724,
  0.922034442424774,
  0.922071576118469,
  0.92210865020752,
  0.922145783901215,
  0.922182857990265,
  0.922219932079315,
  0.922257006168365,
  0.922294020652771,
  0.922331094741821,
  0.922368168830872,
  0.922405183315277,
  0.922442197799683,
  0.922479212284088,
  0.922516226768494,
  0.922553241252899,
  0.92259019613266,
  0.922627210617065,
  0.922664165496826,
  0.922701120376587,
  0.922738075256348,
  0.922775030136108,
  0.922811985015869,
  0.922848880290985,
  0.922885835170746,
  0.922922730445862,
  0.922959625720978,
  0.922996520996094,
  0.92303341627121,
  0.923070311546326,
  0.923107206821442,
  0.923144042491913,
  0.923180878162384,
  0.9232177734375,
  0.923254609107971,
  0.923291444778442,
  0.923328220844269,
  0.92336505651474,
  0.923401832580566,
  0.923438668251038,
  0.923475444316864,
  0.92351222038269,
  0.923548996448517,
  0.923585772514343,
  0.923622488975525,
  0.923659265041351,
  0.923695981502533,
  0.923732697963715,
  0.923769414424896,
  0.923806130886078,
  0.92384284734726,
  0.923879504203796,
  0.923916220664978,
  0.923952877521515,
  0.923989534378052,
  0.924026191234589,
  0.924062848091125,
  0.924099504947662,
  0.924136161804199,
  0.924172759056091,
  0.924209415912628,
  0.92424601316452,
  0.924282610416412,
  0.924319207668304,
  0.924355804920197,
  0.924392342567444,
  0.924428939819336,
  0.924465477466583,
  0.924502015113831,
  0.924538552761078,
  0.924575090408325,
  0.924611628055573,
  0.92464816570282,
  0.924684643745422,
  0.924721121788025,
  0.924757659435272,
  0.924794137477875,
  0.924830555915833,
  0.924867033958435,
  0.924903512001038,
  0.924939930438995,
  0.924976408481598,
  0.925012826919556,
  0.925049245357513,
  0.925085663795471,
  0.925122082233429,
  0.925158441066742,
  0.9251948595047,
  0.925231218338013,
  0.925267577171326,
  0.925303936004639,
  0.925340294837952,
  0.925376653671265,
  0.925413012504578,
  0.925449311733246,
  0.925485610961914,
  0.925521969795227,
  0.925558269023895,
  0.925594568252563,
  0.925630807876587,
  0.925667107105255,
  0.925703406333923,
  0.925739645957947,
  0.92577588558197,
  0.925812125205994,
  0.925848364830017,
  0.925884604454041,
  0.925920784473419,
  0.925957024097443,
  0.925993204116821,
  0.9260293841362,
  0.926065564155579,
  0.926101744174957,
  0.926137924194336,
  0.926174104213715,
  0.926210224628448,
  0.926246404647827,
  0.926282525062561,
  0.926318645477295,
  0.926354765892029,
  0.926390886306763,
  0.926426947116852,
  0.926463067531586,
  0.926499128341675,
  0.926535189151764,
  0.926571249961853,
  0.926607310771942,
  0.926643371582031,
  0.92667943239212,
  0.926715433597565,
  0.926751434803009,
  0.926787495613098,
  0.926823496818542,
  0.926859498023987,
  0.926895439624786,
  0.926931440830231,
  0.92696738243103,
  0.927003383636475,
  0.927039325237274,
  0.927075266838074,
  0.927111208438873,
  0.927147150039673,
  0.927183032035828,
  0.927218973636627,
  0.927254855632782,
  0.927290737628937,
  0.927326679229736,
  0.927362501621246,
  0.927398383617401,
  0.927434265613556,
  0.927470088005066,
  0.927505970001221,
  0.927541792392731,
  0.927577614784241,
  0.927613437175751,
  0.927649259567261,
  0.927685022354126,
  0.927720844745636,
  0.927756607532501,
  0.927792370319366,
  0.927828133106232,
  0.927863895893097,
  0.927899658679962,
  0.927935361862183,
  0.927971124649048,
  0.928006827831268,
  0.928042531013489,
  0.928078293800354,
  0.928113996982574,
  0.92814964056015,
  0.928185343742371,
  0.928220987319946,
  0.928256690502167,
  0.928292334079742,
  0.928327977657318,
  0.928363621234894,
  0.928399264812469,
  0.9284348487854,
  0.928470492362976,
  0.928506076335907,
  0.928541660308838,
  0.928577244281769,
  0.9286128282547,
  0.928648412227631,
  0.928683996200562,
  0.928719520568848,
  0.928755044937134,
  0.928790628910065,
  0.928826153278351,
  0.928861677646637,
  0.928897142410278,
  0.928932666778564,
  0.928968131542206,
  0.929003655910492,
  0.929039120674133,
  0.929074585437775,
  0.929110050201416,
  0.929145514965057,
  0.929180920124054,
  0.929216384887695,
  0.929251790046692,
  0.929287195205688,
  0.929322600364685,
  0.929358005523682,
  0.929393410682678,
  0.92942875623703,
  0.929464161396027,
  0.929499506950378,
  0.92953485250473,
  0.929570257663727,
  0.929605543613434,
  0.929640889167786,
  0.929676234722137,
  0.929711520671844,
  0.929746866226196,
  0.929782152175903,
  0.92981743812561,
  0.929852724075317,
  0.92988795042038,
  0.929923236370087,
  0.929958462715149,
  0.929993748664856,
  0.930028975009918,
  0.93006420135498,
  0.930099427700043,
  0.930134654045105,
  0.930169820785522,
  0.930205047130585,
  0.930240213871002,
  0.93027538061142,
  0.930310547351837,
  0.930345714092255,
  0.930380880832672,
  0.930415987968445,
  0.930451154708862,
  0.930486261844635,
  0.930521368980408,
  0.93055647611618,
  0.930591583251953,
  0.930626690387726,
  0.930661737918854,
  0.930696845054626,
  0.930731892585754,
  0.930766940116882,
  0.93080198764801,
  0.930837035179138,
  0.930872082710266,
  0.930907070636749,
  0.930942118167877,
  0.93097710609436,
  0.931012094020844,
  0.931047081947327,
  0.93108206987381,
  0.931117057800293,
  0.931152045726776,
  0.931186974048615,
  0.931221902370453,
  0.931256830692291,
  0.931291818618774,
  0.931326687335968,
  0.931361615657806,
  0.931396543979645,
  0.931431412696838,
  0.931466281414032,
  0.93150120973587,
  0.931536078453064,
  0.931570887565613,
  0.931605756282806,
  0.931640625,
  0.931675434112549,
  0.931710243225098,
  0.931745052337646,
  0.931779861450195,
  0.931814670562744,
  0.931849479675293,
  0.931884288787842,
  0.931919038295746,
  0.93195378780365,
  0.931988537311554,
  0.932023286819458,
  0.932058036327362,
  0.932092785835266,
  0.93212753534317,
  0.932162225246429,
  0.932196915149689,
  0.932231605052948,
  0.932266294956207,
  0.932300984859467,
  0.932335674762726,
  0.93237030506134,
  0.9324049949646,
  0.932439625263214,
  0.932474255561829,
  0.932508885860443,
  0.932543516159058,
  0.932578146457672,
  0.932612717151642,
  0.932647347450256,
  0.932681918144226,
  0.932716488838196,
  0.932751059532166,
  0.932785630226135,
  0.93282014131546,
  0.93285471200943,
  0.932889223098755,
  0.932923793792725,
  0.93295830488205,
  0.932992815971375,
  0.933027327060699,
  0.93306177854538,
  0.933096289634705,
  0.933130741119385,
  0.933165192604065,
  0.933199644088745,
  0.933234095573425,
  0.933268547058105,
  0.933302998542786,
  0.933337390422821,
  0.933371841907501,
  0.933406233787537,
  0.933440625667572,
  0.933475017547607,
  0.933509409427643,
  0.933543741703033,
  0.933578133583069,
  0.933612465858459,
  0.933646857738495,
  0.933681190013885,
  0.933715522289276,
  0.933749794960022,
  0.933784127235413,
  0.933818459510803,
  0.933852732181549,
  0.933887004852295,
  0.933921277523041,
  0.933955550193787,
  0.933989822864532,
  0.934024095535278,
  0.934058308601379,
  0.93409252166748,
  0.934126794338226,
  0.934161007404327,
  0.934195220470428,
  0.934229373931885,
  0.934263586997986,
  0.934297800064087,
  0.934331953525543,
  0.934366106987,
  0.934400260448456,
  0.934434413909912,
  0.934468567371368,
  0.93450266122818,
  0.934536814689636,
  0.934570908546448,
  0.934605002403259,
  0.934639155864716,
  0.934673249721527,
  0.934707283973694,
  0.934741377830505,
  0.934775412082672,
  0.934809505939484,
  0.93484354019165,
  0.934877574443817,
  0.934911608695984,
  0.934945583343506,
  0.934979617595673,
  0.935013651847839,
  0.935047626495361,
  0.935081601142883,
  0.935115575790405,
  0.935149550437927,
  0.935183525085449,
  0.935217440128326,
  0.935251414775848,
  0.935285329818726,
  0.935319244861603,
  0.93535315990448,
  0.935387074947357,
  0.935420989990234,
  0.935454845428467,
  0.935488760471344,
  0.935522615909576,
  0.935556471347809,
  0.935590326786041,
  0.935624182224274,
  0.935658037662506,
  0.935691893100739,
  0.935725688934326,
  0.935759484767914,
  0.935793280601501,
  0.935827076435089,
  0.935860872268677,
  0.935894668102264,
  0.935928463935852,
  0.935962200164795,
  0.935995936393738,
  0.936029672622681,
  0.936063408851624,
  0.936097145080566,
  0.936130881309509,
  0.936164617538452,
  0.93619829416275,
  0.936231970787048,
  0.936265647411346,
  0.936299324035645,
  0.936333000659943,
  0.936366677284241,
  0.936400294303894,
  0.936433970928192,
  0.936467587947845,
  0.936501204967499,
  0.936534821987152,
  0.936568439006805,
  0.936602056026459,
  0.936635613441467,
  0.936669170856476,
  0.936702787876129,
  0.936736345291138,
  0.936769902706146,
  0.936803460121155,
  0.936836957931519,
  0.936870515346527,
  0.936904013156891,
  0.936937510967255,
  0.936971068382263,
  0.937004566192627,
  0.937038004398346,
  0.93707150220871,
  0.937104940414429,
  0.937138438224792,
  0.937171876430511,
  0.93720531463623,
  0.937238752841949,
  0.937272191047668,
  0.937305629253387,
  0.937339007854462,
  0.937372386455536,
  0.937405824661255,
  0.937439203262329,
  0.937472581863403,
  0.937505900859833,
  0.937539279460907,
  0.937572658061981,
  0.937605977058411,
  0.93763929605484,
  0.93767261505127,
  0.937705934047699,
  0.937739253044128,
  0.937772512435913,
  0.937805831432343,
  0.937839090824127,
  0.937872350215912,
  0.937905669212341,
  0.937938868999481,
  0.937972128391266,
  0.938005387783051,
  0.93803858757019,
  0.938071846961975,
  0.938105046749115,
  0.938138246536255,
  0.938171446323395,
  0.93820458650589,
  0.93823778629303,
  0.938270926475525,
  0.938304126262665,
  0.93833726644516,
  0.938370406627655,
  0.93840354681015,
  0.938436686992645,
  0.938469767570496,
  0.938502907752991,
  0.938535988330841,
  0.938569068908691,
  0.938602149486542,
  0.938635230064392,
  0.938668251037598,
  0.938701331615448,
  0.938734412193298,
  0.938767433166504,
  0.938800454139709,
  0.938833475112915,
  0.938866496086121,
  0.938899517059326,
  0.938932478427887,
  0.938965499401093,
  0.938998460769653,
  0.939031422138214,
  0.939064383506775,
  0.939097344875336,
  0.939130246639252,
  0.939163208007812,
  0.939196109771729,
  0.939229071140289,
  0.939261972904205,
  0.939294874668121,
  0.939327776432037,
  0.939360618591309,
  0.939393520355225,
  0.939426362514496,
  0.939459204673767,
  0.939492046833038,
  0.93952488899231,
  0.939557731151581,
  0.939590573310852,
  0.939623355865479,
  0.93965619802475,
  0.939688980579376,
  0.939721763134003,
  0.939754545688629,
  0.939787328243256,
  0.939820051193237,
  0.939852833747864,
  0.939885556697845,
  0.939918339252472,
  0.939951002597809,
  0.939983725547791,
  0.940016448497772,
  0.940049171447754,
  0.940081834793091,
  0.940114557743073,
  0.940147221088409,
  0.940179884433746,
  0.940212547779083,
  0.94024521112442,
  0.940277814865112,
  0.940310478210449,
  0.940343081951141,
  0.940375685691833,
  0.940408289432526,
  0.940440893173218,
  0.94047349691391,
  0.940506041049957,
  0.940538644790649,
  0.940571188926697,
  0.940603733062744,
  0.940636277198792,
  0.940668821334839,
  0.940701365470886,
  0.940733909606934,
  0.940766394138336,
  0.940798878669739,
  0.940831422805786,
  0.940863907337189,
  0.940896332263947,
  0.940928816795349,
  0.940961301326752,
  0.94099372625351,
  0.941026151180267,
  0.94105863571167,
  0.941091001033783,
  0.941123425960541,
  0.941155850887299,
  0.941188275814056,
  0.941220641136169,
  0.941253006458282,
  0.941285371780396,
  0.941317737102509,
  0.941350102424622,
  0.941382467746735,
  0.941414773464203,
  0.941447138786316,
  0.941479444503784,
  0.941511750221252,
  0.941544055938721,
  0.941576361656189,
  0.941608667373657,
  0.941640913486481,
  0.941673219203949,
  0.941705465316772,
  0.941737711429596,
  0.941769957542419,
  0.941802203655243,
  0.941834390163422,
  0.941866636276245,
  0.941898822784424,
  0.941931009292603,
  0.941963195800781,
  0.94199538230896,
  0.942027568817139,
  0.942059755325317,
  0.942091882228851,
  0.94212406873703,
  0.942156195640564,
  0.942188322544098,
  0.942220449447632,
  0.942252576351166,
  0.942284643650055,
  0.942316770553589,
  0.942348837852478,
  0.942380905151367,
  0.942412972450256,
  0.942445039749146,
  0.942477107048035,
  0.942509114742279,
  0.942541182041168,
  0.942573189735413,
  0.942605197429657,
  0.942637205123901,
  0.942669212818146,
  0.94270122051239,
  0.942733228206635,
  0.942765176296234,
  0.942797124385834,
  0.942829072475433,
  0.942861020565033,
  0.942892968654633,
  0.942924916744232,
  0.942956864833832,
  0.942988753318787,
  0.943020641803741,
  0.943052530288696,
  0.943084418773651,
  0.943116307258606,
  0.943148195743561,
  0.943180024623871,
  0.943211913108826,
  0.943243741989136,
  0.943275570869446,
  0.943307399749756,
  0.943339228630066,
  0.943371057510376,
  0.943402826786041,
  0.943434655666351,
  0.943466424942017,
  0.943498194217682,
  0.943529963493347,
  0.943561732769012,
  0.943593442440033,
  0.943625211715698,
  0.943656921386719,
  0.943688631057739,
  0.94372034072876,
  0.94375205039978,
  0.943783760070801,
  0.943815469741821,
  0.943847119808197,
  0.943878829479218,
  0.943910479545593,
  0.943942129611969,
  0.943973779678345,
  0.94400542974472,
  0.944037020206451,
  0.944068670272827,
  0.944100260734558,
  0.944131851196289,
  0.94416344165802,
  0.944195032119751,
  0.944226622581482,
  0.944258153438568,
  0.944289743900299,
  0.944321274757385,
  0.944352805614471,
  0.944384336471558,
  0.944415867328644,
  0.94444739818573,
  0.944478929042816,
  0.944510400295258,
  0.944541871547699,
  0.94457334280014,
  0.944604814052582,
  0.944636285305023,
  0.944667756557465,
  0.944699227809906,
  0.944730639457703,
  0.944762051105499,
  0.944793462753296,
  0.944824874401093,
  0.944856286048889,
  0.944887697696686,
  0.944919049739838,
  0.944950461387634,
  0.944981813430786,
  0.945013165473938,
  0.94504451751709,
  0.945075869560242,
  0.945107161998749,
  0.945138514041901,
  0.945169806480408,
  0.94520115852356,
  0.945232450962067,
  0.945263743400574,
  0.945294976234436,
  0.945326268672943,
  0.94535756111145,
  0.945388793945312,
  0.945420026779175,
  0.945451259613037,
  0.945482492446899,
  0.945513725280762,
  0.945544958114624,
  0.945576131343842,
  0.945607304573059,
  0.945638537406921,
  0.945669710636139,
  0.945700824260712,
  0.945731997489929,
  0.945763170719147,
  0.945794284343719,
  0.945825457572937,
  0.94585657119751,
  0.945887684822083,
  0.945918798446655,
  0.945949852466583,
  0.945980966091156,
  0.946012020111084,
  0.946043133735657,
  0.946074187755585,
  0.946105241775513,
  0.946136295795441,
  0.946167290210724,
  0.946198344230652,
  0.946229338645935,
  0.946260392665863,
  0.946291387081146,
  0.946322381496429,
  0.946353375911713,
  0.946384310722351,
  0.946415305137634,
  0.946446239948273,
  0.946477174758911,
  0.946508169174194,
  0.946539044380188,
  0.946569979190826,
  0.946600914001465,
  0.946631848812103,
  0.946662724018097,
  0.946693599224091,
  0.946724474430084,
  0.946755349636078,
  0.946786224842072,
  0.94681704044342,
  0.946847915649414,
  0.946878731250763,
  0.946909606456757,
  0.946940422058105,
  0.946971237659454,
  0.947001993656158,
  0.947032809257507,
  0.947063565254211,
  0.94709438085556,
  0.947125136852264,
  0.947155892848969,
  0.947186648845673,
  0.947217404842377,
  0.947248101234436,
  0.94727885723114,
  0.947309553623199,
  0.947340250015259,
  0.947370946407318,
  0.947401642799377,
  0.947432339191437,
  0.947462975978851,
  0.947493672370911,
  0.947524309158325,
  0.94755494594574,
  0.947585582733154,
  0.947616219520569,
  0.947646856307983,
  0.947677433490753,
  0.947708070278168,
  0.947738647460938,
  0.947769224643707,
  0.947799801826477,
  0.947830379009247,
  0.947860956192017,
  0.947891473770142,
  0.947921991348267,
  0.947952568531036,
  0.947983086109161,
  0.948013603687286,
  0.948044061660767,
  0.948074579238892,
  0.948105096817017,
  0.948135554790497,
  0.948166012763977,
  0.948196470737457,
  0.948226928710938,
  0.948257386684418,
  0.948287844657898,
  0.948318243026733,
  0.948348641395569,
  0.948379099369049,
  0.948409497737885,
  0.94843989610672,
  0.948470234870911,
  0.948500633239746,
  0.948530972003937,
  0.948561370372772,
  0.948591709136963,
  0.948622047901154,
  0.948652386665344,
  0.94868266582489,
  0.948713004589081,
  0.948743283748627,
  0.948773622512817,
  0.948803901672363,
  0.948834180831909,
  0.948864459991455,
  0.948894739151001,
  0.948924958705902,
  0.948955178260803,
  0.948985457420349,
  0.94901567697525,
  0.949045896530151,
  0.949076116085052,
  0.949106276035309,
  0.94913649559021,
  0.949166655540466,
  0.949196815490723,
  0.949227035045624,
  0.949257135391235,
  0.949287295341492,
  0.949317455291748,
  0.94934755563736,
  0.949377715587616,
  0.949407815933228,
  0.949437916278839,
  0.949468016624451,
  0.949498116970062,
  0.949528157711029,
  0.949558258056641,
  0.949588298797607,
  0.949618339538574,
  0.949648380279541,
  0.949678421020508,
  0.949708461761475,
  0.949738502502441,
  0.949768483638763,
  0.949798464775085,
  0.949828505516052,
  0.949858486652374,
  0.949888467788696,
  0.949918389320374,
  0.949948370456696,
  0.949978291988373,
  0.950008273124695,
  0.950038194656372,
  0.950068116188049,
  0.950098037719727,
  0.950127899646759,
  0.950157821178436,
  0.950187683105469,
  0.950217545032501,
  0.950247466564178,
  0.950277328491211,
  0.950307130813599,
  0.950336992740631,
  0.950366854667664,
  0.950396656990051,
  0.950426459312439,
  0.950456261634827,
  0.950486063957214,
  0.950515866279602,
  0.95054566860199,
  0.950575411319733,
  0.950605154037476,
  0.950634956359863,
  0.950664699077606,
  0.950694441795349,
  0.950724124908447,
  0.95075386762619,
  0.950783550739288,
  0.950813293457031,
  0.950842976570129,
  0.950872659683228,
  0.950902342796326,
  0.950932025909424,
  0.950961649417877,
  0.950991332530975,
  0.951020956039429,
  0.951050579547882,
  0.951080203056335,
  0.951109826564789,
  0.951139450073242,
  0.951169013977051,
  0.951198637485504,
  0.951228201389313,
  0.951257765293121,
  0.95128732919693,
  0.951316893100739,
  0.951346457004547,
  0.951375961303711,
  0.95140552520752,
  0.951435029506683,
  0.951464533805847,
  0.951494038105011,
  0.951523542404175,
  0.951552987098694,
  0.951582491397858,
  0.951611936092377,
  0.951641380786896,
  0.95167088508606,
  0.951700329780579,
  0.951729714870453,
  0.951759159564972,
  0.951788544654846,
  0.951817989349365,
  0.95184737443924,
  0.951876759529114,
  0.951906144618988,
  0.951935529708862,
  0.951964855194092,
  0.951994240283966,
  0.952023565769196,
  0.952052891254425,
  0.952082216739655,
  0.952111542224884,
  0.952140867710114,
  0.952170133590698,
  0.952199459075928,
  0.952228724956512,
  0.952257990837097,
  0.952287256717682,
  0.952316522598267,
  0.952345788478851,
  0.952374994754791,
  0.952404260635376,
  0.952433466911316,
  0.952462673187256,
  0.952491879463196,
  0.952521085739136,
  0.952550232410431,
  0.952579438686371,
  0.952608585357666,
  0.952637791633606,
  0.952666938304901,
  0.952696084976196,
  0.952725172042847,
  0.952754318714142,
  0.952783465385437,
  0.952812552452087,
  0.952841639518738,
  0.952870726585388,
  0.952899813652039,
  0.952928900718689,
  0.952957987785339,
  0.952987015247345,
  0.953016042709351,
  0.953045129776001,
  0.953074097633362,
  0.953103125095367,
  0.953132152557373,
  0.953161180019379,
  0.95319014787674,
  0.9532191157341,
  0.953248083591461,
  0.953277051448822,
  0.953306019306183,
  0.953334987163544,
  0.953363955020905,
  0.953392863273621,
  0.953421771526337,
  0.953450679779053,
  0.953479588031769,
  0.953508496284485,
  0.953537404537201,
  0.953566253185272,
  0.953595161437988,
  0.95362401008606,
  0.953652858734131,
  0.953681707382202,
  0.953710556030273,
  0.9537393450737,
  0.953768193721771,
  0.953796982765198,
  0.953825771808624,
  0.953854560852051,
  0.953883409500122,
  0.953912138938904,
  0.95394092798233,
  0.953969657421112,
  0.953998446464539,
  0.95402717590332,
  0.954055905342102,
  0.954084634780884,
  0.954113304615021,
  0.954142034053802,
  0.954170703887939,
  0.954199433326721,
  0.954228103160858,
  0.954256772994995,
  0.954285442829132,
  0.954314053058624,
  0.954342722892761,
  0.954371333122253,
  0.95440000295639,
  0.954428613185883,
  0.954457223415375,
  0.954485833644867,
  0.954514384269714,
  0.954542994499207,
  0.954571545124054,
  0.954600095748901,
  0.954628646373749,
  0.954657196998596,
  0.954685747623444,
  0.954714298248291,
  0.954742789268494,
  0.954771339893341,
  0.954799830913544,
  0.954828321933746,
  0.954856812953949,
  0.954885244369507,
  0.954913735389709,
  0.954942226409912,
  0.95497065782547,
  0.954999089241028,
  0.955027520656586,
  0.955055952072144,
  0.955084383487701,
  0.955112755298615,
  0.955141186714172,
  0.955169558525085,
  0.955197930335999,
  0.955226302146912,
  0.955254673957825,
  0.955283045768738,
  0.955311357975006,
  0.955339729785919,
  0.955368041992188,
  0.955396354198456,
  0.955424666404724,
  0.955452978610992,
  0.955481231212616,
  0.955509543418884,
  0.955537796020508,
  0.955566108226776,
  0.955594301223755,
  0.955622553825378,
  0.955650806427002,
  0.955679059028625,
  0.955707252025604,
  0.955735504627228,
  0.955763697624207,
  0.955791890621185,
  0.955820083618164,
  0.955848276615143,
  0.955876410007477,
  0.955904603004456,
  0.95593273639679,
  0.955960869789124,
  0.955989003181458,
  0.956017136573792,
  0.956045269966125,
  0.956073343753815,
  0.956101477146149,
  0.956129550933838,
  0.956157624721527,
  0.956185698509216,
  0.956213772296906,
  0.956241846084595,
  0.956269860267639,
  0.956297874450684,
  0.956325948238373,
  0.956353962421417,
  0.956381976604462,
  0.956409990787506,
  0.956437945365906,
  0.95646595954895,
  0.95649391412735,
  0.95652186870575,
  0.956549823284149,
  0.956577777862549,
  0.956605732440948,
  0.956633687019348,
  0.956661581993103,
  0.956689476966858,
  0.956717431545258,
  0.956745326519012,
  0.956773161888123,
  0.956801056861877,
  0.956828951835632,
  0.956856787204742,
  0.956884682178497,
  0.956912517547607,
  0.956940352916718,
  0.956968188285828,
  0.956995964050293,
  0.957023799419403,
  0.957051575183868,
  0.957079350948334,
  0.957107186317444,
  0.957134962081909,
  0.95716267824173,
  0.957190454006195,
  0.95721822977066,
  0.957245945930481,
  0.957273662090302,
  0.957301378250122,
  0.957329094409943,
  0.957356810569763,
  0.957384526729584,
  0.95741218328476,
  0.957439839839935,
  0.957467555999756,
  0.957495212554932,
  0.957522869110107,
  0.957550466060638,
  0.957578122615814,
  0.957605719566345,
  0.957633376121521,
  0.957660973072052,
  0.957688570022583,
  0.957716166973114,
  0.957743704319,
  0.957771301269531,
  0.957798838615417,
  0.957826435565948,
  0.957853972911835,
  0.957881510257721,
  0.957909047603607,
  0.957936525344849,
  0.957964062690735,
  0.957991540431976,
  0.958019018173218,
  0.958046495914459,
  0.958073973655701,
  0.958101451396942,
  0.958128929138184,
  0.95815634727478,
  0.958183825016022,
  0.958211243152618,
  0.958238661289215,
  0.958266079425812,
  0.958293497562408,
  0.95832085609436,
  0.958348274230957,
  0.958375632762909,
  0.958402991294861,
  0.958430349826813,
  0.958457708358765,
  0.958485066890717,
  0.958512365818024,
  0.958539724349976,
  0.958567023277283,
  0.95859432220459,
  0.958621621131897,
  0.958648920059204,
  0.958676218986511,
  0.958703458309174,
  0.958730757236481,
  0.958757996559143,
  0.958785235881805,
  0.958812475204468,
  0.95883971452713,
  0.958866894245148,
  0.95889413356781,
  0.958921313285828,
  0.958948493003845,
  0.958975732326508,
  0.95900285243988,
  0.959030032157898,
  0.959057211875916,
  0.959084331989288,
  0.959111511707306,
  0.959138631820679,
  0.959165751934052,
  0.959192872047424,
  0.959219932556152,
  0.959247052669525,
  0.959274113178253,
  0.959301233291626,
  0.959328293800354,
  0.959355354309082,
  0.95938241481781,
  0.959409415721893,
  0.959436476230621,
  0.959463477134705,
  0.959490537643433,
  0.959517538547516,
  0.959544539451599,
  0.959571480751038,
  0.959598481655121,
  0.959625482559204,
  0.959652423858643,
  0.959679365158081,
  0.95970630645752,
  0.959733247756958,
  0.959760189056396,
  0.959787130355835,
  0.959814012050629,
  0.959840893745422,
  0.959867835044861,
  0.959894716739655,
  0.959921598434448,
  0.959948420524597,
  0.959975302219391,
  0.96000212430954,
  0.960029006004333,
  0.960055828094482,
  0.960082650184631,
  0.96010947227478,
  0.960136234760284,
  0.960163056850433,
  0.960189819335938,
  0.960216641426086,
  0.960243403911591,
  0.960270166397095,
  0.960296928882599,
  0.960323631763458,
  0.960350394248962,
  0.960377097129822,
  0.960403800010681,
  0.960430502891541,
  0.9604572057724,
  0.960483908653259,
  0.960510611534119,
  0.960537254810333,
  0.960563898086548,
  0.960590600967407,
  0.960617244243622,
  0.960643887519836,
  0.960670471191406,
  0.960697114467621,
  0.960723698139191,
  0.960750341415405,
  0.960776925086975,
  0.960803508758545,
  0.960830092430115,
  0.96085661649704,
  0.96088320016861,
  0.960909724235535,
  0.960936307907104,
  0.96096283197403,
  0.960989356040955,
  0.961015820503235,
  0.96104234457016,
  0.961068868637085,
  0.961095333099365,
  0.961121797561646,
  0.961148262023926,
  0.961174726486206,
  0.961201190948486,
  0.961227655410767,
  0.961254060268402,
  0.961280465126038,
  0.961306929588318,
  0.961333334445953,
  0.961359739303589,
  0.96138608455658,
  0.961412489414215,
  0.961438834667206,
  0.961465239524841,
  0.961491584777832,
  0.961517930030823,
  0.961544275283813,
  0.961570560932159,
  0.96159690618515,
  0.961623191833496,
  0.961649477481842,
  0.961675763130188,
  0.961702108383179,
  0.96172833442688,
  0.961754620075226,
  0.961780846118927,
  0.961807131767273,
  0.961833357810974,
  0.961859583854675,
  0.961885809898376,
  0.961912035942078,
  0.961938202381134,
  0.961964428424835,
  0.961990594863892,
  0.962016761302948,
  0.962042927742004,
  0.962069094181061,
  0.962095260620117,
  0.962121427059174,
  0.962147533893585,
  0.962173640727997,
  0.962199807167053,
  0.96222585439682,
  0.962251961231232,
  0.962278068065643,
  0.962304174900055,
  0.962330222129822,
  0.962356269359589,
  0.962382316589355,
  0.962408363819122,
  0.962434411048889,
  0.962460458278656,
  0.962486445903778,
  0.962512493133545,
  0.962538480758667,
  0.962564468383789,
  0.962590456008911,
  0.962616443634033,
  0.96264237165451,
  0.962668359279633,
  0.96269428730011,
  0.962720215320587,
  0.962746143341064,
  0.962772071361542,
  0.962797999382019,
  0.962823867797852,
  0.962849795818329,
  0.962875664234161,
  0.962901532649994,
  0.962927401065826,
  0.962953269481659,
  0.962979137897491,
  0.963004946708679,
  0.963030815124512,
  0.963056623935699,
  0.963082432746887,
  0.963108241558075,
  0.963134050369263,
  0.963159799575806,
  0.963185608386993,
  0.963211357593536,
  0.963237106800079,
  0.963262856006622,
  0.963288605213165,
  0.963314354419708,
  0.963340103626251,
  0.963365793228149,
  0.963391482830048,
  0.963417232036591,
  0.963442921638489,
  0.963468551635742,
  0.96349424123764,
  0.963519930839539,
  0.963545560836792,
  0.963571190834045,
  0.963596820831299,
  0.963622450828552,
  0.963648080825806,
  0.963673710823059,
  0.963699281215668,
  0.963724911212921,
  0.96375048160553,
  0.963776051998138,
  0.963801622390747,
  0.963827192783356,
  0.963852763175964,
  0.963878273963928,
  0.963903784751892,
  0.963929355144501,
  0.963954865932465,
  0.963980376720428,
  0.964005827903748,
  0.964031338691711,
  0.964056789875031,
  0.964082300662994,
  0.964107751846313,
  0.964133203029633,
  0.964158654212952,
  0.964184045791626,
  0.964209496974945,
  0.964234888553619,
  0.964260339736938,
  0.964285731315613,
  0.964311122894287,
  0.964336454868317,
  0.964361846446991,
  0.964387238025665,
  0.964412569999695,
  0.964437901973724,
  0.964463233947754,
  0.964488565921783,
  0.964513897895813,
  0.964539170265198,
  0.964564502239227,
  0.964589774608612,
  0.964615106582642,
  0.964640378952026,
  0.964665591716766,
  0.964690864086151,
  0.964716136455536,
  0.964741349220276,
  0.964766561985016,
  0.964791834354401,
  0.964817047119141,
  0.964842200279236,
  0.964867413043976,
  0.964892625808716,
  0.964917778968811,
  0.964942932128906,
  0.964968085289001,
  0.964993238449097,
  0.965018391609192,
  0.965043544769287,
  0.965068638324738,
  0.965093731880188,
  0.965118885040283,
  0.965143978595734,
  0.965169072151184,
  0.96519410610199,
  0.96521919965744,
  0.965244233608246,
  0.965269327163696,
  0.965294361114502,
  0.965319395065308,
  0.965344429016113,
  0.965369403362274,
  0.96539443731308,
  0.965419411659241,
  0.965444445610046,
  0.965469419956207,
  0.965494394302368,
  0.965519368648529,
  0.965544283390045,
  0.965569257736206,
  0.965594172477722,
  0.965619087219238,
  0.965644001960754,
  0.965668916702271,
  0.965693831443787,
  0.965718746185303,
  0.965743601322174,
  0.96576851606369,
  0.965793371200562,
  0.965818226337433,
  0.965843081474304,
  0.965867877006531,
  0.965892732143402,
  0.965917527675629,
  0.9659423828125,
  0.965967178344727,
  0.965991973876953,
  0.96601676940918,
  0.966041505336761,
  0.966066300868988,
  0.96609103679657,
  0.966115832328796,
  0.966140568256378,
  0.96616530418396,
  0.966189980506897,
  0.966214716434479,
  0.966239392757416,
  0.966264128684998,
  0.966288805007935,
  0.966313481330872,
  0.966338157653809,
  0.966362833976746,
  0.966387450695038,
  0.966412127017975,
  0.966436743736267,
  0.966461360454559,
  0.966485977172852,
  0.966510593891144,
  0.966535210609436,
  0.966559767723083,
  0.966584384441376,
  0.966608941555023,
  0.966633498668671,
  0.966658055782318,
  0.966682612895966,
  0.966707170009613,
  0.966731667518616,
  0.966756224632263,
  0.966780722141266,
  0.966805219650269,
  0.966829717159271,
  0.966854214668274,
  0.966878652572632,
  0.966903150081635,
  0.966927587985992,
  0.96695202589035,
  0.966976463794708,
  0.967000901699066,
  0.967025339603424,
  0.967049717903137,
  0.967074155807495,
  0.967098534107208,
  0.967122912406921,
  0.967147290706635,
  0.967171669006348,
  0.967196047306061,
  0.967220366001129,
  0.967244744300842,
  0.967269062995911,
  0.967293381690979,
  0.967317700386047,
  0.967342019081116,
  0.967366278171539,
  0.967390596866608,
  0.967414855957031,
  0.967439115047455,
  0.967463374137878,
  0.967487633228302,
  0.967511892318726,
  0.967536091804504,
  0.967560350894928,
  0.967584550380707,
  0.967608749866486,
  0.967632949352264,
  0.967657148838043,
  0.967681348323822,
  0.967705547809601,
  0.967729687690735,
  0.967753827571869,
  0.967777967453003,
  0.967802107334137,
  0.967826247215271,
  0.967850387096405,
  0.967874467372894,
  0.967898607254028,
  0.967922687530518,
  0.967946767807007,
  0.967970848083496,
  0.967994928359985,
  0.96801894903183,
  0.968043029308319,
  0.968067049980164,
  0.968091070652008,
  0.968115091323853,
  0.968139111995697,
  0.968163132667542,
  0.968187093734741,
  0.968211114406586,
  0.968235075473785,
  0.968259036540985,
  0.968282997608185,
  0.968306958675385,
  0.968330860137939,
  0.968354821205139,
  0.968378722667694,
  0.968402624130249,
  0.968426585197449,
  0.968450486660004,
  0.968474328517914,
  0.968498229980469,
  0.968522071838379,
  0.968545973300934,
  0.968569815158844,
  0.968593657016754,
  0.968617498874664,
  0.96864128112793,
  0.96866512298584,
  0.96868896484375,
  0.968712747097015,
  0.968736529350281,
  0.968760311603546,
  0.968784093856812,
  0.968807816505432,
  0.968831598758698,
  0.968855321407318,
  0.968879103660583,
  0.968902826309204,
  0.968926548957825,
  0.968950212001801,
  0.968973934650421,
  0.968997657299042,
  0.969021320343018,
  0.969044983386993,
  0.969068646430969,
  0.969092309474945,
  0.969115972518921,
  0.969139575958252,
  0.969163239002228,
  0.969186842441559,
  0.96921044588089,
  0.969234049320221,
  0.969257652759552,
  0.969281256198883,
  0.969304800033569,
  0.9693284034729,
  0.969351947307587,
  0.969375491142273,
  0.969399034976959,
  0.969422578811646,
  0.969446063041687,
  0.969469606876373,
  0.969493091106415,
  0.969516575336456,
  0.969540059566498,
  0.969563543796539,
  0.969587028026581,
  0.969610512256622,
  0.969633936882019,
  0.969657361507416,
  0.969680845737457,
  0.969704210758209,
  0.969727635383606,
  0.969751060009003,
  0.969774484634399,
  0.969797849655151,
  0.969821214675903,
  0.969844579696655,
  0.969867944717407,
  0.969891309738159,
  0.969914674758911,
  0.969937980175018,
  0.96996134519577,
  0.969984650611877,
  0.970007956027985,
  0.970031261444092,
  0.970054566860199,
  0.970077812671661,
  0.970101118087769,
  0.970124363899231,
  0.970147609710693,
  0.970170855522156,
  0.970194101333618,
  0.970217347145081,
  0.970240533351898,
  0.970263779163361,
  0.970286965370178,
  0.970310151576996,
  0.970333337783813,
  0.970356523990631,
  0.970379650592804,
  0.970402836799622,
  0.970425963401794,
  0.970449149608612,
  0.970472276210785,
  0.970495402812958,
  0.970518469810486,
  0.970541596412659,
  0.970564663410187,
  0.97058779001236,
  0.970610857009888,
  0.970633924007416,
  0.970656991004944,
  0.970680058002472,
  0.970703065395355,
  0.970726072788239,
  0.970749139785767,
  0.97077214717865,
  0.970795154571533,
  0.970818161964417,
  0.970841109752655,
  0.970864117145538,
  0.970887064933777,
  0.970910012722015,
  0.970932960510254,
  0.970955967903137,
  0.970978856086731,
  0.971001803874969,
  0.971024692058563,
  0.971047639846802,
  0.971070528030396,
  0.971093416213989,
  0.971116304397583,
  0.971139132976532,
  0.971162021160126,
  0.971184909343719,
  0.971207737922668,
  0.971230566501617,
  0.971253395080566,
  0.971276223659515,
  0.97129899263382,
  0.971321821212769,
  0.971344590187073,
  0.971367359161377,
  0.971390187740326,
  0.971412897109985,
  0.97143566608429,
  0.971458435058594,
  0.971481144428253,
  0.971503913402557,
  0.971526622772217,
  0.971549332141876,
  0.971572041511536,
  0.97159469127655,
  0.97161740064621,
  0.971640050411224,
  0.971662759780884,
  0.971685409545898,
  0.971708059310913,
  0.971730709075928,
  0.971753299236298,
  0.971775949001312,
  0.971798539161682,
  0.971821188926697,
  0.971843779087067,
  0.971866369247437,
  0.971888899803162,
  0.971911489963531,
  0.971934020519257,
  0.971956610679626,
  0.971979141235352,
  0.972001671791077,
  0.972024202346802,
  0.972046673297882,
  0.972069203853607,
  0.972091734409332,
  0.972114205360413,
  0.972136676311493,
  0.972159147262573,
  0.972181618213654,
  0.972204029560089,
  0.972226500511169,
  0.972248911857605,
  0.972271382808685,
  0.972293794155121,
  0.972316205501556,
  0.972338557243347,
  0.972360968589783,
  0.972383320331573,
  0.972405731678009,
  0.9724280834198,
  0.972450435161591,
  0.972472786903381,
  0.972495138645172,
  0.972517430782318,
  0.972539782524109,
  0.972562074661255,
  0.972584366798401,
  0.972606658935547,
  0.972628951072693,
  0.972651243209839,
  0.97267347574234,
  0.972695708274841,
  0.972718000411987,
  0.972740232944489,
  0.97276246547699,
  0.972784698009491,
  0.972806870937347,
  0.972829103469849,
  0.972851276397705,
  0.972873449325562,
  0.972895622253418,
  0.972917795181274,
  0.972939968109131,
  0.972962081432343,
  0.972984254360199,
  0.973006367683411,
  0.973028481006622,
  0.973050594329834,
  0.973072707653046,
  0.973094820976257,
  0.973116874694824,
  0.973138988018036,
  0.973161041736603,
  0.97318309545517,
  0.973205149173737,
  0.973227202892303,
  0.973249197006226,
  0.973271250724792,
  0.973293244838715,
  0.973315238952637,
  0.973337233066559,
  0.973359227180481,
  0.973381221294403,
  0.97340315580368,
  0.973425149917603,
  0.97344708442688,
  0.973469018936157,
  0.973490953445435,
  0.973512887954712,
  0.973534822463989,
  0.973556697368622,
  0.973578631877899,
  0.973600506782532,
  0.973622381687164,
  0.973644256591797,
  0.973666131496429,
  0.973687946796417,
  0.97370982170105,
  0.973731637001038,
  0.973753452301025,
  0.973775267601013,
  0.973797082901001,
  0.973818898200989,
  0.973840653896332,
  0.97386246919632,
  0.973884224891663,
  0.973905980587006,
  0.973927736282349,
  0.973949491977692,
  0.973971247673035,
  0.973992943763733,
  0.974014699459076,
  0.974036395549774,
  0.974058091640472,
  0.974079787731171,
  0.974101483821869,
  0.974123120307922,
  0.974144816398621,
  0.974166452884674,
  0.974188089370728,
  0.974209725856781,
  0.974231362342834,
  0.974252998828888,
  0.974274575710297,
  0.97429621219635,
  0.974317789077759,
  0.974339365959167,
  0.974360942840576,
  0.974382519721985,
  0.974404096603394,
  0.974425613880157,
  0.974447190761566,
  0.97446870803833,
  0.974490225315094,
  0.974511742591858,
  0.974533259868622,
  0.974554717540741,
  0.974576234817505,
  0.974597692489624,
  0.974619150161743,
  0.974640607833862,
  0.974662065505981,
  0.974683523178101,
  0.974704921245575,
  0.974726378917694,
  0.974747776985168,
  0.974769175052643,
  0.974790573120117,
  0.974811971187592,
  0.974833369255066,
  0.974854707717896,
  0.974876046180725,
  0.974897444248199,
  0.974918782711029,
  0.974940121173859,
  0.974961459636688,
  0.974982738494873,
  0.975004076957703,
  0.975025355815887,
  0.975046634674072,
  0.975067913532257,
  0.975089192390442,
  0.975110471248627,
  0.975131690502167,
  0.975152969360352,
  0.975174188613892,
  0.975195407867432,
  0.975216627120972,
  0.975237846374512,
  0.975259006023407,
  0.975280225276947,
  0.975301384925842,
  0.975322544574738,
  0.975343704223633,
  0.975364863872528,
  0.975386023521423,
  0.975407183170319,
  0.975428283214569,
  0.97544938325882,
  0.975470542907715,
  0.975491642951965,
  0.975512683391571,
  0.975533783435822,
  0.975554883480072,
  0.975575923919678,
  0.975596964359283,
  0.975618004798889,
  0.975639045238495,
  0.975660085678101,
  0.975681126117706,
  0.975702106952667,
  0.975723147392273,
  0.975744128227234,
  0.975765109062195,
  0.975786089897156,
  0.975807070732117,
  0.975827991962433,
  0.975848972797394,
  0.97586989402771,
  0.975890815258026,
  0.975911736488342,
  0.975932657718658,
  0.975953578948975,
  0.975974440574646,
  0.975995361804962,
  0.976016223430634,
  0.976037085056305,
  0.976057946681976,
  0.976078808307648,
  0.976099610328674,
  0.976120471954346,
  0.976141273975372,
  0.976162075996399,
  0.976182878017426,
  0.976203680038452,
  0.976224482059479,
  0.976245284080505,
  0.976266026496887,
  0.976286768913269,
  0.976307511329651,
  0.976328253746033,
  0.976348996162415,
  0.976369738578796,
  0.976390421390533,
  0.976411163806915,
  0.976431846618652,
  0.976452529430389,
  0.976473212242126,
  0.976493895053864,
  0.976514518260956,
  0.976535201072693,
  0.976555824279785,
  0.976576447486877,
  0.97659707069397,
  0.976617693901062,
  0.976638317108154,
  0.976658940315247,
  0.976679503917694,
  0.976700067520142,
  0.976720631122589,
  0.976741194725037,
  0.976761758327484,
  0.976782321929932,
  0.976802825927734,
  0.976823389530182,
  0.976843893527985,
  0.976864397525787,
  0.97688490152359,
  0.976905405521393,
  0.976925849914551,
  0.976946353912354,
  0.976966798305511,
  0.976987242698669,
  0.977007687091827,
  0.977028131484985,
  0.977048575878143,
  0.977068960666656,
  0.977089405059814,
  0.977109789848328,
  0.977130174636841,
  0.977150559425354,
  0.977170944213867,
  0.97719132900238,
  0.977211654186249,
  0.977232038974762,
  0.97725236415863,
  0.977272689342499,
  0.977293014526367,
  0.977313339710236,
  0.977333605289459,
  0.977353870868683,
  0.977374196052551,
  0.977394461631775,
  0.977414727210999,
  0.977434992790222,
  0.977455258369446,
  0.977475464344025,
  0.977495670318604,
  0.977515935897827,
  0.977536141872406,
  0.977556347846985,
  0.977576494216919,
  0.977596700191498,
  0.977616906166077,
  0.977637052536011,
  0.977657198905945,
  0.977677345275879,
  0.977697491645813,
  0.977717638015747,
  0.977737724781036,
  0.97775787115097,
  0.97777795791626,
  0.977798044681549,
  0.977818131446838,
  0.977838218212128,
  0.977858304977417,
  0.977878332138062,
  0.977898418903351,
  0.977918446063995,
  0.97793847322464,
  0.977958500385284,
  0.977978527545929,
  0.977998495101929,
  0.978018522262573,
  0.978038489818573,
  0.978058457374573,
  0.978078424930573,
  0.978098392486572,
  0.978118360042572,
  0.978138327598572,
  0.978158235549927,
  0.978178143501282,
  0.978198051452637,
  0.978217959403992,
  0.978237867355347,
  0.978257775306702,
  0.978277623653412,
  0.978297531604767,
  0.978317379951477,
  0.978337228298187,
  0.978357076644897,
  0.978376924991608,
  0.978396713733673,
  0.978416562080383,
  0.978436350822449,
  0.978456139564514,
  0.97847592830658,
  0.978495717048645,
  0.97851550579071,
  0.978535234928131,
  0.978555023670197,
  0.978574752807617,
  0.978594481945038,
  0.978614211082458,
  0.978633940219879,
  0.978653609752655,
  0.978673338890076,
  0.978693008422852,
  0.978712677955627,
  0.978732407093048,
  0.978752017021179,
  0.978771686553955,
  0.978791356086731,
  0.978810966014862,
  0.978830575942993,
  0.978850245475769,
  0.9788698554039,
  0.978889405727386,
  0.978909015655518,
  0.978928625583649,
  0.978948175907135,
  0.978967726230621,
  0.978987276554108,
  0.979006826877594,
  0.97902637720108,
  0.979045927524567,
  0.979065418243408,
  0.979084968566895,
  0.979104459285736,
  0.979123950004578,
  0.979143381118774,
  0.979162871837616,
  0.979182362556458,
  0.979201793670654,
  0.979221284389496,
  0.979240715503693,
  0.979260146617889,
  0.979279518127441,
  0.979298949241638,
  0.979318380355835,
  0.979337751865387,
  0.979357123374939,
  0.979376494884491,
  0.979395866394043,
  0.979415237903595,
  0.979434609413147,
  0.979453921318054,
  0.979473233222961,
  0.979492545127869,
  0.979511857032776,
  0.979531168937683,
  0.97955048084259,
  0.979569792747498,
  0.97958904504776,
  0.979608297348022,
  0.979627549648285,
  0.979646801948547,
  0.97966605424881,
  0.979685306549072,
  0.97970449924469,
  0.979723691940308,
  0.97974294424057,
  0.979762136936188,
  0.979781329631805,
  0.979800462722778,
  0.979819655418396,
  0.979838788509369,
  0.979857981204987,
  0.979877114295959,
  0.979896247386932,
  0.979915380477905,
  0.979934453964233,
  0.979953587055206,
  0.979972660541534,
  0.979991734027863,
  0.980010867118835,
  0.980029881000519,
  0.980048954486847,
  0.980068027973175,
  0.980087041854858,
  0.980106115341187,
  0.98012512922287,
  0.980144143104553,
  0.980163156986237,
  0.980182111263275,
  0.980201125144958,
  0.980220079421997,
  0.98023909330368,
  0.980258047580719,
  0.980277001857758,
  0.980295956134796,
  0.98031485080719,
  0.980333805084229,
  0.980352699756622,
  0.980371594429016,
  0.98039048910141,
  0.980409383773804,
  0.980428278446198,
  0.980447173118591,
  0.98046600818634,
  0.980484843254089,
  0.980503737926483,
  0.980522513389587,
  0.980541348457336,
  0.980560183525085,
  0.980579018592834,
  0.980597794055939,
  0.980616569519043,
  0.980635344982147,
  0.980654120445251,
  0.980672895908356,
  0.98069167137146,
  0.980710387229919,
  0.980729103088379,
  0.980747878551483,
  0.980766594409943,
  0.980785250663757,
  0.980803966522217,
  0.980822682380676,
  0.980841338634491,
  0.980859994888306,
  0.980878710746765,
  0.98089736700058,
  0.98091596364975,
  0.980934619903564,
  0.980953276157379,
  0.980971872806549,
  0.980990469455719,
  0.981009066104889,
  0.981027662754059,
  0.981046259403229,
  0.981064856052399,
  0.981083393096924,
  0.981101930141449,
  0.981120467185974,
  0.981139004230499,
  0.981157541275024,
  0.98117607831955,
  0.981194615364075,
  0.981213092803955,
  0.981231570243835,
  0.981250047683716,
  0.981268525123596,
  0.981287002563477,
  0.981305480003357,
  0.981323897838593,
  0.981342315673828,
  0.981360793113708,
  0.981379210948944,
  0.98139762878418,
  0.981415987014771,
  0.981434404850006,
  0.981452763080597,
  0.981471180915833,
  0.981489539146423,
  0.981507897377014,
  0.981526255607605,
  0.981544554233551,
  0.981562912464142,
  0.981581211090088,
  0.981599509716034,
  0.98161780834198,
  0.981636106967926,
  0.981654405593872,
  0.981672704219818,
  0.981690943241119,
  0.981709182262421,
  0.981727480888367,
  0.981745719909668,
  0.981763958930969,
  0.981782138347626,
  0.981800377368927,
  0.981818556785583,
  0.98183673620224,
  0.981854975223541,
  0.981873095035553,
  0.981891274452209,
  0.981909453868866,
  0.981927573680878,
  0.981945753097534,
  0.981963872909546,
  0.981981992721558,
  0.982000112533569,
  0.982018232345581,
  0.982036292552948,
  0.98205441236496,
  0.982072472572327,
  0.982090532779694,
  0.982108592987061,
  0.982126653194427,
  0.982144713401794,
  0.982162714004517,
  0.982180714607239,
  0.982198774814606,
  0.982216775417328,
  0.98223477602005,
  0.982252717018127,
  0.98227071762085,
  0.982288718223572,
  0.982306659221649,
  0.982324600219727,
  0.982342541217804,
  0.982360482215881,
  0.982378423213959,
  0.982396304607391,
  0.982414245605469,
  0.982432126998901,
  0.982450008392334,
  0.982467889785767,
  0.982485771179199,
  0.982503592967987,
  0.98252147436142,
  0.982539296150208,
  0.982557117938995,
  0.982574939727783,
  0.982592761516571,
  0.982610583305359,
  0.982628405094147,
  0.98264616727829,
  0.982663929462433,
  0.982681691646576,
  0.982699453830719,
  0.982717216014862,
  0.982734978199005,
  0.982752680778503,
  0.982770442962646,
  0.982788145542145,
  0.982805848121643,
  0.982823550701141,
  0.98284125328064,
  0.982858896255493,
  0.982876598834991,
  0.982894241809845,
  0.982911884784698,
  0.982929527759552,
  0.982947170734406,
  0.982964813709259,
  0.982982397079468,
  0.983000040054321,
  0.98301762342453,
  0.983035206794739,
  0.983052790164948,
  0.983070373535156,
  0.983087956905365,
  0.983105480670929,
  0.983123004436493,
  0.983140587806702,
  0.983158111572266,
  0.98317563533783,
  0.983193099498749,
  0.983210623264313,
  0.983228087425232,
  0.983245611190796,
  0.983263075351715,
  0.983280539512634,
  0.983298003673553,
  0.983315408229828,
  0.983332872390747,
  0.983350276947021,
  0.983367681503296,
  0.98338508605957,
  0.983402490615845,
  0.983419895172119,
  0.983437299728394,
  0.983454644680023,
  0.983472049236298,
  0.983489394187927,
  0.983506739139557,
  0.983524024486542,
  0.983541369438171,
  0.983558714389801,
  0.983575999736786,
  0.983593285083771,
  0.983610570430756,
  0.98362785577774,
  0.983645141124725,
  0.98366242647171,
  0.98367965221405,
  0.983696937561035,
  0.983714163303375,
  0.983731389045715,
  0.983748614788055,
  0.983765780925751,
  0.983783006668091,
  0.983800232410431,
  0.983817398548126,
  0.983834564685822,
  0.983851730823517,
  0.983868896961212,
  0.983886003494263,
  0.983903169631958,
  0.983920276165009,
  0.983937382698059,
  0.983954548835754,
  0.98397159576416,
  0.983988702297211,
  0.984005808830261,
  0.984022855758667,
  0.984039962291718,
  0.984057009220123,
  0.984074056148529,
  0.984091103076935,
  0.984108090400696,
  0.984125137329102,
  0.984142124652863,
  0.984159111976624,
  0.984176158905029,
  0.98419314622879,
  0.984210073947906,
  0.984227061271667,
  0.984243988990784,
  0.984260976314545,
  0.984277904033661,
  0.984294831752777,
  0.984311759471893,
  0.98432868719101,
  0.984345555305481,
  0.984362483024597,
  0.984379351139069,
  0.98439621925354,
  0.984413087368011,
  0.984429955482483,
  0.98444676399231,
  0.984463632106781,
  0.984480440616608,
  0.984497308731079,
  0.984514117240906,
  0.984530866146088,
  0.984547674655914,
  0.984564483165741,
  0.984581232070923,
  0.984597980976105,
  0.984614789485931,
  0.984631538391113,
  0.984648287296295,
  0.984664976596832,
  0.984681725502014,
  0.984698414802551,
  0.984715104103088,
  0.984731793403625,
  0.984748482704163,
  0.9847651720047,
  0.984781861305237,
  0.984798491001129,
  0.984815120697021,
  0.984831809997559,
  0.984848439693451,
  0.984865069389343,
  0.984881639480591,
  0.984898269176483,
  0.984914839267731,
  0.984931468963623,
  0.984948039054871,
  0.984964609146118,
  0.984981119632721,
  0.984997689723969,
  0.985014200210571,
  0.985030770301819,
  0.985047280788422,
  0.985063791275024,
  0.985080301761627,
  0.98509681224823,
  0.985113263130188,
  0.985129773616791,
  0.985146224498749,
  0.985162675380707,
  0.985179126262665,
  0.985195577144623,
  0.985212028026581,
  0.985228419303894,
  0.985244810581207,
  0.985261261463165,
  0.985277652740479,
  0.985294044017792,
  0.985310435295105,
  0.985326766967773,
  0.985343158245087,
  0.985359489917755,
  0.985375821590424,
  0.985392153263092,
  0.98540848493576,
  0.985424816608429,
  0.985441088676453,
  0.985457360744476,
  0.985473692417145,
  0.985489964485168,
  0.985506236553192,
  0.985522508621216,
  0.985538721084595,
  0.985554993152618,
  0.985571205615997,
  0.985587418079376,
  0.985603630542755,
  0.985619843006134,
  0.985636055469513,
  0.985652208328247,
  0.985668420791626,
  0.98568457365036,
  0.985700726509094,
  0.985716879367828,
  0.985733032226562,
  0.985749185085297,
  0.985765278339386,
  0.985781371593475,
  0.985797524452209,
  0.985813617706299,
  0.985829710960388,
  0.985845744609833,
  0.985861837863922,
  0.985877871513367,
  0.985893964767456,
  0.985909998416901,
  0.985926032066345,
  0.98594206571579,
  0.98595803976059,
  0.985974073410034,
  0.985990047454834,
  0.986006021499634,
  0.986022055149078,
  0.986038029193878,
  0.986053943634033,
  0.986069917678833,
  0.986085832118988,
  0.986101806163788,
  0.986117720603943,
  0.986133635044098,
  0.986149549484253,
  0.986165404319763,
  0.986181318759918,
  0.986197173595428,
  0.986213088035583,
  0.986228942871094,
  0.986244797706604,
  0.986260592937469,
  0.98627644777298,
  0.98629230260849,
  0.986308097839355,
  0.986323893070221,
  0.986339688301086,
  0.986355483531952,
  0.986371278762817,
  0.986387014389038,
  0.986402809619904,
  0.986418545246124,
  0.986434280872345,
  0.986450016498566,
  0.986465752124786,
  0.986481487751007,
  0.986497163772583,
  0.986512899398804,
  0.98652857542038,
  0.986544251441956,
  0.986559927463531,
  0.986575543880463,
  0.986591219902039,
  0.986606895923615,
  0.986622512340546,
  0.986638128757477,
  0.986653745174408,
  0.986669361591339,
  0.98668497800827,
  0.986700534820557,
  0.986716091632843,
  0.986731708049774,
  0.986747264862061,
  0.986762821674347,
  0.986778318881989,
  0.986793875694275,
  0.986809372901917,
  0.986824929714203,
  0.986840426921844,
  0.986855924129486,
  0.986871421337128,
  0.986886918544769,
  0.986902356147766,
  0.986917793750763,
  0.986933290958405,
  0.986948728561401,
  0.986964166164398,
  0.986979603767395,
  0.986994981765747,
  0.987010419368744,
  0.987025797367096,
  0.987041175365448,
  0.9870565533638,
  0.987071931362152,
  0.987087309360504,
  0.987102687358856,
  0.987118005752563,
  0.987133324146271,
  0.987148642539978,
  0.987163960933685,
  0.987179279327393,
  0.9871945977211,
  0.987209856510162,
  0.98722517490387,
  0.987240433692932,
  0.987255692481995,
  0.987270951271057,
  0.987286150455475,
  0.987301409244537,
  0.9873166680336,
  0.987331867218018,
  0.987347066402435,
  0.987362265586853,
  0.987377464771271,
  0.987392663955688,
  0.987407803535461,
  0.987422943115234,
  0.987438142299652,
  0.987453281879425,
  0.987468421459198,
  0.987483501434326,
  0.987498641014099,
  0.987513720989227,
  0.987528860569,
  0.987543940544128,
  0.987559020519257,
  0.987574100494385,
  0.987589180469513,
  0.987604200839996,
  0.98761922121048,
  0.987634301185608,
  0.987649321556091,
  0.987664341926575,
  0.987679362297058,
  0.987694323062897,
  0.98770934343338,
  0.987724304199219,
  0.987739264965057,
  0.987754225730896,
  0.987769186496735,
  0.987784147262573,
  0.987799108028412,
  0.987814009189606,
  0.9878289103508,
  0.987843811511993,
  0.987858712673187,
  0.987873613834381,
  0.987888514995575,
  0.987903356552124,
  0.987918257713318,
  0.987933099269867,
  0.987947940826416,
  0.987962782382965,
  0.987977564334869,
  0.987992405891418,
  0.988007247447968,
  0.988022029399872,
  0.988036811351776,
  0.98805159330368,
  0.988066375255585,
  0.988081097602844,
  0.988095879554749,
  0.988110601902008,
  0.988125383853912,
  0.988140106201172,
  0.988154828548431,
  0.988169491291046,
  0.988184213638306,
  0.98819887638092,
  0.98821359872818,
  0.988228261470795,
  0.988242924213409,
  0.988257586956024,
  0.988272190093994,
  0.988286852836609,
  0.988301455974579,
  0.988316118717194,
  0.988330721855164,
  0.988345324993134,
  0.988359868526459,
  0.988374471664429,
  0.988389015197754,
  0.988403618335724,
  0.988418161869049,
  0.988432705402374,
  0.988447248935699,
  0.988461792469025,
  0.988476276397705,
  0.988490760326385,
  0.988505303859711,
  0.988519787788391,
  0.988534271717072,
  0.988548755645752,
  0.988563179969788,
  0.988577663898468,
  0.988592088222504,
  0.988606512546539,
  0.988620936870575,
  0.988635361194611,
  0.988649785518646,
  0.988664209842682,
  0.988678574562073,
  0.988692939281464,
  0.988707304000854,
  0.988721668720245,
  0.988736033439636,
  0.988750398159027,
  0.988764703273773,
  0.988779067993164,
  0.98879337310791,
  0.988807678222656,
  0.988821983337402,
  0.988836288452148,
  0.98885053396225,
  0.988864839076996,
  0.988879084587097,
  0.988893330097198,
  0.9889075756073,
  0.988921821117401,
  0.988936066627502,
  0.988950252532959,
  0.98896449804306,
  0.988978683948517,
  0.988992869853973,
  0.98900705575943,
  0.989021241664886,
  0.989035367965698,
  0.989049553871155,
  0.989063680171967,
  0.989077806472778,
  0.98909193277359,
  0.989106059074402,
  0.989120185375214,
  0.989134252071381,
  0.989148378372192,
  0.989162445068359,
  0.989176511764526,
  0.989190578460693,
  0.98920464515686,
  0.989218652248383,
  0.98923271894455,
  0.989246726036072,
  0.989260733127594,
  0.989274740219116,
  0.989288747310638,
  0.989302754402161,
  0.989316701889038,
  0.98933070898056,
  0.989344656467438,
  0.989358603954315,
  0.989372551441193,
  0.98938649892807,
  0.989400446414948,
  0.98941433429718,
  0.989428222179413,
  0.98944216966629,
  0.989456057548523,
  0.989469945430756,
  0.989483773708344,
  0.989497661590576,
  0.989511489868164,
  0.989525377750397,
  0.989539206027985,
  0.989553034305573,
  0.98956686258316,
  0.989580631256104,
  0.989594459533691,
  0.989608228206635,
  0.989621996879578,
  0.989635765552521,
  0.989649534225464,
  0.989663302898407,
  0.98967707157135,
  0.989690780639648,
  0.989704489707947,
  0.98971825838089,
  0.989731967449188,
  0.989745616912842,
  0.98975932598114,
  0.989773035049438,
  0.989786684513092,
  0.989800333976746,
  0.989813983440399,
  0.989827632904053,
  0.989841282367706,
  0.989854872226715,
  0.989868521690369,
  0.989882111549377,
  0.989895701408386,
  0.989909291267395,
  0.989922881126404,
  0.989936470985413,
  0.989950060844421,
  0.989963591098785,
  0.989977121353149,
  0.989990651607513,
  0.990004181861877,
  0.990017712116241,
  0.990031242370605,
  0.990044713020325,
  0.990058183670044,
  0.990071713924408,
  0.990085184574127,
  0.990098655223846,
  0.990112066268921,
  0.99012553691864,
  0.990138947963715,
  0.990152418613434,
  0.990165829658508,
  0.990179181098938,
  0.990192592144012,
  0.990206003189087,
  0.990219354629517,
  0.990232765674591,
  0.990246117115021,
  0.99025946855545,
  0.99027281999588,
  0.99028617143631,
  0.990299463272095,
  0.990312814712524,
  0.990326106548309,
  0.990339398384094,
  0.990352690219879,
  0.990365982055664,
  0.990379214286804,
  0.990392506122589,
  0.990405738353729,
  0.990418970584869,
  0.99043220281601,
  0.99044543504715,
  0.99045866727829,
  0.99047189950943,
  0.990485072135925,
  0.990498244762421,
  0.990511476993561,
  0.990524649620056,
  0.990537762641907,
  0.990550935268402,
  0.990564107894897,
  0.990577220916748,
  0.990590333938599,
  0.990603446960449,
  0.9906165599823,
  0.99062967300415,
  0.990642786026001,
  0.990655839443207,
  0.990668892860413,
  0.990681946277618,
  0.990695059299469,
  0.99070805311203,
  0.990721106529236,
  0.990734100341797,
  0.990747153759003,
  0.990760147571564,
  0.990773141384125,
  0.990786135196686,
  0.990799129009247,
  0.990812063217163,
  0.990825057029724,
  0.99083799123764,
  0.990850925445557,
  0.990863919258118,
  0.990876793861389,
  0.990889728069305,
  0.990902662277222,
  0.990915536880493,
  0.990928411483765,
  0.990941286087036,
  0.990954160690308,
  0.990967035293579,
  0.990979909896851,
  0.990992724895477,
  0.991005599498749,
  0.991018414497375,
  0.991031229496002,
  0.991043984889984,
  0.991056799888611,
  0.991069614887238,
  0.991082370281219,
  0.991095125675201,
  0.991107881069183,
  0.99112069606781,
  0.991133391857147,
  0.991146147251129,
  0.991158843040466,
  0.991171598434448,
  0.991184294223785,
  0.991196990013123,
  0.99120968580246,
  0.991222381591797,
  0.991235017776489,
  0.991247713565826,
  0.991260349750519,
  0.991272985935211,
  0.991285622119904,
  0.991298258304596,
  0.991310834884644,
  0.991323471069336,
  0.991336047649384,
  0.991348624229431,
  0.991361200809479,
  0.991373777389526,
  0.991386353969574,
  0.991398930549622,
  0.991411447525024,
  0.991423964500427,
  0.991436541080475,
  0.991449058055878,
  0.991461515426636,
  0.991474032402039,
  0.991486549377441,
  0.991499006748199,
  0.991511464118958,
  0.991523921489716,
  0.991536378860474,
  0.991548836231232,
  0.991561233997345,
  0.991573691368103,
  0.991586089134216,
  0.99159848690033,
  0.991610884666443,
  0.991623282432556,
  0.991635680198669,
  0.991648018360138,
  0.991660416126251,
  0.99167275428772,
  0.991685092449188,
  0.991697430610657,
  0.991709768772125,
  0.991722047328949,
  0.991734385490417,
  0.991746664047241,
  0.991758942604065,
  0.991771221160889,
  0.991783499717712,
  0.991795778274536,
  0.991807997226715,
  0.991820275783539,
  0.991832494735718,
  0.991844713687897,
  0.991856932640076,
  0.991869151592255,
  0.991881310939789,
  0.991893529891968,
  0.991905689239502,
  0.991917848587036,
  0.99193000793457,
  0.991942167282104,
  0.991954326629639,
  0.991966485977173,
  0.991978585720062,
  0.991990685462952,
  0.992002785205841,
  0.99201488494873,
  0.99202698469162,
  0.992039084434509,
  0.992051124572754,
  0.992063164710999,
  0.992075264453888,
  0.992087304592133,
  0.992099285125732,
  0.992111325263977,
  0.992123365402222,
  0.992135345935822,
  0.992147326469421,
  0.992159366607666,
  0.992171347141266,
  0.992183268070221,
  0.992195248603821,
  0.992207169532776,
  0.992219150066376,
  0.992231070995331,
  0.992242991924286,
  0.992254912853241,
  0.992266833782196,
  0.992278695106506,
  0.992290616035461,
  0.992302477359772,
  0.992314338684082,
  0.992326200008392,
  0.992338061332703,
  0.992349863052368,
  0.992361724376678,
  0.992373526096344,
  0.99238532781601,
  0.99239718914032,
  0.992408931255341,
  0.992420732975006,
  0.992432534694672,
  0.992444276809692,
  0.992456018924713,
  0.992467761039734,
  0.992479503154755,
  0.992491245269775,
  0.992502987384796,
  0.992514729499817,
  0.992526412010193,
  0.992538094520569,
  0.992549777030945,
  0.992561459541321,
  0.992573142051697,
  0.992584764957428,
  0.992596447467804,
  0.992608070373535,
  0.992619693279266,
  0.992631316184998,
  0.992642939090729,
  0.99265456199646,
  0.992666125297546,
  0.992677748203278,
  0.992689311504364,
  0.99270087480545,
  0.992712438106537,
  0.992724001407623,
  0.992735505104065,
  0.992747068405151,
  0.992758572101593,
  0.992770075798035,
  0.992781579494476,
  0.992793083190918,
  0.99280458688736,
  0.992816030979156,
  0.992827534675598,
  0.992838978767395,
  0.992850422859192,
  0.992861866950989,
  0.992873251438141,
  0.992884695529938,
  0.992896139621735,
  0.992907524108887,
  0.992918908596039,
  0.992930293083191,
  0.992941677570343,
  0.992953062057495,
  0.992964386940002,
  0.992975771427155,
  0.992987096309662,
  0.992998421192169,
  0.993009746074677,
  0.993021070957184,
  0.993032336235046,
  0.993043661117554,
  0.993054926395416,
  0.993066191673279,
  0.993077456951141,
  0.993088722229004,
  0.993099987506866,
  0.993111193180084,
  0.993122458457947,
  0.993133664131165,
  0.993144869804382,
  0.9931560754776,
  0.993167281150818,
  0.993178427219391,
  0.993189632892609,
  0.993200778961182,
  0.993211925029755,
  0.993223071098328,
  0.993234217166901,
  0.993245363235474,
  0.993256509304047,
  0.993267595767975,
  0.993278682231903,
  0.993289768695831,
  0.99330085515976,
  0.993311941623688,
  0.993323028087616,
  0.993334054946899,
  0.993345081806183,
  0.993356168270111,
  0.993367195129395,
  0.993378221988678,
  0.993389189243317,
  0.9934002161026,
  0.993411183357239,
  0.993422210216522,
  0.993433177471161,
  0.9934441447258,
  0.993455052375793,
  0.993466019630432,
  0.993476986885071,
  0.993487894535065,
  0.993498802185059,
  0.993509709835052,
  0.993520617485046,
  0.99353152513504,
  0.993542373180389,
  0.993553280830383,
  0.993564128875732,
  0.993574976921082,
  0.993585824966431,
  0.99359667301178,
  0.993607521057129,
  0.993618309497833,
  0.993629157543182,
  0.993639945983887,
  0.993650734424591,
  0.993661522865295,
  0.993672251701355,
  0.993683040142059,
  0.993693768978119,
  0.993704557418823,
  0.993715286254883,
  0.993726015090942,
  0.993736743927002,
  0.993747413158417,
  0.993758141994476,
  0.993768811225891,
  0.993779480457306,
  0.993790209293365,
  0.993800818920135,
  0.99381148815155,
  0.993822157382965,
  0.993832767009735,
  0.993843376636505,
  0.99385404586792,
  0.99386465549469,
  0.993875205516815,
  0.993885815143585,
  0.993896424770355,
  0.99390697479248,
  0.993917524814606,
  0.993928074836731,
  0.993938624858856,
  0.993949174880981,
  0.993959665298462,
  0.993970215320587,
  0.993980705738068,
  0.993991196155548,
  0.994001686573029,
  0.994012176990509,
  0.99402266740799,
  0.994033098220825,
  0.994043588638306,
  0.994054019451141,
  0.994064450263977,
  0.994074881076813,
  0.994085311889648,
  0.994095683097839,
  0.994106113910675,
  0.994116485118866,
  0.994126856327057,
  0.994137227535248,
  0.994147598743439,
  0.99415796995163,
  0.994168281555176,
  0.994178652763367,
  0.994188964366913,
  0.994199275970459,
  0.994209587574005,
  0.994219899177551,
  0.994230151176453,
  0.994240462779999,
  0.9942507147789,
  0.994260966777802,
  0.994271218776703,
  0.994281470775604,
  0.994291722774506,
  0.994301915168762,
  0.994312167167664,
  0.99432235956192,
  0.994332551956177,
  0.994342744350433,
  0.99435293674469,
  0.994363069534302,
  0.994373261928558,
  0.99438339471817,
  0.994393527507782,
  0.994403660297394,
  0.994413793087006,
  0.994423925876617,
  0.994434058666229,
  0.994444131851196,
  0.994454205036163,
  0.99446427822113,
  0.994474351406097,
  0.994484424591064,
  0.994494497776031,
  0.994504511356354,
  0.994514524936676,
  0.994524598121643,
  0.994534552097321,
  0.994544565677643,
  0.994554579257965,
  0.994564592838287,
  0.994574546813965,
  0.994584500789642,
  0.99459445476532,
  0.994604408740997,
  0.994614362716675,
  0.994624316692352,
  0.994634211063385,
  0.994644165039062,
  0.994654059410095,
  0.994663953781128,
  0.994673848152161,
  0.994683682918549,
  0.994693577289581,
  0.994703412055969,
  0.994713306427002,
  0.99472314119339,
  0.994732975959778,
  0.994742751121521,
  0.994752585887909,
  0.994762361049652,
  0.99477219581604,
  0.994781970977783,
  0.994791746139526,
  0.99480152130127,
  0.994811296463013,
  0.994821012020111,
  0.994830787181854,
  0.994840502738953,
  0.994850218296051,
  0.994859933853149,
  0.994869649410248,
  0.994879305362701,
  0.9948890209198,
  0.994898676872253,
  0.994908332824707,
  0.994918048381805,
  0.994927644729614,
  0.994937300682068,
  0.994946956634521,
  0.99495655298233,
  0.994966149330139,
  0.994975745677948,
  0.994985342025757,
  0.994994938373566,
  0.995004534721375,
  0.995014071464539,
  0.995023667812347,
  0.995033204555511,
  0.995042741298676,
  0.99505227804184,
  0.995061814785004,
  0.995071291923523,
  0.995080828666687,
  0.995090305805206,
  0.995099782943726,
  0.995109260082245,
  0.995118737220764,
  0.995128154754639,
  0.995137631893158,
  0.995147049427032,
  0.995156466960907,
  0.995165884494781,
  0.995175302028656,
  0.995184719562531,
  0.995194137096405,
  0.995203495025635,
  0.995212852954865,
  0.995222210884094,
  0.995231628417969,
  0.995240926742554,
  0.995250284671783,
  0.995259582996368,
  0.995268940925598,
  0.995278239250183,
  0.995287537574768,
  0.995296835899353,
  0.995306134223938,
  0.995315372943878,
  0.995324671268463,
  0.995333909988403,
  0.995343148708344,
  0.995352387428284,
  0.995361626148224,
  0.995370864868164,
  0.995380043983459,
  0.995389223098755,
  0.995398461818695,
  0.99540764093399,
  0.995416820049286,
  0.995425939559937,
  0.995435118675232,
  0.995444238185883,
  0.995453417301178,
  0.995462536811829,
  0.995471656322479,
  0.99548077583313,
  0.995489835739136,
  0.995498955249786,
  0.995508015155792,
  0.995517075061798,
  0.995526134967804,
  0.99553519487381,
  0.995544254779816,
  0.995553314685822,
  0.995562314987183,
  0.995571315288544,
  0.99558037519455,
  0.995589375495911,
  0.995598316192627,
  0.995607316493988,
  0.995616316795349,
  0.995625257492065,
  0.995634198188782,
  0.995643138885498,
  0.995652079582214,
  0.995661020278931,
  0.995669901371002,
  0.995678842067719,
  0.99568772315979,
  0.995696604251862,
  0.995705485343933,
  0.995714366436005,
  0.995723247528076,
  0.995732069015503,
  0.995740950107574,
  0.995749771595001,
  0.995758593082428,
  0.995767414569855,
  0.995776236057281,
  0.995784997940063,
  0.99579381942749,
  0.995802581310272,
  0.995811343193054,
  0.995820105075836,
  0.995828866958618,
  0.9958376288414,
  0.995846331119537,
  0.995855093002319,
  0.995863795280457,
  0.995872497558594,
  0.995881199836731,
  0.995889902114868,
  0.995898544788361,
  0.995907247066498,
  0.99591588973999,
  0.995924532413483,
  0.995933175086975,
  0.995941817760468,
  0.99595046043396,
  0.995959043502808,
  0.9959676861763,
  0.995976269245148,
  0.995984852313995,
  0.995993435382843,
  0.996002018451691,
  0.996010541915894,
  0.996019124984741,
  0.996027648448944,
  0.996036171913147,
  0.99604469537735,
  0.996053218841553,
  0.996061742305756,
  0.996070206165314,
  0.996078729629517,
  0.996087193489075,
  0.996095657348633,
  0.996104121208191,
  0.996112585067749,
  0.996120989322662,
  0.99612945318222,
  0.996137857437134,
  0.996146261692047,
  0.99615466594696,
  0.996163070201874,
  0.996171474456787,
  0.996179819107056,
  0.996188223361969,
  0.996196568012238,
  0.996204912662506,
  0.996213257312775,
  0.996221601963043,
  0.996229887008667,
  0.996238231658936,
  0.996246516704559,
  0.996254801750183,
  0.996263086795807,
  0.996271371841431,
  0.996279656887054,
  0.996287882328033,
  0.996296167373657,
  0.996304392814636,
  0.996312618255615,
  0.996320843696594,
  0.996329069137573,
  0.996337234973907,
  0.996345460414886,
  0.996353626251221,
  0.996361792087555,
  0.996369957923889,
  0.996378123760223,
  0.996386289596558,
  0.996394395828247,
  0.996402561664581,
  0.996410667896271,
  0.99641877412796,
  0.99642688035965,
  0.996434986591339,
  0.996443033218384,
  0.996451139450073,
  0.996459186077118,
  0.996467232704163,
  0.996475279331207,
  0.996483325958252,
  0.996491372585297,
  0.996499359607697,
  0.996507406234741,
  0.996515393257141,
  0.996523380279541,
  0.996531367301941,
  0.996539354324341,
  0.996547281742096,
  0.996555268764496,
  0.996563196182251,
  0.996571123600006,
  0.996579051017761,
  0.996586978435516,
  0.996594905853271,
  0.996602773666382,
  0.996610701084137,
  0.996618568897247,
  0.996626436710358,
  0.996634304523468,
  0.996642172336578,
  0.996649980545044,
  0.996657848358154,
  0.99666565656662,
  0.99667352437973,
  0.996681272983551,
  0.996689081192017,
  0.996696889400482,
  0.996704697608948,
  0.996712446212769,
  0.996720194816589,
  0.99672794342041,
  0.996735692024231,
  0.996743440628052,
  0.996751189231873,
  0.996758878231049,
  0.996766626834869,
  0.996774315834045,
  0.996782004833221,
  0.996789693832397,
  0.996797323226929,
  0.996805012226105,
  0.996812641620636,
  0.996820271015167,
  0.996827900409698,
  0.996835589408875,
  0.996843159198761,
  0.996850788593292,
  0.996858358383179,
  0.99686598777771,
  0.996873557567596,
  0.996881127357483,
  0.996888697147369,
  0.996896266937256,
  0.996903777122498,
  0.996911287307739,
  0.996918857097626,
  0.996926367282867,
  0.996933877468109,
  0.996941387653351,
  0.996948838233948,
  0.996956348419189,
  0.996963798999786,
  0.996971249580383,
  0.99697870016098,
  0.996986150741577,
  0.996993601322174,
  0.997000992298126,
  0.997008442878723,
  0.997015833854675,
  0.997023224830627,
  0.99703061580658,
  0.997038006782532,
  0.997045338153839,
  0.997052729129791,
  0.997060060501099,
  0.997067391872406,
  0.997074723243713,
  0.997082054615021,
  0.997089385986328,
  0.997096717357635,
  0.997103989124298,
  0.997111260890961,
  0.997118532657623,
  0.997125804424286,
  0.997133076190948,
  0.997140347957611,
  0.997147560119629,
  0.997154772281647,
  0.997162044048309,
  0.997169256210327,
  0.997176468372345,
  0.997183620929718,
  0.997190833091736,
  0.997197985649109,
  0.997205138206482,
  0.997212290763855,
  0.997219443321228,
  0.997226595878601,
  0.997233748435974,
  0.997240841388702,
  0.997247993946075,
  0.997255086898804,
  0.997262179851532,
  0.99726927280426,
  0.997276306152344,
  0.997283399105072,
  0.997290432453156,
  0.997297525405884,
  0.997304558753967,
  0.997311592102051,
  0.99731856584549,
  0.997325599193573,
  0.997332632541656,
  0.997339606285095,
  0.997346580028534,
  0.997353553771973,
  0.997360527515411,
  0.99736750125885,
  0.997374415397644,
  0.997381389141083,
  0.997388303279877,
  0.997395217418671,
  0.997402131557465,
  0.997409045696259,
  0.997415900230408,
  0.997422814369202,
  0.997429668903351,
  0.9974365234375,
  0.997443377971649,
  0.997450232505798,
  0.997457087039948,
  0.997463881969452,
  0.997470736503601,
  0.997477531433105,
  0.99748432636261,
  0.997491121292114,
  0.997497916221619,
  0.997504711151123,
  0.997511446475983,
  0.997518181800842,
  0.997524976730347,
  0.997531712055206,
  0.997538447380066,
  0.997545123100281,
  0.99755185842514,
  0.997558534145355,
  0.997565269470215,
  0.99757194519043,
  0.997578561306,
  0.997585237026215,
  0.997591912746429,
  0.997598588466644,
  0.997605204582214,
  0.997611820697784,
  0.997618436813354,
  0.997625052928925,
  0.997631669044495,
  0.99763822555542,
  0.997644782066345,
  0.997651398181915,
  0.997657954692841,
  0.997664511203766,
  0.997671067714691,
  0.997677564620972,
  0.997684121131897,
  0.997690618038177,
  0.997697114944458,
  0.997703611850739,
  0.997710108757019,
  0.9977166056633,
  0.997723042964935,
  0.997729539871216,
  0.997735977172852,
  0.997742414474487,
  0.997748851776123,
  0.997755289077759,
  0.997761726379395,
  0.997768104076385,
  0.997774481773376,
  0.997780919075012,
  0.997787296772003,
  0.997793614864349,
  0.99779999256134,
  0.997806370258331,
  0.997812688350677,
  0.997819006443024,
  0.99782532453537,
  0.997831642627716,
  0.997837960720062,
  0.997844278812408,
  0.99785053730011,
  0.997856855392456,
  0.997863113880157,
  0.997869372367859,
  0.99787563085556,
  0.997881829738617,
  0.997888088226318,
  0.997894287109375,
  0.997900545597076,
  0.997906744480133,
  0.99791294336319,
  0.997919082641602,
  0.997925281524658,
  0.99793142080307,
  0.997937619686127,
  0.997943758964539,
  0.99794989824295,
  0.997956037521362,
  0.997962176799774,
  0.997968256473541,
  0.997974395751953,
  0.99798047542572,
  0.997986555099487,
  0.997992634773254,
  0.997998714447021,
  0.998004734516144,
  0.998010814189911,
  0.998016834259033,
  0.998022854328156,
  0.998028874397278,
  0.9980348944664,
  0.998040914535522,
  0.998046875,
  0.998052895069122,
  0.9980588555336,
  0.998064815998077,
  0.998070776462555,
  0.998076736927032,
  0.99808269739151,
  0.998088598251343,
  0.998094499111176,
  0.998100459575653,
  0.998106360435486,
  0.998112201690674,
  0.998118102550507,
  0.998124003410339,
  0.998129844665527,
  0.998135685920715,
  0.998141586780548,
  0.998147368431091,
  0.998153209686279,
  0.998159050941467,
  0.99816483259201,
  0.998170673847198,
  0.998176455497742,
  0.998182237148285,
  0.998188018798828,
  0.998193740844727,
  0.99819952249527,
  0.998205244541168,
  0.998211026191711,
  0.99821674823761,
  0.998222470283508,
  0.998228132724762,
  0.99823385477066,
  0.998239576816559,
  0.998245239257812,
  0.998250901699066,
  0.99825656414032,
  0.998262226581573,
  0.998267889022827,
  0.998273491859436,
  0.99827915430069,
  0.998284757137299,
  0.998290359973907,
  0.998295962810516,
  0.998301565647125,
  0.998307108879089,
  0.998312711715698,
  0.998318254947662,
  0.998323798179626,
  0.998329341411591,
  0.998334884643555,
  0.998340427875519,
  0.998345911502838,
  0.998351454734802,
  0.998356938362122,
  0.998362421989441,
  0.99836790561676,
  0.99837338924408,
  0.998378813266754,
  0.998384296894073,
  0.998389720916748,
  0.998395144939423,
  0.998400628566742,
  0.998405992984772,
  0.998411417007446,
  0.998416841030121,
  0.998422205448151,
  0.99842756986618,
  0.99843293428421,
  0.99843829870224,
  0.99844366312027,
  0.9984490275383,
  0.998454332351685,
  0.99845963716507,
  0.998465001583099,
  0.998470306396484,
  0.998475551605225,
  0.99848085641861,
  0.998486161231995,
  0.998491406440735,
  0.998496651649475,
  0.998501896858215,
  0.998507142066956,
  0.998512387275696,
  0.998517632484436,
  0.998522818088531,
  0.998528063297272,
  0.998533248901367,
  0.998538434505463,
  0.998543620109558,
  0.998548746109009,
  0.998553931713104,
  0.998559057712555,
  0.998564183712006,
  0.998569369316101,
  0.998574495315552,
  0.998579561710358,
  0.998584687709808,
  0.998589754104614,
  0.998594880104065,
  0.998599946498871,
  0.998605012893677,
  0.998610079288483,
  0.998615086078644,
  0.99862015247345,
  0.998625159263611,
  0.998630225658417,
  0.998635232448578,
  0.998640239238739,
  0.998645186424255,
  0.998650193214417,
  0.998655140399933,
  0.998660147190094,
  0.99866509437561,
  0.998670041561127,
  0.998674988746643,
  0.998679935932159,
  0.998684823513031,
  0.998689711093903,
  0.998694658279419,
  0.998699545860291,
  0.998704433441162,
  0.998709261417389,
  0.99871414899826,
  0.998719036579132,
  0.998723864555359,
  0.998728692531586,
  0.998733520507812,
  0.998738348484039,
  0.998743176460266,
  0.998747944831848,
  0.998752772808075,
  0.998757541179657,
  0.998762309551239,
  0.998767077922821,
  0.998771846294403,
  0.99877655506134,
  0.998781323432922,
  0.99878603219986,
  0.998790740966797,
  0.998795449733734,
  0.998800158500671,
  0.998804867267609,
  0.998809516429901,
  0.998814225196838,
  0.998818874359131,
  0.998823523521423,
  0.998828172683716,
  0.998832821846008,
  0.998837411403656,
  0.998842060565948,
  0.998846650123596,
  0.998851239681244,
  0.998855829238892,
  0.998860418796539,
  0.998865008354187,
  0.99886953830719,
  0.998874127864838,
  0.998878657817841,
  0.998883187770844,
  0.998887717723846,
  0.998892247676849,
  0.998896718025208,
  0.99890124797821,
  0.998905718326569,
  0.998910188674927,
  0.998914659023285,
  0.998919129371643,
  0.998923599720001,
  0.998928010463715,
  0.998932421207428,
  0.998936891555786,
  0.9989413022995,
  0.998945713043213,
  0.998950123786926,
  0.998954474925995,
  0.998958885669708,
  0.998963236808777,
  0.998967587947845,
  0.998971939086914,
  0.998976290225983,
  0.998980641365051,
  0.998984932899475,
  0.998989224433899,
  0.998993575572968,
  0.998997867107391,
  0.999002158641815,
  0.999006390571594,
  0.999010682106018,
  0.999014914035797,
  0.999019205570221,
  0.9990234375,
  0.999027669429779,
  0.999031901359558,
  0.999036073684692,
  0.999040305614471,
  0.999044477939606,
  0.999048709869385,
  0.999052882194519,
  0.999057054519653,
  0.999061167240143,
  0.999065339565277,
  0.999069452285767,
  0.999073624610901,
  0.99907773733139,
  0.99908185005188,
  0.999085962772369,
  0.999090015888214,
  0.999094128608704,
  0.999098181724548,
  0.999102234840393,
  0.999106347560883,
  0.999110341072083,
  0.999114394187927,
  0.999118447303772,
  0.999122440814972,
  0.999126493930817,
  0.999130487442017,
  0.999134480953217,
  0.999138414859772,
  0.999142408370972,
  0.999146401882172,
  0.999150335788727,
  0.999154269695282,
  0.999158203601837,
  0.999162137508392,
  0.999166071414948,
  0.999170005321503,
  0.999173879623413,
  0.999177753925323,
  0.999181687831879,
  0.999185502529144,
  0.999189376831055,
  0.999193251132965,
  0.999197065830231,
  0.999200940132141,
  0.999204754829407,
  0.999208569526672,
  0.999212384223938,
  0.999216198921204,
  0.999219954013824,
  0.99922376871109,
  0.999227523803711,
  0.999231278896332,
  0.999235033988953,
  0.999238789081573,
  0.999242544174194,
  0.99924623966217,
  0.999249994754791,
  0.999253690242767,
  0.999257385730743,
  0.999261081218719,
  0.999264776706696,
  0.999268412590027,
  0.999272108078003,
  0.999275743961334,
  0.999279379844666,
  0.999283015727997,
  0.999286651611328,
  0.999290227890015,
  0.999293863773346,
  0.999297440052032,
  0.999301075935364,
  0.99930465221405,
  0.999308228492737,
  0.999311745166779,
  0.999315321445465,
  0.999318838119507,
  0.999322354793549,
  0.999325931072235,
  0.999329447746277,
  0.999332904815674,
  0.999336421489716,
  0.999339938163757,
  0.999343395233154,
  0.999346852302551,
  0.999350309371948,
  0.999353766441345,
  0.999357223510742,
  0.999360620975494,
  0.999364078044891,
  0.999367475509644,
  0.999370872974396,
  0.999374270439148,
  0.9993776679039,
  0.999381065368652,
  0.99938440322876,
  0.999387741088867,
  0.999391138553619,
  0.999394476413727,
  0.999397814273834,
  0.999401092529297,
  0.999404430389404,
  0.999407768249512,
  0.999411046504974,
  0.999414324760437,
  0.9994176030159,
  0.999420881271362,
  0.99942409992218,
  0.999427378177643,
  0.999430596828461,
  0.999433815479279,
  0.999437034130096,
  0.999440252780914,
  0.999443471431732,
  0.999446630477905,
  0.999449849128723,
  0.999453008174896,
  0.999456167221069,
  0.999459326267242,
  0.999462485313416,
  0.999465644359589,
  0.999468743801117,
  0.99947190284729,
  0.999475002288818,
  0.999478101730347,
  0.999481201171875,
  0.999484241008759,
  0.999487340450287,
  0.99949038028717,
  0.999493479728699,
  0.999496519565582,
  0.999499559402466,
  0.999502599239349,
  0.999505579471588,
  0.999508619308472,
  0.99951159954071,
  0.999514579772949,
  0.999517560005188,
  0.999520540237427,
  0.999523520469666,
  0.99952644109726,
  0.999529421329498,
  0.999532341957092,
  0.999535262584686,
  0.99953818321228,
  0.999541103839874,
  0.999544024467468,
  0.999546885490417,
  0.999549806118011,
  0.999552667140961,
  0.99955552816391,
  0.999558389186859,
  0.999561190605164,
  0.999564051628113,
  0.999566853046417,
  0.999569714069366,
  0.999572515487671,
  0.999575316905975,
  0.99957811832428,
  0.999580860137939,
  0.999583661556244,
  0.999586403369904,
  0.999589145183563,
  0.999591886997223,
  0.999594628810883,
  0.999597370624542,
  0.999600052833557,
  0.999602794647217,
  0.999605476856232,
  0.999608159065247,
  0.999610841274261,
  0.999613523483276,
  0.999616146087646,
  0.999618828296661,
  0.999621450901031,
  0.999624073505402,
  0.999626696109772,
  0.999629318714142,
  0.999631941318512,
  0.999634563922882,
  0.999637126922607,
  0.999639689922333,
  0.999642252922058,
  0.999644815921783,
  0.999647378921509,
  0.999649941921234,
  0.999652445316315,
  0.99965500831604,
  0.999657511711121,
  0.999660015106201,
  0.999662518501282,
  0.999664962291718,
  0.999667465686798,
  0.999669909477234,
  0.99967235326767,
  0.99967485666275,
  0.999677240848541,
  0.999679684638977,
  0.999682128429413,
  0.999684512615204,
  0.99968695640564,
  0.999689340591431,
  0.999691724777222,
  0.999694108963013,
  0.999696433544159,
  0.99969881772995,
  0.999701142311096,
  0.999703526496887,
  0.999705851078033,
  0.99970817565918,
  0.999710440635681,
  0.999712765216827,
  0.999715089797974,
  0.999717354774475,
  0.999719619750977,
  0.999721884727478,
  0.999724149703979,
  0.999726414680481,
  0.999728620052338,
  0.999730885028839,
  0.999733090400696,
  0.999735295772552,
  0.999737501144409,
  0.999739706516266,
  0.999741852283478,
  0.999744057655334,
  0.999746203422546,
  0.999748349189758,
  0.99975049495697,
  0.999752640724182,
  0.999754786491394,
  0.999756872653961,
  0.999759018421173,
  0.99976110458374,
  0.999763190746307,
  0.999765276908875,
  0.999767363071442,
  0.999769389629364,
  0.999771475791931,
  0.999773502349854,
  0.999775528907776,
  0.999777555465698,
  0.999779582023621,
  0.999781608581543,
  0.999783575534821,
  0.999785602092743,
  0.999787569046021,
  0.999789535999298,
  0.999791502952576,
  0.999793469905853,
  0.999795377254486,
  0.999797344207764,
  0.999799251556396,
  0.999801158905029,
  0.999803066253662,
  0.999804973602295,
  0.999806880950928,
  0.999808728694916,
  0.999810636043549,
  0.999812483787537,
  0.999814331531525,
  0.999816179275513,
  0.999818027019501,
  0.999819815158844,
  0.999821662902832,
  0.999823451042175,
  0.999825239181519,
  0.999827027320862,
  0.999828815460205,
  0.999830603599548,
  0.999832332134247,
  0.999834060668945,
  0.999835848808289,
  0.999837577342987,
  0.999839305877686,
  0.999840974807739,
  0.999842703342438,
  0.999844431877136,
  0.99984610080719,
  0.999847769737244,
  0.999849438667297,
  0.999851107597351,
  0.999852776527405,
  0.999854385852814,
  0.999855995178223,
  0.999857664108276,
  0.999859273433685,
  0.999860882759094,
  0.999862432479858,
  0.999864041805267,
  0.999865591526031,
  0.99986720085144,
  0.999868750572205,
  0.999870300292969,
  0.999871850013733,
  0.999873340129852,
  0.999874889850616,
  0.999876379966736,
  0.999877870082855,
  0.999879360198975,
  0.999880850315094,
  0.999882340431213,
  0.999883830547333,
  0.999885261058807,
  0.999886691570282,
  0.999888181686401,
  0.999889612197876,
  0.999890983104706,
  0.99989241361618,
  0.999893844127655,
  0.999895215034485,
  0.999896585941315,
  0.999897956848145,
  0.999899327754974,
  0.999900698661804,
  0.999902069568634,
  0.999903380870819,
  0.999904692173004,
  0.999906003475189,
  0.999907314777374,
  0.999908626079559,
  0.999909937381744,
  0.999911189079285,
  0.99991250038147,
  0.99991375207901,
  0.99991500377655,
  0.999916255474091,
  0.999917507171631,
  0.999918699264526,
  0.999919891357422,
  0.999921143054962,
  0.999922335147858,
  0.999923527240753,
  0.999924719333649,
  0.999925851821899,
  0.999927043914795,
  0.999928176403046,
  0.999929308891296,
  0.999930441379547,
  0.999931573867798,
  0.999932706356049,
  0.999933838844299,
  0.999934911727905,
  0.999935984611511,
  0.999937117099762,
  0.999938130378723,
  0.999939203262329,
  0.999940276145935,
  0.999941349029541,
  0.999942362308502,
  0.999943375587463,
  0.999944388866425,
  0.999945402145386,
  0.999946415424347,
  0.999947369098663,
  0.999948382377625,
  0.999949336051941,
  0.999950289726257,
  0.999951243400574,
  0.99995219707489,
  0.999953091144562,
  0.999954044818878,
  0.99995493888855,
  0.999955832958221,
  0.999956786632538,
  0.999957621097565,
  0.999958515167236,
  0.999959409236908,
  0.999960243701935,
  0.999961078166962,
  0.999961912631989,
  0.999962747097015,
  0.999963581562042,
  0.999964416027069,
  0.999965190887451,
  0.999966025352478,
  0.99996680021286,
  0.999967575073242,
  0.999968349933624,
  0.999969124794006,
  0.999969840049744,
  0.999970614910126,
  0.999971330165863,
  0.9999720454216,
  0.999972760677338,
  0.999973475933075,
  0.999974131584167,
  0.999974846839905,
  0.999975502490997,
  0.99997615814209,
  0.999976813793182,
  0.999977469444275,
  0.999978125095367,
  0.999978721141815,
  0.999979376792908,
  0.999979972839355,
  0.999980568885803,
  0.999981164932251,
  0.999981760978699,
  0.999982357025146,
  0.999982893466949,
  0.999983429908752,
  0.9999840259552,
  0.999984562397003,
  0.999985098838806,
  0.999985575675964,
  0.999986112117767,
  0.999986588954926,
  0.999987065792084,
  0.999987542629242,
  0.999988079071045,
  0.999988496303558,
  0.999988973140717,
  0.99998939037323,
  0.999989867210388,
  0.999990284442902,
  0.999990701675415,
  0.999991118907928,
  0.999991476535797,
  0.999991893768311,
  0.999992251396179,
  0.999992668628693,
  0.999993026256561,
  0.99999338388443,
  0.999993681907654,
  0.999994039535522,
  0.999994397163391,
  0.999994695186615,
  0.999994993209839,
  0.999995291233063,
  0.999995589256287,
  0.99999588727951,
  0.99999612569809,
  0.999996423721313,
  0.999996662139893,
  0.999996900558472,
  0.999997138977051,
  0.99999737739563,
  0.999997556209564,
  0.999997794628143,
  0.999997973442078,
  0.999998152256012,
  0.999998331069946,
  0.999998509883881,
  0.999998688697815,
  0.999998807907104,
  0.999998986721039,
  0.999999105930328,
  0.999999225139618,
  0.999999344348907,
  0.999999463558197,
  0.999999523162842,
  0.999999642372131,
  0.999999701976776,
  0.999999761581421,
  0.999999821186066,
  0.99999988079071,
  0.999999940395355,
  0.999999940395355,
  1,
  1,
  1
]);
var TAN_TABLE = new Float32Array([
  0,
  958738019107841e-19,
  191747603821568e-18,
  287621398456395e-18,
  383495207643136e-18,
  479369016829878e-18,
  57524285512045e-17,
  671116693411022e-18,
  766990531701595e-18,
  862864428199828e-18,
  9587382664904e-16,
  0.00105461222119629,
  0.00115048605948687,
  0.00124636001419276,
  0.00134223396889865,
  0.00143810804001987,
  0.00153398199472576,
  0.00162985594943166,
  0.0017257301369682,
  0.00182160420808941,
  0.00191747827921063,
  0.00201335246674716,
  0.00210922677069902,
  0.00220510107465088,
  0.0023009751457721,
  0.0023968496825546,
  0.00249272398650646,
  0.00258859829045832,
  0.00268447282724082,
  0.00278034736402333,
  0.00287622190080583,
  0.00297209643758833,
  0.00306797120720148,
  0.00316384597681463,
  0.00325972074642777,
  0.00335559551604092,
  0.00345147051848471,
  0.0035473455209285,
  0.00364322052337229,
  0.00373909552581608,
  0.00383497076109052,
  0.00393084622919559,
  0.00402672123163939,
  0.00412259669974446,
  0.00421847216784954,
  0.00431434763595462,
  0.00441022356972098,
  0.00450609903782606,
  0.00460197497159243,
  0.00469785090535879,
  0.00479372683912516,
  0.00488960277289152,
  0.00498547870665789,
  0.00508135510608554,
  0.00517723150551319,
  0.00527310790494084,
  0.0053689843043685,
  0.00546486116945744,
  0.00556073756888509,
  0.00565661443397403,
  0.00575249129906297,
  0.00584836862981319,
  0.00594424549490213,
  0.00604012282565236,
  0.00613600015640259,
  0.00623187748715281,
  0.00632775528356433,
  0.00642363307997584,
  0.00651951087638736,
  0.00661538867279887,
  0.00671126646921039,
  0.00680714473128319,
  0.00690302299335599,
  0.00699890172109008,
  0.00709477998316288,
  0.00719065871089697,
  0.00728653790429235,
  0.00738241663202643,
  0.00747829582542181,
  0.00757417501881719,
  0.00767005421221256,
  0.00776593387126923,
  0.00786181353032589,
  0.00795769318938255,
  0.00805357284843922,
  0.00814945343881845,
  0.00824533402919769,
  0.00834121368825436,
  0.00843709427863359,
  0.00853297486901283,
  0.00862885639071465,
  0.00872473698109388,
  0.0088206185027957,
  0.00891650002449751,
  0.00901238154619932,
  0.00910826306790113,
  0.00920414458960295,
  0.00930002704262733,
  0.00939590856432915,
  0.00949179101735353,
  0.00958767347037792,
  0.00968355685472488,
  0.00977943930774927,
  0.00987532269209623,
  0.00997120514512062,
  0.0100670894607902,
  0.0101629728451371,
  0.0102588562294841,
  0.010354739613831,
  0.0104506248608232,
  0.0105465091764927,
  0.0106423925608397,
  0.0107382778078318,
  0.0108341630548239,
  0.010930048301816,
  0.0110259335488081,
  0.0111218187958002,
  0.0112177049741149,
  0.0113135911524296,
  0.0114094773307443,
  0.0115053644403815,
  0.0116012496873736,
  0.0116971367970109,
  0.0117930239066482,
  0.0118889110162854,
  0.0119847990572453,
  0.0120806861668825,
  0.0121765742078424,
  0.0122724622488022,
  0.0123683512210846,
  0.0124642392620444,
  0.0125601282343268,
  0.0126560172066092,
  0.0127519061788917,
  0.0128477960824966,
  0.0129436859861016,
  0.0130395758897066,
  0.0131354657933116,
  0.0132313556969166,
  0.0133272474631667,
  0.0134231382980943,
  0.0135190291330218,
  0.013614920899272,
  0.0137108117341995,
  0.0138067044317722,
  0.0139025961980224,
  0.0139984888955951,
  0.0140943815931678,
  0.0141902752220631,
  0.0142861679196358,
  0.0143820606172085,
  0.0144779551774263,
  0.0145738488063216,
  0.0146697433665395,
  0.0147656379267573,
  0.0148615334182978,
  0.0149574279785156,
  0.0150533225387335,
  0.0151492189615965,
  0.0152451153844595,
  0.0153410108759999,
  0.0154369082301855,
  0.0155328037217259,
  0.0156287010759115,
  0.0157245993614197,
  0.0158204976469278,
  0.0159163940697908,
  0.016012292355299,
  0.0161081906408072,
  0.0162040907889605,
  0.0162999890744686,
  0.0163958892226219,
  0.0164917875081301,
  0.0165876876562834,
  0.0166835896670818,
  0.0167794898152351,
  0.0168753899633884,
  0.0169712919741869,
  0.0170671921223402,
  0.0171630941331387,
  0.0172589961439371,
  0.0173549000173807,
  0.0174508038908243,
  0.0175467059016228,
  0.0176426097750664,
  0.01773851364851,
  0.0178344175219536,
  0.0179303213953972,
  0.0180262252688408,
  0.0181221328675747,
  0.0182180367410183,
  0.018313942477107,
  0.0184098482131958,
  0.0185057558119297,
  0.0186016615480185,
  0.0186975691467524,
  0.0187934767454863,
  0.0188893843442202,
  0.0189852938055992,
  0.0190812014043331,
  0.0191771108657122,
  0.0192730184644461,
  0.0193689297884703,
  0.0194648392498493,
  0.0195607487112284,
  0.0196566600352526,
  0.0197525713592768,
  0.019848482683301,
  0.0199443940073252,
  0.0200403053313494,
  0.0201362185180187,
  0.0202321317046881,
  0.0203280448913574,
  0.0204239580780268,
  0.0205198712646961,
  0.0206157863140106,
  0.0207117013633251,
  0.0208076164126396,
  0.0209035314619541,
  0.0209994483739138,
  0.0210953634232283,
  0.0211912803351879,
  0.0212871972471476,
  0.0213831141591072,
  0.021479032933712,
  0.0215749517083168,
  0.0216708704829216,
  0.0217667892575264,
  0.0218627098947763,
  0.0219586286693811,
  0.0220545493066311,
  0.0221504680812359,
  0.022246390581131,
  0.0223423112183809,
  0.022438233718276,
  0.0225341562181711,
  0.0226300787180662,
  0.0227260012179613,
  0.0228219255805016,
  0.0229178480803967,
  0.0230137724429369,
  0.0231096986681223,
  0.0232056230306625,
  0.0233015492558479,
  0.0233974754810333,
  0.0234934017062187,
  0.0235893297940493,
  0.0236852560192347,
  0.0237811841070652,
  0.0238771121948957,
  0.0239730402827263,
  0.024068970233202,
  0.0241648983210325,
  0.0242608282715082,
  0.0243567600846291,
  0.0244526918977499,
  0.0245486218482256,
  0.0246445536613464,
  0.0247404854744673,
  0.0248364191502333,
  0.0249323528259993,
  0.0250282865017653,
  0.0251242201775312,
  0.0252201538532972,
  0.0253160893917084,
  0.0254120249301195,
  0.0255079604685307,
  0.0256038978695869,
  0.0256998334079981,
  0.0257957708090544,
  0.0258917082101107,
  0.0259876474738121,
  0.0260835867375135,
  0.026179526001215,
  0.0262754652649164,
  0.026371406391263,
  0.0264673456549644,
  0.0265632886439562,
  0.0266592297703028,
  0.0267551708966494,
  0.0268511138856411,
  0.0269470568746328,
  0.0270430017262697,
  0.0271389447152615,
  0.0272348895668983,
  0.0273308344185352,
  0.0274267811328173,
  0.0275227278470993,
  0.0276186726987362,
  0.0277146212756634,
  0.0278105679899454,
  0.0279065165668726,
  0.0280024651437998,
  0.028098413720727,
  0.0281943641602993,
  0.0282903145998716,
  0.028386265039444,
  0.0284822173416615,
  0.0285781677812338,
  0.0286741200834513,
  0.0287700742483139,
  0.0288660265505314,
  0.028961980715394,
  0.0290579367429018,
  0.0291538909077644,
  0.0292498450726271,
  0.0293458011001348,
  0.0294417589902878,
  0.0295377168804407,
  0.0296336747705936,
  0.0297296326607466,
  0.0298255905508995,
  0.0299215503036976,
  0.0300175100564957,
  0.0301134716719389,
  0.030209431424737,
  0.0303053930401802,
  0.0304013546556234,
  0.0304973181337118,
  0.0305932816118002,
  0.0306892450898886,
  0.030785208567977,
  0.0308811739087105,
  0.030977139249444,
  0.0310731064528227,
  0.0311690736562014,
  0.0312650389969349,
  0.0313610062003136,
  0.0314569771289825,
  0.0315529443323612,
  0.0316489152610302,
  0.0317448861896992,
  0.0318408533930779,
  0.0319368280470371,
  0.0320327989757061,
  0.0321287699043751,
  0.0322247445583344,
  0.0323207192122936,
  0.0324166901409626,
  0.0325126685202122,
  0.0326086431741714,
  0.0327046178281307,
  0.0328005962073803,
  0.0328965708613396,
  0.0329925492405891,
  0.0330885276198387,
  0.0331845097243786,
  0.0332804881036282,
  0.0333764664828777,
  0.0334724485874176,
  0.0335684306919575,
  0.0336644127964973,
  0.0337603949010372,
  0.0338563770055771,
  0.0339523628354073,
  0.0340483486652374,
  0.0341443307697773,
  0.0342403165996075,
  0.0343363061547279,
  0.0344322919845581,
  0.0345282778143883,
  0.0346242673695087,
  0.0347202569246292,
  0.0348162464797497,
  0.0349122360348701,
  0.0350082293152809,
  0.0351042188704014,
  0.0352002121508121,
  0.0352962054312229,
  0.0353921987116337,
  0.0354881919920444,
  0.0355841852724552,
  0.0356801822781563,
  0.0357761792838573,
  0.0358721762895584,
  0.0359681732952595,
  0.0360641703009605,
  0.0361601710319519,
  0.0362561717629433,
  0.0363521687686443,
  0.0364481694996357,
  0.0365441702306271,
  0.0366401746869087,
  0.0367361754179001,
  0.0368321798741817,
  0.0369281843304634,
  0.0370241887867451,
  0.037120196968317,
  0.0372162014245987,
  0.0373122096061707,
  0.0374082177877426,
  0.0375042259693146,
  0.0376002341508865,
  0.0376962423324585,
  0.0377922542393208,
  0.037888266146183,
  0.0379842780530453,
  0.0380802899599075,
  0.0381763018667698,
  0.0382723174989223,
  0.0383683294057846,
  0.0384643450379372,
  0.0385603606700897,
  0.0386563800275326,
  0.0387523956596851,
  0.038848415017128,
  0.0389444343745708,
  0.0390404537320137,
  0.0391364730894566,
  0.0392324924468994,
  0.0393285155296326,
  0.0394245386123657,
  0.0395205616950989,
  0.039616584777832,
  0.0397126115858555,
  0.0398086346685886,
  0.0399046614766121,
  0.0400006882846355,
  0.040096715092659,
  0.0401927456259727,
  0.0402887724339962,
  0.04038480296731,
  0.0404808335006237,
  0.0405768640339375,
  0.0406728982925415,
  0.0407689288258553,
  0.0408649630844593,
  0.0409609973430634,
  0.0410570316016674,
  0.0411530695855618,
  0.0412491038441658,
  0.0413451418280602,
  0.0414411798119545,
  0.0415372177958488,
  0.0416332595050335,
  0.0417292974889278,
  0.0418253391981125,
  0.0419213809072971,
  0.0420174263417721,
  0.0421134680509567,
  0.0422095134854317,
  0.0423055551946163,
  0.0424016043543816,
  0.0424976497888565,
  0.0425936952233315,
  0.0426897443830967,
  0.0427857935428619,
  0.0428818427026272,
  0.0429778955876827,
  0.043073944747448,
  0.0431699976325035,
  0.0432660505175591,
  0.0433621034026146,
  0.0434581600129604,
  0.043554212898016,
  0.0436502695083618,
  0.0437463261187077,
  0.0438423864543438,
  0.0439384430646896,
  0.0440345034003258,
  0.0441305637359619,
  0.0442266240715981,
  0.0443226844072342,
  0.0444187484681606,
  0.0445148125290871,
  0.0446108765900135,
  0.0447069406509399,
  0.0448030047118664,
  0.0448990724980831,
  0.0449951402842999,
  0.0450912080705166,
  0.0451872795820236,
  0.0452833473682404,
  0.0453794188797474,
  0.0454754903912544,
  0.0455715619027615,
  0.0456676371395588,
  0.0457637086510658,
  0.0458597838878632,
  0.0459558628499508,
  0.0460519380867481,
  0.0461480133235455,
  0.0462440922856331,
  0.0463401712477207,
  0.0464362539350986,
  0.0465323328971863,
  0.0466284155845642,
  0.0467244982719421,
  0.0468205809593201,
  0.0469166673719883,
  0.0470127537846565,
  0.0471088364720345,
  0.047204926609993,
  0.0473010130226612,
  0.0473970994353294,
  0.047493189573288,
  0.0475892797112465,
  0.0476853735744953,
  0.0477814637124538,
  0.0478775575757027,
  0.0479736514389515,
  0.0480697453022003,
  0.0481658428907394,
  0.0482619404792786,
  0.0483580380678177,
  0.0484541356563568,
  0.0485502332448959,
  0.0486463345587254,
  0.0487424358725548,
  0.0488385371863842,
  0.0489346422255039,
  0.0490307435393333,
  0.0491268485784531,
  0.0492229536175728,
  0.0493190623819828,
  0.0494151674211025,
  0.0495112761855125,
  0.0496073886752129,
  0.0497034974396229,
  0.0497996062040329,
  0.0498957186937332,
  0.0499918311834335,
  0.0500879473984241,
  0.0501840636134148,
  0.0502801798284054,
  0.0503762923181057,
  0.0504724122583866,
  0.0505685284733772,
  0.0506646484136581,
  0.0507607683539391,
  0.0508568920195103,
  0.0509530156850815,
  0.0510491356253624,
  0.0511452592909336,
  0.0512413866817951,
  0.0513375103473663,
  0.0514336377382278,
  0.0515297688543797,
  0.0516258962452412,
  0.051722027361393,
  0.0518181547522545,
  0.0519142895936966,
  0.0520104207098484,
  0.0521065555512905,
  0.0522026903927326,
  0.0522988252341747,
  0.0523949600756168,
  0.0524910986423492,
  0.0525872372090816,
  0.0526833757758141,
  0.0527795180678368,
  0.0528756566345692,
  0.0529717989265919,
  0.0530679449439049,
  0.0531640872359276,
  0.0532602332532406,
  0.0533563792705536,
  0.0534525252878666,
  0.0535486750304699,
  0.0536448247730732,
  0.0537409745156765,
  0.0538371242582798,
  0.0539332777261734,
  0.054029431194067,
  0.0541255846619606,
  0.0542217418551445,
  0.0543178953230381,
  0.054414052516222,
  0.0545102134346962,
  0.0546063706278801,
  0.0547025315463543,
  0.0547986924648285,
  0.0548948533833027,
  0.0549910180270672,
  0.0550871826708317,
  0.0551833473145962,
  0.055279515683651,
  0.0553756803274155,
  0.0554718486964703,
  0.0555680170655251,
  0.0556641891598701,
  0.0557603612542152,
  0.0558565333485603,
  0.0559527054429054,
  0.0560488812625408,
  0.0561450570821762,
  0.0562412329018116,
  0.056337408721447,
  0.0564335882663727,
  0.0565297678112984,
  0.0566259473562241,
  0.05672213062644,
  0.056818313896656,
  0.056914497166872,
  0.057010680437088,
  0.0571068674325943,
  0.0572030544281006,
  0.0572992414236069,
  0.0573954321444035,
  0.0574916228652,
  0.0575878135859966,
  0.0576840043067932,
  0.0577801987528801,
  0.057876393198967,
  0.0579725876450539,
  0.058068785816431,
  0.0581649839878082,
  0.0582611821591854,
  0.0583573803305626,
  0.0584535822272301,
  0.0585497841238976,
  0.0586459897458553,
  0.0587421916425228,
  0.0588383972644806,
  0.0589346028864384,
  0.0590308122336864,
  0.0591270178556442,
  0.0592232272028923,
  0.0593194402754307,
  0.0594156496226788,
  0.0595118626952171,
  0.0596080757677555,
  0.0597042925655842,
  0.0598005093634129,
  0.0598967261612415,
  0.0599929429590702,
  0.0600891634821892,
  0.0601853840053082,
  0.0602816045284271,
  0.0603778287768364,
  0.0604740530252457,
  0.0605702772736549,
  0.0606665015220642,
  0.0607627294957638,
  0.0608589574694633,
  0.0609551891684532,
  0.0610514171421528,
  0.061147652566433,
  0.0612438842654228,
  0.0613401159644127,
  0.0614363513886929,
  0.0615325905382633,
  0.0616288259625435,
  0.061725065112114,
  0.0618213042616844,
  0.0619175434112549,
  0.0620137862861156,
  0.0621100291609764,
  0.0622062757611275,
  0.0623025186359882,
  0.0623987652361393,
  0.0624950155615807,
  0.0625912621617317,
  0.0626875162124634,
  0.0627837628126144,
  0.0628800168633461,
  0.0629762709140778,
  0.0630725249648094,
  0.0631687790155411,
  0.0632650405168533,
  0.063361294567585,
  0.0634575560688972,
  0.0635538175702095,
  0.0636500790715218,
  0.063746340572834,
  0.0638426020741463,
  0.0639388710260391,
  0.0640351325273514,
  0.0641314014792442,
  0.0642276704311371,
  0.0643239393830299,
  0.0644202083349228,
  0.0645164847373962,
  0.0646127611398697,
  0.0647090300917625,
  0.064805306494236,
  0.0649015828967094,
  0.0649978592991829,
  0.0650941431522369,
  0.0651904195547104,
  0.0652867034077644,
  0.0653829872608185,
  0.0654792711138725,
  0.0655755549669266,
  0.0656718462705612,
  0.0657681301236153,
  0.0658644214272499,
  0.0659607127308846,
  0.0660570040345192,
  0.0661532953381538,
  0.0662495866417885,
  0.0663458853960037,
  0.066442184150219,
  0.0665384829044342,
  0.0666347816586494,
  0.0667310804128647,
  0.0668273791670799,
  0.0669236853718758,
  0.067019984126091,
  0.0671162903308868,
  0.0672125965356827,
  0.0673089027404785,
  0.0674052163958549,
  0.0675015226006508,
  0.0675978362560272,
  0.0676941499114037,
  0.0677904635667801,
  0.0678867772221565,
  0.067983090877533,
  0.06807941198349,
  0.0681757256388664,
  0.0682720467448235,
  0.0683683678507805,
  0.0684646964073181,
  0.0685610175132751,
  0.0686573386192322,
  0.0687536671757698,
  0.0688499957323074,
  0.0689463242888451,
  0.0690426528453827,
  0.0691389888525009,
  0.0692353174090385,
  0.0693316534161568,
  0.069427989423275,
  0.0695243254303932,
  0.0696206614375114,
  0.0697170048952103,
  0.0698133409023285,
  0.0699096843600273,
  0.0700060278177261,
  0.070102371275425,
  0.0701987147331238,
  0.0702950656414032,
  0.070391409099102,
  0.0704877600073814,
  0.0705841109156609,
  0.0706804618239403,
  0.0707768201828003,
  0.0708731710910797,
  0.0709695294499397,
  0.0710658878087997,
  0.0711622461676598,
  0.0712586045265198,
  0.0713549628853798,
  0.0714513286948204,
  0.071547694504261,
  0.0716440603137016,
  0.0717404261231422,
  0.0718367919325829,
  0.0719331651926041,
  0.0720295310020447,
  0.0721259042620659,
  0.0722222775220871,
  0.0723186507821083,
  0.0724150314927101,
  0.0725114047527313,
  0.0726077854633331,
  0.0727041661739349,
  0.0728005468845367,
  0.0728969275951385,
  0.0729933083057404,
  0.0730896964669228,
  0.0731860846281052,
  0.0732824727892876,
  0.07337886095047,
  0.0734752491116524,
  0.0735716447234154,
  0.0736680403351784,
  0.0737644284963608,
  0.0738608315587044,
  0.0739572271704674,
  0.0740536227822304,
  0.074150025844574,
  0.0742464289069176,
  0.0743428319692612,
  0.0744392350316048,
  0.0745356380939484,
  0.0746320486068726,
  0.0747284516692162,
  0.0748248621821404,
  0.0749212726950645,
  0.0750176906585693,
  0.0751141011714935,
  0.0752105191349983,
  0.0753069370985031,
  0.0754033550620079,
  0.0754997730255127,
  0.0755961909890175,
  0.0756926164031029,
  0.0757890418171883,
  0.0758854672312737,
  0.075981892645359,
  0.0760783180594444,
  0.0761747509241104,
  0.0762711763381958,
  0.0763676092028618,
  0.0764640495181084,
  0.0765604823827744,
  0.0766569152474403,
  0.0767533555626869,
  0.0768497958779335,
  0.0769462361931801,
  0.0770426765084267,
  0.0771391242742538,
  0.0772355645895004,
  0.0773320123553276,
  0.0774284601211548,
  0.077524907886982,
  0.0776213631033897,
  0.0777178108692169,
  0.0778142660856247,
  0.0779107213020325,
  0.0780071765184402,
  0.078103631734848,
  0.0782000944018364,
  0.0782965570688248,
  0.0783930197358131,
  0.0784894824028015,
  0.0785859450697899,
  0.0786824151873589,
  0.0787788778543472,
  0.0788753479719162,
  0.0789718255400658,
  0.0790682956576347,
  0.0791647657752037,
  0.0792612433433533,
  0.0793577209115028,
  0.0794541984796524,
  0.079550676047802,
  0.0796471610665321,
  0.0797436460852623,
  0.0798401236534119,
  0.079936608672142,
  0.0800331011414528,
  0.080129586160183,
  0.0802260786294937,
  0.0803225710988045,
  0.0804190635681152,
  0.080515556037426,
  0.0806120559573174,
  0.0807085484266281,
  0.0808050483465195,
  0.0809015482664108,
  0.0809980556368828,
  0.0810945555567741,
  0.0811910629272461,
  0.081287570297718,
  0.08138407766819,
  0.081480585038662,
  0.0815770998597145,
  0.0816736072301865,
  0.081770122051239,
  0.0818666368722916,
  0.0819631591439247,
  0.0820596739649773,
  0.0821561962366104,
  0.0822527185082436,
  0.0823492407798767,
  0.0824457630515099,
  0.0825422927737236,
  0.0826388224959373,
  0.0827353447675705,
  0.0828318819403648,
  0.0829284116625786,
  0.0830249413847923,
  0.0831214785575867,
  0.083218015730381,
  0.0833145529031754,
  0.0834110975265503,
  0.0835076346993446,
  0.0836041793227196,
  0.0837007239460945,
  0.0837972685694695,
  0.083893820643425,
  0.0839903727173805,
  0.0840869173407555,
  0.084183469414711,
  0.0842800289392471,
  0.0843765810132027,
  0.0844731405377388,
  0.0845697000622749,
  0.0846662595868111,
  0.0847628191113472,
  0.0848593860864639,
  0.0849559456110001,
  0.0850525125861168,
  0.0851490795612335,
  0.0852456539869308,
  0.0853422209620476,
  0.0854387953877449,
  0.0855353698134422,
  0.0856319442391396,
  0.0857285261154175,
  0.0858251005411148,
  0.0859216824173927,
  0.0860182642936707,
  0.0861148536205292,
  0.0862114354968071,
  0.0863080248236656,
  0.0864046141505241,
  0.0865012034773827,
  0.0865977928042412,
  0.0866943895816803,
  0.0867909863591194,
  0.0868875831365585,
  0.0869841799139977,
  0.0870807766914368,
  0.0871773809194565,
  0.0872739851474762,
  0.0873705893754959,
  0.0874671936035156,
  0.0875638052821159,
  0.0876604095101357,
  0.087757021188736,
  0.0878536403179169,
  0.0879502519965172,
  0.0880468711256981,
  0.0881434828042984,
  0.0882401019334793,
  0.0883367285132408,
  0.0884333476424217,
  0.0885299742221832,
  0.0886266008019447,
  0.0887232273817062,
  0.0888198539614677,
  0.0889164879918098,
  0.0890131220221519,
  0.089109756052494,
  0.0892063900828362,
  0.0893030315637589,
  0.089399665594101,
  0.0894963070750237,
  0.0895929485559464,
  0.0896895974874496,
  0.0897862389683723,
  0.0898828878998756,
  0.0899795368313789,
  0.0900761857628822,
  0.0901728421449661,
  0.09026949852705,
  0.0903661474585533,
  0.0904628112912178,
  0.0905594676733017,
  0.0906561315059662,
  0.0907527878880501,
  0.0908494517207146,
  0.0909461230039597,
  0.0910427868366241,
  0.0911394581198692,
  0.0912361294031143,
  0.0913328006863594,
  0.0914294794201851,
  0.0915261507034302,
  0.0916228294372559,
  0.0917195081710815,
  0.0918161943554878,
  0.0919128730893135,
  0.0920095592737198,
  0.0921062454581261,
  0.0922029316425323,
  0.0922996252775192,
  0.0923963114619255,
  0.0924930050969124,
  0.0925896987318993,
  0.0926863998174667,
  0.0927830934524536,
  0.0928797945380211,
  0.0929764956235886,
  0.0930732041597366,
  0.0931699052453041,
  0.0932666137814522,
  0.0933633223176003,
  0.0934600308537483,
  0.093556746840477,
  0.0936534553766251,
  0.0937501713633537,
  0.093846894800663,
  0.0939436107873917,
  0.0940403342247009,
  0.0941370576620102,
  0.0942337810993195,
  0.0943305045366287,
  0.0944272354245186,
  0.0945239588618279,
  0.0946206897497177,
  0.0947174280881882,
  0.094814158976078,
  0.0949108973145485,
  0.095007635653019,
  0.0951043739914894,
  0.0952011197805405,
  0.0952978655695915,
  0.095394603908062,
  0.0954913571476936,
  0.0955881029367447,
  0.0956848561763763,
  0.095781609416008,
  0.0958783626556396,
  0.0959751158952713,
  0.0960718765854836,
  0.0961686372756958,
  0.0962653979659081,
  0.0963621586561203,
  0.0964589193463326,
  0.0965556874871254,
  0.0966524556279182,
  0.0967492312192917,
  0.0968459993600845,
  0.096942774951458,
  0.0970395505428314,
  0.0971363261342049,
  0.0972331091761589,
  0.0973298922181129,
  0.0974266678094864,
  0.097523458302021,
  0.0976202413439751,
  0.0977170318365097,
  0.0978138223290443,
  0.097910612821579,
  0.0980074033141136,
  0.0981042012572289,
  0.0982009992003441,
  0.0982977971434593,
  0.0983946025371552,
  0.0984914004802704,
  0.0985882058739662,
  0.0986850187182426,
  0.0987818241119385,
  0.0988786295056343,
  0.0989754423499107,
  0.0990722626447678,
  0.0991690754890442,
  0.0992658957839012,
  0.0993627086281776,
  0.0994595363736153,
  0.0995563566684723,
  0.0996531844139099,
  0.0997500047087669,
  0.0998468399047852,
  0.0999436676502228,
  0.100040502846241,
  0.100137330591679,
  0.100234173238277,
  0.100331008434296,
  0.100427851080894,
  0.100524686276913,
  0.100621528923512,
  0.100718379020691,
  0.10081522911787,
  0.10091207921505,
  0.101008929312229,
  0.101105779409409,
  0.101202629506588,
  0.101299487054348,
  0.101396352052689,
  0.101493209600449,
  0.101590067148209,
  0.10168693959713,
  0.10178379714489,
  0.101880669593811,
  0.101977542042732,
  0.102074407041073,
  0.102171286940575,
  0.102268159389496,
  0.102365039288998,
  0.102461919188499,
  0.102558799088001,
  0.102655678987503,
  0.102752566337585,
  0.102849453687668,
  0.10294634103775,
  0.103043228387833,
  0.103140130639076,
  0.103237017989159,
  0.103333920240402,
  0.103430822491646,
  0.103527717292309,
  0.103624619543552,
  0.103721521794796,
  0.10381843149662,
  0.103915341198444,
  0.104012250900269,
  0.104109160602093,
  0.104206070303917,
  0.104302987456322,
  0.104399912059307,
  0.104496829211712,
  0.104593746364117,
  0.104690670967102,
  0.104787603020668,
  0.104884527623653,
  0.104981459677219,
  0.105078391730785,
  0.105175316333771,
  0.105272263288498,
  0.105369187891483,
  0.10546612739563,
  0.105563066899776,
  0.105660021305084,
  0.105756960809231,
  0.105853907763958,
  0.105950862169266,
  0.106047809123993,
  0.106144763529301,
  0.106241717934608,
  0.106338672339916,
  0.106435626745224,
  0.106532588601112,
  0.106629557907581,
  0.10672651976347,
  0.106823489069939,
  0.106920458376408,
  0.107017427682877,
  0.107114396989346,
  0.107211366295815,
  0.107308350503445,
  0.107405327260494,
  0.107502311468124,
  0.107599288225174,
  0.107696279883385,
  0.107793271541595,
  0.107890248298645,
  0.107987247407436,
  0.108084239065647,
  0.108181230723858,
  0.108278229832649,
  0.108375228941441,
  0.108472228050232,
  0.108569227159023,
  0.108666241168976,
  0.108763240277767,
  0.108860246837139,
  0.108957260847092,
  0.109054282307625,
  0.109151288866997,
  0.10924831032753,
  0.109345331788063,
  0.109442353248596,
  0.109539367258549,
  0.109636403620243,
  0.109733417630196,
  0.109830446541309,
  0.109927490353584,
  0.110024519264698,
  0.110121548175812,
  0.110218591988087,
  0.110315628349781,
  0.110412672162056,
  0.110509723424911,
  0.110606759786606,
  0.110703811049461,
  0.110800862312317,
  0.110897913575172,
  0.110994972288609,
  0.111092023551464,
  0.1111890822649,
  0.111286140978336,
  0.111383199691772,
  0.11148027330637,
  0.111577332019806,
  0.111674398183823,
  0.11177147179842,
  0.111868537962437,
  0.111965619027615,
  0.112062700092793,
  0.11215977370739,
  0.112256862223148,
  0.112353943288326,
  0.112451016902924,
  0.112548112869263,
  0.112645201385021,
  0.11274228990078,
  0.112839378416538,
  0.112936481833458,
  0.113033577799797,
  0.113130681216717,
  0.113227777183056,
  0.113324880599976,
  0.113421991467476,
  0.113519102334976,
  0.113616213202477,
  0.113713316619396,
  0.113810442388058,
  0.113907553255558,
  0.114004671573639,
  0.11410178989172,
  0.114198908209801,
  0.114296041429043,
  0.114393167197704,
  0.114490300416946,
  0.114587433636189,
  0.11468455940485,
  0.114781700074673,
  0.114878840744495,
  0.114975981414318,
  0.115073122084141,
  0.115170262753963,
  0.115267410874367,
  0.11536455899477,
  0.115461707115173,
  0.115558862686157,
  0.115656018257141,
  0.115753166377544,
  0.115850329399109,
  0.115947499871254,
  0.116044662892818,
  0.116141833364964,
  0.116238988935947,
  0.116336159408092,
  0.116433337330818,
  0.116530507802963,
  0.11662769317627,
  0.116724871098995,
  0.116822049021721,
  0.116919226944447,
  0.117016419768333,
  0.117113597691059,
  0.117210790514946,
  0.117307990789413,
  0.1174051836133,
  0.117502376437187,
  0.117599576711655,
  0.117696776986122,
  0.11779397726059,
  0.117891177535057,
  0.117988392710686,
  0.118085600435734,
  0.118182808160782,
  0.118280030786991,
  0.118377238512039,
  0.118474461138248,
  0.118571676313877,
  0.118668898940086,
  0.118766129016876,
  0.118863359093666,
  0.118960589170456,
  0.119057819247246,
  0.119155049324036,
  0.119252286851406,
  0.119349531829357,
  0.119446769356728,
  0.119544006884098,
  0.11964125931263,
  0.11973849684,
  0.119835749268532,
  0.119933001697063,
  0.120030261576176,
  0.120127506554127,
  0.120224766433239,
  0.120322026312351,
  0.120419301092625,
  0.120516560971737,
  0.12061382830143,
  0.120711103081703,
  0.120808370411396,
  0.120905637741089,
  0.121002919971943,
  0.121100202202797,
  0.12119747698307,
  0.121294759213924,
  0.121392048895359,
  0.121489338576794,
  0.121586628258228,
  0.121683917939663,
  0.121781207621098,
  0.121878512203693,
  0.121975809335709,
  0.122073106467724,
  0.12217041105032,
  0.122267723083496,
  0.122365027666092,
  0.122462339699268,
  0.122559651732445,
  0.122656971216202,
  0.122754283249378,
  0.122851602733135,
  0.122948929667473,
  0.12304624915123,
  0.123143583536148,
  0.123240910470486,
  0.123338237404823,
  0.123435571789742,
  0.12353291362524,
  0.123630240559578,
  0.123727582395077,
  0.123824931681156,
  0.123922273516655,
  0.124019622802734,
  0.124116972088814,
  0.124214321374893,
  0.124311670660973,
  0.124409027397633,
  0.124506391584873,
  0.124603748321533,
  0.124701112508774,
  0.124798476696014,
  0.124895848333836,
  0.124993219971657,
  0.125090584158897,
  0.125187963247299,
  0.125285342335701,
  0.125382721424103,
  0.125480115413666,
  0.125577494502068,
  0.125674873590469,
  0.125772267580032,
  0.125869661569595,
  0.125967055559158,
  0.126064449548721,
  0.126161843538284,
  0.126259252429008,
  0.126356646418571,
  0.126454055309296,
  0.12655146420002,
  0.126648873090744,
  0.126746296882629,
  0.126843705773354,
  0.126941114664078,
  0.127038538455963,
  0.127135962247849,
  0.127233386039734,
  0.12733082473278,
  0.127428233623505,
  0.127525687217712,
  0.127623111009598,
  0.127720549702644,
  0.127817988395691,
  0.127915427088737,
  0.128012865781784,
  0.128110319375992,
  0.1282077729702,
  0.128305226564407,
  0.128402665257454,
  0.128500133752823,
  0.128597587347031,
  0.128695040941238,
  0.128792509436607,
  0.128889963030815,
  0.128987446427345,
  0.129084914922714,
  0.129182383418083,
  0.129279866814613,
  0.129377335309982,
  0.129474803805351,
  0.129572302103043,
  0.129669785499573,
  0.129767268896103,
  0.129864767193794,
  0.129962250590324,
  0.130059733986855,
  0.130157247185707,
  0.130254745483398,
  0.13035224378109,
  0.130449756979942,
  0.130547255277634,
  0.130644753575325,
  0.130742266774178,
  0.130839794874191,
  0.130937293171883,
  0.131034821271896,
  0.131132334470749,
  0.131229862570763,
  0.131327390670776,
  0.13142491877079,
  0.131522446870804,
  0.131619989871979,
  0.131717517971992,
  0.131815060973167,
  0.131912603974342,
  0.132010146975517,
  0.132107689976692,
  0.132205232977867,
  0.132302790880203,
  0.132400333881378,
  0.132497906684875,
  0.132595464587212,
  0.132693022489548,
  0.132790580391884,
  0.132888153195381,
  0.132985711097717,
  0.133083283901215,
  0.133180856704712,
  0.133278429508209,
  0.133376017212868,
  0.133473590016365,
  0.133571162819862,
  0.133668765425682,
  0.133766353130341,
  0.133863940834999,
  0.133961528539658,
  0.134059131145477,
  0.134156733751297,
  0.134254336357117,
  0.134351924061775,
  0.134449526667595,
  0.134547144174576,
  0.134644746780396,
  0.134742364287376,
  0.134839981794357,
  0.134937599301338,
  0.135035216808319,
  0.1351328343153,
  0.135230466723442,
  0.135328099131584,
  0.135425731539726,
  0.135523363947868,
  0.13562099635601,
  0.135718643665314,
  0.135816276073456,
  0.135913923382759,
  0.136011570692062,
  0.136109218001366,
  0.136206865310669,
  0.136304512619972,
  0.136402174830437,
  0.136499837040901,
  0.136597499251366,
  0.13669516146183,
  0.136792823672295,
  0.13689050078392,
  0.136988162994385,
  0.13708584010601,
  0.137183517217636,
  0.137281194329262,
  0.137378886342049,
  0.137476563453674,
  0.137574255466461,
  0.137671932578087,
  0.137769639492035,
  0.137867331504822,
  0.137965023517609,
  0.138062730431557,
  0.138160437345505,
  0.138258144259453,
  0.13835583627224,
  0.138453543186188,
  0.138551265001297,
  0.138648986816406,
  0.138746693730354,
  0.138844415545464,
  0.138942137360573,
  0.139039874076843,
  0.139137595891953,
  0.139235332608223,
  0.139333054423332,
  0.139430806040764,
  0.139528542757034,
  0.139626279473305,
  0.139724016189575,
  0.139821767807007,
  0.139919519424438,
  0.14001727104187,
  0.140115022659302,
  0.140212789177895,
  0.140310555696487,
  0.140408307313919,
  0.140506073832512,
  0.140603840351105,
  0.140701606869698,
  0.14079937338829,
  0.140897154808044,
  0.140994936227798,
  0.141092717647552,
  0.141190499067307,
  0.141288295388222,
  0.141386076807976,
  0.141483873128891,
  0.141581654548645,
  0.141679465770721,
  0.141777262091637,
  0.141875058412552,
  0.141972869634628,
  0.142070680856705,
  0.142168492078781,
  0.142266303300858,
  0.142364114522934,
  0.14246192574501,
  0.142559751868248,
  0.142657577991486,
  0.142755404114723,
  0.142853230237961,
  0.142951056361198,
  0.143048897385597,
  0.143146738409996,
  0.143244579434395,
  0.143342420458794,
  0.143440261483192,
  0.143538117408752,
  0.143635958433151,
  0.143733814358711,
  0.143831670284271,
  0.143929526209831,
  0.144027397036552,
  0.144125252962112,
  0.144223123788834,
  0.144320994615555,
  0.144418865442276,
  0.144516736268997,
  0.144614607095718,
  0.144712492823601,
  0.144810378551483,
  0.144908264279366,
  0.145006150007248,
  0.14510403573513,
  0.145201936364174,
  0.145299836993217,
  0.1453977227211,
  0.145495623350143,
  0.145593538880348,
  0.145691454410553,
  0.145789355039597,
  0.145887270569801,
  0.145985186100006,
  0.146083101630211,
  0.146181017160416,
  0.146278947591782,
  0.146376878023148,
  0.146474793553352,
  0.14657273888588,
  0.146670669317245,
  0.146768614649773,
  0.146866545081139,
  0.146964490413666,
  0.147062435746193,
  0.147160395979881,
  0.147258341312408,
  0.147356286644936,
  0.147454246878624,
  0.147552207112312,
  0.147650167346001,
  0.14774814248085,
  0.147846102714539,
  0.147944077849388,
  0.148042052984238,
  0.148140028119087,
  0.148238003253937,
  0.148335993289948,
  0.148433968424797,
  0.148531958460808,
  0.148629948496819,
  0.148727938532829,
  0.148825943470001,
  0.148923933506012,
  0.149021938443184,
  0.149119943380356,
  0.149217948317528,
  0.1493159532547,
  0.149413973093033,
  0.149511992931366,
  0.149610012769699,
  0.149708032608032,
  0.149806052446365,
  0.14990408718586,
  0.150002107024193,
  0.150100141763687,
  0.150198176503181,
  0.150296211242676,
  0.150394260883331,
  0.150492295622826,
  0.150590345263481,
  0.150688394904137,
  0.150786444544792,
  0.150884494185448,
  0.150982558727264,
  0.151080623269081,
  0.151178672909737,
  0.151276752352715,
  0.151374816894531,
  0.151472896337509,
  0.151570975780487,
  0.151669055223465,
  0.151767134666443,
  0.151865214109421,
  0.151963293552399,
  0.152061387896538,
  0.152159482240677,
  0.152257576584816,
  0.152355670928955,
  0.152453765273094,
  0.152551874518394,
  0.152649983763695,
  0.152748093008995,
  0.152846202254295,
  0.152944326400757,
  0.153042435646057,
  0.153140559792519,
  0.15323868393898,
  0.153336808085442,
  0.153434947133064,
  0.153533071279526,
  0.153631195425987,
  0.15372933447361,
  0.153827473521233,
  0.153925627470016,
  0.154023766517639,
  0.154121920466423,
  0.154220074415207,
  0.154318228363991,
  0.154416397213936,
  0.15451455116272,
  0.154612705111504,
  0.154710873961449,
  0.154809042811394,
  0.1549072265625,
  0.155005395412445,
  0.155103579163551,
  0.155201762914658,
  0.155299946665764,
  0.15539813041687,
  0.155496314167976,
  0.155594512820244,
  0.155692711472511,
  0.155790910124779,
  0.155889108777046,
  0.155987322330475,
  0.156085535883904,
  0.156183734536171,
  0.1562819480896,
  0.156380176544189,
  0.156478390097618,
  0.156576603651047,
  0.156674847006798,
  0.156773075461388,
  0.156871303915977,
  0.156969532370567,
  0.157067775726318,
  0.157166004180908,
  0.157264247536659,
  0.157362505793571,
  0.157460749149323,
  0.157559007406235,
  0.157657265663147,
  0.157755523920059,
  0.157853782176971,
  0.157952040433884,
  0.158050313591957,
  0.158148586750031,
  0.158246845006943,
  0.158345133066177,
  0.158443406224251,
  0.158541694283485,
  0.15863998234272,
  0.158738255500793,
  0.158836543560028,
  0.158934846520424,
  0.15903314948082,
  0.159131452441216,
  0.159229755401611,
  0.159328058362007,
  0.159426361322403,
  0.15952467918396,
  0.159622997045517,
  0.159721314907074,
  0.159819632768631,
  0.159917950630188,
  0.160016283392906,
  0.160114616155624,
  0.160212948918343,
  0.160311281681061,
  0.160409614443779,
  0.160507962107658,
  0.160606309771538,
  0.160704657435417,
  0.160803005099297,
  0.160901352763176,
  0.160999715328217,
  0.161098077893257,
  0.161196440458298,
  0.161294803023338,
  0.16139318048954,
  0.161491543054581,
  0.161589935421944,
  0.161688312888145,
  0.161786690354347,
  0.161885067820549,
  0.161983460187912,
  0.162081852555275,
  0.162180244922638,
  0.162278637290001,
  0.162377044558525,
  0.162475451827049,
  0.162573844194412,
  0.162672266364098,
  0.162770673632622,
  0.162869095802307,
  0.162967503070831,
  0.163065925240517,
  0.163164347410202,
  0.163262784481049,
  0.163361206650734,
  0.163459643721581,
  0.163558080792427,
  0.163656517863274,
  0.163754969835281,
  0.163853406906128,
  0.163951858878136,
  0.164050325751305,
  0.164148762822151,
  0.16424722969532,
  0.164345696568489,
  0.164444163441658,
  0.164542615413666,
  0.164641097187996,
  0.164739564061165,
  0.164838045835495,
  0.164936527609825,
  0.165035009384155,
  0.165133506059647,
  0.165231987833977,
  0.165330484509468,
  0.165428981184959,
  0.165527477860451,
  0.165625974535942,
  0.165724486112595,
  0.165822982788086,
  0.165921494364738,
  0.166020020842552,
  0.166118547320366,
  0.166217058897018,
  0.166315585374832,
  0.166414111852646,
  0.16651263833046,
  0.166611164808273,
  0.166709706187248,
  0.166808247566223,
  0.166906788945198,
  0.167005345225334,
  0.167103886604309,
  0.167202442884445,
  0.167300999164581,
  0.167399555444717,
  0.167498126626015,
  0.167596682906151,
  0.167695254087448,
  0.167793825268745,
  0.167892396450043,
  0.16799096763134,
  0.168089553713799,
  0.168188139796257,
  0.168286725878716,
  0.168385326862335,
  0.168483912944794,
  0.168582513928413,
  0.168681114912033,
  0.168779715895653,
  0.168878316879272,
  0.168976932764053,
  0.169075533747673,
  0.169174164533615,
  0.169272780418396,
  0.169371396303177,
  0.169470027089119,
  0.1695686429739,
  0.169667288661003,
  0.169765919446945,
  0.169864565134048,
  0.169963195919991,
  0.170061856508255,
  0.170160487294197,
  0.170259147882462,
  0.170357793569565,
  0.170456454157829,
  0.170555114746094,
  0.170653775334358,
  0.170752450823784,
  0.17085112631321,
  0.170949801802635,
  0.171048477292061,
  0.171147152781487,
  0.171245843172073,
  0.171344518661499,
  0.171443209052086,
  0.171541914343834,
  0.171640604734421,
  0.171739295125008,
  0.171838015317917,
  0.171936705708504,
  0.172035425901413,
  0.172134146094322,
  0.17223285138607,
  0.172331571578979,
  0.172430291771889,
  0.172529026865959,
  0.172627747058868,
  0.172726482152939,
  0.172825217247009,
  0.172923967242241,
  0.173022702336311,
  0.173121437430382,
  0.173220187425613,
  0.173318952322006,
  0.173417702317238,
  0.173516467213631,
  0.173615217208862,
  0.173713997006416,
  0.173812761902809,
  0.173911526799202,
  0.174010306596756,
  0.17410908639431,
  0.174207866191864,
  0.174306645989418,
  0.174405440688133,
  0.174504235386848,
  0.174603015184402,
  0.174701824784279,
  0.174800619482994,
  0.17489942908287,
  0.174998238682747,
  0.175097048282623,
  0.1751958578825,
  0.175294682383537,
  0.175393506884575,
  0.175492331385612,
  0.17559115588665,
  0.175689995288849,
  0.175788819789886,
  0.175887659192085,
  0.175986498594284,
  0.176085352897644,
  0.176184192299843,
  0.176283046603203,
  0.176381900906563,
  0.176480755209923,
  0.176579624414444,
  0.176678478717804,
  0.176777347922325,
  0.176876217126846,
  0.176975101232529,
  0.177073985338211,
  0.177172854542732,
  0.177271738648415,
  0.177370622754097,
  0.177469521760941,
  0.177568420767784,
  0.177667319774628,
  0.177766218781471,
  0.177865132689476,
  0.17796403169632,
  0.178062945604324,
  0.178161859512329,
  0.178260773420334,
  0.1783597022295,
  0.178458631038666,
  0.178557559847832,
  0.178656488656998,
  0.178755417466164,
  0.178854361176491,
  0.178953304886818,
  0.179052248597145,
  0.179151207208633,
  0.179250150918961,
  0.179349109530449,
  0.179448068141937,
  0.179547026753426,
  0.179646000266075,
  0.179744973778725,
  0.179843947291374,
  0.179942920804024,
  0.180041894316673,
  0.180140882730484,
  0.180239871144295,
  0.180338859558105,
  0.180437847971916,
  0.180536851286888,
  0.18063585460186,
  0.180734843015671,
  0.180833861231804,
  0.180932864546776,
  0.181031882762909,
  0.181130900979042,
  0.181229919195175,
  0.181328952312469,
  0.181427970528603,
  0.181527003645897,
  0.181626036763191,
  0.181725084781647,
  0.181824117898941,
  0.181923165917397,
  0.182022213935852,
  0.182121276855469,
  0.182220324873924,
  0.18231937289238,
  0.182418435811996,
  0.182517513632774,
  0.182616576552391,
  0.182715654373169,
  0.182814732193947,
  0.182913810014725,
  0.183012887835503,
  0.183111980557442,
  0.183211073279381,
  0.18331016600132,
  0.183409258723259,
  0.183508366346359,
  0.183607459068298,
  0.183706566691399,
  0.183805674314499,
  0.18390479683876,
  0.184003904461861,
  0.184103026986122,
  0.184202164411545,
  0.184301286935806,
  0.184400424361229,
  0.184499561786652,
  0.184598699212074,
  0.184697836637497,
  0.18479697406292,
  0.184896126389503,
  0.184995293617249,
  0.185094445943832,
  0.185193598270416,
  0.185292765498161,
  0.185391932725906,
  0.185491114854813,
  0.185590282082558,
  0.185689464211464,
  0.18578864634037,
  0.185887813568115,
  0.185987010598183,
  0.186086192727089,
  0.186185404658318,
  0.186284601688385,
  0.186383798718452,
  0.186483010649681,
  0.18658222258091,
  0.186681434512138,
  0.186780646443367,
  0.186879873275757,
  0.186979085206985,
  0.187078326940536,
  0.187177553772926,
  0.187276780605316,
  0.187376022338867,
  0.187475264072418,
  0.187574505805969,
  0.187673762440681,
  0.187773004174232,
  0.187872275710106,
  0.187971532344818,
  0.18807078897953,
  0.188170060515404,
  0.188269332051277,
  0.188368603587151,
  0.188467875123024,
  0.188567161560059,
  0.188666433095932,
  0.188765734434128,
  0.188865020871162,
  0.188964322209358,
  0.189063623547554,
  0.18916292488575,
  0.189262226223946,
  0.189361542463303,
  0.189460843801498,
  0.189560174942017,
  0.189659491181374,
  0.189758807420731,
  0.189858138561249,
  0.189957469701767,
  0.190056815743446,
  0.190156146883965,
  0.190255492925644,
  0.190354824066162,
  0.190454185009003,
  0.190553545951843,
  0.190652891993523,
  0.190752252936363,
  0.190851613879204,
  0.190950989723206,
  0.191050365567207,
  0.191149726510048,
  0.191249117255211,
  0.191348493099213,
  0.191447883844376,
  0.191547274589539,
  0.191646665334702,
  0.191746056079865,
  0.191845461726189,
  0.191944867372513,
  0.192044273018837,
  0.192143678665161,
  0.192243099212646,
  0.192342519760132,
  0.192441940307617,
  0.192541375756264,
  0.192640796303749,
  0.192740231752396,
  0.192839667201042,
  0.192939102649689,
  0.193038552999496,
  0.193138003349304,
  0.193237453699112,
  0.19333690404892,
  0.193436369299889,
  0.193535834550858,
  0.193635299801826,
  0.193734765052795,
  0.193834245204926,
  0.193933725357056,
  0.194033205509186,
  0.194132685661316,
  0.194232165813446,
  0.194331675767899,
  0.194431155920029,
  0.194530665874481,
  0.194630175828934,
  0.194729670882225,
  0.194829195737839,
  0.194928705692291,
  0.195028215646744,
  0.195127740502357,
  0.195227265357971,
  0.195326805114746,
  0.19542632997036,
  0.195525869727135,
  0.19562540948391,
  0.195724949240685,
  0.195824503898621,
  0.195924043655396,
  0.196023613214493,
  0.196123167872429,
  0.196222737431526,
  0.196322306990623,
  0.196421876549721,
  0.196521446108818,
  0.196621015667915,
  0.196720615029335,
  0.196820184588432,
  0.196919783949852,
  0.197019383311272,
  0.19711896777153,
  0.19721856713295,
  0.197318181395531,
  0.197417795658112,
  0.197517395019531,
  0.197617009282112,
  0.197716623544693,
  0.197816252708435,
  0.197915896773338,
  0.19801552593708,
  0.198115155100822,
  0.198214784264565,
  0.198314428329468,
  0.198414087295532,
  0.198513731360435,
  0.198613375425339,
  0.198713034391403,
  0.198812693357468,
  0.198912367224693,
  0.199012041091919,
  0.199111714959145,
  0.19921138882637,
  0.199311062693596,
  0.199410751461983,
  0.19951044023037,
  0.199610128998756,
  0.199709832668304,
  0.199809536337852,
  0.199909225106239,
  0.200008943676949,
  0.200108647346497,
  0.200208365917206,
  0.200308084487915,
  0.200407803058624,
  0.200507536530495,
  0.200607255101204,
  0.200706988573074,
  0.200806736946106,
  0.200906470417976,
  0.201006218791008,
  0.20110596716404,
  0.201205715537071,
  0.201305478811264,
  0.201405242085457,
  0.20150500535965,
  0.201604768633842,
  0.201704546809196,
  0.20180432498455,
  0.201904103159904,
  0.20200389623642,
  0.202103674411774,
  0.202203467488289,
  0.202303260564804,
  0.202403053641319,
  0.202502861618996,
  0.202602669596672,
  0.202702477574348,
  0.202802300453186,
  0.202902123332024,
  0.203001946210861,
  0.203101769089699,
  0.203201606869698,
  0.203301429748535,
  0.203401267528534,
  0.203501105308533,
  0.203600957989693,
  0.203700810670853,
  0.203800663352013,
  0.203900516033173,
  0.204000383615494,
  0.204100251197815,
  0.204200118780136,
  0.204299986362457,
  0.20439986884594,
  0.204499751329422,
  0.204599633812904,
  0.204699516296387,
  0.20479941368103,
  0.204899311065674,
  0.204999208450317,
  0.205099120736122,
  0.205199033021927,
  0.205298945307732,
  0.205398857593536,
  0.205498784780502,
  0.205598697066307,
  0.205698624253273,
  0.2057985663414,
  0.205898493528366,
  0.205998435616493,
  0.20609837770462,
  0.206198334693909,
  0.206298276782036,
  0.206398233771324,
  0.206498205661774,
  0.206598162651062,
  0.206698134541512,
  0.206798106431961,
  0.206898078322411,
  0.206998065114021,
  0.207098037004471,
  0.207198023796082,
  0.207298025488853,
  0.207398027181625,
  0.207498013973236,
  0.207598015666008,
  0.207698032259941,
  0.207798033952713,
  0.207898065447807,
  0.20799808204174,
  0.208098098635674,
  0.208198130130768,
  0.208298161625862,
  0.208398193120956,
  0.208498224616051,
  0.208598285913467,
  0.208698332309723,
  0.208798378705978,
  0.208898425102234,
  0.208998486399651,
  0.209098562598228,
  0.209198623895645,
  0.209298700094223,
  0.209398776292801,
  0.209498852491379,
  0.209598928689957,
  0.209699019789696,
  0.209799110889435,
  0.209899216890335,
  0.209999307990074,
  0.210099413990974,
  0.210199519991875,
  0.210299625992775,
  0.210399746894836,
  0.210499867796898,
  0.210599988698959,
  0.210700124502182,
  0.210800245404243,
  0.210900396108627,
  0.21100053191185,
  0.211100667715073,
  0.211200818419456,
  0.21130096912384,
  0.211401134729385,
  0.211501285433769,
  0.211601465940475,
  0.211701616644859,
  0.211801797151566,
  0.211901962757111,
  0.212002143263817,
  0.212102338671684,
  0.212202534079552,
  0.212302714586258,
  0.212402924895287,
  0.212503120303154,
  0.212603315711021,
  0.21270352602005,
  0.21280375123024,
  0.212903961539268,
  0.213004186749458,
  0.213104411959648,
  0.213204637169838,
  0.213304877281189,
  0.21340511739254,
  0.213505357503891,
  0.213605597615242,
  0.213705852627754,
  0.213806107640266,
  0.213906362652779,
  0.214006632566452,
  0.214106902480125,
  0.214207172393799,
  0.214307442307472,
  0.214407727122307,
  0.21450799703598,
  0.214608296751976,
  0.214708581566811,
  0.214808881282806,
  0.214909180998802,
  0.215009480714798,
  0.215109795331955,
  0.215210095047951,
  0.215310424566269,
  0.215410739183426,
  0.215511053800583,
  0.215611383318901,
  0.215711712837219,
  0.215812057256699,
  0.215912401676178,
  0.216012746095657,
  0.216113105416298,
  0.216213449835777,
  0.216313809156418,
  0.216414168477058,
  0.21651454269886,
  0.216614916920662,
  0.216715276241302,
  0.216815665364265,
  0.216916039586067,
  0.21701642870903,
  0.217116817831993,
  0.217217221856117,
  0.217317625880241,
  0.217418015003204,
  0.21751843392849,
  0.217618837952614,
  0.217719256877899,
  0.217819675803185,
  0.21792009472847,
  0.218020528554916,
  0.218120962381363,
  0.218221396207809,
  0.218321844935417,
  0.218422293663025,
  0.218522742390633,
  0.21862319111824,
  0.218723654747009,
  0.218824103474617,
  0.218924582004547,
  0.219025045633316,
  0.219125524163246,
  0.219226002693176,
  0.219326496124268,
  0.219426974654198,
  0.219527468085289,
  0.21962796151638,
  0.219728469848633,
  0.219828963279724,
  0.219929486513138,
  0.22002999484539,
  0.220130503177643,
  0.220231026411057,
  0.220331564545631,
  0.220432087779045,
  0.22053262591362,
  0.220633164048195,
  0.22073370218277,
  0.220834255218506,
  0.220934793353081,
  0.221035361289978,
  0.221135914325714,
  0.221236482262611,
  0.221337050199509,
  0.221437618136406,
  0.221538200974464,
  0.221638783812523,
  0.221739366650581,
  0.221839964389801,
  0.221940547227859,
  0.222041144967079,
  0.222141742706299,
  0.22224235534668,
  0.222342967987061,
  0.222443595528603,
  0.222544208168983,
  0.222644835710526,
  0.222745463252068,
  0.22284609079361,
  0.222946733236313,
  0.223047375679016,
  0.223148018121719,
  0.223248675465584,
  0.223349317908287,
  0.223449975252151,
  0.223550632596016,
  0.223651304841042,
  0.223751977086067,
  0.223852664232254,
  0.22395333647728,
  0.224054023623466,
  0.224154710769653,
  0.22425539791584,
  0.224356099963188,
  0.224456802010536,
  0.224557504057884,
  0.224658221006393,
  0.224758923053741,
  0.224859654903412,
  0.224960386753082,
  0.225061103701591,
  0.225161835551262,
  0.225262567400932,
  0.225363314151764,
  0.225464060902596,
  0.225564807653427,
  0.225665554404259,
  0.225766316056252,
  0.225867077708244,
  0.225967854261398,
  0.226068615913391,
  0.226169407367706,
  0.22627018392086,
  0.226370960474014,
  0.226471751928329,
  0.226572543382645,
  0.22667333483696,
  0.226774156093597,
  0.226874947547913,
  0.226975753903389,
  0.227076575160027,
  0.227177396416664,
  0.227278217673302,
  0.2273790538311,
  0.227479875087738,
  0.227580726146698,
  0.227681562304497,
  0.227782413363457,
  0.227883264422417,
  0.227984115481377,
  0.228084966540337,
  0.228185847401619,
  0.228286698460579,
  0.228387579321861,
  0.228488445281982,
  0.228589326143265,
  0.228690221905708,
  0.228791102766991,
  0.228892013430595,
  0.228992894291878,
  0.229093804955482,
  0.229194715619087,
  0.229295626282692,
  0.229396536946297,
  0.229497477412224,
  0.229598388075829,
  0.229699313640594,
  0.229800254106522,
  0.229901194572449,
  0.230002135038376,
  0.230103090405464,
  0.230204045772552,
  0.23030498623848,
  0.230405956506729,
  0.230506926774979,
  0.230607897043228,
  0.230708867311478,
  0.230809852480888,
  0.230910822749138,
  0.23101182281971,
  0.23111280798912,
  0.231213808059692,
  0.231314808130264,
  0.231415808200836,
  0.231516823172569,
  0.231617838144302,
  0.231718853116035,
  0.23181988298893,
  0.231920912861824,
  0.232021942734718,
  0.232122972607613,
  0.232224017381668,
  0.232325077056885,
  0.23242612183094,
  0.232527181506157,
  0.232628241181374,
  0.23272930085659,
  0.232830375432968,
  0.232931435108185,
  0.233032524585724,
  0.233133599162102,
  0.233234688639641,
  0.23333577811718,
  0.23343688249588,
  0.23353798687458,
  0.233639076352119,
  0.233740195631981,
  0.233841314911842,
  0.233942419290543,
  0.234043553471565,
  0.234144672751427,
  0.234245806932449,
  0.234346941113472,
  0.234448090195656,
  0.234549224376678,
  0.234650373458862,
  0.234751537442207,
  0.234852701425552,
  0.234953865408897,
  0.235055029392242,
  0.235156193375587,
  0.235257387161255,
  0.235358566045761,
  0.235459744930267,
  0.235560938715935,
  0.235662147402763,
  0.235763341188431,
  0.235864534974098,
  0.235965743660927,
  0.236066967248917,
  0.236168190836906,
  0.236269414424896,
  0.236370638012886,
  0.236471876502037,
  0.236573114991188,
  0.236674353480339,
  0.23677559196949,
  0.236876845359802,
  0.236978098750114,
  0.237079367041588,
  0.237180635333061,
  0.237281903624535,
  0.237383171916008,
  0.237484455108643,
  0.237585723400116,
  0.237687021493912,
  0.237788304686546,
  0.237889602780342,
  0.237990915775299,
  0.238092213869095,
  0.238193526864052,
  0.238294839859009,
  0.238396152853966,
  0.238497495651245,
  0.238598823547363,
  0.238700151443481,
  0.238801494240761,
  0.23890283703804,
  0.23900417983532,
  0.23910553753376,
  0.239206895232201,
  0.239308252930641,
  0.239409625530243,
  0.239510983228683,
  0.239612370729446,
  0.239713743329048,
  0.239815145730972,
  0.239916533231735,
  0.240017920732498,
  0.240119323134422,
  0.240220725536346,
  0.240322127938271,
  0.240423545241356,
  0.240524962544441,
  0.240626394748688,
  0.240727812051773,
  0.24082924425602,
  0.240930676460266,
  0.241032123565674,
  0.241133570671082,
  0.241235017776489,
  0.241336479783058,
  0.241437941789627,
  0.241539403796196,
  0.241640865802765,
  0.241742342710495,
  0.241843819618225,
  0.241945311427116,
  0.242046803236008,
  0.242148295044899,
  0.24224978685379,
  0.242351293563843,
  0.242452800273895,
  0.242554306983948,
  0.242655813694,
  0.242757350206375,
  0.242858871817589,
  0.242960393428802,
  0.243061944842339,
  0.243163481354713,
  0.243265017867088,
  0.243366569280624,
  0.243468135595322,
  0.243569687008858,
  0.243671253323555,
  0.243772819638252,
  0.24387438595295,
  0.243975967168808,
  0.244077548384666,
  0.244179144501686,
  0.244280740618706,
  0.244382336735725,
  0.244483932852745,
  0.244585543870926,
  0.244687154889107,
  0.244788765907288,
  0.24489039182663,
  0.244992017745972,
  0.245093643665314,
  0.245195284485817,
  0.24529692530632,
  0.245398566126823,
  0.245500221848488,
  0.245601862668991,
  0.245703533291817,
  0.245805189013481,
  0.245906859636307,
  0.246008545160294,
  0.246110215783119,
  0.246211901307106,
  0.246313586831093,
  0.246415287256241,
  0.246516972780228,
  0.246618673205376,
  0.246720388531685,
  0.246822103857994,
  0.246923819184303,
  0.247025534510612,
  0.247127264738083,
  0.247228994965553,
  0.247330725193024,
  0.247432470321655,
  0.247534215450287,
  0.24763597548008,
  0.247737735509872,
  0.247839495539665,
  0.247941255569458,
  0.248043015599251,
  0.248144805431366,
  0.24824658036232,
  0.248348355293274,
  0.248450145125389,
  0.248551934957504,
  0.248653739690781,
  0.248755544424057,
  0.248857364058495,
  0.248959168791771,
  0.249060988426208,
  0.249162808060646,
  0.249264642596245,
  0.249366477131844,
  0.249468311667442,
  0.249570146203041,
  0.249671995639801,
  0.249773859977722,
  0.249875709414482,
  0.249977573752403,
  0.250079452991486,
  0.250181317329407,
  0.250283181667328,
  0.250385075807571,
  0.250486969947815,
  0.250588864088058,
  0.250690758228302,
  0.250792652368546,
  0.250894546508789,
  0.250996470451355,
  0.251098394393921,
  0.251200318336487,
  0.251302242279053,
  0.251404166221619,
  0.251506090164185,
  0.251608043909073,
  0.251709967851639,
  0.251811951398849,
  0.251913875341415,
  0.252015858888626,
  0.252117812633514,
  0.252219796180725,
  0.252321749925613,
  0.252423733472824,
  0.252525717020035,
  0.252627730369568,
  0.252729713916779,
  0.252831697463989,
  0.252933710813522,
  0.253035724163055,
  0.253137737512589,
  0.253239750862122,
  0.253341794013977,
  0.25344380736351,
  0.253545850515366,
  0.253647893667221,
  0.253749936819077,
  0.253851979970932,
  0.25395405292511,
  0.254056096076965,
  0.254158169031143,
  0.254260241985321,
  0.254362314939499,
  0.254464387893677,
  0.254566460847855,
  0.254668563604355,
  0.254770636558533,
  0.254872739315033,
  0.254974871873856,
  0.255076974630356,
  0.255179077386856,
  0.255281209945679,
  0.255383312702179,
  0.255485445261002,
  0.255587577819824,
  0.255689740180969,
  0.255791872739792,
  0.255894005298615,
  0.25599616765976,
  0.256098330020905,
  0.25620049238205,
  0.256302684545517,
  0.256404846906662,
  0.256507009267807,
  0.256609201431274,
  0.256711393594742,
  0.256813585758209,
  0.256915777921677,
  0.257017999887466,
  0.257120192050934,
  0.257222414016724,
  0.257324635982513,
  0.257426857948303,
  0.257529079914093,
  0.257631331682205,
  0.257733583450317,
  0.257835805416107,
  0.257938057184219,
  0.258040308952332,
  0.258142590522766,
  0.258244842290878,
  0.258347123861313,
  0.258449375629425,
  0.25855165719986,
  0.258653938770294,
  0.258756250143051,
  0.258858531713486,
  0.258960843086243,
  0.259063154459,
  0.259165465831757,
  0.259267777204514,
  0.259370088577271,
  0.25947242975235,
  0.259574741125107,
  0.259677082300186,
  0.259779423475266,
  0.259881764650345,
  0.259984135627747,
  0.260086476802826,
  0.260188847780228,
  0.260291218757629,
  0.260393589735031,
  0.260495960712433,
  0.260598331689835,
  0.260700732469559,
  0.260803133249283,
  0.260905534029007,
  0.261007934808731,
  0.261110335588455,
  0.261212736368179,
  0.261315166950226,
  0.26141756772995,
  0.261519998311996,
  0.261622458696365,
  0.261724889278412,
  0.261827319860458,
  0.261929780244827,
  0.262032240629196,
  0.262134701013565,
  0.262237161397934,
  0.262339621782303,
  0.262442111968994,
  0.262544572353363,
  0.262647062540054,
  0.262749552726746,
  0.262852042913437,
  0.262954562902451,
  0.263057053089142,
  0.263159573078156,
  0.263262093067169,
  0.263364613056183,
  0.263467133045197,
  0.26356965303421,
  0.263672202825546,
  0.263774752616882,
  0.263877302408218,
  0.263979852199554,
  0.264082401990891,
  0.264184951782227,
  0.264287531375885,
  0.264390110969543,
  0.264492690563202,
  0.26459527015686,
  0.264697849750519,
  0.264800429344177,
  0.264903038740158,
  0.265005648136139,
  0.26510825753212,
  0.265210866928101,
  0.265313476324081,
  0.265416115522385,
  0.265518754720688,
  0.265621393918991,
  0.265724033117294,
  0.265826672315598,
  0.265929311513901,
  0.266031980514526,
  0.266134649515152,
  0.266237288713455,
  0.266339987516403,
  0.266442656517029,
  0.266545325517654,
  0.266648024320602,
  0.26675072312355,
  0.266853421926498,
  0.266956120729446,
  0.267058819532394,
  0.267161548137665,
  0.267264246940613,
  0.267366975545883,
  0.267469733953476,
  0.267572462558746,
  0.267675191164017,
  0.267777949571609,
  0.26788067817688,
  0.267983436584473,
  0.268086224794388,
  0.268188983201981,
  0.268291741609573,
  0.268394529819489,
  0.268497318029404,
  0.268600076436996,
  0.268702894449234,
  0.268805682659149,
  0.268908500671387,
  0.269011288881302,
  0.269114106893539,
  0.269216924905777,
  0.269319772720337,
  0.269422590732574,
  0.269525438547134,
  0.269628256559372,
  0.269731104373932,
  0.269833952188492,
  0.269936829805374,
  0.270039677619934,
  0.270142555236816,
  0.270245432853699,
  0.270348310470581,
  0.270451188087463,
  0.270554065704346,
  0.27065697312355,
  0.270759880542755,
  0.27086278796196,
  0.270965695381165,
  0.271068602800369,
  0.271171510219574,
  0.271274447441101,
  0.271377384662628,
  0.271480321884155,
  0.271583259105682,
  0.271686196327209,
  0.271789163351059,
  0.271892130374908,
  0.271995067596436,
  0.272098064422607,
  0.272201031446457,
  0.272303998470306,
  0.272406995296478,
  0.27250999212265,
  0.272612988948822,
  0.272715985774994,
  0.272818982601166,
  0.27292200922966,
  0.273025006055832,
  0.273128032684326,
  0.27323105931282,
  0.273334115743637,
  0.273437142372131,
  0.273540198802948,
  0.273643225431442,
  0.273746311664581,
  0.273849368095398,
  0.273952424526215,
  0.274055480957031,
  0.27415856719017,
  0.274261653423309,
  0.274364739656448,
  0.274467825889587,
  0.274570941925049,
  0.274674028158188,
  0.274777144193649,
  0.274880260229111,
  0.274983376264572,
  0.275086522102356,
  0.275189638137817,
  0.275292783975601,
  0.275395929813385,
  0.275499075651169,
  0.275602221488953,
  0.275705367326736,
  0.275808542966843,
  0.275911718606949,
  0.276014894247055,
  0.276118069887161,
  0.276221245527267,
  0.276324450969696,
  0.276427656412125,
  0.276530861854553,
  0.276634067296982,
  0.27673727273941,
  0.276840478181839,
  0.27694371342659,
  0.277046948671341,
  0.277150183916092,
  0.277253419160843,
  0.277356684207916,
  0.277459919452667,
  0.277563184499741,
  0.277666449546814,
  0.277769714593887,
  0.277872979640961,
  0.277976274490356,
  0.27807953953743,
  0.278182834386826,
  0.278286129236221,
  0.278389424085617,
  0.278492748737335,
  0.278596043586731,
  0.278699368238449,
  0.278802692890167,
  0.278906017541885,
  0.279009371995926,
  0.279112696647644,
  0.279216051101685,
  0.279319375753403,
  0.279422760009766,
  0.279526114463806,
  0.279629468917847,
  0.27973285317421,
  0.279836237430573,
  0.279939621686935,
  0.280043005943298,
  0.280146390199661,
  0.280249804258347,
  0.280353218317032,
  0.280456632375717,
  0.280560046434402,
  0.280663460493088,
  0.280766904354095,
  0.280870318412781,
  0.280973762273788,
  0.281077206134796,
  0.281180649995804,
  0.281284123659134,
  0.281387567520142,
  0.281491041183472,
  0.281594514846802,
  0.281697988510132,
  0.281801491975784,
  0.281904965639114,
  0.282008469104767,
  0.282111972570419,
  0.282215476036072,
  0.282318979501724,
  0.282422512769699,
  0.282526016235352,
  0.282629549503326,
  0.282733112573624,
  0.282836645841599,
  0.282940179109573,
  0.283043742179871,
  0.283147275447845,
  0.283250838518143,
  0.283354431390762,
  0.28345799446106,
  0.283561587333679,
  0.283665150403976,
  0.283768743276596,
  0.283872336149216,
  0.283975958824158,
  0.284079551696777,
  0.284183174371719,
  0.284286797046661,
  0.284390419721603,
  0.284494042396545,
  0.28459769487381,
  0.284701317548752,
  0.284804970026016,
  0.284908622503281,
  0.285012304782867,
  0.285115957260132,
  0.285219609737396,
  0.285323292016983,
  0.28542697429657,
  0.285530656576157,
  0.285634368658066,
  0.285738050937653,
  0.285841763019562,
  0.285945475101471,
  0.28604918718338,
  0.286152899265289,
  0.286256641149521,
  0.286360383033752,
  0.286464095115662,
  0.286567836999893,
  0.286671608686447,
  0.286775350570679,
  0.286879122257233,
  0.286982893943787,
  0.287086665630341,
  0.287190437316895,
  0.287294209003448,
  0.287398010492325,
  0.287501811981201,
  0.287605613470078,
  0.287709414958954,
  0.28781321644783,
  0.287917047739029,
  0.288020879030228,
  0.288124710321426,
  0.288228541612625,
  0.288332372903824,
  0.288436233997345,
  0.288540065288544,
  0.288643926382065,
  0.288747787475586,
  0.288851678371429,
  0.288955539464951,
  0.289059430360794,
  0.289163321256638,
  0.289267212152481,
  0.289371103048325,
  0.28947502374649,
  0.289578944444656,
  0.2896828353405,
  0.289786756038666,
  0.289890676736832,
  0.28999462723732,
  0.290098577737808,
  0.290202498435974,
  0.290306448936462,
  0.290410429239273,
  0.290514379739761,
  0.290618360042572,
  0.29072231054306,
  0.290826290845871,
  0.290930300951004,
  0.291034281253815,
  0.291138291358948,
  0.291242271661758,
  0.291346281766891,
  0.291450291872025,
  0.29155433177948,
  0.291658341884613,
  0.291762381792068,
  0.291866421699524,
  0.291970461606979,
  0.292074501514435,
  0.292178571224213,
  0.29228264093399,
  0.292386710643768,
  0.292490780353546,
  0.292594850063324,
  0.292698949575424,
  0.292803019285202,
  0.292907118797302,
  0.293011218309402,
  0.293115317821503,
  0.293219447135925,
  0.293323576450348,
  0.293427675962448,
  0.293531805276871,
  0.293635964393616,
  0.293740093708038,
  0.293844252824783,
  0.293948411941528,
  0.294052571058273,
  0.294156730175018,
  0.294260919094086,
  0.294365078210831,
  0.294469267129898,
  0.294573456048965,
  0.294677674770355,
  0.294781863689423,
  0.294886082410812,
  0.29499027132988,
  0.29509449005127,
  0.295198708772659,
  0.295302957296371,
  0.295407176017761,
  0.295511454343796,
  0.295615702867508,
  0.29571995139122,
  0.295824199914932,
  0.295928478240967,
  0.296032726764679,
  0.296137034893036,
  0.29624131321907,
  0.296345591545105,
  0.296449899673462,
  0.296554177999496,
  0.296658486127853,
  0.296762824058533,
  0.29686713218689,
  0.296971470117569,
  0.297075808048248,
  0.297180116176605,
  0.297284483909607,
  0.297388821840286,
  0.297493189573288,
  0.297597527503967,
  0.297701895236969,
  0.297806292772293,
  0.297910660505295,
  0.298015058040619,
  0.298119425773621,
  0.298223853111267,
  0.298328250646591,
  0.298432648181915,
  0.298537075519562,
  0.298641502857208,
  0.298745930194855,
  0.298850357532501,
  0.298954784870148,
  0.299059242010117,
  0.299163699150085,
  0.299268156290054,
  0.299372613430023,
  0.299477070569992,
  0.299581557512283,
  0.299686044454575,
  0.299790531396866,
  0.299895018339157,
  0.299999505281448,
  0.300104022026062,
  0.300208538770676,
  0.300313055515289,
  0.300417572259903,
  0.300522089004517,
  0.300626635551453,
  0.300731182098389,
  0.300835728645325,
  0.300940275192261,
  0.301044851541519,
  0.301149398088455,
  0.301253974437714,
  0.301358550786972,
  0.30146312713623,
  0.301567733287811,
  0.30167230963707,
  0.301776915788651,
  0.301881521940231,
  0.301986157894135,
  0.302090764045715,
  0.302195399999619,
  0.302300035953522,
  0.302404671907425,
  0.302509307861328,
  0.302613973617554,
  0.302718609571457,
  0.302823275327682,
  0.302927941083908,
  0.303032606840134,
  0.303137302398682,
  0.30324199795723,
  0.303346693515778,
  0.303451389074326,
  0.303556084632874,
  0.303660809993744,
  0.303765505552292,
  0.303870230913162,
  0.303974956274033,
  0.304079711437225,
  0.304184436798096,
  0.304289191961288,
  0.304393947124481,
  0.304498702287674,
  0.304603487253189,
  0.304708242416382,
  0.304813027381897,
  0.304917812347412,
  0.305022597312927,
  0.305127412080765,
  0.30523219704628,
  0.305337011814117,
  0.305441826581955,
  0.305546641349792,
  0.30565145611763,
  0.30575630068779,
  0.30586114525795,
  0.30596598982811,
  0.306070864200592,
  0.306175708770752,
  0.306280583143234,
  0.306385427713394,
  0.306490331888199,
  0.306595206260681,
  0.306700080633163,
  0.306804984807968,
  0.306909888982773,
  0.307014793157578,
  0.307119697332382,
  0.307224631309509,
  0.307329535484314,
  0.307434469461441,
  0.307539433240891,
  0.307644367218018,
  0.307749330997467,
  0.307854294776917,
  0.307959228754044,
  0.308064222335815,
  0.308169186115265,
  0.308274179697037,
  0.308379143476486,
  0.308484137058258,
  0.308589160442352,
  0.308694154024124,
  0.308799177408218,
  0.308904200792313,
  0.309009224176407,
  0.309114247560501,
  0.309219270944595,
  0.309324324131012,
  0.309429377317429,
  0.309534430503845,
  0.309639513492584,
  0.309744566679001,
  0.30984964966774,
  0.309954732656479,
  0.310059815645218,
  0.310164898633957,
  0.310270011425018,
  0.31037512421608,
  0.310480207204819,
  0.310585349798203,
  0.310690462589264,
  0.310795605182648,
  0.310900747776031,
  0.311005890369415,
  0.311111032962799,
  0.311216175556183,
  0.311321347951889,
  0.311426520347595,
  0.311531692743301,
  0.311636865139008,
  0.311742067337036,
  0.311847269535065,
  0.311952471733093,
  0.312057673931122,
  0.31216287612915,
  0.312268108129501,
  0.31237331032753,
  0.312478572130203,
  0.312583804130554,
  0.312689036130905,
  0.312794297933578,
  0.312899559736252,
  0.313004821538925,
  0.313110083341599,
  0.313215345144272,
  0.313320636749268,
  0.313425928354263,
  0.313531219959259,
  0.313636511564255,
  0.313741832971573,
  0.313847154378891,
  0.313952475786209,
  0.314057797193527,
  0.314163118600845,
  0.314268469810486,
  0.314373821020126,
  0.314479172229767,
  0.314584523439407,
  0.31468990445137,
  0.314795255661011,
  0.314900636672974,
  0.315006017684937,
  0.315111398696899,
  0.315216809511185,
  0.31532222032547,
  0.315427631139755,
  0.315533041954041,
  0.315638452768326,
  0.315743893384933,
  0.315849334001541,
  0.315954774618149,
  0.316060215234756,
  0.316165655851364,
  0.316271126270294,
  0.316376596689224,
  0.316482067108154,
  0.316587537527084,
  0.316693037748337,
  0.316798537969589,
  0.316904038190842,
  0.317009538412094,
  0.317115038633347,
  0.317220568656921,
  0.317326098680496,
  0.317431628704071,
  0.317537158727646,
  0.317642688751221,
  0.317748248577118,
  0.317853808403015,
  0.317959368228912,
  0.31806492805481,
  0.318170517683029,
  0.318276107311249,
  0.318381696939468,
  0.318487286567688,
  0.318592876195908,
  0.31869849562645,
  0.318804115056992,
  0.318909734487534,
  0.319015353918076,
  0.31912100315094,
  0.319226622581482,
  0.319332271814346,
  0.319437921047211,
  0.319543600082397,
  0.319649249315262,
  0.319754928350449,
  0.319860607385635,
  0.319966286420822,
  0.320071995258331,
  0.32017770409584,
  0.320283383131027,
  0.320389121770859,
  0.320494830608368,
  0.320600539445877,
  0.320706278085709,
  0.32081201672554,
  0.320917755365372,
  0.321023523807526,
  0.321129262447357,
  0.321235030889511,
  0.321340799331665,
  0.321446567773819,
  0.321552366018295,
  0.321658164262772,
  0.321763962507248,
  0.321869760751724,
  0.321975558996201,
  0.322081387042999,
  0.322187185287476,
  0.322293043136597,
  0.322398871183395,
  0.322504699230194,
  0.322610557079315,
  0.322716414928436,
  0.322822272777557,
  0.322928160429001,
  0.323034018278122,
  0.323139905929565,
  0.323245793581009,
  0.323351681232452,
  0.323457598686218,
  0.323563486337662,
  0.323669403791428,
  0.323775321245193,
  0.323881268501282,
  0.323987185955048,
  0.324093133211136,
  0.324199080467224,
  0.324305027723312,
  0.324411004781723,
  0.324516952037811,
  0.324622929096222,
  0.324728906154633,
  0.324834913015366,
  0.324940890073776,
  0.325046896934509,
  0.325152903795242,
  0.325258910655975,
  0.325364947319031,
  0.325470954179764,
  0.325576990842819,
  0.325683027505875,
  0.325789093971252,
  0.325895130634308,
  0.326001197099686,
  0.326107263565063,
  0.326213330030441,
  0.326319396495819,
  0.326425492763519,
  0.326531589031219,
  0.32663768529892,
  0.326743811368942,
  0.326849907636642,
  0.326956033706665,
  0.327062159776688,
  0.32716828584671,
  0.327274441719055,
  0.327380567789078,
  0.327486723661423,
  0.327592879533768,
  0.327699035406113,
  0.32780522108078,
  0.327911406755447,
  0.328017592430115,
  0.328123778104782,
  0.328229993581772,
  0.328336179256439,
  0.328442394733429,
  0.328548610210419,
  0.328654855489731,
  0.328761070966721,
  0.328867316246033,
  0.328973561525345,
  0.329079806804657,
  0.329186081886292,
  0.329292327165604,
  0.329398632049561,
  0.329504907131195,
  0.32961118221283,
  0.329717487096786,
  0.329823791980743,
  0.329930067062378,
  0.330036401748657,
  0.330142706632614,
  0.330249041318893,
  0.330355376005173,
  0.330461710691452,
  0.330568045377731,
  0.330674409866333,
  0.330780774354935,
  0.330887138843536,
  0.33099353313446,
  0.331099897623062,
  0.331206291913986,
  0.33131268620491,
  0.331419080495834,
  0.331525504589081,
  0.331631898880005,
  0.331738322973251,
  0.331844747066498,
  0.331951200962067,
  0.332057625055313,
  0.332164078950882,
  0.332270532846451,
  0.33237698674202,
  0.332483470439911,
  0.332589954137802,
  0.332696437835693,
  0.332802921533585,
  0.332909405231476,
  0.333015918731689,
  0.333122432231903,
  0.333228945732117,
  0.33333545923233,
  0.333442002534866,
  0.33354851603508,
  0.333655059337616,
  0.333761632442474,
  0.33386817574501,
  0.333974748849869,
  0.334081321954727,
  0.334187895059586,
  0.334294468164444,
  0.334401071071625,
  0.334507673978806,
  0.334614276885986,
  0.334720879793167,
  0.33482751250267,
  0.334934115409851,
  0.335040748119354,
  0.33514741063118,
  0.335254043340683,
  0.335360705852509,
  0.335467368364334,
  0.33557403087616,
  0.335680693387985,
  0.335787385702133,
  0.335894078016281,
  0.336000770330429,
  0.336107462644577,
  0.336214184761047,
  0.336320877075195,
  0.336427599191666,
  0.336534351110458,
  0.336641073226929,
  0.336747795343399,
  0.336854547262192,
  0.336961328983307,
  0.3370680809021,
  0.337174862623215,
  0.33728164434433,
  0.337388396263123,
  0.33749520778656,
  0.337601989507675,
  0.337708801031113,
  0.33781561255455,
  0.337922424077988,
  0.338029265403748,
  0.338136076927185,
  0.338242918252945,
  0.338349789381027,
  0.338456630706787,
  0.338563501834869,
  0.338670372962952,
  0.338777244091034,
  0.338884115219116,
  0.338990986347198,
  0.339097887277603,
  0.339204788208008,
  0.339311689138412,
  0.33941861987114,
  0.339525550603867,
  0.339632481336594,
  0.339739412069321,
  0.339846342802048,
  0.339953303337097,
  0.340060263872147,
  0.340167224407196,
  0.340274184942245,
  0.340381175279617,
  0.340488165616989,
  0.340595155954361,
  0.340702146291733,
  0.340809136629105,
  0.340916156768799,
  0.341023176908493,
  0.341130197048187,
  0.341237246990204,
  0.34134429693222,
  0.341451346874237,
  0.341558396816254,
  0.34166544675827,
  0.341772526502609,
  0.341879606246948,
  0.341986685991287,
  0.342093765735626,
  0.342200875282288,
  0.342307984828949,
  0.34241509437561,
  0.342522203922272,
  0.342629343271255,
  0.342736452817917,
  0.342843592166901,
  0.342950761318207,
  0.343057900667191,
  0.343165069818497,
  0.343272238969803,
  0.343379408121109,
  0.343486577272415,
  0.343593776226044,
  0.343700975179672,
  0.343808174133301,
  0.343915373086929,
  0.34402260184288,
  0.344129830598831,
  0.344237059354782,
  0.344344288110733,
  0.344451546669006,
  0.344558775424957,
  0.344666063785553,
  0.344773322343826,
  0.3448805809021,
  0.344987869262695,
  0.345095157623291,
  0.345202445983887,
  0.345309764146805,
  0.345417082309723,
  0.345524370670319,
  0.345631718635559,
  0.345739036798477,
  0.345846384763718,
  0.345953732728958,
  0.346061080694199,
  0.346168428659439,
  0.346275806427002,
  0.346383184194565,
  0.346490561962128,
  0.346597939729691,
  0.346705317497253,
  0.346812754869461,
  0.346920132637024,
  0.347027570009232,
  0.347134977579117,
  0.347242414951324,
  0.347349852323532,
  0.34745728969574,
  0.34756475687027,
  0.3476722240448,
  0.347779661417007,
  0.34788715839386,
  0.34799462556839,
  0.348102122545242,
  0.348209619522095,
  0.348317116498947,
  0.3484246134758,
  0.348532140254974,
  0.348639667034149,
  0.348747193813324,
  0.348854720592499,
  0.348962277173996,
  0.349069833755493,
  0.34917739033699,
  0.349284946918488,
  0.349392533302307,
  0.349500119686127,
  0.349607706069946,
  0.349715292453766,
  0.349822908639908,
  0.34993052482605,
  0.350038111209869,
  0.350145757198334,
  0.350253373384476,
  0.35036101937294,
  0.350468665361404,
  0.350576311349869,
  0.350683987140656,
  0.350791662931442,
  0.350899308919907,
  0.351007014513016,
  0.351114690303802,
  0.351222395896912,
  0.351330101490021,
  0.35143780708313,
  0.351545542478561,
  0.351653248071671,
  0.351760983467102,
  0.351868718862534,
  0.351976484060287,
  0.352084219455719,
  0.352191984653473,
  0.352299749851227,
  0.352407544851303,
  0.352515310049057,
  0.352623105049133,
  0.35273090004921,
  0.352838724851608,
  0.352946519851685,
  0.353054344654083,
  0.353162169456482,
  0.353270024061203,
  0.353377848863602,
  0.353485703468323,
  0.353593558073044,
  0.353701442480087,
  0.353809297084808,
  0.353917181491852,
  0.354025065898895,
  0.354132950305939,
  0.354240864515305,
  0.35434877872467,
  0.354456692934036,
  0.354564607143402,
  0.35467255115509,
  0.354780465364456,
  0.354888409376144,
  0.354996383190155,
  0.355104327201843,
  0.355212301015854,
  0.355320274829865,
  0.355428248643875,
  0.355536252260208,
  0.355644226074219,
  0.355752229690552,
  0.355860263109207,
  0.35596826672554,
  0.356076300144196,
  0.356184333562851,
  0.356292366981506,
  0.356400430202484,
  0.356508493423462,
  0.356616526842117,
  0.356724619865417,
  0.356832683086395,
  0.356940776109695,
  0.357048869132996,
  0.357156962156296,
  0.357265055179596,
  0.357373178005219,
  0.357481300830841,
  0.357589453458786,
  0.357697576284409,
  0.357805728912354,
  0.357913881540298,
  0.358022034168243,
  0.358130186796188,
  0.358238369226456,
  0.358346551656723,
  0.35845473408699,
  0.35856294631958,
  0.358671128749847,
  0.358779340982437,
  0.358887583017349,
  0.358995795249939,
  0.359104037284851,
  0.359212279319763,
  0.359320521354675,
  0.35942879319191,
  0.359537035226822,
  0.359645307064056,
  0.359753578901291,
  0.359861880540848,
  0.359970182180405,
  0.360078483819962,
  0.360186785459518,
  0.360295087099075,
  0.360403418540955,
  0.360511749982834,
  0.360620081424713,
  0.360728442668915,
  0.360836774110794,
  0.360945135354996,
  0.361053496599197,
  0.361161887645721,
  0.361270278692245,
  0.36137866973877,
  0.361487060785294,
  0.36159548163414,
  0.361703872680664,
  0.36181229352951,
  0.361920744180679,
  0.362029165029526,
  0.362137615680695,
  0.362246066331863,
  0.362354516983032,
  0.362462967634201,
  0.362571448087692,
  0.362679928541183,
  0.362788438796997,
  0.362896919250488,
  0.363005429506302,
  0.363113939762115,
  0.363222450017929,
  0.363330990076065,
  0.363439530134201,
  0.363548070192337,
  0.363656610250473,
  0.363765150308609,
  0.363873720169067,
  0.363982290029526,
  0.364090889692307,
  0.364199459552765,
  0.364308059215546,
  0.364416658878326,
  0.364525258541107,
  0.36463388800621,
  0.364742517471313,
  0.364851146936417,
  0.36495977640152,
  0.365068435668945,
  0.365177094936371,
  0.365285754203796,
  0.365394413471222,
  0.36550310254097,
  0.365611791610718,
  0.365720480680466,
  0.365829169750214,
  0.365937888622284,
  0.366046607494354,
  0.366155326366425,
  0.366264045238495,
  0.366372793912888,
  0.36648154258728,
  0.366590291261673,
  0.366699069738388,
  0.366807818412781,
  0.366916596889496,
  0.367025375366211,
  0.367134183645248,
  0.367242991924286,
  0.367351800203323,
  0.367460608482361,
  0.367569416761398,
  0.367678254842758,
  0.367787092924118,
  0.3678959608078,
  0.36800479888916,
  0.368113666772842,
  0.368222534656525,
  0.368331402540207,
  0.368440300226212,
  0.368549197912216,
  0.368658095598221,
  0.368766993284225,
  0.368875920772552,
  0.368984818458557,
  0.369093745946884,
  0.369202703237534,
  0.369311660528183,
  0.36942058801651,
  0.369529545307159,
  0.369638532400131,
  0.369747519493103,
  0.369856476783752,
  0.369965493679047,
  0.370074480772018,
  0.370183497667313,
  0.370292514562607,
  0.370401531457901,
  0.370510578155518,
  0.370619624853134,
  0.370728641748428,
  0.370837718248367,
  0.370946764945984,
  0.371055841445923,
  0.371164917945862,
  0.371273994445801,
  0.371383100748062,
  0.371492207050323,
  0.371601313352585,
  0.371710419654846,
  0.37181955575943,
  0.371928691864014,
  0.372037827968597,
  0.372146964073181,
  0.372256129980087,
  0.372365295886993,
  0.3724744617939,
  0.372583627700806,
  0.372692823410034,
  0.372802019119263,
  0.372911214828491,
  0.373020440340042,
  0.373129636049271,
  0.373238861560822,
  0.373348116874695,
  0.373457342386246,
  0.373566597700119,
  0.373675853013992,
  0.373785108327866,
  0.373894393444061,
  0.374003678560257,
  0.374112963676453,
  0.374222248792648,
  0.374331563711166,
  0.374440878629684,
  0.374550193548203,
  0.374659508466721,
  0.374768853187561,
  0.374878197908401,
  0.374987542629242,
  0.375096917152405,
  0.375206291675568,
  0.375315636396408,
  0.375425040721893,
  0.375534415245056,
  0.375643819570541,
  0.375753223896027,
  0.375862628221512,
  0.375972062349319,
  0.376081496477127,
  0.376190930604935,
  0.376300394535065,
  0.376409828662872,
  0.376519292593002,
  0.376628756523132,
  0.376738250255585,
  0.376847743988037,
  0.376957207918167,
  0.377066731452942,
  0.377176225185394,
  0.377285748720169,
  0.377395272254944,
  0.377504795789719,
  0.377614349126816,
  0.377723902463913,
  0.37783345580101,
  0.377943009138107,
  0.378052592277527,
  0.378162175416946,
  0.378271758556366,
  0.378381341695786,
  0.378490954637527,
  0.378600567579269,
  0.378710180521011,
  0.378819823265076,
  0.378929436206818,
  0.379039108753204,
  0.379148751497269,
  0.379258424043655,
  0.37936806678772,
  0.379477769136429,
  0.379587441682816,
  0.379697144031525,
  0.379806816577911,
  0.379916548728943,
  0.380026251077652,
  0.380135983228683,
  0.380245715379715,
  0.380355447530746,
  0.3804652094841,
  0.380574941635132,
  0.380684733390808,
  0.380794495344162,
  0.380904257297516,
  0.381014049053192,
  0.381123840808868,
  0.381233662366867,
  0.381343483924866,
  0.381453275680542,
  0.381563127040863,
  0.381672948598862,
  0.381782799959183,
  0.381892651319504,
  0.382002502679825,
  0.382112383842468,
  0.382222265005112,
  0.382332146167755,
  0.382442027330399,
  0.382551938295364,
  0.38266184926033,
  0.382771760225296,
  0.382881671190262,
  0.38299161195755,
  0.383101552724838,
  0.383211523294449,
  0.383321464061737,
  0.383431434631348,
  0.383541405200958,
  0.383651375770569,
  0.383761376142502,
  0.383871376514435,
  0.383981376886368,
  0.384091377258301,
  0.384201407432556,
  0.384311437606812,
  0.384421467781067,
  0.384531527757645,
  0.384641587734222,
  0.3847516477108,
  0.384861707687378,
  0.384971797466278,
  0.385081887245178,
  0.385191977024078,
  0.385302066802979,
  0.385412186384201,
  0.385522305965424,
  0.385632425546646,
  0.385742574930191,
  0.385852724313736,
  0.385962873697281,
  0.386073023080826,
  0.386183202266693,
  0.38629338145256,
  0.386403560638428,
  0.386513739824295,
  0.386623948812485,
  0.386734157800674,
  0.386844366788864,
  0.386954575777054,
  0.387064844369888,
  0.3871750831604,
  0.387285321950912,
  0.387395590543747,
  0.387505829334259,
  0.387616127729416,
  0.38772639632225,
  0.387836694717407,
  0.387946993112564,
  0.388057291507721,
  0.3881676197052,
  0.388277947902679,
  0.388388276100159,
  0.388498604297638,
  0.38860896229744,
  0.388719320297241,
  0.388829678297043,
  0.388940036296844,
  0.389050424098969,
  0.389160811901093,
  0.389271229505539,
  0.389381617307663,
  0.389492034912109,
  0.389602452516556,
  0.389712899923325,
  0.389823317527771,
  0.389933794736862,
  0.390044242143631,
  0.3901546895504,
  0.390265166759491,
  0.390375643968582,
  0.390486150979996,
  0.390596628189087,
  0.3907071352005,
  0.390817642211914,
  0.39092817902565,
  0.391038686037064,
  0.391149252653122,
  0.391259789466858,
  0.391370326280594,
  0.391480922698975,
  0.391591489315033,
  0.391702055931091,
  0.391812652349472,
  0.391923248767853,
  0.392033845186234,
  0.392144471406937,
  0.392255067825317,
  0.392365723848343,
  0.392476350069046,
  0.392586976289749,
  0.392697662115097,
  0.392808318138123,
  0.392918974161148,
  0.393029659986496,
  0.393140345811844,
  0.393251061439514,
  0.393361747264862,
  0.393472462892532,
  0.393583178520203,
  0.393693923950195,
  0.393804639577866,
  0.393915414810181,
  0.394026160240173,
  0.394136905670166,
  0.394247680902481,
  0.394358456134796,
  0.394469261169434,
  0.394580036401749,
  0.394690871238708,
  0.394801676273346,
  0.394912481307983,
  0.395023316144943,
  0.395134150981903,
  0.395245015621185,
  0.395355850458145,
  0.39546674489975,
  0.395577609539032,
  0.395688474178314,
  0.395799368619919,
  0.395910263061523,
  0.396021157503128,
  0.396132081747055,
  0.396243005990982,
  0.396353930234909,
  0.396464884281158,
  0.396575838327408,
  0.396686792373657,
  0.396797746419907,
  0.396908730268478,
  0.39701971411705,
  0.397130697965622,
  0.397241681814194,
  0.397352695465088,
  0.397463709115982,
  0.397574752569199,
  0.397685766220093,
  0.397796809673309,
  0.397907853126526,
  0.398018926382065,
  0.398129969835281,
  0.398241072893143,
  0.398352146148682,
  0.398463219404221,
  0.398574322462082,
  0.398685425519943,
  0.398796558380127,
  0.398907691240311,
  0.399018824100494,
  0.399129956960678,
  0.399241119623184,
  0.39935228228569,
  0.399463444948196,
  0.399574607610703,
  0.399685800075531,
  0.399796992540359,
  0.39990821480751,
  0.400019407272339,
  0.40013062953949,
  0.400241851806641,
  0.400353103876114,
  0.400464326143265,
  0.400575578212738,
  0.400686860084534,
  0.400798112154007,
  0.400909394025803,
  0.401020675897598,
  0.401131987571716,
  0.401243299245834,
  0.401354610919952,
  0.40146592259407,
  0.401577264070511,
  0.401688605546951,
  0.401799947023392,
  0.401911288499832,
  0.402022659778595,
  0.402134031057358,
  0.402245432138443,
  0.402356803417206,
  0.402468204498291,
  0.402579605579376,
  0.402691036462784,
  0.402802467346191,
  0.402913898229599,
  0.403025329113007,
  0.403136789798737,
  0.403248250484467,
  0.403359711170197,
  0.403471201658249,
  0.403582692146301,
  0.403694182634354,
  0.403805673122406,
  0.403917193412781,
  0.404028713703156,
  0.40414023399353,
  0.404251784086227,
  0.404363334178925,
  0.404474884271622,
  0.404586434364319,
  0.404698014259338,
  0.404809594154358,
  0.404921174049377,
  0.405032783746719,
  0.405144393444061,
  0.405256003141403,
  0.405367612838745,
  0.405479252338409,
  0.405590891838074,
  0.405702531337738,
  0.405814200639725,
  0.405925869941711,
  0.406037539243698,
  0.406149238348007,
  0.406260907649994,
  0.406372606754303,
  0.406484335660934,
  0.406596064567566,
  0.406707793474197,
  0.406819522380829,
  0.40693125128746,
  0.407043009996414,
  0.407154768705368,
  0.407266557216644,
  0.407378315925598,
  0.407490134239197,
  0.407601922750473,
  0.407713711261749,
  0.407825529575348,
  0.407937347888947,
  0.408049196004868,
  0.408161044120789,
  0.40827289223671,
  0.408384740352631,
  0.408496618270874,
  0.408608496189117,
  0.408720374107361,
  0.408832281827927,
  0.40894415974617,
  0.409056097269058,
  0.409168004989624,
  0.409279942512512,
  0.4093918800354,
  0.409503817558289,
  0.409615784883499,
  0.40972775220871,
  0.40983971953392,
  0.409951686859131,
  0.410063683986664,
  0.410175681114197,
  0.41028767824173,
  0.410399705171585,
  0.41051173210144,
  0.410623759031296,
  0.410735815763474,
  0.410847872495651,
  0.410959929227829,
  0.411071985960007,
  0.411184072494507,
  0.411296159029007,
  0.411408245563507,
  0.41152036190033,
  0.411632478237152,
  0.411744624376297,
  0.41185674071312,
  0.411968886852264,
  0.412081032991409,
  0.412193179130554,
  0.412305355072021,
  0.412417531013489,
  0.412529706954956,
  0.412641912698746,
  0.412754118442535,
  0.412866324186325,
  0.412978559732437,
  0.413090765476227,
  0.413203030824661,
  0.413315266370773,
  0.413427531719208,
  0.41353976726532,
  0.413652062416077,
  0.413764327764511,
  0.413876622915268,
  0.413988918066025,
  0.414101243019104,
  0.414213567972183,
  0.414325892925262,
  0.414438217878342,
  0.414550572633743,
  0.414662927389145,
  0.414775282144547,
  0.414887666702271,
  0.415000051259995,
  0.415112435817719,
  0.415224820375443,
  0.415337234735489,
  0.415449649095535,
  0.415562093257904,
  0.41567450761795,
  0.415786951780319,
  0.415899395942688,
  0.416011869907379,
  0.41612434387207,
  0.416236817836761,
  0.416349321603775,
  0.416461795568466,
  0.416574329137802,
  0.416686832904816,
  0.416799366474152,
  0.416911900043488,
  0.417024433612823,
  0.417136996984482,
  0.41724956035614,
  0.417362123727798,
  0.417474687099457,
  0.417587280273438,
  0.417699873447418,
  0.417812496423721,
  0.417925089597702,
  0.418037742376328,
  0.418150365352631,
  0.418262988328934,
  0.418375641107559,
  0.418488323688507,
  0.418600976467133,
  0.41871365904808,
  0.418826341629028,
  0.418939054012299,
  0.419051736593246,
  0.419164448976517,
  0.419277191162109,
  0.419389933347702,
  0.419502645730972,
  0.419615417718887,
  0.41972815990448,
  0.419840931892395,
  0.41995370388031,
  0.420066505670547,
  0.420179307460785,
  0.420292109251022,
  0.42040491104126,
  0.42051774263382,
  0.420630574226379,
  0.420743405818939,
  0.420856267213821,
  0.420969128608704,
  0.421081990003586,
  0.42119488120079,
  0.421307772397995,
  0.4214206635952,
  0.421533554792404,
  0.421646475791931,
  0.421759396791458,
  0.421872317790985,
  0.421985268592834,
  0.422098219394684,
  0.422211170196533,
  0.422324150800705,
  0.422437131404877,
  0.422550112009048,
  0.422663122415543,
  0.422776132822037,
  0.422889143228531,
  0.423002153635025,
  0.423115193843842,
  0.423228234052658,
  0.423341274261475,
  0.423454344272614,
  0.423567414283752,
  0.423680484294891,
  0.423793584108353,
  0.423906683921814,
  0.424019783735275,
  0.424132913351059,
  0.42424601316452,
  0.424359172582626,
  0.42447230219841,
  0.424585461616516,
  0.424698621034622,
  0.424811780452728,
  0.424924969673157,
  0.425038158893585,
  0.425151348114014,
  0.425264567136765,
  0.425377786159515,
  0.425491005182266,
  0.425604254007339,
  0.425717502832413,
  0.425830751657486,
  0.425944000482559,
  0.426057279109955,
  0.42617055773735,
  0.426283836364746,
  0.426397144794464,
  0.426510453224182,
  0.426623791456223,
  0.426737099885941,
  0.426850438117981,
  0.426963776350021,
  0.427077144384384,
  0.427190512418747,
  0.42730388045311,
  0.427417278289795,
  0.42753067612648,
  0.427644073963165,
  0.42775747179985,
  0.427870899438858,
  0.427984327077866,
  0.428097784519196,
  0.428211212158203,
  0.428324669599533,
  0.428438156843185,
  0.428551614284515,
  0.428665101528168,
  0.428778618574142,
  0.428892105817795,
  0.42900562286377,
  0.429119139909744,
  0.429232686758041,
  0.429346233606339,
  0.429459780454636,
  0.429573327302933,
  0.429686903953552,
  0.429800480604172,
  0.429914087057114,
  0.430027663707733,
  0.430141270160675,
  0.430254906415939,
  0.430368542671204,
  0.430482149124146,
  0.430595815181732,
  0.430709451436996,
  0.430823117494583,
  0.430936813354492,
  0.431050479412079,
  0.431164175271988,
  0.431277871131897,
  0.431391596794128,
  0.43150532245636,
  0.431619048118591,
  0.431732773780823,
  0.431846529245377,
  0.43196028470993,
  0.432074040174484,
  0.43218782544136,
  0.432301610708237,
  0.432415395975113,
  0.432529211044312,
  0.43264302611351,
  0.432756841182709,
  0.43287068605423,
  0.432984530925751,
  0.433098375797272,
  0.433212250471115,
  0.433326125144958,
  0.433439999818802,
  0.433553904294968,
  0.433667778968811,
  0.433781713247299,
  0.433895617723465,
  0.434009552001953,
  0.434123486280441,
  0.434237420558929,
  0.43435138463974,
  0.434465348720551,
  0.434579342603683,
  0.434693306684494,
  0.434807300567627,
  0.434921324253082,
  0.435035318136215,
  0.435149341821671,
  0.435263365507126,
  0.435377418994904,
  0.435491472482681,
  0.435605525970459,
  0.435719609260559,
  0.435833692550659,
  0.435947775840759,
  0.436061888933182,
  0.436176002025604,
  0.436290115118027,
  0.436404228210449,
  0.436518371105194,
  0.436632513999939,
  0.436746686697006,
  0.436860829591751,
  0.436975032091141,
  0.437089204788208,
  0.437203407287598,
  0.437317609786987,
  0.437431812286377,
  0.437546044588089,
  0.437660276889801,
  0.437774509191513,
  0.437888771295547,
  0.438003033399582,
  0.438117295503616,
  0.438231587409973,
  0.43834587931633,
  0.438460171222687,
  0.438574492931366,
  0.438688814640045,
  0.438803136348724,
  0.438917458057404,
  0.439031809568405,
  0.439146190881729,
  0.439260542392731,
  0.439374923706055,
  0.439489305019379,
  0.439603716135025,
  0.439718127250671,
  0.439832538366318,
  0.439946949481964,
  0.440061390399933,
  0.440175831317902,
  0.440290302038193,
  0.440404772758484,
  0.440519243478775,
  0.440633714199066,
  0.44074821472168,
  0.440862715244293,
  0.440977215766907,
  0.441091746091843,
  0.441206276416779,
  0.441320806741714,
  0.441435366868973,
  0.441549926996231,
  0.441664487123489,
  0.44177907705307,
  0.441893666982651,
  0.442008256912231,
  0.442122876644135,
  0.442237496376038,
  0.442352116107941,
  0.442466765642166,
  0.442581415176392,
  0.442696094512939,
  0.442810744047165,
  0.442925423383713,
  0.443040102720261,
  0.443154811859131,
  0.443269520998001,
  0.443384230136871,
  0.443498969078064,
  0.443613678216934,
  0.443728446960449,
  0.443843185901642,
  0.443957954645157,
  0.444072753190994,
  0.444187521934509,
  0.444302320480347,
  0.444417119026184,
  0.444531917572021,
  0.444646745920181,
  0.444761604070663,
  0.444876432418823,
  0.444991290569305,
  0.445106148719788,
  0.445221036672592,
  0.445335924625397,
  0.445450812578201,
  0.445565700531006,
  0.445680618286133,
  0.44579553604126,
  0.445910483598709,
  0.446025401353836,
  0.446140378713608,
  0.446255326271057,
  0.446370303630829,
  0.446485280990601,
  0.446600258350372,
  0.446715265512466,
  0.446830272674561,
  0.446945309638977,
  0.447060316801071,
  0.44717538356781,
  0.447290420532227,
  0.447405487298965,
  0.447520554065704,
  0.447635620832443,
  0.447750717401505,
  0.447865813970566,
  0.447980940341949,
  0.448096036911011,
  0.448211193084717,
  0.4483263194561,
  0.448441475629807,
  0.448556631803513,
  0.448671787977219,
  0.448786973953247,
  0.448902159929276,
  0.449017345905304,
  0.449132561683655,
  0.449247777462006,
  0.449363023042679,
  0.449478268623352,
  0.449593514204025,
  0.449708759784698,
  0.449824035167694,
  0.44993931055069,
  0.450054585933685,
  0.450169891119003,
  0.450285196304321,
  0.450400531291962,
  0.45051583647728,
  0.450631201267242,
  0.450746536254883,
  0.450861901044846,
  0.450977265834808,
  0.451092630624771,
  0.451208025217056,
  0.451323419809341,
  0.451438844203949,
  0.451554238796234,
  0.451669692993164,
  0.451785117387772,
  0.451900571584702,
  0.452016025781631,
  0.452131479978561,
  0.452246963977814,
  0.452362447977066,
  0.452477961778641,
  0.452593445777893,
  0.452708959579468,
  0.452824503183365,
  0.452940046787262,
  0.453055590391159,
  0.453171133995056,
  0.453286707401276,
  0.453402280807495,
  0.453517884016037,
  0.453633487224579,
  0.453749090433121,
  0.453864693641663,
  0.453980326652527,
  0.454095959663391,
  0.454211622476578,
  0.454327285289764,
  0.454442948102951,
  0.454558610916138,
  0.454674303531647,
  0.454789996147156,
  0.454905718564987,
  0.455021440982819,
  0.45513716340065,
  0.455252915620804,
  0.455368667840958,
  0.455484420061111,
  0.455600172281265,
  0.455715954303741,
  0.455831736326218,
  0.455947548151016,
  0.456063359975815,
  0.456179171800613,
  0.456295013427734,
  0.456410855054855,
  0.456526696681976,
  0.45664256811142,
  0.456758439540863,
  0.456874310970306,
  0.456990212202072,
  0.457106113433838,
  0.457222014665604,
  0.457337945699692,
  0.45745387673378,
  0.457569807767868,
  0.457685768604279,
  0.457801729440689,
  0.4579176902771,
  0.458033680915833,
  0.458149671554565,
  0.458265691995621,
  0.458381682634354,
  0.458497732877731,
  0.458613753318787,
  0.458729803562164,
  0.458845853805542,
  0.45896190404892,
  0.45907798409462,
  0.45919406414032,
  0.459310173988342,
  0.459426283836365,
  0.459542393684387,
  0.45965850353241,
  0.459774643182755,
  0.459890782833099,
  0.460006952285767,
  0.460123121738434,
  0.460239291191101,
  0.460355490446091,
  0.46047168970108,
  0.46058788895607,
  0.46070408821106,
  0.460820317268372,
  0.460936576128006,
  0.461052805185318,
  0.461169064044952,
  0.461285352706909,
  0.461401611566544,
  0.4615179002285,
  0.46163421869278,
  0.461750507354736,
  0.461866825819016,
  0.461983174085617,
  0.462099522352219,
  0.46221587061882,
  0.462332218885422,
  0.462448596954346,
  0.46256497502327,
  0.462681382894516,
  0.462797790765762,
  0.462914198637009,
  0.463030606508255,
  0.463147044181824,
  0.463263481855392,
  0.463379949331284,
  0.463496416807175,
  0.463612884283066,
  0.463729381561279,
  0.463845878839493,
  0.463962376117706,
  0.464078903198242,
  0.464195430278778,
  0.464311957359314,
  0.464428514242172,
  0.464545071125031,
  0.464661628007889,
  0.464778214693069,
  0.46489480137825,
  0.465011388063431,
  0.465128004550934,
  0.465244621038437,
  0.465361267328262,
  0.465477913618088,
  0.465594559907913,
  0.465711206197739,
  0.465827882289886,
  0.465944588184357,
  0.466061264276505,
  0.466177970170975,
  0.466294676065445,
  0.466411411762238,
  0.46652814745903,
  0.466644912958145,
  0.466761648654938,
  0.466878414154053,
  0.46699520945549,
  0.467111974954605,
  0.467228770256042,
  0.467345595359802,
  0.467462420463562,
  0.467579245567322,
  0.467696070671082,
  0.467812925577164,
  0.467929780483246,
  0.46804666519165,
  0.468163549900055,
  0.468280434608459,
  0.468397349119186,
  0.468514263629913,
  0.46863117814064,
  0.46874812245369,
  0.468865036964417,
  0.468982011079788,
  0.46909898519516,
  0.469215959310532,
  0.469332933425903,
  0.469449937343597,
  0.469566941261292,
  0.469683945178986,
  0.469800978899002,
  0.469918042421341,
  0.470035076141357,
  0.470152139663696,
  0.470269203186035,
  0.470386296510696,
  0.470503389835358,
  0.470620483160019,
  0.470737606287003,
  0.470854729413986,
  0.47097185254097,
  0.471089005470276,
  0.471206158399582,
  0.47132334113121,
  0.471440523862839,
  0.471557706594467,
  0.471674889326096,
  0.471792101860046,
  0.471909314393997,
  0.47202655673027,
  0.472143799066544,
  0.472261041402817,
  0.472378313541412,
  0.472495585680008,
  0.472612857818604,
  0.472730159759521,
  0.472847461700439,
  0.47296479344368,
  0.473082095384598,
  0.473199427127838,
  0.473316788673401,
  0.473434150218964,
  0.473551511764526,
  0.473668903112411,
  0.473786294460297,
  0.473903685808182,
  0.474021077156067,
  0.474138498306274,
  0.474255949258804,
  0.474373400211334,
  0.474490851163864,
  0.474608302116394,
  0.474725782871246,
  0.474843263626099,
  0.474960774183273,
  0.475078284740448,
  0.475195795297623,
  0.475313305854797,
  0.475430846214294,
  0.475548386573792,
  0.475665956735611,
  0.47578352689743,
  0.475901126861572,
  0.476018697023392,
  0.476136326789856,
  0.476253926753998,
  0.476371556520462,
  0.476489186286926,
  0.476606845855713,
  0.476724475622177,
  0.476842164993286,
  0.476959854364395,
  0.477077543735504,
  0.477195233106613,
  0.477312952280045,
  0.477430671453476,
  0.477548390626907,
  0.477666139602661,
  0.477783888578415,
  0.477901667356491,
  0.478019446134567,
  0.478137224912643,
  0.478255033493042,
  0.478372842073441,
  0.478490650653839,
  0.47860848903656,
  0.478726327419281,
  0.478844165802002,
  0.478962033987045,
  0.479079902172089,
  0.479197800159454,
  0.479315668344498,
  0.479433596134186,
  0.479551494121552,
  0.47966942191124,
  0.47978737950325,
  0.479905307292938,
  0.480023294687271,
  0.480141252279282,
  0.480259239673615,
  0.480377227067947,
  0.480495244264603,
  0.480613231658936,
  0.480731278657913,
  0.480849295854568,
  0.480967342853546,
  0.481085419654846,
  0.481203466653824,
  0.481321543455124,
  0.481439650058746,
  0.481557756662369,
  0.481675863265991,
  0.481793969869614,
  0.481912106275558,
  0.482030272483826,
  0.482148408889771,
  0.482266575098038,
  0.482384771108627,
  0.482502937316895,
  0.482621163129807,
  0.482739359140396,
  0.482857584953308,
  0.48297581076622,
  0.483094066381454,
  0.483212321996689,
  0.483330577611923,
  0.48344886302948,
  0.483567148447037,
  0.483685433864594,
  0.483803749084473,
  0.483922064304352,
  0.484040409326553,
  0.484158754348755,
  0.484277099370956,
  0.48439547419548,
  0.484513819217682,
  0.484632223844528,
  0.484750628471375,
  0.484869033098221,
  0.484987437725067,
  0.485105872154236,
  0.485224306583405,
  0.485342770814896,
  0.485461235046387,
  0.485579699277878,
  0.485698193311691,
  0.485816687345505,
  0.485935181379318,
  0.486053705215454,
  0.48617222905159,
  0.486290782690048,
  0.486409336328506,
  0.486527889966965,
  0.486646473407745,
  0.486765056848526,
  0.486883640289307,
  0.48700225353241,
  0.487120866775513,
  0.487239509820938,
  0.487358152866364,
  0.487476795911789,
  0.487595438957214,
  0.487714141607285,
  0.487832814455032,
  0.487951517105103,
  0.488070219755173,
  0.488188922405243,
  0.488307654857635,
  0.488426387310028,
  0.488545149564743,
  0.488663911819458,
  0.488782703876495,
  0.48890146613121,
  0.489020258188248,
  0.489139080047607,
  0.489257901906967,
  0.489376723766327,
  0.489495545625687,
  0.489614397287369,
  0.489733278751373,
  0.489852160215378,
  0.489971041679382,
  0.490089923143387,
  0.490208834409714,
  0.490327745676041,
  0.49044668674469,
  0.490565627813339,
  0.490684568881989,
  0.49080353975296,
  0.490922510623932,
  0.491041511297226,
  0.49116051197052,
  0.491279512643814,
  0.491398513317108,
  0.491517543792725,
  0.491636604070663,
  0.491755664348602,
  0.491874724626541,
  0.49199378490448,
  0.492112874984741,
  0.492231965065002,
  0.492351084947586,
  0.49247020483017,
  0.492589324712753,
  0.492708474397659,
  0.492827624082565,
  0.492946803569794,
  0.493065983057022,
  0.49318516254425,
  0.493304371833801,
  0.493423581123352,
  0.493542790412903,
  0.493662029504776,
  0.493781268596649,
  0.493900507688522,
  0.494019776582718,
  0.494139045476913,
  0.494258344173431,
  0.494377642869949,
  0.49449697136879,
  0.49461629986763,
  0.49473562836647,
  0.494854956865311,
  0.494974315166473,
  0.495093703269958,
  0.495213091373444,
  0.495332479476929,
  0.495451867580414,
  0.495571285486221,
  0.495690703392029,
  0.495810151100159,
  0.495929598808289,
  0.496049046516418,
  0.496168524026871,
  0.496288001537323,
  0.496407508850098,
  0.49652698636055,
  0.496646523475647,
  0.496766060590744,
  0.496885567903519,
  0.497005134820938,
  0.497124701738358,
  0.497244268655777,
  0.497363835573196,
  0.497483462095261,
  0.497603058815002,
  0.497722685337067,
  0.497842311859131,
  0.497961938381195,
  0.498081594705582,
  0.498201280832291,
  0.498320937156677,
  0.498440623283386,
  0.498560339212418,
  0.498680025339127,
  0.49879977107048,
  0.498919486999512,
  0.499039232730865,
  0.499158978462219,
  0.499278753995895,
  0.499398529529572,
  0.49951833486557,
  0.499638140201569,
  0.499757945537567,
  0.499877780675888,
  0.499997615814209,
  0.500117421150208,
  0.500237286090851,
  0.500357151031494,
  0.500477075576782,
  0.500596940517426,
  0.500716865062714,
  0.500836789608002,
  0.50095671415329,
  0.501076638698578,
  0.501196622848511,
  0.501316547393799,
  0.501436531543732,
  0.501556515693665,
  0.501676499843597,
  0.501796543598175,
  0.501916527748108,
  0.502036571502686,
  0.502156615257263,
  0.502276659011841,
  0.502396762371063,
  0.502516806125641,
  0.502636909484863,
  0.502757012844086,
  0.502877116203308,
  0.502997279167175,
  0.503117382526398,
  0.503237545490265,
  0.503357708454132,
  0.503477871417999,
  0.503598034381866,
  0.503718256950378,
  0.50383847951889,
  0.503958642482758,
  0.504078924655914,
  0.504199147224426,
  0.504319369792938,
  0.504439651966095,
  0.504559934139252,
  0.504680216312408,
  0.504800498485565,
  0.504920840263367,
  0.505041122436523,
  0.505161464214325,
  0.505281805992126,
  0.505402207374573,
  0.505522549152374,
  0.505642950534821,
  0.505763351917267,
  0.505883753299713,
  0.506004154682159,
  0.506124556064606,
  0.506245017051697,
  0.506365478038788,
  0.506485939025879,
  0.50660640001297,
  0.506726861000061,
  0.506847381591797,
  0.506967902183533,
  0.507088422775269,
  0.507208943367004,
  0.50732946395874,
  0.507450044155121,
  0.507570624351501,
  0.507691204547882,
  0.507811784744263,
  0.507932364940643,
  0.508053004741669,
  0.508173644542694,
  0.508294284343719,
  0.508414924144745,
  0.50853556394577,
  0.50865626335144,
  0.508776962757111,
  0.508897662162781,
  0.509018361568451,
  0.509139060974121,
  0.509259819984436,
  0.509380519390106,
  0.509501278400421,
  0.509622037410736,
  0.509742856025696,
  0.509863615036011,
  0.50998443365097,
  0.51010525226593,
  0.51022607088089,
  0.510346949100494,
  0.510467767715454,
  0.510588645935059,
  0.510709524154663,
  0.510830402374268,
  0.510951280593872,
  0.511072218418121,
  0.511193096637726,
  0.511314034461975,
  0.511434972286224,
  0.511555969715118,
  0.511676907539368,
  0.511797904968262,
  0.511918902397156,
  0.51203989982605,
  0.512160897254944,
  0.512281954288483,
  0.512403011322021,
  0.51252406835556,
  0.512645125389099,
  0.512766182422638,
  0.512887299060822,
  0.51300835609436,
  0.513129472732544,
  0.513250589370728,
  0.513371765613556,
  0.51349288225174,
  0.513614058494568,
  0.513735234737396,
  0.513856410980225,
  0.513977587223053,
  0.514098823070526,
  0.514219999313354,
  0.514341235160828,
  0.514462471008301,
  0.514583766460419,
  0.514705002307892,
  0.51482629776001,
  0.514947593212128,
  0.515068888664246,
  0.515190184116364,
  0.515311539173126,
  0.515432894229889,
  0.515554249286652,
  0.515675604343414,
  0.515796959400177,
  0.51591831445694,
  0.516039729118347,
  0.516161143779755,
  0.516282558441162,
  0.516404032707214,
  0.516525447368622,
  0.516646921634674,
  0.516768395900726,
  0.516889870166779,
  0.517011344432831,
  0.517132878303528,
  0.517254412174225,
  0.517375946044922,
  0.517497479915619,
  0.517619013786316,
  0.517740607261658,
  0.517862141132355,
  0.517983734607697,
  0.518105387687683,
  0.518226981163025,
  0.518348574638367,
  0.518470227718353,
  0.51859188079834,
  0.518713533878326,
  0.518835246562958,
  0.518956899642944,
  0.519078612327576,
  0.519200325012207,
  0.519322037696838,
  0.519443809986115,
  0.519565522670746,
  0.519687294960022,
  0.519809067249298,
  0.519930839538574,
  0.520052671432495,
  0.520174443721771,
  0.520296275615692,
  0.520418107509613,
  0.520539999008179,
  0.5206618309021,
  0.520783722400665,
  0.520905554294586,
  0.521027505397797,
  0.521149396896362,
  0.521271288394928,
  0.521393239498138,
  0.521515190601349,
  0.521637141704559,
  0.52175909280777,
  0.521881103515625,
  0.522003054618835,
  0.522125065326691,
  0.522247076034546,
  0.522369146347046,
  0.522491157054901,
  0.522613227367401,
  0.522735297679901,
  0.522857367992401,
  0.522979438304901,
  0.523101568222046,
  0.523223698139191,
  0.523345768451691,
  0.52346795797348,
  0.523590087890625,
  0.523712277412415,
  0.523834407329559,
  0.523956596851349,
  0.524078786373138,
  0.524201035499573,
  0.524323225021362,
  0.524445474147797,
  0.524567723274231,
  0.524689972400665,
  0.524812281131744,
  0.524934530258179,
  0.525056838989258,
  0.525179147720337,
  0.525301516056061,
  0.52542382478714,
  0.525546193122864,
  0.525668501853943,
  0.525790929794312,
  0.525913298130035,
  0.526035666465759,
  0.526158094406128,
  0.526280522346497,
  0.526402950286865,
  0.526525378227234,
  0.526647865772247,
  0.526770353317261,
  0.526892781257629,
  0.527015328407288,
  0.527137815952301,
  0.527260363101959,
  0.527382850646973,
  0.527505397796631,
  0.527627944946289,
  0.527750551700592,
  0.527873158454895,
  0.527995705604553,
  0.528118312358856,
  0.528240978717804,
  0.528363585472107,
  0.528486251831055,
  0.528608918190002,
  0.52873158454895,
  0.528854250907898,
  0.528976917266846,
  0.529099643230438,
  0.529222369194031,
  0.529345095157623,
  0.529467821121216,
  0.529590606689453,
  0.529713332653046,
  0.529836118221283,
  0.529958963394165,
  0.530081748962402,
  0.53020453453064,
  0.530327379703522,
  0.530450224876404,
  0.530573129653931,
  0.530695974826813,
  0.53081887960434,
  0.530941724777222,
  0.531064629554749,
  0.53118759393692,
  0.531310498714447,
  0.531433463096619,
  0.53155642747879,
  0.531679391860962,
  0.531802356243134,
  0.531925320625305,
  0.532048344612122,
  0.532171368598938,
  0.532294392585754,
  0.532417476177216,
  0.532540500164032,
  0.532663583755493,
  0.532786667346954,
  0.532909750938416,
  0.533032834529877,
  0.533155977725983,
  0.533279120922089,
  0.533402264118195,
  0.533525407314301,
  0.533648610115051,
  0.533771753311157,
  0.533894956111908,
  0.534018158912659,
  0.534141421318054,
  0.534264624118805,
  0.5343878865242,
  0.534511148929596,
  0.534634411334991,
  0.534757673740387,
  0.534880995750427,
  0.535004317760468,
  0.535127639770508,
  0.535250961780548,
  0.535374283790588,
  0.535497665405273,
  0.535621047019958,
  0.535744428634644,
  0.535867810249329,
  0.535991251468658,
  0.536114633083344,
  0.536238074302673,
  0.536361515522003,
  0.536485016345978,
  0.536608457565308,
  0.536731958389282,
  0.536855459213257,
  0.536978960037231,
  0.537102520465851,
  0.537226021289825,
  0.537349581718445,
  0.537473142147064,
  0.537596702575684,
  0.537720322608948,
  0.537843883037567,
  0.537967503070831,
  0.538091123104095,
  0.538214802742004,
  0.538338422775269,
  0.538462102413177,
  0.538585782051086,
  0.538709461688995,
  0.538833200931549,
  0.538956880569458,
  0.539080619812012,
  0.539204359054565,
  0.539328157901764,
  0.539451897144318,
  0.539575695991516,
  0.539699494838715,
  0.539823293685913,
  0.539947092533112,
  0.54007089138031,
  0.540194749832153,
  0.540318608283997,
  0.54044246673584,
  0.540566384792328,
  0.540690243244171,
  0.540814161300659,
  0.540938079357147,
  0.54106205701828,
  0.541185975074768,
  0.541309952735901,
  0.541433930397034,
  0.541557908058167,
  0.541681885719299,
  0.541805922985077,
  0.541929960250854,
  0.542053997516632,
  0.54217803478241,
  0.542302072048187,
  0.54242616891861,
  0.542550265789032,
  0.542674362659454,
  0.542798459529877,
  0.542922616004944,
  0.543046712875366,
  0.543170869350433,
  0.543295085430145,
  0.543419241905212,
  0.543543457984924,
  0.543667614459991,
  0.543791830539703,
  0.54391610622406,
  0.544040322303772,
  0.544164597988129,
  0.544288873672485,
  0.544413149356842,
  0.544537425041199,
  0.5446617603302,
  0.544786036014557,
  0.544910371303558,
  0.545034766197205,
  0.545159101486206,
  0.545283496379852,
  0.545407891273499,
  0.545532286167145,
  0.545656681060791,
  0.545781135559082,
  0.545905530452728,
  0.546029984951019,
  0.54615443944931,
  0.546278953552246,
  0.546403408050537,
  0.546527922153473,
  0.546652436256409,
  0.546776950359344,
  0.546901524066925,
  0.547026097774506,
  0.547150671482086,
  0.547275245189667,
  0.547399818897247,
  0.547524452209473,
  0.547649085521698,
  0.547773718833923,
  0.547898352146149,
  0.548022985458374,
  0.548147678375244,
  0.548272371292114,
  0.548397064208984,
  0.548521757125854,
  0.548646509647369,
  0.548771262168884,
  0.548896014690399,
  0.549020767211914,
  0.549145519733429,
  0.549270331859589,
  0.549395143985748,
  0.549519956111908,
  0.549644768238068,
  0.549769639968872,
  0.549894511699677,
  0.550019383430481,
  0.550144255161285,
  0.55026912689209,
  0.550394058227539,
  0.550518989562988,
  0.550643920898438,
  0.550768852233887,
  0.550893843173981,
  0.551018834114075,
  0.551143825054169,
  0.551268815994263,
  0.551393806934357,
  0.551518857479095,
  0.551643908023834,
  0.551768958568573,
  0.551894009113312,
  0.552019119262695,
  0.552144169807434,
  0.552269279956818,
  0.552394449710846,
  0.552519559860229,
  0.552644729614258,
  0.552769899368286,
  0.552895069122314,
  0.553020238876343,
  0.553145408630371,
  0.553270637989044,
  0.553395867347717,
  0.55352109670639,
  0.553646385669708,
  0.553771615028381,
  0.553896903991699,
  0.554022192955017,
  0.55414754152298,
  0.554272830486298,
  0.55439817905426,
  0.554523527622223,
  0.554648876190186,
  0.554774284362793,
  0.554899632930756,
  0.555025041103363,
  0.55515044927597,
  0.555275917053223,
  0.55540132522583,
  0.555526793003082,
  0.555652260780334,
  0.555777728557587,
  0.555903255939484,
  0.556028723716736,
  0.556154251098633,
  0.55627977848053,
  0.556405365467072,
  0.556530892848969,
  0.55665647983551,
  0.556782066822052,
  0.556907653808594,
  0.55703330039978,
  0.557158946990967,
  0.557284533977509,
  0.55741024017334,
  0.557535886764526,
  0.557661592960358,
  0.557787299156189,
  0.55791300535202,
  0.558038711547852,
  0.558164417743683,
  0.558290183544159,
  0.558415949344635,
  0.558541715145111,
  0.558667480945587,
  0.558793306350708,
  0.558919131755829,
  0.55904495716095,
  0.559170782566071,
  0.559296667575836,
  0.559422552585602,
  0.559548437595367,
  0.559674322605133,
  0.559800207614899,
  0.559926152229309,
  0.560052096843719,
  0.56017804145813,
  0.560304045677185,
  0.560429990291595,
  0.560555994510651,
  0.560681998729706,
  0.560808002948761,
  0.560934066772461,
  0.561060070991516,
  0.561186134815216,
  0.561312258243561,
  0.561438322067261,
  0.561564445495605,
  0.561690509319305,
  0.56181663274765,
  0.56194281578064,
  0.562068939208984,
  0.562195122241974,
  0.562321305274963,
  0.562447488307953,
  0.562573730945587,
  0.562699913978577,
  0.562826156616211,
  0.56295245885849,
  0.563078701496124,
  0.563204944133759,
  0.563331246376038,
  0.563457548618317,
  0.56358391046524,
  0.56371021270752,
  0.563836574554443,
  0.563962936401367,
  0.564089298248291,
  0.56421571969986,
  0.564342081546783,
  0.564468502998352,
  0.564594924449921,
  0.564721345901489,
  0.564847826957703,
  0.564974308013916,
  0.565100789070129,
  0.565227270126343,
  0.565353810787201,
  0.565480291843414,
  0.565606832504272,
  0.565733373165131,
  0.565859973430634,
  0.565986573696136,
  0.566113114356995,
  0.566239774227142,
  0.566366374492645,
  0.566492974758148,
  0.566619634628296,
  0.566746294498444,
  0.566873013973236,
  0.566999673843384,
  0.567126393318176,
  0.567253112792969,
  0.567379832267761,
  0.567506551742554,
  0.567633330821991,
  0.567760109901428,
  0.567886888980865,
  0.568013668060303,
  0.568140506744385,
  0.568267345428467,
  0.568394184112549,
  0.568521022796631,
  0.568647861480713,
  0.56877475976944,
  0.568901658058167,
  0.569028556346893,
  0.569155514240265,
  0.569282412528992,
  0.569409370422363,
  0.56953638792038,
  0.569663345813751,
  0.569790303707123,
  0.569917321205139,
  0.570044338703156,
  0.570171415805817,
  0.570298433303833,
  0.570425510406494,
  0.570552587509155,
  0.570679664611816,
  0.570806801319122,
  0.570933878421783,
  0.571061015129089,
  0.571188151836395,
  0.571315348148346,
  0.571442484855652,
  0.571569681167603,
  0.571696877479553,
  0.571824133396149,
  0.571951329708099,
  0.572078585624695,
  0.57220584154129,
  0.572333097457886,
  0.572460412979126,
  0.572587728500366,
  0.572715044021606,
  0.572842359542847,
  0.572969675064087,
  0.573097050189972,
  0.573224425315857,
  0.573351800441742,
  0.573479175567627,
  0.573606610298157,
  0.573734045028687,
  0.573861479759216,
  0.573988914489746,
  0.574116408824921,
  0.574243903160095,
  0.57437139749527,
  0.574498891830444,
  0.574626386165619,
  0.574753940105438,
  0.574881494045258,
  0.575009047985077,
  0.575136661529541,
  0.57526421546936,
  0.575391829013824,
  0.575519442558289,
  0.575647115707397,
  0.575774729251862,
  0.57590240240097,
  0.576030075550079,
  0.576157808303833,
  0.576285481452942,
  0.576413214206696,
  0.576540946960449,
  0.576668679714203,
  0.576796472072601,
  0.576924264431,
  0.577052056789398,
  0.577179849147797,
  0.577307641506195,
  0.577435493469238,
  0.577563345432281,
  0.577691197395325,
  0.577819108963013,
  0.577946960926056,
  0.578074872493744,
  0.578202784061432,
  0.578330755233765,
  0.578458666801453,
  0.578586637973785,
  0.578714609146118,
  0.578842580318451,
  0.578970611095428,
  0.579098641872406,
  0.579226672649384,
  0.579354703426361,
  0.579482793807983,
  0.579610824584961,
  0.579738914966583,
  0.57986706495285,
  0.579995155334473,
  0.58012330532074,
  0.580251455307007,
  0.580379605293274,
  0.580507755279541,
  0.580635964870453,
  0.580764174461365,
  0.580892384052277,
  0.581020593643188,
  0.581148862838745,
  0.581277132034302,
  0.581405401229858,
  0.581533670425415,
  0.581661999225616,
  0.581790328025818,
  0.581918656826019,
  0.582046985626221,
  0.582175374031067,
  0.582303702831268,
  0.582432091236115,
  0.582560539245605,
  0.582688927650452,
  0.582817375659943,
  0.582945823669434,
  0.583074271678925,
  0.58320277929306,
  0.583331227302551,
  0.583459734916687,
  0.583588242530823,
  0.583716809749603,
  0.583845317363739,
  0.58397388458252,
  0.5841024518013,
  0.584231078624725,
  0.584359705448151,
  0.584488272666931,
  0.584616959095001,
  0.584745585918427,
  0.584874212741852,
  0.585002899169922,
  0.585131585597992,
  0.585260331630707,
  0.585389018058777,
  0.585517764091492,
  0.585646510124207,
  0.585775315761566,
  0.585904061794281,
  0.586032867431641,
  0.586161673069,
  0.58629047870636,
  0.586419343948364,
  0.586548209190369,
  0.586677014827728,
  0.586805939674377,
  0.586934804916382,
  0.587063729763031,
  0.58719265460968,
  0.587321579456329,
  0.587450563907623,
  0.587579488754272,
  0.587708473205566,
  0.58783745765686,
  0.587966501712799,
  0.588095545768738,
  0.588224530220032,
  0.588353633880615,
  0.588482677936554,
  0.588611781597137,
  0.588740885257721,
  0.588869988918304,
  0.588999092578888,
  0.589128255844116,
  0.589257419109344,
  0.589386582374573,
  0.589515745639801,
  0.589644968509674,
  0.589774191379547,
  0.58990341424942,
  0.590032637119293,
  0.590161919593811,
  0.590291142463684,
  0.590420484542847,
  0.590549767017365,
  0.590679109096527,
  0.590808391571045,
  0.590937733650208,
  0.591067135334015,
  0.591196477413177,
  0.591325879096985,
  0.591455280780792,
  0.5915846824646,
  0.591714143753052,
  0.591843605041504,
  0.591973066329956,
  0.592102527618408,
  0.592232048511505,
  0.592361569404602,
  0.592491030693054,
  0.592620611190796,
  0.592750132083893,
  0.592879712581635,
  0.593009293079376,
  0.593138873577118,
  0.593268513679504,
  0.593398153781891,
  0.593527793884277,
  0.593657433986664,
  0.59378707408905,
  0.593916773796082,
  0.594046473503113,
  0.594176173210144,
  0.59430593252182,
  0.594435691833496,
  0.594565391540527,
  0.594695210456848,
  0.594824969768524,
  0.594954788684845,
  0.595084607601166,
  0.595214426517487,
  0.595344305038452,
  0.595474123954773,
  0.595604002475739,
  0.595733940601349,
  0.595863819122314,
  0.595993757247925,
  0.596123695373535,
  0.596253633499146,
  0.596383571624756,
  0.596513569355011,
  0.596643567085266,
  0.596773564815521,
  0.596903622150421,
  0.597033679485321,
  0.597163736820221,
  0.597293794155121,
  0.597423851490021,
  0.597553968429565,
  0.59768408536911,
  0.597814202308655,
  0.597944378852844,
  0.598074495792389,
  0.598204672336578,
  0.598334908485413,
  0.598465085029602,
  0.598595321178436,
  0.598725557327271,
  0.598855793476105,
  0.598986029624939,
  0.599116325378418,
  0.599246621131897,
  0.599376916885376,
  0.5995072722435,
  0.599637627601624,
  0.599767923355103,
  0.599898338317871,
  0.600028693675995,
  0.600159108638763,
  0.600289523601532,
  0.600419938564301,
  0.600550413131714,
  0.600680828094482,
  0.600811302661896,
  0.600941836833954,
  0.601072311401367,
  0.601202845573425,
  0.601333379745483,
  0.601463913917542,
  0.601594507694244,
  0.601725041866302,
  0.601855635643005,
  0.601986289024353,
  0.602116882801056,
  0.602247536182404,
  0.602378189563751,
  0.602508842945099,
  0.602639555931091,
  0.602770268917084,
  0.602900981903076,
  0.603031694889069,
  0.603162467479706,
  0.603293180465698,
  0.603423953056335,
  0.603554785251617,
  0.603685557842255,
  0.603816390037537,
  0.603947222232819,
  0.604078054428101,
  0.604208946228027,
  0.604339838027954,
  0.604470729827881,
  0.604601621627808,
  0.604732573032379,
  0.604863524436951,
  0.604994475841522,
  0.605125427246094,
  0.60525643825531,
  0.605387449264526,
  0.605518460273743,
  0.605649471282959,
  0.60578054189682,
  0.605911612510681,
  0.606042683124542,
  0.606173753738403,
  0.606304883956909,
  0.606436014175415,
  0.606567144393921,
  0.606698274612427,
  0.606829464435577,
  0.606960654258728,
  0.607091844081879,
  0.607223093509674,
  0.607354283332825,
  0.60748553276062,
  0.60761684179306,
  0.607748091220856,
  0.607879400253296,
  0.608010709285736,
  0.608142018318176,
  0.608273386955261,
  0.608404695987701,
  0.608536064624786,
  0.608667492866516,
  0.608798861503601,
  0.608930289745331,
  0.609061717987061,
  0.60919314622879,
  0.609324634075165,
  0.609456121921539,
  0.609587609767914,
  0.609719097614288,
  0.609850645065308,
  0.609982132911682,
  0.610113739967346,
  0.610245287418365,
  0.61037689447403,
  0.610508441925049,
  0.610640108585358,
  0.610771715641022,
  0.610903382301331,
  0.611035048961639,
  0.611166715621948,
  0.611298382282257,
  0.611430108547211,
  0.611561834812164,
  0.611693561077118,
  0.611825346946716,
  0.61195707321167,
  0.612088859081268,
  0.612220704555511,
  0.61235249042511,
  0.612484335899353,
  0.612616181373596,
  0.612748026847839,
  0.612879931926727,
  0.613011837005615,
  0.613143742084503,
  0.613275647163391,
  0.613407611846924,
  0.613539516925812,
  0.613671481609344,
  0.613803505897522,
  0.613935470581055,
  0.614067494869232,
  0.614199578762054,
  0.614331603050232,
  0.614463686943054,
  0.614595770835876,
  0.614727854728699,
  0.614859938621521,
  0.614992082118988,
  0.615124225616455,
  0.615256369113922,
  0.615388572216034,
  0.615520775318146,
  0.615652978420258,
  0.615785181522369,
  0.615917384624481,
  0.616049647331238,
  0.616181910037994,
  0.616314232349396,
  0.616446495056152,
  0.616578817367554,
  0.616711139678955,
  0.616843521595001,
  0.616975843906403,
  0.617108225822449,
  0.617240607738495,
  0.617373049259186,
  0.617505431175232,
  0.617637872695923,
  0.617770373821259,
  0.617902815341949,
  0.618035316467285,
  0.618167817592621,
  0.618300318717957,
  0.618432879447937,
  0.618565440177917,
  0.618698000907898,
  0.618830561637878,
  0.618963181972504,
  0.619095742702484,
  0.619228422641754,
  0.619361042976379,
  0.619493722915649,
  0.619626402854919,
  0.619759082794189,
  0.619891762733459,
  0.620024502277374,
  0.620157241821289,
  0.620289981365204,
  0.620422780513763,
  0.620555579662323,
  0.620688378810883,
  0.620821177959442,
  0.620953977108002,
  0.621086835861206,
  0.62121969461441,
  0.62135261297226,
  0.621485471725464,
  0.621618390083313,
  0.621751308441162,
  0.621884286403656,
  0.62201726436615,
  0.622150182723999,
  0.622283220291138,
  0.622416198253632,
  0.62254923582077,
  0.622682273387909,
  0.622815310955048,
  0.622948408126831,
  0.623081505298615,
  0.623214602470398,
  0.623347699642181,
  0.62348085641861,
  0.623614013195038,
  0.623747169971466,
  0.623880326747894,
  0.624013543128967,
  0.62414675951004,
  0.624279975891113,
  0.624413251876831,
  0.624546527862549,
  0.624679744243622,
  0.624813079833984,
  0.624946355819702,
  0.625079691410065,
  0.625213027000427,
  0.625346422195435,
  0.625479757785797,
  0.625613152980804,
  0.625746548175812,
  0.625880002975464,
  0.626013457775116,
  0.626146912574768,
  0.62628036737442,
  0.626413822174072,
  0.626547336578369,
  0.626680850982666,
  0.626814424991608,
  0.626947939395905,
  0.627081513404846,
  0.627215087413788,
  0.627348721027374,
  0.627482295036316,
  0.627615928649902,
  0.627749562263489,
  0.62788325548172,
  0.628016948699951,
  0.628150641918182,
  0.628284335136414,
  0.62841808795929,
  0.628551781177521,
  0.628685593605042,
  0.628819346427917,
  0.628953158855438,
  0.629086911678314,
  0.62922078371048,
  0.629354596138,
  0.629488468170166,
  0.629622340202332,
  0.629756212234497,
  0.629890143871307,
  0.630024075508118,
  0.630158007144928,
  0.630291938781738,
  0.630425930023193,
  0.630559861660004,
  0.630693912506104,
  0.630827903747559,
  0.630961954593658,
  0.631096005439758,
  0.631230056285858,
  0.631364166736603,
  0.631498277187347,
  0.631632387638092,
  0.631766498088837,
  0.631900668144226,
  0.632034838199615,
  0.632169008255005,
  0.632303178310394,
  0.632437407970428,
  0.632571637630463,
  0.632705867290497,
  0.632840156555176,
  0.63297438621521,
  0.633108735084534,
  0.633243024349213,
  0.633377313613892,
  0.633511662483215,
  0.633646070957184,
  0.633780419826508,
  0.633914828300476,
  0.634049236774445,
  0.634183645248413,
  0.634318113327026,
  0.634452521800995,
  0.634587049484253,
  0.634721517562866,
  0.634856045246124,
  0.634990513324738,
  0.63512510061264,
  0.635259628295898,
  0.635394215583801,
  0.635528802871704,
  0.635663390159607,
  0.635798037052155,
  0.635932683944702,
  0.63606733083725,
  0.636201977729797,
  0.63633668422699,
  0.636471390724182,
  0.636606097221375,
  0.636740863323212,
  0.636875569820404,
  0.637010335922241,
  0.637145161628723,
  0.63727992773056,
  0.637414753437042,
  0.637549579143524,
  0.637684464454651,
  0.637819349765778,
  0.637954235076904,
  0.638089120388031,
  0.638224005699158,
  0.638358950614929,
  0.638493895530701,
  0.638628900051117,
  0.638763844966888,
  0.638898849487305,
  0.639033854007721,
  0.639168918132782,
  0.639303982257843,
  0.639439046382904,
  0.639574110507965,
  0.639709234237671,
  0.639844357967377,
  0.639979481697083,
  0.640114605426788,
  0.640249788761139,
  0.64038497209549,
  0.64052015542984,
  0.640655398368835,
  0.640790581703186,
  0.640925884246826,
  0.641061127185822,
  0.641196429729462,
  0.641331672668457,
  0.641467034816742,
  0.641602337360382,
  0.641737699508667,
  0.641873061656952,
  0.642008423805237,
  0.642143845558167,
  0.642279267311096,
  0.642414689064026,
  0.642550110816956,
  0.64268559217453,
  0.642821073532104,
  0.642956614494324,
  0.643092095851898,
  0.643227636814117,
  0.643363177776337,
  0.643498778343201,
  0.64363431930542,
  0.643769919872284,
  0.643905520439148,
  0.644041180610657,
  0.644176840782166,
  0.644312500953674,
  0.644448161125183,
  0.644583880901337,
  0.64471960067749,
  0.644855320453644,
  0.644991099834442,
  0.64512687921524,
  0.645262658596039,
  0.645398437976837,
  0.64553427696228,
  0.645670115947723,
  0.645805954933167,
  0.64594179391861,
  0.646077692508698,
  0.646213591098785,
  0.646349489688873,
  0.646485447883606,
  0.646621406078339,
  0.646757364273071,
  0.646893322467804,
  0.647029340267181,
  0.647165358066559,
  0.647301435470581,
  0.647437453269958,
  0.647573530673981,
  0.647709608078003,
  0.64784574508667,
  0.647981822490692,
  0.648117959499359,
  0.648254156112671,
  0.648390293121338,
  0.64852648973465,
  0.648662686347961,
  0.648798942565918,
  0.648935198783875,
  0.649071395397186,
  0.649207711219788,
  0.649343967437744,
  0.649480283260345,
  0.649616599082947,
  0.649752974510193,
  0.649889290332794,
  0.65002566576004,
  0.650162100791931,
  0.650298476219177,
  0.650434911251068,
  0.650571346282959,
  0.650707840919495,
  0.650844275951385,
  0.650980770587921,
  0.651117324829102,
  0.651253819465637,
  0.651390373706818,
  0.651526927947998,
  0.651663541793823,
  0.651800096035004,
  0.651936709880829,
  0.652073383331299,
  0.652209997177124,
  0.652346670627594,
  0.652483344078064,
  0.652620077133179,
  0.652756750583649,
  0.652893483638763,
  0.653030276298523,
  0.653167009353638,
  0.653303802013397,
  0.653440594673157,
  0.653577446937561,
  0.653714299201965,
  0.653851091861725,
  0.653988003730774,
  0.654124855995178,
  0.654261767864227,
  0.654398679733276,
  0.65453565120697,
  0.654672622680664,
  0.654809594154358,
  0.654946565628052,
  0.65508359670639,
  0.655220627784729,
  0.655357658863068,
  0.655494689941406,
  0.65563178062439,
  0.655768871307373,
  0.655905961990356,
  0.656043112277985,
  0.656180262565613,
  0.656317412853241,
  0.656454622745514,
  0.656591773033142,
  0.656728982925415,
  0.656866252422333,
  0.657003462314606,
  0.657140731811523,
  0.657278060913086,
  0.657415330410004,
  0.657552659511566,
  0.657689988613129,
  0.657827377319336,
  0.657964706420898,
  0.658102095127106,
  0.658239543437958,
  0.658376932144165,
  0.658514380455017,
  0.658651828765869,
  0.658789336681366,
  0.658926784992218,
  0.659064292907715,
  0.659201860427856,
  0.659339368343353,
  0.659476935863495,
  0.659614503383636,
  0.659752130508423,
  0.659889757633209,
  0.660027384757996,
  0.660165011882782,
  0.660302698612213,
  0.660440385341644,
  0.660578072071075,
  0.660715758800507,
  0.660853505134583,
  0.660991251468658,
  0.661129057407379,
  0.661266803741455,
  0.661404669284821,
  0.661542475223541,
  0.661680281162262,
  0.661818146705627,
  0.661956012248993,
  0.662093937397003,
  0.662231862545013,
  0.662369787693024,
  0.662507712841034,
  0.662645697593689,
  0.662783622741699,
  0.662921667098999,
  0.663059651851654,
  0.663197696208954,
  0.663335740566254,
  0.663473844528198,
  0.663611888885498,
  0.663749992847443,
  0.663888156414032,
  0.664026260375977,
  0.664164423942566,
  0.664302587509155,
  0.664440810680389,
  0.664578974246979,
  0.664717257022858,
  0.664855480194092,
  0.664993703365326,
  0.665131986141205,
  0.665270328521729,
  0.665408611297607,
  0.665546953678131,
  0.665685296058655,
  0.665823698043823,
  0.665962040424347,
  0.666100442409515,
  0.666238903999329,
  0.666377305984497,
  0.66651576757431,
  0.666654229164124,
  0.666792750358582,
  0.66693127155304,
  0.667069792747498,
  0.667208313941956,
  0.667346894741058,
  0.667485475540161,
  0.667624056339264,
  0.667762696743011,
  0.667901337146759,
  0.668039977550507,
  0.668178617954254,
  0.668317317962646,
  0.668456017971039,
  0.668594777584076,
  0.668733477592468,
  0.668872237205505,
  0.669011056423187,
  0.669149816036224,
  0.669288635253906,
  0.669427454471588,
  0.669566333293915,
  0.669705152511597,
  0.669844031333923,
  0.669982969760895,
  0.670121848583221,
  0.670260787010193,
  0.670399785041809,
  0.670538723468781,
  0.670677721500397,
  0.670816719532013,
  0.670955777168274,
  0.67109477519989,
  0.671233832836151,
  0.671372950077057,
  0.671512067317963,
  0.671651124954224,
  0.671790301799774,
  0.67192941904068,
  0.67206859588623,
  0.672207772731781,
  0.672347009181976,
  0.672486245632172,
  0.672625482082367,
  0.672764718532562,
  0.672904014587402,
  0.673043310642242,
  0.673182606697083,
  0.673321902751923,
  0.673461258411407,
  0.673600673675537,
  0.673740029335022,
  0.673879444599152,
  0.674018859863281,
  0.674158275127411,
  0.674297749996185,
  0.67443722486496,
  0.674576699733734,
  0.674716234207153,
  0.674855768680573,
  0.674995303153992,
  0.675134897232056,
  0.675274431705475,
  0.675414025783539,
  0.675553679466248,
  0.675693333148956,
  0.675832986831665,
  0.675972640514374,
  0.676112353801727,
  0.676252007484436,
  0.676391780376434,
  0.676531493663788,
  0.676671266555786,
  0.676811039447784,
  0.676950871944427,
  0.677090644836426,
  0.677230536937714,
  0.677370369434357,
  0.677510261535645,
  0.677650153636932,
  0.67779004573822,
  0.677929937839508,
  0.678069889545441,
  0.678209841251373,
  0.678349852561951,
  0.678489863872528,
  0.678629875183105,
  0.678769886493683,
  0.678909957408905,
  0.679050028324127,
  0.679190158843994,
  0.679330229759216,
  0.679470360279083,
  0.67961049079895,
  0.679750680923462,
  0.679890871047974,
  0.680031061172485,
  0.680171251296997,
  0.680311501026154,
  0.68045175075531,
  0.680592060089111,
  0.680732369422913,
  0.680872678756714,
  0.681012988090515,
  0.681153297424316,
  0.681293666362762,
  0.681434094905853,
  0.681574463844299,
  0.68171489238739,
  0.681855320930481,
  0.681995809078217,
  0.682136297225952,
  0.682276785373688,
  0.682417273521423,
  0.682557821273804,
  0.682698369026184,
  0.682838916778564,
  0.68297952413559,
  0.683120131492615,
  0.68326073884964,
  0.68340140581131,
  0.683542013168335,
  0.68368273973465,
  0.68382340669632,
  0.683964133262634,
  0.684104859828949,
  0.684245586395264,
  0.684386372566223,
  0.684527158737183,
  0.684668004512787,
  0.684808790683746,
  0.684949636459351,
  0.685090482234955,
  0.685231387615204,
  0.685372292995453,
  0.685513198375702,
  0.685654163360596,
  0.68579512834549,
  0.685936093330383,
  0.686077058315277,
  0.686218082904816,
  0.686359107494354,
  0.686500132083893,
  0.686641216278076,
  0.68678230047226,
  0.686923384666443,
  0.687064528465271,
  0.687205672264099,
  0.687346816062927,
  0.6874880194664,
  0.687629222869873,
  0.687770426273346,
  0.687911689281464,
  0.688052892684937,
  0.688194155693054,
  0.688335478305817,
  0.688476800918579,
  0.688618123531342,
  0.688759446144104,
  0.688900828361511,
  0.689042210578918,
  0.689183592796326,
  0.689325034618378,
  0.68946647644043,
  0.689607918262482,
  0.689749419689178,
  0.689890921115875,
  0.690032422542572,
  0.690173923969269,
  0.69031548500061,
  0.690457046031952,
  0.690598666667938,
  0.690740287303925,
  0.690881907939911,
  0.691023528575897,
  0.691165208816528,
  0.691306889057159,
  0.691448569297791,
  0.691590309143066,
  0.691732048988342,
  0.691873788833618,
  0.692015588283539,
  0.692157387733459,
  0.69229918718338,
  0.692441046237946,
  0.692582905292511,
  0.692724764347076,
  0.692866623401642,
  0.693008542060852,
  0.693150460720062,
  0.693292438983917,
  0.693434417247772,
  0.693576395511627,
  0.693718373775482,
  0.693860411643982,
  0.694002449512482,
  0.694144487380981,
  0.694286584854126,
  0.694428682327271,
  0.694570779800415,
  0.694712936878204,
  0.694855093955994,
  0.694997251033783,
  0.695139467716217,
  0.695281684398651,
  0.695423901081085,
  0.695566117763519,
  0.695708394050598,
  0.695850670337677,
  0.695993006229401,
  0.696135342121124,
  0.696277678012848,
  0.696420013904572,
  0.69656240940094,
  0.696704804897308,
  0.696847200393677,
  0.69698965549469,
  0.697132110595703,
  0.697274625301361,
  0.697417080402374,
  0.697559595108032,
  0.697702169418335,
  0.697844684123993,
  0.697987258434296,
  0.698129892349243,
  0.698272466659546,
  0.698415100574493,
  0.698557734489441,
  0.698700428009033,
  0.698843121528625,
  0.698985815048218,
  0.699128568172455,
  0.699271261692047,
  0.699414074420929,
  0.699556827545166,
  0.699699640274048,
  0.69984245300293,
  0.699985325336456,
  0.700128138065338,
  0.700271010398865,
  0.700413942337036,
  0.700556874275208,
  0.700699806213379,
  0.70084273815155,
  0.700985729694366,
  0.701128721237183,
  0.701271712779999,
  0.70141476392746,
  0.701557815074921,
  0.701700866222382,
  0.701843976974487,
  0.701987087726593,
  0.702130198478699,
  0.702273368835449,
  0.7024165391922,
  0.70255970954895,
  0.702702939510345,
  0.702846169471741,
  0.702989399433136,
  0.703132688999176,
  0.703275918960571,
  0.703419268131256,
  0.703562557697296,
  0.703705906867981,
  0.703849256038666,
  0.703992664813995,
  0.70413601398468,
  0.704279482364655,
  0.704422891139984,
  0.704566359519958,
  0.704709827899933,
  0.704853355884552,
  0.704996824264526,
  0.705140352249146,
  0.705283939838409,
  0.705427527427673,
  0.705571115016937,
  0.705714702606201,
  0.70585834980011,
  0.706001996994019,
  0.706145644187927,
  0.706289350986481,
  0.706433057785034,
  0.706576764583588,
  0.706720530986786,
  0.706864297389984,
  0.707008123397827,
  0.707151889801025,
  0.707295715808868,
  0.707439601421356,
  0.707583427429199,
  0.707727313041687,
  0.70787125825882,
  0.708015143871307,
  0.70815908908844,
  0.708303034305573,
  0.70844703912735,
  0.708591043949127,
  0.708735048770905,
  0.708879113197327,
  0.709023177623749,
  0.709167242050171,
  0.709311366081238,
  0.709455490112305,
  0.709599614143372,
  0.709743797779083,
  0.70988792181015,
  0.710032165050507,
  0.710176348686218,
  0.710320591926575,
  0.710464835166931,
  0.710609138011932,
  0.710753440856934,
  0.710897743701935,
  0.711042106151581,
  0.711186468601227,
  0.711330831050873,
  0.711475193500519,
  0.71161961555481,
  0.7117640376091,
  0.711908519268036,
  0.712053000926971,
  0.712197482585907,
  0.712342023849487,
  0.712486505508423,
  0.712631106376648,
  0.712775647640228,
  0.712920248508453,
  0.713064849376678,
  0.713209509849548,
  0.713354170322418,
  0.713498830795288,
  0.713643491268158,
  0.713788211345673,
  0.713932931423187,
  0.714077711105347,
  0.714222490787506,
  0.714367270469666,
  0.714512050151825,
  0.714656889438629,
  0.714801728725433,
  0.714946627616882,
  0.715091526508331,
  0.71523642539978,
  0.715381324291229,
  0.715526282787323,
  0.715671241283417,
  0.715816259384155,
  0.715961277484894,
  0.716106295585632,
  0.716251313686371,
  0.716396391391754,
  0.716541528701782,
  0.716686606407166,
  0.716831743717194,
  0.716976881027222,
  0.717122077941895,
  0.717267215251923,
  0.71741247177124,
  0.717557668685913,
  0.717702925205231,
  0.717848181724548,
  0.717993497848511,
  0.718138813972473,
  0.718284130096436,
  0.718429446220398,
  0.718574821949005,
  0.718720197677612,
  0.718865633010864,
  0.719011068344116,
  0.719156503677368,
  0.719301998615265,
  0.719447433948517,
  0.719592988491058,
  0.719738483428955,
  0.719884037971497,
  0.720029592514038,
  0.720175206661224,
  0.720320820808411,
  0.720466434955597,
  0.720612108707428,
  0.720757782459259,
  0.72090345621109,
  0.721049189567566,
  0.721194863319397,
  0.721340656280518,
  0.721486389636993,
  0.721632182598114,
  0.721778035163879,
  0.721923828125,
  0.722069680690765,
  0.722215592861176,
  0.722361445426941,
  0.722507357597351,
  0.722653329372406,
  0.722799241542816,
  0.722945213317871,
  0.723091244697571,
  0.723237216472626,
  0.723383247852325,
  0.72352933883667,
  0.72367537021637,
  0.723821461200714,
  0.723967611789703,
  0.724113702774048,
  0.724259912967682,
  0.724406063556671,
  0.724552273750305,
  0.724698483943939,
  0.724844694137573,
  0.724990963935852,
  0.725137233734131,
  0.725283563137054,
  0.725429832935333,
  0.725576162338257,
  0.725722551345825,
  0.725868940353394,
  0.726015329360962,
  0.72616171836853,
  0.726308166980743,
  0.726454615592957,
  0.726601123809814,
  0.726747632026672,
  0.72689414024353,
  0.727040708065033,
  0.727187275886536,
  0.727333843708038,
  0.727480411529541,
  0.727627038955688,
  0.727773725986481,
  0.727920353412628,
  0.72806704044342,
  0.728213727474213,
  0.72836047410965,
  0.728507220745087,
  0.728653967380524,
  0.728800773620605,
  0.728947579860687,
  0.729094386100769,
  0.729241251945496,
  0.729388117790222,
  0.729535043239594,
  0.72968190908432,
  0.729828834533691,
  0.729975819587708,
  0.730122804641724,
  0.73026978969574,
  0.730416774749756,
  0.730563819408417,
  0.730710864067078,
  0.730857968330383,
  0.731005072593689,
  0.731152176856995,
  0.7312992811203,
  0.731446444988251,
  0.731593608856201,
  0.731740832328796,
  0.731888055801392,
  0.732035279273987,
  0.732182562351227,
  0.732329845428467,
  0.732477128505707,
  0.732624471187592,
  0.732771813869476,
  0.732919156551361,
  0.733066558837891,
  0.73321396112442,
  0.73336136341095,
  0.733508825302124,
  0.733656287193298,
  0.733803808689117,
  0.733951270580292,
  0.734098792076111,
  0.734246373176575,
  0.734393954277039,
  0.734541535377502,
  0.734689176082611,
  0.73483681678772,
  0.734984457492828,
  0.735132098197937,
  0.73527979850769,
  0.735427558422089,
  0.735575258731842,
  0.73572301864624,
  0.735870838165283,
  0.736018598079681,
  0.736166417598724,
  0.736314296722412,
  0.736462116241455,
  0.736609995365143,
  0.736757934093475,
  0.736905872821808,
  0.73705381155014,
  0.737201750278473,
  0.73734974861145,
  0.737497746944427,
  0.73764580488205,
  0.737793862819672,
  0.737941920757294,
  0.738090038299561,
  0.738238096237183,
  0.738386273384094,
  0.738534390926361,
  0.738682568073273,
  0.738830804824829,
  0.738978981971741,
  0.739127278327942,
  0.739275515079498,
  0.739423811435699,
  0.739572107791901,
  0.739720404148102,
  0.739868760108948,
  0.740017116069794,
  0.740165531635284,
  0.740313947200775,
  0.740462362766266,
  0.740610778331757,
  0.740759253501892,
  0.740907788276672,
  0.741056263446808,
  0.741204798221588,
  0.741353392601013,
  0.741501927375793,
  0.741650521755219,
  0.741799175739288,
  0.741947829723358,
  0.742096483707428,
  0.742245137691498,
  0.742393851280212,
  0.742542564868927,
  0.742691338062286,
  0.742840111255646,
  0.742988884449005,
  0.743137717247009,
  0.743286490440369,
  0.743435382843018,
  0.743584275245667,
  0.743733167648315,
  0.743882060050964,
  0.744031012058258,
  0.744179964065552,
  0.744328916072845,
  0.744477927684784,
  0.744626939296722,
  0.744776010513306,
  0.744925081729889,
  0.745074152946472,
  0.7452232837677,
  0.745372414588928,
  0.745521545410156,
  0.745670735836029,
  0.745819926261902,
  0.745969116687775,
  0.746118366718292,
  0.74626761674881,
  0.746416866779327,
  0.74656617641449,
  0.746715486049652,
  0.746864855289459,
  0.747014224529266,
  0.747163593769073,
  0.747313022613525,
  0.747462451457977,
  0.747611880302429,
  0.747761368751526,
  0.747910857200623,
  0.748060345649719,
  0.748209893703461,
  0.748359441757202,
  0.748509049415588,
  0.748658657073975,
  0.748808264732361,
  0.748957872390747,
  0.749107539653778,
  0.749257266521454,
  0.749406933784485,
  0.749556660652161,
  0.749706447124481,
  0.749856173992157,
  0.750005960464478,
  0.750155806541443,
  0.750305652618408,
  0.750455498695374,
  0.750605344772339,
  0.750755250453949,
  0.750905215740204,
  0.751055121421814,
  0.751205086708069,
  0.751355111598969,
  0.751505076885223,
  0.751655101776123,
  0.751805186271667,
  0.751955270767212,
  0.752105355262756,
  0.752255499362946,
  0.75240558385849,
  0.752555787563324,
  0.752705931663513,
  0.752856135368347,
  0.753006398677826,
  0.75315660238266,
  0.753306865692139,
  0.753457188606262,
  0.753607511520386,
  0.753757834434509,
  0.753908216953278,
  0.754058539867401,
  0.754208981990814,
  0.754359364509583,
  0.754509806632996,
  0.754660308361053,
  0.754810750484467,
  0.754961252212524,
  0.755111813545227,
  0.75526237487793,
  0.755412936210632,
  0.75556355714798,
  0.755714178085327,
  0.755864799022675,
  0.756015479564667,
  0.756166100502014,
  0.756316840648651,
  0.756467580795288,
  0.756618320941925,
  0.756769061088562,
  0.756919860839844,
  0.757070660591125,
  0.757221519947052,
  0.757372379302979,
  0.757523238658905,
  0.757674157619476,
  0.757825076580048,
  0.757975995540619,
  0.758126974105835,
  0.758277952671051,
  0.758428990840912,
  0.758580029010773,
  0.758731067180634,
  0.758882164955139,
  0.759033262729645,
  0.75918436050415,
  0.759335517883301,
  0.759486675262451,
  0.759637892246246,
  0.759789109230042,
  0.759940326213837,
  0.760091543197632,
  0.760242819786072,
  0.760394155979156,
  0.760545432567596,
  0.760696768760681,
  0.760848164558411,
  0.76099956035614,
  0.76115095615387,
  0.761302351951599,
  0.761453807353973,
  0.761605322360992,
  0.761756777763367,
  0.761908292770386,
  0.76205986738205,
  0.762211441993713,
  0.762363016605377,
  0.762514591217041,
  0.76266622543335,
  0.762817919254303,
  0.762969553470612,
  0.763121247291565,
  0.763272941112518,
  0.763424694538116,
  0.763576507568359,
  0.763728260993958,
  0.7638800740242,
  0.764031887054443,
  0.764183759689331,
  0.764335632324219,
  0.764487504959106,
  0.764639437198639,
  0.764791369438171,
  0.764943301677704,
  0.765095293521881,
  0.765247344970703,
  0.76539933681488,
  0.765551388263702,
  0.765703499317169,
  0.765855550765991,
  0.766007661819458,
  0.76615983247757,
  0.766312003135681,
  0.766464173793793,
  0.766616404056549,
  0.766768634319305,
  0.766920864582062,
  0.767073154449463,
  0.767225444316864,
  0.767377734184265,
  0.767530083656311,
  0.767682492733002,
  0.767834842205048,
  0.767987251281738,
  0.768139719963074,
  0.768292129039764,
  0.768444657325745,
  0.76859712600708,
  0.76874965429306,
  0.768902182579041,
  0.769054770469666,
  0.769207358360291,
  0.769359946250916,
  0.769512593746185,
  0.769665241241455,
  0.76981794834137,
  0.769970655441284,
  0.770123362541199,
  0.770276129245758,
  0.770428895950317,
  0.770581662654877,
  0.770734488964081,
  0.770887315273285,
  0.771040201187134,
  0.771193087100983,
  0.771345973014832,
  0.771498918533325,
  0.771651864051819,
  0.771804809570312,
  0.771957814693451,
  0.772110819816589,
  0.772263884544373,
  0.772416949272156,
  0.772570013999939,
  0.772723138332367,
  0.772876262664795,
  0.773029386997223,
  0.773182570934296,
  0.773335814476013,
  0.773488998413086,
  0.773642241954803,
  0.773795545101166,
  0.773948848247528,
  0.77410215139389,
  0.774255454540253,
  0.77440881729126,
  0.774562239646912,
  0.774715602397919,
  0.774869024753571,
  0.775022506713867,
  0.775175988674164,
  0.77532947063446,
  0.775482952594757,
  0.775636494159698,
  0.775790095329285,
  0.775943696498871,
  0.776097297668457,
  0.776250898838043,
  0.776404559612274,
  0.776558220386505,
  0.776711940765381,
  0.776865661144257,
  0.777019381523132,
  0.777173161506653,
  0.777327001094818,
  0.777480781078339,
  0.777634620666504,
  0.777788460254669,
  0.777942359447479,
  0.778096318244934,
  0.778250217437744,
  0.778404176235199,
  0.778558135032654,
  0.778712153434753,
  0.778866171836853,
  0.779020190238953,
  0.779174268245697,
  0.779328346252441,
  0.779482483863831,
  0.77963662147522,
  0.779790818691254,
  0.779944956302643,
  0.780099153518677,
  0.780253410339355,
  0.780407667160034,
  0.780561923980713,
  0.780716240406036,
  0.78087055683136,
  0.781024873256683,
  0.781179249286652,
  0.781333684921265,
  0.781488060951233,
  0.781642496585846,
  0.781796991825104,
  0.781951487064362,
  0.782105982303619,
  0.782260477542877,
  0.78241503238678,
  0.782569646835327,
  0.78272420167923,
  0.782878875732422,
  0.783033490180969,
  0.783188164234161,
  0.783342838287354,
  0.78349757194519,
  0.783652305603027,
  0.783807098865509,
  0.783961832523346,
  0.784116685390472,
  0.784271478652954,
  0.784426331520081,
  0.784581243991852,
  0.784736156463623,
  0.784891068935394,
  0.78504604101181,
  0.785201013088226,
  0.785355985164642,
  0.785511016845703,
  0.785666048526764,
  0.785821080207825,
  0.78597617149353,
  0.786131322383881,
  0.786286473274231,
  0.786441624164581,
  0.786596775054932,
  0.786751985549927,
  0.786907196044922,
  0.787062466144562,
  0.787217736244202,
  0.787373065948486,
  0.787528395652771,
  0.787683725357056,
  0.787839114665985,
  0.787994503974915,
  0.788149893283844,
  0.788305342197418,
  0.788460791110992,
  0.788616299629211,
  0.78877180814743,
  0.788927316665649,
  0.789082884788513,
  0.789238452911377,
  0.789394080638885,
  0.789549708366394,
  0.789705395698547,
  0.789861023426056,
  0.790016710758209,
  0.790172457695007,
  0.790328204631805,
  0.790483951568604,
  0.790639758110046,
  0.790795564651489,
  0.790951430797577,
  0.791107296943665,
  0.791263163089752,
  0.791419088840485,
  0.791575014591217,
  0.791730999946594,
  0.791886985301971,
  0.792042970657349,
  0.792199015617371,
  0.792355060577393,
  0.792511165142059,
  0.792667269706726,
  0.792823374271393,
  0.792979538440704,
  0.793135702610016,
  0.793291866779327,
  0.793448090553284,
  0.793604373931885,
  0.793760597705841,
  0.793916881084442,
  0.794073224067688,
  0.794229567050934,
  0.79438591003418,
  0.79454231262207,
  0.794698715209961,
  0.794855177402496,
  0.795011639595032,
  0.795168101787567,
  0.795324623584747,
  0.795481145381927,
  0.795637667179108,
  0.795794248580933,
  0.795950889587402,
  0.796107470989227,
  0.796264171600342,
  0.796420812606812,
  0.796577513217926,
  0.796734213829041,
  0.7968909740448,
  0.797047734260559,
  0.797204554080963,
  0.797361373901367,
  0.797518193721771,
  0.79767507314682,
  0.797831952571869,
  0.797988891601562,
  0.798145830631256,
  0.79830276966095,
  0.798459768295288,
  0.798616766929626,
  0.798773765563965,
  0.798930823802948,
  0.799087941646576,
  0.799245059490204,
  0.799402177333832,
  0.79955929517746,
  0.799716472625732,
  0.79987370967865,
  0.800030946731567,
  0.800188183784485,
  0.800345420837402,
  0.800502777099609,
  0.800660073757172,
  0.800817430019379,
  0.800974786281586,
  0.801132202148438,
  0.801289618015289,
  0.801447033882141,
  0.801604509353638,
  0.801761984825134,
  0.801919519901276,
  0.802077054977417,
  0.802234649658203,
  0.802392184734344,
  0.802549839019775,
  0.802707433700562,
  0.802865147590637,
  0.803022801876068,
  0.803180515766144,
  0.803338229656219,
  0.80349600315094,
  0.80365377664566,
  0.803811609745026,
  0.803969442844391,
  0.804127275943756,
  0.804285168647766,
  0.804443061351776,
  0.804601013660431,
  0.804758965969086,
  0.80491691827774,
  0.80507493019104,
  0.80523294210434,
  0.805391013622284,
  0.805549085140228,
  0.805707156658173,
  0.805865287780762,
  0.806023478507996,
  0.806181609630585,
  0.806339800357819,
  0.806498050689697,
  0.806656301021576,
  0.806814551353455,
  0.806972861289978,
  0.807131171226501,
  0.80728954076767,
  0.807447910308838,
  0.807606279850006,
  0.807764708995819,
  0.807923138141632,
  0.80808162689209,
  0.808240115642548,
  0.808398604393005,
  0.808557152748108,
  0.80871570110321,
  0.808874309062958,
  0.809032917022705,
  0.809191584587097,
  0.809350252151489,
  0.809508919715881,
  0.809667646884918,
  0.809826374053955,
  0.809985101222992,
  0.810143887996674,
  0.810302734375,
  0.810461580753326,
  0.810620427131653,
  0.810779333114624,
  0.810938239097595,
  0.811097145080566,
  0.811256110668182,
  0.811415076255798,
  0.811574101448059,
  0.81173312664032,
  0.811892211437225,
  0.812051296234131,
  0.812210381031036,
  0.812369525432587,
  0.812528669834137,
  0.812687873840332,
  0.812847077846527,
  0.813006281852722,
  0.813165545463562,
  0.813324868679047,
  0.813484132289886,
  0.813643455505371,
  0.8138028383255,
  0.81396222114563,
  0.814121603965759,
  0.814281046390533,
  0.814440488815308,
  0.814599990844727,
  0.814759492874146,
  0.814918994903564,
  0.815078556537628,
  0.815238177776337,
  0.8153977394104,
  0.815557360649109,
  0.815717041492462,
  0.815876722335815,
  0.816036403179169,
  0.816196143627167,
  0.81635594367981,
  0.816515684127808,
  0.81667548418045,
  0.816835343837738,
  0.816995203495026,
  0.817155063152313,
  0.817314982414246,
  0.817474901676178,
  0.817634880542755,
  0.817794859409332,
  0.817954838275909,
  0.818114876747131,
  0.818274915218353,
  0.81843501329422,
  0.818595111370087,
  0.818755269050598,
  0.81891542673111,
  0.819075584411621,
  0.819235801696777,
  0.819396018981934,
  0.819556295871735,
  0.819716572761536,
  0.819876909255981,
  0.820037186145782,
  0.820197582244873,
  0.820357978343964,
  0.820518374443054,
  0.820678770542145,
  0.82083922624588,
  0.82099974155426,
  0.82116025686264,
  0.821320772171021,
  0.821481347084045,
  0.82164192199707,
  0.82180255651474,
  0.82196319103241,
  0.822123825550079,
  0.822284519672394,
  0.822445213794708,
  0.822605967521667,
  0.822766721248627,
  0.822927534580231,
  0.823088347911835,
  0.823249161243439,
  0.823410034179688,
  0.823570907115936,
  0.82373183965683,
  0.823892772197723,
  0.824053764343262,
  0.8242147564888,
  0.824375748634338,
  0.824536800384521,
  0.824697852134705,
  0.824858963489532,
  0.82502007484436,
  0.825181186199188,
  0.825342357158661,
  0.825503587722778,
  0.825664818286896,
  0.825826048851013,
  0.825987339019775,
  0.826148629188538,
  0.8263099193573,
  0.826471269130707,
  0.826632678508759,
  0.826794028282166,
  0.826955497264862,
  0.827116906642914,
  0.827278435230255,
  0.827439904212952,
  0.827601432800293,
  0.827762961387634,
  0.82792454957962,
  0.828086197376251,
  0.828247785568237,
  0.828409433364868,
  0.828571140766144,
  0.828732848167419,
  0.828894555568695,
  0.829056322574615,
  0.829218149185181,
  0.829379916191101,
  0.829541742801666,
  0.829703629016876,
  0.829865515232086,
  0.830027401447296,
  0.830189347267151,
  0.83035135269165,
  0.830513298511505,
  0.830675303936005,
  0.830837368965149,
  0.830999433994293,
  0.831161558628082,
  0.831323683261871,
  0.83148580789566,
  0.831647992134094,
  0.831810176372528,
  0.831972360610962,
  0.832134664058685,
  0.832296907901764,
  0.832459211349487,
  0.832621514797211,
  0.832783877849579,
  0.832946240901947,
  0.83310866355896,
  0.833271086215973,
  0.833433568477631,
  0.833596050739288,
  0.833758533000946,
  0.833921074867249,
  0.834083616733551,
  0.834246218204498,
  0.834408819675446,
  0.834571480751038,
  0.83473414182663,
  0.834896802902222,
  0.835059523582458,
  0.83522230386734,
  0.835385084152222,
  0.835547864437103,
  0.835710644721985,
  0.835873544216156,
  0.836036384105682,
  0.836199283599854,
  0.836362183094025,
  0.836525142192841,
  0.836688160896301,
  0.836851119995117,
  0.837014198303223,
  0.837177217006683,
  0.837340295314789,
  0.837503433227539,
  0.837666571140289,
  0.83782970905304,
  0.837992906570435,
  0.83815610408783,
  0.838319361209869,
  0.838482618331909,
  0.838645935058594,
  0.838809192180634,
  0.838972568511963,
  0.839135944843292,
  0.839299321174622,
  0.839462757110596,
  0.83962619304657,
  0.839789688587189,
  0.839953184127808,
  0.840116739273071,
  0.840280294418335,
  0.840443849563599,
  0.840607464313507,
  0.840771079063416,
  0.840934753417969,
  0.841098427772522,
  0.84126216173172,
  0.841425895690918,
  0.841589629650116,
  0.841753423213959,
  0.841917276382446,
  0.842081129550934,
  0.842244982719421,
  0.842408895492554,
  0.842572808265686,
  0.842736721038818,
  0.84290075302124,
  0.843064725399017,
  0.843228757381439,
  0.843392848968506,
  0.843556880950928,
  0.843721032142639,
  0.843885123729706,
  0.844049334526062,
  0.844213485717773,
  0.84437769651413,
  0.844541966915131,
  0.844706237316132,
  0.844870507717133,
  0.845034837722778,
  0.845199167728424,
  0.845363557338715,
  0.845527946949005,
  0.84569239616394,
  0.845856845378876,
  0.846021354198456,
  0.846185863018036,
  0.846350371837616,
  0.846514940261841,
  0.846679508686066,
  0.846844136714935,
  0.847008764743805,
  0.847173452377319,
  0.847338140010834,
  0.847502887248993,
  0.847667634487152,
  0.847832381725311,
  0.847997188568115,
  0.848162055015564,
  0.848326921463013,
  0.848491787910461,
  0.848656713962555,
  0.848821640014648,
  0.848986566066742,
  0.84915155172348,
  0.849316596984863,
  0.849481642246246,
  0.849646747112274,
  0.849811792373657,
  0.84997695684433,
  0.850142061710358,
  0.850307285785675,
  0.850472450256348,
  0.85063773393631,
  0.850802958011627,
  0.850968241691589,
  0.851133584976196,
  0.851298928260803,
  0.85146427154541,
  0.851629674434662,
  0.851795077323914,
  0.85196053981781,
  0.852126002311707,
  0.852291524410248,
  0.852457046508789,
  0.852622628211975,
  0.852788209915161,
  0.852953791618347,
  0.853119432926178,
  0.853285133838654,
  0.853450834751129,
  0.853616535663605,
  0.853782296180725,
  0.853948056697845,
  0.854113876819611,
  0.854279696941376,
  0.854445517063141,
  0.854611396789551,
  0.854777336120605,
  0.85494327545166,
  0.855109214782715,
  0.855275213718414,
  0.855441212654114,
  0.855607271194458,
  0.855773329734802,
  0.855939447879791,
  0.85610556602478,
  0.856271743774414,
  0.856437921524048,
  0.856604158878326,
  0.856770396232605,
  0.856936633586884,
  0.857102930545807,
  0.85726922750473,
  0.857435584068298,
  0.857601940631866,
  0.857768356800079,
  0.857934772968292,
  0.85810124874115,
  0.858267724514008,
  0.85843425989151,
  0.858600795269012,
  0.858767330646515,
  0.858933925628662,
  0.859100520610809,
  0.859267175197601,
  0.859433889389038,
  0.859600603580475,
  0.859767317771912,
  0.859934091567993,
  0.860100865364075,
  0.860267639160156,
  0.860434472560883,
  0.860601365566254,
  0.860768258571625,
  0.860935211181641,
  0.861102163791656,
  0.861269116401672,
  0.861436128616333,
  0.861603140830994,
  0.861770212650299,
  0.861937284469604,
  0.862104415893555,
  0.862271547317505,
  0.8624387383461,
  0.862605929374695,
  0.862773180007935,
  0.862940430641174,
  0.863107681274414,
  0.863274991512299,
  0.863442361354828,
  0.863609731197357,
  0.863777101039886,
  0.863944530487061,
  0.864111959934235,
  0.864279448986053,
  0.864446938037872,
  0.864614486694336,
  0.8647820353508,
  0.864949643611908,
  0.865117251873016,
  0.865284860134125,
  0.865452527999878,
  0.865620255470276,
  0.865787982940674,
  0.865955710411072,
  0.866123497486115,
  0.866291344165802,
  0.866459131240845,
  0.866627037525177,
  0.866794884204865,
  0.866962850093842,
  0.867130756378174,
  0.867298781871796,
  0.867466747760773,
  0.867634773254395,
  0.867802858352661,
  0.867970943450928,
  0.868139088153839,
  0.86830723285675,
  0.868475377559662,
  0.868643581867218,
  0.868811786174774,
  0.868980050086975,
  0.869148373603821,
  0.869316637516022,
  0.869485020637512,
  0.869653344154358,
  0.869821786880493,
  0.869990170001984,
  0.870158672332764,
  0.870327115058899,
  0.870495617389679,
  0.870664179325104,
  0.870832741260529,
  0.871001303195953,
  0.871169984340668,
  0.871338605880737,
  0.871507287025452,
  0.871675968170166,
  0.871844708919525,
  0.872013509273529,
  0.872182309627533,
  0.872351109981537,
  0.872519969940186,
  0.872688829898834,
  0.872857749462128,
  0.873026669025421,
  0.873195648193359,
  0.873364627361298,
  0.873533606529236,
  0.873702645301819,
  0.873871743679047,
  0.874040842056274,
  0.874210000038147,
  0.87437915802002,
  0.874548316001892,
  0.874717533588409,
  0.874886751174927,
  0.875056087970734,
  0.875225365161896,
  0.875394701957703,
  0.87556403875351,
  0.875733435153961,
  0.875902831554413,
  0.876072287559509,
  0.876241743564606,
  0.876411259174347,
  0.876580774784088,
  0.876750349998474,
  0.87691992521286,
  0.877089560031891,
  0.877259194850922,
  0.877428889274597,
  0.877598583698273,
  0.877768278121948,
  0.877938032150269,
  0.878107845783234,
  0.878277659416199,
  0.878447473049164,
  0.878617346286774,
  0.878787279129028,
  0.878957152366638,
  0.879127144813538,
  0.879297137260437,
  0.879467129707336,
  0.879637181758881,
  0.879807233810425,
  0.879977345466614,
  0.880147457122803,
  0.880317628383636,
  0.880487859249115,
  0.880658030509949,
  0.880828261375427,
  0.880998551845551,
  0.881168842315674,
  0.881339192390442,
  0.88150954246521,
  0.881679952144623,
  0.881850361824036,
  0.882020771503448,
  0.882191240787506,
  0.882361769676208,
  0.882532298564911,
  0.882702887058258,
  0.882873475551605,
  0.883044064044952,
  0.883214712142944,
  0.883385419845581,
  0.883556127548218,
  0.883726835250854,
  0.883897602558136,
  0.884068369865417,
  0.884239196777344,
  0.884410083293915,
  0.884580910205841,
  0.884751856327057,
  0.884922802448273,
  0.885093748569489,
  0.885264754295349,
  0.88543576002121,
  0.885606825351715,
  0.88577789068222,
  0.885949015617371,
  0.886120140552521,
  0.886291325092316,
  0.886462509632111,
  0.88663375377655,
  0.88680499792099,
  0.886976301670074,
  0.887147605419159,
  0.887318968772888,
  0.887490332126617,
  0.887661755084991,
  0.887833178043365,
  0.88800460100174,
  0.888176083564758,
  0.888347625732422,
  0.888519167900085,
  0.888690769672394,
  0.888862371444702,
  0.88903397321701,
  0.889205694198608,
  0.889377355575562,
  0.889549076557159,
  0.889720857143402,
  0.889892637729645,
  0.890064418315887,
  0.890236258506775,
  0.890408158302307,
  0.890580058097839,
  0.890751957893372,
  0.890923917293549,
  0.89109593629837,
  0.891267955303192,
  0.891439974308014,
  0.89161205291748,
  0.891784191131592,
  0.891956329345703,
  0.892128467559814,
  0.892300665378571,
  0.892472863197327,
  0.892645120620728,
  0.892817437648773,
  0.892989754676819,
  0.893162071704865,
  0.893334448337555,
  0.893506824970245,
  0.893679261207581,
  0.893851757049561,
  0.894024193286896,
  0.894196748733521,
  0.894369304180145,
  0.89454185962677,
  0.89471447467804,
  0.894887089729309,
  0.895059764385223,
  0.895232498645782,
  0.895405173301697,
  0.895577967166901,
  0.895750761032104,
  0.895923554897308,
  0.896096408367157,
  0.896269261837006,
  0.896442174911499,
  0.896615087985992,
  0.896788060665131,
  0.896961092948914,
  0.897134065628052,
  0.897307157516479,
  0.897480249404907,
  0.897653341293335,
  0.897826492786407,
  0.89799964427948,
  0.898172855377197,
  0.898346066474915,
  0.898519337177277,
  0.898692667484283,
  0.898865938186646,
  0.899039328098297,
  0.899212718009949,
  0.8993861079216,
  0.899559557437897,
  0.899733006954193,
  0.899906516075134,
  0.900080025196075,
  0.900253593921661,
  0.900427162647247,
  0.900600790977478,
  0.900774478912354,
  0.900948166847229,
  0.901121854782104,
  0.901295602321625,
  0.901469349861145,
  0.90164315700531,
  0.901816964149475,
  0.901990830898285,
  0.90216475725174,
  0.902338683605194,
  0.902512609958649,
  0.902686595916748,
  0.902860581874847,
  0.903034627437592,
  0.90320873260498,
  0.903382837772369,
  0.903556942939758,
  0.903731107711792,
  0.90390533208847,
  0.904079556465149,
  0.904253780841827,
  0.904428064823151,
  0.904602408409119,
  0.904776692390442,
  0.904951095581055,
  0.905125498771667,
  0.90529990196228,
  0.905474364757538,
  0.90564888715744,
  0.905823409557343,
  0.90599799156189,
  0.906172573566437,
  0.906347155570984,
  0.906521797180176,
  0.906696498394012,
  0.906871199607849,
  0.907045960426331,
  0.907220721244812,
  0.907395482063293,
  0.90757030248642,
  0.907745182514191,
  0.907920062541962,
  0.908095002174377,
  0.908269941806793,
  0.908444941043854,
  0.908619940280914,
  0.90879499912262,
  0.908970057964325,
  0.909145176410675,
  0.909320294857025,
  0.90949547290802,
  0.909670650959015,
  0.909845888614655,
  0.910021126270294,
  0.910196423530579,
  0.910371720790863,
  0.910547077655792,
  0.910722434520721,
  0.910897850990295,
  0.911073327064514,
  0.911248743534088,
  0.911424279212952,
  0.911599814891815,
  0.911775350570679,
  0.911950945854187,
  0.91212660074234,
  0.912302255630493,
  0.912477910518646,
  0.912653625011444,
  0.912829399108887,
  0.913005173206329,
  0.913180947303772,
  0.913356781005859,
  0.913532674312592,
  0.913708567619324,
  0.913884520530701,
  0.914060473442078,
  0.914236426353455,
  0.914412498474121,
  0.914588510990143,
  0.914764642715454,
  0.914940714836121,
  0.915116906166077,
  0.915293037891388,
  0.915469288825989,
  0.915645480155945,
  0.91582179069519,
  0.915998101234436,
  0.916174411773682,
  0.916350781917572,
  0.916527152061462,
  0.916703581809998,
  0.916880071163177,
  0.917056560516357,
  0.917233049869537,
  0.917409598827362,
  0.917586207389832,
  0.917762815952301,
  0.917939424514771,
  0.918116092681885,
  0.918292820453644,
  0.918469548225403,
  0.918646335601807,
  0.91882312297821,
  0.918999969959259,
  0.919176816940308,
  0.919353723526001,
  0.919530630111694,
  0.919707596302032,
  0.919884562492371,
  0.920061588287354,
  0.920238614082336,
  0.920415699481964,
  0.920592844486237,
  0.920769989490509,
  0.920947134494781,
  0.921124339103699,
  0.921301543712616,
  0.921478867530823,
  0.921656131744385,
  0.921833455562592,
  0.922010838985443,
  0.922188222408295,
  0.922365665435791,
  0.922543108463287,
  0.922720551490784,
  0.92289811372757,
  0.923075675964355,
  0.923253238201141,
  0.923430860042572,
  0.923608481884003,
  0.923786163330078,
  0.923963844776154,
  0.924141585826874,
  0.924319386482239,
  0.924497187137604,
  0.924674987792969,
  0.924852848052979,
  0.925030767917633,
  0.925208687782288,
  0.925386667251587,
  0.925564646720886,
  0.92574268579483,
  0.925920724868774,
  0.926098823547363,
  0.926276922225952,
  0.926455080509186,
  0.926633238792419,
  0.926811456680298,
  0.926989674568176,
  0.927167952060699,
  0.927346289157867,
  0.927524626255035,
  0.927702963352203,
  0.927881419658661,
  0.928059816360474,
  0.928238272666931,
  0.928416788578033,
  0.928595304489136,
  0.928773880004883,
  0.92895245552063,
  0.929131090641022,
  0.929309725761414,
  0.92948842048645,
  0.929667174816132,
  0.929845929145813,
  0.930024683475494,
  0.930203497409821,
  0.930382370948792,
  0.930561244487762,
  0.930740177631378,
  0.930919110774994,
  0.93109804391861,
  0.931277096271515,
  0.931456089019775,
  0.931635200977325,
  0.931814312934875,
  0.931993424892426,
  0.93217259645462,
  0.932351768016815,
  0.932530999183655,
  0.932710289955139,
  0.932889580726624,
  0.933068871498108,
  0.933248281478882,
  0.933427631855011,
  0.93360710144043,
  0.933786511421204,
  0.933966040611267,
  0.934145569801331,
  0.934325098991394,
  0.934504687786102,
  0.934684276580811,
  0.934863924980164,
  0.935043632984161,
  0.935223340988159,
  0.935403108596802,
  0.935582876205444,
  0.935762643814087,
  0.935942530632019,
  0.936122417449951,
  0.936302304267883,
  0.93648225069046,
  0.936662197113037,
  0.936842203140259,
  0.937022268772125,
  0.937202334403992,
  0.937382400035858,
  0.937562525272369,
  0.937742710113525,
  0.937922894954681,
  0.938103139400482,
  0.938283383846283,
  0.938463687896729,
  0.938643991947174,
  0.938824355602264,
  0.939004778862,
  0.939185202121735,
  0.939365684986115,
  0.939546167850494,
  0.939726650714874,
  0.939907193183899,
  0.940087795257568,
  0.940268456935883,
  0.940449059009552,
  0.940629780292511,
  0.94081050157547,
  0.940991222858429,
  0.941172003746033,
  0.941352844238281,
  0.94153368473053,
  0.941714584827423,
  0.941895484924316,
  0.942076444625854,
  0.942257404327393,
  0.942438423633575,
  0.942619442939758,
  0.942800521850586,
  0.942981660366058,
  0.943162798881531,
  0.943343937397003,
  0.943525195121765,
  0.943706393241882,
  0.943887710571289,
  0.944068968296051,
  0.944250345230103,
  0.944431722164154,
  0.944613099098206,
  0.944794535636902,
  0.944976031780243,
  0.945157527923584,
  0.94533908367157,
  0.945520639419556,
  0.945702254772186,
  0.945883870124817,
  0.946065545082092,
  0.946247220039368,
  0.946428954601288,
  0.946610748767853,
  0.946792542934418,
  0.946974396705627,
  0.947156250476837,
  0.947338104248047,
  0.947520077228546,
  0.947702050209045,
  0.947884023189545,
  0.948066055774689,
  0.948248147964478,
  0.948430240154266,
  0.948612332344055,
  0.948794543743134,
  0.948976695537567,
  0.94915896654129,
  0.949341237545013,
  0.949523508548737,
  0.949705839157104,
  0.949888229370117,
  0.95007061958313,
  0.950253009796143,
  0.950435519218445,
  0.950617969036102,
  0.950800538063049,
  0.950983047485352,
  0.951165676116943,
  0.951348304748535,
  0.951530933380127,
  0.951713681221008,
  0.951896369457245,
  0.952079176902771,
  0.952261924743652,
  0.952444791793823,
  0.952627658843994,
  0.952810525894165,
  0.952993452548981,
  0.953176438808441,
  0.953359425067902,
  0.953542470932007,
  0.953725516796112,
  0.953908622264862,
  0.954091727733612,
  0.954274892807007,
  0.954458117485046,
  0.954641342163086,
  0.954824566841125,
  0.955007910728455,
  0.955191195011139,
  0.955374598503113,
  0.955558001995087,
  0.955741405487061,
  0.955924868583679,
  0.956108391284943,
  0.956291913986206,
  0.956475496292114,
  0.956659078598022,
  0.956842720508575,
  0.957026362419128,
  0.957210063934326,
  0.957393825054169,
  0.957577586174011,
  0.957761406898499,
  0.957945227622986,
  0.958129107952118,
  0.95831298828125,
  0.958496928215027,
  0.958680927753448,
  0.95886492729187,
  0.959048986434937,
  0.959233045578003,
  0.959417164325714,
  0.959601283073425,
  0.959785461425781,
  0.959969639778137,
  0.960153877735138,
  0.960338175296783,
  0.960522472858429,
  0.960706830024719,
  0.96089118719101,
  0.961075603961945,
  0.961260080337524,
  0.961444556713104,
  0.961629092693329,
  0.961813628673553,
  0.961998224258423,
  0.962182819843292,
  0.962367475032806,
  0.962552130222321,
  0.962736845016479,
  0.962921619415283,
  0.963106393814087,
  0.963291227817535,
  0.963476061820984,
  0.963660955429077,
  0.963845908641815,
  0.964030861854553,
  0.964215815067291,
  0.964400887489319,
  0.964585900306702,
  0.964771032333374,
  0.964956164360046,
  0.965141296386719,
  0.965326488018036,
  0.965511739253998,
  0.96569699048996,
  0.965882301330566,
  0.966067612171173,
  0.966252982616425,
  0.966438412666321,
  0.966623842716217,
  0.966809332370758,
  0.966994822025299,
  0.967180371284485,
  0.967365920543671,
  0.967551589012146,
  0.967737197875977,
  0.967922866344452,
  0.968108594417572,
  0.968294322490692,
  0.968480110168457,
  0.968665957450867,
  0.968851804733276,
  0.969037652015686,
  0.969223618507385,
  0.96940952539444,
  0.969595551490784,
  0.969781577587128,
  0.969967603683472,
  0.97015368938446,
  0.970339834690094,
  0.970525979995728,
  0.970712184906006,
  0.970898449420929,
  0.971084713935852,
  0.971270978450775,
  0.971457302570343,
  0.971643686294556,
  0.971830129623413,
  0.972016513347626,
  0.972203016281128,
  0.97238951921463,
  0.972576081752777,
  0.972762644290924,
  0.972949266433716,
  0.973135888576508,
  0.973322570323944,
  0.973509311676025,
  0.973696053028107,
  0.973882853984833,
  0.974069654941559,
  0.97425651550293,
  0.974443435668945,
  0.974630355834961,
  0.974817335605621,
  0.975004315376282,
  0.975191354751587,
  0.975378394126892,
  0.975565493106842,
  0.975752651691437,
  0.975939810276031,
  0.976127028465271,
  0.97631424665451,
  0.976501524448395,
  0.976688861846924,
  0.976876199245453,
  0.977063596248627,
  0.977250993251801,
  0.977438449859619,
  0.977625966072083,
  0.977813482284546,
  0.978001058101654,
  0.978188633918762,
  0.978376269340515,
  0.978563904762268,
  0.978751599788666,
  0.978939354419708,
  0.979127109050751,
  0.979314923286438,
  0.979502737522125,
  0.979690611362457,
  0.979878544807434,
  0.980066478252411,
  0.980254471302032,
  0.980442464351654,
  0.98063051700592,
  0.980818629264832,
  0.981006741523743,
  0.981194913387299,
  0.981383085250854,
  0.981571316719055,
  0.981759607791901,
  0.981947898864746,
  0.982136249542236,
  0.982324600219727,
  0.982513010501862,
  0.982701420783997,
  0.982889950275421,
  0.983078420162201,
  0.98326700925827,
  0.98345559835434,
  0.983644187450409,
  0.983832836151123,
  0.984021544456482,
  0.984210252761841,
  0.984399020671844,
  0.984587848186493,
  0.984776675701141,
  0.98496550321579,
  0.985154449939728,
  0.985343396663666,
  0.985532343387604,
  0.985721349716187,
  0.985910415649414,
  0.986099481582642,
  0.986288607120514,
  0.986477732658386,
  0.986666977405548,
  0.986856162548065,
  0.987045466899872,
  0.987234711647034,
  0.987424075603485,
  0.987613439559937,
  0.987802863121033,
  0.987992286682129,
  0.98818176984787,
  0.988371253013611,
  0.988560795783997,
  0.988750398159027,
  0.988940000534058,
  0.989129662513733,
  0.989319384098053,
  0.989509105682373,
  0.989698886871338,
  0.989888668060303,
  0.990078508853912,
  0.990268409252167,
  0.990458309650421,
  0.990648210048676,
  0.990838229656219,
  0.991028249263763,
  0.991218268871307,
  0.991408348083496,
  0.99159848690033,
  0.991788685321808,
  0.991978883743286,
  0.992169082164764,
  0.992359340190887,
  0.992549657821655,
  0.992740035057068,
  0.99293041229248,
  0.993120789527893,
  0.99331122636795,
  0.993501722812653,
  0.993692278862,
  0.993882834911346,
  0.994073390960693,
  0.99426406621933,
  0.994454741477966,
  0.994645416736603,
  0.994836151599884,
  0.99502694606781,
  0.995217740535736,
  0.995408594608307,
  0.995599508285522,
  0.995790421962738,
  0.995981395244598,
  0.996172368526459,
  0.996363401412964,
  0.996554493904114,
  0.996745586395264,
  0.996936738491058,
  0.997127890586853,
  0.997319102287292,
  0.997510373592377,
  0.997701644897461,
  0.99789297580719,
  0.998084366321564,
  0.998275756835938,
  0.998467206954956,
  0.998658657073975,
  0.998850166797638,
  0.999041736125946,
  0.999233305454254,
  0.999424934387207,
  0.99961656332016,
  0.999808251857758,
  1,
  1.00019180774689,
  1.00038361549377,
  1.00057542324066,
  1.00076735019684,
  1.00095915794373,
  1.0011510848999,
  1.00134313106537,
  1.00153517723083,
  1.0017272233963,
  1.00191926956177,
  1.00211155414581,
  1.00230360031128,
  1.00249576568604,
  1.00268805027008,
  1.00288045406342,
  1.00307273864746,
  1.00326502323151,
  1.00345742702484,
  1.00364995002747,
  1.0038423538208,
  1.00403475761414,
  1.00422739982605,
  1.00441992282867,
  1.00461256504059,
  1.0048052072525,
  1.00499784946442,
  1.00519061088562,
  1.00538337230682,
  1.00557625293732,
  1.00576901435852,
  1.00596189498901,
  1.00615477561951,
  1.00634777545929,
  1.00654077529907,
  1.00673377513885,
  1.00692677497864,
  1.00711989402771,
  1.00731313228607,
  1.00750625133514,
  1.00769948959351,
  1.00789272785187,
  1.00808596611023,
  1.00827932357788,
  1.00847268104553,
  1.00866615772247,
  1.00885951519012,
  1.00905299186707,
  1.00924646854401,
  1.00943994522095,
  1.00963354110718,
  1.0098272562027,
  1.01002085208893,
  1.01021456718445,
  1.01040828227997,
  1.01060211658478,
  1.01079595088959,
  1.0109897851944,
  1.0111837387085,
  1.01137757301331,
  1.0115715265274,
  1.0117654800415,
  1.01195955276489,
  1.01215374469757,
  1.01234781742096,
  1.01254189014435,
  1.01273608207703,
  1.0129302740097,
  1.01312458515167,
  1.01331889629364,
  1.01351320743561,
  1.01370763778687,
  1.01390194892883,
  1.01409649848938,
  1.01429104804993,
  1.01448547840118,
  1.01468002796173,
  1.01487457752228,
  1.01506924629211,
  1.01526403427124,
  1.01545870304108,
  1.01565337181091,
  1.01584815979004,
  1.01604306697845,
  1.01623785495758,
  1.016432762146,
  1.0166277885437,
  1.01682281494141,
  1.01701784133911,
  1.01721274852753,
  1.01740789413452,
  1.01760315895081,
  1.01779818534851,
  1.01799345016479,
  1.01818871498108,
  1.01838397979736,
  1.01857924461365,
  1.01877474784851,
  1.01897013187408,
  1.01916551589966,
  1.01936101913452,
  1.01955652236938,
  1.01975202560425,
  1.0199476480484,
  1.02014327049255,
  1.02033889293671,
  1.02053463459015,
  1.02073037624359,
  1.02092623710632,
  1.02112197875977,
  1.0213178396225,
  1.02151370048523,
  1.02170968055725,
  1.02190566062927,
  1.02210164070129,
  1.0222977399826,
  1.02249383926392,
  1.02268993854523,
  1.02288615703583,
  1.02308225631714,
  1.02327859401703,
  1.02347481250763,
  1.02367115020752,
  1.02386748790741,
  1.02406394481659,
  1.02426040172577,
  1.02445685863495,
  1.02465331554413,
  1.0248498916626,
  1.02504646778107,
  1.02524304389954,
  1.02543985843658,
  1.02563655376434,
  1.0258332490921,
  1.02602994441986,
  1.02622675895691,
  1.02642369270325,
  1.02662062644958,
  1.02681744098663,
  1.02701449394226,
  1.02721154689789,
  1.02740859985352,
  1.02760565280914,
  1.02780282497406,
  1.02799999713898,
  1.02819716930389,
  1.0283944606781,
  1.02859175205231,
  1.02878904342651,
  1.02898645401001,
  1.02918374538422,
  1.029381275177,
  1.02957880496979,
  1.02977633476257,
  1.02997386455536,
  1.03017151355743,
  1.03036904335022,
  1.03056681156158,
  1.03076446056366,
  1.03096234798431,
  1.03115999698639,
  1.03135788440704,
  1.0315557718277,
  1.03175365924835,
  1.03195154666901,
  1.03214955329895,
  1.03234755992889,
  1.03254568576813,
  1.03274381160736,
  1.03294205665588,
  1.03314018249512,
  1.03333842754364,
  1.03353667259216,
  1.03373503684998,
  1.0339332818985,
  1.03413164615631,
  1.03433012962341,
  1.03452861309052,
  1.03472709655762,
  1.03492558002472,
  1.03512418270111,
  1.0353227853775,
  1.03552150726318,
  1.03572022914886,
  1.03591895103455,
  1.03611767292023,
  1.0363165140152,
  1.03651535511017,
  1.03671431541443,
  1.0369131565094,
  1.03711223602295,
  1.03731119632721,
  1.03751027584076,
  1.03770935535431,
  1.03790855407715,
  1.03810775279999,
  1.03830695152283,
  1.03850615024567,
  1.03870534896851,
  1.03890478610992,
  1.03910410404205,
  1.03930354118347,
  1.03950297832489,
  1.0397025346756,
  1.03990197181702,
  1.04010164737701,
  1.04030120372772,
  1.04050076007843,
  1.04070055484772,
  1.040900349617,
  1.041100025177,
  1.04129981994629,
  1.04149973392487,
  1.04169964790344,
  1.04189944267273,
  1.0420994758606,
  1.04229950904846,
  1.04249954223633,
  1.04269957542419,
  1.04289984703064,
  1.04309988021851,
  1.04330015182495,
  1.0435004234314,
  1.04370069503784,
  1.04390096664429,
  1.04410135746002,
  1.04430174827576,
  1.04450225830078,
  1.04470264911652,
  1.04490327835083,
  1.04510378837585,
  1.04530453681946,
  1.04550504684448,
  1.04570579528809,
  1.04590654373169,
  1.04610729217529,
  1.0463080406189,
  1.04650902748108,
  1.04670989513397,
  1.04691076278687,
  1.04711174964905,
  1.04731285572052,
  1.0475138425827,
  1.04771494865417,
  1.04791605472565,
  1.04811716079712,
  1.04831850528717,
  1.04851973056793,
  1.04872095584869,
  1.04892230033875,
  1.0491236448288,
  1.04932510852814,
  1.04952657222748,
  1.04972815513611,
  1.04992961883545,
  1.05013120174408,
  1.05033278465271,
  1.05053448677063,
  1.05073618888855,
  1.05093801021576,
  1.05113971233368,
  1.05134165287018,
  1.0515433549881,
  1.0517452955246,
  1.05194735527039,
  1.05214929580688,
  1.05235135555267,
  1.05255341529846,
  1.05275547504425,
  1.05295765399933,
  1.05315983295441,
  1.05336201190948,
  1.05356431007385,
  1.05376660823822,
  1.05396902561188,
  1.05417144298553,
  1.0543737411499,
  1.05457627773285,
  1.0547788143158,
  1.05498135089874,
  1.05518400669098,
  1.05538654327393,
  1.05558931827545,
  1.05579197406769,
  1.05599474906921,
  1.05619764328003,
  1.05640041828156,
  1.05660331249237,
  1.05680632591248,
  1.05700922012329,
  1.0572122335434,
  1.0574152469635,
  1.0576183795929,
  1.05782151222229,
  1.05802464485168,
  1.05822789669037,
  1.05843114852905,
  1.05863451957703,
  1.05883777141571,
  1.05904114246368,
  1.05924463272095,
  1.05944812297821,
  1.05965161323547,
  1.05985510349274,
  1.06005871295929,
  1.06026244163513,
  1.06046605110168,
  1.06066966056824,
  1.06087350845337,
  1.0610773563385,
  1.06128108501434,
  1.06148505210876,
  1.0616888999939,
  1.06189286708832,
  1.06209695339203,
  1.06230092048645,
  1.06250500679016,
  1.06270921230316,
  1.06291329860687,
  1.06311750411987,
  1.06332182884216,
  1.06352615356445,
  1.06373035907745,
  1.06393480300903,
  1.06413924694061,
  1.06434369087219,
  1.06454825401306,
  1.06475269794464,
  1.06495726108551,
  1.06516194343567,
  1.06536662578583,
  1.06557130813599,
  1.06577610969543,
  1.06598091125488,
  1.06618571281433,
  1.06639063358307,
  1.06659555435181,
  1.06680047512054,
  1.06700551509857,
  1.0672105550766,
  1.06741559505463,
  1.06762075424194,
  1.06782591342926,
  1.06803107261658,
  1.06823635101318,
  1.06844174861908,
  1.06864702701569,
  1.06885242462158,
  1.06905782222748,
  1.06926333904266,
  1.06946885585785,
  1.06967437267303,
  1.06988000869751,
  1.07008564472198,
  1.07029128074646,
  1.07049703598022,
  1.07070279121399,
  1.07090854644775,
  1.07111442089081,
  1.07132029533386,
  1.07152616977692,
  1.07173216342926,
  1.0719381570816,
  1.07214426994324,
  1.07235038280487,
  1.0725564956665,
  1.07276272773743,
  1.07296884059906,
  1.07317519187927,
  1.07338154315948,
  1.0735878944397,
  1.07379424571991,
  1.07400071620941,
  1.07420718669891,
  1.07441365718842,
  1.07462024688721,
  1.07482695579529,
  1.07503354549408,
  1.07524025440216,
  1.07544696331024,
  1.07565379142761,
  1.07586061954498,
  1.07606744766235,
  1.07627439498901,
  1.07648134231567,
  1.07668828964233,
  1.07689535617828,
  1.07710242271423,
  1.07730960845947,
  1.07751667499542,
  1.07772386074066,
  1.07793116569519,
  1.07813847064972,
  1.07834577560425,
  1.07855319976807,
  1.07876062393188,
  1.0789680480957,
  1.07917559146881,
  1.07938325405121,
  1.07959079742432,
  1.07979834079742,
  1.08000612258911,
  1.08021378517151,
  1.0804215669632,
  1.08062934875488,
  1.08083724975586,
  1.08104515075684,
  1.08125305175781,
  1.08146095275879,
  1.08166909217834,
  1.08187711238861,
  1.08208525180817,
  1.08229339122772,
  1.08250164985657,
  1.08270978927612,
  1.08291804790497,
  1.08312654495239,
  1.08333480358124,
  1.08354318141937,
  1.0837516784668,
  1.08396017551422,
  1.08416867256165,
  1.08437728881836,
  1.08458602428436,
  1.08479464054108,
  1.08500337600708,
  1.08521211147308,
  1.08542084693909,
  1.08562982082367,
  1.08583867549896,
  1.08604764938354,
  1.08625662326813,
  1.08646559715271,
  1.08667469024658,
  1.08688378334045,
  1.08709287643433,
  1.08730208873749,
  1.08751142024994,
  1.0877206325531,
  1.08792996406555,
  1.088139295578,
  1.08834874629974,
  1.08855819702148,
  1.08876764774323,
  1.08897733688354,
  1.08918690681458,
  1.08939647674561,
  1.08960616588593,
  1.08981585502625,
  1.09002566337585,
  1.09023547172546,
  1.09044528007507,
  1.09065520763397,
  1.09086513519287,
  1.09107506275177,
  1.09128522872925,
  1.09149515628815,
  1.09170544147491,
  1.0919154882431,
  1.09212565422058,
  1.09233605861664,
  1.09254634380341,
  1.09275662899017,
  1.09296703338623,
  1.09317743778229,
  1.09338784217834,
  1.09359836578369,
  1.09380888938904,
  1.09401953220367,
  1.09423017501831,
  1.09444093704224,
  1.09465157985687,
  1.0948623418808,
  1.09507322311401,
  1.09528410434723,
  1.09549498558044,
  1.09570586681366,
  1.09591686725616,
  1.09612798690796,
  1.09633910655975,
  1.09655022621155,
  1.09676134586334,
  1.09697258472443,
  1.0971839427948,
  1.09739518165588,
  1.09760653972626,
  1.09781789779663,
  1.09802937507629,
  1.09824085235596,
  1.09845244884491,
  1.09866404533386,
  1.09887564182281,
  1.09908735752106,
  1.09929895401001,
  1.09951066970825,
  1.09972250461578,
  1.0999344587326,
  1.10014629364014,
  1.10035824775696,
  1.10057020187378,
  1.1007821559906,
  1.100994348526,
  1.10120642185211,
  1.10141849517822,
  1.10163068771362,
  1.10184299945831,
  1.102055311203,
  1.10226762294769,
  1.10248005390167,
  1.10269236564636,
  1.10290491580963,
  1.10311734676361,
  1.10333001613617,
  1.10354256629944,
  1.103755235672,
  1.10396790504456,
  1.1041806936264,
  1.10439348220825,
  1.1046062707901,
  1.10481917858124,
  1.10503208637238,
  1.1052451133728,
  1.10545814037323,
  1.10567104816437,
  1.10588419437408,
  1.1060973405838,
  1.10631060600281,
  1.10652375221252,
  1.10673713684082,
  1.10695040225983,
  1.10716378688812,
  1.10737717151642,
  1.107590675354,
  1.10780417919159,
  1.10801780223846,
  1.10823142528534,
  1.10844504833221,
  1.10865867137909,
  1.10887241363525,
  1.10908615589142,
  1.10930001735687,
  1.10951387882233,
  1.10972785949707,
  1.10994184017181,
  1.11015582084656,
  1.11036992073059,
  1.11058402061462,
  1.11079812049866,
  1.11101233959198,
  1.1112265586853,
  1.11144077777863,
  1.11165523529053,
  1.11186945438385,
  1.11208403110504,
  1.11229836940765,
  1.11251294612885,
  1.11272752285004,
  1.11294209957123,
  1.11315667629242,
  1.1133713722229,
  1.11358618736267,
  1.11380100250244,
  1.11401581764221,
  1.11423075199127,
  1.11444556713104,
  1.11466062068939,
  1.11487555503845,
  1.11509072780609,
  1.11530578136444,
  1.11552095413208,
  1.11573612689972,
  1.11595141887665,
  1.11616671085358,
  1.11638200283051,
  1.11659741401672,
  1.11681282520294,
  1.11702835559845,
  1.11724376678467,
  1.11745941638947,
  1.11767494678497,
  1.11789071559906,
  1.11810636520386,
  1.11832213401794,
  1.11853790283203,
  1.11875379085541,
  1.11896967887878,
  1.11918556690216,
  1.11940157413483,
  1.11961758136749,
  1.11983370780945,
  1.1200498342514,
  1.12026596069336,
  1.1204822063446,
  1.12069845199585,
  1.12091481685638,
  1.12113118171692,
  1.12134754657745,
  1.12156403064728,
  1.1217805147171,
  1.12199711799622,
  1.12221360206604,
  1.12243032455444,
  1.12264704704285,
  1.12286365032196,
  1.12308049201965,
  1.12329733371735,
  1.12351417541504,
  1.12373113632202,
  1.12394797801971,
  1.12416505813599,
  1.12438213825226,
  1.12459921836853,
  1.12481641769409,
  1.12503361701965,
  1.12525081634521,
  1.12546813488007,
  1.12568545341492,
  1.12590277194977,
  1.1261203289032,
  1.12633764743805,
  1.12655532360077,
  1.12677276134491,
  1.12699055671692,
  1.12720811367035,
  1.12742578983307,
  1.12764358520508,
  1.12786138057709,
  1.12807929515839,
  1.12829720973969,
  1.12851512432098,
  1.12873315811157,
  1.12895119190216,
  1.12916934490204,
  1.12938737869263,
  1.12960565090179,
  1.12982380390167,
  1.13004207611084,
  1.13026034832001,
  1.13047885894775,
  1.13069725036621,
  1.13091564178467,
  1.13113415241241,
  1.13135278224945,
  1.13157141208649,
  1.13179004192352,
  1.13200867176056,
  1.13222754001617,
  1.1324462890625,
  1.13266515731812,
  1.13288414478302,
  1.13310301303864,
  1.13332200050354,
  1.13354098796844,
  1.13376009464264,
  1.13397920131683,
  1.13419842720032,
  1.1344176530838,
  1.13463687896729,
  1.13485634326935,
  1.13507556915283,
  1.13529515266418,
  1.13551449775696,
  1.13573396205902,
  1.13595354557037,
  1.13617324829102,
  1.13639295101166,
  1.1366126537323,
  1.13683235645294,
  1.13705217838287,
  1.13727200031281,
  1.13749194145203,
  1.13771188259125,
  1.13793182373047,
  1.13815188407898,
  1.13837194442749,
  1.13859212398529,
  1.13881230354309,
  1.13903248310089,
  1.13925278186798,
  1.13947319984436,
  1.13969349861145,
  1.13991403579712,
  1.1401344537735,
  1.14035499095917,
  1.14057552814484,
  1.14079618453979,
  1.14101684093475,
  1.141237616539,
  1.14145827293396,
  1.14167904853821,
  1.14189994335175,
  1.14212095737457,
  1.14234185218811,
  1.14256286621094,
  1.14278388023376,
  1.14300501346588,
  1.143226146698,
  1.1434473991394,
  1.14366865158081,
  1.14388990402222,
  1.14411127567291,
  1.14433264732361,
  1.14455413818359,
  1.14477562904358,
  1.14499723911285,
  1.14521884918213,
  1.1454404592514,
  1.14566206932068,
  1.14588379859924,
  1.1461056470871,
  1.14632737636566,
  1.14654934406281,
  1.14677131175995,
  1.1469931602478,
  1.14721524715424,
  1.14743733406067,
  1.14765954017639,
  1.14788162708282,
  1.14810395240784,
  1.14832615852356,
  1.14854848384857,
  1.14877080917358,
  1.14899325370789,
  1.14921569824219,
  1.14943814277649,
  1.14966082572937,
  1.14988338947296,
  1.15010607242584,
  1.15032875537872,
  1.15055155754089,
  1.15077435970306,
  1.15099716186523,
  1.15122020244598,
  1.15144312381744,
  1.1516660451889,
  1.15188920497894,
  1.15211224555969,
  1.15233552455902,
  1.15255868434906,
  1.1527818441391,
  1.15300524234772,
  1.15322864055634,
  1.15345203876495,
  1.15367543697357,
  1.15389895439148,
  1.15412247180939,
  1.15434610843658,
  1.15456974506378,
  1.15479338169098,
  1.15501725673676,
  1.15524101257324,
  1.15546488761902,
  1.15568876266479,
  1.15591275691986,
  1.15613675117493,
  1.15636074542999,
  1.15658485889435,
  1.1568089723587,
  1.15703320503235,
  1.15725743770599,
  1.15748167037964,
  1.15770614147186,
  1.1579304933548,
  1.15815484523773,
  1.15837943553925,
  1.15860402584076,
  1.15882861614227,
  1.15905320644379,
  1.15927791595459,
  1.15950274467468,
  1.15972745418549,
  1.15995228290558,
  1.16017723083496,
  1.16040205955505,
  1.16062712669373,
  1.1608521938324,
  1.16107726097107,
  1.16130244731903,
  1.16152763366699,
  1.16175293922424,
  1.16197824478149,
  1.16220355033875,
  1.162428855896,
  1.16265439987183,
  1.16287994384766,
  1.1631053686142,
  1.16333103179932,
  1.16355657577515,
  1.16378235816956,
  1.16400814056396,
  1.16423392295837,
  1.16445970535278,
  1.16468560695648,
  1.16491162776947,
  1.16513764858246,
  1.16536366939545,
  1.16558980941772,
  1.16581594944,
  1.16604208946228,
  1.16626834869385,
  1.1664947271347,
  1.16672098636627,
  1.16694736480713,
  1.16717386245728,
  1.16740036010742,
  1.16762697696686,
  1.16785359382629,
  1.16808021068573,
  1.16830694675446,
  1.16853368282318,
  1.1687605381012,
  1.16898739337921,
  1.16921424865723,
  1.16944122314453,
  1.16966831684113,
  1.16989529132843,
  1.17012238502502,
  1.17034959793091,
  1.17057681083679,
  1.17080414295197,
  1.17103135585785,
  1.17125880718231,
  1.17148625850677,
  1.17171370983124,
  1.1719411611557,
  1.17216885089874,
  1.1723964214325,
  1.17262411117554,
  1.17285180091858,
  1.17307960987091,
  1.17330753803253,
  1.17353534698486,
  1.17376327514648,
  1.1739913225174,
  1.17421925067902,
  1.17444741725922,
  1.17467546463013,
  1.17490375041962,
  1.17513203620911,
  1.1753603219986,
  1.17558860778809,
  1.17581701278687,
  1.17604553699493,
  1.17627394199371,
  1.17650246620178,
  1.17673110961914,
  1.1769597530365,
  1.17718851566315,
  1.17741715908051,
  1.17764604091644,
  1.17787492275238,
  1.17810380458832,
  1.17833280563354,
  1.17856180667877,
  1.17879092693329,
  1.17902004718781,
  1.17924916744232,
  1.17947840690613,
  1.17970764636993,
  1.17993700504303,
  1.18016636371613,
  1.18039584159851,
  1.1806253194809,
  1.18085479736328,
  1.18108439445496,
  1.18131411075592,
  1.1815437078476,
  1.18177354335785,
  1.18200325965881,
  1.18223309516907,
  1.18246304988861,
  1.18269300460815,
  1.1829229593277,
  1.18315303325653,
  1.18338322639465,
  1.18361330032349,
  1.18384349346161,
  1.18407380580902,
  1.18430411815643,
  1.18453454971313,
  1.18476486206055,
  1.18499541282654,
  1.18522584438324,
  1.18545651435852,
  1.18568706512451,
  1.18591785430908,
  1.18614852428436,
  1.18637931346893,
  1.18661022186279,
  1.18684113025665,
  1.18707203865051,
  1.18730294704437,
  1.18753409385681,
  1.18776524066925,
  1.1879962682724,
  1.18822753429413,
  1.18845880031586,
  1.18869006633759,
  1.1889214515686,
  1.18915295600891,
  1.18938434123993,
  1.18961584568024,
  1.18984746932983,
  1.19007909297943,
  1.19031083583832,
  1.19054245948792,
  1.19077432155609,
  1.19100618362427,
  1.19123804569244,
  1.19147002696991,
  1.19170200824738,
  1.19193410873413,
  1.19216620922089,
  1.19239842891693,
  1.19263064861298,
  1.19286274909973,
  1.19309520721436,
  1.19332754611969,
  1.19356000423431,
  1.19379234313965,
  1.19402503967285,
  1.19425761699677,
  1.19449019432068,
  1.19472289085388,
  1.19495558738708,
  1.19518840312958,
  1.19542133808136,
  1.19565415382385,
  1.19588720798492,
  1.19612014293671,
  1.19635319709778,
  1.19658637046814,
  1.1968195438385,
  1.19705283641815,
  1.1972861289978,
  1.19751942157745,
  1.19775283336639,
  1.19798624515533,
  1.19821965694427,
  1.19845330715179,
  1.19868695735931,
  1.19892048835754,
  1.19915425777435,
  1.19938802719116,
  1.19962179660797,
  1.19985568523407,
  1.20008957386017,
  1.20032358169556,
  1.20055758953094,
  1.20079171657562,
  1.2010258436203,
  1.20126008987427,
  1.20149433612823,
  1.2017285823822,
  1.20196294784546,
  1.20219743251801,
  1.20243179798126,
  1.2026664018631,
  1.20290088653564,
  1.20313560962677,
  1.20337021350861,
  1.20360505580902,
  1.20383977890015,
  1.20407462120056,
  1.20430946350098,
  1.20454454421997,
  1.20477950572968,
  1.20501446723938,
  1.20524954795837,
  1.20548474788666,
  1.20571994781494,
  1.20595526695251,
  1.20619070529938,
  1.20642602443695,
  1.20666146278381,
  1.20689702033997,
  1.20713245868683,
  1.20736813545227,
  1.20760381221771,
  1.20783948898315,
  1.20807528495789,
  1.20831108093262,
  1.20854699611664,
  1.20878291130066,
  1.20901894569397,
  1.20925486087799,
  1.20949101448059,
  1.20972716808319,
  1.20996344089508,
  1.21019971370697,
  1.21043598651886,
  1.21067225933075,
  1.21090877056122,
  1.21114528179169,
  1.21138179302216,
  1.21161842346191,
  1.21185505390167,
  1.21209168434143,
  1.21232855319977,
  1.21256530284882,
  1.21280217170715,
  1.21303904056549,
  1.21327614784241,
  1.21351313591003,
  1.21375024318695,
  1.21398735046387,
  1.21422445774078,
  1.21446180343628,
  1.21469914913177,
  1.21493637561798,
  1.21517384052277,
  1.21541130542755,
  1.21564888954163,
  1.21588635444641,
  1.21612405776978,
  1.21636176109314,
  1.2165994644165,
  1.21683728694916,
  1.2170752286911,
  1.21731305122375,
  1.21755111217499,
  1.21778905391693,
  1.21802723407745,
  1.21826529502869,
  1.21850347518921,
  1.21874177455902,
  1.21898007392883,
  1.21921837329865,
  1.21945691108704,
  1.21969532966614,
  1.21993386745453,
  1.22017240524292,
  1.2204110622406,
  1.22064983844757,
  1.22088849544525,
  1.22112727165222,
  1.22136616706848,
  1.22160506248474,
  1.22184407711029,
  1.22208309173584,
  1.22232222557068,
  1.22256135940552,
  1.22280061244965,
  1.22303974628448,
  1.2232791185379,
  1.22351849079132,
  1.22375786304474,
  1.22399735450745,
  1.22423696517944,
  1.22447645664215,
  1.22471618652344,
  1.22495591640472,
  1.22519564628601,
  1.22543549537659,
  1.22567534446716,
  1.22591531276703,
  1.22615528106689,
  1.22639524936676,
  1.22663545608521,
  1.22687554359436,
  1.22711575031281,
  1.22735607624054,
  1.22759640216827,
  1.2278368473053,
  1.22807717323303,
  1.22831773757935,
  1.22855830192566,
  1.22879886627197,
  1.22903954982758,
  1.22928035259247,
  1.22952103614807,
  1.22976195812225,
  1.23000276088715,
  1.23024368286133,
  1.2304847240448,
  1.23072576522827,
  1.23096692562103,
  1.23120808601379,
  1.23144924640656,
  1.2316906452179,
  1.23193204402924,
  1.23217344284058,
  1.23241484165192,
  1.23265635967255,
  1.23289787769318,
  1.23313963413239,
  1.2333812713623,
  1.23362302780151,
  1.23386478424072,
  1.23410665988922,
  1.23434865474701,
  1.2345906496048,
  1.23483264446259,
  1.23507475852966,
  1.23531675338745,
  1.23555910587311,
  1.23580133914948,
  1.23604357242584,
  1.23628604412079,
  1.23652851581573,
  1.23677086830139,
  1.23701345920563,
  1.23725605010986,
  1.23749876022339,
  1.23774147033691,
  1.23798429965973,
  1.23822712898254,
  1.23846995830536,
  1.23871302604675,
  1.23895597457886,
  1.23919904232025,
  1.23944222927094,
  1.23968541622162,
  1.2399286031723,
  1.24017190933228,
  1.24041533470154,
  1.24065864086151,
  1.24090218544006,
  1.24114573001862,
  1.24138927459717,
  1.24163293838501,
  1.24187660217285,
  1.24212038516998,
  1.24236416816711,
  1.24260807037354,
  1.24285197257996,
  1.24309599399567,
  1.24334013462067,
  1.24358415603638,
  1.24382841587067,
  1.24407255649567,
  1.24431693553925,
  1.24456131458282,
  1.2448056936264,
  1.24505007266998,
  1.24529457092285,
  1.24553918838501,
  1.24578392505646,
  1.24602854251862,
  1.24627327919006,
  1.2465181350708,
  1.24676299095154,
  1.24700784683228,
  1.24725294113159,
  1.24749803543091,
  1.24774312973022,
  1.24798822402954,
  1.24823355674744,
  1.24847865104675,
  1.24872410297394,
  1.24896955490112,
  1.24921500682831,
  1.24946045875549,
  1.24970602989197,
  1.24995172023773,
  1.2501974105835,
  1.25044310092926,
  1.25068891048431,
  1.25093483924866,
  1.25118064880371,
  1.25142669677734,
  1.25167274475098,
  1.2519189119339,
  1.25216507911682,
  1.25241124629974,
  1.25265765190125,
  1.25290393829346,
  1.25315034389496,
  1.25339674949646,
  1.25364327430725,
  1.25388991832733,
  1.25413644313812,
  1.25438320636749,
  1.25462996959686,
  1.25487685203552,
  1.25512373447418,
  1.25537061691284,
  1.25561761856079,
  1.25586473941803,
  1.25611174106598,
  1.25635886192322,
  1.25660622119904,
  1.25685346126556,
  1.25710082054138,
  1.2573481798172,
  1.25759565830231,
  1.2578432559967,
  1.2580908536911,
  1.2583384513855,
  1.25858616828918,
  1.25883400440216,
  1.25908184051514,
  1.25932967662811,
  1.25957775115967,
  1.25982570648193,
  1.2600736618042,
  1.26032185554504,
  1.26057004928589,
  1.26081824302673,
  1.26106655597687,
  1.26131498813629,
  1.26156342029572,
  1.26181185245514,
  1.26206052303314,
  1.26230907440186,
  1.26255774497986,
  1.26280653476715,
  1.26305532455444,
  1.26330411434174,
  1.26355302333832,
  1.26380205154419,
  1.26405096054077,
  1.26430010795593,
  1.26454925537109,
  1.26479852199554,
  1.26504778862,
  1.26529705524445,
  1.26554644107819,
  1.26579594612122,
  1.26604545116425,
  1.26629507541656,
  1.26654469966888,
  1.26679444313049,
  1.2670441865921,
  1.267294049263,
  1.2675439119339,
  1.2677937746048,
  1.26804375648499,
  1.26829385757446,
  1.26854395866394,
  1.26879417896271,
  1.26904439926147,
  1.26929473876953,
  1.26954507827759,
  1.26979553699493,
  1.27004599571228,
  1.27029657363892,
  1.27054715156555,
  1.27079784870148,
  1.2710485458374,
  1.27129936218262,
  1.27155017852783,
  1.27180111408234,
  1.27205204963684,
  1.27230322360992,
  1.27255427837372,
  1.2728054523468,
  1.27305662631989,
  1.27330791950226,
  1.27355933189392,
  1.27381074428558,
  1.27406215667725,
  1.2743136882782,
  1.27456533908844,
  1.27481687068939,
  1.27506864070892,
  1.27532041072845,
  1.27557229995728,
  1.2758241891861,
  1.27607607841492,
  1.27632808685303,
  1.27658021450043,
  1.27683234214783,
  1.27708458900452,
  1.27733683586121,
  1.27758920192719,
  1.27784156799316,
  1.27809405326843,
  1.2783465385437,
  1.27859914302826,
  1.27885174751282,
  1.27910447120667,
  1.27935719490051,
  1.27961015701294,
  1.27986288070679,
  1.28011584281921,
  1.28036892414093,
  1.28062200546265,
  1.28087508678436,
  1.28112828731537,
  1.28138160705566,
  1.28163492679596,
  1.28188824653625,
  1.28214168548584,
  1.28239524364471,
  1.28264880180359,
  1.28290247917175,
  1.28315615653992,
  1.28340995311737,
  1.28366374969482,
  1.28391754627228,
  1.28417158126831,
  1.28442561626434,
  1.28467965126038,
  1.2849338054657,
  1.28518795967102,
  1.28544223308563,
  1.28569662570953,
  1.28595101833344,
  1.28620541095734,
  1.28645992279053,
  1.28671455383301,
  1.2869690656662,
  1.28722381591797,
  1.28747856616974,
  1.2877334356308,
  1.28798830509186,
  1.28824329376221,
  1.28849828243256,
  1.28875339031219,
  1.28900849819183,
  1.28926372528076,
  1.28951895236969,
  1.28977429866791,
  1.29002964496613,
  1.29028511047363,
  1.29054069519043,
  1.29079616069794,
  1.29105186462402,
  1.29130756855011,
  1.29156339168549,
  1.29181921482086,
  1.29207515716553,
  1.29233109951019,
  1.29258704185486,
  1.2928432226181,
  1.29309928417206,
  1.29335558414459,
  1.29361176490784,
  1.29386818408966,
  1.29412460327148,
  1.2943811416626,
  1.29463756084442,
  1.29489421844482,
  1.29515087604523,
  1.29540765285492,
  1.29566442966461,
  1.2959212064743,
  1.29617810249329,
  1.29643511772156,
  1.29669225215912,
  1.29694926738739,
  1.29720640182495,
  1.2974636554718,
  1.29772102832794,
  1.29797840118408,
  1.29823577404022,
  1.29849326610565,
  1.29875075817108,
  1.29900848865509,
  1.29926609992981,
  1.29952394962311,
  1.29978168010712,
  1.3000396490097,
  1.300297498703,
  1.30055546760559,
  1.30081355571747,
  1.30107164382935,
  1.30132985115051,
  1.30158817768097,
  1.30184650421143,
  1.30210494995117,
  1.30236339569092,
  1.30262184143066,
  1.30288052558899,
  1.30313909053802,
  1.30339789390564,
  1.30365657806396,
  1.30391550064087,
  1.30417442321777,
  1.30443334579468,
  1.30469238758087,
  1.30495154857635,
  1.30521070957184,
  1.30546987056732,
  1.30572915077209,
  1.30598855018616,
  1.30624794960022,
  1.30650746822357,
  1.30676710605621,
  1.30702674388885,
  1.3072863817215,
  1.30754613876343,
  1.30780601501465,
  1.30806577205658,
  1.30832576751709,
  1.3085857629776,
  1.3088458776474,
  1.3091059923172,
  1.30936622619629,
  1.30962646007538,
  1.30988693237305,
  1.31014728546143,
  1.31040775775909,
  1.31066834926605,
  1.31092894077301,
  1.31118953227997,
  1.31145024299622,
  1.31171107292175,
  1.31197190284729,
  1.31223285198212,
  1.31249392032623,
  1.31275486946106,
  1.31301605701447,
  1.31327724456787,
  1.31353855133057,
  1.31379985809326,
  1.31406116485596,
  1.31432271003723,
  1.31458425521851,
  1.31484580039978,
  1.31510746479034,
  1.3153692483902,
  1.31563103199005,
  1.3158928155899,
  1.31615471839905,
  1.31641674041748,
  1.31667876243591,
  1.31694090366364,
  1.31720304489136,
  1.31746530532837,
  1.31772768497467,
  1.31798994541168,
  1.31825244426727,
  1.31851494312286,
  1.31877756118774,
  1.31904017925262,
  1.31930291652679,
  1.31956565380096,
  1.31982862949371,
  1.32009148597717,
  1.32035446166992,
  1.32061755657196,
  1.320880651474,
  1.32114374637604,
  1.32140707969666,
  1.32167041301727,
  1.32193374633789,
  1.3221971988678,
  1.32246065139771,
  1.32272434234619,
  1.32298791408539,
  1.32325172424316,
  1.32351541519165,
  1.32377934455872,
  1.32404315471649,
  1.32430720329285,
  1.3245712518692,
  1.32483541965485,
  1.3250994682312,
  1.32536375522614,
  1.32562804222107,
  1.32589244842529,
  1.32615685462952,
  1.32642149925232,
  1.32668614387512,
  1.32695066928864,
  1.32721543312073,
  1.32748019695282,
  1.3277450799942,
  1.32800996303558,
  1.32827496528625,
  1.32853996753693,
  1.32880520820618,
  1.32907044887543,
  1.32933557033539,
  1.32960104942322,
  1.32986640930176,
  1.3301317691803,
  1.33039736747742,
  1.33066296577454,
  1.33092856407166,
  1.33119440078735,
  1.33146023750305,
  1.33172595500946,
  1.33199203014374,
  1.33225798606873,
  1.332524061203,
  1.33279025554657,
  1.33305644989014,
  1.3333226442337,
  1.33358895778656,
  1.333855509758,
  1.33412194252014,
  1.33438849449158,
  1.33465504646301,
  1.33492183685303,
  1.33518862724304,
  1.33545541763306,
  1.33572232723236,
  1.33598923683167,
  1.33625626564026,
  1.33652341365814,
  1.33679044246674,
  1.3370578289032,
  1.33732509613037,
  1.33759236335754,
  1.3378598690033,
  1.33812737464905,
  1.33839499950409,
  1.33866262435913,
  1.33893024921417,
  1.33919811248779,
  1.33946597576141,
  1.33973395824432,
  1.34000194072723,
  1.34026992321014,
  1.34053814411163,
  1.34080624580383,
  1.34107446670532,
  1.34134292602539,
  1.34161126613617,
  1.34187972545624,
  1.3421483039856,
  1.34241688251495,
  1.3426855802536,
  1.34295427799225,
  1.34322321414948,
  1.34349203109741,
  1.34376096725464,
  1.34403002262115,
  1.34429907798767,
  1.34456825256348,
  1.34483754634857,
  1.34510684013367,
  1.34537625312805,
  1.34564554691315,
  1.34591519832611,
  1.34618473052979,
  1.34645438194275,
  1.346724152565,
  1.34699392318726,
  1.3472638130188,
  1.34753370285034,
  1.34780371189117,
  1.3480738401413,
  1.34834384918213,
  1.34861409664154,
  1.34888434410095,
  1.34915482997894,
  1.34942519664764,
  1.34969568252563,
  1.34996616840363,
  1.3502368927002,
  1.35050761699677,
  1.35077834129333,
  1.35104918479919,
  1.35132014751434,
  1.35159111022949,
  1.35186207294464,
  1.35213315486908,
  1.35240435600281,
  1.35267567634583,
  1.35294699668884,
  1.35321843624115,
  1.35348987579346,
  1.35376143455505,
  1.35403299331665,
  1.35430467128754,
  1.35457646846771,
  1.35484826564789,
  1.35512018203735,
  1.35539221763611,
  1.35566425323486,
  1.35593628883362,
  1.35620844364166,
  1.35648083686829,
  1.35675311088562,
  1.35702550411224,
  1.35729789733887,
  1.35757052898407,
  1.35784304141998,
  1.35811567306519,
  1.35838854312897,
  1.35866129398346,
  1.35893416404724,
  1.35920715332031,
  1.35948014259338,
  1.35975325107574,
  1.3600264787674,
  1.36029970645905,
  1.36057305335999,
  1.36084640026093,
  1.36111986637115,
  1.36139345169067,
  1.36166703701019,
  1.361940741539,
  1.36221444606781,
  1.36248815059662,
  1.36276209354401,
  1.36303615570068,
  1.36331009864807,
  1.36358416080475,
  1.36385834217072,
  1.36413264274597,
  1.36440694332123,
  1.36468124389648,
  1.36495578289032,
  1.36523032188416,
  1.36550486087799,
  1.36577963829041,
  1.36605441570282,
  1.36632919311523,
  1.36660408973694,
  1.36687898635864,
  1.36715412139893,
  1.36742925643921,
  1.36770439147949,
  1.36797964572906,
  1.36825489997864,
  1.3685302734375,
  1.36880576610565,
  1.3690812587738,
  1.36935698986053,
  1.36963260173798,
  1.369908452034,
  1.37018418312073,
  1.37046015262604,
  1.37073612213135,
  1.37101221084595,
  1.37128829956055,
  1.37156450748444,
  1.37184071540833,
  1.3721170425415,
  1.37239348888397,
  1.37267005443573,
  1.3729465007782,
  1.37322318553925,
  1.37349987030029,
  1.37377667427063,
  1.37405347824097,
  1.37433040142059,
  1.37460744380951,
  1.37488448619843,
  1.37516164779663,
  1.37543880939484,
  1.37571609020233,
  1.37599349021912,
  1.3762708902359,
  1.37654840946198,
  1.37682604789734,
  1.3771036863327,
  1.37738144397736,
  1.37765920162201,
  1.37793707847595,
  1.3782149553299,
  1.37849295139313,
  1.37877106666565,
  1.37904930114746,
  1.37932753562927,
  1.37960588932037,
  1.37988424301147,
  1.38016271591187,
  1.38044118881226,
  1.38071978092194,
  1.38099849224091,
  1.38127732276917,
  1.38155615329742,
  1.38183498382568,
  1.38211405277252,
  1.38239312171936,
  1.3826721906662,
  1.38295137882233,
  1.38323068618774,
  1.38350999355316,
  1.38378942012787,
  1.38406884670258,
  1.38434851169586,
  1.38462805747986,
  1.38490784168243,
  1.3851877450943,
  1.38546752929688,
  1.38574755191803,
  1.3860274553299,
  1.38630759716034,
  1.38658773899078,
  1.38686800003052,
  1.38714826107025,
  1.38742864131927,
  1.38770914077759,
  1.38798975944519,
  1.3882702589035,
  1.3885509967804,
  1.38883185386658,
  1.38911259174347,
  1.38939344882965,
  1.38967454433441,
  1.38995563983917,
  1.39023673534393,
  1.39051795005798,
  1.39079916477203,
  1.39108061790466,
  1.391361951828,
  1.39164352416992,
  1.39192509651184,
  1.39220678806305,
  1.39248847961426,
  1.39277029037476,
  1.39305222034454,
  1.39333415031433,
  1.39361619949341,
  1.39389824867249,
  1.39418053627014,
  1.3944628238678,
  1.39474511146545,
  1.3950275182724,
  1.39531004428864,
  1.39559257030487,
  1.3958752155304,
  1.39615786075592,
  1.39644074440002,
  1.39672362804413,
  1.39700663089752,
  1.39728963375092,
  1.3975727558136,
  1.39785575866699,
  1.39813911914825,
  1.39842236042023,
  1.39870584011078,
  1.39898931980133,
  1.39927291870117,
  1.39955651760101,
  1.39984023571014,
  1.40012395381927,
  1.4004077911377,
  1.40069174766541,
  1.4009758234024,
  1.4012598991394,
  1.4015439748764,
  1.40182828903198,
  1.40211260318756,
  1.40239703655243,
  1.40268135070801,
  1.40296602249146,
  1.40325057506561,
  1.40353524684906,
  1.40382015705109,
  1.40410494804382,
  1.40438985824585,
  1.40467488765717,
  1.40495991706848,
  1.40524506568909,
  1.40553033351898,
  1.40581572055817,
  1.40610098838806,
  1.40638649463654,
  1.40667200088501,
  1.40695774555206,
  1.40724337100983,
  1.40752911567688,
  1.40781497955322,
  1.40810084342957,
  1.40838694572449,
  1.40867304801941,
  1.40895915031433,
  1.40924537181854,
  1.40953171253204,
  1.40981805324554,
  1.41010463237762,
  1.41039109230042,
  1.41067779064178,
  1.41096448898315,
  1.41125118732452,
  1.41153812408447,
  1.41182494163513,
  1.41211199760437,
  1.41239905357361,
  1.41268634796143,
  1.41297364234924,
  1.41326093673706,
  1.41354835033417,
  1.41383576393127,
  1.41412329673767,
  1.41441094875336,
  1.41469871997833,
  1.41498649120331,
  1.41527426242828,
  1.41556227207184,
  1.41585028171539,
  1.41613841056824,
  1.41642665863037,
  1.4167149066925,
  1.41700315475464,
  1.41729164123535,
  1.41758012771606,
  1.41786873340607,
  1.41815733909607,
  1.41844606399536,
  1.41873490810394,
  1.41902375221252,
  1.4193127155304,
  1.41960179805756,
  1.41989088058472,
  1.42018008232117,
  1.42046940326691,
  1.42075884342194,
  1.42104816436768,
  1.42133772373199,
  1.42162728309631,
  1.42191696166992,
  1.42220675945282,
  1.42249655723572,
  1.42278647422791,
  1.42307651042938,
  1.42336654663086,
  1.42365670204163,
  1.42394685745239,
  1.42423725128174,
  1.42452764511108,
  1.42481815814972,
  1.42510855197906,
  1.42539930343628,
  1.42569005489349,
  1.42598080635071,
  1.42627155780792,
  1.42656254768372,
  1.4268536567688,
  1.42714464664459,
  1.42743587493896,
  1.42772722244263,
  1.428018450737,
  1.42830991744995,
  1.4286013841629,
  1.42889297008514,
  1.42918467521667,
  1.42947638034821,
  1.42976820468903,
  1.43006014823914,
  1.43035209178925,
  1.43064415454865,
  1.43093633651733,
  1.43122851848602,
  1.431520819664,
  1.43181324005127,
  1.43210566043854,
  1.4323982000351,
  1.43269085884094,
  1.43298363685608,
  1.43327641487122,
  1.43356919288635,
  1.43386220932007,
  1.43415522575378,
  1.4344482421875,
  1.43474149703979,
  1.43503475189209,
  1.43532812595367,
  1.43562150001526,
  1.43591499328613,
  1.4362086057663,
  1.43650233745575,
  1.4367960691452,
  1.43708992004395,
  1.43738377094269,
  1.43767774105072,
  1.43797194957733,
  1.43826603889465,
  1.43856024742126,
  1.43885457515717,
  1.43914902210236,
  1.43944346904755,
  1.43973815441132,
  1.4400327205658,
  1.44032740592957,
  1.44062221050262,
  1.44091713428497,
  1.44121205806732,
  1.44150722026825,
  1.44180226325989,
  1.4420975446701,
  1.44239282608032,
  1.44268822669983,
  1.44298362731934,
  1.44327914714813,
  1.44357478618622,
  1.44387054443359,
  1.44416630268097,
  1.44446218013763,
  1.4447580575943,
  1.44505417346954,
  1.44535028934479,
  1.44564652442932,
  1.44594275951385,
  1.44623911380768,
  1.44653558731079,
  1.4468320608139,
  1.44712865352631,
  1.447425365448,
  1.44772219657898,
  1.44801902770996,
  1.44831597805023,
  1.44861304759979,
  1.44891011714935,
  1.4492073059082,
  1.44950461387634,
  1.44980192184448,
  1.45009934902191,
  1.45039689540863,
  1.45069444179535,
  1.45099210739136,
  1.45128989219666,
  1.45158779621124,
  1.45188570022583,
  1.45218372344971,
  1.45248174667358,
  1.45278000831604,
  1.45307815074921,
  1.45337665081024,
  1.45367503166199,
  1.45397353172302,
  1.45427215099335,
  1.45457077026367,
  1.45486962795258,
  1.45516836643219,
  1.45546734333038,
  1.45576643943787,
  1.45606553554535,
  1.45636463165283,
  1.4566638469696,
  1.45696330070496,
  1.45726275444031,
  1.45756220817566,
  1.4578617811203,
  1.45816147327423,
  1.45846116542816,
  1.45876109600067,
  1.45906102657318,
  1.45936095714569,
  1.45966112613678,
  1.45996129512787,
  1.46026158332825,
  1.46056199073792,
  1.46086239814758,
  1.46116292476654,
  1.4614634513855,
  1.46176421642303,
  1.46206498146057,
  1.46236574649811,
  1.46266674995422,
  1.46296775341034,
  1.46326887607574,
  1.46357011795044,
  1.46387135982513,
  1.46417284011841,
  1.46447420120239,
  1.46477580070496,
  1.46507740020752,
  1.46537911891937,
  1.46568095684052,
  1.46598267555237,
  1.46628475189209,
  1.46658682823181,
  1.46688890457153,
  1.46719110012054,
  1.46749341487885,
  1.46779584884644,
  1.46809816360474,
  1.46840083599091,
  1.46870338916779,
  1.46900618076324,
  1.4693089723587,
  1.46961188316345,
  1.46991491317749,
  1.47021794319153,
  1.47052109241486,
  1.47082424163818,
  1.47112762928009,
  1.471431016922,
  1.47173452377319,
  1.47203814983368,
  1.47234177589417,
  1.47264552116394,
  1.47294938564301,
  1.47325325012207,
  1.47355735301971,
  1.47386145591736,
  1.474165558815,
  1.47446978092194,
  1.47477424144745,
  1.47507858276367,
  1.47538316249847,
  1.47568774223328,
  1.47599244117737,
  1.47629725933075,
  1.47660207748413,
  1.47690713405609,
  1.47721207141876,
  1.47751724720001,
  1.47782254219055,
  1.47812783718109,
  1.47843313217163,
  1.47873854637146,
  1.47904419898987,
  1.47934985160828,
  1.47965562343597,
  1.47996139526367,
  1.48026728630066,
  1.48057329654694,
  1.4808794260025,
  1.48118555545807,
  1.48149180412292,
  1.48179805278778,
  1.48210465908051,
  1.48241114616394,
  1.48271775245667,
  1.48302435874939,
  1.48333120346069,
  1.483638048172,
  1.48394501209259,
  1.48425197601318,
  1.48455905914307,
  1.48486638069153,
  1.48517370223999,
  1.48548114299774,
  1.4857884645462,
  1.48609614372253,
  1.48640382289886,
  1.4867115020752,
  1.48701930046082,
  1.48732721805573,
  1.48763525485992,
  1.48794329166412,
  1.48825144767761,
  1.48855984210968,
  1.48886811733246,
  1.48917663097382,
  1.48948514461517,
  1.48979365825653,
  1.49010241031647,
  1.4904111623764,
  1.49072015285492,
  1.49102914333344,
  1.49133825302124,
  1.49164724349976,
  1.49195647239685,
  1.49226593971252,
  1.49257528781891,
  1.49288475513458,
  1.49319434165955,
  1.4935040473938,
  1.49381375312805,
  1.49412369728088,
  1.49443364143372,
  1.49474370479584,
  1.49505376815796,
  1.49536395072937,
  1.49567425251007,
  1.49598467350006,
  1.49629521369934,
  1.49660575389862,
  1.49691641330719,
  1.49722719192505,
  1.49753797054291,
  1.49784886837006,
  1.49816000461578,
  1.49847114086151,
  1.49878227710724,
  1.49909353256226,
  1.49940490722656,
  1.49971640110016,
  1.50002789497375,
  1.50033962726593,
  1.50065135955811,
  1.50096309185028,
  1.50127494335175,
  1.50158703327179,
  1.50189912319183,
  1.50221133232117,
  1.5025235414505,
  1.50283586978912,
  1.50314843654633,
  1.50346088409424,
  1.50377357006073,
  1.50408625602722,
  1.504399061203,
  1.50471198558807,
  1.50502502918243,
  1.50533807277679,
  1.50565135478973,
  1.50596451759338,
  1.50627791881561,
  1.50659132003784,
  1.50690484046936,
  1.50721848011017,
  1.50753223896027,
  1.50784599781036,
  1.50815987586975,
  1.50847387313843,
  1.50878798961639,
  1.50910210609436,
  1.50941634178162,
  1.50973069667816,
  1.510045170784,
  1.51035964488983,
  1.51067435741425,
  1.51098906993866,
  1.51130390167236,
  1.51161885261536,
  1.51193380355835,
  1.51224875450134,
  1.51256394386292,
  1.51287925243378,
  1.51319456100464,
  1.51351010799408,
  1.51382565498352,
  1.51414132118225,
  1.51445698738098,
  1.514772772789,
  1.51508867740631,
  1.51540470123291,
  1.5157208442688,
  1.51603698730469,
  1.51635324954987,
  1.51666963100433,
  1.51698613166809,
  1.51730263233185,
  1.5176192522049,
  1.51793599128723,
  1.51825284957886,
  1.51856970787048,
  1.5188866853714,
  1.5192037820816,
  1.5195209980011,
  1.51983833312988,
  1.52015566825867,
  1.52047324180603,
  1.5207906961441,
  1.52110838890076,
  1.52142608165741,
  1.52174401283264,
  1.52206194400787,
  1.5223799943924,
  1.52269804477692,
  1.52301633358002,
  1.52333462238312,
  1.52365303039551,
  1.52397155761719,
  1.52429008483887,
  1.52460885047913,
  1.5249274969101,
  1.52524638175964,
  1.52556538581848,
  1.52588438987732,
  1.52620351314545,
  1.52652275562286,
  1.52684211730957,
  1.52716147899628,
  1.52748107910156,
  1.52780067920685,
  1.52812039852142,
  1.52844023704529,
  1.52876007556915,
  1.5290801525116,
  1.52940022945404,
  1.52972030639648,
  1.53004062175751,
  1.53036105632782,
  1.53068137168884,
  1.53100204467773,
  1.53132259845734,
  1.53164339065552,
  1.5319641828537,
  1.53228509426117,
  1.53260612487793,
  1.53292727470398,
  1.53324854373932,
  1.53356981277466,
  1.53389120101929,
  1.53421270847321,
  1.53453433513641,
  1.53485584259033,
  1.53517770767212,
  1.53549957275391,
  1.53582155704498,
  1.53614354133606,
  1.53646576404572,
  1.53678798675537,
  1.53711044788361,
  1.53743278980255,
  1.53775537014008,
  1.5380779504776,
  1.53840065002441,
  1.53872358798981,
  1.5390465259552,
  1.53936946392059,
  1.53969264030457,
  1.54001581668854,
  1.5403391122818,
  1.54066252708435,
  1.5409859418869,
  1.54130959510803,
  1.54163324832916,
  1.54195702075958,
  1.54228091239929,
  1.54260492324829,
  1.54292905330658,
  1.54325306415558,
  1.54357743263245,
  1.54390168190002,
  1.54422616958618,
  1.54455065727234,
  1.54487538337708,
  1.54520010948181,
  1.54552495479584,
  1.54584991931915,
  1.54617488384247,
  1.54649996757507,
  1.54682517051697,
  1.54715061187744,
  1.54747605323792,
  1.54780149459839,
  1.54812705516815,
  1.54845285415649,
  1.54877865314484,
  1.54910445213318,
  1.5494304895401,
  1.54975664615631,
  1.55008268356323,
  1.55040895938873,
  1.55073535442352,
  1.5510618686676,
  1.55138850212097,
  1.55171513557434,
  1.552041888237,
  1.55236876010895,
  1.55269575119019,
  1.55302274227142,
  1.55334997177124,
  1.55367720127106,
  1.55400454998016,
  1.55433201789856,
  1.55465960502625,
  1.55498719215393,
  1.5553150177002,
  1.55564284324646,
  1.55597066879272,
  1.55629885196686,
  1.5566269159317,
  1.55695509910583,
  1.55728352069855,
  1.55761194229126,
  1.55794036388397,
  1.55826914310455,
  1.55859780311584,
  1.55892658233643,
  1.5592554807663,
  1.55958449840546,
  1.5599137544632,
  1.56024289131165,
  1.56057214736938,
  1.5609016418457,
  1.56123113632202,
  1.56156075000763,
  1.56189036369324,
  1.56222021579742,
  1.56255006790161,
  1.56288015842438,
  1.56321024894714,
  1.5635404586792,
  1.56387078762054,
  1.56420123577118,
  1.56453168392181,
  1.56486225128174,
  1.56519305706024,
  1.56552374362946,
  1.56585466861725,
  1.56618571281433,
  1.56651675701141,
  1.56684792041779,
  1.56717920303345,
  1.5675106048584,
  1.56784212589264,
  1.56817364692688,
  1.5685054063797,
  1.56883716583252,
  1.56916904449463,
  1.56950104236603,
  1.56983315944672,
  1.57016539573669,
  1.57049775123596,
  1.57083010673523,
  1.57116258144379,
  1.57149517536163,
  1.57182776927948,
  1.57216060161591,
  1.57249355316162,
  1.57282650470734,
  1.57315957546234,
  1.57349276542664,
  1.57382607460022,
  1.57415950298309,
  1.57449305057526,
  1.57482659816742,
  1.57516026496887,
  1.57549405097961,
  1.57582795619965,
  1.57616198062897,
  1.57649612426758,
  1.57683026790619,
  1.57716464996338,
  1.57749903202057,
  1.57783353328705,
  1.57816815376282,
  1.57850277423859,
  1.57883775234222,
  1.57917261123657,
  1.57950758934021,
  1.57984268665314,
  1.58017790317535,
  1.58051323890686,
  1.58084857463837,
  1.58118414878845,
  1.58151984214783,
  1.5818555355072,
  1.58219134807587,
  1.58252727985382,
  1.58286333084106,
  1.58319938182831,
  1.58353567123413,
  1.58387196063995,
  1.58420836925507,
  1.58454501628876,
  1.58488154411316,
  1.58521842956543,
  1.58555519580841,
  1.58589220046997,
  1.58622920513153,
  1.58656644821167,
  1.58690357208252,
  1.58724105358124,
  1.58757853507996,
  1.58791601657867,
  1.58825373649597,
  1.58859145641327,
  1.58892929553986,
  1.58926725387573,
  1.58960545063019,
  1.58994364738464,
  1.5902818441391,
  1.59062027931213,
  1.59095883369446,
  1.59129738807678,
  1.5916360616684,
  1.5919748544693,
  1.59231376647949,
  1.59265279769897,
  1.59299194812775,
  1.59333109855652,
  1.59367036819458,
  1.59400975704193,
  1.59434938430786,
  1.59468901157379,
  1.59502875804901,
  1.59536862373352,
  1.59570848941803,
  1.59604859352112,
  1.59638869762421,
  1.59672904014587,
  1.59706926345825,
  1.5974098443985,
  1.59775042533875,
  1.59809112548828,
  1.59843182563782,
  1.59877264499664,
  1.59911370277405,
  1.59945476055145,
  1.59979605674744,
  1.60013735294342,
  1.6004786491394,
  1.60082018375397,
  1.60116183757782,
  1.60150349140167,
  1.6018453836441,
  1.60218727588654,
  1.60252928733826,
  1.60287153720856,
  1.60321366786957,
  1.60355615615845,
  1.60389852523804,
  1.60424113273621,
  1.60458374023438,
  1.60492646694183,
  1.60526943206787,
  1.60561239719391,
  1.60595548152924,
  1.60629868507385,
  1.60664200782776,
  1.60698544979095,
  1.60732889175415,
  1.60767245292664,
  1.6080162525177,
  1.60836005210876,
  1.60870397090912,
  1.60904800891876,
  1.6093921661377,
  1.60973644256592,
  1.61008083820343,
  1.61042523384094,
  1.61076974868774,
  1.61111450195312,
  1.61145925521851,
  1.61180424690247,
  1.61214923858643,
  1.61249434947968,
  1.61283946037292,
  1.61318480968475,
  1.61353015899658,
  1.61387574672699,
  1.61422145366669,
  1.61456716060638,
  1.61491298675537,
  1.61525905132294,
  1.61560499668121,
  1.61595118045807,
  1.61629748344421,
  1.61664390563965,
  1.61699044704437,
  1.6173369884491,
  1.61768364906311,
  1.6180305480957,
  1.6183774471283,
  1.61872446537018,
  1.61907160282135,
  1.61941885948181,
  1.61976623535156,
  1.6201137304306,
  1.62046134471893,
  1.62080895900726,
  1.62115681171417,
  1.62150454521179,
  1.62185275554657,
  1.62220084667206,
  1.62254905700684,
  1.62289726734161,
  1.62324583530426,
  1.62359428405762,
  1.62394297122955,
  1.62429165840149,
  1.624640583992,
  1.62498962879181,
  1.62533867359161,
  1.62568795681,
  1.62603724002838,
  1.62638664245605,
  1.62673604488373,
  1.62708580493927,
  1.62743544578552,
  1.62778544425964,
  1.62813532352448,
  1.62848544120789,
  1.6288355588913,
  1.62918591499329,
  1.62953627109528,
  1.62988674640656,
  1.63023734092712,
  1.63058817386627,
  1.63093900680542,
  1.63128995895386,
  1.63164103031158,
  1.6319922208786,
  1.63234341144562,
  1.63269484043121,
  1.63304626941681,
  1.63339793682098,
  1.63374972343445,
  1.63410151004791,
  1.63445341587067,
  1.63480544090271,
  1.63515758514404,
  1.63550984859467,
  1.63586235046387,
  1.63621485233307,
  1.63656735420227,
  1.63692009449005,
  1.63727295398712,
  1.63762593269348,
  1.63797891139984,
  1.63833212852478,
  1.63868534564972,
  1.63903868198395,
  1.63939225673676,
  1.63974583148956,
  1.64009952545166,
  1.64045333862305,
  1.64080727100372,
  1.64116132259369,
  1.64151549339294,
  1.6418696641922,
  1.64222407341003,
  1.64257860183716,
  1.64293324947357,
  1.64328789710999,
  1.64364278316498,
  1.64399766921997,
  1.64435267448425,
  1.64470791816711,
  1.64506316184998,
  1.64541864395142,
  1.64577412605286,
  1.64612972736359,
  1.64648544788361,
  1.64684116840363,
  1.64719724655151,
  1.64755320549011,
  1.64790940284729,
  1.64826571941376,
  1.64862215518951,
  1.64897859096527,
  1.64933514595032,
  1.64969205856323,
  1.65004885196686,
  1.65040576457977,
  1.65076291561127,
  1.65111994743347,
  1.65147733688354,
  1.65183484554291,
  1.65219235420227,
  1.65254986286163,
  1.65290772914886,
  1.6532655954361,
  1.65362346172333,
  1.65398156642914,
  1.65433979034424,
  1.65469825267792,
  1.65505659580231,
  1.65541505813599,
  1.65577375888824,
  1.65613257884979,
  1.65649151802063,
  1.65685045719147,
  1.65720963478088,
  1.6575688123703,
  1.6579282283783,
  1.65828764438629,
  1.65864717960358,
  1.65900695323944,
  1.65936672687531,
  1.65972661972046,
  1.66008675098419,
  1.66044676303864,
  1.66080713272095,
  1.66116750240326,
  1.66152787208557,
  1.66188859939575,
  1.66224932670593,
  1.66261005401611,
  1.66297113895416,
  1.66333210468292,
  1.66369330883026,
  1.66405463218689,
  1.66441595554352,
  1.66477763652802,
  1.66513919830322,
  1.66550099849701,
  1.6658627986908,
  1.66622483730316,
  1.66658687591553,
  1.66694915294647,
  1.66731154918671,
  1.66767394542694,
  1.66803646087646,
  1.66839921474457,
  1.66876196861267,
  1.66912484169006,
  1.66948795318604,
  1.66985106468201,
  1.67021441459656,
  1.67057776451111,
  1.67094135284424,
  1.67130494117737,
  1.67166864871979,
  1.6720324754715,
  1.6723964214325,
  1.67276048660278,
  1.67312467098236,
  1.67348897457123,
  1.67385351657867,
  1.67421805858612,
  1.67458271980286,
  1.67494750022888,
  1.6753123998642,
  1.6756774187088,
  1.6760425567627,
  1.67640781402588,
  1.67677307128906,
  1.67713856697083,
  1.67750418186188,
  1.67787003517151,
  1.67823576927185,
  1.67860174179077,
  1.67896783351898,
  1.67933404445648,
  1.67970025539398,
  1.68006682395935,
  1.68043327331543,
  1.68079996109009,
  1.68116676807404,
  1.68153369426727,
  1.6819007396698,
  1.68226778507233,
  1.68263506889343,
  1.68300247192383,
  1.68336999416351,
  1.68373763561249,
  1.68410527706146,
  1.68447315692902,
  1.68484115600586,
  1.6852091550827,
  1.68557739257812,
  1.68594574928284,
  1.68631422519684,
  1.68668282032013,
  1.68705153465271,
  1.68742024898529,
  1.68778920173645,
  1.68815815448761,
  1.68852734565735,
  1.68889665603638,
  1.68926608562469,
  1.6896356344223,
  1.69000518321991,
  1.6903749704361,
  1.69074487686157,
  1.69111490249634,
  1.69148504734039,
  1.69185519218445,
  1.69222557544708,
  1.69259607791901,
  1.69296669960022,
  1.69333744049072,
  1.69370818138123,
  1.69407916069031,
  1.69445025920868,
  1.69482147693634,
  1.69519281387329,
  1.69556427001953,
  1.69593584537506,
  1.69630753993988,
  1.69667935371399,
  1.6970511674881,
  1.69742333889008,
  1.69779551029205,
  1.69816780090332,
  1.69854021072388,
  1.69891273975372,
  1.69928538799286,
  1.69965815544128,
  1.700031042099,
  1.700404047966,
  1.7007771730423,
  1.70115053653717,
  1.70152378082275,
  1.70189726352692,
  1.70227098464966,
  1.7026447057724,
  1.70301854610443,
  1.70339262485504,
  1.70376670360565,
  1.70414102077484,
  1.70451533794403,
  1.70488977432251,
  1.70526444911957,
  1.70563912391663,
  1.70601403713226,
  1.7063889503479,
  1.70676410198212,
  1.70713925361633,
  1.70751464366913,
  1.70789015293121,
  1.7082656621933,
  1.70864140987396,
  1.70901715755463,
  1.70939314365387,
  1.7097692489624,
  1.71014547348022,
  1.71052181720734,
  1.71089816093445,
  1.71127474308014,
  1.71165144443512,
  1.71202826499939,
  1.71240532398224,
  1.71278238296509,
  1.71315944194794,
  1.71353685855865,
  1.71391427516937,
  1.71429193019867,
  1.71466958522797,
  1.71504735946655,
  1.71542525291443,
  1.71580338478088,
  1.71618163585663,
  1.71655988693237,
  1.71693825721741,
  1.71731686592102,
  1.71769547462463,
  1.71807444095612,
  1.71845328807831,
  1.71883237361908,
  1.71921145915985,
  1.7195907831192,
  1.71997034549713,
  1.72034978866577,
  1.72072947025299,
  1.7211092710495,
  1.72148931026459,
  1.72186934947968,
  1.72224950790405,
  1.72262978553772,
  1.72301030158997,
  1.72339081764221,
  1.72377145290375,
  1.72415232658386,
  1.72453331947327,
  1.72491431236267,
  1.72529554367065,
  1.72567689418793,
  1.7260582447052,
  1.72643995285034,
  1.72682154178619,
  1.72720336914062,
  1.72758531570435,
  1.72796738147736,
  1.72834956645966,
  1.72873198986053,
  1.72911441326141,
  1.72949695587158,
  1.72987973690033,
  1.73026251792908,
  1.7306455373764,
  1.73102855682373,
  1.73141181468964,
  1.73179519176483,
  1.73217856884003,
  1.7325621843338,
  1.73294603824615,
  1.73332977294922,
  1.73371374607086,
  1.73409795761108,
  1.73448216915131,
  1.73486649990082,
  1.73525094985962,
  1.73563575744629,
  1.73602044582367,
  1.73640525341034,
  1.73679029941559,
  1.73717534542084,
  1.73756074905396,
  1.73794615268707,
  1.73833155632019,
  1.73871731758118,
  1.73910295963287,
  1.73948895931244,
  1.739874958992,
  1.74026107788086,
  1.74064743518829,
  1.74103391170502,
  1.74142038822174,
  1.74180710315704,
  1.74219393730164,
  1.74258077144623,
  1.7429678440094,
  1.74335515499115,
  1.74374234676361,
  1.74412989616394,
  1.74451744556427,
  1.74490523338318,
  1.74529302120209,
  1.74568104743958,
  1.74606907367706,
  1.74645733833313,
  1.74684572219849,
  1.74723422527313,
  1.74762284755707,
  1.74801158905029,
  1.74840044975281,
  1.7487895488739,
  1.749178647995,
  1.74956786632538,
  1.74995732307434,
  1.7503467798233,
  1.75073647499084,
  1.75112628936768,
  1.7515162229538,
  1.75190627574921,
  1.75229644775391,
  1.75268685817719,
  1.75307726860046,
  1.75346791744232,
  1.75385856628418,
  1.75424945354462,
  1.75464034080505,
  1.75503146648407,
  1.75542283058167,
  1.75581407546997,
  1.75620567798615,
  1.75659728050232,
  1.75698912143707,
  1.75738096237183,
  1.75777304172516,
  1.75816524028778,
  1.75855755805969,
  1.7589498758316,
  1.75934255123138,
  1.75973522663116,
  1.76012802124023,
  1.76052105426788,
  1.76091408729553,
  1.76130735874176,
  1.76170063018799,
  1.7620941400528,
  1.76248776912689,
  1.76288151741028,
  1.76327538490295,
  1.76366937160492,
  1.76406359672546,
  1.7644579410553,
  1.76485228538513,
  1.76524686813354,
  1.76564157009125,
  1.76603639125824,
  1.76643133163452,
  1.76682639122009,
  1.76722168922424,
  1.76761698722839,
  1.76801252365112,
  1.76840817928314,
  1.76880395412445,
  1.76919984817505,
  1.76959586143494,
  1.76999199390411,
  1.77038824558258,
  1.77078485488892,
  1.77118134498596,
  1.7715779542923,
  1.7719749212265,
  1.77237176895142,
  1.7727689743042,
  1.77316617965698,
  1.77356362342834,
  1.77396106719971,
  1.77435874938965,
  1.77475655078888,
  1.7751544713974,
  1.77555251121521,
  1.77595067024231,
  1.7763489484787,
  1.77674746513367,
  1.77714610099792,
  1.77754485607147,
  1.77794373035431,
  1.77834272384644,
  1.77874183654785,
  1.77914106845856,
  1.77954053878784,
  1.77994012832642,
  1.78033983707428,
  1.78073954582214,
  1.78113961219788,
  1.78153967857361,
  1.78193986415863,
  1.78234028816223,
  1.78274083137512,
  1.78314137458801,
  1.78354215621948,
  1.78394305706024,
  1.78434419631958,
  1.78474545478821,
  1.78514671325684,
  1.78554821014404,
  1.78594982624054,
  1.78635144233704,
  1.7867534160614,
  1.78715538978577,
  1.78755760192871,
  1.78795993328094,
  1.78836226463318,
  1.78876495361328,
  1.78916764259338,
  1.78957045078278,
  1.78997337818146,
  1.79037654399872,
  1.79077982902527,
  1.79118323326111,
  1.79158675670624,
  1.79199039936066,
  1.79239416122437,
  1.79279816150665,
  1.79320228099823,
  1.7936065196991,
  1.79401087760925,
  1.7944153547287,
  1.79481995105743,
  1.79522478580475,
  1.79562985897064,
  1.79603481292725,
  1.79644000530243,
  1.79684543609619,
  1.79725086688995,
  1.79765653610229,
  1.79806232452393,
  1.79846823215485,
  1.79887425899506,
  1.79928040504456,
  1.79968667030334,
  1.80009317398071,
  1.80049979686737,
  1.80090665817261,
  1.80131340026855,
  1.80172049999237,
  1.80212759971619,
  1.80253505706787,
  1.80294239521027,
  1.80334997177124,
  1.8037576675415,
  1.80416560173035,
  1.80457365512848,
  1.8049818277359,
  1.80539011955261,
  1.80579853057861,
  1.8062070608139,
  1.80661582946777,
  1.80702471733093,
  1.80743372440338,
  1.80784285068512,
  1.80825209617615,
  1.80866146087646,
  1.80907106399536,
  1.80948078632355,
  1.80989074707031,
  1.81030070781708,
  1.81071078777313,
  1.81112110614777,
  1.81153154373169,
  1.8119421005249,
  1.8123527765274,
  1.81276369094849,
  1.81317472457886,
  1.81358575820923,
  1.81399714946747,
  1.81440854072571,
  1.81482005119324,
  1.81523180007935,
  1.81564366817474,
  1.81605565547943,
  1.81646776199341,
  1.81688010692596,
  1.81729245185852,
  1.81770515441895,
  1.81811785697937,
  1.81853067874908,
  1.81894373893738,
  1.81935679912567,
  1.81977009773254,
  1.820183634758,
  1.82059705257416,
  1.82101094722748,
  1.82142472267151,
  1.82183885574341,
  1.82225286960602,
  1.8226672410965,
  1.82308173179626,
  1.82349634170532,
  1.82391095161438,
  1.82432591915131,
  1.82474088668823,
  1.82515609264374,
  1.82557141780853,
  1.82598686218262,
  1.82640254497528,
  1.82681834697723,
  1.82723414897919,
  1.82765018939972,
  1.82806634902954,
  1.82848274707794,
  1.82889914512634,
  1.82931590080261,
  1.82973265647888,
  1.83014965057373,
  1.83056664466858,
  1.83098387718201,
  1.83140122890472,
  1.83181869983673,
  1.83223640918732,
  1.83265423774719,
  1.83307206630707,
  1.83349025249481,
  1.83390855789185,
  1.83432686328888,
  1.83474540710449,
  1.83516407012939,
  1.83558285236359,
  1.83600187301636,
  1.83642101287842,
  1.83684027194977,
  1.83725965023041,
  1.83767926692963,
  1.83809900283813,
  1.83851885795593,
  1.83893895149231,
  1.83935904502869,
  1.83977937698364,
  1.84019994735718,
  1.84062051773071,
  1.84104120731354,
  1.84146213531494,
  1.84188318252563,
  1.84230434894562,
  1.84272575378418,
  1.84314715862274,
  1.84356892108917,
  1.8439906835556,
  1.84441256523132,
  1.84483468532562,
  1.8452570438385,
  1.84567940235138,
  1.84610188007355,
  1.84652459621429,
  1.84694755077362,
  1.84737050533295,
  1.84779357910156,
  1.84821689128876,
  1.84864032268524,
  1.84906387329102,
  1.84948766231537,
  1.84991157054901,
  1.85033559799194,
  1.85075974464417,
  1.85118424892426,
  1.85160875320435,
  1.85203325748444,
  1.8524581193924,
  1.85288310050964,
  1.85330820083618,
  1.85373342037201,
  1.85415875911713,
  1.85458445549011,
  1.8550101518631,
  1.85543584823608,
  1.85586190223694,
  1.85628807544708,
  1.85671436786652,
  1.85714089870453,
  1.85756754875183,
  1.85799431800842,
  1.8584212064743,
  1.85884833335876,
  1.85927546024323,
  1.85970294475555,
  1.86013042926788,
  1.86055815219879,
  1.8609858751297,
  1.86141395568848,
  1.86184203624725,
  1.86227035522461,
  1.86269879341125,
  1.86312735080719,
  1.8635561466217,
  1.86398494243622,
  1.8644140958786,
  1.86484324932098,
  1.86527264118195,
  1.8657021522522,
  1.86613178253174,
  1.86656165122986,
  1.86699175834656,
  1.86742174625397,
  1.86785209178925,
  1.86828255653381,
  1.86871314048767,
  1.86914384365082,
  1.86957478523254,
  1.87000584602356,
  1.87043702602386,
  1.87086844444275,
  1.87129986286163,
  1.87173163890839,
  1.87216341495514,
  1.87259542942047,
  1.87302756309509,
  1.87345993518829,
  1.87389230728149,
  1.87432491779327,
  1.87475764751434,
  1.87519061565399,
  1.87562370300293,
  1.87605690956116,
  1.87649035453796,
  1.87692391872406,
  1.87735760211945,
  1.87779140472412,
  1.87822544574738,
  1.87865960597992,
  1.87909388542175,
  1.87952840328217,
  1.87996315956116,
  1.88039779663086,
  1.88083279132843,
  1.88126790523529,
  1.88170325756073,
  1.88213860988617,
  1.88257420063019,
  1.8830099105835,
  1.88344585895538,
  1.88388192653656,
  1.88431811332703,
  1.88475441932678,
  1.88519096374512,
  1.88562762737274,
  1.88606452941895,
  1.88650155067444,
  1.88693857192993,
  1.88737595081329,
  1.88781344890594,
  1.88825106620789,
  1.88868892192841,
  1.88912677764893,
  1.88956487178802,
  1.8900032043457,
  1.89044165611267,
  1.89088022708893,
  1.89131891727448,
  1.8917578458786,
  1.89219689369202,
  1.89263606071472,
  1.89307546615601,
  1.89351499080658,
  1.89395475387573,
  1.89439463615417,
  1.89483463764191,
  1.89527475833893,
  1.89571511745453,
  1.89615559577942,
  1.89659631252289,
  1.89703714847565,
  1.8974781036377,
  1.89791917800903,
  1.89836049079895,
  1.89880204200745,
  1.89924359321594,
  1.89968538284302,
  1.90012729167938,
  1.90056943893433,
  1.90101170539856,
  1.90145409107208,
  1.90189671516418,
  1.90233945846558,
  1.90278244018555,
  1.90322554111481,
  1.90366864204407,
  1.9041121006012,
  1.90455567836761,
  1.90499937534332,
  1.90544331073761,
  1.9058872461319,
  1.90633153915405,
  1.9067759513855,
  1.90722036361694,
  1.90766513347626,
  1.90811002254486,
  1.90855503082275,
  1.90900015830994,
  1.9094455242157,
  1.90989100933075,
  1.91033673286438,
  1.91078245639801,
  1.91122853755951,
  1.9116747379303,
  1.91212105751038,
  1.91256749629974,
  1.91301417350769,
  1.91346096992493,
  1.91390800476074,
  1.91435515880585,
  1.91480243206024,
  1.91524994373322,
  1.91569745540619,
  1.91614532470703,
  1.91659331321716,
  1.91704142093658,
  1.9174896478653,
  1.91793823242188,
  1.91838681697845,
  1.91883563995361,
  1.91928458213806,
  1.9197336435318,
  1.92018294334412,
  1.92063236236572,
  1.9210821390152,
  1.92153179645538,
  1.92198181152344,
  1.92243194580078,
  1.92288219928741,
  1.92333257198334,
  1.92378330230713,
  1.92423403263092,
  1.92468500137329,
  1.92513608932495,
  1.92558741569519,
  1.92603874206543,
  1.92649042606354,
  1.92694222927094,
  1.92739415168762,
  1.92784631252289,
  1.92829859256744,
  1.92875099182129,
  1.92920362949371,
  1.92965638637543,
  1.93010926246643,
  1.9305624961853,
  1.93101584911346,
  1.93146920204163,
  1.93192279338837,
  1.93237662315369,
  1.9328305721283,
  1.93328475952148,
  1.93373894691467,
  1.93419349193573,
  1.93464815616608,
  1.93510293960571,
  1.93555784225464,
  1.93601298332214,
  1.93646824359894,
  1.93692374229431,
  1.93737936019897,
  1.93783521652222,
  1.93829119205475,
  1.93874740600586,
  1.93920373916626,
  1.93966019153595,
  1.94011688232422,
  1.94057369232178,
  1.94103074073792,
  1.94148790836334,
  1.94194519519806,
  1.94240272045135,
  1.94286036491394,
  1.9433182477951,
  1.94377624988556,
  1.94423449039459,
  1.94469285011292,
  1.94515144824982,
  1.94561004638672,
  1.94606900215149,
  1.94652795791626,
  1.9469872713089,
  1.94744670391083,
  1.94790625572205,
  1.94836604595184,
  1.94882595539093,
  1.94928586483002,
  1.94974625110626,
  1.95020663738251,
  1.95066714286804,
  1.95112800598145,
  1.95158886909485,
  1.95204997062683,
  1.95251131057739,
  1.95297276973724,
  1.95343434810638,
  1.9538961648941,
  1.9543582201004,
  1.95482039451599,
  1.95528268814087,
  1.95574522018433,
  1.95620787143707,
  1.95667064189911,
  1.95713365077972,
  1.95759689807892,
  1.9580602645874,
  1.95852375030518,
  1.95898747444153,
  1.95945143699646,
  1.95991551876068,
  1.96037971973419,
  1.96084415912628,
  1.96130871772766,
  1.96177351474762,
  1.96223843097687,
  1.96270346641541,
  1.96316885948181,
  1.96363425254822,
  1.9640998840332,
  1.96456575393677,
  1.96503174304962,
  1.96549785137177,
  1.96596419811249,
  1.9664306640625,
  1.96689736843109,
  1.96736431121826,
  1.96783137321472,
  1.96829855442047,
  1.9687659740448,
  1.96923351287842,
  1.96970129013062,
  1.9701691865921,
  1.97063732147217,
  1.97110557556152,
  1.97157406806946,
  1.97204267978668,
  1.97251152992249,
  1.97298049926758,
  1.97344970703125,
  1.97391903400421,
  1.97438848018646,
  1.97485816478729,
  1.9753280878067,
  1.9757981300354,
  1.97626841068268,
  1.97673881053925,
  1.97720944881439,
  1.97768008708954,
  1.97815108299255,
  1.97862219810486,
  1.97909355163574,
  1.97956502437592,
  1.98003673553467,
  1.98050844669342,
  1.98098051548004,
  1.98145270347595,
  1.98192512989044,
  1.98239767551422,
  1.98287045955658,
  1.98334324359894,
  1.98381638526917,
  1.98428964614868,
  1.98476314544678,
  1.98523676395416,
  1.98571062088013,
  1.98618459701538,
  1.98665881156921,
  1.98713314533234,
  1.98760771751404,
  1.98808240890503,
  1.9885573387146,
  1.98903238773346,
  1.9895076751709,
  1.98998308181763,
  1.99045872688293,
  1.99093461036682,
  1.99141049385071,
  1.99188673496246,
  1.99236309528351,
  1.99283957481384,
  1.99331629276276,
  1.99379324913025,
  1.99427032470703,
  1.99474763870239,
  1.99522495269775,
  1.99570274353027,
  1.99618053436279,
  1.9966584444046,
  1.99713659286499,
  1.99761497974396,
  1.9980936050415,
  1.99857234954834,
  1.99905121326447,
  1.99953031539917,
  2.00000953674316,
  2.00048899650574,
  2.00096869468689,
  2.00144839286804,
  2.00192856788635,
  2.00240874290466,
  2.00288915634155,
  2.00336980819702,
  2.00385046005249,
  2.00433135032654,
  2.00481247901917,
  2.00529384613037,
  2.00577521324158,
  2.00625705718994,
  2.00673890113831,
  2.00722098350525,
  2.00770330429077,
  2.00818562507629,
  2.0086681842804,
  2.00915098190308,
  2.00963401794434,
  2.0101170539856,
  2.01060056686401,
  2.01108407974243,
  2.01156759262085,
  2.01205158233643,
  2.01253581047058,
  2.01302003860474,
  2.01350450515747,
  2.01398921012878,
  2.0144739151001,
  2.01495909690857,
  2.01544427871704,
  2.01592969894409,
  2.01641535758972,
  2.01690101623535,
  2.01738691329956,
  2.01787328720093,
  2.01835942268372,
  2.01884603500366,
  2.01933288574219,
  2.01981973648071,
  2.02030682563782,
  2.0207941532135,
  2.02128171920776,
  2.02176928520203,
  2.02225708961487,
  2.02274513244629,
  2.02323341369629,
  2.02372169494629,
  2.02421045303345,
  2.02469921112061,
  2.02518820762634,
  2.02567744255066,
  2.02616691589355,
  2.02665638923645,
  2.02714610099792,
  2.02763605117798,
  2.02812623977661,
  2.02861642837524,
  2.02910709381104,
  2.02959775924683,
  2.0300886631012,
  2.03057980537415,
  2.03107094764709,
  2.0315625667572,
  2.03205418586731,
  2.032546043396,
  2.03303790092468,
  2.03353023529053,
  2.03402280807495,
  2.03451538085938,
  2.03500819206238,
  2.03550124168396,
  2.03599429130554,
  2.03648781776428,
  2.03698134422302,
  2.03747510910034,
  2.03796911239624,
  2.03846335411072,
  2.0389575958252,
  2.03945231437683,
  2.03994679450989,
  2.0404417514801,
  2.0409369468689,
  2.04143238067627,
  2.04192781448364,
  2.04242348670959,
  2.04291939735413,
  2.04341554641724,
  2.04391169548035,
  2.04440832138062,
  2.04490494728088,
  2.04540181159973,
  2.04589891433716,
  2.04639625549316,
  2.04689359664917,
  2.04739141464233,
  2.0478892326355,
  2.04838728904724,
  2.04888558387756,
  2.04938411712646,
  2.04988265037537,
  2.05038142204285,
  2.05088043212891,
  2.05137968063354,
  2.05187916755676,
  2.05237889289856,
  2.05287861824036,
  2.05337858200073,
  2.05387878417969,
  2.05437922477722,
  2.05487990379333,
  2.05538058280945,
  2.05588150024414,
  2.05638289451599,
  2.05688428878784,
  2.05738568305969,
  2.0578875541687,
  2.05838966369629,
  2.05889177322388,
  2.05939412117004,
  2.05989670753479,
  2.06039953231812,
  2.06090259552002,
  2.06140565872192,
  2.06190919876099,
  2.06241250038147,
  2.06291651725769,
  2.06342029571533,
  2.06392455101013,
  2.06442880630493,
  2.06493353843689,
  2.06543827056885,
  2.06594324111938,
  2.0664484500885,
  2.0669538974762,
  2.06745934486389,
  2.06796526908875,
  2.0684711933136,
  2.06897735595703,
  2.06948375701904,
  2.06999039649963,
  2.07049703598022,
  2.07100391387939,
  2.07151126861572,
  2.07201862335205,
  2.07252621650696,
  2.07303404808044,
  2.07354211807251,
  2.07405018806458,
  2.07455849647522,
  2.07506704330444,
  2.07557582855225,
  2.07608485221863,
  2.07659411430359,
  2.07710361480713,
  2.07761311531067,
  2.07812309265137,
  2.07863306999207,
  2.07914328575134,
  2.07965350151062,
  2.08016419410706,
  2.08067512512207,
  2.08118605613708,
  2.08169746398926,
  2.08220887184143,
  2.08272051811218,
  2.08323240280151,
  2.08374428749084,
  2.08425664901733,
  2.08476901054382,
  2.08528161048889,
  2.08579468727112,
  2.08630776405334,
  2.08682107925415,
  2.08733439445496,
  2.08784818649292,
  2.08836221694946,
  2.08887624740601,
  2.08939051628113,
  2.08990502357483,
  2.09041976928711,
  2.09093475341797,
  2.09144973754883,
  2.09196519851685,
  2.09248065948486,
  2.09299659729004,
  2.09351229667664,
  2.09402871131897,
  2.09454488754272,
  2.09506154060364,
  2.09557843208313,
  2.09609532356262,
  2.09661269187927,
  2.09713006019592,
  2.09764766693115,
  2.09816551208496,
  2.09868359565735,
  2.09920167922974,
  2.09972023963928,
  2.10023880004883,
  2.10075783729553,
  2.10127687454224,
  2.10179615020752,
  2.10231566429138,
  2.10283541679382,
  2.10335540771484,
  2.10387539863586,
  2.10439586639404,
  2.10491633415222,
  2.10543704032898,
  2.10595798492432,
  2.10647916793823,
  2.10700058937073,
  2.1075222492218,
  2.10804414749146,
  2.10856604576111,
  2.10908818244934,
  2.10961079597473,
  2.11013340950012,
  2.11065626144409,
  2.11117935180664,
  2.11170268058777,
  2.11222624778748,
  2.11274981498718,
  2.11327385902405,
  2.11379790306091,
  2.11432242393494,
  2.11484694480896,
  2.11537170410156,
  2.11589670181274,
  2.1164219379425,
  2.11694741249084,
  2.11747288703918,
  2.11799883842468,
  2.11852478981018,
  2.11905121803284,
  2.11957764625549,
  2.12010431289673,
  2.12063121795654,
  2.12115836143494,
  2.12168574333191,
  2.12221336364746,
  2.12274098396301,
  2.12326908111572,
  2.12379741668701,
  2.1243257522583,
  2.12485432624817,
  2.12538313865662,
  2.12591218948364,
  2.12644171714783,
  2.12697100639343,
  2.1275007724762,
  2.12803077697754,
  2.12856078147888,
  2.12909126281738,
  2.12962174415588,
  2.13015270233154,
  2.1306836605072,
  2.13121485710144,
  2.13174629211426,
  2.13227796554565,
  2.13280987739563,
  2.13334178924561,
  2.13387441635132,
  2.13440680503845,
  2.13493943214417,
  2.13547253608704,
  2.13600564002991,
  2.13653898239136,
  2.13707280158997,
  2.13760662078857,
  2.13814067840576,
  2.13867497444153,
  2.13920950889587,
  2.1397442817688,
  2.14027905464172,
  2.14081430435181,
  2.14134979248047,
  2.14188528060913,
  2.14242100715637,
  2.14295721054077,
  2.14349341392517,
  2.14402985572815,
  2.14456653594971,
  2.14510345458984,
  2.14564061164856,
  2.14617800712585,
  2.14671564102173,
  2.14725351333618,
  2.14779138565063,
  2.14832973480225,
  2.14886808395386,
  2.14940690994263,
  2.1499457359314,
  2.15048480033875,
  2.15102434158325,
  2.15156388282776,
  2.15210366249084,
  2.15264368057251,
  2.15318393707275,
  2.15372443199158,
  2.15426516532898,
  2.15480589866638,
  2.15534710884094,
  2.15588855743408,
  2.15643000602722,
  2.15697193145752,
  2.1575140953064,
  2.15805625915527,
  2.15859889984131,
  2.15914154052734,
  2.15968441963196,
  2.16022753715515,
  2.16077089309692,
  2.16131448745728,
  2.16185832023621,
  2.16240239143372,
  2.1629467010498,
  2.16349124908447,
  2.16403603553772,
  2.16458106040955,
  2.16512608528137,
  2.16567158699036,
  2.16621732711792,
  2.16676306724548,
  2.16730928421021,
  2.16785550117493,
  2.16840219497681,
  2.16894888877869,
  2.16949582099915,
  2.17004323005676,
  2.17059063911438,
  2.17113828659058,
  2.17168617248535,
  2.17223429679871,
  2.17278289794922,
  2.17333149909973,
  2.17388010025024,
  2.17442941665649,
  2.17497849464417,
  2.17552804946899,
  2.1760778427124,
  2.17662787437439,
  2.17717790603638,
  2.17772841453552,
  2.17827916145325,
  2.17882990837097,
  2.17938113212585,
  2.17993259429932,
  2.18048405647278,
  2.1810359954834,
  2.18158793449402,
  2.1821403503418,
  2.18269276618958,
  2.18324542045593,
  2.18379855155945,
  2.18435168266296,
  2.18490529060364,
  2.18545889854431,
  2.18601274490356,
  2.1865668296814,
  2.18712139129639,
  2.18767595291138,
  2.18823075294495,
  2.18878579139709,
  2.18934106826782,
  2.18989658355713,
  2.19045233726501,
  2.19100832939148,
  2.19156455993652,
  2.19212102890015,
  2.19267773628235,
  2.19323468208313,
  2.19379186630249,
  2.19434928894043,
  2.19490694999695,
  2.19546484947205,
  2.19602298736572,
  2.19658136367798,
  2.19713973999023,
  2.19769859313965,
  2.19825768470764,
  2.19881701469421,
  2.19937658309937,
  2.1999363899231,
  2.20049619674683,
  2.20105648040771,
  2.20161700248718,
  2.20217776298523,
  2.20273852348328,
  2.20329976081848,
  2.20386123657227,
  2.20442271232605,
  2.20498466491699,
  2.20554685592651,
  2.20610928535461,
  2.20667171478271,
  2.20723462104797,
  2.20779776573181,
  2.20836114883423,
  2.20892453193665,
  2.20948839187622,
  2.21005249023438,
  2.21061658859253,
  2.21118116378784,
  2.21174597740173,
  2.2123110294342,
  2.21287608146667,
  2.2134416103363,
  2.21400737762451,
  2.2145733833313,
  2.21513938903809,
  2.21570611000061,
  2.21627259254456,
  2.21683955192566,
  2.21740674972534,
  2.2179741859436,
  2.21854162216187,
  2.21910953521729,
  2.21967768669128,
  2.22024607658386,
  2.22081470489502,
  2.22138357162476,
  2.22195267677307,
  2.22252202033997,
  2.22309160232544,
  2.22366142272949,
  2.22423148155212,
  2.22480177879333,
  2.22537231445312,
  2.22594308853149,
  2.22651410102844,
  2.22708535194397,
  2.22765684127808,
  2.22822880744934,
  2.22880077362061,
  2.22937297821045,
  2.22994542121887,
  2.23051810264587,
  2.23109102249146,
  2.23166441917419,
  2.23223781585693,
  2.23281168937683,
  2.23338556289673,
  2.23395991325378,
  2.23453426361084,
  2.23510885238647,
  2.23568391799927,
  2.23625898361206,
  2.23683452606201,
  2.23741030693054,
  2.23798608779907,
  2.23856234550476,
  2.23913884162903,
  2.23971557617188,
  2.24029231071472,
  2.24086952209473,
  2.24144697189331,
  2.24202466011047,
  2.24260258674622,
  2.24318075180054,
  2.24375915527344,
  2.24433779716492,
  2.24491691589355,
  2.24549603462219,
  2.24607539176941,
  2.24665498733521,
  2.24723505973816,
  2.24781513214111,
  2.24839568138123,
  2.24897623062134,
  2.24955725669861,
  2.25013828277588,
  2.25071978569031,
  2.25130128860474,
  2.2518835067749,
  2.25246548652649,
  2.25304794311523,
  2.25363063812256,
  2.25421357154846,
  2.25479674339294,
  2.25538015365601,
  2.25596380233765,
  2.25654768943787,
  2.25713205337524,
  2.25771641731262,
  2.25830101966858,
  2.25888609886169,
  2.25947141647339,
  2.26005673408508,
  2.26064229011536,
  2.26122832298279,
  2.2618145942688,
  2.26240110397339,
  2.26298785209656,
  2.26357483863831,
  2.26416206359863,
  2.26474952697754,
  2.26533722877502,
  2.26592540740967,
  2.26651358604431,
  2.26710200309753,
  2.26769089698792,
  2.2682797908783,
  2.26886916160583,
  2.26945877075195,
  2.27004861831665,
  2.27063846588135,
  2.2712287902832,
  2.27181935310364,
  2.27241015434265,
  2.27300119400024,
  2.273592710495,
  2.27418422698975,
  2.27477598190308,
  2.27536821365356,
  2.27596068382263,
  2.2765531539917,
  2.27714610099792,
  2.27773928642273,
  2.27833271026611,
  2.27892637252808,
  2.27952027320862,
  2.28011441230774,
  2.28070878982544,
  2.2813036441803,
  2.28189849853516,
  2.28249359130859,
  2.28308916091919,
  2.28368496894836,
  2.28428101539612,
  2.28487730026245,
  2.28547382354736,
  2.28607058525085,
  2.28666758537292,
  2.28726482391357,
  2.28786253929138,
  2.28846025466919,
  2.28905844688416,
  2.2896568775177,
  2.29025530815125,
  2.29085421562195,
  2.29145359992981,
  2.29205298423767,
  2.29265260696411,
  2.29325246810913,
  2.29385280609131,
  2.29445314407349,
  2.29505395889282,
  2.29565501213074,
  2.29625630378723,
  2.29685759544373,
  2.29745960235596,
  2.29806160926819,
  2.298663854599,
  2.29926657676697,
  2.29986929893494,
  2.30047249794006,
  2.30107593536377,
  2.30167961120605,
  2.30228328704834,
  2.30288767814636,
  2.30349206924438,
  2.30409669876099,
  2.30470180511475,
  2.30530691146851,
  2.30591249465942,
  2.30651831626892,
  2.307124376297,
  2.30773067474365,
  2.30833721160889,
  2.30894422531128,
  2.30955123901367,
  2.31015872955322,
  2.31076645851135,
  2.31137418746948,
  2.31198263168335,
  2.31259107589722,
  2.31319975852966,
  2.31380891799927,
  2.31441807746887,
  2.31502771377563,
  2.31563758850098,
  2.3162477016449,
  2.3168580532074,
  2.31746864318848,
  2.31807947158813,
  2.31869077682495,
  2.31930208206177,
  2.31991386413574,
  2.3205258846283,
  2.32113814353943,
  2.32175064086914,
  2.32236361503601,
  2.32297658920288,
  2.32359004020691,
  2.32420349121094,
  2.32481741905212,
  2.32543158531189,
  2.32604622840881,
  2.32666087150574,
  2.32727599143982,
  2.3278911113739,
  2.32850670814514,
  2.32912254333496,
  2.32973861694336,
  2.33035516738892,
  2.33097171783447,
  2.33158874511719,
  2.33220601081848,
  2.33282351493835,
  2.33344125747681,
  2.33405923843384,
  2.33467745780945,
  2.33529615402222,
  2.33591508865356,
  2.33653402328491,
  2.337153673172,
  2.33777332305908,
  2.33839321136475,
  2.33901357650757,
  2.33963394165039,
  2.34025478363037,
  2.34087586402893,
  2.34149718284607,
  2.34211897850037,
  2.34274101257324,
  2.34336304664612,
  2.34398555755615,
  2.34460830688477,
  2.34523129463196,
  2.34585475921631,
  2.34647846221924,
  2.34710240364075,
  2.34772634506226,
  2.3483510017395,
  2.34897565841675,
  2.34960055351257,
  2.35022592544556,
  2.35085153579712,
  2.35147738456726,
  2.35210347175598,
  2.35272979736328,
  2.35335659980774,
  2.35398364067078,
  2.35461091995239,
  2.35523843765259,
  2.35586619377136,
  2.35649442672729,
  2.35712289810181,
  2.3577516078949,
  2.35838055610657,
  2.35900974273682,
  2.35963940620422,
  2.36026930809021,
  2.3608992099762,
  2.36152958869934,
  2.36216044425964,
  2.36279129981995,
  2.36342263221741,
  2.36405420303345,
  2.36468601226807,
  2.36531805992126,
  2.36595058441162,
  2.36658310890198,
  2.36721611022949,
  2.36784934997559,
  2.36848306655884,
  2.36911678314209,
  2.3697509765625,
  2.37038540840149,
  2.37102007865906,
  2.37165498733521,
  2.37229037284851,
  2.3729259967804,
  2.37356185913086,
  2.3741979598999,
  2.37483429908752,
  2.3754711151123,
  2.37610816955566,
  2.3767454624176,
  2.37738299369812,
  2.3780210018158,
  2.37865924835205,
  2.37929749488831,
  2.3799364566803,
  2.38057541847229,
  2.38121485710144,
  2.38185429573059,
  2.38249444961548,
  2.38313460350037,
  2.38377499580383,
  2.38441586494446,
  2.38505697250366,
  2.38569831848145,
  2.38634014129639,
  2.38698220252991,
  2.38762450218201,
  2.38826704025269,
  2.38890981674194,
  2.38955307006836,
  2.39019656181335,
  2.39084029197693,
  2.39148426055908,
  2.39212870597839,
  2.39277315139771,
  2.39341831207275,
  2.3940634727478,
  2.39470887184143,
  2.39535474777222,
  2.39600086212158,
  2.39664721488953,
  2.39729404449463,
  2.39794111251831,
  2.39858841896057,
  2.39923596382141,
  2.39988374710083,
  2.40053200721741,
  2.40118050575256,
  2.4018292427063,
  2.40247845649719,
  2.40312790870667,
  2.40377759933472,
  2.40442752838135,
  2.40507769584656,
  2.40572834014893,
  2.40637922286987,
  2.40703058242798,
  2.40768194198608,
  2.40833377838135,
  2.40898585319519,
  2.40963840484619,
  2.41029095649719,
  2.41094398498535,
  2.41159725189209,
  2.41225099563599,
  2.41290473937988,
  2.41355895996094,
  2.41421365737915,
  2.41486835479736,
  2.41552352905273,
  2.41617894172668,
  2.41683459281921,
  2.4174907207489,
  2.41814708709717,
  2.41880369186401,
  2.41946053504944,
  2.42011785507202,
  2.42077541351318,
  2.42143321037292,
  2.42209148406982,
  2.4227499961853,
  2.42340874671936,
  2.424067735672,
  2.42472720146179,
  2.42538690567017,
  2.42604684829712,
  2.42670726776123,
  2.42736768722534,
  2.42802858352661,
  2.42868995666504,
  2.42935156822205,
  2.43001341819763,
  2.4306755065918,
  2.43133807182312,
  2.43200087547302,
  2.4326639175415,
  2.43332719802856,
  2.43399095535278,
  2.43465495109558,
  2.43531918525696,
  2.43598389625549,
  2.43664884567261,
  2.4373140335083,
  2.43797969818115,
  2.43864560127258,
  2.43931174278259,
  2.43997836112976,
  2.44064521789551,
  2.44131231307983,
  2.44197964668274,
  2.4426474571228,
  2.44331550598145,
  2.44398379325867,
  2.44465255737305,
  2.44532155990601,
  2.44599080085754,
  2.44666051864624,
  2.44733047485352,
  2.44800066947937,
  2.44867134094238,
  2.44934225082397,
  2.45001339912415,
  2.4506847858429,
  2.4513566493988,
  2.45202898979187,
  2.45270133018494,
  2.45337414741516,
  2.45404720306396,
  2.45472049713135,
  2.45539450645447,
  2.45606851577759,
  2.45674276351929,
  2.45741748809814,
  2.45809245109558,
  2.45876789093018,
  2.45944356918335,
  2.4601194858551,
  2.46079564094543,
  2.46147227287292,
  2.46214914321899,
  2.46282649040222,
  2.46350407600403,
  2.46418190002441,
  2.46486020088196,
  2.4655385017395,
  2.46621751785278,
  2.46689653396606,
  2.4675760269165,
  2.4682559967041,
  2.4689359664917,
  2.46961641311646,
  2.47029709815979,
  2.47097826004028,
  2.47165966033936,
  2.47234153747559,
  2.47302341461182,
  2.47370600700378,
  2.47438859939575,
  2.47507166862488,
  2.47575497627258,
  2.47643876075745,
  2.47712278366089,
  2.47780704498291,
  2.47849178314209,
  2.47917675971985,
  2.47986197471619,
  2.48054766654968,
  2.48123359680176,
  2.48192000389099,
  2.48260641098022,
  2.48329329490662,
  2.48398065567017,
  2.48466825485229,
  2.485356092453,
  2.48604440689087,
  2.48673295974731,
  2.48742198944092,
  2.4881112575531,
  2.48880076408386,
  2.4894905090332,
  2.49018096923828,
  2.49087142944336,
  2.4915623664856,
  2.49225354194641,
  2.49294495582581,
  2.49363684654236,
  2.49432921409607,
  2.49502158164978,
  2.49571442604065,
  2.49640774726868,
  2.49710130691528,
  2.49779510498047,
  2.49848937988281,
  2.49918389320374,
  2.49987864494324,
  2.5005738735199,
  2.50126934051514,
  2.50196528434753,
  2.50266146659851,
  2.50335788726807,
  2.50405478477478,
  2.50475215911865,
  2.50544953346252,
  2.50614738464355,
  2.50684571266174,
  2.50754427909851,
  2.50824308395386,
  2.50894236564636,
  2.50964188575745,
  2.51034164428711,
  2.51104187965393,
  2.51174259185791,
  2.51244330406189,
  2.51314449310303,
  2.51384615898132,
  2.5145480632782,
  2.51525044441223,
  2.51595306396484,
  2.51665592193604,
  2.51735901832581,
  2.51806259155273,
  2.51876664161682,
  2.51947093009949,
  2.52017569541931,
  2.52088069915771,
  2.5215859413147,
  2.52229142189026,
  2.52299761772156,
  2.52370381355286,
  2.52441048622131,
  2.52511739730835,
  2.52582478523254,
  2.5265326499939,
  2.52724051475525,
  2.52794909477234,
  2.52865767478943,
  2.52936673164368,
  2.53007626533508,
  2.53078603744507,
  2.53149604797363,
  2.53220653533936,
  2.53291749954224,
  2.53362846374512,
  2.53433990478516,
  2.53505182266235,
  2.53576397895813,
  2.53647661209106,
  2.53718948364258,
  2.53790259361267,
  2.53861618041992,
  2.53933000564575,
  2.54004430770874,
  2.54075908660889,
  2.54147386550903,
  2.54218912124634,
  2.5429048538208,
  2.54362082481384,
  2.54433727264404,
  2.54505395889282,
  2.54577088356018,
  2.5464882850647,
  2.54720616340637,
  2.54792428016663,
  2.54864263534546,
  2.54936146736145,
  2.5500807762146,
  2.55080008506775,
  2.55152010917664,
  2.55224013328552,
  2.55296087265015,
  2.55368161201477,
  2.55440306663513,
  2.55512452125549,
  2.55584669113159,
  2.55656886100769,
  2.55729150772095,
  2.55801463127136,
  2.55873799324036,
  2.55946183204651,
  2.56018590927124,
  2.56091046333313,
  2.5616352558136,
  2.56236028671265,
  2.56308579444885,
  2.56381177902222,
  2.56453800201416,
  2.56526470184326,
  2.56599164009094,
  2.5667188167572,
  2.5674467086792,
  2.5681746006012,
  2.56890296936035,
  2.56963181495667,
  2.57036089897156,
  2.57109022140503,
  2.57182002067566,
  2.57255029678345,
  2.57328081130981,
  2.57401180267334,
  2.57474303245544,
  2.57547473907471,
  2.57620668411255,
  2.57693910598755,
  2.57767176628113,
  2.57840490341187,
  2.57913827896118,
  2.57987213134766,
  2.58060622215271,
  2.58134078979492,
  2.58207559585571,
  2.58281087875366,
  2.58354640007019,
  2.58428239822388,
  2.58501887321472,
  2.58575558662415,
  2.58649277687073,
  2.58723020553589,
  2.58796787261963,
  2.58870601654053,
  2.58944463729858,
  2.59018349647522,
  2.59092283248901,
  2.59166240692139,
  2.59240245819092,
  2.59314298629761,
  2.59388375282288,
  2.59462475776672,
  2.59536623954773,
  2.59610819816589,
  2.59685039520264,
  2.59759283065796,
  2.59833598136902,
  2.59907913208008,
  2.59982299804688,
  2.60056710243225,
  2.60131144523621,
  2.60205626487732,
  2.60280156135559,
  2.60354709625244,
  2.60429310798645,
  2.60503935813904,
  2.60578608512878,
  2.60653305053711,
  2.60728049278259,
  2.60802841186523,
  2.60877633094788,
  2.60952496528625,
  2.61027383804321,
  2.61102318763733,
  2.6117730140686,
  2.61252284049988,
  2.61327338218689,
  2.61402416229248,
  2.61477541923523,
  2.61552691459656,
  2.61627888679504,
  2.61703109741211,
  2.61778378486633,
  2.61853694915771,
  2.61929035186768,
  2.62004423141479,
  2.62079834938049,
  2.62155294418335,
  2.62230801582336,
  2.62306332588196,
  2.62381911277771,
  2.62457513809204,
  2.62533164024353,
  2.6260883808136,
  2.62684559822083,
  2.62760329246521,
  2.62836122512817,
  2.6291196346283,
  2.62987852096558,
  2.63063764572144,
  2.63139700889587,
  2.63215708732605,
  2.6329174041748,
  2.63367819786072,
  2.63443899154663,
  2.63520050048828,
  2.63596248626709,
  2.63672471046448,
  2.63748741149902,
  2.63825035095215,
  2.63901352882385,
  2.63977742195129,
  2.64054155349731,
  2.64130616188049,
  2.64207100868225,
  2.64283633232117,
  2.64360213279724,
  2.64436817169189,
  2.64513468742371,
  2.6459014415741,
  2.64666891098022,
  2.64743638038635,
  2.64820456504822,
  2.64897298812866,
  2.64974164962769,
  2.65051078796387,
  2.65128040313721,
  2.65205049514771,
  2.65282082557678,
  2.65359163284302,
  2.65436291694641,
  2.65513443946838,
  2.65590643882751,
  2.65667867660522,
  2.65745139122009,
  2.65822458267212,
  2.65899801254272,
  2.65977215766907,
  2.66054630279541,
  2.66132116317749,
  2.66209626197815,
  2.66287159919739,
  2.66364765167236,
  2.66442394256592,
  2.66520071029663,
  2.66597771644592,
  2.66675519943237,
  2.66753315925598,
  2.66831135749817,
  2.66909003257751,
  2.66986918449402,
  2.6706485748291,
  2.67142844200134,
  2.67220878601074,
  2.67298936843872,
  2.67377042770386,
  2.67455196380615,
  2.67533397674561,
  2.67611622810364,
  2.67689895629883,
  2.6776819229126,
  2.67846536636353,
  2.67924928665161,
  2.68003368377686,
  2.68081831932068,
  2.68160343170166,
  2.68238878250122,
  2.68317484855652,
  2.6839611530304,
  2.68474793434143,
  2.68553495407104,
  2.68632245063782,
  2.68711042404175,
  2.68789887428284,
  2.6886875629425,
  2.68947672843933,
  2.69026613235474,
  2.69105625152588,
  2.6918466091156,
  2.69263744354248,
  2.69342851638794,
  2.69422030448914,
  2.69501209259033,
  2.69580459594727,
  2.69659733772278,
  2.69739055633545,
  2.69818425178528,
  2.69897842407227,
  2.69977283477783,
  2.70056772232056,
  2.70136308670044,
  2.7021586894989,
  2.70295476913452,
  2.7037513256073,
  2.70454835891724,
  2.70534563064575,
  2.70614337921143,
  2.70694160461426,
  2.70774030685425,
  2.70853924751282,
  2.70933866500854,
  2.71013855934143,
  2.7109386920929,
  2.71173930168152,
  2.7125403881073,
  2.71334195137024,
  2.71414399147034,
  2.71494626998901,
  2.71574902534485,
  2.71655225753784,
  2.71735596656799,
  2.71815991401672,
  2.71896433830261,
  2.71976923942566,
  2.72057437896729,
  2.72137999534607,
  2.72218632698059,
  2.72299289703369,
  2.72379970550537,
  2.72460699081421,
  2.72541499137878,
  2.72622323036194,
  2.72703170776367,
  2.72784090042114,
  2.72865033149719,
  2.7294602394104,
  2.73027062416077,
  2.73108148574829,
  2.73189258575439,
  2.73270416259766,
  2.73351621627808,
  2.73432874679565,
  2.73514151573181,
  2.73595499992371,
  2.73676872253418,
  2.73758268356323,
  2.73839735984802,
  2.73921251296997,
  2.7400279045105,
  2.74084377288818,
  2.74166011810303,
  2.74247694015503,
  2.74329400062561,
  2.74411153793335,
  2.74492979049683,
  2.7457480430603,
  2.74656701087952,
  2.74738645553589,
  2.74820613861084,
  2.74902629852295,
  2.74984693527222,
  2.75066804885864,
  2.75148940086365,
  2.75231146812439,
  2.75313377380371,
  2.75395655632019,
  2.75477981567383,
  2.75560331344604,
  2.756427526474,
  2.75725197792053,
  2.75807690620422,
  2.75890231132507,
  2.75972819328308,
  2.76055455207825,
  2.76138114929199,
  2.76220846176147,
  2.76303601264954,
  2.76386404037476,
  2.76469254493713,
  2.76552128791809,
  2.76635074615479,
  2.76718044281006,
  2.76801085472107,
  2.76884150505066,
  2.76967239379883,
  2.77050399780273,
  2.7713360786438,
  2.77216839790344,
  2.77300143241882,
  2.77383470535278,
  2.7746684551239,
  2.77550268173218,
  2.77633738517761,
  2.77717232704163,
  2.77800798416138,
  2.77884411811829,
  2.77968049049377,
  2.78051733970642,
  2.78135466575623,
  2.78219246864319,
  2.78303050994873,
  2.78386926651001,
  2.78470849990845,
  2.78554797172546,
  2.78638792037964,
  2.78722834587097,
  2.78806924819946,
  2.78891062736511,
  2.78975248336792,
  2.79059481620789,
  2.79143738746643,
  2.79228067398071,
  2.79312419891357,
  2.79396820068359,
  2.79481291770935,
  2.79565763473511,
  2.79650330543518,
  2.79734897613525,
  2.79819536209106,
  2.79904198646545,
  2.79988932609558,
  2.80073714256287,
  2.80158519744873,
  2.80243372917175,
  2.80328297615051,
  2.80413246154785,
  2.80498242378235,
  2.805832862854,
  2.80668377876282,
  2.80753493309021,
  2.80838680267334,
  2.80923914909363,
  2.8100917339325,
  2.8109450340271,
  2.81179881095886,
  2.8126528263092,
  2.8135073184967,
  2.81436228752136,
  2.81521773338318,
  2.81607389450073,
  2.81693029403687,
  2.81778717041016,
  2.81864428520203,
  2.81950211524963,
  2.8203604221344,
  2.82121920585632,
  2.82207846641541,
  2.82293796539307,
  2.82379817962646,
  2.82465887069702,
  2.82551980018616,
  2.82638120651245,
  2.82724332809448,
  2.82810568809509,
  2.82896876335144,
  2.82983207702637,
  2.83069610595703,
  2.83156037330627,
  2.83242511749268,
  2.83329033851624,
  2.83415603637695,
  2.83502221107483,
  2.83588910102844,
  2.83675599098206,
  2.83762383460999,
  2.83849191665649,
  2.83936047554016,
  2.84022951126099,
  2.84109902381897,
  2.84196901321411,
  2.84283947944641,
  2.84371042251587,
  2.84458184242249,
  2.84545373916626,
  2.84632611274719,
  2.84719896316528,
  2.84807229042053,
  2.84894609451294,
  2.8498203754425,
  2.85069489479065,
  2.85157012939453,
  2.85244584083557,
  2.85332202911377,
  2.85419869422913,
  2.85507583618164,
  2.85595369338989,
  2.85683178901672,
  2.85771036148071,
  2.85858941078186,
  2.85946893692017,
  2.86034893989563,
  2.86122941970825,
  2.86211037635803,
  2.86299180984497,
  2.86387395858765,
  2.8647563457489,
  2.86563920974731,
  2.86652278900146,
  2.86740660667419,
  2.86829090118408,
  2.86917591094971,
  2.87006115913391,
  2.87094712257385,
  2.87183332443237,
  2.87272024154663,
  2.87360763549805,
  2.87449550628662,
  2.87538361549377,
  2.87627243995667,
  2.87716174125671,
  2.87805151939392,
  2.87894177436829,
  2.87983250617981,
  2.88072371482849,
  2.88161540031433,
  2.88250780105591,
  2.88340044021606,
  2.88429379463196,
  2.88518738746643,
  2.88608169555664,
  2.88697624206543,
  2.88787150382996,
  2.88876724243164,
  2.88966345787048,
  2.89055991172791,
  2.89145708084106,
  2.89235496520996,
  2.89325308799744,
  2.89415168762207,
  2.89505100250244,
  2.89595055580139,
  2.89685082435608,
  2.89775133132935,
  2.89865255355835,
  2.89955425262451,
  2.90045642852783,
  2.90135908126831,
  2.90226221084595,
  2.90316605567932,
  2.90407013893127,
  2.90497493743896,
  2.90588021278381,
  2.90678572654724,
  2.90769195556641,
  2.90859866142273,
  2.90950584411621,
  2.91041350364685,
  2.91132187843323,
  2.91223049163818,
  2.91313982009888,
  2.91404962539673,
  2.91495990753174,
  2.91587066650391,
  2.91678190231323,
  2.91769361495972,
  2.91860580444336,
  2.91951870918274,
  2.92043209075928,
  2.92134594917297,
  2.92226028442383,
  2.92317509651184,
  2.92409038543701,
  2.92500638961792,
  2.92592263221741,
  2.92683959007263,
  2.92775702476501,
  2.92867493629456,
  2.92959356307983,
  2.93051242828369,
  2.93143200874329,
  2.93235182762146,
  2.93327236175537,
  2.93419361114502,
  2.93511509895325,
  2.93603706359863,
  2.93695974349976,
  2.93788290023804,
  2.93880653381348,
  2.93973064422607,
  2.94065523147583,
  2.94158053398132,
  2.94250631332397,
  2.94343256950378,
  2.94435930252075,
  2.94528651237488,
  2.94621419906616,
  2.94714260101318,
  2.94807147979736,
  2.9490008354187,
  2.94993090629578,
  2.95086121559143,
  2.95179224014282,
  2.95272374153137,
  2.95365571975708,
  2.95458841323853,
  2.95552134513855,
  2.95645499229431,
  2.95738911628723,
  2.95832371711731,
  2.95925903320312,
  2.96019458770752,
  2.96113109588623,
  2.96206784248352,
  2.96300506591797,
  2.96394300460815,
  2.96488118171692,
  2.9658203125,
  2.96675968170166,
  2.96769976615906,
  2.96864008903503,
  2.96958136558533,
  2.9705228805542,
  2.97146511077881,
  2.97240781784058,
  2.9733510017395,
  2.97429466247559,
  2.97523880004883,
  2.97618365287781,
  2.97712898254395,
  2.97807502746582,
  2.97902131080627,
  2.97996830940247,
  2.98091578483582,
  2.9818639755249,
  2.98281264305115,
  2.98376178741455,
  2.98471140861511,
  2.98566174507141,
  2.98661255836487,
  2.98756384849548,
  2.98851561546326,
  2.98946809768677,
  2.99042105674744,
  2.99137449264526,
  2.99232864379883,
  2.99328327178955,
  2.99423837661743,
  2.99519419670105,
  2.99615025520325,
  2.99710702896118,
  2.99806451797485,
  2.99902248382568,
  2.99998068809509,
  3.00093984603882,
  3.0018994808197,
  3.00285959243774,
  3.00382018089294,
  3.00478148460388,
  3.0057430267334,
  3.00670552253723,
  3.00766825675964,
  3.00863170623779,
  3.00959587097168,
  3.01056027412415,
  3.01152539253235,
  3.01249098777771,
  3.01345729827881,
  3.01442408561707,
  3.01539134979248,
  3.01635932922363,
  3.01732778549194,
  3.01829671859741,
  3.01926636695862,
  3.02023649215698,
  3.0212070941925,
  3.02217841148376,
  3.02315020561218,
  3.02412271499634,
  3.02509570121765,
  3.02606916427612,
  3.02704310417175,
  3.0280179977417,
  3.02899312973022,
  3.02996873855591,
  3.03094530105591,
  3.03192210197449,
  3.0328996181488,
  3.03387761116028,
  3.03485631942749,
  3.03583550453186,
  3.03681516647339,
  3.03779554367065,
  3.03877639770508,
  3.03975796699524,
  3.04074001312256,
  3.04172253608704,
  3.04270577430725,
  3.04368948936462,
  3.04467391967773,
  3.045658826828,
  3.04664421081543,
  3.04763031005859,
  3.04861688613892,
  3.04960417747498,
  3.05059194564819,
  3.05158042907715,
  3.05256938934326,
  3.05355882644653,
  3.05454897880554,
  3.05553960800171,
  3.05653095245361,
  3.05752277374268,
  3.05851531028748,
  3.05950832366943,
  3.06050181388855,
  3.0614960193634,
  3.06249070167542,
  3.06348609924316,
  3.06448221206665,
  3.06547856330872,
  3.06647562980652,
  3.06747341156006,
  3.06847167015076,
  3.06947064399719,
  3.07047009468079,
  3.07147002220154,
  3.07247066497803,
  3.07347178459167,
  3.07447385787964,
  3.07547616958618,
  3.07647919654846,
  3.0774827003479,
  3.07848691940308,
  3.07949161529541,
  3.08049702644348,
  3.08150291442871,
  3.08250951766968,
  3.0835165977478,
  3.08452439308167,
  3.08553290367126,
  3.08654189109802,
  3.08755135536194,
  3.08856129646301,
  3.0895721912384,
  3.09058356285095,
  3.09159541130066,
  3.0926079750061,
  3.09362101554871,
  3.09463477134705,
  3.09564924240112,
  3.09666419029236,
  3.09767961502075,
  3.09869575500488,
  3.09971261024475,
  3.10072994232178,
  3.10174798965454,
  3.10276651382446,
  3.10378551483154,
  3.10480546951294,
  3.10582566261292,
  3.10684680938721,
  3.10786819458008,
  3.10889053344727,
  3.10991334915161,
  3.11093688011169,
  3.11196088790894,
  3.11298561096191,
  3.11401081085205,
  3.11503648757935,
  3.11606311798096,
  3.11709022521973,
  3.11811780929565,
  3.1191463470459,
  3.12017512321472,
  3.12120485305786,
  3.12223482131958,
  3.12326574325562,
  3.12429714202881,
  3.12532925605774,
  3.12636184692383,
  3.12739515304565,
  3.12842893600464,
  3.12946343421936,
  3.13049864768982,
  3.13153433799744,
  3.13257074356079,
  3.1336076259613,
  3.13464522361755,
  3.13568353652954,
  3.13672256469727,
  3.13776183128357,
  3.13880205154419,
  3.13984274864197,
  3.14088416099548,
  3.14192628860474,
  3.14296889305115,
  3.14401197433472,
  3.1450560092926,
  3.14610028266907,
  3.14714550971985,
  3.14819145202637,
  3.14923787117004,
  3.15028476715088,
  3.15133261680603,
  3.15238070487976,
  3.15342974662781,
  3.15447926521301,
  3.15552949905396,
  3.15658020973206,
  3.15763187408447,
  3.15868401527405,
  3.15973663330078,
  3.16079020500183,
  3.16184401512146,
  3.16289877891541,
  3.16395401954651,
  3.16500997543335,
  3.16606664657593,
  3.16712379455566,
  3.16818165779114,
  3.16924023628235,
  3.17029929161072,
  3.1713593006134,
  3.17241978645325,
  3.17348074913025,
  3.17454242706299,
  3.17560482025146,
  3.17666792869568,
  3.17773151397705,
  3.17879581451416,
  3.17986083030701,
  3.18092656135559,
  3.18199276924133,
  3.18305969238281,
  3.18412733078003,
  3.1851954460144,
  3.1862645149231,
  3.18733406066895,
  3.18840408325195,
  3.18947505950928,
  3.19054651260376,
  3.19161868095398,
  3.19269156455994,
  3.19376492500305,
  3.1948390007019,
  3.19591379165649,
  3.19698929786682,
  3.19806528091431,
  3.19914221763611,
  3.20021963119507,
  3.20129776000977,
  3.20237636566162,
  3.20345592498779,
  3.20453596115112,
  3.20561671257019,
  3.206698179245,
  3.20778012275696,
  3.20886278152466,
  3.20994639396667,
  3.21103024482727,
  3.21211504936218,
  3.21320056915283,
  3.21428656578064,
  3.21537327766418,
  3.21646070480347,
  3.21754884719849,
  3.21863746643066,
  3.21972703933716,
  3.22081708908081,
  3.2219078540802,
  3.22299933433533,
  3.22409129142761,
  3.22518420219421,
  3.22627758979797,
  3.22737169265747,
  3.22846674919128,
  3.22956228256226,
  3.23065829277039,
  3.23175525665283,
  3.23285269737244,
  3.23395109176636,
  3.23504996299744,
  3.23614954948425,
  3.23724961280823,
  3.23835062980652,
  3.23945236206055,
  3.24055457115173,
  3.24165773391724,
  3.2427613735199,
  3.2438657283783,
  3.24497079849243,
  3.2460765838623,
  3.24718308448792,
  3.24829006195068,
  3.24939799308777,
  3.25050640106201,
  3.25161552429199,
  3.25272560119629,
  3.25383615493774,
  3.25494742393494,
  3.25605940818787,
  3.25717210769653,
  3.25828528404236,
  3.2593994140625,
  3.26051425933838,
  3.26162958145142,
  3.26274585723877,
  3.26386260986328,
  3.26498031616211,
  3.2660984992981,
  3.26721739768982,
  3.26833701133728,
  3.26945734024048,
  3.27057838439941,
  3.27170014381409,
  3.2728226184845,
  3.27394580841064,
  3.27506971359253,
  3.27619433403015,
  3.27731966972351,
  3.27844548225403,
  3.27957224845886,
  3.28069972991943,
  3.28182768821716,
  3.28295660018921,
  3.28408622741699,
  3.28521633148193,
  3.28634738922119,
  3.28747916221619,
  3.28861141204834,
  3.28974461555481,
  3.29087829589844,
  3.29201292991638,
  3.29314827919006,
  3.2942841053009,
  3.29542088508606,
  3.29655814170837,
  3.297696352005,
  3.29883527755737,
  3.2999746799469,
  3.30111503601074,
  3.30225610733032,
  3.30339789390564,
  3.30454015731812,
  3.30568337440491,
  3.30682730674744,
  3.3079719543457,
  3.30911731719971,
  3.31026339530945,
  3.31141018867493,
  3.31255769729614,
  3.3137059211731,
  3.31485509872437,
  3.31600475311279,
  3.31715512275696,
  3.31830620765686,
  3.31945824623108,
  3.32061100006104,
  3.32176423072815,
  3.32291841506958,
  3.32407331466675,
  3.32522892951965,
  3.3263852596283,
  3.32754230499268,
  3.32870006561279,
  3.32985854148865,
  3.33101797103882,
  3.33217787742615,
  3.33333873748779,
  3.33450031280518,
  3.3356626033783,
  3.33682560920715,
  3.33798909187317,
  3.33915376663208,
  3.34031891822815,
  3.34148478507996,
  3.34265160560608,
  3.34381914138794,
  3.34498739242554,
  3.34615635871887,
  3.34732604026794,
  3.34849643707275,
  3.34966778755188,
  3.35083985328674,
  3.35201239585876,
  3.3531858921051,
  3.35436010360718,
  3.35553526878357,
  3.35671091079712,
  3.35788750648499,
  3.35906481742859,
  3.36024284362793,
  3.36142158508301,
  3.36260104179382,
  3.36378145217896,
  3.36496257781982,
  3.36614441871643,
  3.36732697486877,
  3.36851024627686,
  3.36969447135925,
  3.37087941169739,
  3.37206482887268,
  3.37325143814087,
  3.37443852424622,
  3.37562656402588,
  3.37681531906128,
  3.37800478935242,
  3.37919497489929,
  3.38038611412048,
  3.38157773017883,
  3.3827702999115,
  3.38396382331848,
  3.38515782356262,
  3.38635277748108,
  3.38754844665527,
  3.38874506950378,
  3.38994216918945,
  3.39114022254944,
  3.39233899116516,
  3.3935387134552,
  3.3947389125824,
  3.39594006538391,
  3.39714193344116,
  3.39834475517273,
  3.39954829216003,
  3.40075254440308,
  3.40195751190186,
  3.40316343307495,
  3.40437006950378,
  3.40557742118835,
  3.40678548812866,
  3.40799450874329,
  3.40920448303223,
  3.41041493415833,
  3.41162633895874,
  3.41283845901489,
  3.41405153274536,
  3.41526532173157,
  3.41647982597351,
  3.41769504547119,
  3.41891121864319,
  3.42012810707092,
  3.42134594917297,
  3.42256450653076,
  3.42378377914429,
  3.42500400543213,
  3.42622494697571,
  3.42744660377502,
  3.42866921424866,
  3.42989253997803,
  3.43111658096313,
  3.43234157562256,
  3.43356728553772,
  3.4347939491272,
  3.43602132797241,
  3.43724942207336,
  3.43847846984863,
  3.43970823287964,
  3.44093894958496,
  3.44217038154602,
  3.44340252876282,
  3.44463562965393,
  3.44586968421936,
  3.44710421562195,
  3.44833970069885,
  3.44957613945007,
  3.45081329345703,
  3.45205116271973,
  3.45328998565674,
  3.45452952384949,
  3.45577001571655,
  3.45701122283936,
  3.45825338363647,
  3.45949625968933,
  3.46073985099792,
  3.46198439598083,
  3.46322989463806,
  3.46447610855103,
  3.46572303771973,
  3.46697092056274,
  3.4682195186615,
  3.46946907043457,
  3.47071933746338,
  3.4719705581665,
  3.47322249412537,
  3.47447538375854,
  3.47572898864746,
  3.47698354721069,
  3.47823905944824,
  3.47949528694153,
  3.48075222969055,
  3.48201012611389,
  3.48326873779297,
  3.48452830314636,
  3.48578858375549,
  3.48704981803894,
  3.4883120059967,
  3.48957490921021,
  3.49083876609802,
  3.49210333824158,
  3.49336886405945,
  3.49463510513306,
  3.49590229988098,
  3.49717020988464,
  3.49843907356262,
  3.49970889091492,
  3.50097918510437,
  3.5022509098053,
  3.50352311134338,
  3.50479602813721,
  3.50607013702393,
  3.50734496116638,
  3.50862050056458,
  3.50989723205566,
  3.51117467880249,
  3.51245284080505,
  3.51373195648193,
  3.51501202583313,
  3.51629281044006,
  3.51757454872131,
  3.51885724067688,
  3.52014064788818,
  3.5214250087738,
  3.52271008491516,
  3.52399611473083,
  3.52528309822083,
  3.52657079696655,
  3.5278594493866,
  3.52914905548096,
  3.53043961524963,
  3.53173089027405,
  3.5330228805542,
  3.53431606292725,
  3.53560996055603,
  3.53690481185913,
  3.53820037841797,
  3.53949689865112,
  3.54079437255859,
  3.5420925617218,
  3.54339170455933,
  3.54469180107117,
  3.54599285125732,
  3.54729461669922,
  3.54859733581543,
  3.54990100860596,
  3.55120539665222,
  3.55251097679138,
  3.5538170337677,
  3.55512428283691,
  3.55643248558044,
  3.55774140357971,
  3.5590512752533,
  3.56036186218262,
  3.56167340278625,
  3.56298613548279,
  3.56429958343506,
  3.56561374664307,
  3.56692910194397,
  3.56824517250061,
  3.56956219673157,
  3.57088017463684,
  3.57219910621643,
  3.57351875305176,
  3.5748393535614,
  3.57616090774536,
  3.57748341560364,
  3.57880663871765,
  3.58013105392456,
  3.58145618438721,
  3.58278226852417,
  3.58410930633545,
  3.58543705940247,
  3.58676600456238,
  3.58809566497803,
  3.58942627906799,
  3.59075784683228,
  3.59209036827087,
  3.59342384338379,
  3.59475803375244,
  3.59609341621399,
  3.59742951393127,
  3.59876656532288,
  3.60010457038879,
  3.60144352912903,
  3.60278344154358,
  3.60412430763245,
  3.60546588897705,
  3.60680842399597,
  3.60815215110779,
  3.60949659347534,
  3.61084198951721,
  3.6121883392334,
  3.6135356426239,
  3.61488389968872,
  3.61623311042786,
  3.61758327484131,
  3.6189341545105,
  3.62028622627258,
  3.62163901329041,
  3.62299299240112,
  3.62434768676758,
  3.62570357322693,
  3.62706017494202,
  3.62841773033142,
  3.62977623939514,
  3.63113570213318,
  3.63249635696411,
  3.63385772705078,
  3.63522005081177,
  3.63658332824707,
  3.63794755935669,
  3.63931274414062,
  3.64067888259888,
  3.64204621315002,
  3.64341425895691,
  3.64478325843811,
  3.64615321159363,
  3.64752411842346,
  3.64889597892761,
  3.65026879310608,
  3.65164279937744,
  3.65301752090454,
  3.65439319610596,
  3.65576982498169,
  3.65714764595032,
  3.65852618217468,
  3.65990591049194,
  3.66128635406494,
  3.66266798973083,
  3.66405057907104,
  3.66543388366699,
  3.66681861877441,
  3.66820383071899,
  3.66959023475647,
  3.67097759246826,
  3.67236614227295,
  3.67375540733337,
  3.67514562606812,
  3.67653703689575,
  3.67792940139771,
  3.6793224811554,
  3.68071675300598,
  3.68211221694946,
  3.68350839614868,
  3.68490552902222,
  3.68630361557007,
  3.68770289421082,
  3.6891028881073,
  3.69050431251526,
  3.69190645217896,
  3.69330954551697,
  3.6947135925293,
  3.69611883163452,
  3.69752478599548,
  3.69893193244934,
  3.70034027099609,
  3.70174932479858,
  3.70315933227539,
  3.70457053184509,
  3.70598268508911,
  3.70739579200745,
  3.70881009101868,
  3.71022510528564,
  3.71164131164551,
  3.71305847167969,
  3.71447658538818,
  3.71589589118958,
  3.7173159122467,
  3.71873712539673,
  3.72015929222107,
  3.72158265113831,
  3.72300696372986,
  3.72443222999573,
  3.72585844993591,
  3.72728562355042,
  3.72871398925781,
  3.73014330863953,
  3.73157382011414,
  3.73300528526306,
  3.7344377040863,
  3.73587107658386,
  3.73730540275574,
  3.73874092102051,
  3.74017763137817,
  3.74161505699158,
  3.74305367469788,
  3.74449324607849,
  3.745934009552,
  3.74737572669983,
  3.74881839752197,
  3.75026226043701,
  3.75170707702637,
  3.75315284729004,
  3.75459980964661,
  3.75604772567749,
  3.75749659538269,
  3.75894665718079,
  3.7603976726532,
  3.76184988021851,
  3.76330304145813,
  3.76475715637207,
  3.76621246337891,
  3.76766872406006,
  3.76912617683411,
  3.77058458328247,
  3.77204394340515,
  3.77350449562073,
  3.77496600151062,
  3.77642869949341,
  3.77789235115051,
  3.77935719490051,
  3.78082299232483,
  3.78228998184204,
  3.78375792503357,
  3.78522682189941,
  3.78669691085815,
  3.78816819190979,
  3.78964018821716,
  3.79111361503601,
  3.79258799552917,
  3.79406332969666,
  3.79553985595703,
  3.7970175743103,
  3.79849600791931,
  3.79997587203979,
  3.80145668983459,
  3.80293869972229,
  3.8044216632843,
  3.80590558052063,
  3.80739068984985,
  3.80887699127197,
  3.81036424636841,
  3.81185269355774,
  3.81334209442139,
  3.81483268737793,
  3.81632447242737,
  3.81781721115112,
  3.81931090354919,
  3.82080602645874,
  3.8223021030426,
  3.82379913330078,
  3.82529735565186,
  3.82679677009583,
  3.82829713821411,
  3.82979869842529,
  3.83130121231079,
  3.83280515670776,
  3.83430981636047,
  3.83581590652466,
  3.83732295036316,
  3.83883118629456,
  3.84034037590027,
  3.84185075759888,
  3.84336233139038,
  3.8448748588562,
  3.8463888168335,
  3.84790349006653,
  3.84941959381104,
  3.85093665122986,
  3.85245490074158,
  3.85397410392761,
  3.85549449920654,
  3.85701608657837,
  3.85853886604309,
  3.86006283760071,
  3.86158776283264,
  3.86311388015747,
  3.86464095115662,
  3.86616945266724,
  3.86769890785217,
  3.86922955513,
  3.87076139450073,
  3.87229418754578,
  3.87382817268372,
  3.87536334991455,
  3.87689971923828,
  3.87843728065491,
  3.87997579574585,
  3.88151550292969,
  3.88305640220642,
  3.88459849357605,
  3.88614177703857,
  3.88768601417542,
  3.88923144340515,
  3.89077830314636,
  3.89232611656189,
  3.89387488365173,
  3.89542508125305,
  3.89697623252869,
  3.8985288143158,
  3.90008234977722,
  3.90163707733154,
  3.90319299697876,
  3.90475010871887,
  3.90630841255188,
  3.90786790847778,
  3.909428358078,
  3.91098999977112,
  3.91255307197571,
  3.91411709785461,
  3.91568231582642,
  3.91724896430969,
  3.91881656646729,
  3.92038536071777,
  3.92195534706116,
  3.92352652549744,
  3.92509889602661,
  3.92667245864868,
  3.92824721336365,
  3.92982292175293,
  3.93140006065369,
  3.93297839164734,
  3.93455791473389,
  3.93613839149475,
  3.93772029876709,
  3.93930339813232,
  3.94088768959045,
  3.94247317314148,
  3.9440598487854,
  3.94564771652222,
  3.94723677635193,
  3.94882702827454,
  3.95041847229004,
  3.95201110839844,
  3.95360493659973,
  3.95519995689392,
  3.95679640769958,
  3.95839381217957,
  3.95999264717102,
  3.96159243583679,
  3.96319365501404,
  3.96479606628418,
  3.96639966964722,
  3.96800446510315,
  3.96961045265198,
  3.9712176322937,
  3.97282600402832,
  3.97443580627441,
  3.9760468006134,
  3.97765898704529,
  3.97927236557007,
  3.98088693618774,
  3.98250269889832,
  3.98411989212036,
  3.98573803901672,
  3.98735761642456,
  3.98897838592529,
  3.9906005859375,
  3.99222373962402,
  3.99384832382202,
  3.99547410011292,
  3.9971010684967,
  3.99872922897339,
  4.00035858154297,
  4.00198936462402,
  4.00362157821655,
  4.0052547454834,
  4.00688934326172,
  4.00852489471436,
  4.01016235351562,
  4.01180028915405,
  4.01344013214111,
  4.01508092880249,
  4.01672267913818,
  4.01836633682251,
  4.02001094818115,
  4.02165651321411,
  4.0233039855957,
  4.02495241165161,
  4.02660179138184,
  4.02825307846069,
  4.02990531921387,
  4.03155851364136,
  4.03321361541748,
  4.03486967086792,
  4.03652667999268,
  4.03818559646606,
  4.03984546661377,
  4.04150676727295,
  4.04316902160645,
  4.04483318328857,
  4.04649829864502,
  4.04816436767578,
  4.04983186721802,
  4.05150127410889,
  4.05317115783691,
  4.05484294891357,
  4.05651569366455,
  4.058189868927,
  4.05986547470093,
  4.06154203414917,
  4.06322002410889,
  4.06489944458008,
  4.06658029556274,
  4.06826210021973,
  4.06994581222534,
  4.07163000106812,
  4.07331609725952,
  4.0750036239624,
  4.0766921043396,
  4.07838201522827,
  4.08007287979126,
  4.08176565170288,
  4.08345937728882,
  4.08515453338623,
  4.08685111999512,
  4.08854913711548,
  4.09024810791016,
  4.09194898605347,
  4.09365081787109,
  4.0953540802002,
  4.09705829620361,
  4.09876441955566,
  4.10047149658203,
  4.10218000411987,
  4.10388994216919,
  4.10560131072998,
  4.10731363296509,
  4.10902786254883,
  4.11074304580688,
  4.11245965957642,
  4.11417770385742,
  4.1158971786499,
  4.1176176071167,
  4.11933994293213,
  4.12106323242188,
  4.1227879524231,
  4.12451410293579,
  4.12624168395996,
  4.12797069549561,
  4.12970113754272,
  4.13143253326416,
  4.13316535949707,
  4.13490009307861,
  4.13663578033447,
  4.13837289810181,
  4.14011144638062,
  4.1418514251709,
  4.1435923576355,
  4.14533519744873,
  4.14707899093628,
  4.14882469177246,
  4.15057134628296,
  4.15231943130493,
  4.15406942367554,
  4.15582036972046,
  4.15757274627686,
  4.15932655334473,
  4.16108179092407,
  4.16283798217773,
  4.16459608078003,
  4.1663556098938,
  4.16811656951904,
  4.1698784828186,
  4.1716423034668,
  4.17340707778931,
  4.17517375946045,
  4.17694139480591,
  4.1787109375,
  4.18048143386841,
  4.18225383758545,
  4.18402719497681,
  4.18580198287964,
  4.1875786781311,
  4.18935632705688,
  4.19113540649414,
  4.19291639328003,
  4.19469833374023,
  4.19648170471191,
  4.19826698303223,
  4.20005321502686,
  4.20184087753296,
  4.2036304473877,
  4.20542097091675,
  4.20721340179443,
  4.20900678634644,
  4.21080207824707,
  4.21259880065918,
  4.21439647674561,
  4.21619606018066,
  4.21799659729004,
  4.21979904174805,
  4.22160291671753,
  4.22340822219849,
  4.22521495819092,
  4.22702312469482,
  4.22883272171021,
  4.23064374923706,
  4.23245668411255,
  4.23427057266235,
  4.23608589172363,
  4.23790311813354,
  4.23972177505493,
  4.24154138565063,
  4.24336290359497,
  4.24518585205078,
  4.24701023101807,
  4.24883651733398,
  4.25066375732422,
  4.25249242782593,
  4.25432300567627,
  4.25615501403809,
  4.25798797607422,
  4.25982284545898,
  4.26165962219238,
  4.2634973526001,
  4.26533651351929,
  4.26717758178711,
  4.26901960372925,
  4.27086353302002,
  4.27270889282227,
  4.27455615997314,
  4.27640438079834,
  4.27825450897217,
  4.28010559082031,
  4.28195858001709,
  4.2838134765625,
  4.28566932678223,
  4.28752708435059,
  4.28938579559326,
  4.29124641418457,
  4.29310846328735,
  4.29497241973877,
  4.29683780670166,
  4.29870414733887,
  4.30057239532471,
  4.30244255065918,
  4.30431365966797,
  4.30618667602539,
  4.30806112289429,
  4.30993700027466,
  4.31181478500366,
  4.31369400024414,
  4.31557464599609,
  4.31745672225952,
  4.31934070587158,
  4.32122611999512,
  4.32311296463013,
  4.32500123977661,
  4.32689142227173,
  4.32878303527832,
  4.33067607879639,
  4.33257102966309,
  4.3344669342041,
  4.33636522293091,
  4.33826446533203,
  4.34016561508179,
  4.34206819534302,
  4.34397268295288,
  4.34587812423706,
  4.34778547286987,
  4.34969472885132,
  4.35160541534424,
  4.35351753234863,
  4.3554310798645,
  4.357346534729,
  4.35926342010498,
  4.36118221282959,
  4.36310243606567,
  4.36502408981323,
  4.36694765090942,
  4.36887264251709,
  4.37079906463623,
  4.372727394104,
  4.37465715408325,
  4.37658882141113,
  4.37852191925049,
  4.38045644760132,
  4.38239288330078,
  4.38433074951172,
  4.38627052307129,
  4.38821172714233,
  4.39015483856201,
  4.39209938049316,
  4.39404535293579,
  4.39599323272705,
  4.39794254302979,
  4.39989376068115,
  4.40184640884399,
  4.40380048751831,
  4.40575647354126,
  4.40771436691284,
  4.4096736907959,
  4.41163492202759,
  4.41359758377075,
  4.41556167602539,
  4.41752767562866,
  4.41949510574341,
  4.42146444320679,
  4.4234356880188,
  4.42540836334229,
  4.42738246917725,
  4.42935848236084,
  4.43133640289307,
  4.43331575393677,
  4.43529653549194,
  4.43727922439575,
  4.43926382064819,
  4.44124984741211,
  4.44323778152466,
  4.44522714614868,
  4.44721841812134,
  4.44921112060547,
  4.45120573043823,
  4.45320224761963,
  4.4552001953125,
  4.457200050354,
  4.45920133590698,
  4.46120452880859,
  4.46320915222168,
  4.4652156829834,
  4.46722412109375,
  4.46923398971558,
  4.47124576568604,
  4.47325944900513,
  4.47527456283569,
  4.47729158401489,
  4.47931003570557,
  4.48133039474487,
  4.48335266113281,
  4.48537635803223,
  4.48740196228027,
  4.48942947387695,
  4.49145841598511,
  4.49348926544189,
  4.49552202224731,
  4.49755620956421,
  4.49959230422974,
  4.5016303062439,
  4.50366973876953,
  4.5057110786438,
  4.5077543258667,
  4.50979900360107,
  4.51184558868408,
  4.51389408111572,
  4.515944480896,
  4.51799631118774,
  4.52005004882812,
  4.52210569381714,
  4.52416276931763,
  4.52622222900391,
  4.52828311920166,
  4.53034591674805,
  4.53241014480591,
  4.5344762802124,
  4.53654479980469,
  4.53861427307129,
  4.54068613052368,
  4.54275989532471,
  4.54483509063721,
  4.54691219329834,
  4.54899120330811,
  4.55107164382935,
  4.55315399169922,
  4.55523872375488,
  4.55732488632202,
  4.55941295623779,
  4.56150245666504,
  4.56359434127808,
  4.56568765640259,
  4.56778287887573,
  4.56988048553467,
  4.57197952270508,
  4.57407999038696,
  4.57618284225464,
  4.57828760147095,
  4.58039379119873,
  4.58250188827515,
  4.5846118927002,
  4.58672380447388,
  4.58883762359619,
  4.59095335006714,
  4.59307098388672,
  4.59519052505493,
  4.59731149673462,
  4.5994348526001,
  4.60155963897705,
  4.60368680953979,
  4.60581541061401,
  4.60794591903687,
  4.61007881164551,
  4.61221313476562,
  4.61434936523438,
  4.61648750305176,
  4.61862754821777,
  4.62076950073242,
  4.6229133605957,
  4.62505912780762,
  4.62720680236816,
  4.62935638427734,
  4.63150787353516,
  4.6336612701416,
  4.63581657409668,
  4.63797378540039,
  4.64013290405273,
  4.64229393005371,
  4.64445686340332,
  4.64662218093872,
  4.6487889289856,
  4.6509575843811,
  4.6531286239624,
  4.65530109405518,
  4.65747547149658,
  4.65965223312378,
  4.66183090209961,
  4.66401100158691,
  4.66619348526001,
  4.66837787628174,
  4.6705641746521,
  4.67275238037109,
  4.67494249343872,
  4.67713499069214,
  4.67932891845703,
  4.68152523040771,
  4.68372297286987,
  4.68592309951782,
  4.68812561035156,
  4.69032955169678,
  4.69253540039062,
  4.69474363327026,
  4.69695329666138,
  4.69916534423828,
  4.70137929916382,
  4.70359516143799,
  4.70581340789795,
  4.70803308486938,
  4.71025514602661,
  4.71247911453247,
  4.71470499038696,
  4.71693325042725,
  4.71916341781616,
  4.72139549255371,
  4.72362947463989,
  4.72586536407471,
  4.72810363769531,
  4.73034381866455,
  4.73258590698242,
  4.73482990264893,
  4.73707628250122,
  4.73932456970215,
  4.74157476425171,
  4.74382734298706,
  4.74608182907104,
  4.74833822250366,
  4.75059700012207,
  4.75285720825195,
  4.75511980056763,
  4.75738477706909,
  4.75965166091919,
  4.76192045211792,
  4.76419162750244,
  4.76646423339844,
  4.76873970031738,
  4.7710165977478,
  4.77329587936401,
  4.77557706832886,
  4.77786064147949,
  4.78014612197876,
  4.78243398666382,
  4.78472328186035,
  4.78701543807983,
  4.78930950164795,
  4.7916054725647,
  4.79390335083008,
  4.79620361328125,
  4.79850625991821,
  4.80081033706665,
  4.80311727523804,
  4.80542612075806,
  4.80773687362671,
  4.81005001068115,
  4.81236505508423,
  4.81468200683594,
  4.8170018196106,
  4.81932306289673,
  4.82164669036865,
  4.82397270202637,
  4.82630062103271,
  4.82863092422485,
  4.83096313476562,
  4.83329772949219,
  4.83563423156738,
  4.83797311782837,
  4.84031391143799,
  4.8426570892334,
  4.8450026512146,
  4.84735012054443,
  4.84969997406006,
  4.85205173492432,
  4.85440587997437,
  4.85676193237305,
  4.85912036895752,
  4.86148118972778,
  4.86384391784668,
  4.86620903015137,
  4.86857652664185,
  4.87094593048096,
  4.8733172416687,
  4.87569141387939,
  4.87806749343872,
  4.88044595718384,
  4.88282632827759,
  4.88520908355713,
  4.88759422302246,
  4.88998174667358,
  4.89237117767334,
  4.89476299285889,
  4.89715671539307,
  4.8995532989502,
  4.90195178985596,
  4.90435218811035,
  4.9067554473877,
  4.90916061401367,
  4.91156816482544,
  4.913978099823,
  4.91639041900635,
  4.91880464553833,
  4.9212212562561,
  4.92364025115967,
  4.92606115341187,
  4.92848491668701,
  4.93091058731079,
  4.93333864212036,
  4.93576908111572,
  4.93820190429688,
  4.94063663482666,
  4.94307422637939,
  4.94551372528076,
  4.94795560836792,
  4.95039987564087,
  4.95284652709961,
  4.95529508590698,
  4.9577465057373,
  4.96019983291626,
  4.96265602111816,
  4.9651141166687,
  4.96757459640503,
  4.97003746032715,
  4.97250270843506,
  4.97497034072876,
  4.97744035720825,
  4.97991275787354,
  4.98238754272461,
  4.98486471176147,
  4.98734378814697,
  4.98982572555542,
  4.9923095703125,
  4.99479627609253,
  4.99728536605835,
  4.9997763633728,
  5.00227022171021,
  5.0047664642334,
  5.00726509094238,
  5.009765625,
  5.01226902008057,
  5.01477479934692,
  5.01728296279907,
  5.01979351043701,
  5.02230644226074,
  5.02482175827026,
  5.02733945846558,
  5.02985954284668,
  5.03238248825073,
  5.03490734100342,
  5.03743505477905,
  5.03996467590332,
  5.04249715805054,
  5.04503202438354,
  5.04756927490234,
  5.05010938644409,
  5.05265140533447,
  5.0551962852478,
  5.05774354934692,
  5.06029319763184,
  5.06284523010254,
  5.06539964675903,
  5.06795692443848,
  5.07051610946655,
  5.07307863235474,
  5.07564306259155,
  5.07820987701416,
  5.08077955245972,
  5.08335161209106,
  5.0859260559082,
  5.08850336074829,
  5.09108257293701,
  5.09366464614868,
  5.0962495803833,
  5.09883642196655,
  5.10142612457275,
  5.1040186882019,
  5.10661315917969,
  5.10921049118042,
  5.11181020736694,
  5.11441278457642,
  5.11701774597168,
  5.11962509155273,
  5.12223529815674,
  5.12484788894653,
  5.12746286392212,
  5.13008069992065,
  5.13270139694214,
  5.13532400131226,
  5.13794946670532,
  5.14057779312134,
  5.14320850372314,
  5.14584159851074,
  5.14847755432129,
  5.15111589431763,
  5.15375709533691,
  5.15640068054199,
  5.15904712677002,
  5.16169595718384,
  5.16434764862061,
  5.16700172424316,
  5.16965866088867,
  5.17231798171997,
  5.17498016357422,
  5.17764520645142,
  5.1803126335144,
  5.18298244476318,
  5.18565511703491,
  5.18833065032959,
  5.19100856781006,
  5.19368886947632,
  5.19637250900269,
  5.19905853271484,
  5.20174741744995,
  5.20443868637085,
  5.2071328163147,
  5.20982933044434,
  5.21252870559692,
  5.21523094177246,
  5.21793603897095,
  5.22064352035522,
  5.22335386276245,
  5.22606658935547,
  5.22878265380859,
  5.23150110244751,
  5.23422193527222,
  5.23694610595703,
  5.23967266082764,
  5.24240207672119,
  5.2451343536377,
  5.24786901473999,
  5.25060653686523,
  5.25334692001343,
  5.25609016418457,
  5.25883626937866,
  5.26158475875854,
  5.26433610916138,
  5.26709032058716,
  5.26984739303589,
  5.27260732650757,
  5.2753701210022,
  5.27813529968262,
  5.28090333938599,
  5.28367471694946,
  5.28644847869873,
  5.28922510147095,
  5.29200458526611,
  5.29478645324707,
  5.29757165908813,
  5.30035972595215,
  5.30315017700195,
  5.30594396591187,
  5.30874061584473,
  5.31153964996338,
  5.31434202194214,
  5.31714677810669,
  5.31995487213135,
  5.3227653503418,
  5.32557916641235,
  5.3283953666687,
  5.33121490478516,
  5.3340368270874,
  5.33686208724976,
  5.33969020843506,
  5.34252119064331,
  5.34535503387451,
  5.34819173812866,
  5.35103130340576,
  5.35387372970581,
  5.35671901702881,
  5.35956764221191,
  5.36241912841797,
  5.36527299880981,
  5.36813020706177,
  5.37099027633667,
  5.37385368347168,
  5.37671947479248,
  5.37958860397339,
  5.38246059417725,
  5.38533544540405,
  5.38821315765381,
  5.39109420776367,
  5.39397811889648,
  5.39686489105225,
  5.39975452423096,
  5.40264749526978,
  5.40554332733154,
  5.40844202041626,
  5.41134357452393,
  5.4142484664917,
  5.41715621948242,
  5.42006731033325,
  5.42298126220703,
  5.42589807510376,
  5.4288182258606,
  5.43174123764038,
  5.43466711044312,
  5.43759632110596,
  5.44052839279175,
  5.44346332550049,
  5.44640159606934,
  5.44934320449829,
  5.4522876739502,
  5.45523500442505,
  5.45818567276001,
  5.46113920211792,
  5.46409606933594,
  5.4670557975769,
  5.47001886367798,
  5.472984790802,
  5.47595405578613,
  5.47892618179321,
  5.48190212249756,
  5.4848804473877,
  5.48786211013794,
  5.49084711074829,
  5.49383497238159,
  5.496826171875,
  5.49982023239136,
  5.50281763076782,
  5.50581836700439,
  5.50882196426392,
  5.5118293762207,
  5.51483917236328,
  5.51785278320312,
  5.52086925506592,
  5.52388906478882,
  5.52691173553467,
  5.52993774414062,
  5.53296709060669,
  5.53599977493286,
  5.53903532028198,
  5.54207468032837,
  5.54511690139771,
  5.54816198348999,
  5.55121088027954,
  5.55426263809204,
  5.55731821060181,
  5.56037616729736,
  5.56343793869019,
  5.56650304794312,
  5.56957149505615,
  5.57264280319214,
  5.57571792602539,
  5.57879590988159,
  5.5818772315979,
  5.58496189117432,
  5.58804988861084,
  5.59114122390747,
  5.59423589706421,
  5.59733390808105,
  5.60043525695801,
  5.60353946685791,
  5.60664749145508,
  5.60975885391235,
  5.61287355422974,
  5.61599159240723,
  5.61911296844482,
  5.62223768234253,
  5.62536573410034,
  5.62849712371826,
  5.63163185119629,
  5.63477039337158,
  5.63791179656982,
  5.64105701446533,
  5.64420509338379,
  5.64735698699951,
  5.65051221847534,
  5.65367126464844,
  5.65683317184448,
  5.65999889373779,
  5.66316747665405,
  5.66633987426758,
  5.66951608657837,
  5.67269515991211,
  5.67587804794312,
  5.67906427383423,
  5.68225383758545,
  5.68544721603394,
  5.68864393234253,
  5.69184398651123,
  5.6950478553772,
  5.69825458526611,
  5.70146560668945,
  5.70467948913574,
  5.7078971862793,
  5.71111869812012,
  5.71434307098389,
  5.71757173538208,
  5.72080326080322,
  5.72403860092163,
  5.7272777557373,
  5.73052024841309,
  5.73376607894897,
  5.73701572418213,
  5.74026918411255,
  5.74352598190308,
  5.74678611755371,
  5.75005006790161,
  5.75331783294678,
  5.75658893585205,
  5.75986337661743,
  5.76314210891724,
  5.76642417907715,
  5.76970958709717,
  5.77299880981445,
  5.776291847229,
  5.77958869934082,
  5.78288888931274,
  5.78619241714478,
  5.78950023651123,
  5.79281139373779,
  5.79612636566162,
  5.79944467544556,
  5.80276727676392,
  5.80609321594238,
  5.80942296981812,
  5.81275653839111,
  5.81609344482422,
  5.81943416595459,
  5.82277870178223,
  5.82612705230713,
  5.8294792175293,
  5.83283519744873,
  5.83619451522827,
  5.83955812454224,
  5.84292507171631,
  5.84629583358765,
  5.84967041015625,
  5.85304927825928,
  5.85643148422241,
  5.85981750488281,
  5.86320734024048,
  5.86660099029541,
  5.86999845504761,
  5.87339973449707,
  5.8768048286438,
  5.88021373748779,
  5.88362646102905,
  5.88704299926758,
  5.89046382904053,
  5.89388799667358,
  5.89731645584106,
  5.90074872970581,
  5.90418481826782,
  5.9076247215271,
  5.91106843948364,
  5.91451597213745,
  5.91796779632568,
  5.92142343521118,
  5.92488288879395,
  5.92834615707397,
  5.93181371688843,
  5.93528461456299,
  5.93876028060913,
  5.94223928451538,
  5.94572257995605,
  5.94920969009399,
  5.9527006149292,
  5.95619583129883,
  5.95969486236572,
  5.96319818496704,
  5.96670532226562,
  5.97021627426147,
  5.97373151779175,
  5.97725057601929,
  5.98077392578125,
  5.98430109024048,
  5.98783254623413,
  5.99136781692505,
  5.99490737915039,
  5.998450756073,
  6.00199842453003,
  6.00554990768433,
  6.00910568237305,
  6.01266574859619,
  6.0162296295166,
  6.01979780197144,
  6.02336978912354,
  6.02694654464722,
  6.03052663803101,
  6.03411149978638,
  6.03770017623901,
  6.04129314422607,
  6.04489040374756,
  6.04849147796631,
  6.05209684371948,
  6.05570650100708,
  6.0593204498291,
  6.06293821334839,
  6.06656074523926,
  6.07018709182739,
  6.07381772994995,
  6.07745265960693,
  6.08109188079834,
  6.08473491668701,
  6.08838272094727,
  6.09203481674194,
  6.09569072723389,
  6.09935140609741,
  6.1030158996582,
  6.10668516159058,
  6.11035823822021,
  6.11403608322144,
  6.11771774291992,
  6.12140417098999,
  6.12509489059448,
  6.12878942489624,
  6.13248872756958,
  6.13619232177734,
  6.13990068435669,
  6.1436128616333,
  6.14732933044434,
  6.15105056762695,
  6.15477609634399,
  6.15850591659546,
  6.16224050521851,
  6.16597890853882,
  6.16972208023071,
  6.17347002029419,
  6.17722177505493,
  6.18097829818726,
  6.184739112854,
  6.18850469589233,
  6.19227457046509,
  6.19604873657227,
  6.19982767105103,
  6.20361089706421,
  6.20739841461182,
  6.21119070053101,
  6.21498775482178,
  6.21878910064697,
  6.22259521484375,
  6.22640562057495,
  6.23022031784058,
  6.23403978347778,
  6.23786401748657,
  6.24169301986694,
  6.24552631378174,
  6.24936389923096,
  6.25320672988892,
  6.25705337524414,
  6.26090526580811,
  6.26476192474365,
  6.26862287521362,
  6.27248811721802,
  6.27635860443115,
  6.28023338317871,
  6.28411293029785,
  6.28799724578857,
  6.29188632965088,
  6.29578018188477,
  6.29967832565308,
  6.30358123779297,
  6.3074893951416,
  6.31140184402466,
  6.3153190612793,
  6.31924104690552,
  6.32316780090332,
  6.32709932327271,
  6.33103561401367,
  6.33497667312622,
  6.33892250061035,
  6.34287309646606,
  6.34682893753052,
  6.35078907012939,
  6.35475397109985,
  6.35872411727905,
  6.36269903182983,
  6.3666787147522,
  6.37066316604614,
  6.37465238571167,
  6.37864685058594,
  6.38264560699463,
  6.38665008544922,
  6.39065885543823,
  6.39467287063599,
  6.39869165420532,
  6.40271520614624,
  6.4067440032959,
  6.41077756881714,
  6.41481590270996,
  6.41885948181152,
  6.42290830612183,
  6.42696189880371,
  6.43102025985718,
  6.43508386611938,
  6.43915224075317,
  6.4432258605957,
  6.44730472564697,
  6.45138788223267,
  6.45547676086426,
  6.45957040786743,
  6.46366930007935,
  6.4677734375,
  6.47188234329224,
  6.47599649429321,
  6.48011589050293,
  6.48424005508423,
  6.48836946487427,
  6.49250411987305,
  6.49664402008057,
  6.50078916549683,
  6.50493907928467,
  6.50909423828125,
  6.51325511932373,
  6.51742029190063,
  6.52159118652344,
  6.52576732635498,
  6.52994871139526,
  6.53413534164429,
  6.53832721710205,
  6.54252433776855,
  6.5467267036438,
  6.55093431472778,
  6.55514717102051,
  6.55936527252197,
  6.56358909606934,
  6.56781768798828,
  6.57205200195312,
  6.57629156112671,
  6.58053636550903,
  6.5847864151001,
  6.58904218673706,
  6.59330320358276,
  6.59756946563721,
  6.60184144973755,
  6.60611867904663,
  6.61040115356445,
  6.61468887329102,
  6.61898279190063,
  6.62328147888184,
  6.62758588790894,
  6.63189554214478,
  6.63621091842651,
  6.64053201675415,
  6.64485836029053,
  6.64918994903564,
  6.65352773666382,
  6.65787029266357,
  6.66221904754639,
  6.66657304763794,
  6.67093229293823,
  6.67529773712158,
  6.67966842651367,
  6.68404483795166,
  6.68842697143555,
  6.69281435012817,
  6.69720792770386,
  6.70160675048828,
  6.7060112953186,
  6.71042108535767,
  6.71483707427979,
  6.7192587852478,
  6.72368621826172,
  6.72811889648438,
  6.73255777359009,
  6.7370023727417,
  6.74145221710205,
  6.74590826034546,
  6.75037002563477,
  6.75483751296997,
  6.75931072235107,
  6.76379013061523,
  6.76827478408813,
  6.77276563644409,
  6.77726221084595,
  6.7817645072937,
  6.78627300262451,
  6.79078674316406,
  6.79530668258667,
  6.79983282089233,
  6.8043646812439,
  6.80890226364136,
  6.81344604492188,
  6.81799554824829,
  6.82255125045776,
  6.82711267471313,
  6.83168029785156,
  6.83625364303589,
  6.84083318710327,
  6.84541845321655,
  6.85001039505005,
  6.85460758209229,
  6.85921144485474,
  6.86382102966309,
  6.86843681335449,
  6.8730583190918,
  6.87768650054932,
  6.88232040405273,
  6.88696050643921,
  6.89160680770874,
  6.89625930786133,
  6.90091753005981,
  6.90558242797852,
  6.91025352478027,
  6.91493034362793,
  6.9196138381958,
  6.92430353164673,
  6.92899894714355,
  6.9337010383606,
  6.93840932846069,
  6.94312381744385,
  6.94784450531006,
  6.95257186889648,
  6.95730495452881,
  6.96204471588135,
  6.96679067611694,
  6.97154331207275,
  6.97630214691162,
  6.98106718063354,
  6.98583841323853,
  6.99061632156372,
  6.99540090560913,
  7.0001916885376,
  7.00498867034912,
  7.00979232788086,
  7.01460218429565,
  7.01941919326782,
  7.02424192428589,
  7.02907180786133,
  7.03390741348267,
  7.03875017166138,
  7.04359912872314,
  7.04845523834229,
  7.05331707000732,
  7.05818605422974,
  7.06306171417236,
  7.06794357299805,
  7.07283210754395,
  7.07772731781006,
  7.08262920379639,
  7.08753776550293,
  7.09245300292969,
  7.09737491607666,
  7.10230398178101,
  7.10723924636841,
  7.11218118667603,
  7.11713027954102,
  7.12208557128906,
  7.12704801559448,
  7.13201713562012,
  7.13699340820312,
  7.14197587966919,
  7.14696550369263,
  7.15196180343628,
  7.1569652557373,
  7.16197538375854,
  7.16699266433716,
  7.17201662063599,
  7.17704725265503,
  7.18208503723145,
  7.18712997436523,
  7.19218158721924,
  7.19724035263062,
  7.20230579376221,
  7.20737838745117,
  7.21245813369751,
  7.21754503250122,
  7.22263860702515,
  7.22773933410645,
  7.23284721374512,
  7.23796224594116,
  7.24308443069458,
  7.24821376800537,
  7.25334978103638,
  7.25849342346191,
  7.26364421844482,
  7.26880168914795,
  7.27396678924561,
  7.27913904190063,
  7.28431844711304,
  7.28950548171997,
  7.29469919204712,
  7.2999005317688,
  7.30510902404785,
  7.31032466888428,
  7.31554794311523,
  7.32077836990356,
  7.32601594924927,
  7.3312611579895,
  7.33651399612427,
  7.34177350997925,
  7.34704113006592,
  7.35231590270996,
  7.35759782791138,
  7.36288738250732,
  7.3681845664978,
  7.37348937988281,
  7.3788013458252,
  7.38412141799927,
  7.38944816589355,
  7.39478302001953,
  7.40012550354004,
  7.40547513961792,
  7.41083288192749,
  7.41619777679443,
  7.42157077789307,
  7.42695093154907,
  7.43233919143677,
  7.43773508071899,
  7.44313859939575,
  7.44854927062988,
  7.45396852493286,
  7.45939493179321,
  7.46482944488525,
  7.47027158737183,
  7.47572183609009,
  7.48117971420288,
  7.48664522171021,
  7.49211883544922,
  7.49760007858276,
  7.503089427948,
  7.50858640670776,
  7.51409149169922,
  7.51960468292236,
  7.52512550354004,
  7.53065490722656,
  7.53619146347046,
  7.5417366027832,
  7.54728937149048,
  7.5528507232666,
  7.55841970443726,
  7.5639967918396,
  7.56958198547363,
  7.57517528533936,
  7.58077669143677,
  7.58638668060303,
  7.59200429916382,
  7.59763050079346,
  7.60326480865479,
  7.6089072227478,
  7.61455774307251,
  7.62021636962891,
  7.62588357925415,
  7.63155937194824,
  7.63724279403687,
  7.64293527603149,
  7.64863538742065,
  7.65434455871582,
  7.66006183624268,
  7.66578722000122,
  7.67152118682861,
  7.67726373672485,
  7.68301486968994,
  7.68877410888672,
  7.69454193115234,
  7.70031833648682,
  7.70610332489014,
  7.7118968963623,
  7.71769905090332,
  7.72350978851318,
  7.72932910919189,
  7.73515701293945,
  7.74099349975586,
  7.74683904647827,
  7.75269269943237,
  7.75855541229248,
  7.76442670822144,
  7.7703070640564,
  7.77619600296021,
  7.78209352493286,
  7.78800010681152,
  7.79391527175903,
  7.79983949661255,
  7.80577278137207,
  7.81171464920044,
  7.81766510009766,
  7.82362508773804,
  7.82959365844727,
  7.8355712890625,
  7.84155797958374,
  7.84755373001099,
  7.85355854034424,
  7.8595724105835,
  7.8655948638916,
  7.87162685394287,
  7.87766790390015,
  7.88371801376343,
  7.88977718353271,
  7.89584589004517,
  7.90192365646362,
  7.90801048278809,
  7.91410636901855,
  7.92021179199219,
  7.92632675170898,
  7.93245029449463,
  7.9385838508606,
  7.94472646713257,
  7.95087862014771,
  7.95703983306885,
  7.96321058273315,
  7.96939086914062,
  7.9755802154541,
  7.9817795753479,
  7.98798799514771,
  7.99420642852783,
  8.00043392181396,
  8.00667095184326,
  8.01291847229004,
  8.01917457580566,
  8.02544021606445,
  8.03171634674072,
  8.03800201416016,
  8.04429721832275,
  8.05060195922852,
  8.05691623687744,
  8.06324005126953,
  8.0695743560791,
  8.07591819763184,
  8.08227252960205,
  8.08863544464111,
  8.09500885009766,
  8.10139274597168,
  8.10778617858887,
  8.11418914794922,
  8.12060260772705,
  8.12702560424805,
  8.13345813751221,
  8.13990211486816,
  8.14635562896729,
  8.15281867980957,
  8.15929222106934,
  8.16577625274658,
  8.17226982116699,
  8.17877388000488,
  8.18528747558594,
  8.19181251525879,
  8.1983470916748,
  8.2048921585083,
  8.21144676208496,
  8.21801280975342,
  8.22458839416504,
  8.23117542266846,
  8.23777198791504,
  8.2443790435791,
  8.25099658966064,
  8.25762462615967,
  8.26426315307617,
  8.27091217041016,
  8.27757263183594,
  8.28424263000488,
  8.29092311859131,
  8.29761505126953,
  8.30431747436523,
  8.3110294342041,
  8.31775283813477,
  8.32448768615723,
  8.33123302459717,
  8.33798885345459,
  8.34475517272949,
  8.35153293609619,
  8.35832118988037,
  8.36511993408203,
  8.37193012237549,
  8.37875175476074,
  8.38558292388916,
  8.39242649078369,
  8.3992805480957,
  8.4061450958252,
  8.4130220413208,
  8.41990852355957,
  8.42680740356445,
  8.43371677398682,
  8.44063758850098,
  8.44756984710693,
  8.45451259613037,
  8.46146678924561,
  8.46843338012695,
  8.47541046142578,
  8.48239803314209,
  8.48939800262451,
  8.49640941619873,
  8.50343227386475,
  8.51046657562256,
  8.51751136779785,
  8.52456855773926,
  8.53163719177246,
  8.53871726989746,
  8.54580974578857,
  8.55291271209717,
  8.56002807617188,
  8.56715488433838,
  8.57429313659668,
  8.58144378662109,
  8.5886058807373,
  8.59577941894531,
  8.60296535491943,
  8.61016273498535,
  8.61737155914307,
  8.62459373474121,
  8.63182640075684,
  8.63907146453857,
  8.64632892608643,
  8.65359878540039,
  8.66088008880615,
  8.66817378997803,
  8.6754789352417,
  8.68279647827148,
  8.6901273727417,
  8.69746875762939,
  8.70482349395752,
  8.71219062805176,
  8.71956920623779,
  8.72696113586426,
  8.73436450958252,
  8.74178123474121,
  8.7492094039917,
  8.75665092468262,
  8.76410388946533,
  8.77157020568848,
  8.77904891967773,
  8.78654003143311,
  8.79404449462891,
  8.80156135559082,
  8.80909061431885,
  8.81663227081299,
  8.82418727874756,
  8.83175468444824,
  8.83933544158936,
  8.84692859649658,
  8.85453510284424,
  8.86215400695801,
  8.86978626251221,
  8.87743091583252,
  8.88508892059326,
  8.89276027679443,
  8.90044498443604,
  8.90814208984375,
  8.91585254669189,
  8.92357635498047,
  8.93131351470947,
  8.93906307220459,
  8.94682693481445,
  8.95460414886475,
  8.96239376068115,
  8.9701976776123,
  8.97801494598389,
  8.98584461212158,
  8.99368858337402,
  9.00154685974121,
  9.00941753387451,
  9.01730251312256,
  9.02520084381104,
  9.03311252593994,
  9.04103851318359,
  9.04897785186768,
  9.0569314956665,
  9.06489849090576,
  9.07287979125977,
  9.0808744430542,
  9.08888339996338,
  9.09690570831299,
  9.10494327545166,
  9.11299324035645,
  9.12105846405029,
  9.12913799285889,
  9.13723087310791,
  9.14533805847168,
  9.1534595489502,
  9.16159534454346,
  9.16974544525146,
  9.17790985107422,
  9.18608951568604,
  9.19428253173828,
  9.20249080657959,
  9.21071243286133,
  9.21894931793213,
  9.22720050811768,
  9.23546695709229,
  9.24374771118164,
  9.25204277038574,
  9.26035308837891,
  9.26867771148682,
  9.27701759338379,
  9.28537178039551,
  9.29374122619629,
  9.30212593078613,
  9.31052494049072,
  9.31893920898438,
  9.32736873626709,
  9.33581256866455,
  9.34427261352539,
  9.35274696350098,
  9.36123752593994,
  9.36974239349365,
  9.37826251983643,
  9.38679885864258,
  9.39534950256348,
  9.40391635894775,
  9.41249847412109,
  9.4210958480835,
  9.42970943450928,
  9.43833827972412,
  9.44698238372803,
  9.45564270019531,
  9.46431827545166,
  9.47301006317139,
  9.48171710968018,
  9.49044036865234,
  9.49917888641357,
  9.50793361663818,
  9.51670455932617,
  9.52549171447754,
  9.53429508209229,
  9.54311370849609,
  9.5519495010376,
  9.56080055236816,
  9.56966876983643,
  9.57855224609375,
  9.58745288848877,
  9.59636974334717,
  9.60530281066895,
  9.6142520904541,
  9.62321853637695,
  9.63220119476318,
  9.64120006561279,
  9.6502161026001,
  9.6592493057251,
  9.66829872131348,
  9.67736434936523,
  9.68644714355469,
  9.69554710388184,
  9.70466423034668,
  9.71379852294922,
  9.72294902801514,
  9.73211669921875,
  9.74130153656006,
  9.75050449371338,
  9.75972366333008,
  9.76895999908447,
  9.77821445465088,
  9.78748607635498,
  9.79677486419678,
  9.80608081817627,
  9.81540489196777,
  9.82474613189697,
  9.83410453796387,
  9.84348201751709,
  9.85287570953369,
  9.86228847503662,
  9.87171840667725,
  9.88116550445557,
  9.89063167572021,
  9.90011501312256,
  9.90961647033691,
  9.9191370010376,
  9.92867469787598,
  9.93823051452637,
  9.94780445098877,
  9.9573974609375,
  9.96700859069824,
  9.976637840271,
  9.98628520965576,
  9.99595165252686,
  10.00563621521,
  10.0153398513794,
  10.0250616073608,
  10.0348033905029,
  10.0445623397827,
  10.0543403625488,
  10.0641384124756,
  10.07395362854,
  10.0837888717651,
  10.0936431884766,
  10.103515625,
  10.1134080886841,
  10.1233196258545,
  10.1332511901855,
  10.1432008743286,
  10.153169631958,
  10.1631593704224,
  10.173168182373,
  10.1831960678101,
  10.1932430267334,
  10.2033100128174,
  10.213397026062,
  10.2235040664673,
  10.2336311340332,
  10.2437772750854,
  10.2539434432983,
  10.2641296386719,
  10.2743358612061,
  10.2845630645752,
  10.294810295105,
  10.3050765991211,
  10.3153638839722,
  10.3256721496582,
  10.3360004425049,
  10.3463478088379,
  10.3567171096802,
  10.3671073913574,
  10.3775177001953,
  10.3879489898682,
  10.398401260376,
  10.4088735580444,
  10.4193668365479,
  10.4298820495605,
  10.4404182434082,
  10.4509754180908,
  10.4615526199341,
  10.4721517562866,
  10.4827728271484,
  10.4934148788452,
  10.504077911377,
  10.514762878418,
  10.5254697799683,
  10.5361976623535,
  10.5469484329224,
  10.5577192306519,
  10.5685129165649,
  10.579327583313,
  10.5901651382446,
  10.6010246276855,
  10.6119060516357,
  10.6228103637695,
  10.633734703064,
  10.6446828842163,
  10.6556539535522,
  10.6666469573975,
  10.677661895752,
  10.68869972229,
  10.699761390686,
  10.710844039917,
  10.7219495773315,
  10.733078956604,
  10.7442312240601,
  10.7554063796997,
  10.7666044235229,
  10.7778253555298,
  10.7890701293945,
  10.8003368377686,
  10.8116283416748,
  10.8229427337646,
  10.8342800140381,
  10.8456420898438,
  10.857027053833,
  10.8684358596802,
  10.8798694610596,
  10.8913249969482,
  10.9028062820435,
  10.9143104553223,
  10.9258394241333,
  10.9373922348022,
  10.9489688873291,
  10.9605703353882,
  10.9721956253052,
  10.9838457107544,
  10.9955205917358,
  11.0072212219238,
  11.0189447402954,
  11.0306940078735,
  11.0424680709839,
  11.0542669296265,
  11.066089630127,
  11.0779390335083,
  11.0898141860962,
  11.101713180542,
  11.1136379241943,
  11.1255884170532,
  11.1375637054443,
  11.149564743042,
  11.1615915298462,
  11.1736450195312,
  11.1857242584229,
  11.197829246521,
  11.2099590301514,
  11.2221164703369,
  11.2342987060547,
  11.2465076446533,
  11.2587442398071,
  11.2710056304932,
  11.2832937240601,
  11.2956094741821,
  11.3079509735107,
  11.3203201293945,
  11.3327150344849,
  11.3451375961304,
  11.3575868606567,
  11.3700637817383,
  11.382568359375,
  11.3950986862183,
  11.407657623291,
  11.4202442169189,
  11.4328584671021,
  11.445499420166,
  11.4581680297852,
  11.4708652496338,
  11.4835901260376,
  11.4963426589966,
  11.5091247558594,
  11.521933555603,
  11.5347719192505,
  11.5476379394531,
  11.5605325698853,
  11.5734558105469,
  11.586407661438,
  11.5993890762329,
  11.6123991012573,
  11.6254377365112,
  11.6385049819946,
  11.6516027450562,
  11.6647291183472,
  11.677885055542,
  11.6910696029663,
  11.7042846679688,
  11.717529296875,
  11.7308044433594,
  11.7441082000732,
  11.7574424743652,
  11.770806312561,
  11.784200668335,
  11.7976245880127,
  11.8110809326172,
  11.8245658874512,
  11.8380832672119,
  11.8516302108765,
  11.8652076721191,
  11.8788156509399,
  11.8924560546875,
  11.9061269760132,
  11.9198293685913,
  11.9335632324219,
  11.9473276138306,
  11.961124420166,
  11.9749526977539,
  11.9888134002686,
  12.0027046203613,
  12.0166292190552,
  12.0305852890015,
  12.0445728302002,
  12.05859375,
  12.0726470947266,
  12.0867319107056,
  12.10085105896,
  12.1150016784668,
  12.1291856765747,
  12.1434030532837,
  12.1576528549194,
  12.1719369888306,
  12.1862535476685,
  12.2006044387817,
  12.2149877548218,
  12.2294063568115,
  12.243857383728,
  12.2583427429199,
  12.2728624343872,
  12.2874164581299,
  12.3020038604736,
  12.3166265487671,
  12.3312835693359,
  12.3459758758545,
  12.3607015609741,
  12.3754644393921,
  12.3902606964111,
  12.4050931930542,
  12.4199600219727,
  12.4348630905151,
  12.4498014450073,
  12.4647750854492,
  12.4797849655151,
  12.4948301315308,
  12.5099115371704,
  12.5250301361084,
  12.5401849746704,
  12.5553760528564,
  12.5706033706665,
  12.5858669281006,
  12.601167678833,
  12.6165065765381,
  12.6318817138672,
  12.6472940444946,
  12.6627435684204,
  12.6782321929932,
  12.6937570571899,
  12.7093200683594,
  12.7249212265015,
  12.7405605316162,
  12.7562379837036,
  12.7719535827637,
  12.7877082824707,
  12.8035011291504,
  12.8193330764771,
  12.8352041244507,
  12.8511142730713,
  12.8670625686646,
  12.8830518722534,
  12.8990802764893,
  12.9151477813721,
  12.9312553405762,
  12.9474029541016,
  12.9635906219482,
  12.9798192977905,
  12.9960870742798,
  13.012396812439,
  13.0287456512451,
  13.0451374053955,
  13.0615692138672,
  13.0780420303345,
  13.0945558547974,
  13.1111116409302,
  13.1277103424072,
  13.1443490982056,
  13.1610307693481,
  13.1777544021606,
  13.1945199966431,
  13.2113275527954,
  13.2281789779663,
  13.2450733184814,
  13.2620096206665,
  13.2789897918701,
  13.296012878418,
  13.3130788803101,
  13.3301887512207,
  13.3473434448242,
  13.364541053772,
  13.3817825317383,
  13.3990697860718,
  13.4164009094238,
  13.4337759017944,
  13.4511957168579,
  13.4686622619629,
  13.4861717224121,
  13.5037279129028,
  13.5213289260864,
  13.5389757156372,
  13.5566692352295,
  13.5744075775146,
  13.5921926498413,
  13.6100254058838,
  13.6279029846191,
  13.6458282470703,
  13.663800239563,
  13.6818189620972,
  13.6998853683472,
  13.717999458313,
  13.7361612319946,
  13.7543697357178,
  13.7726278305054,
  13.7909336090088,
  13.8092880249023,
  13.827691078186,
  13.8461427688599,
  13.8646440505981,
  13.8831939697266,
  13.9017944335938,
  13.9204425811768,
  13.9391422271729,
  13.9578924179077,
  13.9766912460327,
  13.9955406188965,
  14.014440536499,
  14.033392906189,
  14.0523948669434,
  14.0714492797852,
  14.0905542373657,
  14.1097106933594,
  14.1289196014404,
  14.1481809616089,
  14.1674938201904,
  14.1868600845337,
  14.20627784729,
  14.2257499694824,
  14.2452745437622,
  14.2648525238037,
  14.2844839096069,
  14.3041696548462,
  14.3239088058472,
  14.3437032699585,
  14.3635520935059,
  14.3834552764893,
  14.4034128189087,
  14.4234256744385,
  14.4434947967529,
  14.4636201858521,
  14.4837999343872,
  14.504035949707,
  14.5243291854858,
  14.544677734375,
  14.5650854110718,
  14.5855484008789,
  14.606068611145,
  14.6266469955444,
  14.6472826004028,
  14.6679773330688,
  14.6887292861938,
  14.7095403671265,
  14.7304086685181,
  14.7513380050659,
  14.7723264694214,
  14.7933731079102,
  14.8144798278809,
  14.8356475830078,
  14.8568754196167,
  14.8781633377075,
  14.8995122909546,
  14.9209222793579,
  14.9423942565918,
  14.9639263153076,
  14.9855213165283,
  15.0071783065796,
  15.0288982391357,
  15.0506801605225,
  15.0725250244141,
  15.0944328308105,
  15.1164045333862,
  15.1384401321411,
  15.1605396270752,
  15.1827039718628,
  15.2049322128296,
  15.2272262573242,
  15.249584197998,
  15.2720079421997,
  15.2944984436035,
  15.3170537948608,
  15.3396759033203,
  15.3623647689819,
  15.38512134552,
  15.4079437255859,
  15.4308347702026,
  15.4537925720215,
  15.4768199920654,
  15.4999151229858,
  15.5230779647827,
  15.546311378479,
  15.5696134567261,
  15.5929851531982,
  15.6164274215698,
  15.6399393081665,
  15.6635217666626,
  15.6871747970581,
  15.7109003067017,
  15.7346973419189,
  15.7585649490356,
  15.7825059890747,
  15.8065185546875,
  15.8306045532227,
  15.8547639846802,
  15.8789968490601,
  15.9033041000366,
  15.9276847839355,
  15.9521398544312,
  15.9766712188721,
  16.001277923584,
  16.0259571075439,
  16.0507144927979,
  16.0755481719971,
  16.1004581451416,
  16.1254463195801,
  16.1505107879639,
  16.1756534576416,
  16.2008743286133,
  16.2261734008789,
  16.2515506744385,
  16.2770080566406,
  16.3025455474854,
  16.328161239624,
  16.3538589477539,
  16.3796367645264,
  16.4054946899414,
  16.4314346313477,
  16.4574565887451,
  16.4835605621338,
  16.5097484588623,
  16.536018371582,
  16.562370300293,
  16.5888080596924,
  16.6153297424316,
  16.6419353485107,
  16.6686267852783,
  16.6954021453857,
  16.7222652435303,
  16.7492141723633,
  16.7762508392334,
  16.8033714294434,
  16.8305816650391,
  16.8578796386719,
  16.8852672576904,
  16.9127426147461,
  16.9403057098389,
  16.967960357666,
  16.9957046508789,
  17.0235385894775,
  17.0514640808105,
  17.0794811248779,
  17.1075916290283,
  17.1357936859131,
  17.1640872955322,
  17.1924743652344,
  17.2209568023682,
  17.2495307922363,
  17.2782020568848,
  17.3069667816162,
  17.3358287811279,
  17.3647842407227,
  17.3938388824463,
  17.4229888916016,
  17.4522361755371,
  17.4815845489502,
  17.5110282897949,
  17.5405712127686,
  17.5702152252197,
  17.5999584197998,
  17.6298027038574,
  17.6597480773926,
  17.6897945404053,
  17.7199420928955,
  17.7501945495605,
  17.7805480957031,
  17.8110065460205,
  17.8415699005127,
  17.8722362518311,
  17.9030094146729,
  17.9338874816895,
  17.9648723602295,
  17.9959621429443,
  18.0271625518799,
  18.0584697723389,
  18.0898838043213,
  18.1214084625244,
  18.1530437469482,
  18.1847877502441,
  18.2166442871094,
  18.2486114501953,
  18.280689239502,
  18.3128814697266,
  18.3451862335205,
  18.3776054382324,
  18.4101390838623,
  18.4427871704102,
  18.4755516052246,
  18.508430480957,
  18.5414276123047,
  18.5745429992676,
  18.6077766418457,
  18.6411266326904,
  18.6745986938477,
  18.7081890106201,
  18.7419013977051,
  18.7757358551025,
  18.8096904754639,
  18.8437671661377,
  18.8779697418213,
  18.9122943878174,
  18.9467449188232,
  18.9813194274902,
  19.0160217285156,
  19.0508499145508,
  19.0858058929443,
  19.1208896636963,
  19.1561012268066,
  19.1914443969727,
  19.2269153594971,
  19.2625198364258,
  19.2982559204102,
  19.3341236114502,
  19.3701248168945,
  19.4062595367432,
  19.4425296783447,
  19.4789333343506,
  19.515474319458,
  19.5521545410156,
  19.5889701843262,
  19.6259231567383,
  19.6630191802979,
  19.700252532959,
  19.7376289367676,
  19.7751445770264,
  19.8128032684326,
  19.850606918335,
  19.8885536193848,
  19.9266452789307,
  19.9648838043213,
  20.003267288208,
  20.0417995452881,
  20.0804786682129,
  20.1193084716797,
  20.1582870483398,
  20.1974182128906,
  20.2367000579834,
  20.2761363983154,
  20.3157234191895,
  20.35546875,
  20.3953666687012,
  20.4354209899902,
  20.4756336212158,
  20.5160045623779,
  20.5565338134766,
  20.5972232818604,
  20.6380729675293,
  20.6790866851807,
  20.7202606201172,
  20.7616004943848,
  20.8031044006348,
  20.8447742462158,
  20.8866119384766,
  20.928617477417,
  20.9707908630371,
  21.0131359100342,
  21.0556507110596,
  21.0983371734619,
  21.1411952972412,
  21.1842308044434,
  21.2274398803711,
  21.270824432373,
  21.3143863677979,
  21.3581275939941,
  21.4020481109619,
  21.4461498260498,
  21.4904327392578,
  21.5348987579346,
  21.5795478820801,
  21.6243839263916,
  21.6694030761719,
  21.7146129608154,
  21.760009765625,
  21.8055973052979,
  21.851375579834,
  21.8973445892334,
  21.9435081481934,
  21.9898662567139,
  22.0364227294922,
  22.0831737518311,
  22.1301231384277,
  22.1772727966309,
  22.2246227264404,
  22.2721748352051,
  22.3199310302734,
  22.3678913116455,
  22.4160594940186,
  22.4644336700439,
  22.5130176544189,
  22.5618095397949,
  22.6108150482178,
  22.6600322723389,
  22.7094650268555,
  22.7591133117676,
  22.8089771270752,
  22.8590621948242,
  22.909366607666,
  22.9598903656006,
  23.0106391906738,
  23.0616111755371,
  23.1128101348877,
  23.1642360687256,
  23.2158908843994,
  23.2677764892578,
  23.3198928833008,
  23.3722438812256,
  23.4248294830322,
  23.4776515960693,
  23.5307121276855,
  23.5840148925781,
  23.6375560760498,
  23.6913414001465,
  23.7453727722168,
  23.7996501922607,
  23.854175567627,
  23.9089508056641,
  23.9639778137207,
  24.0192584991455,
  24.0747947692871,
  24.1305866241455,
  24.186637878418,
  24.2429504394531,
  24.299524307251,
  24.3563632965088,
  24.4134674072266,
  24.4708404541016,
  24.5284824371338,
  24.5863971710205,
  24.6445846557617,
  24.7030487060547,
  24.7617893218994,
  24.8208103179932,
  24.8801136016846,
  24.939697265625,
  24.9995708465576,
  25.0597286224365,
  25.1201782226562,
  25.1809196472168,
  25.2419528961182,
  25.3032836914062,
  25.3649139404297,
  25.4268436431885,
  25.4890747070312,
  25.5516128540039,
  25.6144561767578,
  25.6776103973389,
  25.7410755157471,
  25.8048553466797,
  25.8689517974854,
  25.9333667755127,
  25.9981021881104,
  26.0631618499756,
  26.128547668457,
  26.1942596435547,
  26.2603054046631,
  26.3266830444336,
  26.3933963775635,
  26.46044921875,
  26.5278415679932,
  26.5955791473389,
  26.6636638641357,
  26.7320957183838,
  26.8008785247803,
  26.8700180053711,
  26.9395122528076,
  27.0093688964844,
  27.0795879364014,
  27.1501712799072,
  27.2211227416992,
  27.2924461364746,
  27.364143371582,
  27.4362182617188,
  27.508674621582,
  27.5815124511719,
  27.6547374725342,
  27.7283515930176,
  27.8023567199707,
  27.8767585754395,
  27.9515590667725,
  28.026762008667,
  28.1023693084717,
  28.1783866882324,
  28.2548141479492,
  28.331657409668,
  28.4089202880859,
  28.4866046905518,
  28.5647125244141,
  28.6432514190674,
  28.7222232818604,
  28.8016300201416,
  28.881477355957,
  28.9617671966553,
  29.0425052642822,
  29.1236934661865,
  29.2053356170654,
  29.2874374389648,
  29.370002746582,
  29.453031539917,
  29.5365314483643,
  29.6205062866211,
  29.7049598693848,
  29.7898941040039,
  29.875316619873,
  29.9612293243408,
  30.0476379394531,
  30.1345443725586,
  30.2219543457031,
  30.3098735809326,
  30.3983039855957,
  30.4872512817383,
  30.5767211914062,
  30.6667175292969,
  30.7572422027588,
  30.8483047485352,
  30.9399070739746,
  31.032054901123,
  31.1247501373291,
  31.2180023193359,
  31.3118152618408,
  31.406192779541,
  31.5011386871338,
  31.5966606140137,
  31.6927623748779,
  31.7894515991211,
  31.8867301940918,
  31.9846076965332,
  32.0830841064453,
  32.1821708679199,
  32.2818717956543,
  32.3821868896484,
  32.4831314086914,
  32.5847053527832,
  32.6869163513184,
  32.7897682189941,
  32.8932685852051,
  32.997428894043,
  33.1022453308105,
  33.2077293395996,
  33.3138885498047,
  33.420726776123,
  33.5282554626465,
  33.636474609375,
  33.7453956604004,
  33.8550224304199,
  33.9653625488281,
  34.0764236450195,
  34.1882133483887,
  34.3007392883301,
  34.414005279541,
  34.5280265808105,
  34.6427993774414,
  34.7583389282227,
  34.8746528625488,
  34.9917449951172,
  35.1096267700195,
  35.2283058166504,
  35.347785949707,
  35.4680824279785,
  35.5891952514648,
  35.7111434936523,
  35.8339233398438,
  35.9575538635254,
  36.0820388793945,
  36.2073860168457,
  36.333610534668,
  36.4607124328613,
  36.5887107849121,
  36.7176094055176,
  36.8474159240723,
  36.9781455993652,
  37.1098022460938,
  37.2424011230469,
  37.3759536743164,
  37.5104637145996,
  37.6459426879883,
  37.7824058532715,
  37.9198608398438,
  38.0583152770996,
  38.1977882385254,
  38.3382873535156,
  38.4798202514648,
  38.6224021911621,
  38.7660446166992,
  38.9107551574707,
  39.0565528869629,
  39.2034492492676,
  39.351448059082,
  39.5005722045898,
  39.6508293151855,
  39.8022308349609,
  39.9547958374023,
  40.108528137207,
  40.2634544372559,
  40.4195785522461,
  40.5769157409668,
  40.7354850769043,
  40.8952941894531,
  41.0563621520996,
  41.2187042236328,
  41.3823356628418,
  41.5472717285156,
  41.7135238647461,
  41.8811111450195,
  42.0500526428223,
  42.2203598022461,
  42.3920516967773,
  42.5651435852051,
  42.7396545410156,
  42.9156036376953,
  43.0930023193359,
  43.2718772888184,
  43.4522399902344,
  43.6341133117676,
  43.817512512207,
  44.0024604797363,
  44.1889762878418,
  44.3770790100098,
  44.5667877197266,
  44.7581253051758,
  44.951114654541,
  45.1457710266113,
  45.3421211242676,
  45.5401840209961,
  45.7399864196777,
  45.9415473937988,
  46.1448936462402,
  46.3500442504883,
  46.5570297241211,
  46.765869140625,
  46.9765892028809,
  47.1892204284668,
  47.4037818908691,
  47.6203002929688,
  47.8388061523438,
  48.059326171875,
  48.2818870544434,
  48.5065155029297,
  48.7332458496094,
  48.9621047973633,
  49.1931228637695,
  49.4263305664062,
  49.6617584228516,
  49.8994369506836,
  50.1394004821777,
  50.3816871643066,
  50.6263198852539,
  50.8733444213867,
  51.1227874755859,
  51.3746871948242,
  51.6290817260742,
  51.8860054016113,
  52.1455001831055,
  52.407600402832,
  52.6723518371582,
  52.9397888183594,
  53.2099533081055,
  53.4828872680664,
  53.7586364746094,
  54.0372428894043,
  54.3187522888184,
  54.6032066345215,
  54.8906555175781,
  55.1811485290527,
  55.4747276306152,
  55.7714462280273,
  56.0713577270508,
  56.37451171875,
  56.6809577941895,
  56.9907531738281,
  57.303955078125,
  57.6206130981445,
  57.9407958984375,
  58.2645492553711,
  58.5919418334961,
  58.9230346679688,
  59.2578887939453,
  59.5965690612793,
  59.9391403198242,
  60.2856750488281,
  60.6362380981445,
  60.9908981323242,
  61.3497352600098,
  61.7128143310547,
  62.0802154541016,
  62.452018737793,
  62.8283004760742,
  63.2091407775879,
  63.5946273803711,
  63.9848403930664,
  64.3798751831055,
  64.7798156738281,
  65.1847534179688,
  65.5947799682617,
  66.0100021362305,
  66.4305114746094,
  66.8564147949219,
  67.2878112792969,
  67.7248077392578,
  68.1675186157227,
  68.6160507202148,
  69.0705261230469,
  69.5310592651367,
  69.9977798461914,
  70.4708023071289,
  70.9502563476562,
  71.436279296875,
  71.9290084838867,
  72.428581237793,
  72.9351425170898,
  73.4488296508789,
  73.9698104858398,
  74.4982299804688,
  75.0342483520508,
  75.5780410766602,
  76.129768371582,
  76.6896133422852,
  77.2577438354492,
  77.834358215332,
  78.4196472167969,
  79.013801574707,
  79.6170196533203,
  80.2295227050781,
  80.8515243530273,
  81.4832382202148,
  82.1249084472656,
  82.7767562866211,
  83.4390335083008,
  84.1119918823242,
  84.7958908081055,
  85.4910049438477,
  86.1976089477539,
  86.9159851074219,
  87.6464385986328,
  88.3892669677734,
  89.1447906494141,
  89.9133453369141,
  90.6952667236328,
  91.4909057617188,
  92.3006210327148,
  93.1248016357422,
  93.9638214111328,
  94.8181076049805,
  95.6880645751953,
  96.5741271972656,
  97.4767532348633,
  98.3964080810547,
  99.3335800170898,
  100.288780212402,
  101.262519836426,
  102.255348205566,
  103.267852783203,
  104.300590515137,
  105.354187011719,
  106.429298400879,
  107.526573181152,
  108.646713256836,
  109.790420532227,
  110.958473205566,
  112.151626586914,
  113.370742797852,
  114.616630554199,
  115.89022064209,
  117.192420959473,
  118.524208068848,
  119.886627197266,
  121.280723571777,
  122.707618713379,
  124.168487548828,
  125.664558410645,
  127.197120666504,
  128.767517089844,
  130.377166748047,
  132.027572631836,
  133.720306396484,
  135.457000732422,
  137.239395141602,
  139.069305419922,
  140.948684692383,
  142.87956237793,
  144.864074707031,
  146.90446472168,
  149.003173828125,
  151.162704467773,
  153.3857421875,
  155.675155639648,
  158.033935546875,
  160.465286254883,
  162.972625732422,
  165.559555053711,
  168.229934692383,
  170.987854003906,
  173.83772277832,
  176.784194946289,
  179.832260131836,
  182.987274169922,
  186.254974365234,
  189.641494750977,
  193.153427124023,
  196.797897338867,
  200.582534790039,
  204.515594482422,
  208.605972290039,
  212.863296508789,
  217.298004150391,
  221.921432495117,
  226.745895385742,
  231.784744262695,
  237.052642822266,
  242.565567016602,
  248.341003417969,
  254.398162841797,
  260.758178710938,
  267.4443359375,
  274.482421875,
  281.900939941406,
  289.731567382812,
  298.009704589844,
  306.774749755859,
  316.071014404297,
  325.948303222656,
  336.462829589844,
  347.678314208984,
  359.667297363281,
  372.512634277344,
  386.309448242188,
  401.167572021484,
  417.214324951172,
  434.598327636719,
  453.493988037109,
  474.107391357422,
  496.684020996094,
  521.518249511719,
  548.966674804688,
  579.464904785156,
  613.551147460938,
  651.898132324219,
  695.358093261719,
  745.026550292969,
  802.336364746094,
  869.197814941406,
  948.215881347656,
  1043.03747558594,
  1158.93054199219,
  1303.79699707031,
  1490.05383300781,
  1738.39624023438,
  2086.07543945312,
  2607.59448242188,
  3476.79272460938,
  5215.18896484375,
  10430.3779296875,
  Infinity
]);
var ATAN_TABLE = new Float32Array([
  10430.3779296875,
  0,
  10430.376953125,
  303563922443573e-21,
  10430.3740234375,
  151781910062709e-20,
  10430.37109375,
  42498918446654e-19,
  10430.365234375,
  910690596356289e-20,
  10430.359375,
  166959816851886e-19,
  10430.3515625,
  276242371910485e-19,
  10430.34375,
  424987847509328e-19,
  10430.3330078125,
  619267302681692e-19,
  10430.322265625,
  865151669131592e-19,
  10430.3095703125,
  116871204227209e-18,
  10430.2958984375,
  153601911733858e-18,
  10430.28125,
  197314366232604e-18,
  10430.2646484375,
  248615629971027e-18,
  10430.248046875,
  308112794300541e-18,
  10430.228515625,
  376412848709151e-18,
  10430.208984375,
  454122840892524e-18,
  10430.1875,
  541849818546325e-18,
  10430.1650390625,
  640200742054731e-18,
  10430.1416015625,
  749782600905746e-18,
  10430.1171875,
  871202384587377e-18,
  10430.0908203125,
  0.00100506702437997,
  10430.0634765625,
  0.00115198350977153,
  10430.03515625,
  0.00131255865562707,
  10430.0048828125,
  0.00148739956784993,
  10429.9736328125,
  0.00167711288668215,
  10429.94140625,
  0.00188230560161173,
  10429.908203125,
  0.00210358435288072,
  10429.873046875,
  0.00234155636280775,
  10429.8369140625,
  0.00259682792238891,
  10429.7998046875,
  0.00287000625394285,
  10429.76171875,
  0.00316169788129628,
  10429.7216796875,
  0.00347250932827592,
  10429.6806640625,
  0.00380304758436978,
  10429.638671875,
  0.00415391894057393,
  10429.5947265625,
  0.00452573085203767,
  10429.5498046875,
  0.00491908891126513,
  10429.50390625,
  0.00533459987491369,
  10429.45703125,
  0.00577287096530199,
  10429.408203125,
  0.00623450800776482,
  10429.3583984375,
  0.00672011775895953,
  10429.3076171875,
  0.00723030650988221,
  10429.255859375,
  0.00776568055152893,
  10429.2021484375,
  0.00832684617489576,
  10429.1474609375,
  0.00891441106796265,
  10429.091796875,
  0.00952897965908051,
  10429.0341796875,
  0.010171159170568,
  10428.9755859375,
  0.0108415549620986,
  10428.916015625,
  0.011540774255991,
  10428.85546875,
  0.0122694224119186,
  10428.79296875,
  0.0130281066522002,
  10428.7294921875,
  0.0138174314051867,
  10428.6650390625,
  0.0146380038931966,
  10428.599609375,
  0.0154904294759035,
  10428.5322265625,
  0.0163753144443035,
  10428.4638671875,
  0.0172932650893927,
  10428.39453125,
  0.0182448849081993,
  10428.3232421875,
  0.0192307829856873,
  10428.2509765625,
  0.0202515628188848,
  10428.177734375,
  0.0213078297674656,
  10428.103515625,
  0.0224001910537481,
  10428.02734375,
  0.023529252037406,
  10427.9501953125,
  0.0246956162154675,
  10427.8720703125,
  0.0258998926728964,
  10427.79296875,
  0.027142683044076,
  10427.7119140625,
  0.0284245945513248,
  10427.6298828125,
  0.0297462344169617,
  10427.546875,
  0.0311082024127245,
  10427.4619140625,
  0.0325111076235771,
  10427.3759765625,
  0.0339555591344833,
  10427.2890625,
  0.0354421511292458,
  10427.201171875,
  0.0369714982807636,
  10427.111328125,
  0.0385442040860653,
  10427.0205078125,
  0.0401608683168888,
  10426.9287109375,
  0.0418220981955528,
  10426.8359375,
  0.043528500944376,
  10426.7412109375,
  0.0452806800603867,
  10426.6455078125,
  0.0470792390406132,
  10426.548828125,
  0.0489247851073742,
  10426.4501953125,
  0.0508179180324078,
  10426.3515625,
  0.0527592450380325,
  10426.25,
  0.0547493733465672,
  10426.1484375,
  0.0567888990044594,
  10426.0458984375,
  0.0588784366846085,
  10425.94140625,
  0.0610185824334621,
  10425.8359375,
  0.0632099434733391,
  10425.728515625,
  0.0654531270265579,
  10425.6201171875,
  0.0677487328648567,
  10425.51171875,
  0.0700973570346832,
  10425.400390625,
  0.072499617934227,
  10425.2890625,
  0.0749561190605164,
  10425.17578125,
  0.0774674490094185,
  10425.0615234375,
  0.0800342261791229,
  10424.9462890625,
  0.0826570466160774,
  10424.8291015625,
  0.0853365138173103,
  10424.7109375,
  0.08807323127985,
  10424.591796875,
  0.0908678025007248,
  10424.4716796875,
  0.0937208384275436,
  10424.349609375,
  0.0966329276561737,
  10424.2265625,
  0.0996046885848045,
  10424.1025390625,
  0.102636709809303,
  10423.9775390625,
  0.105729602277279,
  10423.8505859375,
  0.10888396948576,
  10423.72265625,
  0.112100414931774,
  10423.59375,
  0.115379527211189,
  10423.462890625,
  0.118721932172775,
  10423.33203125,
  0.122128210961819,
  10423.19921875,
  0.125598967075348,
  10423.064453125,
  0.129134818911552,
  10422.9296875,
  0.132736369967461,
  10422.79296875,
  0.136404201388359,
  10422.6552734375,
  0.140138924121857,
  10422.515625,
  0.143941134214401,
  10422.3759765625,
  0.147811457514763,
  10422.234375,
  0.151750460267067,
  10422.0908203125,
  0.155758783221245,
  10421.947265625,
  0.159836992621422,
  10421.8017578125,
  0.163985699415207,
  10421.6552734375,
  0.168205514550209,
  10421.5078125,
  0.172497048974037,
  10421.3583984375,
  0.176860868930817,
  10421.208984375,
  0.181297600269318,
  10421.0576171875,
  0.185807839035988,
  10420.904296875,
  0.190392181277275,
  10420.7509765625,
  0.195051237940788,
  10420.595703125,
  0.199785605072975,
  10420.439453125,
  0.204595878720284,
  10420.28125,
  0.209482669830322,
  10420.123046875,
  0.214446559548378,
  10419.962890625,
  0.21948815882206,
  10419.8017578125,
  0.224608063697815,
  10419.638671875,
  0.229806885123253,
  10419.474609375,
  0.235085219144821,
  10419.3095703125,
  0.240443646907806,
  10419.1435546875,
  0.245882794260979,
  10418.9765625,
  0.251403242349625,
  10418.8076171875,
  0.257005602121353,
  10418.6376953125,
  0.262690484523773,
  10418.466796875,
  0.26845845580101,
  10418.2939453125,
  0.274310111999512,
  10418.1201171875,
  0.28024610877037,
  10417.9453125,
  0.286266982555389,
  10417.76953125,
  0.292373359203339,
  10417.591796875,
  0.298565834760666,
  10417.4130859375,
  0.304845005273819,
  10417.2333984375,
  0.311211466789246,
  10417.052734375,
  0.317665815353394,
  10416.8701171875,
  0.324208676815033,
  10416.6865234375,
  0.330840587615967,
  10416.501953125,
  0.33756223320961,
  10416.3154296875,
  0.344374120235443,
  10416.1279296875,
  0.351276904344559,
  10415.939453125,
  0.358271181583405,
  10415.75,
  0.365357518196106,
  10415.5595703125,
  0.372536540031433,
  10415.3671875,
  0.379808813333511,
  10415.173828125,
  0.387174963951111,
  10414.9794921875,
  0.394635558128357,
  10414.783203125,
  0.40219122171402,
  10414.5859375,
  0.409842550754547,
  10414.3876953125,
  0.417590141296387,
  10414.1884765625,
  0.425434559583664,
  10413.9873046875,
  0.433376431465149,
  10413.78515625,
  0.441416323184967,
  10413.58203125,
  0.449554860591888,
  10413.3779296875,
  0.457792639732361,
  10413.171875,
  0.46613022685051,
  10412.96484375,
  0.474568247795105,
  10412.7568359375,
  0.483107298612595,
  10412.546875,
  0.491747945547104,
  10412.3369140625,
  0.500490784645081,
  10412.125,
  0.509336471557617,
  10411.9111328125,
  0.518285512924194,
  10411.697265625,
  0.52733850479126,
  10411.4814453125,
  0.536496162414551,
  10411.2646484375,
  0.545758962631226,
  10411.046875,
  0.555127501487732,
  10410.8271484375,
  0.564602434635162,
  10410.607421875,
  0.574184358119965,
  10410.3857421875,
  0.583873808383942,
  10410.162109375,
  0.593671381473541,
  10409.9384765625,
  0.603577733039856,
  10409.712890625,
  0.613593399524689,
  10409.486328125,
  0.623718976974487,
  10409.2587890625,
  0.633955061435699,
  10409.029296875,
  0.644302308559418,
  10408.798828125,
  0.6547611951828,
  10408.5673828125,
  0.665332436561584,
  10408.3349609375,
  0.676016509532928,
  10408.1005859375,
  0.68681412935257,
  10407.865234375,
  0.697725772857666,
  10407.62890625,
  0.70875209569931,
  10407.3916015625,
  0.719893634319305,
  10407.15234375,
  0.731151044368744,
  10406.912109375,
  0.742524921894073,
  10406.6708984375,
  0.754015743732452,
  10406.4287109375,
  0.765624284744263,
  10406.1845703125,
  0.777350962162018,
  10405.939453125,
  0.78919643163681,
  10405.693359375,
  0.801161348819733,
  10405.4453125,
  0.813246190547943,
  10405.197265625,
  0.825451612472534,
  10404.947265625,
  0.837778210639954,
  10404.6953125,
  0.850226581096649,
  10404.443359375,
  0.862797260284424,
  10404.189453125,
  0.875490844249725,
  10403.9345703125,
  0.888307988643646,
  10403.6787109375,
  0.901249170303345,
  10403.421875,
  0.914315104484558,
  10403.1630859375,
  0.927506327629089,
  10402.9033203125,
  0.940823376178741,
  10402.642578125,
  0.954266905784607,
  10402.3798828125,
  0.967837452888489,
  10402.1162109375,
  0.981535673141479,
  10401.8515625,
  0.995362102985382,
  10401.5859375,
  1.00931739807129,
  10401.3193359375,
  1.02340197563171,
  10401.05078125,
  1.03761661052704,
  10400.78125,
  1.05196177959442,
  10400.5107421875,
  1.06643807888031,
  10400.23828125,
  1.08104622364044,
  10399.96484375,
  1.09578669071198,
  10399.6904296875,
  1.11065995693207,
  10399.4150390625,
  1.12566685676575,
  10399.138671875,
  1.14080774784088,
  10398.8603515625,
  1.15608334541321,
  10398.5810546875,
  1.17149412631989,
  10398.30078125,
  1.18704092502594,
  10398.0185546875,
  1.20272397994995,
  10397.7353515625,
  1.21854412555695,
  10397.451171875,
  1.23450195789337,
  10397.166015625,
  1.2505978345871,
  10396.8798828125,
  1.26683247089386,
  10396.591796875,
  1.2832065820694,
  10396.302734375,
  1.29972052574158,
  10396.0126953125,
  1.31637501716614,
  10395.720703125,
  1.33317065238953,
  10395.427734375,
  1.3501079082489,
  10395.1337890625,
  1.3671875,
  10394.8388671875,
  1.38440990447998,
  10394.54296875,
  1.40177571773529,
  10394.2451171875,
  1.41928553581238,
  10393.9462890625,
  1.43693995475769,
  10393.646484375,
  1.45473968982697,
  10393.3447265625,
  1.47268497943878,
  10393.0419921875,
  1.49077677726746,
  10392.7392578125,
  1.50901544094086,
  10392.43359375,
  1.52740156650543,
  10392.1279296875,
  1.54593586921692,
  10391.8203125,
  1.56461882591248,
  10391.51171875,
  1.58345091342926,
  10391.2021484375,
  1.6024329662323,
  10390.8916015625,
  1.62156534194946,
  10390.5791015625,
  1.64084875583649,
  10390.265625,
  1.66028380393982,
  10389.951171875,
  1.67987084388733,
  10389.634765625,
  1.69961071014404,
  10389.318359375,
  1.71950387954712,
  10389,
  1.73955094814301,
  10388.6806640625,
  1.75975239276886,
  10388.359375,
  1.78010892868042,
  10388.0380859375,
  1.80062115192413,
  10387.71484375,
  1.82128953933716,
  10387.390625,
  1.84211468696594,
  10387.064453125,
  1.86309719085693,
  10386.73828125,
  1.88423752784729,
  10386.41015625,
  1.90553653240204,
  10386.0810546875,
  1.92699456214905,
  10385.75,
  1.94861221313477,
  10385.4189453125,
  1.97039020061493,
  10385.0859375,
  1.99232888221741,
  10384.751953125,
  2.01442909240723,
  10384.4169921875,
  2.03669118881226,
  10384.080078125,
  2.05911588668823,
  10383.7421875,
  2.08170342445374,
  10383.4033203125,
  2.10445499420166,
  10383.0634765625,
  2.12737059593201,
  10382.72265625,
  2.15045118331909,
  10382.3798828125,
  2.17369723320007,
  10382.0361328125,
  2.19710922241211,
  10381.69140625,
  2.22068786621094,
  10381.3447265625,
  2.24443340301514,
  10380.998046875,
  2.26834678649902,
  10380.6494140625,
  2.29242849349976,
  10380.2998046875,
  2.31667900085449,
  10379.9482421875,
  2.34109902381897,
  10379.5966796875,
  2.36568903923035,
  10379.2431640625,
  2.39044952392578,
  10378.888671875,
  2.41538119316101,
  10378.5322265625,
  2.44048452377319,
  10378.17578125,
  2.46576023101807,
  10377.8173828125,
  2.49120879173279,
  10377.4580078125,
  2.51683068275452,
  10377.09765625,
  2.54262685775757,
  10376.7353515625,
  2.56859731674194,
  10376.3720703125,
  2.59474301338196,
  10376.0078125,
  2.62106442451477,
  10375.642578125,
  2.64756226539612,
  10375.2763671875,
  2.67423677444458,
  10374.908203125,
  2.70108866691589,
  10374.5390625,
  2.7281186580658,
  10374.1689453125,
  2.75532722473145,
  10373.7978515625,
  2.78271484375,
  10373.4248046875,
  2.8102822303772,
  10373.05078125,
  2.8380298614502,
  10372.67578125,
  2.86595845222473,
  10372.2998046875,
  2.89406824111938,
  10371.921875,
  2.92235994338989,
  10371.5439453125,
  2.95083451271057,
  10371.1640625,
  2.97949194908142,
  10370.7822265625,
  3.00833296775818,
  10370.400390625,
  3.03735852241516,
  10370.0166015625,
  3.06656861305237,
  10369.6318359375,
  3.09596419334412,
  10369.24609375,
  3.12554574012756,
  10368.859375,
  3.15531373023987,
  10368.470703125,
  3.18526864051819,
  10368.0810546875,
  3.21541142463684,
  10367.6904296875,
  3.24574208259583,
  10367.298828125,
  3.27626180648804,
  10366.90625,
  3.30697083473206,
  10366.51171875,
  3.33786964416504,
  10366.1162109375,
  3.36895895004272,
  10365.7197265625,
  3.40023922920227,
  10365.3212890625,
  3.43171095848083,
  10364.9228515625,
  3.46337485313416,
  10364.5224609375,
  3.49523162841797,
  10364.12109375,
  3.52728152275085,
  10363.7177734375,
  3.55952548980713,
  10363.314453125,
  3.59196352958679,
  10362.9091796875,
  3.62459659576416,
  10362.5029296875,
  3.65742516517639,
  10362.095703125,
  3.69044995307922,
  10361.6865234375,
  3.72367119789124,
  10361.27734375,
  3.75708961486816,
  10360.8662109375,
  3.79070591926575,
  10360.4541015625,
  3.82452034950256,
  10360.0400390625,
  3.85853385925293,
  10359.6259765625,
  3.89274668693542,
  10359.2099609375,
  3.92715954780579,
  10358.79296875,
  3.96177291870117,
  10358.375,
  3.99658727645874,
  10357.955078125,
  4.03160333633423,
  10357.53515625,
  4.06682157516479,
  10357.11328125,
  4.10224294662476,
  10356.6904296875,
  4.13786745071411,
  10356.265625,
  4.17369556427002,
  10355.8408203125,
  4.2097282409668,
  10355.4140625,
  4.2459659576416,
  10354.986328125,
  4.28240966796875,
  10354.5576171875,
  4.31905889511108,
  10354.1279296875,
  4.35591506958008,
  10353.6962890625,
  4.39297819137573,
  10353.263671875,
  4.43024921417236,
  10352.830078125,
  4.46772909164429,
  10352.3955078125,
  4.50541734695435,
  10351.958984375,
  4.54331493377686,
  10351.5224609375,
  4.58142280578613,
  10351.083984375,
  4.61974096298218,
  10350.6435546875,
  4.65827035903931,
  10350.203125,
  4.69701147079468,
  10349.7607421875,
  4.73596477508545,
  10349.318359375,
  4.77513074874878,
  10348.8740234375,
  4.81450986862183,
  10348.427734375,
  4.85410308837891,
  10347.9814453125,
  4.89391088485718,
  10347.533203125,
  4.93393325805664,
  10347.0849609375,
  4.97417116165161,
  10346.6337890625,
  5.01462554931641,
  10346.1826171875,
  5.05529642105103,
  10345.73046875,
  5.09618425369263,
  10345.2763671875,
  5.13728952407837,
  10344.8212890625,
  5.17861366271973,
  10344.365234375,
  5.22015619277954,
  10343.908203125,
  5.26191854476929,
  10343.44921875,
  5.30390024185181,
  10342.9892578125,
  5.34610271453857,
  10342.5283203125,
  5.38852596282959,
  10342.06640625,
  5.43117094039917,
  10341.603515625,
  5.47403812408447,
  10341.138671875,
  5.51712799072266,
  10340.6728515625,
  5.56044054031372,
  10340.2060546875,
  5.60397720336914,
  10339.73828125,
  5.64773845672607,
  10339.2685546875,
  5.69172382354736,
  10338.798828125,
  5.73593521118164,
  10338.3271484375,
  5.78037214279175,
  10337.8544921875,
  5.825035572052,
  10337.380859375,
  5.86992597579956,
  10336.9052734375,
  5.91504430770874,
  10336.4287109375,
  5.96039056777954,
  10335.9521484375,
  6.00596523284912,
  10335.4736328125,
  6.0517692565918,
  10334.9931640625,
  6.09780263900757,
  10334.5126953125,
  6.14406681060791,
  10334.0302734375,
  6.19056129455566,
  10333.546875,
  6.2372875213623,
  10333.0625,
  6.28424549102783,
  10332.5771484375,
  6.33143615722656,
  10332.08984375,
  6.3788595199585,
  10331.6015625,
  6.42651653289795,
  10331.11328125,
  6.47440719604492,
  10330.6220703125,
  6.52253293991089,
  10330.130859375,
  6.57089376449585,
  10329.638671875,
  6.61949014663696,
  10329.14453125,
  6.66832256317139,
  10328.6494140625,
  6.71739196777344,
  10328.1533203125,
  6.76669836044312,
  10327.6552734375,
  6.81624269485474,
  10327.1572265625,
  6.86602544784546,
  10326.6572265625,
  6.91604709625244,
  10326.15625,
  6.96630859375,
  10325.654296875,
  7.01680946350098,
  10325.1513671875,
  7.06755113601685,
  10324.646484375,
  7.11853361129761,
  10324.1416015625,
  7.16975784301758,
  10323.634765625,
  7.22122430801392,
  10323.126953125,
  7.27293348312378,
  10322.6171875,
  7.32488536834717,
  10322.107421875,
  7.37708139419556,
  10321.595703125,
  7.42952156066895,
  10321.0830078125,
  7.48220634460449,
  10320.5693359375,
  7.53513669967651,
  10320.0546875,
  7.58831262588501,
  10319.5380859375,
  7.64173555374146,
  10319.021484375,
  7.69540452957153,
  10318.5029296875,
  7.74932146072388,
  10317.9833984375,
  7.80348634719849,
  10317.462890625,
  7.85789966583252,
  10316.9404296875,
  7.91256189346313,
  10316.41796875,
  7.96747398376465,
  10315.8935546875,
  8.02263641357422,
  10315.3681640625,
  8.07804870605469,
  10314.841796875,
  8.13371276855469,
  10314.3134765625,
  8.18962860107422,
  10313.78515625,
  8.24579620361328,
  10313.2548828125,
  8.30221652984619,
  10312.7236328125,
  8.35889053344727,
  10312.19140625,
  8.41581726074219,
  10311.6572265625,
  8.47299957275391,
  10311.123046875,
  8.53043651580811,
  10310.5869140625,
  8.58812808990479,
  10310.0498046875,
  8.64607620239258,
  10309.51171875,
  8.70428085327148,
  10308.97265625,
  8.7627420425415,
  10308.4326171875,
  8.82146167755127,
  10307.890625,
  8.88043785095215,
  10307.34765625,
  8.93967342376709,
  10306.8037109375,
  8.99916839599609,
  10306.2587890625,
  9.05892276763916,
  10305.7119140625,
  9.11893653869629,
  10305.1650390625,
  9.17921161651611,
  10304.6162109375,
  9.23974704742432,
  10304.06640625,
  9.30054473876953,
  10303.515625,
  9.36160469055176,
  10302.9638671875,
  9.42292785644531,
  10302.41015625,
  9.48451328277588,
  10301.8564453125,
  9.54636287689209,
  10301.30078125,
  9.60847663879395,
  10300.744140625,
  9.67085552215576,
  10300.1865234375,
  9.73349952697754,
  10299.626953125,
  9.79640960693359,
  10299.0673828125,
  9.85958576202393,
  10298.505859375,
  9.92302894592285,
  10297.943359375,
  9.98673915863037,
  10297.3798828125,
  10.0507173538208,
  10296.8154296875,
  10.1149644851685,
  10296.2490234375,
  10.1794805526733,
  10295.6826171875,
  10.2442655563354,
  10295.1142578125,
  10.3093204498291,
  10294.544921875,
  10.3746461868286,
  10293.974609375,
  10.440242767334,
  10293.4033203125,
  10.5061111450195,
  10292.830078125,
  10.5722513198853,
  10292.255859375,
  10.6386642456055,
  10291.681640625,
  10.7053499221802,
  10291.10546875,
  10.772310256958,
  10290.52734375,
  10.8395433425903,
  10289.94921875,
  10.9070520401001,
  10289.369140625,
  10.974835395813,
  10288.7890625,
  11.0428943634033,
  10288.20703125,
  11.1112289428711,
  10287.6240234375,
  11.1798410415649,
  10287.0400390625,
  11.2487297058105,
  10286.4541015625,
  11.3178968429565,
  10285.8681640625,
  11.3873414993286,
  10285.2802734375,
  11.4570655822754,
  10284.69140625,
  11.5270681381226,
  10284.1015625,
  11.5973501205444,
  10283.5107421875,
  11.6679134368896,
  10282.91796875,
  11.7387571334839,
  10282.3251953125,
  11.8098812103271,
  10281.73046875,
  11.8812875747681,
  10281.134765625,
  11.952977180481,
  10280.5380859375,
  12.0249481201172,
  10279.9404296875,
  12.0972032546997,
  10279.3408203125,
  12.1697416305542,
  10278.7412109375,
  12.242564201355,
  10278.1396484375,
  12.3156719207764,
  10277.537109375,
  12.3890657424927,
  10276.93359375,
  12.4627437591553,
  10276.3291015625,
  12.5367097854614,
  10275.72265625,
  12.6109609603882,
  10275.1162109375,
  12.6855001449585,
  10274.5078125,
  12.7603273391724,
  10273.8984375,
  12.8354434967041,
  10273.2880859375,
  12.9108476638794,
  10272.6767578125,
  12.9865407943726,
  10272.064453125,
  13.0625247955322,
  10271.4501953125,
  13.1387977600098,
  10270.8349609375,
  13.2153625488281,
  10270.2197265625,
  13.292218208313,
  10269.6025390625,
  13.369366645813,
  10268.984375,
  13.4468069076538,
  10268.3642578125,
  13.5245399475098,
  10267.744140625,
  13.6025657653809,
  10267.1220703125,
  13.6808862686157,
  10266.4990234375,
  13.75950050354,
  10265.875,
  13.8384094238281,
  10265.25,
  13.9176139831543,
  10264.6240234375,
  13.9971141815186,
  10263.9970703125,
  14.0769109725952,
  10263.3681640625,
  14.1570043563843,
  10262.73828125,
  14.2373952865601,
  10262.1083984375,
  14.3180847167969,
  10261.4755859375,
  14.3990716934204,
  10260.8427734375,
  14.480357170105,
  10260.208984375,
  14.5619421005249,
  10259.57421875,
  14.6438264846802,
  10258.9375,
  14.7260122299194,
  10258.2998046875,
  14.808497428894,
  10257.6611328125,
  14.891284942627,
  10257.021484375,
  14.9743738174438,
  10256.380859375,
  15.057765007019,
  10255.7392578125,
  15.1414585113525,
  10255.095703125,
  15.225456237793,
  10254.451171875,
  15.309757232666,
  10253.806640625,
  15.3943614959717,
  10253.16015625,
  15.4792718887329,
  10252.51171875,
  15.5644865036011,
  10251.86328125,
  15.6500072479248,
  10251.2138671875,
  15.7358341217041,
  10250.5625,
  15.821967124939,
  10249.9111328125,
  15.908408164978,
  10249.2578125,
  15.995156288147,
  10248.603515625,
  16.0822124481201,
  10247.9482421875,
  16.1695766448975,
  10247.291015625,
  16.257251739502,
  10246.6337890625,
  16.3452339172363,
  10245.974609375,
  16.4335289001465,
  10245.3154296875,
  16.5221328735352,
  10244.654296875,
  16.611047744751,
  10243.9921875,
  16.7002735137939,
  10243.3291015625,
  16.7898139953613,
  10242.6640625,
  16.8796634674072,
  10241.9990234375,
  16.9698276519775,
  10241.3330078125,
  17.0603065490723,
  10240.6650390625,
  17.1510982513428,
  10239.99609375,
  17.2422027587891,
  10239.326171875,
  17.3336238861084,
  10238.6552734375,
  17.4253597259521,
  10237.9833984375,
  17.5174121856689,
  10237.3095703125,
  17.6097812652588,
  10236.6357421875,
  17.702465057373,
  10235.9599609375,
  17.795467376709,
  10235.2841796875,
  17.8887882232666,
  10234.6064453125,
  17.9824256896973,
  10233.927734375,
  18.0763835906982,
  10233.2470703125,
  18.1706600189209,
  10232.56640625,
  18.2652549743652,
  10231.884765625,
  18.3601722717285,
  10231.201171875,
  18.4554080963135,
  10230.5166015625,
  18.5509662628174,
  10229.83203125,
  18.6468467712402,
  10229.1455078125,
  18.7430477142334,
  10228.4580078125,
  18.8395709991455,
  10227.7685546875,
  18.9364185333252,
  10227.0791015625,
  19.0335884094238,
  10226.388671875,
  19.13108253479,
  10225.6962890625,
  19.2289028167725,
  10225.0029296875,
  19.3270454406738,
  10224.30859375,
  19.4255142211914,
  10223.61328125,
  19.5243091583252,
  10222.9169921875,
  19.6234302520752,
  10222.2197265625,
  19.72287940979,
  10221.521484375,
  19.8226547241211,
  10220.8212890625,
  19.9227561950684,
  10220.12109375,
  20.0231876373291,
  10219.4189453125,
  20.1239471435547,
  10218.7158203125,
  20.2250366210938,
  10218.01171875,
  20.3264541625977,
  10217.306640625,
  20.4282035827637,
  10216.6005859375,
  20.5302829742432,
  10215.892578125,
  20.6326923370361,
  10215.1845703125,
  20.7354335784912,
  10214.474609375,
  20.8385066986084,
  10213.763671875,
  20.9419136047363,
  10213.052734375,
  21.0456504821777,
  10212.33984375,
  21.1497230529785,
  10211.6259765625,
  21.25412940979,
  10210.91015625,
  21.3588695526123,
  10210.1943359375,
  21.4639434814453,
  10209.4775390625,
  21.5693531036377,
  10208.7587890625,
  21.6750984191895,
  10208.0400390625,
  21.7811794281006,
  10207.3193359375,
  21.8875980377197,
  10206.59765625,
  21.9943523406982,
  10205.875,
  22.1014442443848,
  10205.1513671875,
  22.2088756561279,
  10204.4267578125,
  22.3166446685791,
  10203.7001953125,
  22.4247512817383,
  10202.9736328125,
  22.5331993103027,
  10202.2451171875,
  22.6419849395752,
  10201.5166015625,
  22.7511119842529,
  10200.7861328125,
  22.8605785369873,
  10200.0546875,
  22.9703884124756,
  10199.322265625,
  23.0805377960205,
  10198.5888671875,
  23.1910305023193,
  10197.8544921875,
  23.3018646240234,
  10197.1181640625,
  23.4130420684814,
  10196.3818359375,
  23.524564743042,
  10195.6435546875,
  23.6364288330078,
  10194.9052734375,
  23.7486381530762,
  10194.1650390625,
  23.8611927032471,
  10193.423828125,
  23.9740905761719,
  10192.681640625,
  24.0873355865479,
  10191.9384765625,
  24.200927734375,
  10191.1943359375,
  24.3148651123047,
  10190.4482421875,
  24.4291496276855,
  10189.7021484375,
  24.5437812805176,
  10188.955078125,
  24.6587619781494,
  10188.2060546875,
  24.7740898132324,
  10187.4560546875,
  24.8897666931152,
  10186.705078125,
  25.0057945251465,
  10185.9541015625,
  25.1221694946289,
  10185.201171875,
  25.2388954162598,
  10184.4462890625,
  25.3559722900391,
  10183.69140625,
  25.4734001159668,
  10182.935546875,
  25.5911808013916,
  10182.1787109375,
  25.7093124389648,
  10181.419921875,
  25.8277950286865,
  10180.66015625,
  25.9466323852539,
  10179.900390625,
  26.0658226013184,
  10179.138671875,
  26.1853656768799,
  10178.3759765625,
  26.3052635192871,
  10177.6123046875,
  26.42551612854,
  10176.84765625,
  26.5461235046387,
  10176.08203125,
  26.6670875549316,
  10175.3154296875,
  26.7884063720703,
  10174.546875,
  26.9100818634033,
  10173.7783203125,
  27.0321140289307,
  10173.0078125,
  27.1545028686523,
  10172.2373046875,
  27.277250289917,
  10171.46484375,
  27.400354385376,
  10170.69140625,
  27.5238189697266,
  10169.9169921875,
  27.6476421356201,
  10169.1416015625,
  27.7718238830566,
  10168.365234375,
  27.8963661193848,
  10167.587890625,
  28.0212688446045,
  10166.8095703125,
  28.1465320587158,
  10166.029296875,
  28.2721557617188,
  10165.2490234375,
  28.3981418609619,
  10164.466796875,
  28.5244903564453,
  10163.6845703125,
  28.6512012481689,
  10162.900390625,
  28.7782745361328,
  10162.115234375,
  28.9057102203369,
  10161.3291015625,
  29.0335121154785,
  10160.54296875,
  29.1616764068604,
  10159.7548828125,
  29.2902069091797,
  10158.96484375,
  29.4191017150879,
  10158.1748046875,
  29.548360824585,
  10157.3837890625,
  29.6779880523682,
  10156.591796875,
  29.8079795837402,
  10155.7978515625,
  29.9383392333984,
  10155.00390625,
  30.0690650939941,
  10154.2080078125,
  30.200159072876,
  10153.4111328125,
  30.3316230773926,
  10152.6142578125,
  30.4634532928467,
  10151.8154296875,
  30.5956535339355,
  10151.015625,
  30.7282218933105,
  10150.21484375,
  30.8611621856689,
  10149.4130859375,
  30.9944705963135,
  10148.6103515625,
  31.1281509399414,
  10147.806640625,
  31.2622013092041,
  10147.0009765625,
  31.3966236114502,
  10146.1953125,
  31.5314197540283,
  10145.3876953125,
  31.6665859222412,
  10144.580078125,
  31.8021259307861,
  10143.7705078125,
  31.9380378723145,
  10142.9609375,
  32.0743255615234,
  10142.1494140625,
  32.2109832763672,
  10141.3369140625,
  32.3480186462402,
  10140.5234375,
  32.4854316711426,
  10139.708984375,
  32.6232147216797,
  10138.8935546875,
  32.7613754272461,
  10138.0771484375,
  32.8999137878418,
  10137.259765625,
  33.0388259887695,
  10136.44140625,
  33.1781158447266,
  10135.6220703125,
  33.3177833557129,
  10134.80078125,
  33.4578323364258,
  10133.9794921875,
  33.5982551574707,
  10133.1572265625,
  33.7390594482422,
  10132.3330078125,
  33.8802375793457,
  10131.5078125,
  34.021800994873,
  10130.6826171875,
  34.1637420654297,
  10129.85546875,
  34.3060646057129,
  10129.02734375,
  34.4487648010254,
  10128.1982421875,
  34.5918502807617,
  10127.369140625,
  34.7353134155273,
  10126.5380859375,
  34.8791618347168,
  10125.7060546875,
  35.0233879089355,
  10124.8720703125,
  35.1680030822754,
  10124.0380859375,
  35.3129959106445,
  10123.203125,
  35.4583740234375,
  10122.3671875,
  35.6041374206543,
  10121.529296875,
  35.7502861022949,
  10120.69140625,
  35.8968162536621,
  10119.8525390625,
  36.0437355041504,
  10119.01171875,
  36.1910362243652,
  10118.1708984375,
  36.3387260437012,
  10117.328125,
  36.4868011474609,
  10116.484375,
  36.6352653503418,
  10115.640625,
  36.7841148376465,
  10114.794921875,
  36.933349609375,
  10113.9482421875,
  37.0829772949219,
  10113.1005859375,
  37.2329902648926,
  10112.251953125,
  37.3833923339844,
  10111.40234375,
  37.5341835021973,
  10110.5517578125,
  37.6853675842285,
  10109.7001953125,
  37.8369369506836,
  10108.84765625,
  37.988899230957,
  10107.994140625,
  38.1412544250488,
  10107.1396484375,
  38.2939987182617,
  10106.283203125,
  38.4471321105957,
  10105.4267578125,
  38.6006622314453,
  10104.5693359375,
  38.754581451416,
  10103.7099609375,
  38.9088973999023,
  10102.8505859375,
  39.0636024475098,
  10101.9892578125,
  39.2187042236328,
  10101.1279296875,
  39.3741989135742,
  10100.2646484375,
  39.530086517334,
  10099.4013671875,
  39.6863708496094,
  10098.5361328125,
  39.8430519104004,
  10097.669921875,
  40.0001258850098,
  10096.8037109375,
  40.1575965881348,
  10095.935546875,
  40.3154640197754,
  10095.06640625,
  40.4737281799316,
  10094.1962890625,
  40.6323928833008,
  10093.3251953125,
  40.7914505004883,
  10092.453125,
  40.9509086608887,
  10091.580078125,
  41.1107635498047,
  10090.7060546875,
  41.2710189819336,
  10089.8310546875,
  41.4316711425781,
  10088.955078125,
  41.5927276611328,
  10088.078125,
  41.7541809082031,
  10087.2001953125,
  41.9160346984863,
  10086.3212890625,
  42.0782890319824,
  10085.44140625,
  42.2409439086914,
  10084.5595703125,
  42.4040031433105,
  10083.677734375,
  42.5674591064453,
  10082.794921875,
  42.7313232421875,
  10081.91015625,
  42.8955879211426,
  10081.025390625,
  43.0602531433105,
  10080.138671875,
  43.2253265380859,
  10079.251953125,
  43.3908004760742,
  10078.3642578125,
  43.5566787719727,
  10077.474609375,
  43.7229614257812,
  10076.5849609375,
  43.8896522521973,
  10075.693359375,
  44.0567436218262,
  10074.80078125,
  44.2242431640625,
  10073.908203125,
  44.3921508789062,
  10073.013671875,
  44.5604629516602,
  10072.1181640625,
  44.7291831970215,
  10071.22265625,
  44.898307800293,
  10070.3251953125,
  45.0678443908691,
  10069.4267578125,
  45.2377853393555,
  10068.5283203125,
  45.4081382751465,
  10067.6279296875,
  45.5788955688477,
  10066.7265625,
  45.7500648498535,
  10065.82421875,
  45.9216423034668,
  10064.9208984375,
  46.0936317443848,
  10064.017578125,
  46.2660293579102,
  10063.1123046875,
  46.4388389587402,
  10062.2060546875,
  46.612060546875,
  10061.298828125,
  46.7856903076172,
  10060.390625,
  46.9597358703613,
  10059.4814453125,
  47.1341934204102,
  10058.5712890625,
  47.3090591430664,
  10057.66015625,
  47.4843406677246,
  10056.748046875,
  47.6600341796875,
  10055.8349609375,
  47.8361434936523,
  10054.9208984375,
  48.0126686096191,
  10054.005859375,
  48.1896018981934,
  10053.08984375,
  48.3669548034668,
  10052.1728515625,
  48.5447235107422,
  10051.2548828125,
  48.7229042053223,
  10050.3359375,
  48.9015007019043,
  10049.416015625,
  49.0805168151855,
  10048.4951171875,
  49.2599487304688,
  10047.5732421875,
  49.4397964477539,
  10046.6494140625,
  49.620059967041,
  10045.7255859375,
  49.8007431030273,
  10044.80078125,
  49.9818458557129,
  10043.875,
  50.1633644104004,
  10042.9482421875,
  50.3453025817871,
  10042.0205078125,
  50.527660369873,
  10041.091796875,
  50.7104377746582,
  10040.1611328125,
  50.8936347961426,
  10039.23046875,
  51.0772552490234,
  10038.298828125,
  51.2612915039062,
  10037.3662109375,
  51.4457511901855,
  10036.4326171875,
  51.6306304931641,
  10035.498046875,
  51.8159332275391,
  10034.5625,
  52.0016593933105,
  10033.625,
  52.1878051757812,
  10032.6875,
  52.3743743896484,
  10031.7490234375,
  52.5613670349121,
  10030.8095703125,
  52.7487831115723,
  10029.869140625,
  52.9366226196289,
  10028.927734375,
  53.124885559082,
  10027.984375,
  53.3135757446289,
  10027.041015625,
  53.5026893615723,
  10026.0966796875,
  53.6922264099121,
  10025.1513671875,
  53.8821907043457,
  10024.205078125,
  54.072582244873,
  10023.2578125,
  54.2634010314941,
  10022.3095703125,
  54.4546432495117,
  10021.3603515625,
  54.646312713623,
  10020.41015625,
  54.8384132385254,
  10019.4580078125,
  55.0309371948242,
  10018.505859375,
  55.2238922119141,
  10017.552734375,
  55.4172744750977,
  10016.5986328125,
  55.611083984375,
  10015.6435546875,
  55.8053245544434,
  10014.6875,
  55.9999961853027,
  10013.73046875,
  56.1950950622559,
  10012.7724609375,
  56.390625,
  10011.8134765625,
  56.5865859985352,
  10010.853515625,
  56.7829742431641,
  10009.892578125,
  56.9797973632812,
  10008.9306640625,
  57.1770515441895,
  10007.9677734375,
  57.3747367858887,
  10007.0048828125,
  57.5728569030762,
  10006.0400390625,
  57.7714080810547,
  10005.07421875,
  57.9703903198242,
  10004.107421875,
  58.169807434082,
  10003.1396484375,
  58.3696594238281,
  10002.1708984375,
  58.5699424743652,
  10001.2021484375,
  58.7706604003906,
  10000.2314453125,
  58.9718170166016,
  9999.259765625,
  59.1734046936035,
  9998.287109375,
  59.3754272460938,
  9997.314453125,
  59.5778884887695,
  9996.33984375,
  59.7807846069336,
  9995.3642578125,
  59.9841156005859,
  9994.388671875,
  60.1878852844238,
  9993.4111328125,
  60.39208984375,
  9992.43359375,
  60.5967330932617,
  9991.4541015625,
  60.8018112182617,
  9990.474609375,
  61.0073318481445,
  9989.4931640625,
  61.2132873535156,
  9988.51171875,
  61.4196853637695,
  9987.5283203125,
  61.6265182495117,
  9986.544921875,
  61.8337936401367,
  9985.560546875,
  62.0415077209473,
  9984.57421875,
  62.2496604919434,
  9983.587890625,
  62.4582557678223,
  9982.6005859375,
  62.6672897338867,
  9981.611328125,
  62.876766204834,
  9980.6220703125,
  63.0866813659668,
  9979.6318359375,
  63.2970428466797,
  9978.640625,
  63.5078430175781,
  9977.6484375,
  63.7190856933594,
  9976.6552734375,
  63.9307708740234,
  9975.6611328125,
  64.1428985595703,
  9974.666015625,
  64.35546875,
  9973.669921875,
  64.568489074707,
  9972.6728515625,
  64.7819442749023,
  9971.6748046875,
  64.995849609375,
  9970.6767578125,
  65.2101974487305,
  9969.6767578125,
  65.4249954223633,
  9968.67578125,
  65.6402282714844,
  9967.673828125,
  65.8559188842773,
  9966.671875,
  66.0720443725586,
  9965.66796875,
  66.2886199951172,
  9964.6640625,
  66.5056457519531,
  9963.658203125,
  66.7231140136719,
  9962.65234375,
  66.941032409668,
  9961.64453125,
  67.1593933105469,
  9960.63671875,
  67.3782119750977,
  9959.6279296875,
  67.5974731445312,
  9958.6171875,
  67.8171768188477,
  9957.6064453125,
  68.0373382568359,
  9956.5947265625,
  68.257942199707,
  9955.58203125,
  68.4789962768555,
  9954.568359375,
  68.7005081176758,
  9953.5537109375,
  68.9224624633789,
  9952.5380859375,
  69.1448669433594,
  9951.521484375,
  69.3677215576172,
  9950.50390625,
  69.5910339355469,
  9949.4853515625,
  69.8147888183594,
  9948.466796875,
  70.0390014648438,
  9947.4462890625,
  70.2636642456055,
  9946.4248046875,
  70.4887771606445,
  9945.4033203125,
  70.7143478393555,
  9944.3798828125,
  70.9403686523438,
  9943.3564453125,
  71.1668395996094,
  9942.3310546875,
  71.3937683105469,
  9941.3056640625,
  71.6211471557617,
  9940.279296875,
  71.8489837646484,
  9939.2509765625,
  72.0772705078125,
  9938.22265625,
  72.3060150146484,
  9937.193359375,
  72.5352172851562,
  9936.1630859375,
  72.7648696899414,
  9935.1318359375,
  72.9949798583984,
  9934.099609375,
  73.2255401611328,
  9933.0673828125,
  73.4565658569336,
  9932.033203125,
  73.6880416870117,
  9930.998046875,
  73.9199752807617,
  9929.9619140625,
  74.1523742675781,
  9928.92578125,
  74.3852233886719,
  9927.8876953125,
  74.6185302734375,
  9926.849609375,
  74.852294921875,
  9925.810546875,
  75.0865173339844,
  9924.76953125,
  75.3211975097656,
  9923.728515625,
  75.5563430786133,
  9922.6865234375,
  75.7919387817383,
  9921.6435546875,
  76.0279998779297,
  9920.599609375,
  76.264518737793,
  9919.5546875,
  76.5015029907227,
  9918.5087890625,
  76.7389450073242,
  9917.4619140625,
  76.9768447875977,
  9916.4150390625,
  77.215202331543,
  9915.3662109375,
  77.4540252685547,
  9914.31640625,
  77.6933135986328,
  9913.2666015625,
  77.9330596923828,
  9912.21484375,
  78.1732711791992,
  9911.1630859375,
  78.4139404296875,
  9910.1103515625,
  78.6550750732422,
  9909.056640625,
  78.8966751098633,
  9908.001953125,
  79.1387329101562,
  9906.9462890625,
  79.3812561035156,
  9905.8896484375,
  79.6242446899414,
  9904.83203125,
  79.8676986694336,
  9903.7734375,
  80.1116104125977,
  9902.71484375,
  80.3559951782227,
  9901.654296875,
  80.6008453369141,
  9900.5927734375,
  80.8461532592773,
  9899.53125,
  81.0919342041016,
  9898.46875,
  81.3381729125977,
  9897.404296875,
  81.5848846435547,
  9896.33984375,
  81.8320617675781,
  9895.2744140625,
  82.079704284668,
  9894.2080078125,
  82.3278121948242,
  9893.140625,
  82.5763931274414,
  9892.0732421875,
  82.825439453125,
  9891.00390625,
  83.074951171875,
  9889.93359375,
  83.3249359130859,
  9888.86328125,
  83.5753860473633,
  9887.791015625,
  83.826301574707,
  9886.71875,
  84.0776901245117,
  9885.6455078125,
  84.3295440673828,
  9884.5712890625,
  84.5818710327148,
  9883.49609375,
  84.8346710205078,
  9882.419921875,
  85.0879364013672,
  9881.3427734375,
  85.3416748046875,
  9880.2646484375,
  85.5958786010742,
  9879.185546875,
  85.8505630493164,
  9878.1064453125,
  86.105712890625,
  9877.025390625,
  86.361328125,
  9875.9443359375,
  86.6174240112305,
  9874.8623046875,
  86.8739929199219,
  9873.779296875,
  87.1310272216797,
  9872.6953125,
  87.388542175293,
  9871.6103515625,
  87.6465225219727,
  9870.5244140625,
  87.9049758911133,
  9869.4375,
  88.1639099121094,
  9868.349609375,
  88.4233093261719,
  9867.26171875,
  88.6831893920898,
  9866.171875,
  88.9435424804688,
  9865.08203125,
  89.2043685913086,
  9863.9912109375,
  89.4656677246094,
  9862.8994140625,
  89.7274475097656,
  9861.806640625,
  89.9897003173828,
  9860.712890625,
  90.2524261474609,
  9859.6181640625,
  90.515625,
  9858.5234375,
  90.7793045043945,
  9857.4267578125,
  91.0434646606445,
  9856.330078125,
  91.3080978393555,
  9855.2314453125,
  91.5732040405273,
  9854.1328125,
  91.8387908935547,
  9853.033203125,
  92.104850769043,
  9851.9326171875,
  92.3713989257812,
  9850.8310546875,
  92.6384124755859,
  9849.728515625,
  92.9059143066406,
  9848.6259765625,
  93.1738891601562,
  9847.521484375,
  93.4423446655273,
  9846.4169921875,
  93.7112808227539,
  9845.3115234375,
  93.9806900024414,
  9844.205078125,
  94.2505874633789,
  9843.0966796875,
  94.5209579467773,
  9841.9892578125,
  94.7918090820312,
  9840.8798828125,
  95.0631408691406,
  9839.76953125,
  95.3349533081055,
  9838.6591796875,
  95.6072463989258,
  9837.546875,
  95.8800277709961,
  9836.4345703125,
  96.1532821655273,
  9835.3212890625,
  96.4270172119141,
  9834.20703125,
  96.7012405395508,
  9833.091796875,
  96.975944519043,
  9831.9755859375,
  97.2511215209961,
  9830.8583984375,
  97.5267944335938,
  9829.7412109375,
  97.8029403686523,
  9828.6220703125,
  98.0795745849609,
  9827.5029296875,
  98.356689453125,
  9826.3828125,
  98.6342926025391,
  9825.26171875,
  98.9123764038086,
  9824.1396484375,
  99.1909408569336,
  9823.0166015625,
  99.4699935913086,
  9821.8935546875,
  99.7495269775391,
  9820.7685546875,
  100.02954864502,
  9819.6435546875,
  100.31005859375,
  9818.517578125,
  100.591049194336,
  9817.390625,
  100.872528076172,
  9816.2626953125,
  101.154487609863,
  9815.1337890625,
  101.436943054199,
  9814.00390625,
  101.719871520996,
  9812.8740234375,
  102.003295898438,
  9811.7431640625,
  102.287208557129,
  9810.6103515625,
  102.571601867676,
  9809.4775390625,
  102.856483459473,
  9808.34375,
  103.14185333252,
  9807.2099609375,
  103.427711486816,
  9806.07421875,
  103.714057922363,
  9804.9375,
  104.00089263916,
  9803.80078125,
  104.288215637207,
  9802.6630859375,
  104.576026916504,
  9801.5244140625,
  104.864326477051,
  9800.384765625,
  105.153114318848,
  9799.244140625,
  105.442398071289,
  9798.1025390625,
  105.732162475586,
  9796.9609375,
  106.022422790527,
  9795.818359375,
  106.313171386719,
  9794.673828125,
  106.60440826416,
  9793.529296875,
  106.896141052246,
  9792.3837890625,
  107.188362121582,
  9791.23828125,
  107.481071472168,
  9790.0908203125,
  107.774276733398,
  9788.943359375,
  108.067970275879,
  9787.7939453125,
  108.362152099609,
  9786.64453125,
  108.656829833984,
  9785.494140625,
  108.952003479004,
  9784.34375,
  109.247665405273,
  9783.19140625,
  109.543823242188,
  9782.0380859375,
  109.840469360352,
  9780.884765625,
  110.13761138916,
  9779.73046875,
  110.435241699219,
  9778.5751953125,
  110.733367919922,
  9777.4189453125,
  111.03199005127,
  9776.26171875,
  111.331108093262,
  9775.1044921875,
  111.630714416504,
  9773.9462890625,
  111.930824279785,
  9772.7861328125,
  112.231422424316,
  9771.6259765625,
  112.532516479492,
  9770.46484375,
  112.834106445312,
  9769.3037109375,
  113.136184692383,
  9768.140625,
  113.438766479492,
  9766.9775390625,
  113.741844177246,
  9765.8134765625,
  114.045417785645,
  9764.6484375,
  114.349479675293,
  9763.482421875,
  114.65404510498,
  9762.3154296875,
  114.959106445312,
  9761.1484375,
  115.264663696289,
  9759.9794921875,
  115.570724487305,
  9758.810546875,
  115.87727355957,
  9757.640625,
  116.184326171875,
  9756.4697265625,
  116.49186706543,
  9755.298828125,
  116.799919128418,
  9754.1259765625,
  117.108459472656,
  9752.953125,
  117.417503356934,
  9751.779296875,
  117.727043151855,
  9750.6044921875,
  118.037078857422,
  9749.4287109375,
  118.347618103027,
  9748.251953125,
  118.658653259277,
  9747.0751953125,
  118.970191955566,
  9745.8974609375,
  119.282234191895,
  9744.7177734375,
  119.594764709473,
  9743.5390625,
  119.907806396484,
  9742.3583984375,
  120.221343994141,
  9741.1767578125,
  120.535377502441,
  9739.9951171875,
  120.849914550781,
  9738.8125,
  121.16495513916,
  9737.62890625,
  121.480499267578,
  9736.4443359375,
  121.796539306641,
  9735.259765625,
  122.113082885742,
  9734.0732421875,
  122.430122375488,
  9732.88671875,
  122.747673034668,
  9731.69921875,
  123.065719604492,
  9730.5107421875,
  123.384269714355,
  9729.3212890625,
  123.703323364258,
  9728.1318359375,
  124.022880554199,
  9726.94140625,
  124.34294128418,
  9725.75,
  124.663505554199,
  9724.5576171875,
  124.984565734863,
  9723.3642578125,
  125.306137084961,
  9722.169921875,
  125.628211975098,
  9720.9755859375,
  125.950790405273,
  9719.7802734375,
  126.273872375488,
  9718.583984375,
  126.597457885742,
  9717.38671875,
  126.921546936035,
  9716.189453125,
  127.246139526367,
  9714.990234375,
  127.571235656738,
  9713.791015625,
  127.896842956543,
  9712.5908203125,
  128.222961425781,
  9711.390625,
  128.549575805664,
  9710.1884765625,
  128.876693725586,
  9708.986328125,
  129.204315185547,
  9707.783203125,
  129.532455444336,
  9706.5791015625,
  129.861083984375,
  9705.3740234375,
  130.190231323242,
  9704.16796875,
  130.519897460938,
  9702.9619140625,
  130.850051879883,
  9701.7548828125,
  131.180709838867,
  9700.546875,
  131.51188659668,
  9699.337890625,
  131.843566894531,
  9698.12890625,
  132.175765991211,
  9696.9189453125,
  132.508453369141,
  9695.7080078125,
  132.841659545898,
  9694.49609375,
  133.175369262695,
  9693.283203125,
  133.50959777832,
  9692.0703125,
  133.844329833984,
  9690.85546875,
  134.179565429688,
  9689.640625,
  134.51530456543,
  9688.42578125,
  134.8515625,
  9687.208984375,
  135.188339233398,
  9685.9921875,
  135.525604248047,
  9684.7734375,
  135.863388061523,
  9683.5556640625,
  136.201690673828,
  9682.3359375,
  136.540496826172,
  9681.115234375,
  136.879806518555,
  9679.89453125,
  137.219635009766,
  9678.6728515625,
  137.559967041016,
  9677.4501953125,
  137.900817871094,
  9676.2265625,
  138.242172241211,
  9675.0029296875,
  138.584045410156,
  9673.7783203125,
  138.926422119141,
  9672.552734375,
  139.269317626953,
  9671.326171875,
  139.612716674805,
  9670.099609375,
  139.956634521484,
  9668.87109375,
  140.301055908203,
  9667.642578125,
  140.64599609375,
  9666.4130859375,
  140.991455078125,
  9665.18359375,
  141.337417602539,
  9663.9521484375,
  141.683883666992,
  9662.720703125,
  142.030883789062,
  9661.48828125,
  142.378387451172,
  9660.255859375,
  142.72639465332,
  9659.021484375,
  143.074920654297,
  9657.787109375,
  143.423965454102,
  9656.5517578125,
  143.773529052734,
  9655.3154296875,
  144.123596191406,
  9654.0791015625,
  144.474182128906,
  9652.8408203125,
  144.825271606445,
  9651.6025390625,
  145.176879882812,
  9650.36328125,
  145.529006958008,
  9649.1240234375,
  145.881652832031,
  9647.8828125,
  146.234817504883,
  9646.6416015625,
  146.588485717773,
  9645.3994140625,
  146.942672729492,
  9644.1572265625,
  147.297378540039,
  9642.9130859375,
  147.652587890625,
  9641.6689453125,
  148.008316040039,
  9640.423828125,
  148.36457824707,
  9639.1787109375,
  148.721343994141,
  9637.931640625,
  149.07861328125,
  9636.6845703125,
  149.436416625977,
  9635.4365234375,
  149.794723510742,
  9634.1875,
  150.153564453125,
  9632.9384765625,
  150.512908935547,
  9631.6884765625,
  150.872772216797,
  9630.4375,
  151.233154296875,
  9629.185546875,
  151.594055175781,
  9627.9326171875,
  151.955474853516,
  9626.6796875,
  152.317398071289,
  9625.42578125,
  152.67985534668,
  9624.1708984375,
  153.042816162109,
  9622.916015625,
  153.406311035156,
  9621.66015625,
  153.770309448242,
  9620.4033203125,
  154.134841918945,
  9619.1455078125,
  154.499877929688,
  9617.8876953125,
  154.865447998047,
  9616.6279296875,
  155.231521606445,
  9615.3681640625,
  155.598129272461,
  9614.1083984375,
  155.965240478516,
  9612.8466796875,
  156.332885742188,
  9611.5849609375,
  156.701034545898,
  9610.322265625,
  157.069717407227,
  9609.05859375,
  157.438903808594,
  9607.794921875,
  157.808624267578,
  9606.5302734375,
  158.178863525391,
  9605.2646484375,
  158.549621582031,
  9603.998046875,
  158.9208984375,
  9602.7314453125,
  159.292694091797,
  9601.4638671875,
  159.665008544922,
  9600.1953125,
  160.037841796875,
  9598.9267578125,
  160.411209106445,
  9597.65625,
  160.785079956055,
  9596.3857421875,
  161.159484863281,
  9595.1142578125,
  161.534408569336,
  9593.8427734375,
  161.909851074219,
  9592.5703125,
  162.285827636719,
  9591.296875,
  162.662307739258,
  9590.0224609375,
  163.039321899414,
  9588.748046875,
  163.416854858398,
  9587.4716796875,
  163.794906616211,
  9586.1962890625,
  164.173477172852,
  9584.9189453125,
  164.552581787109,
  9583.6416015625,
  164.932205200195,
  9582.36328125,
  165.312347412109,
  9581.083984375,
  165.693008422852,
  9579.8037109375,
  166.074203491211,
  9578.5234375,
  166.455917358398,
  9577.2421875,
  166.838150024414,
  9575.9599609375,
  167.220901489258,
  9574.677734375,
  167.604187011719,
  9573.39453125,
  167.987991333008,
  9572.1103515625,
  168.372329711914,
  9570.8251953125,
  168.757186889648,
  9569.5400390625,
  169.142562866211,
  9568.25390625,
  169.528457641602,
  9566.966796875,
  169.914886474609,
  9565.6796875,
  170.301834106445,
  9564.3916015625,
  170.689315795898,
  9563.1025390625,
  171.07731628418,
  9561.8125,
  171.465835571289,
  9560.5224609375,
  171.854888916016,
  9559.2314453125,
  172.24446105957,
  9557.939453125,
  172.634567260742,
  9556.6474609375,
  173.025192260742,
  9555.3544921875,
  173.416351318359,
  9554.060546875,
  173.808029174805,
  9552.765625,
  174.200225830078,
  9551.470703125,
  174.592956542969,
  9550.1748046875,
  174.986206054688,
  9548.8779296875,
  175.379989624023,
  9547.5810546875,
  175.774291992188,
  9546.283203125,
  176.169128417969,
  9544.984375,
  176.564483642578,
  9543.685546875,
  176.960372924805,
  9542.3857421875,
  177.356796264648,
  9541.0849609375,
  177.753723144531,
  9539.783203125,
  178.15119934082,
  9538.4814453125,
  178.549194335938,
  9537.1787109375,
  178.947708129883,
  9535.875,
  179.346755981445,
  9534.5712890625,
  179.746337890625,
  9533.265625,
  180.146438598633,
  9531.9609375,
  180.547073364258,
  9530.654296875,
  180.948226928711,
  9529.34765625,
  181.349914550781,
  9528.0400390625,
  181.752136230469,
  9526.7314453125,
  182.154876708984,
  9525.4228515625,
  182.558135986328,
  9524.11328125,
  182.961944580078,
  9522.802734375,
  183.366271972656,
  9521.4921875,
  183.771133422852,
  9520.1806640625,
  184.176513671875,
  9518.8681640625,
  184.582427978516,
  9517.5556640625,
  184.988861083984,
  9516.2421875,
  185.395843505859,
  9514.927734375,
  185.803344726562,
  9513.6123046875,
  186.211364746094,
  9512.296875,
  186.619934082031,
  9510.98046875,
  187.029022216797,
  9509.6640625,
  187.43864440918,
  9508.3466796875,
  187.848785400391,
  9507.0283203125,
  188.259460449219,
  9505.708984375,
  188.670669555664,
  9504.3896484375,
  189.082412719727,
  9503.0693359375,
  189.494674682617,
  9501.748046875,
  189.907470703125,
  9500.4267578125,
  190.32080078125,
  9499.1044921875,
  190.734664916992,
  9497.78125,
  191.149047851562,
  9496.4580078125,
  191.56396484375,
  9495.1337890625,
  191.979415893555,
  9493.80859375,
  192.395401000977,
  9492.4833984375,
  192.811920166016,
  9491.15625,
  193.228958129883,
  9489.830078125,
  193.646530151367,
  9488.501953125,
  194.064636230469,
  9487.173828125,
  194.483276367188,
  9485.8447265625,
  194.902435302734,
  9484.515625,
  195.322143554688,
  9483.185546875,
  195.742370605469,
  9481.8544921875,
  196.163131713867,
  9480.5234375,
  196.584426879883,
  9479.1904296875,
  197.006256103516,
  9477.8583984375,
  197.428604125977,
  9476.5244140625,
  197.851501464844,
  9475.1904296875,
  198.274917602539,
  9473.85546875,
  198.698883056641,
  9472.5205078125,
  199.12336730957,
  9471.1845703125,
  199.548385620117,
  9469.84765625,
  199.973937988281,
  9468.509765625,
  200.400024414062,
  9467.171875,
  200.826644897461,
  9465.833984375,
  201.253784179688,
  9464.494140625,
  201.68147277832,
  9463.154296875,
  202.109680175781,
  9461.8134765625,
  202.538436889648,
  9460.47265625,
  202.967712402344,
  9459.130859375,
  203.397537231445,
  9457.7880859375,
  203.827880859375,
  9456.4453125,
  204.258758544922,
  9455.1015625,
  204.690185546875,
  9453.7568359375,
  205.122131347656,
  9452.412109375,
  205.554611206055,
  9451.06640625,
  205.98762512207,
  9449.7197265625,
  206.421173095703,
  9448.373046875,
  206.855255126953,
  9447.025390625,
  207.289886474609,
  9445.6767578125,
  207.725036621094,
  9444.328125,
  208.160720825195,
  9442.978515625,
  208.596939086914,
  9441.6279296875,
  209.03369140625,
  9440.27734375,
  209.470977783203,
  9438.92578125,
  209.908813476562,
  9437.57421875,
  210.34716796875,
  9436.2216796875,
  210.786056518555,
  9434.8681640625,
  211.225479125977,
  9433.5146484375,
  211.665451049805,
  9432.1591796875,
  212.105941772461,
  9430.8046875,
  212.546981811523,
  9429.4482421875,
  212.988540649414,
  9428.091796875,
  213.430648803711,
  9426.7353515625,
  213.873291015625,
  9425.3779296875,
  214.316452026367,
  9424.01953125,
  214.760162353516,
  9422.66015625,
  215.204406738281,
  9421.30078125,
  215.649185180664,
  9419.9404296875,
  216.094497680664,
  9418.580078125,
  216.540344238281,
  9417.2177734375,
  216.986740112305,
  9415.8564453125,
  217.433654785156,
  9414.4931640625,
  217.881118774414,
  9413.1298828125,
  218.3291015625,
  9411.7666015625,
  218.777633666992,
  9410.4013671875,
  219.226699829102,
  9409.037109375,
  219.676300048828,
  9407.6708984375,
  220.126434326172,
  9406.3046875,
  220.577117919922,
  9404.9375,
  221.0283203125,
  9403.5703125,
  221.480072021484,
  9402.2021484375,
  221.932357788086,
  9400.8330078125,
  222.385177612305,
  9399.4638671875,
  222.838531494141,
  9398.09375,
  223.292419433594,
  9396.72265625,
  223.746841430664,
  9395.3515625,
  224.201812744141,
  9393.9794921875,
  224.657318115234,
  9392.607421875,
  225.113357543945,
  9391.234375,
  225.569931030273,
  9389.8603515625,
  226.027038574219,
  9388.486328125,
  226.48469543457,
  9387.111328125,
  226.942886352539,
  9385.7353515625,
  227.401611328125,
  9384.359375,
  227.860870361328,
  9382.9833984375,
  228.320663452148,
  9381.60546875,
  228.781005859375,
  9380.2275390625,
  229.24186706543,
  9378.849609375,
  229.70329284668,
  9377.4697265625,
  230.165237426758,
  9376.0908203125,
  230.627716064453,
  9374.7099609375,
  231.090744018555,
  9373.3291015625,
  231.554306030273,
  9371.947265625,
  232.018402099609,
  9370.5654296875,
  232.483047485352,
  9369.1826171875,
  232.948211669922,
  9367.7998046875,
  233.413925170898,
  9366.416015625,
  233.880172729492,
  9365.03125,
  234.346969604492,
  9363.646484375,
  234.814300537109,
  9362.2607421875,
  235.282150268555,
  9360.8740234375,
  235.750564575195,
  9359.4873046875,
  236.219497680664,
  9358.099609375,
  236.688980102539,
  9356.7119140625,
  237.158996582031,
  9355.3232421875,
  237.629547119141,
  9353.9345703125,
  238.100646972656,
  9352.5439453125,
  238.572280883789,
  9351.154296875,
  239.044448852539,
  9349.7626953125,
  239.517166137695,
  9348.37109375,
  239.99040222168,
  9346.9794921875,
  240.464202880859,
  9345.5869140625,
  240.938522338867,
  9344.193359375,
  241.413391113281,
  9342.7998046875,
  241.888793945312,
  9341.4052734375,
  242.364730834961,
  9340.009765625,
  242.841217041016,
  9338.6142578125,
  243.318222045898,
  9337.2177734375,
  243.795791625977,
  9335.8212890625,
  244.273880004883,
  9334.423828125,
  244.752517700195,
  9333.0263671875,
  245.231689453125,
  9331.6279296875,
  245.711410522461,
  9330.228515625,
  246.191665649414,
  9328.8291015625,
  246.672454833984,
  9327.4287109375,
  247.153793334961,
  9326.02734375,
  247.635665893555,
  9324.6259765625,
  248.118072509766,
  9323.224609375,
  248.601013183594,
  9321.822265625,
  249.084503173828,
  9320.4189453125,
  249.568542480469,
  9319.0146484375,
  250.053100585938,
  9317.611328125,
  250.538208007812,
  9316.2060546875,
  251.023849487305,
  9314.80078125,
  251.510040283203,
  9313.39453125,
  251.996765136719,
  9311.98828125,
  252.484039306641,
  9310.5810546875,
  252.971832275391,
  9309.173828125,
  253.460174560547,
  9307.765625,
  253.949066162109,
  9306.3564453125,
  254.438491821289,
  9304.947265625,
  254.928451538086,
  9303.537109375,
  255.418960571289,
  9302.126953125,
  255.910003662109,
  9300.7158203125,
  256.401580810547,
  9299.3046875,
  256.893707275391,
  9297.892578125,
  257.386352539062,
  9296.4794921875,
  257.879577636719,
  9295.06640625,
  258.373321533203,
  9293.65234375,
  258.867584228516,
  9292.23828125,
  259.362426757812,
  9290.8232421875,
  259.857788085938,
  9289.4072265625,
  260.353668212891,
  9287.9912109375,
  260.850128173828,
  9286.5751953125,
  261.347106933594,
  9285.158203125,
  261.844635009766,
  9283.740234375,
  262.342681884766,
  9282.322265625,
  262.841278076172,
  9280.9033203125,
  263.340423583984,
  9279.4833984375,
  263.840118408203,
  9278.0634765625,
  264.34033203125,
  9276.6435546875,
  264.841094970703,
  9275.22265625,
  265.342407226562,
  9273.80078125,
  265.844268798828,
  9272.37890625,
  266.346649169922,
  9270.9560546875,
  266.849548339844,
  9269.533203125,
  267.35302734375,
  9268.109375,
  267.857025146484,
  9266.6845703125,
  268.361572265625,
  9265.259765625,
  268.866668701172,
  9263.8349609375,
  269.372283935547,
  9262.4091796875,
  269.878448486328,
  9260.982421875,
  270.385162353516,
  9259.5556640625,
  270.892425537109,
  9258.1279296875,
  271.400207519531,
  9256.7001953125,
  271.908538818359,
  9255.271484375,
  272.417388916016,
  9253.841796875,
  272.926818847656,
  9252.412109375,
  273.436767578125,
  9250.982421875,
  273.947235107422,
  9249.5517578125,
  274.458282470703,
  9248.1201171875,
  274.969848632812,
  9246.6884765625,
  275.481964111328,
  9245.255859375,
  275.99462890625,
  9243.8232421875,
  276.5078125,
  9242.3896484375,
  277.021545410156,
  9240.9560546875,
  277.535827636719,
  9239.521484375,
  278.050628662109,
  9238.0859375,
  278.565979003906,
  9236.650390625,
  279.081878662109,
  9235.21484375,
  279.598327636719,
  9233.7783203125,
  280.115295410156,
  9232.3408203125,
  280.6328125,
  9230.9033203125,
  281.15087890625,
  9229.46484375,
  281.669464111328,
  9228.0263671875,
  282.188598632812,
  9226.5869140625,
  282.708282470703,
  9225.1474609375,
  283.228515625,
  9223.70703125,
  283.749267578125,
  9222.2666015625,
  284.270568847656,
  9220.8251953125,
  284.792419433594,
  9219.3828125,
  285.314819335938,
  9217.9404296875,
  285.837738037109,
  9216.498046875,
  286.361206054688,
  9215.0546875,
  286.885192871094,
  9213.6103515625,
  287.409759521484,
  9212.166015625,
  287.934844970703,
  9210.7216796875,
  288.46044921875,
  9209.275390625,
  288.986633300781,
  9207.830078125,
  289.513336181641,
  9206.3837890625,
  290.040588378906,
  9204.9365234375,
  290.568389892578,
  9203.4892578125,
  291.096710205078,
  9202.041015625,
  291.625579833984,
  9200.5927734375,
  292.154998779297,
  9199.1435546875,
  292.684936523438,
  9197.693359375,
  293.215423583984,
  9196.2431640625,
  293.746459960938,
  9194.79296875,
  294.278045654297,
  9193.341796875,
  294.810150146484,
  9191.890625,
  295.342803955078,
  9190.4384765625,
  295.876007080078,
  9188.9853515625,
  296.409759521484,
  9187.5322265625,
  296.944030761719,
  9186.0791015625,
  297.478851318359,
  9184.625,
  298.014190673828,
  9183.169921875,
  298.550109863281,
  9181.71484375,
  299.086547851562,
  9180.259765625,
  299.623504638672,
  9178.802734375,
  300.161041259766,
  9177.3466796875,
  300.699096679688,
  9175.8896484375,
  301.237701416016,
  9174.431640625,
  301.776824951172,
  9172.9736328125,
  302.316528320312,
  9171.5146484375,
  302.856750488281,
  9170.0556640625,
  303.397491455078,
  9168.5966796875,
  303.938812255859,
  9167.1357421875,
  304.480651855469,
  9165.67578125,
  305.023040771484,
  9164.21484375,
  305.565948486328,
  9162.7529296875,
  306.109436035156,
  9161.291015625,
  306.653442382812,
  9159.828125,
  307.197967529297,
  9158.365234375,
  307.743072509766,
  9156.9013671875,
  308.288696289062,
  9155.4375,
  308.834838867188,
  9153.97265625,
  309.381561279297,
  9152.5078125,
  309.928802490234,
  9151.0419921875,
  310.476593017578,
  9149.576171875,
  311.02490234375,
  9148.109375,
  311.573791503906,
  9146.642578125,
  312.123199462891,
  9145.1748046875,
  312.673126220703,
  9143.70703125,
  313.2236328125,
  9142.2392578125,
  313.774658203125,
  9140.76953125,
  314.326202392578,
  9139.30078125,
  314.878326416016,
  9137.830078125,
  315.430969238281,
  9136.3603515625,
  315.984161376953,
  9134.8896484375,
  316.537872314453,
  9133.41796875,
  317.092132568359,
  9131.9462890625,
  317.646942138672,
  9130.4736328125,
  318.202301025391,
  9129.0009765625,
  318.758178710938,
  9127.52734375,
  319.314605712891,
  9126.0537109375,
  319.87158203125,
  9124.580078125,
  320.429077148438,
  9123.10546875,
  320.987121582031,
  9121.6298828125,
  321.545715332031,
  9120.154296875,
  322.104827880859,
  9118.6787109375,
  322.664489746094,
  9117.2021484375,
  323.224700927734,
  9115.724609375,
  323.785430908203,
  9114.2470703125,
  324.346740722656,
  9112.76953125,
  324.908538818359,
  9111.291015625,
  325.470916748047,
  9109.8115234375,
  326.033813476562,
  9108.33203125,
  326.597259521484,
  9106.8525390625,
  327.161224365234,
  9105.3720703125,
  327.725738525391,
  9103.8916015625,
  328.290802001953,
  9102.41015625,
  328.856414794922,
  9100.9287109375,
  329.422546386719,
  9099.4462890625,
  329.989227294922,
  9097.9638671875,
  330.556427001953,
  9096.48046875,
  331.124176025391,
  9094.9970703125,
  331.692474365234,
  9093.5126953125,
  332.261291503906,
  9092.0283203125,
  332.830688476562,
  9090.5439453125,
  333.400573730469,
  9089.0576171875,
  333.971038818359,
  9087.572265625,
  334.542022705078,
  9086.0859375,
  335.113555908203,
  9084.5986328125,
  335.685607910156,
  9083.1123046875,
  336.258209228516,
  9081.6240234375,
  336.831359863281,
  9080.1357421875,
  337.405029296875,
  9078.6474609375,
  337.979248046875,
  9077.158203125,
  338.554016113281,
  9075.6689453125,
  339.129302978516,
  9074.1787109375,
  339.705139160156,
  9072.6884765625,
  340.281524658203,
  9071.197265625,
  340.858428955078,
  9069.7060546875,
  341.435882568359,
  9068.21484375,
  342.013854980469,
  9066.72265625,
  342.592407226562,
  9065.2294921875,
  343.171447753906,
  9063.736328125,
  343.751068115234,
  9062.2431640625,
  344.331207275391,
  9060.7490234375,
  344.911895751953,
  9059.2548828125,
  345.493103027344,
  9057.759765625,
  346.074859619141,
  9056.2646484375,
  346.657135009766,
  9054.7685546875,
  347.239990234375,
  9053.2724609375,
  347.823333740234,
  9051.775390625,
  348.407257080078,
  9050.2783203125,
  348.99169921875,
  9048.78125,
  349.576690673828,
  9047.283203125,
  350.162200927734,
  9045.7841796875,
  350.748260498047,
  9044.28515625,
  351.334838867188,
  9042.7861328125,
  351.921966552734,
  9041.2861328125,
  352.509643554688,
  9039.7861328125,
  353.097839355469,
  9038.2861328125,
  353.686584472656,
  9036.7841796875,
  354.27587890625,
  9035.283203125,
  354.865692138672,
  9033.78125,
  355.4560546875,
  9032.279296875,
  356.046936035156,
  9030.7763671875,
  356.638366699219,
  9029.2724609375,
  357.230346679688,
  9027.76953125,
  357.822845458984,
  9026.265625,
  358.415863037109,
  9024.7607421875,
  359.009460449219,
  9023.255859375,
  359.603576660156,
  9021.75,
  360.198211669922,
  9020.244140625,
  360.793395996094,
  9018.73828125,
  361.389129638672,
  9017.2314453125,
  361.985382080078,
  9015.724609375,
  362.582183837891,
  9014.216796875,
  363.179504394531,
  9012.708984375,
  363.777374267578,
  9011.201171875,
  364.375793457031,
  9009.6923828125,
  364.974731445312,
  9008.1826171875,
  365.574188232422,
  9006.6728515625,
  366.174224853516,
  9005.1630859375,
  366.774749755859,
  9003.65234375,
  367.375854492188,
  9002.1416015625,
  367.977478027344,
  9000.630859375,
  368.579620361328,
  8999.119140625,
  369.182312011719,
  8997.6064453125,
  369.785552978516,
  8996.09375,
  370.389312744141,
  8994.5810546875,
  370.993591308594,
  8993.0673828125,
  371.598449707031,
  8991.5537109375,
  372.203796386719,
  8990.0400390625,
  372.809722900391,
  8988.525390625,
  373.416168212891,
  8987.009765625,
  374.023132324219,
  8985.4951171875,
  374.630645751953,
  8983.978515625,
  375.238677978516,
  8982.462890625,
  375.847259521484,
  8980.9462890625,
  376.456390380859,
  8979.4287109375,
  377.066040039062,
  8977.9111328125,
  377.676208496094,
  8976.3935546875,
  378.286926269531,
  8974.875,
  378.898193359375,
  8973.3564453125,
  379.509979248047,
  8971.8369140625,
  380.122314453125,
  8970.3173828125,
  380.735168457031,
  8968.7978515625,
  381.348541259766,
  8967.27734375,
  381.962463378906,
  8965.7568359375,
  382.576934814453,
  8964.2353515625,
  383.191925048828,
  8962.7138671875,
  383.807464599609,
  8961.1923828125,
  384.423522949219,
  8959.669921875,
  385.040130615234,
  8958.1474609375,
  385.657257080078,
  8956.6240234375,
  386.27490234375,
  8955.1005859375,
  386.893096923828,
  8953.576171875,
  387.511840820312,
  8952.0517578125,
  388.131103515625,
  8950.52734375,
  388.750885009766,
  8949.001953125,
  389.371215820312,
  8947.4765625,
  389.992095947266,
  8945.951171875,
  390.613494873047,
  8944.4248046875,
  391.235412597656,
  8942.8974609375,
  391.857879638672,
  8941.3701171875,
  392.480865478516,
  8939.8427734375,
  393.104400634766,
  8938.3154296875,
  393.728454589844,
  8936.787109375,
  394.353057861328,
  8935.2578125,
  394.978179931641,
  8933.7294921875,
  395.603851318359,
  8932.2001953125,
  396.230041503906,
  8930.669921875,
  396.856781005859,
  8929.1396484375,
  397.484008789062,
  8927.609375,
  398.11181640625,
  8926.078125,
  398.740142822266,
  8924.546875,
  399.368988037109,
  8923.0146484375,
  399.998382568359,
  8921.482421875,
  400.628295898438,
  8919.9501953125,
  401.258728027344,
  8918.4169921875,
  401.889709472656,
  8916.8837890625,
  402.521240234375,
  8915.3505859375,
  403.153259277344,
  8913.81640625,
  403.785827636719,
  8912.2822265625,
  404.4189453125,
  8910.7470703125,
  405.052581787109,
  8909.2119140625,
  405.686737060547,
  8907.6767578125,
  406.321441650391,
  8906.140625,
  406.956695556641,
  8904.6044921875,
  407.592437744141,
  8903.0673828125,
  408.228729248047,
  8901.5302734375,
  408.865570068359,
  8899.9931640625,
  409.502899169922,
  8898.455078125,
  410.140777587891,
  8896.9169921875,
  410.779205322266,
  8895.3779296875,
  411.418151855469,
  8893.8388671875,
  412.0576171875,
  8892.2998046875,
  412.697631835938,
  8890.759765625,
  413.338165283203,
  8889.2197265625,
  413.979217529297,
  8887.6796875,
  414.620819091797,
  8886.138671875,
  415.262939453125,
  8884.59765625,
  415.905609130859,
  8883.056640625,
  416.548767089844,
  8881.5146484375,
  417.192504882812,
  8879.9716796875,
  417.836730957031,
  8878.4296875,
  418.481506347656,
  8876.88671875,
  419.126800537109,
  8875.3427734375,
  419.772644042969,
  8873.7998046875,
  420.418975830078,
  8872.2548828125,
  421.065887451172,
  8870.7109375,
  421.713287353516,
  8869.166015625,
  422.361236572266,
  8867.62109375,
  423.009704589844,
  8866.0751953125,
  423.658721923828,
  8864.529296875,
  424.308227539062,
  8862.9833984375,
  424.958282470703,
  8861.4365234375,
  425.60888671875,
  8859.8896484375,
  426.260009765625,
  8858.3427734375,
  426.911651611328,
  8856.794921875,
  427.563812255859,
  8855.2470703125,
  428.216491699219,
  8853.6982421875,
  428.869720458984,
  8852.1494140625,
  429.523498535156,
  8850.6005859375,
  430.177764892578,
  8849.05078125,
  430.832580566406,
  8847.5009765625,
  431.487915039062,
  8845.951171875,
  432.143768310547,
  8844.400390625,
  432.800170898438,
  8842.849609375,
  433.457061767578,
  8841.298828125,
  434.114501953125,
  8839.7470703125,
  434.772491455078,
  8838.1953125,
  435.430969238281,
  8836.642578125,
  436.089996337891,
  8835.08984375,
  436.749542236328,
  8833.537109375,
  437.409637451172,
  8831.984375,
  438.070220947266,
  8830.4306640625,
  438.731353759766,
  8828.8759765625,
  439.393005371094,
  8827.322265625,
  440.05517578125,
  8825.767578125,
  440.717895507812,
  8824.2119140625,
  441.381134033203,
  8822.6572265625,
  442.044891357422,
  8821.1015625,
  442.709167480469,
  8819.544921875,
  443.373962402344,
  8817.9892578125,
  444.039306640625,
  8816.4326171875,
  444.705139160156,
  8814.875,
  445.371520996094,
  8813.3173828125,
  446.038452148438,
  8811.759765625,
  446.705871582031,
  8810.2021484375,
  447.373840332031,
  8808.6435546875,
  448.042297363281,
  8807.0849609375,
  448.711303710938,
  8805.525390625,
  449.380828857422,
  8803.966796875,
  450.050903320312,
  8802.40625,
  450.721466064453,
  8800.8466796875,
  451.392578125,
  8799.2861328125,
  452.064208984375,
  8797.7255859375,
  452.736358642578,
  8796.1640625,
  453.409027099609,
  8794.603515625,
  454.082214355469,
  8793.041015625,
  454.755920410156,
  8791.4794921875,
  455.43017578125,
  8789.9169921875,
  456.104949951172,
  8788.3544921875,
  456.780212402344,
  8786.791015625,
  457.456024169922,
  8785.2275390625,
  458.132354736328,
  8783.6640625,
  458.809234619141,
  8782.1005859375,
  459.486602783203,
  8780.5361328125,
  460.164489746094,
  8778.9716796875,
  460.842926025391,
  8777.40625,
  461.521881103516,
  8775.8408203125,
  462.201354980469,
  8774.275390625,
  462.881317138672,
  8772.708984375,
  463.561828613281,
  8771.1435546875,
  464.242858886719,
  8769.576171875,
  464.924438476562,
  8768.009765625,
  465.606506347656,
  8766.4423828125,
  466.289093017578,
  8764.875,
  466.972229003906,
  8763.306640625,
  467.655853271484,
  8761.7392578125,
  468.340026855469,
  8760.169921875,
  469.024688720703,
  8758.6015625,
  469.709899902344,
  8757.0322265625,
  470.395629882812,
  8755.462890625,
  471.081848144531,
  8753.8935546875,
  471.768615722656,
  8752.3232421875,
  472.455902099609,
  8750.7529296875,
  473.143707275391,
  8749.1826171875,
  473.83203125,
  8747.611328125,
  474.520874023438,
  8746.0400390625,
  475.210235595703,
  8744.46875,
  475.900115966797,
  8742.896484375,
  476.590515136719,
  8741.32421875,
  477.281433105469,
  8739.751953125,
  477.972869873047,
  8738.1787109375,
  478.664825439453,
  8736.60546875,
  479.357299804688,
  8735.0322265625,
  480.05029296875,
  8733.4580078125,
  480.743804931641,
  8731.884765625,
  481.437866210938,
  8730.3095703125,
  482.132415771484,
  8728.7353515625,
  482.827484130859,
  8727.16015625,
  483.523071289062,
  8725.5849609375,
  484.219177246094,
  8724.009765625,
  484.915771484375,
  8722.43359375,
  485.612915039062,
  8720.857421875,
  486.310577392578,
  8719.28125,
  487.008758544922,
  8717.7041015625,
  487.707458496094,
  8716.126953125,
  488.406677246094,
  8714.5498046875,
  489.106384277344,
  8712.9716796875,
  489.806640625,
  8711.39453125,
  490.507385253906,
  8709.8154296875,
  491.208679199219,
  8708.2373046875,
  491.910461425781,
  8706.658203125,
  492.612762451172,
  8705.0791015625,
  493.315612792969,
  8703.5,
  494.018951416016,
  8701.919921875,
  494.722808837891,
  8700.33984375,
  495.427185058594,
  8698.759765625,
  496.132049560547,
  8697.1796875,
  496.837463378906,
  8695.5986328125,
  497.543395996094,
  8694.017578125,
  498.249816894531,
  8692.435546875,
  498.956756591797,
  8690.853515625,
  499.664245605469,
  8689.271484375,
  500.372222900391,
  8687.689453125,
  501.080718994141,
  8686.107421875,
  501.789703369141,
  8684.5244140625,
  502.499237060547,
  8682.9404296875,
  503.209289550781,
  8681.357421875,
  503.919830322266,
  8679.7734375,
  504.630889892578,
  8678.189453125,
  505.342468261719,
  8676.60546875,
  506.054565429688,
  8675.0205078125,
  506.767181396484,
  8673.435546875,
  507.480285644531,
  8671.8505859375,
  508.193939208984,
  8670.265625,
  508.908081054688,
  8668.6796875,
  509.622741699219,
  8667.09375,
  510.337890625,
  8665.5068359375,
  511.053588867188,
  8663.9208984375,
  511.769775390625,
  8662.333984375,
  512.486511230469,
  8660.7470703125,
  513.203735351562,
  8659.1591796875,
  513.921447753906,
  8657.5712890625,
  514.639709472656,
  8655.9833984375,
  515.358459472656,
  8654.3955078125,
  516.077697753906,
  8652.806640625,
  516.797485351562,
  8651.21875,
  517.517761230469,
  8649.62890625,
  518.238586425781,
  8648.0400390625,
  518.959899902344,
  8646.4501953125,
  519.681701660156,
  8644.8603515625,
  520.404052734375,
  8643.2705078125,
  521.126892089844,
  8641.6796875,
  521.850280761719,
  8640.08984375,
  522.574157714844,
  8638.498046875,
  523.298522949219,
  8636.9072265625,
  524.023376464844,
  8635.3154296875,
  524.748779296875,
  8633.724609375,
  525.474670410156,
  8632.1318359375,
  526.201110839844,
  8630.5400390625,
  526.928039550781,
  8628.947265625,
  527.655456542969,
  8627.3544921875,
  528.383422851562,
  8625.76171875,
  529.111877441406,
  8624.16796875,
  529.8408203125,
  8622.5751953125,
  530.5703125,
  8620.9814453125,
  531.30029296875,
  8619.38671875,
  532.03076171875,
  8617.79296875,
  532.761779785156,
  8616.1982421875,
  533.493225097656,
  8614.603515625,
  534.225280761719,
  8613.0078125,
  534.957763671875,
  8611.4130859375,
  535.690795898438,
  8609.8173828125,
  536.42431640625,
  8608.2216796875,
  537.158386230469,
  8606.625,
  537.892944335938,
  8605.0283203125,
  538.627990722656,
  8603.431640625,
  539.363525390625,
  8601.8349609375,
  540.099609375,
  8600.23828125,
  540.836181640625,
  8598.640625,
  541.5732421875,
  8597.04296875,
  542.310852050781,
  8595.4453125,
  543.048950195312,
  8593.8466796875,
  543.787536621094,
  8592.2490234375,
  544.526611328125,
  8590.650390625,
  545.266235351562,
  8589.05078125,
  546.00634765625,
  8587.4521484375,
  546.746948242188,
  8585.8525390625,
  547.488098144531,
  8584.2529296875,
  548.229736328125,
  8582.6533203125,
  548.971862792969,
  8581.052734375,
  549.714477539062,
  8579.4521484375,
  550.457641601562,
  8577.8515625,
  551.201293945312,
  8576.2509765625,
  551.945434570312,
  8574.650390625,
  552.690063476562,
  8573.048828125,
  553.435241699219,
  8571.447265625,
  554.180908203125,
  8569.8447265625,
  554.927062988281,
  8568.2431640625,
  555.673706054688,
  8566.640625,
  556.4208984375,
  8565.0380859375,
  557.168579101562,
  8563.435546875,
  557.916748046875,
  8561.83203125,
  558.665405273438,
  8560.2294921875,
  559.414611816406,
  8558.6259765625,
  560.164306640625,
  8557.0224609375,
  560.914489746094,
  8555.41796875,
  561.665161132812,
  8553.8134765625,
  562.416320800781,
  8552.208984375,
  563.168029785156,
  8550.6044921875,
  563.920227050781,
  8549,
  564.672912597656,
  8547.39453125,
  565.426086425781,
  8545.7890625,
  566.179809570312,
  8544.18359375,
  566.933959960938,
  8542.578125,
  567.688659667969,
  8540.9716796875,
  568.44384765625,
  8539.365234375,
  569.199584960938,
  8537.7587890625,
  569.955749511719,
  8536.15234375,
  570.712463378906,
  8534.544921875,
  571.469665527344,
  8532.9384765625,
  572.227355957031,
  8531.3310546875,
  572.985534667969,
  8529.72265625,
  573.744201660156,
  8528.115234375,
  574.50341796875,
  8526.5068359375,
  575.263122558594,
  8524.8984375,
  576.023315429688,
  8523.2900390625,
  576.783996582031,
  8521.681640625,
  577.545166015625,
  8520.072265625,
  578.306823730469,
  8518.462890625,
  579.069030761719,
  8516.853515625,
  579.831726074219,
  8515.244140625,
  580.594909667969,
  8513.6337890625,
  581.358581542969,
  8512.0244140625,
  582.122741699219,
  8510.4140625,
  582.887390136719,
  8508.802734375,
  583.652587890625,
  8507.1923828125,
  584.418212890625,
  8505.5810546875,
  585.184387207031,
  8503.9697265625,
  585.951049804688,
  8502.3583984375,
  586.718200683594,
  8500.7470703125,
  587.48583984375,
  8499.1357421875,
  588.253967285156,
  8497.5234375,
  589.022644042969,
  8495.9111328125,
  589.791748046875,
  8494.298828125,
  590.561401367188,
  8492.685546875,
  591.331481933594,
  8491.0732421875,
  592.102111816406,
  8489.4599609375,
  592.873229980469,
  8487.8466796875,
  593.644836425781,
  8486.2333984375,
  594.416931152344,
  8484.619140625,
  595.189514160156,
  8483.0048828125,
  595.962646484375,
  8481.390625,
  596.736206054688,
  8479.7763671875,
  597.510314941406,
  8478.162109375,
  598.284851074219,
  8476.546875,
  599.059936523438,
  8474.9326171875,
  599.835510253906,
  8473.3173828125,
  600.611511230469,
  8471.7021484375,
  601.388061523438,
  8470.0859375,
  602.165100097656,
  8468.470703125,
  602.942626953125,
  8466.8544921875,
  603.720642089844,
  8465.23828125,
  604.499145507812,
  8463.6220703125,
  605.278198242188,
  8462.0048828125,
  606.057678222656,
  8460.388671875,
  606.837646484375,
  8458.771484375,
  607.6181640625,
  8457.154296875,
  608.399108886719,
  8455.537109375,
  609.180541992188,
  8453.9189453125,
  609.962524414062,
  8452.30078125,
  610.744934082031,
  8450.68359375,
  611.527893066406,
  8449.0654296875,
  612.311340332031,
  8447.4462890625,
  613.09521484375,
  8445.828125,
  613.879638671875,
  8444.208984375,
  614.66455078125,
  8442.58984375,
  615.449890136719,
  8440.970703125,
  616.235778808594,
  8439.3515625,
  617.022155761719,
  8437.732421875,
  617.808959960938,
  8436.1123046875,
  618.596313476562,
  8434.4921875,
  619.384155273438,
  8432.8720703125,
  620.172485351562,
  8431.251953125,
  620.961242675781,
  8429.6318359375,
  621.750549316406,
  8428.0107421875,
  622.540344238281,
  8426.3896484375,
  623.33056640625,
  8424.7685546875,
  624.121337890625,
  8423.1474609375,
  624.91259765625,
  8421.5263671875,
  625.704284667969,
  8419.904296875,
  626.496520996094,
  8418.2822265625,
  627.289245605469,
  8416.66015625,
  628.082397460938,
  8415.0380859375,
  628.876098632812,
  8413.416015625,
  629.670227050781,
  8411.79296875,
  630.464904785156,
  8410.1708984375,
  631.260009765625,
  8408.5478515625,
  632.0556640625,
  8406.9248046875,
  632.851745605469,
  8405.3017578125,
  633.648315429688,
  8403.677734375,
  634.445373535156,
  8402.0537109375,
  635.242919921875,
  8400.4306640625,
  636.041015625,
  8398.806640625,
  636.839538574219,
  8397.1826171875,
  637.638549804688,
  8395.5576171875,
  638.43798828125,
  8393.93359375,
  639.237976074219,
  8392.30859375,
  640.038452148438,
  8390.68359375,
  640.839416503906,
  8389.05859375,
  641.640808105469,
  8387.43359375,
  642.442749023438,
  8385.8076171875,
  643.2451171875,
  8384.1826171875,
  644.047973632812,
  8382.556640625,
  644.851318359375,
  8380.9306640625,
  645.655212402344,
  8379.3046875,
  646.459533691406,
  8377.6787109375,
  647.264282226562,
  8376.0517578125,
  648.069580078125,
  8374.4248046875,
  648.875366210938,
  8372.798828125,
  649.681579589844,
  8371.171875,
  650.488342285156,
  8369.5439453125,
  651.295532226562,
  8367.9169921875,
  652.103210449219,
  8366.2890625,
  652.911376953125,
  8364.662109375,
  653.720031738281,
  8363.0341796875,
  654.529174804688,
  8361.40625,
  655.338806152344,
  8359.7783203125,
  656.148864746094,
  8358.1494140625,
  656.95947265625,
  8356.521484375,
  657.7705078125,
  8354.892578125,
  658.58203125,
  8353.263671875,
  659.39404296875,
  8351.634765625,
  660.206481933594,
  8350.005859375,
  661.019470214844,
  8348.376953125,
  661.832885742188,
  8346.7470703125,
  662.646850585938,
  8345.1171875,
  663.461242675781,
  8343.4873046875,
  664.276123046875,
  8341.857421875,
  665.091430664062,
  8340.2275390625,
  665.907287597656,
  8338.59765625,
  666.723571777344,
  8336.966796875,
  667.540344238281,
  8335.3369140625,
  668.357604980469,
  8333.7060546875,
  669.175354003906,
  8332.0751953125,
  669.993530273438,
  8330.4443359375,
  670.812255859375,
  8328.8125,
  671.631408691406,
  8327.181640625,
  672.451049804688,
  8325.5498046875,
  673.271179199219,
  8323.9189453125,
  674.091735839844,
  8322.287109375,
  674.912841796875,
  8320.6552734375,
  675.734375,
  8319.0224609375,
  676.556335449219,
  8317.390625,
  677.378845214844,
  8315.7578125,
  678.201782226562,
  8314.1259765625,
  679.025268554688,
  8312.4931640625,
  679.849182128906,
  8310.8603515625,
  680.673522949219,
  8309.2275390625,
  681.498413085938,
  8307.59375,
  682.32373046875,
  8305.9609375,
  683.149536132812,
  8304.3271484375,
  683.975769042969,
  8302.6943359375,
  684.802551269531,
  8301.060546875,
  685.629760742188,
  8299.4267578125,
  686.457458496094,
  8297.7919921875,
  687.285583496094,
  8296.158203125,
  688.1142578125,
  8294.5244140625,
  688.943359375,
  8292.8896484375,
  689.77294921875,
  8291.2548828125,
  690.602966308594,
  8289.6201171875,
  691.433471679688,
  8287.9853515625,
  692.264465332031,
  8286.3505859375,
  693.095947265625,
  8284.7158203125,
  693.927856445312,
  8283.080078125,
  694.76025390625,
  8281.4443359375,
  695.593139648438,
  8279.8095703125,
  696.426452636719,
  8278.173828125,
  697.26025390625,
  8276.5380859375,
  698.094543457031,
  8274.9013671875,
  698.929321289062,
  8273.265625,
  699.764526367188,
  8271.6298828125,
  700.600219726562,
  8269.9931640625,
  701.436340332031,
  8268.3564453125,
  702.27294921875,
  8266.7197265625,
  703.110046386719,
  8265.0830078125,
  703.947631835938,
  8263.4462890625,
  704.78564453125,
  8261.8095703125,
  705.624145507812,
  8260.171875,
  706.463073730469,
  8258.53515625,
  707.302490234375,
  8256.8974609375,
  708.142395019531,
  8255.259765625,
  708.982727050781,
  8253.6220703125,
  709.823547363281,
  8251.984375,
  710.664855957031,
  8250.3466796875,
  711.506591796875,
  8248.708984375,
  712.348815917969,
  8247.0703125,
  713.191528320312,
  8245.4326171875,
  714.03466796875,
  8243.7939453125,
  714.878295898438,
  8242.1552734375,
  715.722351074219,
  8240.5166015625,
  716.56689453125,
  8238.8779296875,
  717.411926269531,
  8237.2392578125,
  718.257385253906,
  8235.599609375,
  719.103332519531,
  8233.9609375,
  719.94970703125,
  8232.3212890625,
  720.796569824219,
  8230.681640625,
  721.643920898438,
  8229.0419921875,
  722.49169921875,
  8227.40234375,
  723.339965820312,
  8225.7626953125,
  724.188659667969,
  8224.123046875,
  725.037841796875,
  8222.4833984375,
  725.887451171875,
  8220.8427734375,
  726.737548828125,
  8219.2021484375,
  727.588134765625,
  8217.5625,
  728.439147949219,
  8215.921875,
  729.290649414062,
  8214.28125,
  730.142578125,
  8212.640625,
  730.994995117188,
  8211,
  731.847839355469,
  8209.3583984375,
  732.701171875,
  8207.7177734375,
  733.554931640625,
  8206.076171875,
  734.4091796875,
  8204.435546875,
  735.263916015625,
  8202.7939453125,
  736.119079589844,
  8201.15234375,
  736.974670410156,
  8199.5107421875,
  737.830749511719,
  8197.869140625,
  738.687316894531,
  8196.2265625,
  739.544311523438,
  8194.5849609375,
  740.401794433594,
  8192.943359375,
  741.259704589844,
  8191.30078125,
  742.118041992188,
  8189.65869140625,
  742.976867675781,
  8188.01611328125,
  743.836181640625,
  8186.37353515625,
  744.695922851562,
  8184.73095703125,
  745.556091308594,
  8183.08837890625,
  746.416809082031,
  8181.4453125,
  747.277893066406,
  8179.802734375,
  748.139465332031,
  8178.15966796875,
  749.00146484375,
  8176.5166015625,
  749.863952636719,
  8174.873046875,
  750.726928710938,
  8173.22998046875,
  751.59033203125,
  8171.58642578125,
  752.454162597656,
  8169.94287109375,
  753.318481445312,
  8168.29931640625,
  754.183227539062,
  8166.6552734375,
  755.048461914062,
  8165.01171875,
  755.914123535156,
  8163.36767578125,
  756.780212402344,
  8161.7236328125,
  757.646789550781,
  8160.07958984375,
  758.513854980469,
  8158.43505859375,
  759.38134765625,
  8156.791015625,
  760.249267578125,
  8155.146484375,
  761.117614746094,
  8153.501953125,
  761.986511230469,
  8151.857421875,
  762.855773925781,
  8150.21240234375,
  763.725524902344,
  8148.56787109375,
  764.595703125,
  8146.9228515625,
  765.466369628906,
  8145.27783203125,
  766.337463378906,
  8143.6328125,
  767.209045410156,
  8141.9873046875,
  768.0810546875,
  8140.34228515625,
  768.953491210938,
  8138.69677734375,
  769.826416015625,
  8137.05126953125,
  770.699768066406,
  8135.40576171875,
  771.573547363281,
  8133.76025390625,
  772.447814941406,
  8132.1142578125,
  773.322509765625,
  8130.46875,
  774.197692871094,
  8128.82275390625,
  775.0732421875,
  8127.1767578125,
  775.949340820312,
  8125.5302734375,
  776.825805664062,
  8123.88427734375,
  777.702758789062,
  8122.23779296875,
  778.580200195312,
  8120.591796875,
  779.4580078125,
  8118.9453125,
  780.336303710938,
  8117.298828125,
  781.215087890625,
  8115.65185546875,
  782.09423828125,
  8114.00537109375,
  782.973876953125,
  8112.3583984375,
  783.853942871094,
  8110.7119140625,
  784.734497070312,
  8109.06494140625,
  785.615478515625,
  8107.41748046875,
  786.496887207031,
  8105.7705078125,
  787.378784179688,
  8104.12353515625,
  788.261108398438,
  8102.47607421875,
  789.143859863281,
  8100.82861328125,
  790.027038574219,
  8099.18115234375,
  790.910705566406,
  8097.53369140625,
  791.794799804688,
  8095.88623046875,
  792.679321289062,
  8094.23828125,
  793.564331054688,
  8092.5908203125,
  794.449768066406,
  8090.94287109375,
  795.335632324219,
  8089.294921875,
  796.221923828125,
  8087.64697265625,
  797.108703613281,
  8085.9990234375,
  797.995910644531,
  8084.3505859375,
  798.883544921875,
  8082.70263671875,
  799.771667480469,
  8081.05419921875,
  800.66015625,
  8079.40576171875,
  801.549133300781,
  8077.75732421875,
  802.438537597656,
  8076.10888671875,
  803.328430175781,
  8074.46044921875,
  804.218688964844,
  8072.8115234375,
  805.109436035156,
  8071.1630859375,
  806.000671386719,
  8069.51416015625,
  806.892272949219,
  8067.865234375,
  807.784301757812,
  8066.21630859375,
  808.676818847656,
  8064.5673828125,
  809.569763183594,
  8062.91845703125,
  810.463134765625,
  8061.26904296875,
  811.356994628906,
  8059.6201171875,
  812.251220703125,
  8057.970703125,
  813.145935058594,
  8056.3212890625,
  814.041076660156,
  8054.671875,
  814.936645507812,
  8053.0224609375,
  815.832702636719,
  8051.373046875,
  816.729125976562,
  8049.72314453125,
  817.626037597656,
  8048.07373046875,
  818.523376464844,
  8046.423828125,
  819.421142578125,
  8044.77392578125,
  820.3193359375,
  8043.1240234375,
  821.218017578125,
  8041.47412109375,
  822.117065429688,
  8039.82421875,
  823.0166015625,
  8038.17431640625,
  823.916564941406,
  8036.52392578125,
  824.816955566406,
  8034.8740234375,
  825.7177734375,
  8033.2236328125,
  826.619018554688,
  8031.5732421875,
  827.520690917969,
  8029.9228515625,
  828.4228515625,
  8028.2724609375,
  829.325439453125,
  8026.6220703125,
  830.228393554688,
  8024.9716796875,
  831.1318359375,
  8023.3212890625,
  832.035705566406,
  8021.67041015625,
  832.940002441406,
  8020.01953125,
  833.844787597656,
  8018.369140625,
  834.749938964844,
  8016.71826171875,
  835.655578613281,
  8015.0673828125,
  836.561584472656,
  8013.41650390625,
  837.468078613281,
  8011.765625,
  838.374938964844,
  8010.1142578125,
  839.282287597656,
  8008.46337890625,
  840.190063476562,
  8006.81201171875,
  841.098266601562,
  8005.1611328125,
  842.006896972656,
  8003.509765625,
  842.915954589844,
  8001.8583984375,
  843.825439453125,
  8000.20703125,
  844.7353515625,
  7998.5556640625,
  845.645751953125,
  7996.904296875,
  846.556518554688,
  7995.2529296875,
  847.467712402344,
  7993.6015625,
  848.37939453125,
  7991.94970703125,
  849.291442871094,
  7990.29833984375,
  850.203979492188,
  7988.646484375,
  851.116882324219,
  7986.99462890625,
  852.0302734375,
  7985.34326171875,
  852.944030761719,
  7983.69140625,
  853.858276367188,
  7982.03955078125,
  854.772888183594,
  7980.3876953125,
  855.68798828125,
  7978.7353515625,
  856.603515625,
  7977.08349609375,
  857.519409179688,
  7975.431640625,
  858.435791015625,
  7973.779296875,
  859.3525390625,
  7972.12744140625,
  860.269775390625,
  7970.47509765625,
  861.187438964844,
  7968.8232421875,
  862.10546875,
  7967.1708984375,
  863.023986816406,
  7965.5185546875,
  863.94287109375,
  7963.8662109375,
  864.862243652344,
  7962.2138671875,
  865.781982421875,
  7960.5615234375,
  866.702209472656,
  7958.9091796875,
  867.622802734375,
  7957.25634765625,
  868.543823242188,
  7955.60400390625,
  869.46533203125,
  7953.95166015625,
  870.38720703125,
  7952.298828125,
  871.309509277344,
  7950.646484375,
  872.232238769531,
  7948.99365234375,
  873.155395507812,
  7947.3408203125,
  874.078979492188,
  7945.6884765625,
  875.002990722656,
  7944.03564453125,
  875.927429199219,
  7942.3828125,
  876.852233886719,
  7940.72998046875,
  877.777526855469,
  7939.0771484375,
  878.703247070312,
  7937.42431640625,
  879.629333496094,
  7935.771484375,
  880.555908203125,
  7934.1181640625,
  881.482849121094,
  7932.46533203125,
  882.410217285156,
  7930.8125,
  883.338012695312,
  7929.1591796875,
  884.266235351562,
  7927.50634765625,
  885.194885253906,
  7925.85302734375,
  886.123962402344,
  7924.2001953125,
  887.053405761719,
  7922.546875,
  887.983337402344,
  7920.8935546875,
  888.913635253906,
  7919.24072265625,
  889.844360351562,
  7917.58740234375,
  890.775512695312,
  7915.93408203125,
  891.707092285156,
  7914.28076171875,
  892.639099121094,
  7912.62744140625,
  893.571472167969,
  7910.97412109375,
  894.504333496094,
  7909.32080078125,
  895.437561035156,
  7907.66748046875,
  896.371215820312,
  7906.01416015625,
  897.305297851562,
  7904.3603515625,
  898.239807128906,
  7902.70703125,
  899.174682617188,
  7901.0537109375,
  900.110046386719,
  7899.39990234375,
  901.045776367188,
  7897.74658203125,
  901.98193359375,
  7896.09326171875,
  902.918518066406,
  7894.439453125,
  903.85546875,
  7892.7861328125,
  904.792907714844,
  7891.13232421875,
  905.730712890625,
  7889.478515625,
  906.6689453125,
  7887.8251953125,
  907.607604980469,
  7886.17138671875,
  908.546630859375,
  7884.517578125,
  909.486145019531,
  7882.8642578125,
  910.426025390625,
  7881.21044921875,
  911.366271972656,
  7879.556640625,
  912.307006835938,
  7877.90283203125,
  913.248107910156,
  7876.2490234375,
  914.189697265625,
  7874.59521484375,
  915.131591796875,
  7872.94140625,
  916.073974609375,
  7871.2880859375,
  917.016784667969,
  7869.63427734375,
  917.9599609375,
  7867.98046875,
  918.903503417969,
  7866.32666015625,
  919.847534179688,
  7864.67236328125,
  920.791931152344,
  7863.0185546875,
  921.736755371094,
  7861.36474609375,
  922.682006835938,
  7859.7109375,
  923.627685546875,
  7858.05712890625,
  924.57373046875,
  7856.4033203125,
  925.520202636719,
  7854.74951171875,
  926.467041015625,
  7853.09521484375,
  927.414306640625,
  7851.44140625,
  928.361999511719,
  7849.78759765625,
  929.310119628906,
  7848.1337890625,
  930.258605957031,
  7846.4794921875,
  931.20751953125,
  7844.82568359375,
  932.156860351562,
  7843.171875,
  933.106567382812,
  7841.51806640625,
  934.056762695312,
  7839.86376953125,
  935.007263183594,
  7838.2099609375,
  935.958251953125,
  7836.55615234375,
  936.909606933594,
  7834.90185546875,
  937.861328125,
  7833.248046875,
  938.813537597656,
  7831.59423828125,
  939.766052246094,
  7829.93994140625,
  940.719055175781,
  7828.2861328125,
  941.672424316406,
  7826.63232421875,
  942.626220703125,
  7824.97802734375,
  943.580444335938,
  7823.32421875,
  944.535034179688,
  7821.669921875,
  945.489990234375,
  7820.01611328125,
  946.445434570312,
  7818.3623046875,
  947.401245117188,
  7816.7080078125,
  948.357421875,
  7815.05419921875,
  949.314025878906,
  7813.400390625,
  950.271057128906,
  7811.74609375,
  951.228454589844,
  7810.09228515625,
  952.186279296875,
  7808.4384765625,
  953.14453125,
  7806.7841796875,
  954.103149414062,
  7805.13037109375,
  955.062194824219,
  7803.4765625,
  956.021606445312,
  7801.822265625,
  956.9814453125,
  7800.16845703125,
  957.941650390625,
  7798.5146484375,
  958.902282714844,
  7796.86083984375,
  959.86328125,
  7795.20654296875,
  960.82470703125,
  7793.552734375,
  961.786560058594,
  7791.89892578125,
  962.748779296875,
  7790.2451171875,
  963.71142578125,
  7788.5908203125,
  964.674438476562,
  7786.93701171875,
  965.637878417969,
  7785.283203125,
  966.601684570312,
  7783.62939453125,
  967.56591796875,
  7781.9755859375,
  968.530517578125,
  7780.32177734375,
  969.495544433594,
  7778.66796875,
  970.4609375,
  7777.01416015625,
  971.4267578125,
  7775.3603515625,
  972.392944335938,
  7773.70654296875,
  973.359558105469,
  7772.052734375,
  974.326538085938,
  7770.39892578125,
  975.2939453125,
  7768.7451171875,
  976.26171875,
  7767.09130859375,
  977.229919433594,
  7765.4375,
  978.198486328125,
  7763.7841796875,
  979.16748046875,
  7762.13037109375,
  980.136840820312,
  7760.4765625,
  981.106567382812,
  7758.82275390625,
  982.076721191406,
  7757.16943359375,
  983.047302246094,
  7755.515625,
  984.018249511719,
  7753.86181640625,
  984.989562988281,
  7752.20849609375,
  985.961303710938,
  7750.5546875,
  986.933410644531,
  7748.9013671875,
  987.905944824219,
  7747.24755859375,
  988.878845214844,
  7745.59423828125,
  989.852172851562,
  7743.94091796875,
  990.825866699219,
  7742.287109375,
  991.799926757812,
  7740.6337890625,
  992.7744140625,
  7738.98046875,
  993.749267578125,
  7737.3271484375,
  994.724548339844,
  7735.67333984375,
  995.7001953125,
  7734.02001953125,
  996.676208496094,
  7732.36669921875,
  997.652648925781,
  7730.71337890625,
  998.629455566406,
  7729.06005859375,
  999.606628417969,
  7727.40673828125,
  1000.58422851562,
  7725.75341796875,
  1001.56225585938,
  7724.1005859375,
  1002.54058837891,
  7722.447265625,
  1003.51934814453,
  7720.7939453125,
  1004.49853515625,
  7719.14111328125,
  1005.47802734375,
  7717.48779296875,
  1006.45794677734,
  7715.8349609375,
  1007.43829345703,
  7714.181640625,
  1008.41900634766,
  7712.52880859375,
  1009.40008544922,
  7710.87548828125,
  1010.38153076172,
  7709.22265625,
  1011.36340332031,
  7707.56982421875,
  1012.34564208984,
  7705.9169921875,
  1013.32824707031,
  7704.263671875,
  1014.31127929688,
  7702.61083984375,
  1015.29467773438,
  7700.9580078125,
  1016.27844238281,
  7699.3056640625,
  1017.26263427734,
  7697.65283203125,
  1018.24719238281,
  7696,
  1019.23211669922,
  7694.34716796875,
  1020.21746826172,
  7692.69482421875,
  1021.20318603516,
  7691.0419921875,
  1022.18927001953,
  7689.38916015625,
  1023.17572021484,
  7687.73681640625,
  1024.16259765625,
  7686.08447265625,
  1025.14978027344,
  7684.431640625,
  1026.13745117188,
  7682.779296875,
  1027.12548828125,
  7681.126953125,
  1028.11376953125,
  7679.474609375,
  1029.1025390625,
  7677.822265625,
  1030.09167480469,
  7676.169921875,
  1031.08129882812,
  7674.517578125,
  1032.07116699219,
  7672.865234375,
  1033.06140136719,
  7671.21337890625,
  1034.05212402344,
  7669.56103515625,
  1035.04321289062,
  7667.9091796875,
  1036.03454589844,
  7666.2568359375,
  1037.0263671875,
  7664.60498046875,
  1038.0185546875,
  7662.95263671875,
  1039.01110839844,
  7661.30078125,
  1040.00415039062,
  7659.64892578125,
  1040.99743652344,
  7657.9970703125,
  1041.99108886719,
  7656.34521484375,
  1042.98522949219,
  7654.693359375,
  1043.97961425781,
  7653.0419921875,
  1044.97448730469,
  7651.39013671875,
  1045.9697265625,
  7649.73828125,
  1046.96533203125,
  7648.0869140625,
  1047.96130371094,
  7646.43505859375,
  1048.95764160156,
  7644.78369140625,
  1049.95434570312,
  7643.13232421875,
  1050.95141601562,
  7641.48095703125,
  1051.94885253906,
  7639.82958984375,
  1052.94665527344,
  7638.17822265625,
  1053.94494628906,
  7636.52685546875,
  1054.94348144531,
  7634.87548828125,
  1055.94250488281,
  7633.224609375,
  1056.94177246094,
  7631.5732421875,
  1057.94152832031,
  7629.92236328125,
  1058.94165039062,
  7628.27099609375,
  1059.94213867188,
  7626.6201171875,
  1060.94287109375,
  7624.96923828125,
  1061.94409179688,
  7623.318359375,
  1062.94567871094,
  7621.66748046875,
  1063.94763183594,
  7620.0166015625,
  1064.94995117188,
  7618.3662109375,
  1065.95263671875,
  7616.71533203125,
  1066.95568847656,
  7615.064453125,
  1067.95922851562,
  7613.4140625,
  1068.96301269531,
  7611.763671875,
  1069.96716308594,
  7610.11328125,
  1070.9716796875,
  7608.462890625,
  1071.97668457031,
  7606.8125,
  1072.98193359375,
  7605.162109375,
  1073.98754882812,
  7603.51171875,
  1074.99365234375,
  7601.861328125,
  1076,
  7600.21142578125,
  1077.00671386719,
  7598.5615234375,
  1078.01391601562,
  7596.9111328125,
  1079.02136230469,
  7595.26123046875,
  1080.029296875,
  7593.611328125,
  1081.03747558594,
  7591.96142578125,
  1082.04614257812,
  7590.3115234375,
  1083.05505371094,
  7588.662109375,
  1084.064453125,
  7587.01220703125,
  1085.07409667969,
  7585.36279296875,
  1086.08422851562,
  7583.712890625,
  1087.09460449219,
  7582.0634765625,
  1088.10546875,
  7580.4140625,
  1089.11657714844,
  7578.7646484375,
  1090.12817382812,
  7577.115234375,
  1091.14001464844,
  7575.46630859375,
  1092.15234375,
  7573.81689453125,
  1093.16491699219,
  7572.16796875,
  1094.17797851562,
  7570.51904296875,
  1095.19128417969,
  7568.86962890625,
  1096.20495605469,
  7567.220703125,
  1097.21911621094,
  7565.57177734375,
  1098.23352050781,
  7563.92333984375,
  1099.24829101562,
  7562.2744140625,
  1100.26354980469,
  7560.62548828125,
  1101.27905273438,
  7558.97705078125,
  1102.294921875,
  7557.32861328125,
  1103.31115722656,
  7555.68017578125,
  1104.32788085938,
  7554.03173828125,
  1105.34484863281,
  7552.38330078125,
  1106.36218261719,
  7550.73486328125,
  1107.3798828125,
  7549.0869140625,
  1108.39794921875,
  7547.4384765625,
  1109.41638183594,
  7545.79052734375,
  1110.43518066406,
  7544.142578125,
  1111.45422363281,
  7542.49462890625,
  1112.47375488281,
  7540.8466796875,
  1113.49365234375,
  7539.19873046875,
  1114.51379394531,
  7537.55126953125,
  1115.53442382812,
  7535.9033203125,
  1116.55541992188,
  7534.255859375,
  1117.57666015625,
  7532.6083984375,
  1118.59826660156,
  7530.9609375,
  1119.62036132812,
  7529.3134765625,
  1120.64270019531,
  7527.66650390625,
  1121.66540527344,
  7526.01904296875,
  1122.6884765625,
  7524.3720703125,
  1123.7119140625,
  7522.72509765625,
  1124.73571777344,
  7521.078125,
  1125.75988769531,
  7519.43115234375,
  1126.78442382812,
  7517.7841796875,
  1127.80920410156,
  7516.13720703125,
  1128.83447265625,
  7514.49072265625,
  1129.85998535156,
  7512.84423828125,
  1130.88598632812,
  7511.197265625,
  1131.91223144531,
  7509.55078125,
  1132.93884277344,
  7507.90478515625,
  1133.9658203125,
  7506.25830078125,
  1134.9931640625,
  7504.61181640625,
  1136.02087402344,
  7502.9658203125,
  1137.04895019531,
  7501.31982421875,
  1138.07727050781,
  7499.673828125,
  1139.10607910156,
  7498.02783203125,
  1140.13513183594,
  7496.3818359375,
  1141.16467285156,
  7494.736328125,
  1142.19445800781,
  7493.0908203125,
  1143.224609375,
  7491.44482421875,
  1144.25512695312,
  7489.79931640625,
  1145.28601074219,
  7488.15380859375,
  1146.31713867188,
  7486.5087890625,
  1147.34875488281,
  7484.86328125,
  1148.38061523438,
  7483.21826171875,
  1149.41284179688,
  7481.5732421875,
  1150.44555664062,
  7479.92822265625,
  1151.478515625,
  7478.283203125,
  1152.51171875,
  7476.63818359375,
  1153.54541015625,
  7474.99365234375,
  1154.57946777344,
  7473.3486328125,
  1155.61376953125,
  7471.7041015625,
  1156.6484375,
  7470.0595703125,
  1157.68347167969,
  7468.41552734375,
  1158.71887207031,
  7466.77099609375,
  1159.75463867188,
  7465.126953125,
  1160.79077148438,
  7463.482421875,
  1161.8271484375,
  7461.83837890625,
  1162.86401367188,
  7460.1943359375,
  1163.90112304688,
  7458.55078125,
  1164.93859863281,
  7456.90673828125,
  1165.97631835938,
  7455.26318359375,
  1167.01452636719,
  7453.61962890625,
  1168.05297851562,
  7451.97607421875,
  1169.09191894531,
  7450.33251953125,
  1170.13110351562,
  7448.68896484375,
  1171.17065429688,
  7447.0458984375,
  1172.21044921875,
  7445.40283203125,
  1173.25073242188,
  7443.759765625,
  1174.29125976562,
  7442.11669921875,
  1175.33215332031,
  7440.4736328125,
  1176.37341308594,
  7438.8310546875,
  1177.4150390625,
  7437.18798828125,
  1178.45703125,
  7435.54541015625,
  1179.49926757812,
  7433.90283203125,
  1180.54187011719,
  7432.2607421875,
  1181.58483886719,
  7430.6181640625,
  1182.62817382812,
  7428.97607421875,
  1183.67175292969,
  7427.333984375,
  1184.7158203125,
  7425.69189453125,
  1185.76013183594,
  7424.0498046875,
  1186.80480957031,
  7422.40771484375,
  1187.84973144531,
  7420.76611328125,
  1188.89514160156,
  7419.12451171875,
  1189.94079589844,
  7417.48291015625,
  1190.98681640625,
  7415.84130859375,
  1192.033203125,
  7414.2001953125,
  1193.07983398438,
  7412.55859375,
  1194.126953125,
  7410.91748046875,
  1195.17431640625,
  7409.2763671875,
  1196.22204589844,
  7407.6357421875,
  1197.27001953125,
  7405.99462890625,
  1198.31848144531,
  7404.35400390625,
  1199.3671875,
  7402.71337890625,
  1200.41625976562,
  7401.07275390625,
  1201.46557617188,
  7399.43212890625,
  1202.51538085938,
  7397.7919921875,
  1203.5654296875,
  7396.1513671875,
  1204.61584472656,
  7394.51123046875,
  1205.66650390625,
  7392.87109375,
  1206.71765136719,
  7391.2314453125,
  1207.76904296875,
  7389.59130859375,
  1208.82080078125,
  7387.95166015625,
  1209.87280273438,
  7386.31201171875,
  1210.92517089844,
  7384.67236328125,
  1211.97790527344,
  7383.033203125,
  1213.03100585938,
  7381.3935546875,
  1214.08447265625,
  7379.75439453125,
  1215.13818359375,
  7378.115234375,
  1216.19226074219,
  7376.4765625,
  1217.24658203125,
  7374.83740234375,
  1218.30139160156,
  7373.19873046875,
  1219.3564453125,
  7371.56005859375,
  1220.41186523438,
  7369.92138671875,
  1221.46752929688,
  7368.28271484375,
  1222.52355957031,
  7366.64453125,
  1223.57995605469,
  7365.00634765625,
  1224.63671875,
  7363.3681640625,
  1225.69372558594,
  7361.72998046875,
  1226.75109863281,
  7360.091796875,
  1227.80883789062,
  7358.4541015625,
  1228.86682128906,
  7356.81640625,
  1229.92529296875,
  7355.1787109375,
  1230.98388671875,
  7353.54150390625,
  1232.04296875,
  7351.90380859375,
  1233.10229492188,
  7350.2666015625,
  1234.16198730469,
  7348.62939453125,
  1235.22192382812,
  7346.99267578125,
  1236.28234863281,
  7345.35546875,
  1237.34289550781,
  7343.71875,
  1238.40393066406,
  7342.08203125,
  1239.46520996094,
  7340.4453125,
  1240.52685546875,
  7338.80908203125,
  1241.5888671875,
  7337.17236328125,
  1242.65112304688,
  7335.5361328125,
  1243.71374511719,
  7333.89990234375,
  1244.77661132812,
  7332.26416015625,
  1245.83996582031,
  7330.6279296875,
  1246.90356445312,
  7328.9921875,
  1247.96740722656,
  7327.3564453125,
  1249.03161621094,
  7325.72119140625,
  1250.09619140625,
  7324.08544921875,
  1251.1611328125,
  7322.4501953125,
  1252.22631835938,
  7320.81494140625,
  1253.29187011719,
  7319.18017578125,
  1254.35766601562,
  7317.544921875,
  1255.423828125,
  7315.91015625,
  1256.49035644531,
  7314.275390625,
  1257.55712890625,
  7312.640625,
  1258.62426757812,
  7311.00634765625,
  1259.69177246094,
  7309.3720703125,
  1260.75952148438,
  7307.73779296875,
  1261.82763671875,
  7306.103515625,
  1262.89599609375,
  7304.4697265625,
  1263.96472167969,
  7302.83544921875,
  1265.03381347656,
  7301.20166015625,
  1266.10314941406,
  7299.568359375,
  1267.1728515625,
  7297.9345703125,
  1268.24291992188,
  7296.30126953125,
  1269.31323242188,
  7294.66796875,
  1270.3837890625,
  7293.03466796875,
  1271.45483398438,
  7291.40185546875,
  1272.52612304688,
  7289.76904296875,
  1273.59765625,
  7288.13623046875,
  1274.66955566406,
  7286.50341796875,
  1275.74182128906,
  7284.87060546875,
  1276.814453125,
  7283.23828125,
  1277.88732910156,
  7281.60595703125,
  1278.96044921875,
  7279.97412109375,
  1280.03393554688,
  7278.341796875,
  1281.10778808594,
  7276.7099609375,
  1282.18188476562,
  7275.078125,
  1283.25634765625,
  7273.44677734375,
  1284.3310546875,
  7271.81494140625,
  1285.40612792969,
  7270.18359375,
  1286.48156738281,
  7268.55224609375,
  1287.55725097656,
  7266.92138671875,
  1288.63330078125,
  7265.2900390625,
  1289.70959472656,
  7263.6591796875,
  1290.78625488281,
  7262.0283203125,
  1291.86328125,
  7260.39794921875,
  1292.94055175781,
  7258.767578125,
  1294.01806640625,
  7257.13720703125,
  1295.09594726562,
  7255.5068359375,
  1296.17419433594,
  7253.87646484375,
  1297.25268554688,
  7252.24658203125,
  1298.33154296875,
  7250.61669921875,
  1299.41064453125,
  7248.9873046875,
  1300.49011230469,
  7247.357421875,
  1301.56982421875,
  7245.72802734375,
  1302.64990234375,
  7244.0986328125,
  1303.73034667969,
  7242.4697265625,
  1304.81103515625,
  7240.84033203125,
  1305.89196777344,
  7239.21142578125,
  1306.97326660156,
  7237.5830078125,
  1308.05493164062,
  7235.9541015625,
  1309.13684082031,
  7234.32568359375,
  1310.21911621094,
  7232.697265625,
  1311.30163574219,
  7231.06884765625,
  1312.38439941406,
  7229.44091796875,
  1313.46765136719,
  7227.81298828125,
  1314.55102539062,
  7226.18505859375,
  1315.63488769531,
  7224.5576171875,
  1316.71887207031,
  7222.9296875,
  1317.80334472656,
  7221.30224609375,
  1318.88793945312,
  7219.67529296875,
  1319.97302246094,
  7218.0478515625,
  1321.05822753906,
  7216.4208984375,
  1322.14392089844,
  7214.7939453125,
  1323.22973632812,
  7213.16748046875,
  1324.31604003906,
  7211.54052734375,
  1325.40246582031,
  7209.9140625,
  1326.48937988281,
  7208.2880859375,
  1327.57641601562,
  7206.66162109375,
  1328.66394042969,
  7205.03564453125,
  1329.75158691406,
  7203.40966796875,
  1330.83959960938,
  7201.7841796875,
  1331.92797851562,
  7200.15869140625,
  1333.0166015625,
  7198.533203125,
  1334.10559082031,
  7196.90771484375,
  1335.19482421875,
  7195.2822265625,
  1336.28430175781,
  7193.6572265625,
  1337.37414550781,
  7192.03271484375,
  1338.46435546875,
  7190.40771484375,
  1339.55480957031,
  7188.783203125,
  1340.6455078125,
  7187.15869140625,
  1341.73657226562,
  7185.5341796875,
  1342.82788085938,
  7183.91015625,
  1343.91955566406,
  7182.2861328125,
  1345.01147460938,
  7180.662109375,
  1346.10375976562,
  7179.03857421875,
  1347.1962890625,
  7177.4150390625,
  1348.28918457031,
  7175.79150390625,
  1349.38232421875,
  7174.16796875,
  1350.47570800781,
  7172.544921875,
  1351.56945800781,
  7170.921875,
  1352.66357421875,
  7169.298828125,
  1353.7578125,
  7167.67626953125,
  1354.8525390625,
  7166.0537109375,
  1355.94738769531,
  7164.43115234375,
  1357.04260253906,
  7162.80908203125,
  1358.13818359375,
  7161.18701171875,
  1359.23400878906,
  7159.56494140625,
  1360.330078125,
  7157.94287109375,
  1361.42651367188,
  7156.3212890625,
  1362.52319335938,
  7154.69970703125,
  1363.6201171875,
  7153.078125,
  1364.71740722656,
  7151.45703125,
  1365.81506347656,
  7149.8359375,
  1366.91296386719,
  7148.21533203125,
  1368.01110839844,
  7146.59423828125,
  1369.10949707031,
  7144.9736328125,
  1370.20825195312,
  7143.35302734375,
  1371.30737304688,
  7141.73291015625,
  1372.40673828125,
  7140.11279296875,
  1373.50634765625,
  7138.49267578125,
  1374.60620117188,
  7136.87255859375,
  1375.70642089844,
  7135.2529296875,
  1376.80700683594,
  7133.63330078125,
  1377.90783691406,
  7132.01416015625,
  1379.00891113281,
  7130.39501953125,
  1380.11022949219,
  7128.77587890625,
  1381.2119140625,
  7127.15673828125,
  1382.31384277344,
  7125.5380859375,
  1383.41613769531,
  7123.91943359375,
  1384.51867675781,
  7122.30078125,
  1385.62158203125,
  7120.6826171875,
  1386.724609375,
  7119.064453125,
  1387.82800292969,
  7117.4462890625,
  1388.93176269531,
  7115.82861328125,
  1390.03576660156,
  7114.2109375,
  1391.14001464844,
  7112.59326171875,
  1392.24462890625,
  7110.9755859375,
  1393.34936523438,
  7109.3583984375,
  1394.45458984375,
  7107.74169921875,
  1395.55993652344,
  7106.12451171875,
  1396.66564941406,
  7104.5078125,
  1397.77172851562,
  7102.89111328125,
  1398.8779296875,
  7101.27490234375,
  1399.98449707031,
  7099.65869140625,
  1401.09143066406,
  7098.04248046875,
  1402.19848632812,
  7096.42626953125,
  1403.30590820312,
  7094.810546875,
  1404.41369628906,
  7093.19482421875,
  1405.52160644531,
  7091.57958984375,
  1406.6298828125,
  7089.96435546875,
  1407.73852539062,
  7088.34912109375,
  1408.84729003906,
  7086.73388671875,
  1409.95642089844,
  7085.119140625,
  1411.06579589844,
  7083.50439453125,
  1412.17553710938,
  7081.89013671875,
  1413.28552246094,
  7080.27587890625,
  1414.39575195312,
  7078.66162109375,
  1415.50634765625,
  7077.04736328125,
  1416.6171875,
  7075.43359375,
  1417.72827148438,
  7073.81982421875,
  1418.83959960938,
  7072.20654296875,
  1419.95129394531,
  7070.59326171875,
  1421.06323242188,
  7068.97998046875,
  1422.17541503906,
  7067.36669921875,
  1423.28796386719,
  7065.75390625,
  1424.40075683594,
  7064.14111328125,
  1425.51379394531,
  7062.52880859375,
  1426.62707519531,
  7060.91650390625,
  1427.74072265625,
  7059.30419921875,
  1428.85461425781,
  7057.69189453125,
  1429.96887207031,
  7056.080078125,
  1431.08325195312,
  7054.46875,
  1432.19799804688,
  7052.85693359375,
  1433.31298828125,
  7051.24560546875,
  1434.42834472656,
  7049.63427734375,
  1435.54382324219,
  7048.0234375,
  1436.65966796875,
  7046.41259765625,
  1437.77587890625,
  7044.8017578125,
  1438.89221191406,
  7043.19140625,
  1440.00891113281,
  7041.5810546875,
  1441.12585449219,
  7039.970703125,
  1442.24304199219,
  7038.36083984375,
  1443.36059570312,
  7036.7509765625,
  1444.47839355469,
  7035.14111328125,
  1445.59643554688,
  7033.53173828125,
  1446.71472167969,
  7031.92236328125,
  1447.83325195312,
  7030.3134765625,
  1448.9521484375,
  7028.7041015625,
  1450.0712890625,
  7027.095703125,
  1451.19067382812,
  7025.48681640625,
  1452.31042480469,
  7023.87841796875,
  1453.43041992188,
  7022.27001953125,
  1454.55065917969,
  7020.662109375,
  1455.67114257812,
  7019.05419921875,
  1456.79187011719,
  7017.4462890625,
  1457.91296386719,
  7015.83837890625,
  1459.03430175781,
  7014.23095703125,
  1460.15588378906,
  7012.6240234375,
  1461.27770996094,
  7011.01708984375,
  1462.39978027344,
  7009.41015625,
  1463.52221679688,
  7007.80322265625,
  1464.64489746094,
  7006.19677734375,
  1465.76782226562,
  7004.59033203125,
  1466.89111328125,
  7002.98388671875,
  1468.01452636719,
  7001.3779296875,
  1469.13830566406,
  6999.77197265625,
  1470.26232910156,
  6998.16650390625,
  1471.38659667969,
  6996.56103515625,
  1472.51110839844,
  6994.95556640625,
  1473.63598632812,
  6993.3505859375,
  1474.76110839844,
  6991.74560546875,
  1475.88635253906,
  6990.140625,
  1477.01208496094,
  6988.5361328125,
  1478.13793945312,
  6986.931640625,
  1479.26403808594,
  6985.32763671875,
  1480.39050292969,
  6983.7236328125,
  1481.51721191406,
  6982.11962890625,
  1482.64416503906,
  6980.515625,
  1483.77136230469,
  6978.912109375,
  1484.89880371094,
  6977.30908203125,
  1486.02661132812,
  6975.70556640625,
  1487.15466308594,
  6974.10302734375,
  1488.28283691406,
  6972.5,
  1489.41137695312,
  6970.8974609375,
  1490.54028320312,
  6969.294921875,
  1491.66931152344,
  6967.69287109375,
  1492.79858398438,
  6966.09033203125,
  1493.92822265625,
  6964.48876953125,
  1495.05810546875,
  6962.88671875,
  1496.18823242188,
  6961.28564453125,
  1497.31860351562,
  6959.68408203125,
  1498.44921875,
  6958.0830078125,
  1499.580078125,
  6956.48193359375,
  1500.71130371094,
  6954.880859375,
  1501.8427734375,
  6953.2802734375,
  1502.97436523438,
  6951.68017578125,
  1504.10632324219,
  6950.07958984375,
  1505.23852539062,
  6948.4794921875,
  1506.37109375,
  6946.8798828125,
  1507.50378417969,
  6945.2802734375,
  1508.63671875,
  6943.6806640625,
  1509.77001953125,
  6942.08154296875,
  1510.90356445312,
  6940.48193359375,
  1512.03723144531,
  6938.88330078125,
  1513.17126464844,
  6937.28466796875,
  1514.30554199219,
  6935.68603515625,
  1515.44006347656,
  6934.08740234375,
  1516.57495117188,
  6932.4892578125,
  1517.7099609375,
  6930.89111328125,
  1518.84521484375,
  6929.29345703125,
  1519.98083496094,
  6927.69580078125,
  1521.11669921875,
  6926.09814453125,
  1522.25268554688,
  6924.5009765625,
  1523.38903808594,
  6922.90380859375,
  1524.52563476562,
  6921.30712890625,
  1525.66247558594,
  6919.71044921875,
  1526.79956054688,
  6918.11376953125,
  1527.93701171875,
  6916.517578125,
  1529.07458496094,
  6914.92138671875,
  1530.21240234375,
  6913.32568359375,
  1531.3505859375,
  6911.72998046875,
  1532.48889160156,
  6910.13427734375,
  1533.62756347656,
  6908.5390625,
  1534.76647949219,
  6906.94384765625,
  1535.90551757812,
  6905.3486328125,
  1537.044921875,
  6903.75390625,
  1538.1845703125,
  6902.1591796875,
  1539.32446289062,
  6900.56494140625,
  1540.46459960938,
  6898.970703125,
  1541.60498046875,
  6897.37646484375,
  1542.74560546875,
  6895.78271484375,
  1543.88659667969,
  6894.189453125,
  1545.02770996094,
  6892.595703125,
  1546.16906738281,
  6891.00244140625,
  1547.31079101562,
  6889.40966796875,
  1548.45263671875,
  6887.81640625,
  1549.5947265625,
  6886.22412109375,
  1550.73718261719,
  6884.63134765625,
  1551.87976074219,
  6883.0390625,
  1553.02270507812,
  6881.447265625,
  1554.16589355469,
  6879.85546875,
  1555.30920410156,
  6878.263671875,
  1556.45288085938,
  6876.671875,
  1557.59680175781,
  6875.08056640625,
  1558.74084472656,
  6873.48974609375,
  1559.88525390625,
  6871.89892578125,
  1561.02990722656,
  6870.30810546875,
  1562.1748046875,
  6868.71728515625,
  1563.31994628906,
  6867.12744140625,
  1564.46533203125,
  6865.537109375,
  1565.61083984375,
  6863.947265625,
  1566.75671386719,
  6862.357421875,
  1567.90283203125,
  6860.76806640625,
  1569.04919433594,
  6859.1787109375,
  1570.19580078125,
  6857.58935546875,
  1571.34265136719,
  6856.00048828125,
  1572.48974609375,
  6854.41162109375,
  1573.63708496094,
  6852.8232421875,
  1574.78466796875,
  6851.23486328125,
  1575.93237304688,
  6849.64697265625,
  1577.08044433594,
  6848.05908203125,
  1578.22875976562,
  6846.47119140625,
  1579.37731933594,
  6844.8837890625,
  1580.52612304688,
  6843.29638671875,
  1581.67517089844,
  6841.708984375,
  1582.82446289062,
  6840.1220703125,
  1583.97387695312,
  6838.53564453125,
  1585.12365722656,
  6836.94921875,
  1586.27368164062,
  6835.36279296875,
  1587.42395019531,
  6833.77685546875,
  1588.57434082031,
  6832.19091796875,
  1589.72509765625,
  6830.60498046875,
  1590.87609863281,
  6829.01953125,
  1592.02722167969,
  6827.43408203125,
  1593.1787109375,
  6825.84912109375,
  1594.33032226562,
  6824.26416015625,
  1595.48229980469,
  6822.6796875,
  1596.63439941406,
  6821.09521484375,
  1597.78686523438,
  6819.5107421875,
  1598.939453125,
  6817.9267578125,
  1600.09228515625,
  6816.3427734375,
  1601.24548339844,
  6814.75927734375,
  1602.39880371094,
  6813.17578125,
  1603.55236816406,
  6811.59228515625,
  1604.70617675781,
  6810.00927734375,
  1605.86022949219,
  6808.42626953125,
  1607.01452636719,
  6806.84375,
  1608.16906738281,
  6805.26123046875,
  1609.32385253906,
  6803.67919921875,
  1610.47875976562,
  6802.09716796875,
  1611.63403320312,
  6800.51513671875,
  1612.78955078125,
  6798.93359375,
  1613.94519042969,
  6797.35205078125,
  1615.10119628906,
  6795.77099609375,
  1616.25732421875,
  6794.18994140625,
  1617.41369628906,
  6792.609375,
  1618.5703125,
  6791.02880859375,
  1619.72729492188,
  6789.4482421875,
  1620.88439941406,
  6787.8681640625,
  1622.04162597656,
  6786.2880859375,
  1623.19921875,
  6784.70849609375,
  1624.35705566406,
  6783.12890625,
  1625.51513671875,
  6781.5498046875,
  1626.67333984375,
  6779.970703125,
  1627.83190917969,
  6778.3916015625,
  1628.99060058594,
  6776.81298828125,
  1630.14953613281,
  6775.234375,
  1631.30871582031,
  6773.65625,
  1632.46813964844,
  6772.078125,
  1633.62780761719,
  6770.50048828125,
  1634.78771972656,
  6768.9228515625,
  1635.94787597656,
  6767.34521484375,
  1637.10815429688,
  6765.76806640625,
  1638.26867675781,
  6764.19091796875,
  1639.42956542969,
  6762.6142578125,
  1640.59057617188,
  6761.03759765625,
  1641.75183105469,
  6759.46142578125,
  1642.91333007812,
  6757.88525390625,
  1644.07507324219,
  6756.3095703125,
  1645.23693847656,
  6754.7333984375,
  1646.39916992188,
  6753.158203125,
  1647.5615234375,
  6751.5830078125,
  1648.72412109375,
  6750.0078125,
  1649.88696289062,
  6748.43310546875,
  1651.05004882812,
  6746.8583984375,
  1652.21337890625,
  6745.28369140625,
  1653.376953125,
  6743.70947265625,
  1654.54064941406,
  6742.1357421875,
  1655.70458984375,
  6740.56201171875,
  1656.86889648438,
  6738.98828125,
  1658.03332519531,
  6737.4150390625,
  1659.19787597656,
  6735.841796875,
  1660.36279296875,
  6734.26904296875,
  1661.52795410156,
  6732.6962890625,
  1662.69323730469,
  6731.12353515625,
  1663.85876464844,
  6729.55126953125,
  1665.02453613281,
  6727.9794921875,
  1666.19055175781,
  6726.4072265625,
  1667.35681152344,
  6724.8359375,
  1668.52319335938,
  6723.2646484375,
  1669.68981933594,
  6721.693359375,
  1670.85668945312,
  6720.1220703125,
  1672.02380371094,
  6718.55126953125,
  1673.19116210938,
  6716.98095703125,
  1674.35876464844,
  6715.41064453125,
  1675.52648925781,
  6713.84033203125,
  1676.69445800781,
  6712.2705078125,
  1677.86267089844,
  6710.701171875,
  1679.03112792969,
  6709.13134765625,
  1680.19970703125,
  6707.5625,
  1681.36865234375,
  6705.9931640625,
  1682.53771972656,
  6704.4248046875,
  1683.70703125,
  6702.85595703125,
  1684.87658691406,
  6701.28759765625,
  1686.04626464844,
  6699.7197265625,
  1687.21630859375,
  6698.15185546875,
  1688.38647460938,
  6696.583984375,
  1689.55688476562,
  6695.0166015625,
  1690.72741699219,
  6693.44921875,
  1691.89831542969,
  6691.88232421875,
  1693.0693359375,
  6690.3154296875,
  1694.24060058594,
  6688.7490234375,
  1695.412109375,
  6687.1826171875,
  1696.58374023438,
  6685.61669921875,
  1697.75573730469,
  6684.05078125,
  1698.92785644531,
  6682.48486328125,
  1700.10021972656,
  6680.91943359375,
  1701.27270507812,
  6679.35400390625,
  1702.44555664062,
  6677.7890625,
  1703.61853027344,
  6676.224609375,
  1704.79174804688,
  6674.65966796875,
  1705.96508789062,
  6673.095703125,
  1707.13879394531,
  6671.53125,
  1708.31262207031,
  6669.9677734375,
  1709.48669433594,
  6668.40380859375,
  1710.66088867188,
  6666.84033203125,
  1711.83544921875,
  6665.27734375,
  1713.01013183594,
  6663.71435546875,
  1714.18505859375,
  6662.1513671875,
  1715.36010742188,
  6660.5888671875,
  1716.53540039062,
  6659.02685546875,
  1717.7109375,
  6657.46484375,
  1718.88671875,
  6655.90283203125,
  1720.06274414062,
  6654.34130859375,
  1721.23889160156,
  6652.77978515625,
  1722.41528320312,
  6651.21875,
  1723.59191894531,
  6649.65771484375,
  1724.76867675781,
  6648.0966796875,
  1725.94567871094,
  6646.53662109375,
  1727.12292480469,
  6644.97607421875,
  1728.30041503906,
  6643.416015625,
  1729.47802734375,
  6641.8564453125,
  1730.65588378906,
  6640.296875,
  1731.83386230469,
  6638.7373046875,
  1733.01220703125,
  6637.17822265625,
  1734.19067382812,
  6635.619140625,
  1735.36938476562,
  6634.060546875,
  1736.54821777344,
  6632.50244140625,
  1737.72729492188,
  6630.94384765625,
  1738.90661621094,
  6629.38623046875,
  1740.08618164062,
  6627.828125,
  1741.26586914062,
  6626.27099609375,
  1742.44580078125,
  6624.71337890625,
  1743.6259765625,
  6623.15625,
  1744.80627441406,
  6621.599609375,
  1745.98681640625,
  6620.04296875,
  1747.16760253906,
  6618.48681640625,
  1748.34851074219,
  6616.9306640625,
  1749.52966308594,
  6615.37451171875,
  1750.71105957031,
  6613.81884765625,
  1751.892578125,
  6612.263671875,
  1753.07434082031,
  6610.70849609375,
  1754.25634765625,
  6609.1533203125,
  1755.4384765625,
  6607.5986328125,
  1756.62084960938,
  6606.0439453125,
  1757.80346679688,
  6604.48974609375,
  1758.98620605469,
  6602.93603515625,
  1760.16918945312,
  6601.3818359375,
  1761.35241699219,
  6599.82861328125,
  1762.53576660156,
  6598.27490234375,
  1763.71936035156,
  6596.72216796875,
  1764.90319824219,
  6595.1689453125,
  1766.08715820312,
  6593.61669921875,
  1767.27136230469,
  6592.06396484375,
  1768.45568847656,
  6590.51171875,
  1769.64025878906,
  6588.9599609375,
  1770.82507324219,
  6587.408203125,
  1772.01013183594,
  6585.85693359375,
  1773.1953125,
  6584.3056640625,
  1774.38073730469,
  6582.75439453125,
  1775.56628417969,
  6581.20361328125,
  1776.75207519531,
  6579.6533203125,
  1777.93798828125,
  6578.10302734375,
  1779.12426757812,
  6576.552734375,
  1780.310546875,
  6575.0029296875,
  1781.49719238281,
  6573.45361328125,
  1782.68395996094,
  6571.904296875,
  1783.87097167969,
  6570.35498046875,
  1785.05810546875,
  6568.80615234375,
  1786.24548339844,
  6567.2578125,
  1787.43298339844,
  6565.708984375,
  1788.62084960938,
  6564.1611328125,
  1789.80871582031,
  6562.61328125,
  1790.99694824219,
  6561.0654296875,
  1792.18518066406,
  6559.51806640625,
  1793.37377929688,
  6557.970703125,
  1794.5625,
  6556.423828125,
  1795.75146484375,
  6554.876953125,
  1796.94055175781,
  6553.33056640625,
  1798.1298828125,
  6551.7841796875,
  1799.3193359375,
  6550.23828125,
  1800.50915527344,
  6548.6923828125,
  1801.69897460938,
  6547.14697265625,
  1802.88903808594,
  6545.6015625,
  1804.07934570312,
  6544.056640625,
  1805.26989746094,
  6542.51171875,
  1806.46057128906,
  6540.96728515625,
  1807.6513671875,
  6539.4228515625,
  1808.84240722656,
  6537.87890625,
  1810.03369140625,
  6536.3349609375,
  1811.22509765625,
  6534.79150390625,
  1812.41674804688,
  6533.248046875,
  1813.60852050781,
  6531.705078125,
  1814.80053710938,
  6530.162109375,
  1815.99279785156,
  6528.619140625,
  1817.18518066406,
  6527.0771484375,
  1818.37768554688,
  6525.53466796875,
  1819.57043457031,
  6523.99267578125,
  1820.76342773438,
  6522.451171875,
  1821.95654296875,
  6520.90966796875,
  1823.14990234375,
  6519.36865234375,
  1824.34338378906,
  6517.82763671875,
  1825.537109375,
  6516.287109375,
  1826.73107910156,
  6514.74658203125,
  1827.92517089844,
  6513.2060546875,
  1829.11938476562,
  6511.66650390625,
  1830.31384277344,
  6510.12646484375,
  1831.50854492188,
  6508.5869140625,
  1832.70336914062,
  6507.0478515625,
  1833.89831542969,
  6505.5087890625,
  1835.09350585938,
  6503.97021484375,
  1836.28894042969,
  6502.431640625,
  1837.48449707031,
  6500.89306640625,
  1838.68029785156,
  6499.35546875,
  1839.87622070312,
  6497.8173828125,
  1841.07238769531,
  6496.27978515625,
  1842.26867675781,
  6494.74267578125,
  1843.46520996094,
  6493.20556640625,
  1844.66186523438,
  6491.6689453125,
  1845.85876464844,
  6490.13232421875,
  1847.05578613281,
  6488.59619140625,
  1848.25305175781,
  6487.06005859375,
  1849.45043945312,
  6485.52392578125,
  1850.64807128906,
  6483.98828125,
  1851.84582519531,
  6482.453125,
  1853.04382324219,
  6480.91796875,
  1854.24194335938,
  6479.38330078125,
  1855.44030761719,
  6477.8486328125,
  1856.63879394531,
  6476.314453125,
  1857.83752441406,
  6474.7802734375,
  1859.03637695312,
  6473.24658203125,
  1860.23547363281,
  6471.712890625,
  1861.43469238281,
  6470.1796875,
  1862.63415527344,
  6468.646484375,
  1863.83374023438,
  6467.11376953125,
  1865.03344726562,
  6465.5810546875,
  1866.2333984375,
  6464.048828125,
  1867.43359375,
  6462.5166015625,
  1868.63391113281,
  6460.98486328125,
  1869.83435058594,
  6459.453125,
  1871.03503417969,
  6457.921875,
  1872.23596191406,
  6456.390625,
  1873.43688964844,
  6454.85986328125,
  1874.63818359375,
  6453.3291015625,
  1875.83959960938,
  6451.798828125,
  1877.04113769531,
  6450.2685546875,
  1878.24279785156,
  6448.73876953125,
  1879.44470214844,
  6447.20947265625,
  1880.64685058594,
  6445.68017578125,
  1881.84912109375,
  6444.15087890625,
  1883.05151367188,
  6442.6220703125,
  1884.25415039062,
  6441.09326171875,
  1885.45703125,
  6439.56494140625,
  1886.65991210938,
  6438.037109375,
  1887.86315917969,
  6436.50927734375,
  1889.06640625,
  6434.9814453125,
  1890.26989746094,
  6433.4541015625,
  1891.4736328125,
  6431.92724609375,
  1892.67749023438,
  6430.400390625,
  1893.88146972656,
  6428.87353515625,
  1895.08569335938,
  6427.34765625,
  1896.2900390625,
  6425.8212890625,
  1897.49462890625,
  6424.29541015625,
  1898.69934082031,
  6422.77001953125,
  1899.90417480469,
  6421.24462890625,
  1901.10925292969,
  6419.7197265625,
  1902.314453125,
  6418.19482421875,
  1903.51989746094,
  6416.67041015625,
  1904.72546386719,
  6415.14599609375,
  1905.93127441406,
  6413.6220703125,
  1907.13708496094,
  6412.09814453125,
  1908.34326171875,
  6410.57470703125,
  1909.54943847656,
  6409.05126953125,
  1910.755859375,
  6407.5283203125,
  1911.96252441406,
  6406.00537109375,
  1913.16931152344,
  6404.48291015625,
  1914.37622070312,
  6402.96044921875,
  1915.58337402344,
  6401.4384765625,
  1916.79064941406,
  6399.9169921875,
  1917.998046875,
  6398.3955078125,
  1919.20568847656,
  6396.8740234375,
  1920.41345214844,
  6395.35302734375,
  1921.62145996094,
  6393.83251953125,
  1922.82958984375,
  6392.31201171875,
  1924.03784179688,
  6390.79150390625,
  1925.24633789062,
  6389.271484375,
  1926.45495605469,
  6387.751953125,
  1927.66369628906,
  6386.232421875,
  1928.87268066406,
  6384.71337890625,
  1930.08178710938,
  6383.1943359375,
  1931.29113769531,
  6381.67578125,
  1932.50048828125,
  6380.1572265625,
  1933.71020507812,
  6378.63916015625,
  1934.919921875,
  6377.12109375,
  1936.1298828125,
  6375.603515625,
  1937.34008789062,
  6374.08642578125,
  1938.55029296875,
  6372.56884765625,
  1939.7607421875,
  6371.05224609375,
  1940.97143554688,
  6369.53564453125,
  1942.18212890625,
  6368.01904296875,
  1943.39306640625,
  6366.5029296875,
  1944.60424804688,
  6364.9873046875,
  1945.8154296875,
  6363.4716796875,
  1947.02685546875,
  6361.95654296875,
  1948.23852539062,
  6360.44140625,
  1949.45031738281,
  6358.92626953125,
  1950.66223144531,
  6357.412109375,
  1951.87426757812,
  6355.8974609375,
  1953.08654785156,
  6354.3837890625,
  1954.29895019531,
  6352.86962890625,
  1955.51147460938,
  6351.3564453125,
  1956.72424316406,
  6349.84326171875,
  1957.93713378906,
  6348.330078125,
  1959.15014648438,
  6346.8173828125,
  1960.36340332031,
  6345.3046875,
  1961.57678222656,
  6343.79248046875,
  1962.79028320312,
  6342.28076171875,
  1964.00390625,
  6340.76904296875,
  1965.2177734375,
  6339.2578125,
  1966.43176269531,
  6337.74658203125,
  1967.64599609375,
  6336.2353515625,
  1968.8603515625,
  6334.72509765625,
  1970.07482910156,
  6333.21435546875,
  1971.28942871094,
  6331.70458984375,
  1972.50427246094,
  6330.19482421875,
  1973.71923828125,
  6328.68505859375,
  1974.93432617188,
  6327.17578125,
  1976.14965820312,
  6325.66650390625,
  1977.36499023438,
  6324.15771484375,
  1978.58056640625,
  6322.6494140625,
  1979.79638671875,
  6321.14111328125,
  1981.01232910156,
  6319.6328125,
  1982.22827148438,
  6318.125,
  1983.44458007812,
  6316.61767578125,
  1984.66088867188,
  6315.1103515625,
  1985.87744140625,
  6313.603515625,
  1987.09411621094,
  6312.0966796875,
  1988.31091308594,
  6310.59033203125,
  1989.52795410156,
  6309.083984375,
  1990.7451171875,
  6307.578125,
  1991.96240234375,
  6306.07275390625,
  1993.17980957031,
  6304.5673828125,
  1994.3974609375,
  6303.06201171875,
  1995.615234375,
  6301.55712890625,
  1996.83312988281,
  6300.052734375,
  1998.05114746094,
  6298.54833984375,
  1999.26940917969,
  6297.04443359375,
  2000.48779296875,
  6295.54052734375,
  2001.70629882812,
  6294.037109375,
  2002.92504882812,
  6292.53369140625,
  2004.14379882812,
  6291.03076171875,
  2005.36279296875,
  6289.52783203125,
  2006.58190917969,
  6288.025390625,
  2007.80126953125,
  6286.5234375,
  2009.02062988281,
  6285.021484375,
  2010.240234375,
  6283.52001953125,
  2011.4599609375,
  6282.0185546875,
  2012.67980957031,
  6280.51708984375,
  2013.89990234375,
  6279.0166015625,
  2015.1201171875,
  6277.515625,
  2016.34045410156,
  6276.015625,
  2017.56091308594,
  6274.515625,
  2018.78149414062,
  6273.015625,
  2020.00231933594,
  6271.51611328125,
  2021.22326660156,
  6270.01708984375,
  2022.4443359375,
  6268.51806640625,
  2023.66552734375,
  6267.01904296875,
  2024.88696289062,
  6265.5205078125,
  2026.1083984375,
  6264.0224609375,
  2027.330078125,
  6262.5244140625,
  2028.55187988281,
  6261.02685546875,
  2029.77392578125,
  6259.529296875,
  2030.99597167969,
  6258.0322265625,
  2032.21826171875,
  6256.53564453125,
  2033.44067382812,
  6255.0390625,
  2034.66320800781,
  6253.54248046875,
  2035.88586425781,
  6252.04638671875,
  2037.10876464844,
  6250.55078125,
  2038.33166503906,
  6249.05517578125,
  2039.55480957031,
  6247.56005859375,
  2040.77807617188,
  6246.06494140625,
  2042.00158691406,
  6244.5703125,
  2043.22509765625,
  6243.076171875,
  2044.44885253906,
  6241.58203125,
  2045.67260742188,
  6240.087890625,
  2046.89660644531,
  6238.59423828125,
  2048.12084960938,
  6237.10107421875,
  2049.34497070312,
  6235.60791015625,
  2050.56958007812,
  6234.115234375,
  2051.7939453125,
  6232.62255859375,
  2053.01879882812,
  6231.13037109375,
  2054.24365234375,
  6229.63818359375,
  2055.46850585938,
  6228.146484375,
  2056.69384765625,
  6226.6552734375,
  2057.9189453125,
  6225.1640625,
  2059.14453125,
  6223.67333984375,
  2060.3701171875,
  6222.1826171875,
  2061.595703125,
  6220.69189453125,
  2062.82153320312,
  6219.2021484375,
  2064.04760742188,
  6217.71240234375,
  2065.27368164062,
  6216.22265625,
  2066.5,
  6214.7333984375,
  2067.72631835938,
  6213.244140625,
  2068.95288085938,
  6211.755859375,
  2070.17944335938,
  6210.26708984375,
  2071.40625,
  6208.77880859375,
  2072.63330078125,
  6207.291015625,
  2073.8603515625,
  6205.80322265625,
  2075.08764648438,
  6204.31591796875,
  2076.31494140625,
  6202.8291015625,
  2077.54248046875,
  6201.34228515625,
  2078.77001953125,
  6199.85546875,
  2079.99780273438,
  6198.369140625,
  2081.22583007812,
  6196.88330078125,
  2082.45385742188,
  6195.3974609375,
  2083.68212890625,
  6193.912109375,
  2084.91040039062,
  6192.4267578125,
  2086.13891601562,
  6190.94189453125,
  2087.36743164062,
  6189.45751953125,
  2088.59619140625,
  6187.97314453125,
  2089.8251953125,
  6186.48876953125,
  2091.05419921875,
  6185.00537109375,
  2092.283203125,
  6183.521484375,
  2093.51245117188,
  6182.03857421875,
  2094.74194335938,
  6180.55517578125,
  2095.97143554688,
  6179.07275390625,
  2097.201171875,
  6177.59033203125,
  2098.43090820312,
  6176.10791015625,
  2099.66088867188,
  6174.6259765625,
  2100.89086914062,
  6173.14453125,
  2102.12109375,
  6171.6630859375,
  2103.3515625,
  6170.18212890625,
  2104.58203125,
  6168.701171875,
  2105.81274414062,
  6167.220703125,
  2107.04345703125,
  6165.74072265625,
  2108.27416992188,
  6164.2607421875,
  2109.50537109375,
  6162.78125,
  2110.736328125,
  6161.3017578125,
  2111.9677734375,
  6159.822265625,
  2113.19897460938,
  6158.34375,
  2114.4306640625,
  6156.865234375,
  2115.66235351562,
  6155.38671875,
  2116.89404296875,
  6153.90869140625,
  2118.1259765625,
  6152.43115234375,
  2119.35815429688,
  6150.95361328125,
  2120.59033203125,
  6149.4765625,
  2121.82250976562,
  6147.99951171875,
  2123.05493164062,
  6146.52294921875,
  2124.28759765625,
  6145.04638671875,
  2125.52026367188,
  6143.5703125,
  2126.75317382812,
  6142.0947265625,
  2127.98608398438,
  6140.619140625,
  2129.21899414062,
  6139.14404296875,
  2130.45239257812,
  6137.6689453125,
  2131.685546875,
  6136.1943359375,
  2132.91918945312,
  6134.7197265625,
  2134.15283203125,
  6133.24560546875,
  2135.38647460938,
  6131.77197265625,
  2136.62036132812,
  6130.29833984375,
  2137.85424804688,
  6128.82470703125,
  2139.08837890625,
  6127.35205078125,
  2140.32250976562,
  6125.87939453125,
  2141.55688476562,
  6124.40673828125,
  2142.79150390625,
  6122.9345703125,
  2144.02612304688,
  6121.46240234375,
  2145.2607421875,
  6119.9912109375,
  2146.49560546875,
  6118.51953125,
  2147.73046875,
  6117.048828125,
  2148.96557617188,
  6115.57763671875,
  2150.20092773438,
  6114.107421875,
  2151.43627929688,
  6112.63720703125,
  2152.67163085938,
  6111.1669921875,
  2153.9072265625,
  6109.697265625,
  2155.14306640625,
  6108.22802734375,
  2156.37890625,
  6106.7587890625,
  2157.61474609375,
  6105.2900390625,
  2158.85083007812,
  6103.82177734375,
  2160.08715820312,
  6102.353515625,
  2161.32348632812,
  6100.88525390625,
  2162.56005859375,
  6099.41796875,
  2163.79663085938,
  6097.9501953125,
  2165.033203125,
  6096.4833984375,
  2166.27001953125,
  6095.01611328125,
  2167.50708007812,
  6093.5498046875,
  2168.744140625,
  6092.08349609375,
  2169.98120117188,
  6090.61767578125,
  2171.21850585938,
  6089.15185546875,
  2172.4560546875,
  6087.6865234375,
  2173.69360351562,
  6086.22119140625,
  2174.93115234375,
  6084.75634765625,
  2176.1689453125,
  6083.29150390625,
  2177.40673828125,
  6081.8271484375,
  2178.64477539062,
  6080.36328125,
  2179.88305664062,
  6078.8994140625,
  2181.12133789062,
  6077.43603515625,
  2182.35961914062,
  6075.97265625,
  2183.59814453125,
  6074.509765625,
  2184.83666992188,
  6073.04736328125,
  2186.07543945312,
  6071.5849609375,
  2187.31420898438,
  6070.123046875,
  2188.55322265625,
  6068.6611328125,
  2189.79248046875,
  6067.19970703125,
  2191.03149414062,
  6065.73828125,
  2192.27075195312,
  6064.27734375,
  2193.51025390625,
  6062.81689453125,
  2194.74975585938,
  6061.3564453125,
  2195.98950195312,
  6059.896484375,
  2197.22924804688,
  6058.4365234375,
  2198.46923828125,
  6056.97705078125,
  2199.70922851562,
  6055.51806640625,
  2200.94921875,
  6054.05908203125,
  2202.189453125,
  6052.6005859375,
  2203.42993164062,
  6051.14208984375,
  2204.67041015625,
  6049.68408203125,
  2205.91088867188,
  6048.22607421875,
  2207.15161132812,
  6046.7685546875,
  2208.392578125,
  6045.3115234375,
  2209.63330078125,
  6043.8544921875,
  2210.87451171875,
  6042.39794921875,
  2212.11547851562,
  6040.94140625,
  2213.35693359375,
  6039.4853515625,
  2214.59814453125,
  6038.029296875,
  2215.83959960938,
  6036.57373046875,
  2217.08129882812,
  6035.11865234375,
  2218.32299804688,
  6033.66357421875,
  2219.56494140625,
  6032.208984375,
  2220.80688476562,
  6030.7548828125,
  2222.048828125,
  6029.30078125,
  2223.291015625,
  6027.8466796875,
  2224.533203125,
  6026.39306640625,
  2225.77563476562,
  6024.93994140625,
  2227.01806640625,
  6023.4873046875,
  2228.2607421875,
  6022.03466796875,
  2229.50341796875,
  6020.58203125,
  2230.74633789062,
  6019.1298828125,
  2231.9892578125,
  6017.67822265625,
  2233.23217773438,
  6016.2265625,
  2234.47534179688,
  6014.775390625,
  2235.71850585938,
  6013.32470703125,
  2236.9619140625,
  6011.8740234375,
  2238.20556640625,
  6010.42333984375,
  2239.44897460938,
  6008.97314453125,
  2240.69262695312,
  6007.5234375,
  2241.9365234375,
  6006.07421875,
  2243.18041992188,
  6004.625,
  2244.42431640625,
  6003.17578125,
  2245.66845703125,
  6001.72705078125,
  2246.91284179688,
  6000.27880859375,
  2248.1572265625,
  5998.83056640625,
  2249.40161132812,
  5997.3828125,
  2250.64599609375,
  5995.935546875,
  2251.890625,
  5994.48828125,
  2253.13549804688,
  5993.04150390625,
  2254.38037109375,
  5991.5947265625,
  2255.62524414062,
  5990.1484375,
  2256.87036132812,
  5988.7021484375,
  2258.11547851562,
  5987.25634765625,
  2259.36083984375,
  5985.81103515625,
  2260.60620117188,
  5984.36572265625,
  2261.85180664062,
  5982.9208984375,
  2263.09741210938,
  5981.4765625,
  2264.34301757812,
  5980.0322265625,
  2265.5888671875,
  5978.587890625,
  2266.83471679688,
  5977.14404296875,
  2268.08081054688,
  5975.70068359375,
  2269.32690429688,
  5974.2578125,
  2270.57299804688,
  5972.81494140625,
  2271.8193359375,
  5971.3720703125,
  2273.06591796875,
  5969.9296875,
  2274.31225585938,
  5968.48779296875,
  2275.55908203125,
  5967.0458984375,
  2276.8056640625,
  5965.6044921875,
  2278.05249023438,
  5964.16357421875,
  2279.29956054688,
  5962.72265625,
  2280.54638671875,
  5961.2822265625,
  2281.79370117188,
  5959.841796875,
  2283.04077148438,
  5958.40185546875,
  2284.2880859375,
  5956.96240234375,
  2285.53564453125,
  5955.52294921875,
  2286.783203125,
  5954.08349609375,
  2288.03076171875,
  5952.64501953125,
  2289.27856445312,
  5951.2060546875,
  2290.5263671875,
  5949.76806640625,
  2291.77416992188,
  5948.330078125,
  2293.02221679688,
  5946.892578125,
  2294.2705078125,
  5945.455078125,
  2295.5185546875,
  5944.01806640625,
  2296.76684570312,
  5942.5810546875,
  2298.01538085938,
  5941.14453125,
  2299.26391601562,
  5939.70849609375,
  2300.51245117188,
  5938.2724609375,
  2301.76123046875,
  5936.8369140625,
  2303.01000976562,
  5935.4013671875,
  2304.25903320312,
  5933.966796875,
  2305.50805664062,
  5932.53173828125,
  2306.75708007812,
  5931.09716796875,
  2308.00634765625,
  5929.6630859375,
  2309.25561523438,
  5928.2294921875,
  2310.5048828125,
  5926.7958984375,
  2311.75439453125,
  5925.3623046875,
  2313.00390625,
  5923.92919921875,
  2314.25366210938,
  5922.49658203125,
  2315.50341796875,
  5921.064453125,
  2316.75341796875,
  5919.63232421875,
  2318.00317382812,
  5918.2001953125,
  2319.25341796875,
  5916.76904296875,
  2320.50341796875,
  5915.33740234375,
  2321.75366210938,
  5913.90673828125,
  2323.00415039062,
  5912.47607421875,
  2324.25439453125,
  5911.04541015625,
  2325.50512695312,
  5909.61572265625,
  2326.75561523438,
  5908.185546875,
  2328.00634765625,
  5906.75634765625,
  2329.25708007812,
  5905.3271484375,
  2330.50805664062,
  5903.89794921875,
  2331.75903320312,
  5902.4697265625,
  2333.01025390625,
  5901.041015625,
  2334.26123046875,
  5899.61328125,
  2335.51245117188,
  5898.185546875,
  2336.76391601562,
  5896.7578125,
  2338.01538085938,
  5895.3310546875,
  2339.26684570312,
  5893.90380859375,
  2340.5185546875,
  5892.4775390625,
  2341.77026367188,
  5891.05126953125,
  2343.02197265625,
  5889.625,
  2344.27392578125,
  5888.19970703125,
  2345.52587890625,
  5886.77392578125,
  2346.77807617188,
  5885.34912109375,
  2348.0302734375,
  5883.92431640625,
  2349.28247070312,
  5882.5,
  2350.53491210938,
  5881.07568359375,
  2351.78735351562,
  5879.65185546875,
  2353.03979492188,
  5878.22802734375,
  2354.29248046875,
  5876.8046875,
  2355.54516601562,
  5875.3818359375,
  2356.7978515625,
  5873.958984375,
  2358.05078125,
  5872.53662109375,
  2359.3037109375,
  5871.1142578125,
  2360.55688476562,
  5869.6923828125,
  2361.81005859375,
  5868.27099609375,
  2363.06323242188,
  5866.849609375,
  2364.31640625,
  5865.4287109375,
  2365.56982421875,
  5864.00830078125,
  2366.82348632812,
  5862.587890625,
  2368.07690429688,
  5861.16748046875,
  2369.33056640625,
  5859.748046875,
  2370.58447265625,
  5858.32861328125,
  2371.83813476562,
  5856.9091796875,
  2373.09204101562,
  5855.490234375,
  2374.34619140625,
  5854.07177734375,
  2375.60009765625,
  5852.6533203125,
  2376.8544921875,
  5851.2353515625,
  2378.10864257812,
  5849.81787109375,
  2379.36303710938,
  5848.400390625,
  2380.61743164062,
  5846.98291015625,
  2381.87182617188,
  5845.56640625,
  2383.12646484375,
  5844.14990234375,
  2384.38110351562,
  5842.7333984375,
  2385.63598632812,
  5841.3173828125,
  2386.89086914062,
  5839.90185546875,
  2388.14575195312,
  5838.48681640625,
  2389.40063476562,
  5837.07177734375,
  2390.65576171875,
  5835.65673828125,
  2391.9111328125,
  5834.2421875,
  2393.16625976562,
  5832.828125,
  2394.42163085938,
  5831.41455078125,
  2395.67700195312,
  5830.0009765625,
  2396.9326171875,
  5828.58740234375,
  2398.18823242188,
  5827.1748046875,
  2399.44384765625,
  5825.76171875,
  2400.69946289062,
  5824.349609375,
  2401.95532226562,
  5822.9375,
  2403.21118164062,
  5821.52587890625,
  2404.46728515625,
  5820.1142578125,
  2405.72338867188,
  5818.703125,
  2406.9794921875,
  5817.2919921875,
  2408.23559570312,
  5815.88134765625,
  2409.49194335938,
  5814.47119140625,
  2410.74829101562,
  5813.06103515625,
  2412.0048828125,
  5811.6513671875,
  2413.26147460938,
  5810.2421875,
  2414.51806640625,
  5808.8330078125,
  2415.77465820312,
  5807.42431640625,
  2417.03149414062,
  5806.015625,
  2418.28833007812,
  5804.607421875,
  2419.54541015625,
  5803.19970703125,
  2420.80224609375,
  5801.7919921875,
  2422.05932617188,
  5800.384765625,
  2423.31665039062,
  5798.9775390625,
  2424.57373046875,
  5797.57080078125,
  2425.8310546875,
  5796.16455078125,
  2427.08862304688,
  5794.75830078125,
  2428.34594726562,
  5793.3525390625,
  2429.603515625,
  5791.947265625,
  2430.861328125,
  5790.5419921875,
  2432.11889648438,
  5789.13671875,
  2433.37670898438,
  5787.732421875,
  2434.63452148438,
  5786.328125,
  2435.892578125,
  5784.923828125,
  2437.150390625,
  5783.52001953125,
  2438.40869140625,
  5782.11669921875,
  2439.66674804688,
  5780.71337890625,
  2440.92504882812,
  5779.310546875,
  2442.18334960938,
  5777.908203125,
  2443.44165039062,
  5776.505859375,
  2444.7001953125,
  5775.10400390625,
  2445.95874023438,
  5773.70263671875,
  2447.21728515625,
  5772.30126953125,
  2448.47583007812,
  5770.89990234375,
  2449.73461914062,
  5769.49951171875,
  2450.99340820312,
  5768.0986328125,
  2452.25244140625,
  5766.69873046875,
  2453.51123046875,
  5765.298828125,
  2454.77026367188,
  5763.8994140625,
  2456.02954101562,
  5762.5,
  2457.28857421875,
  5761.10107421875,
  2458.5478515625,
  5759.70263671875,
  2459.80712890625,
  5758.30419921875,
  2461.06665039062,
  5756.90625,
  2462.326171875,
  5755.50830078125,
  2463.58569335938,
  5754.11083984375,
  2464.84521484375,
  5752.7138671875,
  2466.10498046875,
  5751.31689453125,
  2467.36474609375,
  5749.92041015625,
  2468.62451171875,
  5748.52392578125,
  2469.88427734375,
  5747.12841796875,
  2471.14428710938,
  5745.732421875,
  2472.404296875,
  5744.33740234375,
  2473.66455078125,
  5742.9423828125,
  2474.92456054688,
  5741.54736328125,
  2476.18481445312,
  5740.15283203125,
  2477.44506835938,
  5738.7587890625,
  2478.70556640625,
  5737.365234375,
  2479.96606445312,
  5735.9716796875,
  2481.2265625,
  5734.578125,
  2482.48706054688,
  5733.185546875,
  2483.74780273438,
  5731.79296875,
  2485.00854492188,
  5730.400390625,
  2486.26928710938,
  5729.00830078125,
  2487.53002929688,
  5727.61669921875,
  2488.791015625,
  5726.22509765625,
  2490.05200195312,
  5724.833984375,
  2491.31298828125,
  5723.443359375,
  2492.57421875,
  5722.052734375,
  2493.83520507812,
  5720.66259765625,
  2495.09643554688,
  5719.2724609375,
  2496.35791015625,
  5717.8828125,
  2497.619140625,
  5716.49365234375,
  2498.88061523438,
  5715.1044921875,
  2500.14208984375,
  5713.7158203125,
  2501.40380859375,
  5712.32763671875,
  2502.66528320312,
  5710.939453125,
  2503.92700195312,
  5709.5517578125,
  2505.18896484375,
  5708.1640625,
  2506.45068359375,
  5706.77685546875,
  2507.71264648438,
  5705.39013671875,
  2508.974609375,
  5704.00341796875,
  2510.23657226562,
  5702.6171875,
  2511.49853515625,
  5701.23095703125,
  2512.7607421875,
  5699.84521484375,
  2514.02294921875,
  5698.4599609375,
  2515.28540039062,
  5697.07470703125,
  2516.54760742188,
  5695.68994140625,
  2517.81005859375,
  5694.3056640625,
  2519.07250976562,
  5692.92138671875,
  2520.3349609375,
  5691.53759765625,
  2521.59765625,
  5690.15380859375,
  2522.8603515625,
  5688.77099609375,
  2524.123046875,
  5687.3876953125,
  2525.3857421875,
  5686.0048828125,
  2526.6484375,
  5684.62255859375,
  2527.91137695312,
  5683.24072265625,
  2529.17431640625,
  5681.85888671875,
  2530.4375,
  5680.4775390625,
  2531.70043945312,
  5679.09619140625,
  2532.96362304688,
  5677.71533203125,
  2534.22680664062,
  5676.3349609375,
  2535.48999023438,
  5674.95458984375,
  2536.75341796875,
  5673.57470703125,
  2538.01684570312,
  5672.1953125,
  2539.2802734375,
  5670.81591796875,
  2540.54370117188,
  5669.4365234375,
  2541.80712890625,
  5668.05810546875,
  2543.07080078125,
  5666.6796875,
  2544.33447265625,
  5665.30126953125,
  2545.59814453125,
  5663.923828125,
  2546.86206054688,
  5662.5458984375,
  2548.1259765625,
  5661.1689453125,
  2549.3896484375,
  5659.7919921875,
  2550.65380859375,
  5658.41552734375,
  2551.91772460938,
  5657.0390625,
  2553.18188476562,
  5655.6630859375,
  2554.44604492188,
  5654.28759765625,
  2555.71020507812,
  5652.912109375,
  2556.97436523438,
  5651.537109375,
  2558.23876953125,
  5650.162109375,
  2559.5029296875,
  5648.78759765625,
  2560.76733398438,
  5647.41357421875,
  2562.03198242188,
  5646.03955078125,
  2563.29638671875,
  5644.666015625,
  2564.56103515625,
  5643.29296875,
  2565.82568359375,
  5641.919921875,
  2567.09033203125,
  5640.54736328125,
  2568.35498046875,
  5639.1748046875,
  2569.61987304688,
  5637.802734375,
  2570.884765625,
  5636.43115234375,
  2572.14965820312,
  5635.0595703125,
  2573.41455078125,
  5633.6884765625,
  2574.6796875,
  5632.31787109375,
  2575.94458007812,
  5630.947265625,
  2577.20971679688,
  5629.5771484375,
  2578.47485351562,
  5628.20703125,
  2579.740234375,
  5626.83740234375,
  2581.00537109375,
  5625.46826171875,
  2582.27075195312,
  5624.09912109375,
  2583.5361328125,
  5622.73046875,
  2584.80151367188,
  5621.3623046875,
  2586.06713867188,
  5619.994140625,
  2587.33251953125,
  5618.62646484375,
  2588.59814453125,
  5617.2587890625,
  2589.86376953125,
  5615.8916015625,
  2591.12963867188,
  5614.52490234375,
  2592.39526367188,
  5613.158203125,
  2593.6611328125,
  5611.7919921875,
  2594.92700195312,
  5610.42578125,
  2596.19287109375,
  5609.060546875,
  2597.45874023438,
  5607.69482421875,
  2598.72485351562,
  5606.330078125,
  2599.99096679688,
  5604.96533203125,
  2601.25708007812,
  5603.6005859375,
  2602.52319335938,
  5602.23681640625,
  2603.78930664062,
  5600.873046875,
  2605.0556640625,
  5599.50927734375,
  2606.32177734375,
  5598.14599609375,
  2607.58813476562,
  5596.783203125,
  2608.85473632812,
  5595.4208984375,
  2610.12109375,
  5594.05859375,
  2611.3876953125,
  5592.6962890625,
  2612.65405273438,
  5591.3349609375,
  2613.92065429688,
  5589.9736328125,
  2615.18725585938,
  5588.6123046875,
  2616.4541015625,
  5587.25146484375,
  2617.720703125,
  5585.89111328125,
  2618.98754882812,
  5584.53125,
  2620.25439453125,
  5583.17138671875,
  2621.52124023438,
  5581.8115234375,
  2622.7880859375,
  5580.45263671875,
  2624.05517578125,
  5579.09375,
  2625.322265625,
  5577.73486328125,
  2626.58935546875,
  5576.37646484375,
  2627.8564453125,
  5575.0185546875,
  2629.12353515625,
  5573.6611328125,
  2630.390625,
  5572.3037109375,
  2631.65795898438,
  5570.9462890625,
  2632.92529296875,
  5569.58984375,
  2634.19262695312,
  5568.2333984375,
  2635.4599609375,
  5566.876953125,
  2636.72729492188,
  5565.52099609375,
  2637.99487304688,
  5564.16552734375,
  2639.26245117188,
  5562.810546875,
  2640.53002929688,
  5561.45556640625,
  2641.79760742188,
  5560.10107421875,
  2643.06518554688,
  5558.74658203125,
  2644.3330078125,
  5557.392578125,
  2645.6005859375,
  5556.03857421875,
  2646.86840820312,
  5554.685546875,
  2648.13623046875,
  5553.33251953125,
  2649.40405273438,
  5551.9794921875,
  2650.67211914062,
  5550.626953125,
  2651.93994140625,
  5549.27490234375,
  2653.2080078125,
  5547.9228515625,
  2654.47607421875,
  5546.5712890625,
  2655.744140625,
  5545.22021484375,
  2657.01220703125,
  5543.869140625,
  2658.2802734375,
  5542.5185546875,
  2659.54858398438,
  5541.16845703125,
  2660.81689453125,
  5539.818359375,
  2662.0849609375,
  5538.46875,
  2663.353515625,
  5537.119140625,
  2664.62182617188,
  5535.77001953125,
  2665.89013671875,
  5534.42138671875,
  2667.15869140625,
  5533.07275390625,
  2668.42700195312,
  5531.724609375,
  2669.69555664062,
  5530.37646484375,
  2670.96411132812,
  5529.029296875,
  2672.23291015625,
  5527.681640625,
  2673.50146484375,
  5526.3349609375,
  2674.77026367188,
  5524.98828125,
  2676.03881835938,
  5523.64208984375,
  2677.3076171875,
  5522.2958984375,
  2678.57641601562,
  5520.9501953125,
  2679.84521484375,
  5519.6044921875,
  2681.1142578125,
  5518.259765625,
  2682.38305664062,
  5516.9150390625,
  2683.65209960938,
  5515.5703125,
  2684.92114257812,
  5514.22607421875,
  2686.19018554688,
  5512.88232421875,
  2687.45922851562,
  5511.53857421875,
  2688.72827148438,
  5510.1953125,
  2689.99731445312,
  5508.8525390625,
  2691.2666015625,
  5507.509765625,
  2692.53588867188,
  5506.16748046875,
  2693.80517578125,
  5504.82568359375,
  2695.07446289062,
  5503.48388671875,
  2696.34375,
  5502.14208984375,
  2697.61303710938,
  5500.80126953125,
  2698.88256835938,
  5499.46044921875,
  2700.15185546875,
  5498.1201171875,
  2701.42138671875,
  5496.77978515625,
  2702.69091796875,
  5495.43994140625,
  2703.96044921875,
  5494.10009765625,
  2705.22998046875,
  5492.76123046875,
  2706.49975585938,
  5491.421875,
  2707.76928710938,
  5490.08349609375,
  2709.0390625,
  5488.7451171875,
  2710.30859375,
  5487.4072265625,
  2711.57836914062,
  5486.0693359375,
  2712.84814453125,
  5484.73193359375,
  2714.1181640625,
  5483.39501953125,
  2715.38793945312,
  5482.05810546875,
  2716.65771484375,
  5480.7216796875,
  2717.927734375,
  5479.38525390625,
  2719.19775390625,
  5478.04931640625,
  2720.4677734375,
  5476.7138671875,
  2721.73779296875,
  5475.37890625,
  2723.0078125,
  5474.0439453125,
  2724.27783203125,
  5472.708984375,
  2725.5478515625,
  5471.375,
  2726.81811523438,
  5470.041015625,
  2728.08837890625,
  5468.70703125,
  2729.3583984375,
  5467.37353515625,
  2730.62866210938,
  5466.04052734375,
  2731.89892578125,
  5464.7080078125,
  2733.16943359375,
  5463.37548828125,
  2734.43969726562,
  5462.04296875,
  2735.7099609375,
  5460.71142578125,
  2736.98046875,
  5459.3798828125,
  2738.2509765625,
  5458.04833984375,
  2739.52124023438,
  5456.7177734375,
  2740.79174804688,
  5455.38720703125,
  2742.06225585938,
  5454.056640625,
  2743.3330078125,
  5452.7265625,
  2744.603515625,
  5451.39697265625,
  2745.8740234375,
  5450.0673828125,
  2747.14477539062,
  5448.73828125,
  2748.41552734375,
  5447.40966796875,
  2749.68603515625,
  5446.0810546875,
  2750.95678710938,
  5444.7529296875,
  2752.2275390625,
  5443.42529296875,
  2753.49829101562,
  5442.09765625,
  2754.76928710938,
  5440.7705078125,
  2756.0400390625,
  5439.443359375,
  2757.31103515625,
  5438.1171875,
  2758.58178710938,
  5436.79052734375,
  2759.85278320312,
  5435.46484375,
  2761.12377929688,
  5434.13916015625,
  2762.39477539062,
  5432.8134765625,
  2763.66577148438,
  5431.48876953125,
  2764.93676757812,
  5430.1640625,
  2766.20776367188,
  5428.83935546875,
  2767.47900390625,
  5427.51513671875,
  2768.75,
  5426.19140625,
  2770.02124023438,
  5424.8681640625,
  2771.29223632812,
  5423.544921875,
  2772.5634765625,
  5422.2216796875,
  2773.83471679688,
  5420.8994140625,
  2775.10595703125,
  5419.5771484375,
  2776.37719726562,
  5418.2548828125,
  2777.6484375,
  5416.93310546875,
  2778.919921875,
  5415.61181640625,
  2780.19116210938,
  5414.291015625,
  2781.46264648438,
  5412.97021484375,
  2782.73388671875,
  5411.64990234375,
  2784.00537109375,
  5410.32958984375,
  2785.27685546875,
  5409.009765625,
  2786.54833984375,
  5407.6904296875,
  2787.81982421875,
  5406.37109375,
  2789.09130859375,
  5405.05224609375,
  2790.36279296875,
  5403.73388671875,
  2791.63452148438,
  5402.41552734375,
  2792.90600585938,
  5401.09765625,
  2794.177734375,
  5399.77978515625,
  2795.44921875,
  5398.46240234375,
  2796.72094726562,
  5397.1455078125,
  2797.99267578125,
  5395.8291015625,
  2799.26440429688,
  5394.5126953125,
  2800.5361328125,
  5393.1962890625,
  2801.80786132812,
  5391.880859375,
  2803.07958984375,
  5390.56494140625,
  2804.35131835938,
  5389.25,
  2805.623046875,
  5387.93505859375,
  2806.89501953125,
  5386.62060546875,
  2808.16674804688,
  5385.306640625,
  2809.43872070312,
  5383.99267578125,
  2810.71069335938,
  5382.6787109375,
  2811.982421875,
  5381.36572265625,
  2813.25439453125,
  5380.052734375,
  2814.5263671875,
  5378.73974609375,
  2815.79833984375,
  5377.427734375,
  2817.0703125,
  5376.11572265625,
  2818.34228515625,
  5374.8037109375,
  2819.61450195312,
  5373.4921875,
  2820.88647460938,
  5372.18115234375,
  2822.15844726562,
  5370.8701171875,
  2823.4306640625,
  5369.56005859375,
  2824.70288085938,
  5368.24951171875,
  2825.97485351562,
  5366.93994140625,
  2827.2470703125,
  5365.63037109375,
  2828.51928710938,
  5364.32080078125,
  2829.79150390625,
  5363.01171875,
  2831.06372070312,
  5361.703125,
  2832.3359375,
  5360.39501953125,
  2833.60815429688,
  5359.0869140625,
  2834.88037109375,
  5357.779296875,
  2836.15258789062,
  5356.4716796875,
  2837.4248046875,
  5355.16455078125,
  2838.697265625,
  5353.85791015625,
  2839.96948242188,
  5352.55126953125,
  2841.24194335938,
  5351.2451171875,
  2842.51416015625,
  5349.939453125,
  2843.78662109375,
  5348.6337890625,
  2845.05908203125,
  5347.32861328125,
  2846.33154296875,
  5346.02392578125,
  2847.60400390625,
  5344.71923828125,
  2848.87646484375,
  5343.4150390625,
  2850.14892578125,
  5342.11083984375,
  2851.42138671875,
  5340.80712890625,
  2852.69384765625,
  5339.50390625,
  2853.96630859375,
  5338.20068359375,
  2855.23876953125,
  5336.89794921875,
  2856.51147460938,
  5335.595703125,
  2857.78393554688,
  5334.29345703125,
  2859.05639648438,
  5332.99169921875,
  2860.3291015625,
  5331.68994140625,
  2861.6015625,
  5330.388671875,
  2862.87426757812,
  5329.087890625,
  2864.14697265625,
  5327.787109375,
  2865.41943359375,
  5326.4873046875,
  2866.69213867188,
  5325.18701171875,
  2867.96484375,
  5323.8876953125,
  2869.23754882812,
  5322.587890625,
  2870.51025390625,
  5321.2890625,
  2871.78295898438,
  5319.990234375,
  2873.0556640625,
  5318.69189453125,
  2874.32836914062,
  5317.39404296875,
  2875.60107421875,
  5316.09619140625,
  2876.87377929688,
  5314.798828125,
  2878.14672851562,
  5313.50146484375,
  2879.41943359375,
  5312.20458984375,
  2880.69213867188,
  5310.908203125,
  2881.96508789062,
  5309.61181640625,
  2883.23779296875,
  5308.31591796875,
  2884.5107421875,
  5307.02001953125,
  2885.78344726562,
  5305.72509765625,
  2887.05639648438,
  5304.43017578125,
  2888.32934570312,
  5303.13525390625,
  2889.60205078125,
  5301.8408203125,
  2890.875,
  5300.546875,
  2892.14794921875,
  5299.2529296875,
  2893.4208984375,
  5297.95947265625,
  2894.69360351562,
  5296.66650390625,
  2895.96655273438,
  5295.37353515625,
  2897.23950195312,
  5294.0810546875,
  2898.51245117188,
  5292.7890625,
  2899.78540039062,
  5291.4970703125,
  2901.05834960938,
  5290.20556640625,
  2902.33129882812,
  5288.9140625,
  2903.60424804688,
  5287.62353515625,
  2904.87744140625,
  5286.33251953125,
  2906.150390625,
  5285.04248046875,
  2907.42333984375,
  5283.75244140625,
  2908.6962890625,
  5282.46240234375,
  2909.96948242188,
  5281.17333984375,
  2911.24243164062,
  5279.88427734375,
  2912.51538085938,
  5278.59521484375,
  2913.78857421875,
  5277.306640625,
  2915.0615234375,
  5276.0185546875,
  2916.33471679688,
  5274.73095703125,
  2917.60766601562,
  5273.443359375,
  2918.880859375,
  5272.15625,
  2920.15380859375,
  5270.869140625,
  2921.42700195312,
  5269.58251953125,
  2922.69995117188,
  5268.29638671875,
  2923.97314453125,
  5267.01025390625,
  2925.24633789062,
  5265.724609375,
  2926.51928710938,
  5264.439453125,
  2927.79248046875,
  5263.154296875,
  2929.06567382812,
  5261.86962890625,
  2930.3388671875,
  5260.5849609375,
  2931.61181640625,
  5259.30078125,
  2932.88500976562,
  5258.01708984375,
  2934.158203125,
  5256.7333984375,
  2935.43139648438,
  5255.45068359375,
  2936.70458984375,
  5254.16748046875,
  2937.97778320312,
  5252.884765625,
  2939.2509765625,
  5251.6025390625,
  2940.52392578125,
  5250.32080078125,
  2941.79711914062,
  5249.0390625,
  2943.0703125,
  5247.7578125,
  2944.34350585938,
  5246.47705078125,
  2945.61669921875,
  5245.1962890625,
  2946.88989257812,
  5243.91552734375,
  2948.1630859375,
  5242.6357421875,
  2949.43627929688,
  5241.35595703125,
  2950.70947265625,
  5240.07666015625,
  2951.98291015625,
  5238.79736328125,
  2953.25610351562,
  5237.5185546875,
  2954.529296875,
  5236.23974609375,
  2955.80249023438,
  5234.9619140625,
  2957.07568359375,
  5233.68408203125,
  2958.34887695312,
  5232.40625,
  2959.6220703125,
  5231.12890625,
  2960.89526367188,
  5229.85205078125,
  2962.16845703125,
  5228.5751953125,
  2963.44189453125,
  5227.298828125,
  2964.71508789062,
  5226.02294921875,
  2965.98828125,
  5224.7470703125,
  2967.26147460938,
  5223.4716796875,
  2968.53466796875,
  5222.19677734375,
  2969.80786132812,
  5220.921875,
  2971.08129882812,
  5219.6474609375,
  2972.3544921875,
  5218.373046875,
  2973.62768554688,
  5217.099609375,
  2974.90087890625,
  5215.82568359375,
  2976.17407226562
]);

// src/math.ts
var EPSILON = 1e-7;
var f32View = new Float32Array(1);
var u32View = new Uint32Array(f32View.buffer);
function f32(value) {
  return Math.fround(value);
}
function f32Bits(value) {
  f32View[0] = value;
  return u32View[0];
}
function roundToNearestEven(value) {
  const base = Math.floor(value);
  const frac = value - base;
  if (frac > 0.5) {
    return base + 1;
  }
  if (frac < 0.5) {
    return base;
  }
  return (base & 1) === 0 ? base : base + 1;
}
function toS16(value) {
  const v = Math.trunc(value);
  const wrapped = (v + 32768 & 65535) - 32768;
  return wrapped;
}
function sinS16(angle) {
  const a = angle & 65535;
  let index = a & 16383;
  if (a & 16384) {
    index = 16384 - index;
  }
  const result = SIN_TABLE[index];
  return a & 32768 ? -result : result;
}
function cosS16(angle) {
  return sinS16(angle + 16384 & 65535);
}
function atanIndex(x) {
  const bits2 = f32Bits(x);
  let r5 = bits2 & 8388607;
  r5 |= 8388608;
  const exp = bits2 >>> 23 & 255;
  if (exp <= 103) {
    return 0;
  }
  let r4 = 135 - exp & 4294967295;
  if ((r4 & ~31) === 0) {
    r4 |= 32;
  }
  const shift = r4 & 31;
  const shifted = r5 >>> shift;
  const offset = shifted & 32760;
  return offset >>> 3;
}
function atanS16(value) {
  if (value === 0) {
    return 0;
  }
  let sign = 1;
  let x = value;
  if (x < 0) {
    sign = -1;
    x = -x;
  }
  if (x === 1) {
    return sign * 8192;
  }
  let invert = false;
  if (x > 1) {
    x = 1 / x;
    invert = true;
  }
  x = f32(x);
  const index = atanIndex(x);
  const slope = ATAN_TABLE[index * 2];
  const intercept = ATAN_TABLE[index * 2 + 1];
  const angle = f32(f32(x * slope) + intercept);
  let result = roundToNearestEven(angle);
  if (invert) {
    result = 16384 - result;
  }
  return result * sign;
}
function atan2S16(y, x) {
  const yy = f32(y);
  const xx = f32(x);
  if (yy === 0 && xx === 0) {
    return 0;
  }
  const ay = Math.abs(yy);
  const ax = Math.abs(xx);
  let angle;
  if (ay === ax) {
    angle = ay === 0 ? 0 : 8192;
  } else if (ay > ax) {
    angle = atanS16(ax / ay);
    angle = 16384 - angle;
  } else {
    angle = atanS16(ay / ax);
  }
  if (xx < 0) {
    if (yy >= 0) {
      angle = 32768 - angle;
    } else {
      angle = angle - 32768;
    }
  } else if (yy < 0) {
    angle = -angle;
  }
  return toS16(angle);
}
function atan2S16Safe(y, x, eps = EPSILON) {
  if (Math.abs(y) + Math.abs(x) <= eps) {
    return 0;
  }
  return atan2S16(y, x);
}
function sumSq2(x, y) {
  return x * x + y * y;
}
function sumSq3(x, y, z) {
  return x * x + y * y + z * z;
}
function sqrt(value) {
  const v = f32(value);
  if (Number.isNaN(v)) {
    return NaN;
  }
  if (v <= 0) {
    return 0;
  }
  if (!Number.isFinite(v)) {
    return v;
  }
  const inv = rsqrtSmb1(v);
  return f32(v * inv);
}
function rsqrt(value) {
  const v = f32(value);
  if (Number.isNaN(v)) {
    return NaN;
  }
  if (v <= 0) {
    return Infinity;
  }
  if (!Number.isFinite(v)) {
    return 0;
  }
  return rsqrtSmb1(v);
}
function rsqrtSmb1(value) {
  const v = f32(value);
  let x = f32(1 / Math.sqrt(v));
  const half = f32(0.5);
  const onePointFive = f32(1.5);
  for (let i = 0; i < 3; i += 1) {
    const xx = f32(x * x);
    const term = f32(onePointFive - f32(half * f32(v * xx)));
    x = f32(x * term);
  }
  return x;
}
function floor(value) {
  return Math.floor(value);
}
function vecDot(a, b) {
  return a.x * b.x + a.y * b.y + a.z * b.z;
}
function vecDotNormalized(a, b) {
  const aLenSq = sumSq3(a.x, a.y, a.z);
  const bLenSq = sumSq3(b.x, b.y, b.z);
  if (aLenSq <= EPSILON || bLenSq <= EPSILON) {
    return 0;
  }
  return (a.x * b.x + a.y * b.y + a.z * b.z) * rsqrt(aLenSq * bLenSq);
}
function vecLen(a) {
  return sqrt(sumSq3(a.x, a.y, a.z));
}
function vecNormalizeLen(a) {
  const lenSq = sumSq3(a.x, a.y, a.z);
  if (lenSq <= EPSILON) {
    return 0;
  }
  const inv = rsqrt(lenSq);
  a.x *= inv;
  a.y *= inv;
  a.z *= inv;
  return 1 / inv;
}
function vecSetLen(out, vec, length) {
  const lenSq = sumSq3(vec.x, vec.y, vec.z);
  if (lenSq <= EPSILON) {
    out.x = 0;
    out.y = 0;
    out.z = 0;
    return 0;
  }
  const inv = rsqrt(lenSq);
  out.x = vec.x * inv * length;
  out.y = vec.y * inv * length;
  out.z = vec.z * inv * length;
  return length;
}
function vecCross(a, b, out) {
  const x = a.y * b.z - a.z * b.y;
  const y = a.z * b.x - a.x * b.z;
  const z = a.x * b.y - a.y * b.x;
  out.x = x;
  out.y = y;
  out.z = z;
}
function vecDistance(a, b) {
  return sqrt(sumSq3(a.x - b.x, a.y - b.y, a.z - b.z));
}
function quatFromAxisAngle(axis, angleS16, out) {
  const half = angleS16 >> 1;
  const lenSq = sumSq3(axis.x, axis.y, axis.z);
  if (lenSq < EPSILON) {
    out.x = 0;
    out.y = 0;
    out.z = 0;
    out.w = 1;
    return;
  }
  const inv = rsqrt(lenSq) * sinS16(half);
  out.x = axis.x * inv;
  out.y = axis.y * inv;
  out.z = axis.z * inv;
  out.w = cosS16(half);
}
function quatNormalize(q) {
  const lenSq = q.x * q.x + q.y * q.y + q.z * q.z + q.w * q.w;
  if (lenSq <= EPSILON) {
    q.x = 0;
    q.y = 0;
    q.z = 0;
    q.w = 1;
    return;
  }
  const inv = rsqrt(lenSq);
  q.x *= inv;
  q.y *= inv;
  q.z *= inv;
  q.w *= inv;
}
function quatMul(out, a, b) {
  const ax = a.x;
  const ay = a.y;
  const az = a.z;
  const aw = a.w;
  const bx = b.x;
  const by = b.y;
  const bz = b.z;
  const bw = b.w;
  out.x = aw * bx + ax * bw + ay * bz - az * by;
  out.y = aw * by - ax * bz + ay * bw + az * bx;
  out.z = aw * bz + ax * by - ay * bx + az * bw;
  out.w = aw * bw - ax * bx - ay * by - az * bz;
}
function quatFromDirs(out, from, to) {
  const fromLenSq = sumSq3(from.x, from.y, from.z);
  const toLenSq = sumSq3(to.x, to.y, to.z);
  if (fromLenSq <= EPSILON || toLenSq <= EPSILON) {
    out.x = 0;
    out.y = 0;
    out.z = 0;
    out.w = 1;
    return;
  }
  const invFrom = rsqrt(fromLenSq);
  const invTo = rsqrt(toLenSq);
  const fx = from.x * invFrom;
  const fy = from.y * invFrom;
  const fz = from.z * invFrom;
  const tx = to.x * invTo;
  const ty = to.y * invTo;
  const tz = to.z * invTo;
  const dot = fx * tx + fy * ty + fz * tz;
  if (dot < -0.999999) {
    let ax = 0;
    let ay = 1;
    let az = 0;
    if (Math.abs(fx) < 0.1 && Math.abs(fz) < 0.1) {
      ax = 1;
      ay = 0;
      az = 0;
    }
    const cx2 = fy * az - fz * ay;
    const cy2 = fz * ax - fx * az;
    const cz2 = fx * ay - fy * ax;
    const axisLenSq = sumSq3(cx2, cy2, cz2);
    if (axisLenSq <= EPSILON) {
      out.x = 0;
      out.y = 0;
      out.z = 0;
      out.w = 1;
      return;
    }
    const invAxis = rsqrt(axisLenSq);
    out.x = cx2 * invAxis;
    out.y = cy2 * invAxis;
    out.z = cz2 * invAxis;
    out.w = 0;
    return;
  }
  const cx = fy * tz - fz * ty;
  const cy = fz * tx - fx * tz;
  const cz = fx * ty - fy * tx;
  out.x = cx;
  out.y = cy;
  out.z = cz;
  out.w = 1 + dot;
  quatNormalize(out);
}
var MatrixStack = class {
  constructor() {
    this.mtxA = new Float32Array(12);
    this.mtxB = new Float32Array(12);
    this.stack = [];
    this.stackTop = 0;
    this.tmpForward = { x: 0, y: 0, z: 0 };
    this.tmpUp = { x: 0, y: 0, z: 0 };
    this.fromIdentity();
  }
  fromIdentity() {
    const m = this.mtxA;
    m[0] = 1;
    m[1] = 0;
    m[2] = 0;
    m[3] = 0;
    m[4] = 0;
    m[5] = 1;
    m[6] = 0;
    m[7] = 0;
    m[8] = 0;
    m[9] = 0;
    m[10] = 1;
    m[11] = 0;
  }
  fromMtx(src) {
    this.mtxA.set(src);
  }
  toMtx(dest) {
    dest.set(this.mtxA);
  }
  fromTranslate(vec) {
    this.fromTranslateXYZ(vec.x, vec.y, vec.z);
  }
  fromTranslateXYZ(x, y, z) {
    const m = this.mtxA;
    m[0] = 1;
    m[1] = 0;
    m[2] = 0;
    m[3] = x;
    m[4] = 0;
    m[5] = 1;
    m[6] = 0;
    m[7] = y;
    m[8] = 0;
    m[9] = 0;
    m[10] = 1;
    m[11] = z;
  }
  fromRotateX(angle) {
    const s = sinS16(angle);
    const c = cosS16(angle);
    const m = this.mtxA;
    m[0] = 1;
    m[1] = 0;
    m[2] = 0;
    m[3] = 0;
    m[4] = 0;
    m[5] = c;
    m[6] = -s;
    m[7] = 0;
    m[8] = 0;
    m[9] = s;
    m[10] = c;
    m[11] = 0;
  }
  fromRotateY(angle) {
    const s = sinS16(angle);
    const c = cosS16(angle);
    const m = this.mtxA;
    m[0] = c;
    m[1] = 0;
    m[2] = s;
    m[3] = 0;
    m[4] = 0;
    m[5] = 1;
    m[6] = 0;
    m[7] = 0;
    m[8] = -s;
    m[9] = 0;
    m[10] = c;
    m[11] = 0;
  }
  fromRotateZ(angle) {
    const s = sinS16(angle);
    const c = cosS16(angle);
    const m = this.mtxA;
    m[0] = c;
    m[1] = -s;
    m[2] = 0;
    m[3] = 0;
    m[4] = s;
    m[5] = c;
    m[6] = 0;
    m[7] = 0;
    m[8] = 0;
    m[9] = 0;
    m[10] = 1;
    m[11] = 0;
  }
  rotateX(angle) {
    const s = sinS16(angle);
    const c = cosS16(angle);
    const m = this.mtxA;
    const a0 = m[1];
    const a1 = m[2];
    const b0 = m[5];
    const b1 = m[6];
    const c0 = m[9];
    const c1 = m[10];
    m[1] = a0 * c + a1 * s;
    m[2] = a0 * -s + a1 * c;
    m[5] = b0 * c + b1 * s;
    m[6] = b0 * -s + b1 * c;
    m[9] = c0 * c + c1 * s;
    m[10] = c0 * -s + c1 * c;
  }
  rotateY(angle) {
    const s = sinS16(angle);
    const c = cosS16(angle);
    const m = this.mtxA;
    const a0 = m[0];
    const a1 = m[2];
    const b0 = m[4];
    const b1 = m[6];
    const c0 = m[8];
    const c1 = m[10];
    m[0] = a0 * c + a1 * -s;
    m[2] = a0 * s + a1 * c;
    m[4] = b0 * c + b1 * -s;
    m[6] = b0 * s + b1 * c;
    m[8] = c0 * c + c1 * -s;
    m[10] = c0 * s + c1 * c;
  }
  rotateZ(angle) {
    const s = sinS16(angle);
    const c = cosS16(angle);
    const m = this.mtxA;
    const a0 = m[0];
    const a1 = m[1];
    const b0 = m[4];
    const b1 = m[5];
    const c0 = m[8];
    const c1 = m[9];
    m[0] = a0 * c + a1 * s;
    m[1] = a0 * -s + a1 * c;
    m[4] = b0 * c + b1 * s;
    m[5] = b0 * -s + b1 * c;
    m[8] = c0 * c + c1 * s;
    m[9] = c0 * -s + c1 * c;
  }
  translateXYZ(x, y, z) {
    const m = this.mtxA;
    const tx = m[2] * z + m[0] * x + m[3] + m[1] * y;
    const ty = m[6] * z + m[4] * x + m[7] + m[5] * y;
    const tz = m[10] * z + m[8] * x + m[11] + m[9] * y;
    m[3] = tx;
    m[7] = ty;
    m[11] = tz;
  }
  translate(vec) {
    this.translateXYZ(vec.x, vec.y, vec.z);
  }
  translateNeg(vec) {
    this.translateXYZ(-vec.x, -vec.y, -vec.z);
  }
  scaleXYZ(x, y, z) {
    const m = this.mtxA;
    m[0] *= x;
    m[1] *= y;
    m[2] *= z;
    m[4] *= x;
    m[5] *= y;
    m[6] *= z;
    m[8] *= x;
    m[9] *= y;
    m[10] *= z;
  }
  scaleS(s) {
    this.scaleXYZ(s, s, s);
  }
  mult(a, b, out) {
    const m00 = b[8] * a[2] + b[4] * a[1] + b[0] * a[0];
    const m01 = b[9] * a[2] + b[5] * a[1] + b[1] * a[0];
    const m02 = b[10] * a[2] + b[6] * a[1] + b[2] * a[0];
    const m03 = b[11] * a[2] + b[7] * a[1] + b[3] * a[0] + a[3];
    const m10 = b[8] * a[6] + b[4] * a[5] + b[0] * a[4];
    const m11 = b[9] * a[6] + b[5] * a[5] + b[1] * a[4];
    const m12 = b[10] * a[6] + b[6] * a[5] + b[2] * a[4];
    const m13 = b[11] * a[6] + b[7] * a[5] + b[3] * a[4] + a[7];
    const m20 = b[8] * a[10] + b[4] * a[9] + b[0] * a[8];
    const m21 = b[9] * a[10] + b[5] * a[9] + b[1] * a[8];
    const m22 = b[10] * a[10] + b[6] * a[9] + b[2] * a[8];
    const m23 = b[11] * a[10] + b[7] * a[9] + b[3] * a[8] + a[11];
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
  }
  multRight(mtx) {
    this.mult(this.mtxA, mtx, this.mtxA);
  }
  multLeft(mtx) {
    this.mult(mtx, this.mtxA, this.mtxA);
  }
  fromMtxBMultMtx(mtx) {
    this.mult(this.mtxB, mtx, this.mtxA);
  }
  tfPoint(src, dest) {
    const m = this.mtxA;
    const x = src.x;
    const y = src.y;
    const z = src.z;
    dest.x = m[0] * x + m[1] * y + m[2] * z + m[3];
    dest.y = m[4] * x + m[5] * y + m[6] * z + m[7];
    dest.z = m[8] * x + m[9] * y + m[10] * z + m[11];
  }
  tfVec(src, dest) {
    const m = this.mtxA;
    const x = src.x;
    const y = src.y;
    const z = src.z;
    dest.x = m[0] * x + m[1] * y + m[2] * z;
    dest.y = m[4] * x + m[5] * y + m[6] * z;
    dest.z = m[8] * x + m[9] * y + m[10] * z;
  }
  rigidInvTfPoint(src, dest) {
    const m = this.mtxA;
    const x = src.x - m[3];
    const y = src.y - m[7];
    const z = src.z - m[11];
    dest.x = m[8] * z + m[4] * y + m[0] * x;
    dest.y = m[9] * z + m[5] * y + m[1] * x;
    dest.z = m[10] * z + m[6] * y + m[2] * x;
  }
  rigidInvTfVec(src, dest) {
    const m = this.mtxA;
    const x = src.x;
    const y = src.y;
    const z = src.z;
    dest.x = m[8] * z + m[4] * y + m[0] * x;
    dest.y = m[9] * z + m[5] * y + m[1] * x;
    dest.z = m[10] * z + m[6] * y + m[2] * x;
  }
  rigidInvTfVecXYZ(dest, x, y, z) {
    const m = this.mtxA;
    dest.x = m[8] * z + m[4] * y + m[0] * x;
    dest.y = m[9] * z + m[5] * y + m[1] * x;
    dest.z = m[10] * z + m[6] * y + m[2] * x;
  }
  getTranslateAlt(dest) {
    dest.x = this.mtxA[3];
    dest.y = this.mtxA[7];
    dest.z = this.mtxA[11];
  }
  setTranslate(vec) {
    this.mtxA[3] = vec.x;
    this.mtxA[7] = vec.y;
    this.mtxA[11] = vec.z;
  }
  normalizeBasis() {
    const m = this.mtxA;
    let inv = rsqrt(m[0] * m[0] + m[4] * m[4] + m[8] * m[8]);
    m[0] *= inv;
    m[4] *= inv;
    m[8] *= inv;
    inv = rsqrt(m[1] * m[1] + m[5] * m[5] + m[9] * m[9]);
    m[1] *= inv;
    m[5] *= inv;
    m[9] *= inv;
    inv = rsqrt(m[2] * m[2] + m[6] * m[6] + m[10] * m[10]);
    m[2] *= inv;
    m[6] *= inv;
    m[10] *= inv;
  }
  fromQuat(quat3) {
    const m = this.mtxA;
    const x = quat3.x;
    const y = quat3.y;
    const z = quat3.z;
    const w = quat3.w;
    const x2 = x + x;
    const y2 = y + y;
    const z2 = z + z;
    const xx = x * x2;
    const yy = y * y2;
    const zz = z * z2;
    const xy = x * y2;
    const xz = x * z2;
    const yz = y * z2;
    const wx = w * x2;
    const wy = w * y2;
    const wz = w * z2;
    m[0] = 1 - (yy + zz);
    m[5] = 1 - (xx + zz);
    m[10] = 1 - (xx + yy);
    m[6] = yz - wx;
    m[9] = yz + wx;
    m[8] = xz - wy;
    m[2] = xz + wy;
    m[1] = xy - wz;
    m[4] = xy + wz;
    m[3] = 0;
    m[7] = 0;
    m[11] = 0;
  }
  toQuat(out) {
    const m = this.mtxA;
    const trace = m[0] + m[5] + m[10];
    if (trace > 0) {
      const s2 = sqrt(trace + 1) * 2;
      out.w = 0.25 * s2;
      out.x = (m[9] - m[6]) / s2;
      out.y = (m[2] - m[8]) / s2;
      out.z = (m[4] - m[1]) / s2;
      return;
    }
    if (m[0] > m[5] && m[0] > m[10]) {
      const s2 = sqrt(1 + m[0] - m[5] - m[10]) * 2;
      out.w = (m[9] - m[6]) / s2;
      out.x = 0.25 * s2;
      out.y = (m[1] + m[4]) / s2;
      out.z = (m[2] + m[8]) / s2;
      return;
    }
    if (m[5] > m[10]) {
      const s2 = sqrt(1 + m[5] - m[0] - m[10]) * 2;
      out.w = (m[2] - m[8]) / s2;
      out.x = (m[1] + m[4]) / s2;
      out.y = 0.25 * s2;
      out.z = (m[6] + m[9]) / s2;
      return;
    }
    const s = sqrt(1 + m[10] - m[0] - m[5]) * 2;
    out.w = (m[4] - m[1]) / s;
    out.x = (m[2] + m[8]) / s;
    out.y = (m[6] + m[9]) / s;
    out.z = 0.25 * s;
  }
  toEulerYXZ(outY, outX, outZ) {
    const forward = this.tmpForward;
    const up = this.tmpUp;
    forward.x = 0;
    forward.y = 0;
    forward.z = -1;
    up.x = 0;
    up.y = 1;
    up.z = 0;
    this.push();
    this.tfVec(forward, forward);
    this.tfVec(up, up);
    const rotX = atan2S16(forward.y, sqrt(sumSq2(forward.x, forward.z)));
    const rotY = atan2S16(forward.x, forward.z) - 32768;
    this.fromRotateY(rotY);
    this.rotateX(rotX);
    this.rigidInvTfVec(up, up);
    const rotZ = -atan2S16(up.x, up.y);
    this.pop();
    outY.value = rotY;
    outX.value = rotX;
    outZ.value = rotZ;
  }
  push() {
    let slot = this.stack[this.stackTop];
    if (!slot) {
      slot = new Float32Array(12);
      this.stack[this.stackTop] = slot;
    }
    slot.set(this.mtxA);
    this.stackTop += 1;
  }
  pop() {
    if (this.stackTop === 0) {
      return;
    }
    this.stackTop -= 1;
    this.mtxA.set(this.stack[this.stackTop]);
  }
};
function clamp2(value, min, max2) {
  return Math.min(max2, Math.max(min, value));
}

// src/animation.ts
function smoothstep2(t) {
  return (3 - 2 * t) * t * t;
}
function interpolateKeyframes(count, frames, timeSeconds) {
  if (!frames || frames.length === 0) {
    return 0;
  }
  if (count < 2 || timeSeconds <= frames[0].timeSeconds) {
    return frames[0].value;
  }
  if (timeSeconds >= frames[count - 1].timeSeconds) {
    return frames[count - 1].value;
  }
  let nextIndex = 1;
  while (nextIndex < count - 1 && frames[nextIndex].timeSeconds <= timeSeconds) {
    nextIndex += 1;
  }
  const curr = frames[nextIndex - 1];
  const next = frames[nextIndex];
  if (curr.easeType === 0) {
    return curr.value;
  }
  const dt = next.timeSeconds - curr.timeSeconds;
  const t = (timeSeconds - curr.timeSeconds) / dt;
  if (curr.easeType === 1) {
    return curr.value * (1 - t) + next.value * t;
  }
  const t2 = t * t;
  const t3 = t2 * t;
  return curr.value * (1 + (2 * t3 - 3 * t2)) + next.value * (-2 * t3 + 3 * t2) + dt * (curr.tangentOut * (t + (t3 - 2 * t2)) + next.tangentIn * (t3 - t2));
}

// src/collision.ts
var FLT_EPSILON = 11920929e-14;
var GOAL_RING_MIN_DOT = 0.7732404444;
var GOAL_RING_RADIUS = 2.25;
var GOAL_RING_THICKNESS = 0.1;
var GOAL_POST_RADIUS = 0.2;
var GOAL_POST_HEIGHT = 1.5;
var BONUS_WAVE_STAGE_ID = 92;
var BONUS_WAVE_LIMIT = 10.01;
var SWITCH_COOLDOWN_FRAMES = 15;
var SWITCH_TRIGGER_RADIUS = 1.2;
var SWITCH_COLI_HEIGHT = 0.3;
var BONUS_WAVE_AMPLITUDE_BASE = 0.5;
var BONUS_WAVE_AMPLITUDE_SLOPE = -0.030833333333333334;
var BONUS_WAVE_ANGLE_SPEED = -1092;
var BONUS_WAVE_START_FRAME = 30;
var BONUS_WAVE_ANGLE_SCALE = 16384;
var stack = new MatrixStack();
var switchLocalCenter = { x: 0, y: 0, z: 0 };
var raycastLocalPos = { x: 0, y: 0, z: 0 };
var raycastTriPos = { x: 0, y: 0, z: 0 };
var raycastTriDir = { x: 0, y: 0, z: 0 };
var raycastHitLocal = { x: 0, y: 0, z: 0 };
var raycastHitWorld = { x: 0, y: 0, z: 0 };
var raycastNormalWorld = { x: 0, y: 0, z: 0 };
var raycastSurfacePrev = { x: 0, y: 0, z: 0 };
var raycastSurfaceCurr = { x: 0, y: 0, z: 0 };
var triPlaneScratch = {
  point: { x: 0, y: 0, z: 0 },
  normal: { x: 0, y: 0, z: 0 }
};
var triEdgeBallPrevPos = { x: 0, y: 0, z: 0 };
var triEdgeBallPos = { x: 0, y: 0, z: 0 };
var triEdgeLocalPrevPos = { x: 0, y: 0, z: 0 };
var triEdgeLocalPos = { x: 0, y: 0, z: 0 };
var triEdgeEndPos = { x: 0, y: 0, z: 0 };
var triEdgePlaneVec = { x: 0, y: 0, z: 0 };
var triEdgePlane = {
  point: { x: 0, y: 0, z: 0 },
  normal: { x: 0, y: 0, z: 0 }
};
var triEdgeScratchEdge = {
  start: { x: 0, y: 0 },
  end: { x: 0, y: 0 },
  normal: { x: 0, y: 0 }
};
var triVertTmpVec = { x: 0, y: 0, z: 0 };
var triVertScratch = { x: 0, y: 0 };
var rectPosScratch = { x: 0, y: 0, z: 0 };
var rectPrevPosScratch = { x: 0, y: 0, z: 0 };
var rectTmpVecScratch = { x: 0, y: 0, z: 0 };
var rectPosLocalScratch = { x: 0, y: 0, z: 0 };
var goalSubPosLocal = { x: 0, y: 0, z: 0 };
var goalSubPrevLocal = { x: 0, y: 0, z: 0 };
var goalRingPoint = { x: 0, y: 0, z: 0 };
var goalPlaneVec = { x: 0, y: 0, z: 0 };
var goalPlane = {
  point: { x: 0, y: 0, z: 0 },
  normal: { x: 0, y: 0, z: 0 }
};
var goalUpVec = { x: 0, y: -1, z: 0 };
var goalDirVec = { x: 0, y: 0, z: 0 };
var goalRingInfo = {
  center: { x: 0, y: 0, z: 0 },
  radius: GOAL_RING_RADIUS,
  thickness: GOAL_RING_THICKNESS,
  rotX: 0,
  rotY: 0,
  rotZ: 0
};
var goalRingInfo2 = {
  center: { x: 0, y: 0, z: 0 },
  radius: GOAL_RING_RADIUS,
  thickness: GOAL_RING_THICKNESS,
  rotX: 0,
  rotY: 0,
  rotZ: 0
};
var goalCyl = {
  pos: { x: 0, y: 0, z: 0 },
  rot: { x: 0, y: 0, z: 0 },
  radius: GOAL_POST_RADIUS,
  height: GOAL_POST_HEIGHT
};
var goalCyl2 = {
  pos: { x: 0, y: 0, z: 0 },
  rot: { x: 0, y: 0, z: 0 },
  radius: GOAL_POST_RADIUS,
  height: GOAL_POST_HEIGHT
};
var goalBagVecA = { x: 0, y: 0, z: 0 };
var goalBagVecB = { x: 0, y: 0, z: 0 };
var goalBagVecC = { x: 0, y: 0, z: 0 };
var goalBagVecD = { x: 0, y: 0, z: 0 };
var goalTapeLocalPos = { x: 0, y: 0, z: 0 };
var goalTapeDelta = { x: 0, y: 0, z: 0 };
var goalTapeImpulse = { x: 0, y: 0, z: 0 };
var goalTapeImpulseStep = { x: 0, y: 0, z: 0 };
var goalTapeNormalScratch = { x: 0, y: 0, z: 0 };
var seesawLocalPosScratch = { x: 0, y: 0, z: 0 };
var seesawLocalVelScratch = { x: 0, y: 0, z: 0 };
var switchCylinderScratch = {
  pos: { x: 0, y: 0, z: 0 },
  rot: { x: 0, y: 0, z: 0 },
  height: SWITCH_COLI_HEIGHT,
  radius: SWITCH_TRIGGER_RADIUS
};
var switchLocalNormalScratch = { x: 0, y: 0, z: 0 };
var bumperTempPos = { x: 0, y: 0, z: 0 };
var bumperNormal = { x: 0, y: 0, z: 0 };
var cylinderTmpVec = { x: 0, y: 0, z: 0 };
var cylinderPosLocal = { x: 0, y: 0, z: 0 };
var cylinderPrevLocal = { x: 0, y: 0, z: 0 };
var cylinderCircle = {
  pos: { x: 0, y: 0, z: 0 },
  radius: 0,
  rot: { x: 0, y: 0, z: 0 }
};
var cylinderPlane = {
  point: { x: 0, y: 0, z: 0 },
  normal: { x: 0, y: 0, z: 0 }
};
var rectPlaneScratch = {
  point: { x: 0, y: 0, z: 0 },
  normal: { x: 0, y: 0, z: 0 }
};
var switchProbeBall = {
  flags: 0,
  pos: { x: 0, y: 0, z: 0 },
  prevPos: { x: 0, y: 0, z: 0 },
  vel: { x: 0, y: 0, z: 0 },
  radius: 0.5,
  gravityAccel: 0,
  restitution: 0,
  hardestColiSpeed: 0,
  hardestColiPlane: {
    point: { x: 0, y: 0, z: 0 },
    normal: { x: 0, y: 1, z: 0 }
  },
  hardestColiAnimGroupId: 0,
  friction: 0,
  animGroupId: 0
};
function resetSwitchProbeBall(ball) {
  switchProbeBall.flags = 0;
  switchProbeBall.pos.x = ball.pos.x;
  switchProbeBall.pos.y = ball.pos.y;
  switchProbeBall.pos.z = ball.pos.z;
  switchProbeBall.prevPos.x = ball.prevPos.x;
  switchProbeBall.prevPos.y = ball.prevPos.y;
  switchProbeBall.prevPos.z = ball.prevPos.z;
  switchProbeBall.vel.x = ball.vel.x;
  switchProbeBall.vel.y = ball.vel.y;
  switchProbeBall.vel.z = ball.vel.z;
  switchProbeBall.radius = ball.radius;
  switchProbeBall.gravityAccel = ball.gravityAccel;
  switchProbeBall.restitution = ball.restitution;
  switchProbeBall.hardestColiSpeed = 0;
  switchProbeBall.hardestColiAnimGroupId = ball.animGroupId;
  switchProbeBall.friction = ball.friction;
  switchProbeBall.animGroupId = ball.animGroupId;
}
function computeSwitchCylinder(stageSwitch, modelBounds, cylinder) {
  const boundCenter = modelBounds.center;
  const boundRadius = modelBounds.radius;
  switchLocalCenter.x = boundCenter.x;
  switchLocalCenter.y = boundCenter.y;
  switchLocalCenter.z = boundCenter.z;
  stack.fromIdentity();
  stack.rotateZ(stageSwitch.rot.z);
  stack.rotateY(stageSwitch.rot.y);
  stack.rotateX(stageSwitch.rot.x);
  stack.tfPoint(switchLocalCenter, switchLocalCenter);
  cylinder.pos.x = stageSwitch.pos.x + switchLocalCenter.x;
  cylinder.pos.y = stageSwitch.pos.y + switchLocalCenter.y;
  cylinder.pos.z = stageSwitch.pos.z + switchLocalCenter.z;
  cylinder.rot.x = stageSwitch.rot.x;
  cylinder.rot.y = stageSwitch.rot.y;
  cylinder.rot.z = stageSwitch.rot.z;
  cylinder.height = SWITCH_COLI_HEIGHT;
  const radiusSq = boundRadius * boundRadius - SWITCH_COLI_HEIGHT * SWITCH_COLI_HEIGHT;
  cylinder.radius = radiusSq > 0 ? sqrt(radiusSq) : boundRadius;
}
function dumbDot(x1, y1, x2, y2) {
  return x1 * x2 + y1 * y2;
}
var JAMABAR_COLI_RECTS = [
  {
    pos: { x: 0, y: 0.5, z: 1.75 },
    rot: { x: 0, y: 0, z: 0 },
    normal: { x: 0, y: 0, z: 1 },
    width: 1,
    height: 1
  },
  {
    pos: { x: -0.5, y: 0.5, z: 0 },
    rot: { x: 0, y: -16384, z: 0 },
    normal: { x: -1, y: 0, z: 0 },
    width: 3.5,
    height: 1
  },
  {
    pos: { x: 0, y: 0.5, z: -1.75 },
    rot: { x: 0, y: 32768, z: 0 },
    normal: { x: 0, y: 0, z: -1 },
    width: 1,
    height: 1
  },
  {
    pos: { x: 0.5, y: 0.5, z: 0 },
    rot: { x: 0, y: 16384, z: 0 },
    normal: { x: 1, y: 0, z: 0 },
    width: 3.5,
    height: 1
  }
];
function tfPhysballToAnimGroupSpace(physBall, animGroupId, animGroups) {
  const delta = { x: 0, y: 0, z: 0 };
  if (physBall.animGroupId > 0) {
    const group = animGroups[physBall.animGroupId];
    delta.x = physBall.pos.x - physBall.prevPos.x;
    delta.y = physBall.pos.y - physBall.prevPos.y;
    delta.z = physBall.pos.z - physBall.prevPos.z;
    stack.fromMtx(group.transform);
    stack.tfPoint(physBall.pos, physBall.pos);
    stack.tfVec(physBall.vel, physBall.vel);
    stack.tfVec(delta, delta);
    stack.fromMtx(group.prevTransform);
    stack.tfPoint(physBall.prevPos, physBall.prevPos);
    physBall.vel.x += physBall.pos.x - physBall.prevPos.x - delta.x;
    physBall.vel.y += physBall.pos.y - physBall.prevPos.y - delta.y;
    physBall.vel.z += physBall.pos.z - physBall.prevPos.z - delta.z;
  }
  if (animGroupId > 0) {
    const group = animGroups[animGroupId];
    delta.x = physBall.pos.x - physBall.prevPos.x;
    delta.y = physBall.pos.y - physBall.prevPos.y;
    delta.z = physBall.pos.z - physBall.prevPos.z;
    stack.fromMtx(group.transform);
    stack.rigidInvTfPoint(physBall.pos, physBall.pos);
    stack.rigidInvTfVec(physBall.vel, physBall.vel);
    stack.rigidInvTfVec(delta, delta);
    stack.fromMtx(group.prevTransform);
    stack.rigidInvTfPoint(physBall.prevPos, physBall.prevPos);
    physBall.vel.x += physBall.pos.x - physBall.prevPos.x - delta.x;
    physBall.vel.y += physBall.pos.y - physBall.prevPos.y - delta.y;
    physBall.vel.z += physBall.pos.z - physBall.prevPos.z - delta.z;
  }
  physBall.animGroupId = animGroupId;
}
function intersectsMovingSpheres(startA, endA, startB, endB, radiusA, radiusB) {
  const dx = startA.x - startB.x;
  const dy = startA.y - startB.y;
  const dz = startA.z - startB.z;
  const vx = endA.x - endB.x - dx;
  const vy = endA.y - endB.y - dy;
  const vz = endA.z - endB.z - dz;
  const vv = vx * vx + vy * vy + vz * vz;
  if (vv === 0) {
    return false;
  }
  const radiusSum = radiusA + radiusB;
  const vd = dx * vx + dy * vy + dz * vz;
  const dd = dx * dx + dy * dy + dz * dz - radiusSum * radiusSum;
  if (vd * vd - vv * dd < 0) {
    return false;
  }
  if (dd <= 0) {
    return true;
  }
  if (vv + vd + vd + dd <= 0) {
    return true;
  }
  if (vd >= 0) {
    return false;
  }
  if (-vd >= vv) {
    return false;
  }
  return true;
}
function resolveMovingSpheres(startA, endA, startB, endB, radiusA, radiusB) {
  const dx = startA.x - startB.x;
  const dy = startA.y - startB.y;
  const dz = startA.z - startB.z;
  const vx = endA.x - endB.x - dx;
  const vy = endA.y - endB.y - dy;
  const vz = endA.z - endB.z - dz;
  const vv = vx * vx + vy * vy + vz * vz;
  if (vv === 0) {
    return false;
  }
  const radiusSum = radiusA + radiusB;
  const vd = dx * vx + dy * vy + dz * vz;
  const dd = dx * dx + dy * dy + dz * dz - radiusSum * radiusSum;
  const discriminant = vd * vd - vv * dd;
  if (discriminant < 0) {
    return false;
  }
  if (dd <= 0) {
    endA.x = startA.x;
    endA.y = startA.y;
    endA.z = startA.z;
    endB.x = startB.x;
    endB.y = startB.y;
    endB.z = startB.z;
    return true;
  }
  if (!(vv + vd + vd + dd <= 0)) {
    if (vd >= 0) {
      return false;
    }
    if (-vd >= vv) {
      return false;
    }
  }
  const t = -(vd + sqrt(discriminant)) / vv;
  endA.x = startA.x + t * (endA.x - startA.x);
  endA.y = startA.y + t * (endA.y - startA.y);
  endA.z = startA.z + t * (endA.z - startA.z);
  endB.x = startB.x + t * (endB.x - startB.x);
  endB.y = startB.y + t * (endB.y - startB.y);
  endB.z = startB.z + t * (endB.z - startB.z);
  return true;
}
function tfBallToLocal(ball) {
  stack.rigidInvTfPoint(ball.pos, ball.pos);
  stack.rigidInvTfPoint(ball.prevPos, ball.prevPos);
  stack.rigidInvTfVec(ball.vel, ball.vel);
}
function tfBallToWorld(ball) {
  stack.tfPoint(ball.pos, ball.pos);
  stack.tfPoint(ball.prevPos, ball.prevPos);
  stack.tfVec(ball.vel, ball.vel);
}
function testLineIntersectsRect(lineStart, lineEnd, rect) {
  const start = { x: lineStart.x, y: lineStart.y, z: lineStart.z };
  const end = { x: lineEnd.x, y: lineEnd.y, z: lineEnd.z };
  const planePoint = { x: 0, y: 0, z: 0 };
  stack.fromTranslate(rect.pos);
  stack.rotateZ(rect.rot.z);
  stack.rotateY(rect.rot.y);
  stack.rotateX(rect.rot.x);
  stack.rigidInvTfPoint(start, start);
  stack.rigidInvTfPoint(end, end);
  if (end.z < 0 && start.z < 0 || end.z > 0 && start.z > 0) {
    return false;
  }
  planePoint.x = start.x - end.x;
  planePoint.y = start.y - end.y;
  planePoint.z = start.z - end.z;
  if (planePoint.z > FLT_EPSILON) {
    planePoint.x = end.x - planePoint.x * (end.z / planePoint.z);
    planePoint.y = end.y - planePoint.y * (end.z / planePoint.z);
  } else {
    planePoint.x = end.x;
    planePoint.y = end.y;
  }
  const halfWidth = 0.5 * rect.width;
  const halfHeight = 0.5 * rect.height;
  if (planePoint.x < -halfWidth || planePoint.x > halfWidth) {
    return false;
  }
  if (planePoint.y < -halfHeight || planePoint.y > halfHeight) {
    return false;
  }
  return true;
}
function coligridLookup(stageAg, x, z) {
  if (!stageAg.gridCellTris) {
    return null;
  }
  const cellX = floor((x - stageAg.gridOriginX) / stageAg.gridStepX);
  const cellZ = floor((z - stageAg.gridOriginZ) / stageAg.gridStepZ);
  if (cellX < 0 || cellX >= stageAg.gridCellCountX) {
    return null;
  }
  if (cellZ < 0 || cellZ >= stageAg.gridCellCountZ) {
    return null;
  }
  return stageAg.gridCellTris[cellZ * stageAg.gridCellCountX + cellX];
}
function raycastStageDown(pos, stageRuntime) {
  if (!stageRuntime?.stage || !stageRuntime.animGroups) {
    return null;
  }
  const stage = stageRuntime.stage;
  const animGroups = stageRuntime.animGroups;
  let bestHit = null;
  let bestY = -Infinity;
  for (let animGroupId = 0; animGroupId < stage.animGroupCount; animGroupId += 1) {
    const stageAg = stage.animGroups[animGroupId];
    const agInfo = animGroups[animGroupId];
    if (!stageAg || !agInfo) {
      continue;
    }
    raycastLocalPos.x = pos.x;
    raycastLocalPos.y = pos.y;
    raycastLocalPos.z = pos.z;
    if (animGroupId !== 0) {
      stack.fromMtx(agInfo.transform);
      stack.rigidInvTfPoint(raycastLocalPos, raycastLocalPos);
    }
    const cellTris = coligridLookup(stageAg, raycastLocalPos.x, raycastLocalPos.z);
    if (!cellTris) {
      continue;
    }
    for (const triIndex of cellTris) {
      const tri = stageAg.triangles[triIndex];
      stack.fromTranslate(tri.pos);
      stack.rotateY(tri.rot.y);
      stack.rotateX(tri.rot.x);
      stack.rotateZ(tri.rot.z);
      raycastTriPos.x = 0;
      raycastTriPos.y = 0;
      raycastTriPos.z = 0;
      raycastTriDir.x = 0;
      raycastTriDir.y = -1;
      raycastTriDir.z = 0;
      stack.rigidInvTfPoint(raycastLocalPos, raycastTriPos);
      stack.rigidInvTfVec(raycastTriDir, raycastTriDir);
      if (Math.abs(raycastTriDir.z) <= FLT_EPSILON) {
        continue;
      }
      const t = -raycastTriPos.z / raycastTriDir.z;
      if (t < 0) {
        continue;
      }
      const hitX = raycastTriPos.x + raycastTriDir.x * t;
      const hitY = raycastTriPos.y + raycastTriDir.y * t;
      if (dumbDot(0, 1, hitX, hitY) < -FLT_EPSILON) {
        continue;
      }
      if ((hitX - tri.vert2.x) * tri.edge2Normal.x + (hitY - tri.vert2.y) * tri.edge2Normal.y < -FLT_EPSILON) {
        continue;
      }
      if ((hitX - tri.vert3.x) * tri.edge3Normal.x + (hitY - tri.vert3.y) * tri.edge3Normal.y < -FLT_EPSILON) {
        continue;
      }
      raycastHitLocal.x = hitX;
      raycastHitLocal.y = hitY;
      raycastHitLocal.z = 0;
      stack.tfPoint(raycastHitLocal, raycastHitLocal);
      if (animGroupId !== 0) {
        stack.fromMtx(agInfo.transform);
        stack.tfPoint(raycastHitLocal, raycastHitWorld);
      } else {
        raycastHitWorld.x = raycastHitLocal.x;
        raycastHitWorld.y = raycastHitLocal.y;
        raycastHitWorld.z = raycastHitLocal.z;
      }
      if (raycastHitWorld.y > bestY && raycastHitWorld.y <= pos.y + FLT_EPSILON) {
        bestY = raycastHitWorld.y;
        if (!bestHit) {
          bestHit = {
            pos: { x: 0, y: 0, z: 0 },
            normal: { x: 0, y: 0, z: 0 },
            surfaceVel: { x: 0, y: 0, z: 0 },
            flags: 1
          };
        }
        bestHit.pos.x = raycastHitWorld.x;
        bestHit.pos.y = raycastHitWorld.y;
        bestHit.pos.z = raycastHitWorld.z;
        if (animGroupId !== 0) {
          stack.fromMtx(agInfo.transform);
          stack.tfVec(tri.normal, raycastNormalWorld);
          stack.fromMtx(agInfo.prevTransform);
          stack.tfPoint(raycastHitLocal, raycastSurfacePrev);
          stack.fromMtx(agInfo.transform);
          stack.tfPoint(raycastHitLocal, raycastSurfaceCurr);
          bestHit.normal.x = raycastNormalWorld.x;
          bestHit.normal.y = raycastNormalWorld.y;
          bestHit.normal.z = raycastNormalWorld.z;
          bestHit.surfaceVel.x = raycastSurfaceCurr.x - raycastSurfacePrev.x;
          bestHit.surfaceVel.y = raycastSurfaceCurr.y - raycastSurfacePrev.y;
          bestHit.surfaceVel.z = raycastSurfaceCurr.z - raycastSurfacePrev.z;
        } else {
          bestHit.normal.x = tri.normal.x;
          bestHit.normal.y = tri.normal.y;
          bestHit.normal.z = tri.normal.z;
          bestHit.surfaceVel.x = 0;
          bestHit.surfaceVel.y = 0;
          bestHit.surfaceVel.z = 0;
        }
      }
    }
  }
  return bestHit;
}
function collideBallWithPlane(ball, plane) {
  const planeDeltaX = ball.pos.x - plane.point.x;
  const planeDeltaY = ball.pos.y - plane.point.y;
  const planeDeltaZ = ball.pos.z - plane.point.z;
  const planeDist = planeDeltaX * plane.normal.x + planeDeltaY * plane.normal.y + planeDeltaZ * plane.normal.z;
  if (planeDist > ball.radius) {
    return;
  }
  let isHardestColi = -1;
  if (!(ball.flags & COLI_FLAGS.OCCURRED)) {
    isHardestColi = 0;
  }
  const penetrationDist = ball.radius - planeDist;
  ball.pos.x += plane.normal.x * penetrationDist;
  ball.pos.y += plane.normal.y * penetrationDist;
  ball.pos.z += plane.normal.z * penetrationDist;
  const normalSpeed = plane.normal.x * ball.vel.x + plane.normal.y * ball.vel.y + plane.normal.z * ball.vel.z;
  if (normalSpeed < 0 && ball.restitution > FLT_EPSILON) {
    if (normalSpeed < ball.hardestColiSpeed) {
      ball.hardestColiSpeed = normalSpeed;
      ball.hardestColiAnimGroupId = ball.animGroupId;
      isHardestColi = 0;
    }
    const parallelVelX = ball.vel.x - plane.normal.x * normalSpeed;
    const parallelVelY = ball.vel.y - plane.normal.y * normalSpeed;
    const parallelVelZ = ball.vel.z - plane.normal.z * normalSpeed;
    if (ball.frictionMode !== "smb2" || !(ball.flags & COLI_FLAGS.OCCURRED)) {
      ball.vel.x -= parallelVelX * ball.friction;
      ball.vel.y -= parallelVelY * ball.friction;
      ball.vel.z -= parallelVelZ * ball.friction;
    }
    if (normalSpeed >= -5 * ball.gravityAccel) {
      ball.vel.x -= plane.normal.x * normalSpeed;
      ball.vel.y -= plane.normal.y * normalSpeed;
      ball.vel.z -= plane.normal.z * normalSpeed;
    } else {
      const adjustedBallSpeed = normalSpeed + 5 * ball.gravityAccel;
      ball.vel.x -= plane.normal.x * (-5 * ball.gravityAccel);
      ball.vel.y -= plane.normal.y * (-5 * ball.gravityAccel);
      ball.vel.z -= plane.normal.z * (-5 * ball.gravityAccel);
      ball.vel.x -= (1 + ball.restitution) * (plane.normal.x * adjustedBallSpeed);
      ball.vel.y -= (1 + ball.restitution) * (plane.normal.y * adjustedBallSpeed);
      ball.vel.z -= (1 + ball.restitution) * (plane.normal.z * adjustedBallSpeed);
    }
  }
  if (isHardestColi === 0) {
    ball.hardestColiPlane.point.x = plane.point.x;
    ball.hardestColiPlane.point.y = plane.point.y;
    ball.hardestColiPlane.point.z = plane.point.z;
    ball.hardestColiPlane.normal.x = plane.normal.x;
    ball.hardestColiPlane.normal.y = plane.normal.y;
    ball.hardestColiPlane.normal.z = plane.normal.z;
  }
  ball.flags |= COLI_FLAGS.OCCURRED;
}
function bonusWaveSurfaceAt(x, z, timerFrames) {
  if (x < -BONUS_WAVE_LIMIT || x > BONUS_WAVE_LIMIT) {
    return null;
  }
  if (z < -BONUS_WAVE_LIMIT || z > BONUS_WAVE_LIMIT) {
    return null;
  }
  const dist = sqrt(sumSq2(x, z));
  const amplitude = BONUS_WAVE_AMPLITUDE_BASE + BONUS_WAVE_AMPLITUDE_SLOPE * dist;
  const angle = Math.trunc(BONUS_WAVE_ANGLE_SPEED * (timerFrames - BONUS_WAVE_START_FRAME) + BONUS_WAVE_ANGLE_SCALE * dist);
  if (angle > 0) {
    return {
      point: { x, y: 0, z },
      normal: { x: 0, y: 1, z: 0 }
    };
  }
  const y = sinS16(angle) * amplitude;
  const normal = { x: 0, y: 1, z: 0 };
  const lenSq = sumSq2(x, z);
  if (lenSq > FLT_EPSILON) {
    const scale = -(cosS16(angle) * amplitude) * rsqrt(lenSq);
    normal.x = x * scale;
    normal.z = z * scale;
    const normalLenSq = sumSq3(normal.x, normal.y, normal.z);
    if (normalLenSq > FLT_EPSILON) {
      const inv = rsqrt(normalLenSq);
      normal.x *= inv;
      normal.y *= inv;
      normal.z *= inv;
    }
  }
  return {
    point: { x, y, z },
    normal
  };
}
function collideBallWithTriFace(ball, tri) {
  triEdgeBallPrevPos.x = ball.prevPos.x;
  triEdgeBallPrevPos.y = ball.prevPos.y;
  triEdgeBallPrevPos.z = ball.prevPos.z;
  triEdgeBallPos.x = ball.pos.x;
  triEdgeBallPos.y = ball.pos.y;
  triEdgeBallPos.z = ball.pos.z;
  let x = triEdgeBallPrevPos.x - tri.pos.x;
  let y = triEdgeBallPrevPos.y - tri.pos.y;
  let z = triEdgeBallPrevPos.z - tri.pos.z;
  if (x * tri.normal.x + y * tri.normal.y + z * tri.normal.z < 0) {
    return;
  }
  x = triEdgeBallPos.x - tri.pos.x;
  y = triEdgeBallPos.y - tri.pos.y;
  z = triEdgeBallPos.z - tri.pos.z;
  if (x * tri.normal.x + y * tri.normal.y + z * tri.normal.z > ball.radius) {
    return;
  }
  stack.fromTranslate(tri.pos);
  stack.rotateY(tri.rot.y);
  stack.rotateX(tri.rot.x);
  stack.rotateZ(tri.rot.z);
  stack.rigidInvTfPoint(triEdgeBallPrevPos, triEdgeBallPrevPos);
  stack.rigidInvTfPoint(triEdgeBallPos, triEdgeBallPos);
  const prevOutside = dumbDot(0, 1, triEdgeBallPrevPos.x, triEdgeBallPrevPos.y) < -FLT_EPSILON || (triEdgeBallPrevPos.x - tri.vert2.x) * tri.edge2Normal.x + (triEdgeBallPrevPos.y - tri.vert2.y) * tri.edge2Normal.y < -FLT_EPSILON || (triEdgeBallPrevPos.x - tri.vert3.x) * tri.edge3Normal.x + (triEdgeBallPrevPos.y - tri.vert3.y) * tri.edge3Normal.y < -FLT_EPSILON;
  const posOutside = dumbDot(0, 1, triEdgeBallPos.x, triEdgeBallPos.y) < -FLT_EPSILON || (triEdgeBallPos.x - tri.vert2.x) * tri.edge2Normal.x + (triEdgeBallPos.y - tri.vert2.y) * tri.edge2Normal.y < -FLT_EPSILON || (triEdgeBallPos.x - tri.vert3.x) * tri.edge3Normal.x + (triEdgeBallPos.y - tri.vert3.y) * tri.edge3Normal.y < -FLT_EPSILON;
  if (!(prevOutside && posOutside)) {
    triPlaneScratch.point.x = tri.pos.x;
    triPlaneScratch.point.y = tri.pos.y;
    triPlaneScratch.point.z = tri.pos.z;
    triPlaneScratch.normal.x = tri.normal.x;
    triPlaneScratch.normal.y = tri.normal.y;
    triPlaneScratch.normal.z = tri.normal.z;
    collideBallWithPlane(ball, triPlaneScratch);
  }
}
function collideBallWithTriEdge(ball, ballPosTri, ballPrevPosTri, edge) {
  stack.push();
  stack.fromIdentity();
  stack.translateXYZ(edge.start.x, edge.start.y, 0);
  const edgeNormalLenSq = sumSq2(edge.normal.x, edge.normal.y);
  if (edgeNormalLenSq > FLT_EPSILON) {
    stack.rotateZ(-atan2S16(edge.normal.x, edge.normal.y));
  }
  stack.rigidInvTfPoint(ballPrevPosTri, triEdgeLocalPrevPos);
  stack.rigidInvTfPoint(ballPosTri, triEdgeLocalPos);
  triEdgeEndPos.x = edge.end.x;
  triEdgeEndPos.y = edge.end.y;
  triEdgeEndPos.z = 0;
  stack.rigidInvTfPoint(triEdgeEndPos, triEdgeEndPos);
  triEdgePlaneVec.x = 0;
  triEdgePlaneVec.y = triEdgeLocalPos.y - triEdgeLocalPrevPos.y;
  triEdgePlaneVec.z = triEdgeLocalPos.z - triEdgeLocalPrevPos.z;
  const planeLenSq = sumSq2(triEdgePlaneVec.y, triEdgePlaneVec.z);
  if (planeLenSq > FLT_EPSILON) {
    stack.rotateX(-atan2S16(triEdgePlaneVec.y, triEdgePlaneVec.z) - 32768);
  }
  stack.rigidInvTfPoint(ballPosTri, triEdgeLocalPos);
  stack.rigidInvTfPoint(ballPrevPosTri, triEdgeLocalPrevPos);
  const someY = triEdgeLocalPos.y;
  if (Math.abs(someY) > ball.radius) {
    stack.pop();
    return;
  }
  let phi = sqrt(ball.radius * ball.radius - triEdgeLocalPos.y * triEdgeLocalPos.y);
  if (Math.abs(triEdgeLocalPos.z) > phi) {
    stack.pop();
    return;
  }
  if (triEdgeLocalPrevPos.z < 0) {
    phi = -phi;
  }
  triEdgePlaneVec.x = 0;
  triEdgePlaneVec.y = someY;
  triEdgePlaneVec.z = phi;
  let edgeHitX;
  if (triEdgeLocalPrevPos.z > phi && triEdgeLocalPos.z < phi) {
    edgeHitX = triEdgeLocalPrevPos.x + (triEdgeLocalPos.x - triEdgeLocalPrevPos.x) * ((phi - triEdgeLocalPrevPos.z) / (triEdgeLocalPos.z - triEdgeLocalPrevPos.z));
  } else {
    edgeHitX = triEdgeLocalPos.x;
  }
  if (edgeHitX < 0 || edgeHitX > triEdgeEndPos.x) {
    stack.pop();
    return;
  }
  const tempLenSq = sumSq2(triEdgePlaneVec.y, triEdgePlaneVec.z);
  if (tempLenSq <= FLT_EPSILON) {
    stack.pop();
    return;
  }
  const invLen = rsqrt(tempLenSq);
  triEdgePlaneVec.y *= invLen;
  triEdgePlaneVec.z *= invLen;
  stack.tfVec(triEdgePlaneVec, triEdgePlane.normal);
  stack.getTranslateAlt(triEdgePlane.point);
  stack.pop();
  stack.tfVec(triEdgePlane.normal, triEdgePlane.normal);
  stack.tfPoint(triEdgePlane.point, triEdgePlane.point);
  collideBallWithPlane(ball, triEdgePlane);
}
function collideBallWithTriEdges(ball, tri) {
  triEdgeBallPrevPos.x = ball.prevPos.x;
  triEdgeBallPrevPos.y = ball.prevPos.y;
  triEdgeBallPrevPos.z = ball.prevPos.z;
  triEdgeBallPos.x = ball.pos.x;
  triEdgeBallPos.y = ball.pos.y;
  triEdgeBallPos.z = ball.pos.z;
  let x = triEdgeBallPrevPos.x - tri.pos.x;
  let y = triEdgeBallPrevPos.y - tri.pos.y;
  let z = triEdgeBallPrevPos.z - tri.pos.z;
  if (x * tri.normal.x + y * tri.normal.y + z * tri.normal.z < 0) {
    return;
  }
  x = triEdgeBallPos.x - tri.pos.x;
  y = triEdgeBallPos.y - tri.pos.y;
  z = triEdgeBallPos.z - tri.pos.z;
  if (x * tri.normal.x + y * tri.normal.y + z * tri.normal.z > ball.radius) {
    return;
  }
  stack.fromTranslate(tri.pos);
  stack.rotateY(tri.rot.y);
  stack.rotateX(tri.rot.x);
  stack.rotateZ(tri.rot.z);
  stack.rigidInvTfPoint(triEdgeBallPrevPos, triEdgeBallPrevPos);
  stack.rigidInvTfPoint(triEdgeBallPos, triEdgeBallPos);
  x = 0;
  y = 1;
  if (x * triEdgeBallPos.x + y * triEdgeBallPos.y < -ball.radius && x * triEdgeBallPrevPos.x + y * triEdgeBallPrevPos.y < -ball.radius) {
    return;
  }
  x = tri.edge2Normal.x;
  y = tri.edge2Normal.y;
  if (x * (triEdgeBallPos.x - tri.vert2.x) + y * (triEdgeBallPos.y - tri.vert2.y) < -ball.radius && x * (triEdgeBallPrevPos.x - tri.vert2.x) + y * (triEdgeBallPrevPos.y - tri.vert2.y) < -ball.radius) {
    return;
  }
  x = tri.edge3Normal.x;
  y = tri.edge3Normal.y;
  if (x * (triEdgeBallPos.x - tri.vert3.x) + y * (triEdgeBallPos.y - tri.vert3.y) < -ball.radius && x * (triEdgeBallPrevPos.x - tri.vert3.x) + y * (triEdgeBallPrevPos.y - tri.vert3.y) < -ball.radius) {
    return;
  }
  triEdgeScratchEdge.start.x = 0;
  triEdgeScratchEdge.start.y = 0;
  triEdgeScratchEdge.end.x = tri.vert2.x;
  triEdgeScratchEdge.end.y = tri.vert2.y;
  triEdgeScratchEdge.normal.x = 0;
  triEdgeScratchEdge.normal.y = 1;
  collideBallWithTriEdge(ball, triEdgeBallPos, triEdgeBallPrevPos, triEdgeScratchEdge);
  triEdgeScratchEdge.start.x = tri.vert2.x;
  triEdgeScratchEdge.start.y = tri.vert2.y;
  triEdgeScratchEdge.end.x = tri.vert3.x;
  triEdgeScratchEdge.end.y = tri.vert3.y;
  triEdgeScratchEdge.normal.x = tri.edge2Normal.x;
  triEdgeScratchEdge.normal.y = tri.edge2Normal.y;
  collideBallWithTriEdge(ball, triEdgeBallPos, triEdgeBallPrevPos, triEdgeScratchEdge);
  triEdgeScratchEdge.start.x = tri.vert3.x;
  triEdgeScratchEdge.start.y = tri.vert3.y;
  triEdgeScratchEdge.end.x = 0;
  triEdgeScratchEdge.end.y = 0;
  triEdgeScratchEdge.normal.x = tri.edge3Normal.x;
  triEdgeScratchEdge.normal.y = tri.edge3Normal.y;
  collideBallWithTriEdge(ball, triEdgeBallPos, triEdgeBallPrevPos, triEdgeScratchEdge);
}
function collideBallWithTriVert(ball, ballPosTri, vert) {
  triVertTmpVec.x = ballPosTri.x - vert.x;
  triVertTmpVec.y = ballPosTri.y - vert.y;
  triVertTmpVec.z = ballPosTri.z;
  const distSq = sumSq3(triVertTmpVec.x, triVertTmpVec.y, triVertTmpVec.z);
  if (distSq > ball.radius * ball.radius || distSq <= FLT_EPSILON) {
    return;
  }
  const invDist = rsqrt(distSq);
  triVertTmpVec.x *= invDist;
  triVertTmpVec.y *= invDist;
  triVertTmpVec.z *= invDist;
  triPlaneScratch.point.x = vert.x;
  triPlaneScratch.point.y = vert.y;
  triPlaneScratch.point.z = 0;
  triPlaneScratch.normal.x = triVertTmpVec.x;
  triPlaneScratch.normal.y = triVertTmpVec.y;
  triPlaneScratch.normal.z = triVertTmpVec.z;
  stack.tfVec(triPlaneScratch.normal, triPlaneScratch.normal);
  stack.tfPoint(triPlaneScratch.point, triPlaneScratch.point);
  stack.push();
  collideBallWithPlane(ball, triPlaneScratch);
  stack.pop();
}
function collideBallWithTriVerts(ball, tri) {
  triEdgeBallPrevPos.x = ball.prevPos.x;
  triEdgeBallPrevPos.y = ball.prevPos.y;
  triEdgeBallPrevPos.z = ball.prevPos.z;
  let x = triEdgeBallPrevPos.x - tri.pos.x;
  let y = triEdgeBallPrevPos.y - tri.pos.y;
  let z = triEdgeBallPrevPos.z - tri.pos.z;
  if (x * tri.normal.x + y * tri.normal.y + z * tri.normal.z < 0) {
    return;
  }
  triEdgeBallPos.x = ball.pos.x;
  triEdgeBallPos.y = ball.pos.y;
  triEdgeBallPos.z = ball.pos.z;
  x = triEdgeBallPos.x - tri.pos.x;
  y = triEdgeBallPos.y - tri.pos.y;
  z = triEdgeBallPos.z - tri.pos.z;
  if (x * tri.normal.x + y * tri.normal.y + z * tri.normal.z > ball.radius) {
    return;
  }
  stack.fromTranslate(tri.pos);
  stack.rotateY(tri.rot.y);
  stack.rotateX(tri.rot.x);
  stack.rotateZ(tri.rot.z);
  stack.rigidInvTfPoint(triEdgeBallPrevPos, triEdgeBallPrevPos);
  stack.rigidInvTfPoint(triEdgeBallPos, triEdgeBallPos);
  triVertScratch.x = 0;
  triVertScratch.y = 0;
  collideBallWithTriVert(ball, triEdgeBallPos, triVertScratch);
  triVertScratch.x = tri.vert2.x;
  triVertScratch.y = tri.vert2.y;
  collideBallWithTriVert(ball, triEdgeBallPos, triVertScratch);
  triVertScratch.x = tri.vert3.x;
  triVertScratch.y = tri.vert3.y;
  collideBallWithTriVert(ball, triEdgeBallPos, triVertScratch);
}
function collideBallWithRect(ball, rect) {
  rectPosScratch.x = ball.pos.x;
  rectPosScratch.y = ball.pos.y;
  rectPosScratch.z = ball.pos.z;
  rectPrevPosScratch.x = ball.prevPos.x;
  rectPrevPosScratch.y = ball.prevPos.y;
  rectPrevPosScratch.z = ball.prevPos.z;
  rectTmpVecScratch.x = rectPrevPosScratch.x - rect.pos.x;
  rectTmpVecScratch.y = rectPrevPosScratch.y - rect.pos.y;
  rectTmpVecScratch.z = rectPrevPosScratch.z - rect.pos.z;
  if (rectTmpVecScratch.x * rect.normal.x + rectTmpVecScratch.y * rect.normal.y + rectTmpVecScratch.z * rect.normal.z < 0) {
    return;
  }
  rectTmpVecScratch.x = rectPosScratch.x - rect.pos.x;
  rectTmpVecScratch.y = rectPosScratch.y - rect.pos.y;
  rectTmpVecScratch.z = rectPosScratch.z - rect.pos.z;
  if (rectTmpVecScratch.x * rect.normal.x + rectTmpVecScratch.y * rect.normal.y + rectTmpVecScratch.z * rect.normal.z > ball.radius) {
    return;
  }
  stack.fromTranslate(rect.pos);
  stack.rotateY(atan2S16(rect.normal.x, rect.normal.z));
  stack.rotateX(-atan2S16(rect.normal.y, sqrt(sumSq2(rect.normal.x, rect.normal.z))));
  stack.rigidInvTfPoint(rectPosScratch, rectPosLocalScratch);
  const halfWidth = 0.5 * rect.width;
  const halfHeight = 0.5 * rect.height;
  if (rectPosLocalScratch.x < -halfWidth - ball.radius) {
    return;
  }
  if (rectPosLocalScratch.x > halfWidth + ball.radius) {
    return;
  }
  if (rectPosLocalScratch.y < -halfHeight - ball.radius) {
    return;
  }
  if (rectPosLocalScratch.y > halfHeight + ball.radius) {
    return;
  }
  if (rectPosLocalScratch.x < -halfWidth) {
    rectTmpVecScratch.x = rectPosLocalScratch.x + halfWidth;
    rectTmpVecScratch.z = rectPosLocalScratch.z;
    const distSq = sumSq2(rectTmpVecScratch.x, rectTmpVecScratch.z);
    if (distSq > ball.radius * ball.radius) {
      return;
    }
    if (distSq > FLT_EPSILON) {
      const inv = rsqrt(distSq);
      rectTmpVecScratch.x *= inv;
      rectTmpVecScratch.y = 0;
      rectTmpVecScratch.z *= inv;
    } else {
      rectTmpVecScratch.x = -1;
      rectTmpVecScratch.y = 0;
      rectTmpVecScratch.z = 0;
    }
    stack.tfVec(rectTmpVecScratch, rectPlaneScratch.normal);
    rectTmpVecScratch.x = -halfWidth;
    rectTmpVecScratch.y = 0;
    rectTmpVecScratch.z = 0;
    stack.tfPoint(rectTmpVecScratch, rectPlaneScratch.point);
    collideBallWithPlane(ball, rectPlaneScratch);
  } else if (rectPosLocalScratch.x > halfWidth) {
    rectTmpVecScratch.x = rectPosLocalScratch.x - halfWidth;
    rectTmpVecScratch.z = rectPosLocalScratch.z;
    const distSq = sumSq2(rectTmpVecScratch.x, rectTmpVecScratch.z);
    if (distSq > ball.radius * ball.radius) {
      return;
    }
    if (distSq > FLT_EPSILON) {
      const inv = rsqrt(distSq);
      rectTmpVecScratch.x *= inv;
      rectTmpVecScratch.y = 0;
      rectTmpVecScratch.z *= inv;
    } else {
      rectTmpVecScratch.x = 1;
      rectTmpVecScratch.y = 0;
      rectTmpVecScratch.z = 0;
    }
    stack.tfVec(rectTmpVecScratch, rectPlaneScratch.normal);
    rectTmpVecScratch.x = halfWidth;
    rectTmpVecScratch.y = 0;
    rectTmpVecScratch.z = 0;
    stack.tfPoint(rectTmpVecScratch, rectPlaneScratch.point);
    collideBallWithPlane(ball, rectPlaneScratch);
  } else if (rectPosLocalScratch.y < -halfHeight) {
    rectTmpVecScratch.y = rectPosLocalScratch.y + halfHeight;
    rectTmpVecScratch.z = rectPosLocalScratch.z;
    const distSq = sumSq2(rectTmpVecScratch.y, rectTmpVecScratch.z);
    if (distSq > ball.radius * ball.radius) {
      return;
    }
    if (distSq > FLT_EPSILON) {
      const inv = rsqrt(distSq);
      rectTmpVecScratch.x = 0;
      rectTmpVecScratch.y *= inv;
      rectTmpVecScratch.z *= inv;
    } else {
      rectTmpVecScratch.x = 0;
      rectTmpVecScratch.y = -1;
      rectTmpVecScratch.z = 0;
    }
    stack.tfVec(rectTmpVecScratch, rectPlaneScratch.normal);
    rectTmpVecScratch.x = 0;
    rectTmpVecScratch.y = -halfHeight;
    rectTmpVecScratch.z = 0;
    stack.tfPoint(rectTmpVecScratch, rectPlaneScratch.point);
    collideBallWithPlane(ball, rectPlaneScratch);
  } else if (rectPosLocalScratch.y > halfHeight) {
    rectTmpVecScratch.y = rectPosLocalScratch.y - halfHeight;
    rectTmpVecScratch.z = rectPosLocalScratch.z;
    const distSq = sumSq2(rectTmpVecScratch.y, rectTmpVecScratch.z);
    if (distSq > ball.radius * ball.radius) {
      return;
    }
    if (distSq > FLT_EPSILON) {
      const inv = rsqrt(distSq);
      rectTmpVecScratch.x = 0;
      rectTmpVecScratch.y *= inv;
      rectTmpVecScratch.z *= inv;
    } else {
      rectTmpVecScratch.x = 0;
      rectTmpVecScratch.y = 1;
      rectTmpVecScratch.z = 0;
    }
    stack.tfVec(rectTmpVecScratch, rectPlaneScratch.normal);
    rectTmpVecScratch.x = 0;
    rectTmpVecScratch.y = halfHeight;
    rectTmpVecScratch.z = 0;
    stack.tfPoint(rectTmpVecScratch, rectPlaneScratch.point);
    collideBallWithPlane(ball, rectPlaneScratch);
  } else {
    rectPlaneScratch.point.x = rect.pos.x;
    rectPlaneScratch.point.y = rect.pos.y;
    rectPlaneScratch.point.z = rect.pos.z;
    rectPlaneScratch.normal.x = rect.normal.x;
    rectPlaneScratch.normal.y = rect.normal.y;
    rectPlaneScratch.normal.z = rect.normal.z;
    collideBallWithPlane(ball, rectPlaneScratch);
  }
}
function collideBallWithJamabar(ball, jamabar) {
  const ballPos = { x: 0, y: 0, z: 0 };
  stack.fromTranslate(jamabar.pos);
  stack.rotateX(jamabar.rot.x);
  stack.rotateY(jamabar.rot.y);
  stack.rotateZ(jamabar.rot.z);
  tfBallToLocal(ball);
  ballPos.x = ball.pos.x;
  ballPos.y = ball.pos.y;
  ballPos.z = ball.pos.z;
  for (const rect of JAMABAR_COLI_RECTS) {
    collideBallWithRect(ball, rect);
  }
  const delta = 0.75 * (ball.pos.z - ballPos.z);
  jamabar.localPos.z -= delta;
  ball.pos.z += delta;
  const localVel = jamabar.localVel.z;
  if (delta * localVel > 0) {
    jamabar.localVel.z *= 0.5;
    ball.vel.z += 2.5 * (localVel - jamabar.localVel.z);
  }
  stack.fromTranslate(jamabar.pos);
  stack.rotateX(jamabar.rot.x);
  stack.rotateY(jamabar.rot.y);
  stack.rotateZ(jamabar.rot.z);
  tfBallToWorld(ball);
}
function collideBallWithBumper(ball, bumper) {
  if (bumper.state !== void 0) {
    bumper.state = 1;
  }
  const resolveRadius = bumper.modelRadius ?? bumper.radius;
  bumperTempPos.x = bumper.pos.x;
  bumperTempPos.y = bumper.pos.y;
  bumperTempPos.z = bumper.pos.z;
  resolveMovingSpheres(ball.prevPos, ball.pos, bumper.prevPos, bumperTempPos, ball.radius, resolveRadius);
  bumperNormal.x = ball.pos.x - bumper.pos.x;
  bumperNormal.y = ball.pos.y - bumper.pos.y;
  bumperNormal.z = ball.pos.z - bumper.pos.z;
  vecNormalizeLen(bumperNormal);
  const push = -1.5 * (bumperNormal.x * ball.vel.x + bumperNormal.y * ball.vel.y + bumperNormal.z * ball.vel.z);
  if (push > 0) {
    ball.vel.x += push * bumperNormal.x;
    ball.vel.y += push * bumperNormal.y;
    ball.vel.z += push * bumperNormal.z;
  }
  ball.vel.x += 0.05 * bumperNormal.x;
  ball.vel.y += 0.05 * bumperNormal.y;
  ball.vel.z += 0.05 * bumperNormal.z;
  const dist = bumper.radius + ball.radius + 0.01;
  ball.pos.x = bumper.pos.x + bumperNormal.x * dist;
  ball.pos.y = bumper.pos.y + bumperNormal.y * dist;
  ball.pos.z = bumper.pos.z + bumperNormal.z * dist;
  if (ball.audio) {
    ball.audio.bumperHit = true;
  }
}
function collideBallWithCylinder(ball, cylinder) {
  cylinderTmpVec.x = ball.pos.x - cylinder.pos.x;
  cylinderTmpVec.y = ball.pos.y - cylinder.pos.y;
  cylinderTmpVec.z = ball.pos.z - cylinder.pos.z;
  const ballCylDistSq = sumSq3(cylinderTmpVec.x, cylinderTmpVec.y, cylinderTmpVec.z);
  const cullRadius = ball.radius + sqrt(sumSq2(cylinder.radius, cylinder.height));
  if (ballCylDistSq > cullRadius * cullRadius) {
    return;
  }
  stack.fromTranslate(cylinder.pos);
  stack.rotateZ(cylinder.rot.z);
  stack.rotateY(cylinder.rot.y);
  stack.rotateX(cylinder.rot.x);
  stack.rigidInvTfPoint(ball.pos, cylinderPosLocal);
  stack.rigidInvTfPoint(ball.prevPos, cylinderPrevLocal);
  if (cylinderPrevLocal.y < 0.5 * -cylinder.height) {
    cylinderCircle.pos.x = 0;
    cylinderCircle.pos.y = 0.5 * -cylinder.height;
    cylinderCircle.pos.z = 0;
    cylinderCircle.radius = cylinder.radius;
    cylinderCircle.rot.x = cylinder.rot.x - 32768;
    cylinderCircle.rot.y = cylinder.rot.y;
    cylinderCircle.rot.z = cylinder.rot.z;
    stack.tfPoint(cylinderCircle.pos, cylinderCircle.pos);
    collideBallWithCircle(ball, cylinderCircle);
    return;
  }
  if (cylinderPrevLocal.y > 0.5 * cylinder.height) {
    cylinderCircle.pos.x = 0;
    cylinderCircle.pos.y = 0.5 * cylinder.height;
    cylinderCircle.pos.z = 0;
    cylinderCircle.radius = cylinder.radius;
    cylinderCircle.rot.x = cylinder.rot.x;
    cylinderCircle.rot.y = cylinder.rot.y;
    cylinderCircle.rot.z = cylinder.rot.z;
    stack.tfPoint(cylinderCircle.pos, cylinderCircle.pos);
    collideBallWithCircle(ball, cylinderCircle);
    return;
  }
  const dist2d = sumSq2(cylinderPosLocal.x, cylinderPosLocal.z);
  const radiusSum = cylinder.radius + ball.radius;
  if (dist2d > radiusSum * radiusSum || dist2d < FLT_EPSILON) {
    return;
  }
  const invLen = rsqrt(dist2d);
  cylinderPlane.point.x = cylinderPosLocal.x * invLen * cylinder.radius;
  cylinderPlane.point.y = cylinderPosLocal.y;
  cylinderPlane.point.z = cylinderPosLocal.z * invLen * cylinder.radius;
  cylinderPlane.normal.x = cylinderPosLocal.x * invLen;
  cylinderPlane.normal.y = 0;
  cylinderPlane.normal.z = cylinderPosLocal.z * invLen;
  stack.tfVec(cylinderPlane.normal, cylinderPlane.normal);
  stack.tfPoint(cylinderPlane.point, cylinderPlane.point);
  collideBallWithPlane(ball, cylinderPlane);
}
function collideBallWithCircle(ball, circle) {
  const tmpVec3 = {
    x: ball.pos.x - circle.pos.x,
    y: ball.pos.y - circle.pos.y,
    z: ball.pos.z - circle.pos.z
  };
  const distSq = sumSq3(tmpVec3.x, tmpVec3.y, tmpVec3.z);
  const radiusSum = ball.radius + circle.radius;
  if (distSq > radiusSum * radiusSum) {
    return;
  }
  stack.fromTranslate(circle.pos);
  stack.rotateZ(circle.rot.z);
  stack.rotateY(circle.rot.y);
  stack.rotateX(circle.rot.x);
  const ballPosCircle = { x: 0, y: 0, z: 0 };
  stack.rigidInvTfPoint(ball.pos, ballPosCircle);
  const dist2d = sumSq2(ballPosCircle.x, ballPosCircle.z);
  if (dist2d < circle.radius * circle.radius) {
    const plane = {
      point: { x: 0, y: 0, z: 0 },
      normal: { x: 0, y: 1, z: 0 }
    };
    stack.getTranslateAlt(plane.point);
    stack.tfVec(plane.normal, plane.normal);
    collideBallWithPlane(ball, plane);
    return;
  }
  const radiusSumSq = radiusSum * radiusSum;
  if (dist2d < radiusSumSq && dist2d > FLT_EPSILON) {
    const temp = circle.radius * rsqrt(dist2d);
    const planePoint = {
      x: ballPosCircle.x * temp,
      y: 0,
      z: ballPosCircle.z * temp
    };
    tmpVec3.x = ballPosCircle.x - planePoint.x;
    tmpVec3.y = ballPosCircle.y - planePoint.y;
    tmpVec3.z = ballPosCircle.z - planePoint.z;
    const distSq2 = sumSq3(tmpVec3.x, tmpVec3.y, tmpVec3.z);
    if (distSq2 > FLT_EPSILON) {
      const invLen = rsqrt(distSq2);
      const plane = {
        point: planePoint,
        normal: { x: tmpVec3.x * invLen, y: tmpVec3.y * invLen, z: tmpVec3.z * invLen }
      };
      stack.tfPoint(plane.point, plane.point);
      stack.tfVec(plane.normal, plane.normal);
      collideBallWithPlane(ball, plane);
    }
  }
}
function collideBallWithSphere(ball, sphere) {
  const tmpVec3 = {
    x: ball.pos.x - sphere.pos.x,
    y: ball.pos.y - sphere.pos.y,
    z: ball.pos.z - sphere.pos.z
  };
  const distSq = sumSq3(tmpVec3.x, tmpVec3.y, tmpVec3.z);
  const radiusSum = sphere.radius + ball.radius;
  if (distSq > radiusSum * radiusSum || distSq <= FLT_EPSILON) {
    return;
  }
  const invDist = rsqrt(distSq);
  tmpVec3.x *= invDist;
  tmpVec3.y *= invDist;
  tmpVec3.z *= invDist;
  const plane = {
    point: {
      x: sphere.pos.x + tmpVec3.x * sphere.radius,
      y: sphere.pos.y + tmpVec3.y * sphere.radius,
      z: sphere.pos.z + tmpVec3.z * sphere.radius
    },
    normal: { x: tmpVec3.x, y: tmpVec3.y, z: tmpVec3.z }
  };
  collideBallWithPlane(ball, plane);
}
function collideBallWithCone(ball, cone) {
  const tmpVec3 = {
    x: ball.pos.x - cone.pos.x,
    y: ball.pos.y - cone.pos.y,
    z: ball.pos.z - cone.pos.z
  };
  const distSq = sumSq3(tmpVec3.x, tmpVec3.y, tmpVec3.z);
  const maxScale = cone.scale.x > cone.scale.y ? cone.scale.x : cone.scale.y;
  const cullRadius = maxScale + ball.radius;
  if (distSq > cullRadius * cullRadius) {
    return;
  }
  stack.fromTranslate(cone.pos);
  stack.rotateZ(cone.rot.z);
  stack.rotateY(cone.rot.y);
  stack.rotateX(cone.rot.x);
  const ballPosCone = { x: 0, y: 0, z: 0 };
  stack.rigidInvTfPoint(ball.pos, ballPosCone);
  if (ballPosCone.y < -ball.radius || ballPosCone.y > cone.scale.y + ball.radius) {
    return;
  }
  const dist2d = sumSq2(ballPosCone.x, ballPosCone.z);
  const cylCullRadius = cone.scale.x + ball.radius;
  if (dist2d > cylCullRadius * cylCullRadius) {
    return;
  }
  stack.translateXYZ(0, cone.scale.y, 0);
  stack.rotateY(-atan2S16(ballPosCone.z, ballPosCone.x));
  stack.rotateZ(-atan2S16(cone.scale.y, cone.scale.x));
  stack.rigidInvTfPoint(ball.pos, tmpVec3);
  if (tmpVec3.x < 0) {
    const plane = {
      point: { x: 0, y: 0, z: 0 },
      normal: { x: tmpVec3.x, y: tmpVec3.y, z: tmpVec3.z }
    };
    stack.getTranslateAlt(plane.point);
    const lenSq = sumSq3(tmpVec3.x, tmpVec3.y, tmpVec3.z);
    if (lenSq <= FLT_EPSILON) {
      return;
    }
    const invLen = 1 / sqrt(lenSq);
    plane.normal.x = tmpVec3.x * invLen;
    plane.normal.y = tmpVec3.y * invLen;
    plane.normal.z = tmpVec3.z * invLen;
    stack.tfVec(plane.normal, plane.normal);
    collideBallWithPlane(ball, plane);
  } else {
    const baseRadius = sqrt(sumSq2(cone.scale.x, cone.scale.y));
    if (tmpVec3.x > ball.radius + baseRadius) {
      return;
    }
    const plane = {
      point: { x: 0, y: 0, z: 0 },
      normal: { x: 0, y: 1, z: 0 }
    };
    stack.getTranslateAlt(plane.point);
    stack.tfVec(plane.normal, plane.normal);
    collideBallWithPlane(ball, plane);
  }
}
function goalSub22(ball, info) {
  const maxDist = info.radius + info.thickness + ball.radius;
  const minDist = info.radius - info.thickness - ball.radius;
  const dist = vecDistance(ball.pos, info.center);
  if (dist > maxDist || dist < minDist) {
    return;
  }
  stack.fromTranslate(info.center);
  stack.rotateZ(info.rotZ);
  stack.rotateY(info.rotY);
  stack.rotateX(info.rotX);
  stack.rigidInvTfPoint(ball.pos, goalSubPosLocal);
  stack.rigidInvTfPoint(ball.prevPos, goalSubPrevLocal);
  goalRingPoint.x = goalSubPosLocal.x + goalSubPrevLocal.x;
  goalRingPoint.y = goalSubPosLocal.y + goalSubPrevLocal.y;
  goalRingPoint.z = 0;
  vecSetLen(goalRingPoint, goalRingPoint, info.radius);
  if (intersectsMovingSpheres(goalSubPrevLocal, goalSubPosLocal, goalRingPoint, goalRingPoint, ball.radius, info.thickness)) {
    goalPlaneVec.x = goalSubPrevLocal.x - goalRingPoint.x;
    goalPlaneVec.y = goalSubPrevLocal.y - goalRingPoint.y;
    goalPlaneVec.z = goalSubPrevLocal.z - goalRingPoint.z;
    vecNormalizeLen(goalPlaneVec);
    stack.tfVec(goalPlaneVec, goalPlane.normal);
    goalRingPoint.x += goalPlaneVec.x * info.thickness;
    goalRingPoint.y += goalPlaneVec.y * info.thickness;
    goalRingPoint.z += goalPlaneVec.z * info.thickness;
    stack.tfPoint(goalRingPoint, goalPlane.point);
    collideBallWithPlane(ball, goalPlane);
  }
}
function goalSub23(ball, info) {
  goalUpVec.x = 0;
  goalUpVec.y = -1;
  goalUpVec.z = 0;
  stack.tfVec(goalUpVec, goalUpVec);
  goalDirVec.x = ball.pos.x - info.center.x;
  goalDirVec.y = ball.pos.y - info.center.y;
  goalDirVec.z = ball.pos.z - info.center.z;
  vecNormalizeLen(goalDirVec);
  if (!(vecDot(goalUpVec, goalDirVec) > GOAL_RING_MIN_DOT)) {
    goalSub22(ball, info);
  }
}
function goalSub24(ball, info) {
  const maxDist = info.radius + info.thickness + ball.radius;
  if (vecDistance(ball.pos, info.center) > maxDist) {
    return;
  }
  stack.fromTranslate(info.center);
  stack.rotateZ(info.rotZ);
  stack.rotateY(info.rotY);
  stack.rotateX(info.rotX);
  stack.rigidInvTfPoint(ball.pos, goalSubPosLocal);
  stack.rigidInvTfPoint(ball.prevPos, goalSubPrevLocal);
  goalRingPoint.x = (goalSubPosLocal.x + goalSubPrevLocal.x) * 0.5;
  goalRingPoint.y = (goalSubPosLocal.y + goalSubPrevLocal.y) * 0.5;
  goalRingPoint.z = 0;
  if (goalRingPoint.y < -0.5) {
    goalRingPoint.y = -0.5;
  }
  const ringLen = sqrt(sumSq2(goalRingPoint.x, goalRingPoint.y));
  if (ringLen > info.radius && ringLen > FLT_EPSILON) {
    const scale = info.radius / ringLen;
    goalRingPoint.x *= scale;
    goalRingPoint.y *= scale;
    goalRingPoint.z *= scale;
  }
  if (intersectsMovingSpheres(goalSubPrevLocal, goalSubPosLocal, goalRingPoint, goalRingPoint, ball.radius, info.thickness)) {
    goalPlaneVec.x = goalSubPrevLocal.x - goalRingPoint.x;
    goalPlaneVec.y = goalSubPrevLocal.y - goalRingPoint.y;
    goalPlaneVec.z = goalSubPrevLocal.z - goalRingPoint.z;
    vecNormalizeLen(goalPlaneVec);
    stack.tfVec(goalPlaneVec, goalPlane.normal);
    goalRingPoint.x += goalPlaneVec.x * info.thickness;
    goalRingPoint.y += goalPlaneVec.y * info.thickness;
    goalRingPoint.z += goalPlaneVec.z * info.thickness;
    stack.tfPoint(goalRingPoint, goalPlane.point);
    collideBallWithPlane(ball, goalPlane);
  }
}
function collideBallWithGoal(ball, goal) {
  stack.fromTranslate(goal.pos);
  stack.rotateZ(goal.rot.z);
  stack.rotateY(goal.rot.y);
  stack.rotateX(goal.rot.x);
  stack.push();
  goalRingInfo.center.x = 0;
  goalRingInfo.center.y = 3.2;
  goalRingInfo.center.z = 0;
  goalRingInfo.rotX = goal.rot.x;
  goalRingInfo.rotY = goal.rot.y;
  goalRingInfo.rotZ = goal.rot.z;
  stack.tfPoint(goalRingInfo.center, goalRingInfo.center);
  goalSub23(ball, goalRingInfo);
  stack.pop();
  stack.push();
  goalRingInfo2.center.x = 0;
  goalRingInfo2.center.y = 3.2;
  goalRingInfo2.center.z = 0;
  goalRingInfo2.rotX = goal.rot.x;
  goalRingInfo2.rotY = goal.rot.y;
  goalRingInfo2.rotZ = goal.rot.z;
  stack.tfPoint(goalRingInfo2.center, goalRingInfo2.center);
  goalSub24(ball, goalRingInfo2);
  stack.pop();
  stack.push();
  goalCyl.pos.x = 1.1;
  goalCyl.pos.y = 0.75;
  goalCyl.pos.z = 0;
  goalCyl.rot.x = goal.rot.x;
  goalCyl.rot.y = goal.rot.y;
  goalCyl.rot.z = goal.rot.z;
  stack.tfPoint(goalCyl.pos, goalCyl.pos);
  collideBallWithCylinder(ball, goalCyl);
  stack.pop();
  stack.push();
  goalCyl2.pos.x = -1.1;
  goalCyl2.pos.y = 0.75;
  goalCyl2.pos.z = 0;
  goalCyl2.rot.x = goal.rot.x;
  goalCyl2.rot.y = goal.rot.y;
  goalCyl2.rot.z = goal.rot.z;
  stack.tfPoint(goalCyl2.pos, goalCyl2.pos);
  collideBallWithCylinder(ball, goalCyl2);
  stack.pop();
}
function collideBallWithGoalBag(ball, bag) {
  goalBagVecA.x = ball.pos.x - bag.position.x;
  goalBagVecA.y = ball.pos.y - bag.position.y;
  goalBagVecA.z = ball.pos.z - bag.position.z;
  if (vecNormalizeLen(goalBagVecA) === 0) {
    return;
  }
  goalBagVecB.x = bag.position.x - bag.prevPos.x;
  goalBagVecB.y = bag.position.y - bag.prevPos.y;
  goalBagVecB.z = bag.position.z - bag.prevPos.z;
  goalBagVecC.x = ball.vel.x;
  goalBagVecC.y = ball.vel.y;
  goalBagVecC.z = ball.vel.z;
  goalBagVecD.x = goalBagVecC.x - goalBagVecB.x;
  goalBagVecD.y = goalBagVecC.y - goalBagVecB.y;
  goalBagVecD.z = goalBagVecC.z - goalBagVecB.z;
  let var_f26 = 0;
  let temp_f0 = -1.5 * vecDot(goalBagVecA, ball.vel);
  if (temp_f0 > 0) {
    var_f26 = temp_f0;
    goalBagVecD.x += temp_f0 * goalBagVecA.x;
    goalBagVecD.y += temp_f0 * goalBagVecA.y;
    goalBagVecD.z += temp_f0 * goalBagVecA.z;
    ball.vel.x = goalBagVecD.x + goalBagVecB.x;
    ball.vel.y = goalBagVecD.y + goalBagVecB.y;
    ball.vel.z = goalBagVecD.z + goalBagVecB.z;
  }
  const temp_f25 = bag.boundSphereRadius + ball.radius;
  goalBagVecA.x *= temp_f25;
  goalBagVecA.y *= temp_f25;
  goalBagVecA.z *= temp_f25;
  ball.pos.x += bag.position.x + goalBagVecA.x - ball.pos.x;
  ball.pos.y += bag.position.y + goalBagVecA.y - ball.pos.y;
  ball.pos.z += bag.position.z + goalBagVecA.z - ball.pos.z;
  temp_f0 = -vecDot(goalBagVecA, bag.localPos);
  goalBagVecA.x += temp_f0 * bag.localPos.x;
  goalBagVecA.y += temp_f0 * bag.localPos.y;
  goalBagVecA.z += temp_f0 * bag.localPos.z;
  vecNormalizeLen(goalBagVecA);
  goalBagVecD.x = goalBagVecB.x + bag.localVel.x - goalBagVecC.x;
  goalBagVecD.y = goalBagVecB.y + bag.localVel.y - goalBagVecC.y;
  goalBagVecD.z = goalBagVecB.z + bag.localVel.z - goalBagVecC.z;
  temp_f0 = -2 * vecDot(goalBagVecA, goalBagVecD);
  if (temp_f0 < 0) {
    goalBagVecD.x += temp_f0 * goalBagVecA.x;
    goalBagVecD.y += temp_f0 * goalBagVecA.y;
    goalBagVecD.z += temp_f0 * goalBagVecA.z;
    bag.localVel.x = goalBagVecC.x + (goalBagVecD.x - goalBagVecB.x);
    bag.localVel.y = goalBagVecC.y + (goalBagVecD.y - goalBagVecB.y);
    bag.localVel.z = goalBagVecC.z + (goalBagVecD.z - goalBagVecB.z);
  }
  temp_f0 = -vecDot(bag.localPos, bag.localVel);
  bag.localVel.x += temp_f0 * bag.localPos.x;
  bag.localVel.y += temp_f0 * bag.localPos.y;
  bag.localVel.z += temp_f0 * bag.localPos.z;
  if (bag.flags !== 0) {
    temp_f0 = -2 * vecDot(bag.localPos, goalBagVecC);
    if (temp_f0 < 0) {
      bag.unk8 += temp_f0;
    }
  }
  if (var_f26 > 0.1) {
  }
}
function collideBallWithGoalTape(ball, tape) {
  if (!tape || !tape.points || tape.points.length === 0) {
    return;
  }
  goalTapeLocalPos.x = ball.pos.x;
  goalTapeLocalPos.y = ball.pos.y;
  goalTapeLocalPos.z = ball.pos.z;
  stack.fromIdentity();
  stack.translate(tape.goal.pos);
  stack.rotateZ(tape.goal.rot.z);
  stack.rotateY(tape.goal.rot.y);
  stack.rotateX(tape.goal.rot.x);
  stack.rigidInvTfPoint(goalTapeLocalPos, goalTapeLocalPos);
  const radius = ball.radius;
  const radiusSq = radius * radius;
  goalTapeImpulse.x = 0;
  goalTapeImpulse.y = 0;
  goalTapeImpulse.z = 0;
  let hit = false;
  for (const point of tape.points) {
    if (point.flags & 1) {
      continue;
    }
    goalTapeDelta.x = point.pos.x - goalTapeLocalPos.x;
    if (Math.abs(goalTapeDelta.x) > radius) {
      continue;
    }
    goalTapeDelta.z = point.pos.z - goalTapeLocalPos.z;
    if (Math.abs(goalTapeDelta.z) > radius) {
      continue;
    }
    goalTapeDelta.y = point.pos.y - goalTapeLocalPos.y;
    if (Math.abs(goalTapeDelta.y) > radius) {
      continue;
    }
    const distSq = goalTapeDelta.x * goalTapeDelta.x + goalTapeDelta.y * goalTapeDelta.y + goalTapeDelta.z * goalTapeDelta.z;
    if (distSq > radiusSq) {
      continue;
    }
    vecSetLen(goalTapeDelta, goalTapeDelta, radius);
    const newX = goalTapeLocalPos.x + goalTapeDelta.x;
    const newY = goalTapeLocalPos.y + goalTapeDelta.y;
    const newZ = goalTapeLocalPos.z + goalTapeDelta.z;
    const deltaX = newX - point.pos.x;
    const deltaY = newY - point.pos.y;
    const deltaZ = newZ - point.pos.z;
    point.pos.x = newX;
    point.pos.y = newY;
    point.pos.z = newZ;
    point.vel.x += deltaX;
    point.vel.y += deltaY;
    point.vel.z += deltaZ;
    hit = true;
    const moveLen = sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ);
    vecSetLen(goalTapeImpulseStep, goalTapeDelta, moveLen * -0.05);
    goalTapeImpulse.x += goalTapeImpulseStep.x;
    goalTapeImpulse.y += goalTapeImpulseStep.y;
    goalTapeImpulse.z += goalTapeImpulseStep.z;
    goalTapeNormalScratch.x = point.normal.x;
    goalTapeNormalScratch.y = point.normal.y;
    goalTapeNormalScratch.z = point.normal.z;
    vecNormalizeLen(goalTapeDelta);
    if (goalTapeDelta.x * goalTapeNormalScratch.x + goalTapeDelta.y * goalTapeNormalScratch.y + goalTapeDelta.z * goalTapeNormalScratch.z < 0) {
      goalTapeDelta.x = -goalTapeDelta.x;
      goalTapeDelta.y = -goalTapeDelta.y;
      goalTapeDelta.z = -goalTapeDelta.z;
    }
    goalTapeNormalScratch.x += (goalTapeDelta.x - goalTapeNormalScratch.x) * 0.125;
    goalTapeNormalScratch.y += (goalTapeDelta.y - goalTapeNormalScratch.y) * 0.125;
    goalTapeNormalScratch.z += (goalTapeDelta.z - goalTapeNormalScratch.z) * 0.125;
    vecNormalizeLen(goalTapeNormalScratch);
    point.normal.x = goalTapeNormalScratch.x;
    point.normal.y = goalTapeNormalScratch.y;
    point.normal.z = goalTapeNormalScratch.z;
  }
  if (hit) {
    stack.tfVec(goalTapeImpulse, goalTapeImpulse);
    ball.vel.x += goalTapeImpulse.x;
    ball.vel.y += goalTapeImpulse.y;
    ball.vel.z += goalTapeImpulse.z;
  }
}
function applySeesawCollision(ball, seesaw) {
  if (!seesaw) {
    return;
  }
  seesawLocalPosScratch.x = ball.pos.x;
  seesawLocalPosScratch.y = ball.pos.y;
  seesawLocalPosScratch.z = ball.pos.z;
  seesawLocalVelScratch.x = ball.vel.x;
  seesawLocalVelScratch.y = ball.vel.y;
  seesawLocalVelScratch.z = ball.vel.z;
  stack.fromMtx(seesaw.invTransform);
  stack.tfPoint(seesawLocalPosScratch, seesawLocalPosScratch);
  stack.tfVec(seesawLocalVelScratch, seesawLocalVelScratch);
  const dist = sqrt(seesawLocalPosScratch.x * seesawLocalPosScratch.x + seesawLocalPosScratch.y * seesawLocalPosScratch.y);
  if (dist <= FLT_EPSILON) {
    return;
  }
  const invDist = 1 / dist;
  const nx = seesawLocalPosScratch.x * invDist;
  const ny = seesawLocalPosScratch.y * invDist;
  const dot = -(nx * seesawLocalVelScratch.x + ny * seesawLocalVelScratch.y);
  seesawLocalVelScratch.x += dot * nx;
  seesawLocalVelScratch.y += dot * ny;
  let velLen = sqrt(seesawLocalVelScratch.x * seesawLocalVelScratch.x + seesawLocalVelScratch.y * seesawLocalVelScratch.y);
  if (-ny * seesawLocalVelScratch.x + nx * seesawLocalVelScratch.y < 0) {
    velLen = -velLen;
  }
  seesaw.angleVel += seesaw.sensitivity * (dist * velLen);
}
function collideBallWithStageObjects(ball, stageRuntime) {
  const animGroups = stageRuntime.animGroups;
  const switchesEnabled = stageRuntime.switchesEnabled !== false;
  for (let animGroupId = 0; animGroupId < animGroups.length; animGroupId += 1) {
    const bumpers = stageRuntime.bumpers[animGroupId];
    const jamabars = stageRuntime.jamabars[animGroupId];
    const goalBags = stageRuntime.goalBagsByGroup?.[animGroupId] ?? [];
    const goalTapes = stageRuntime.goalTapesByGroup?.[animGroupId] ?? [];
    const switches = stageRuntime.switchesByGroup?.[animGroupId] ?? stageRuntime.stage.animGroups[animGroupId]?.switches ?? [];
    if (animGroupId !== ball.animGroupId) {
      tfPhysballToAnimGroupSpace(ball, animGroupId, animGroups);
    }
    for (const bumper of bumpers) {
      if (intersectsMovingSpheres(ball.prevPos, ball.pos, bumper.prevPos, bumper.pos, ball.radius, bumper.radius)) {
        collideBallWithBumper(ball, bumper);
      }
    }
    for (const jamabar of jamabars) {
      if (intersectsMovingSpheres(ball.prevPos, ball.pos, jamabar.prevPos, jamabar.pos, ball.radius, jamabar.radius)) {
        collideBallWithJamabar(ball, jamabar);
      }
    }
    for (const bag of goalBags) {
      if (intersectsMovingSpheres(ball.prevPos, ball.pos, bag.prevPos, bag.position, ball.radius, bag.boundSphereRadius)) {
        collideBallWithGoalBag(ball, bag);
      }
    }
    for (const tape of goalTapes) {
      collideBallWithGoalTape(ball, tape);
    }
    if (!switchesEnabled) {
      continue;
    }
    for (const stageSwitch of switches) {
      const modelBounds = stageSwitch.modelBoundCenter && stageSwitch.modelBoundRadius ? { center: stageSwitch.modelBoundCenter, radius: stageSwitch.modelBoundRadius } : stageRuntime.switchModelBounds?.[stageSwitch.type & 7];
      let hitSwitch = false;
      if (modelBounds) {
        computeSwitchCylinder(stageSwitch, modelBounds, switchCylinderScratch);
        resetSwitchProbeBall(ball);
        collideBallWithCylinder(switchProbeBall, switchCylinderScratch);
        hitSwitch = (switchProbeBall.flags & COLI_FLAGS.OCCURRED) !== 0;
        if (hitSwitch) {
          stack.fromIdentity();
          stack.rotateZ(stageSwitch.rot.z);
          stack.rotateY(stageSwitch.rot.y);
          stack.rotateX(stageSwitch.rot.x);
          stack.rigidInvTfVec(switchProbeBall.hardestColiPlane.normal, switchLocalNormalScratch);
          stageSwitch.localVel.y = switchProbeBall.hardestColiSpeed * switchLocalNormalScratch.y * 0.5;
          stageSwitch.pressImpulse = true;
          collideBallWithCylinder(ball, switchCylinderScratch);
        }
      } else {
        hitSwitch = intersectsMovingSpheres(
          ball.prevPos,
          ball.pos,
          stageSwitch.pos,
          stageSwitch.pos,
          ball.radius,
          SWITCH_TRIGGER_RADIUS
        );
      }
      if (!hitSwitch || stageRuntime.format !== "smb2" && stageSwitch.cooldown > 0) {
        continue;
      }
      if (stageRuntime.format === "smb2") {
        continue;
      }
      stageRuntime.applySwitchPlayback(stageSwitch, true);
      stageSwitch.cooldown = SWITCH_COOLDOWN_FRAMES;
    }
  }
  if (ball.animGroupId !== 0) {
    tfPhysballToAnimGroupSpace(ball, 0, animGroups);
  }
}
function collideBallWithBonusWave(ball, stageRuntime) {
  if (stageRuntime.stage?.format === "smb2") {
    return;
  }
  const stageId = stageRuntime.stage?.stageId ?? 0;
  if (stageId !== BONUS_WAVE_STAGE_ID) {
    return;
  }
  const surface = bonusWaveSurfaceAt(ball.pos.x, ball.pos.z, stageRuntime.timerFrames);
  if (!surface) {
    return;
  }
  collideBallWithPlane(ball, surface);
}
function collideBallWithStage(ball, stage, animGroups) {
  for (let animGroupId = 0; animGroupId < stage.animGroupCount; animGroupId += 1) {
    const stageAg = stage.animGroups[animGroupId];
    if (animGroupId !== ball.animGroupId) {
      tfPhysballToAnimGroupSpace(ball, animGroupId, animGroups);
    }
    const seesawState = animGroups[animGroupId]?.seesawState;
    if (seesawState && stage.format !== "smb2") {
      applySeesawCollision(ball, seesawState);
    }
    const cellTris = coligridLookup(stageAg, ball.pos.x, ball.pos.z);
    if (cellTris) {
      for (const triIndex of cellTris) {
        collideBallWithTriFace(ball, stageAg.triangles[triIndex]);
      }
      for (const triIndex of cellTris) {
        collideBallWithTriEdges(ball, stageAg.triangles[triIndex]);
      }
      for (const triIndex of cellTris) {
        collideBallWithTriVerts(ball, stageAg.triangles[triIndex]);
      }
    }
    for (const cone of stageAg.coliCones) {
      collideBallWithCone(ball, cone);
    }
    for (const sphere of stageAg.coliSpheres) {
      collideBallWithSphere(ball, sphere);
    }
    for (const cylinder of stageAg.coliCylinders) {
      collideBallWithCylinder(ball, cylinder);
    }
    for (const goal of stageAg.goals) {
      collideBallWithGoal(ball, goal);
    }
  }
  if (ball.animGroupId !== 0) {
    tfPhysballToAnimGroupSpace(ball, 0, animGroups);
  }
}

// src/effects.ts
var SPARK_GRAVITY_SCALE = 8e-3;
var SPARK_DAMP = 0.992;
var STAR_GRAVITY_SCALE = 4e-3;
var STAR_DAMP = 0.985;
var SPARK_LIFE_MIN = 15;
var SPARK_LIFE_RANGE = 45;
var STAR_LIFE_MIN = 15;
var STAR_LIFE_RANGE = 45;
var LEVITATE_LIFE_MIN = 60;
var LEVITATE_LIFE_RANGE = 15;
var SPARK_GROUND_CHECK = 0.5;
var STAR_GROUND_CHECK = 0.6;
var SPARK_GROUND_MIN_DIST = 0.025;
var STAR_GROUND_MIN_DIST_SCALE = 8.090365;
var SPARK_GROUND_BLEND = 0.03;
var STAR_GROUND_BLEND = 0.029999971;
var STAR_ROT_KICK_XZ = 131072;
var STAR_ROT_KICK_Y = 524288;
var LEVITATE_GRAVITY = 4e-4;
var LEVITATE_START_VEL = 3e-3;
var LEVITATE_SCALE = 0.24;
var LEVITATE_OFFSET_RADIUS = 0.7;
var LEVITATE_DRIFT = 12e-4;
var LEVITATE_DAMP = 0.98;
var STAR_SCALE_TARGET = 0.015;
var randFloat = (rng) => rng.nextFloat();
var randS16 = (rng) => rng.nextS16();
var nextEffectId = 1;
function createEffect(kind, pos, vel, life) {
  return {
    id: nextEffectId++,
    kind,
    pos: { x: pos.x, y: pos.y, z: pos.z },
    prevPos: { x: pos.x, y: pos.y, z: pos.z },
    groundPos: { x: pos.x, y: pos.y, z: pos.z },
    groundNormal: { x: 0, y: 1, z: 0 },
    groundVel: { x: 0, y: 0, z: 0 },
    glowPos: { x: pos.x, y: pos.y, z: pos.z },
    glowDist: 0,
    glowRotX: 0,
    glowRotY: 0,
    hasGround: false,
    surfaceNormal: { x: 0, y: 1, z: 0 },
    vel: { x: vel.x, y: vel.y, z: vel.z },
    life,
    age: 0,
    scale: 1,
    scaleTarget: 1,
    alpha: 1,
    colorR: 1,
    colorG: 1,
    colorB: 1,
    rotX: 0,
    rotY: 0,
    rotZ: 0,
    prevRotX: 0,
    prevRotY: 0,
    prevRotZ: 0,
    rotVelX: 0,
    rotVelY: 0,
    rotVelZ: 0,
    baseY: pos.y
  };
}
function updateEffectGround(effect, stageRuntime, checkMask, threshold, glowDecay) {
  if ((effect.life & checkMask) === 0) {
    effect.hasGround = false;
    const hit = raycastStageDown(effect.pos, stageRuntime);
    if (hit && hit.normal && effect.pos.y - threshold < hit.pos.y) {
      effect.hasGround = true;
      effect.groundPos.x = hit.pos.x;
      effect.groundPos.y = hit.pos.y;
      effect.groundPos.z = hit.pos.z;
      effect.groundNormal.x = hit.normal.x;
      effect.groundNormal.y = hit.normal.y;
      effect.groundNormal.z = hit.normal.z;
      if (hit.surfaceVel) {
        effect.groundVel.x = hit.surfaceVel.x;
        effect.groundVel.y = hit.surfaceVel.y;
        effect.groundVel.z = hit.surfaceVel.z;
      } else {
        effect.groundVel.x = 0;
        effect.groundVel.y = 0;
        effect.groundVel.z = 0;
      }
    }
  }
  if (!effect.hasGround) {
    if (effect.glowDist > 0) {
      effect.glowDist = Math.max(0, effect.glowDist - glowDecay);
    }
    return;
  }
  const hitNormal = effect.groundNormal;
  const hitPos = effect.groundPos;
  const dx = effect.pos.x - hitPos.x;
  const dy = effect.pos.y - hitPos.y;
  const dz = effect.pos.z - hitPos.z;
  const dist = dx * hitNormal.x + dy * hitNormal.y + dz * hitNormal.z;
  effect.glowDist += (dist - effect.glowDist) * 0.25;
  effect.glowPos.x = effect.pos.x - (dist - 0.02) * hitNormal.x;
  effect.glowPos.y = effect.pos.y - (dist - 0.02) * hitNormal.y;
  effect.glowPos.z = effect.pos.z - (dist - 0.02) * hitNormal.z;
  const rotY = atan2S16(hitNormal.x, hitNormal.z) - 32768;
  const rotX = atan2S16(hitNormal.y, sqrt(sumSq2(hitNormal.x, hitNormal.z)));
  effect.glowRotY = rotY;
  effect.glowRotX = rotX;
}
function applyEffectGroundResponse(effect, minDist, bounceScale, surfaceBlend, randomizeRot = false, rng = null) {
  const normal = effect.groundNormal;
  const dx = effect.pos.x - effect.groundPos.x;
  const dy = effect.pos.y - effect.groundPos.y;
  const dz = effect.pos.z - effect.groundPos.z;
  const dist = dx * normal.x + dy * normal.y + dz * normal.z;
  if (dist >= minDist) {
    return;
  }
  const push = minDist - dist;
  effect.pos.x += push * normal.x;
  effect.pos.y += push * normal.y;
  effect.pos.z += push * normal.z;
  const dot = vecDot(effect.vel, normal);
  if (dot >= 0) {
    return;
  }
  const impulse = -dot;
  effect.vel.x += impulse * normal.x;
  effect.vel.y += impulse * normal.y;
  effect.vel.z += impulse * normal.z;
  effect.vel.x += (effect.groundVel.x - effect.vel.x) * surfaceBlend;
  effect.vel.y += (effect.groundVel.y - effect.vel.y) * surfaceBlend;
  effect.vel.z += (effect.groundVel.z - effect.vel.z) * surfaceBlend;
  if (randomizeRot && rng) {
    effect.rotVelX = toS16(effect.rotVelX + impulse * (randFloat(rng) - 0.5) * STAR_ROT_KICK_XZ);
    effect.rotVelY = toS16(effect.rotVelY + impulse * (randFloat(rng) - 0.5) * STAR_ROT_KICK_Y);
    effect.rotVelZ = toS16(effect.rotVelZ + impulse * (randFloat(rng) - 0.5) * STAR_ROT_KICK_XZ);
  }
  effect.vel.x += impulse * bounceScale * normal.x;
  effect.vel.y += impulse * bounceScale * normal.y;
  effect.vel.z += impulse * bounceScale * normal.z;
}
function updateEffectGlow(effect, stageRuntime, threshold, glowDecay) {
  if ((effect.life & 15) !== 0) {
    if (effect.hasGround) {
      const hitNormal = effect.groundNormal;
      const hitPos = effect.groundPos;
      const dx2 = effect.pos.x - hitPos.x;
      const dy2 = effect.pos.y - hitPos.y;
      const dz2 = effect.pos.z - hitPos.z;
      const dist2 = dx2 * hitNormal.x + dy2 * hitNormal.y + dz2 * hitNormal.z;
      effect.glowDist += (dist2 - effect.glowDist) * 0.25;
      effect.glowPos.x = effect.pos.x - (dist2 - 0.02) * hitNormal.x;
      effect.glowPos.y = effect.pos.y - (dist2 - 0.02) * hitNormal.y;
      effect.glowPos.z = effect.pos.z - (dist2 - 0.02) * hitNormal.z;
    }
    return;
  }
  const hit = raycastStageDown(effect.pos, stageRuntime);
  if (!hit || hit.pos.y < effect.pos.y - threshold) {
    effect.hasGround = false;
    if (effect.glowDist > 0) {
      effect.glowDist = Math.max(0, effect.glowDist - glowDecay);
    }
    return;
  }
  if (!hit.normal) {
    effect.hasGround = false;
    return;
  }
  effect.hasGround = true;
  effect.groundPos.x = hit.pos.x;
  effect.groundPos.y = hit.pos.y;
  effect.groundPos.z = hit.pos.z;
  effect.groundNormal.x = hit.normal.x;
  effect.groundNormal.y = hit.normal.y;
  effect.groundNormal.z = hit.normal.z;
  const dx = effect.pos.x - hit.pos.x;
  const dy = effect.pos.y - hit.pos.y;
  const dz = effect.pos.z - hit.pos.z;
  const dist = dx * hit.normal.x + dy * hit.normal.y + dz * hit.normal.z;
  effect.glowDist += (dist - effect.glowDist) * 0.25;
  effect.glowPos.x = effect.pos.x - (dist - 0.02) * hit.normal.x;
  effect.glowPos.y = effect.pos.y - (dist - 0.02) * hit.normal.y;
  effect.glowPos.z = effect.pos.z - (dist - 0.02) * hit.normal.z;
  const rotY = atan2S16(hit.normal.x, hit.normal.z) - 32768;
  const rotX = atan2S16(hit.normal.y, sqrt(sumSq2(hit.normal.x, hit.normal.z)));
  effect.glowRotY = rotY;
  effect.glowRotX = rotX;
}
function updateBallEffects(effects, gravity, stageRuntime, rng) {
  for (let i = effects.length - 1; i >= 0; i -= 1) {
    const effect = effects[i];
    effect.prevPos.x = effect.pos.x;
    effect.prevPos.y = effect.pos.y;
    effect.prevPos.z = effect.pos.z;
    effect.prevRotX = effect.rotX;
    effect.prevRotY = effect.rotY;
    effect.prevRotZ = effect.rotZ;
    effect.age += 1;
    effect.life -= 1;
    if (effect.life <= 0) {
      effects.splice(i, 1);
      continue;
    }
    if (effect.kind === "levitate") {
      effect.vel.x *= LEVITATE_DAMP;
      effect.vel.y = effect.vel.y * LEVITATE_DAMP + LEVITATE_GRAVITY;
      effect.vel.z *= LEVITATE_DAMP;
      effect.pos.x += effect.vel.x;
      effect.pos.y += effect.vel.y;
      effect.pos.z += effect.vel.z;
      const lifeRatio = effect.life / Math.max(1, effect.life + effect.age);
      effect.alpha = Math.min(1, Math.max(0, lifeRatio));
      effect.scale = effect.scaleTarget * (0.6 + 0.4 * effect.alpha);
      continue;
    }
    if (effect.kind === "coliflash") {
      effect.scale += (effect.scaleTarget - effect.scale) * 0.1;
      const normal = effect.surfaceNormal;
      const nx = -normal.x;
      const nz = -normal.z;
      const rotY = atan2S16(nx, nz);
      const rotX = toS16(atan2S16(normal.y, sqrt(sumSq2(nx, nz))) - 32768);
      effect.rotY = rotY;
      effect.rotX = rotX;
      if (effect.life < 8) {
        const life = Math.max(1, effect.life);
        effect.alpha *= Math.max(0, (life - 1) / life);
      }
      updateEffectGlow(effect, stageRuntime, STAR_GROUND_CHECK, 0.0625);
      continue;
    }
    const gravityScale = effect.kind === "colistar" ? STAR_GRAVITY_SCALE : SPARK_GRAVITY_SCALE;
    const damp = effect.kind === "colistar" ? STAR_DAMP : SPARK_DAMP;
    effect.vel.x += gravity.x * gravityScale;
    effect.vel.y += gravity.y * gravityScale;
    effect.vel.z += gravity.z * gravityScale;
    effect.vel.x *= damp;
    effect.vel.y *= damp;
    effect.vel.z *= damp;
    effect.pos.x += effect.vel.x;
    effect.pos.y += effect.vel.y;
    effect.pos.z += effect.vel.z;
    if (effect.kind === "colistar") {
      effect.rotVelX -= effect.rotVelX >> 2;
      effect.rotVelY -= effect.rotVelY >> 5;
      effect.rotVelZ -= effect.rotVelZ >> 3;
      effect.rotX = toS16(effect.rotX + effect.rotVelX);
      effect.rotY = toS16(effect.rotY + effect.rotVelY);
      effect.rotZ = toS16(effect.rotZ + effect.rotVelZ);
      if (effect.life < 24) {
        effect.scale *= effect.life / (effect.life + 1);
      } else {
        effect.scale += (effect.scaleTarget - effect.scale) * 0.3312;
      }
      updateEffectGround(effect, stageRuntime, 7, STAR_GROUND_CHECK, 0.0625);
      if (effect.hasGround) {
        applyEffectGroundResponse(
          effect,
          effect.scale * STAR_GROUND_MIN_DIST_SCALE,
          1,
          STAR_GROUND_BLEND,
          true,
          rng
        );
      }
    } else {
      updateEffectGround(effect, stageRuntime, 15, SPARK_GROUND_CHECK, 0.125);
      if (effect.hasGround) {
        applyEffectGroundResponse(effect, SPARK_GROUND_MIN_DIST, 0.9, SPARK_GROUND_BLEND);
      }
    }
    if (effect.kind === "coli") {
      if (effect.life < 24) {
        effect.scale = effect.life / 24;
        effect.colorR *= 0.96;
        effect.colorG *= 0.87;
        effect.colorB *= 0.86;
      } else {
        effect.scale = 1;
      }
    }
    if (effect.life < 24) {
      effect.alpha = Math.max(0, effect.life / 24);
    } else {
      effect.alpha = 1;
    }
  }
}
function spawnMovementSparks(effects, ball, onGround, rng) {
  if (!onGround) {
    return;
  }
  const speed = sqrt(ball.vel.x * ball.vel.x + ball.vel.y * ball.vel.y + ball.vel.z * ball.vel.z);
  const intensity = speed * 5;
  if (intensity <= 1.5) {
    return;
  }
  const surfaceNormal = { x: ball.unk114.x, y: ball.unk114.y, z: ball.unk114.z };
  const normal = { x: -surfaceNormal.x, y: -surfaceNormal.y, z: -surfaceNormal.z };
  const basePos = {
    x: ball.pos.x + surfaceNormal.x * ball.currRadius,
    y: ball.pos.y + surfaceNormal.y * ball.currRadius,
    z: ball.pos.z + surfaceNormal.z * ball.currRadius
  };
  const f2 = 0.85;
  const baseVel = {
    x: ball.vel.x * f2,
    y: ball.vel.y * f2,
    z: ball.vel.z * f2
  };
  let count = Math.trunc(intensity);
  while (count > 0) {
    const spark = createEffect(
      "coli",
      basePos,
      baseVel,
      Math.trunc(SPARK_LIFE_MIN + SPARK_LIFE_RANGE * randFloat(rng))
    );
    const spread = randFloat(rng) * intensity * 0.1;
    spark.vel.x += (normal.x + (randFloat(rng) * 1.5 - 0.75)) * spread;
    spark.vel.y += (normal.y + (randFloat(rng) * 1.5 - 0.75)) * spread;
    spark.vel.z += (normal.z + (randFloat(rng) * 1.5 - 0.75)) * spread;
    spark.scale = 1;
    spark.scaleTarget = 1;
    spark.colorR = 1.1;
    spark.colorG = 1;
    spark.colorB = 0.6;
    effects.push(spark);
    count -= 1;
  }
}
function spawnCollisionStars(effects, ball, hardestColiSpeed, rng) {
  const surfaceNormal = { x: ball.unk114.x, y: ball.unk114.y, z: ball.unk114.z };
  const normal = { x: -surfaceNormal.x, y: -surfaceNormal.y, z: -surfaceNormal.z };
  const basePos = {
    x: ball.pos.x + surfaceNormal.x * ball.currRadius,
    y: ball.pos.y + surfaceNormal.y * ball.currRadius,
    z: ball.pos.z + surfaceNormal.z * ball.currRadius
  };
  const baseVel = { x: ball.vel.x * 0.5, y: ball.vel.y * 0.5, z: ball.vel.z * 0.5 };
  const proj = -(normal.x * baseVel.x + normal.y * baseVel.y + normal.z * baseVel.z);
  baseVel.x += proj * normal.x;
  baseVel.y += proj * normal.y;
  baseVel.z += proj * normal.z;
  const rawCount = Math.abs(hardestColiSpeed / 0.0165);
  let count = Math.min(32, Math.trunc(rawCount));
  const scaleBoost = Math.abs(hardestColiSpeed / 0.33) + 1;
  const flashScale = sqrt(Math.abs(hardestColiSpeed * 10));
  const flash = createEffect("coliflash", basePos, { x: 0, y: 0, z: 0 }, 12);
  flash.scale = flashScale * 0.25;
  flash.scaleTarget = flashScale;
  flash.surfaceNormal.x = surfaceNormal.x;
  flash.surfaceNormal.y = surfaceNormal.y;
  flash.surfaceNormal.z = surfaceNormal.z;
  effects.push(flash);
  let starCount = count >> 1;
  while (starCount > 0) {
    const star = createEffect(
      "colistar",
      basePos,
      baseVel,
      Math.trunc(STAR_LIFE_MIN + STAR_LIFE_RANGE * randFloat(rng))
    );
    const jitter = {
      x: scaleBoost * (randFloat(rng) * 0.05 - 0.025),
      y: scaleBoost * (randFloat(rng) * 0.05 - 0.025),
      z: scaleBoost * (randFloat(rng) * 0.05 - 0.025)
    };
    const push = scaleBoost * (randFloat(rng) * 0.055 + 0.015);
    star.vel.x += jitter.x + push * normal.x;
    star.vel.y += jitter.y + push * normal.y;
    star.vel.z += jitter.z + push * normal.z;
    star.rotX = 0;
    star.rotY = randS16(rng);
    star.rotZ = randS16(rng);
    star.rotVelX = 0;
    star.rotVelY = (randS16(rng) & 4095) + 4096;
    star.rotVelZ = 0;
    star.scale = 0;
    star.scaleTarget = STAR_SCALE_TARGET;
    effects.push(star);
    starCount -= 1;
  }
  count -= count >> 1;
  while (count > 0) {
    const spark = createEffect(
      "coli",
      basePos,
      { x: baseVel.x * 0.5, y: baseVel.y * 0.5, z: baseVel.z * 0.5 },
      Math.trunc(SPARK_LIFE_MIN + SPARK_LIFE_RANGE * randFloat(rng))
    );
    const jitter = {
      x: scaleBoost * (randFloat(rng) * 0.05 - 0.025),
      y: scaleBoost * (randFloat(rng) * 0.05 - 0.025),
      z: scaleBoost * (randFloat(rng) * 0.05 - 0.025)
    };
    const push = scaleBoost * (randFloat(rng) * 0.05 + 0.06);
    spark.vel.x += jitter.x + push * normal.x;
    spark.vel.y += jitter.y + push * normal.y;
    spark.vel.z += jitter.z + push * normal.z;
    spark.colorR = 1.1;
    spark.colorG = 1;
    spark.colorB = 0.6;
    effects.push(spark);
    count -= 1;
  }
}
function spawnPostGoalSparkle(effects, ball, rng) {
  const sparkle = createEffect(
    "levitate",
    ball.pos,
    {
      x: (randFloat(rng) - 0.5) * LEVITATE_DRIFT,
      y: LEVITATE_START_VEL + randFloat(rng) * LEVITATE_START_VEL,
      z: (randFloat(rng) - 0.5) * LEVITATE_DRIFT
    },
    Math.trunc(LEVITATE_LIFE_MIN + LEVITATE_LIFE_RANGE * randFloat(rng))
  );
  sparkle.pos.x += (randFloat(rng) - 0.5) * LEVITATE_OFFSET_RADIUS;
  sparkle.pos.y += (randFloat(rng) - 0.5) * LEVITATE_OFFSET_RADIUS;
  sparkle.pos.z += (randFloat(rng) - 0.5) * LEVITATE_OFFSET_RADIUS;
  sparkle.prevPos.x = sparkle.pos.x;
  sparkle.prevPos.y = sparkle.pos.y;
  sparkle.prevPos.z = sparkle.pos.z;
  sparkle.baseY = sparkle.pos.y;
  sparkle.scale = LEVITATE_SCALE;
  sparkle.scaleTarget = sparkle.scale;
  sparkle.rotX = randS16(rng);
  sparkle.rotY = randS16(rng);
  sparkle.rotZ = randS16(rng);
  effects.push(sparkle);
}

// src/gx.ts
var GX = {
  TexFormat: {
    I4: 0,
    I8: 1,
    IA4: 2,
    IA8: 3,
    RGB565: 4,
    RGB5A3: 5,
    RGBA8: 6,
    C4: 8,
    C8: 9,
    C14X2: 10,
    CMPR: 14
  },
  Command: {
    NOOP: 0,
    DRAW_QUADS: 128,
    DRAW_QUAD_STRIP: 136,
    DRAW_TRIANGLES: 144,
    DRAW_TRIANGLE_STRIP: 152,
    DRAW_TRIANGLE_FAN: 160,
    DRAW_LINES: 168,
    DRAW_LINE_STRIP: 176,
    DRAW_POINTS: 184
  },
  Attr: {
    PNMTXIDX: 0,
    TEX0MTXIDX: 1,
    TEX1MTXIDX: 2,
    TEX2MTXIDX: 3,
    TEX3MTXIDX: 4,
    TEX4MTXIDX: 5,
    TEX5MTXIDX: 6,
    TEX6MTXIDX: 7,
    TEX7MTXIDX: 8,
    POS: 9,
    NRM: 10,
    CLR0: 11,
    CLR1: 12,
    TEX0: 13,
    TEX1: 14,
    TEX2: 15,
    TEX3: 16,
    TEX4: 17,
    TEX5: 18,
    TEX6: 19,
    TEX7: 20,
    MAX: 20,
    _NBT: 25
  },
  CompType: {
    U8: 0,
    S8: 1,
    U16: 2,
    S16: 3,
    F32: 4,
    RGBA8: 5
  },
  CullMode: {
    NONE: 0,
    FRONT: 1,
    BACK: 2,
    ALL: 3
  },
  BlendFactor: {
    ZERO: 0,
    ONE: 1,
    SRCCLR: 2,
    INVSRCCLR: 3,
    SRCALPHA: 4,
    INVSRCALPHA: 5,
    DSTALPHA: 6,
    INVDSTALPHA: 7
  }
};

// src/gma.ts
var TEXT_DECODER2 = new TextDecoder("utf-8");
var SHAPE_BASE_SIZE = 96;
var MaterialFlags = {
  Unlit: 1 << 0,
  DoubleSided: 1 << 1,
  NoFog: 1 << 2,
  CustomMatAmbColors: 1 << 3,
  CustomBlendSrc: 1 << 5,
  CustomBlendDest: 1 << 6,
  SimpleMaterial: 1 << 7,
  VertColors: 1 << 8
};
var DlistFlags = {
  HasDlist0: 1 << 0,
  HasDlist1: 1 << 1,
  HasDlist2: 1 << 2,
  HasDlist3: 1 << 3
};
var TevLayerFlags = {
  TypeViewSpecular: 1 << 0,
  Type3: 1 << 1,
  DoEdgeLod: 1 << 6,
  MagfiltNear: 1 << 11,
  TypeAlphaBlend: 1 << 13,
  TypeWorldSpecular: 1 << 15,
  Unk16: 1 << 16,
  EnableUvScroll: 1 << 17
};
var ModelFlags = {
  Vat16Bit: 1,
  Stitching: 4,
  Skin: 8,
  Effective: 16
};
function readS16(view, offset) {
  return view.getInt16(offset, false);
}
function readU322(view, offset) {
  return view.getUint32(offset, false);
}
function readF322(view, offset) {
  return view.getFloat32(offset, false);
}
function readString2(buffer, offset) {
  let end = offset;
  while (end < buffer.byteLength && buffer[end] !== 0) {
    end += 1;
  }
  return TEXT_DECODER2.decode(buffer.subarray(offset, end));
}
function parseTevLayer(view, tpl, offset) {
  const flags = readU322(view, offset);
  const texIdx = readS16(view, offset + 4);
  const lodBias = view.getInt8(offset + 6);
  const anisotropy = view.getInt8(offset + 7);
  const unk0x0c = view.getInt8(offset + 12);
  const swappable = !!view.getUint8(offset + 13);
  const unk0x10 = view.getInt32(offset + 16);
  const type = view.getUint8(offset + 19);
  const alphaType = type >> 4 & 7;
  const colorType = type & 15;
  return {
    flags,
    texIdx,
    gxTexture: tpl.textures.get(texIdx) ?? null,
    lodBias,
    maxAniso: anisotropy,
    unk0x0c,
    unk0x10,
    alphaType,
    colorType,
    swappable
  };
}
function parseMatrix(view, offset) {
  return [
    readF322(view, offset),
    readF322(view, offset + 4),
    readF322(view, offset + 8),
    readF322(view, offset + 12),
    readF322(view, offset + 16),
    readF322(view, offset + 20),
    readF322(view, offset + 24),
    readF322(view, offset + 28),
    readF322(view, offset + 32),
    readF322(view, offset + 36),
    readF322(view, offset + 40),
    readF322(view, offset + 44)
  ];
}
function unpackColor(value) {
  return {
    r: value >> 24 & 255,
    g: value >> 16 & 255,
    b: value >> 8 & 255,
    a: value & 255
  };
}
function parseMaterial(view, offset) {
  const materialColor = unpackColor(readU322(view, offset + 4));
  const ambientColor = unpackColor(readU322(view, offset + 8));
  const specularColor = unpackColor(readU322(view, offset + 12));
  const alpha = view.getUint8(offset + 17) / 255;
  const tevLayerCount = view.getUint8(offset + 18);
  const unk0x14 = view.getUint8(offset + 20);
  const unk0x15 = view.getUint8(offset + 21);
  const tevLayerIdxs = [
    readS16(view, offset + 22),
    readS16(view, offset + 24),
    readS16(view, offset + 26)
  ];
  const vtxAttrs = readU322(view, offset + 28);
  let flags = readU322(view, offset + 0);
  if (vtxAttrs & 1 << GX.Attr.CLR0) {
    flags |= MaterialFlags.VertColors;
  }
  if (tevLayerCount === 0) {
    flags |= MaterialFlags.SimpleMaterial;
  }
  const blendFactors = readU322(view, offset + 64);
  return {
    flags,
    materialColor,
    ambientColor,
    specularColor,
    alpha,
    tevLayerCount,
    unk0x14,
    unk0x15,
    tevLayerIdxs,
    vtxAttrs,
    blendFactors
  };
}
function parseShape(view, offset) {
  const material = parseMaterial(view, offset);
  const dlistFlags = view.getUint8(offset + 19);
  const frontSize = view.getInt32(offset + 40);
  const backSize = view.getInt32(offset + 44);
  const origin = {
    x: readF322(view, offset + 48),
    y: readF322(view, offset + 52),
    z: readF322(view, offset + 56)
  };
  let dlistOffs = offset + SHAPE_BASE_SIZE;
  const dlists = [];
  if (dlistFlags & DlistFlags.HasDlist0) {
    const data = view.buffer.slice(dlistOffs, dlistOffs + frontSize);
    dlists.push({
      data,
      cullMode: material.flags & MaterialFlags.DoubleSided ? GX.CullMode.NONE : GX.CullMode.FRONT
    });
    dlistOffs += frontSize;
  }
  if (dlistFlags & DlistFlags.HasDlist1) {
    const data = view.buffer.slice(dlistOffs, dlistOffs + backSize);
    dlists.push({
      data,
      cullMode: material.flags & MaterialFlags.DoubleSided ? GX.CullMode.NONE : GX.CullMode.BACK
    });
    dlistOffs += backSize;
  }
  if (dlistFlags & (DlistFlags.HasDlist2 | DlistFlags.HasDlist3)) {
    const extraFrontSize = view.getInt32(dlistOffs + 8);
    const extraBackSize = view.getInt32(dlistOffs + 12);
    dlistOffs += 32;
    dlists.push({
      data: view.buffer.slice(dlistOffs, dlistOffs + extraFrontSize),
      cullMode: GX.CullMode.FRONT
    });
    dlistOffs += extraFrontSize;
    dlists.push({
      data: view.buffer.slice(dlistOffs, dlistOffs + extraBackSize),
      cullMode: GX.CullMode.BACK
    });
    dlistOffs += extraBackSize;
  }
  return {
    material,
    origin,
    dlists,
    size: dlistOffs - offset
  };
}
function parseModel2(view, offset, name, tpl) {
  const tag = String.fromCharCode(
    view.getUint8(offset),
    view.getUint8(offset + 1),
    view.getUint8(offset + 2),
    view.getUint8(offset + 3)
  );
  if (tag !== "GCMF") {
    throw new Error(`Invalid GMA model tag: ${tag}`);
  }
  const flags = readU322(view, offset + 4);
  const boundSphereCenter = {
    x: readF322(view, offset + 8),
    y: readF322(view, offset + 12),
    z: readF322(view, offset + 16)
  };
  const boundSphereRadius = readF322(view, offset + 20);
  const tevLayerCount = readS16(view, offset + 24);
  const opaqueShapeCount = readS16(view, offset + 26);
  const translucentShapeCount = readS16(view, offset + 28);
  const mtxCount = view.getInt8(offset + 30);
  const texMtxSize = readU322(view, offset + 32);
  let offs = offset + 64;
  const tevLayers = [];
  for (let i = 0; i < tevLayerCount; i += 1) {
    tevLayers.push(parseTevLayer(view, tpl, offs));
    offs += 32;
  }
  const matrices = [];
  for (let i = 0; i < mtxCount; i += 1) {
    matrices.push(parseMatrix(view, offs));
    offs += 48;
  }
  let shapeOffs = offset + texMtxSize;
  const shapes = [];
  const totalShapes = opaqueShapeCount + translucentShapeCount;
  for (let i = 0; i < totalShapes; i += 1) {
    const shape = parseShape(view, shapeOffs);
    shapeOffs += shape.size;
    if (shape.material.vtxAttrs & 1 << GX.Attr._NBT) {
      continue;
    }
    shapes.push(shape);
  }
  return {
    name,
    flags,
    boundSphereCenter,
    boundSphereRadius,
    opaqueShapeCount,
    translucentShapeCount,
    matrices,
    tevLayers,
    shapes
  };
}
function parseGma(buffer, tpl) {
  const view = new DataView(buffer);
  const count = readU322(view, 0);
  const gcmfBaseOffs = readU322(view, 4);
  const entryOffs = 8;
  const modelNameMap = /* @__PURE__ */ new Map();
  const modelIdMap = /* @__PURE__ */ new Map();
  const nameBuf = new Uint8Array(buffer, entryOffs + 8 * count, gcmfBaseOffs - (entryOffs + 8 * count));
  for (let i = 0; i < count; i += 1) {
    const gcmfOffs = view.getInt32(entryOffs + i * 8, false);
    const nameOffs = view.getInt32(entryOffs + i * 8 + 4, false);
    if (gcmfOffs < 0 && nameOffs <= 0) {
      continue;
    }
    const name = readString2(nameBuf, nameOffs);
    const modelFlags = readU322(view, gcmfBaseOffs + gcmfOffs + 4);
    const unsupported = modelFlags & (ModelFlags.Stitching | ModelFlags.Skin | ModelFlags.Effective);
    if (unsupported) {
      continue;
    }
    const model = parseModel2(view, gcmfBaseOffs + gcmfOffs, name, tpl);
    if (model.opaqueShapeCount + model.translucentShapeCount < 1) {
      continue;
    }
    modelNameMap.set(name, model);
    modelIdMap.set(i, model);
  }
  return { nameMap: modelNameMap, idMap: modelIdMap };
}

// src/tpl.ts
function readU16(view, offset) {
  return view.getUint16(offset, false);
}
function readU323(view, offset) {
  return view.getUint32(offset, false);
}
function parseAVTplHeader(buffer, name, idx) {
  const view = new DataView(buffer);
  if (readU16(view, 14) !== 4660) {
    throw new Error("Invalid TPL header");
  }
  const format = readU323(view, 0);
  const offs = readU323(view, 4);
  const width = readU16(view, 8);
  const height = readU16(view, 10);
  const mipCount = readU16(view, 12);
  return {
    name: `${name}_${String(idx).padStart(3, "0")}`,
    format,
    width,
    height,
    mipCount,
    offs
  };
}
function parseAVTpl(buffer, name) {
  const view = new DataView(buffer);
  const entryCount = readU323(view, 0);
  const textures = /* @__PURE__ */ new Map();
  let offs = 4;
  for (let i = 0; i < entryCount; i += 1) {
    const header = parseAVTplHeader(buffer.slice(offs, offs + 16), name, i);
    offs += 16;
    if (header.width === 0 && header.height === 0 && header.mipCount === 0) {
      continue;
    }
    textures.set(i, header);
  }
  return { name, buffer, textures };
}

// src/rng.ts
var DeterministicRng = class {
  constructor(seed = 0) {
    this.state = seed >>> 0;
    if (this.state === 0) {
      this.state = 1831565813;
    }
  }
  nextU32() {
    let x = this.state >>> 0;
    x ^= x << 13 >>> 0;
    x ^= x >>> 17;
    x ^= x << 5 >>> 0;
    this.state = x >>> 0;
    return this.state;
  }
  nextFloat() {
    return (this.nextU32() >>> 8) * (1 / 16777216);
  }
  nextS16() {
    return this.nextU32() >>> 17 & 32767;
  }
};

// src/stage.ts
var TEXT_DECODER3 = new TextDecoder("utf-8");
var STAGE_START_POS_SIZE = 20;
var STAGE_ANIM_GROUP_SIZE = 196;
var STAGE_TRIANGLE_SIZE = 64;
var STAGE_GOAL_SIZE = 20;
var STAGE_BUMPER_SIZE = 32;
var STAGE_JAMABAR_SIZE = 32;
var STAGE_BANANA_SIZE = 16;
var STAGE_CONE_SIZE = 32;
var STAGE_SPHERE_SIZE = 20;
var STAGE_CYLINDER_SIZE = 28;
var STAGE_ANIM_GROUP_MODEL_SIZE = 12;
var STAGE_FALLOUT_BOX_SIZE = 32;
var STAGE_BG_OBJECT_SIZE = 56;
var STAGE2_BG_OBJECT_SIZE = 56;
var STAGE_BG_ANIM_SIZE = 96;
var STAGE_FLIPBOOK_SIZE = 16;
var STAGE_NIGHT_WINDOW_SIZE = 20;
var STAGE_STORM_FIRE_SIZE = 16;
var STAGE_KEYFRAME_SIZE = 20;
var STAGE2_ANIM_GROUP_SIZE = 1180;
var STAGE_SWITCH_SIZE = 24;
var STAGE_WORMHOLE_SIZE = 28;
var STAGE2_MODEL_INSTANCE_SIZE = 36;
var STAGE2_MAGIC_A = 0;
var STAGE2_MAGIC_B = 1148846080;
var STAGE2_MAGIC_B_ALT = 1120403456;
var ANIM_LOOP = 0;
var ANIM_PLAY_ONCE = 1;
var ANIM_SEESAW = 2;
var SMB2_STAGE_LOADIN_FRAMES = 360;
var JAMABAR_BOUND_RADIUS = sqrt(1.75 * 1.75 + 0.5 * 0.5 + 0.5 * 0.5);
var GOAL_BAG_LOCAL_START = { x: 0, y: -1, z: 0.1 };
var CONFETTI_GRAVITY_SCALE = 4e-3;
var CONFETTI_VEL_DAMP = 0.95;
var CONFETTI_ROT_SPEED_SCALE = 2560;
var CONFETTI_GROUND_CHECK = 1;
var CONFETTI_BOUNCE = -0.7;
var CONFETTI_LIFE_BASE = 210;
var CONFETTI_LIFE_RANGE = 60;
var CONFETTI_MODEL_COUNT = 5;
var GOAL_TAPE_SEGMENT_COUNT = 8;
var GOAL_TAPE_SEGMENT_LEN = 0.225;
var GOAL_TAPE_GRAVITY_SCALE = 4e-3;
var GOAL_TAPE_GROUND_OFFSET = 2e-3;
var GOAL_TAPE_ANCHOR_Y = 0.7400003672;
var GOAL_TAPE_Y_STEP = 0.016666668;
var GOAL_TAPE_X_SCALE = 1.75;
var GOAL_TAPE_X_OFFSET = 0.875;
var BANANA_COLLECT_WAIT_FRAMES = 15;
var BANANA_SHRINK_STEP = 1 / BANANA_COLLECT_WAIT_FRAMES;
var BANANA_BASE_SCALES = [0.5, 0.75, 0.5, 0.75];
var BANANA_ROT_VEL_Y = [1024, 768, 1024, 1024];
var BANANA_STATE_HOLDING = 7;
var BANANA_STATE_FLY = 8;
var BANANA_HOLD_FRAMES = 30;
var BANANA_HOLD_DAMP = 0.8;
var BANANA_HOLD_Y_BASE = 0.75;
var BANANA_HOLD_Y_RANGE = 0.5;
var BANANA_HOLD_Y_LERP = 0.2;
var BANANA_HOLD_ROT_TARGET = 4096;
var BANANA_FLY_FRAMES = 32;
var BANANA_FLY_SCALE_TARGET = 0;
var BANANA_HUD_TARGET_X = 1.0583333;
var BANANA_HUD_TARGET_Y = 0.84166664;
var BANANA_HUD_TARGET_Z = -2;
var BANANA_FOV_Y = Math.PI / 3;
var BANANA_FOV_TAN = Math.tan(BANANA_FOV_Y * 0.5);
var FLY_IN_MIN_RADIUS = 31.25;
var STAGE_FLY_IN_OVERRIDES = /* @__PURE__ */ new Map([
  [4, { pos: { x: 0, y: 0, z: 0 }, radius: 50 }],
  [14, { pos: { x: 0, y: 0, z: 0 }, radius: 50 }],
  [144, { pos: { x: 0, y: 0, z: 0 }, radius: 31.25 }]
]);
var SWITCH_MODEL_SUFFIXES = [
  "BUTTON_P",
  "BUTTON_S",
  "BUTTON_R",
  "BUTTON_FF",
  "BUTTON_FR"
];
function randS162(rng) {
  return rng.nextS16();
}
function randFloat2(rng) {
  return rng.nextFloat();
}
function formatStageId(stageId) {
  return String(stageId).padStart(3, "0");
}
function degToS16(degrees) {
  return toS16(Math.trunc(degrees * DEG_TO_S16));
}
var StageParser = class {
  constructor(data) {
    this.data = data;
    this.view = new DataView(data.buffer, data.byteOffset, data.byteLength);
  }
  readU8(offset) {
    return this.view.getUint8(offset);
  }
  readS16(offset) {
    return this.view.getInt16(offset, false);
  }
  readU16(offset) {
    return this.view.getUint16(offset, false);
  }
  readS32(offset) {
    return this.view.getInt32(offset, false);
  }
  readU32(offset) {
    return this.view.getUint32(offset, false);
  }
  readF32(offset) {
    return this.view.getFloat32(offset, false);
  }
  readPtr(offset) {
    if (offset === null) {
      return null;
    }
    if (offset < 0 || offset + 4 > this.data.length) {
      return null;
    }
    const value = this.readU32(offset);
    if (value === 0 || value < 0 || value >= this.data.length) {
      return null;
    }
    return value;
  }
  readVec3(offset) {
    return {
      x: this.readF32(offset),
      y: this.readF32(offset + 4),
      z: this.readF32(offset + 8)
    };
  }
  readVec2(offset) {
    return {
      x: this.readF32(offset),
      y: this.readF32(offset + 4)
    };
  }
  readS16Vec(offset) {
    return {
      x: this.readS16(offset),
      y: this.readS16(offset + 2),
      z: this.readS16(offset + 4)
    };
  }
  readString(offset) {
    let end = offset;
    while (end < this.data.length && this.data[end] !== 0) {
      end += 1;
    }
    return TEXT_DECODER3.decode(this.data.subarray(offset, end));
  }
  parseTextureScroll(offset) {
    if (offset === null) {
      return null;
    }
    if (offset < 0 || offset + 8 > this.data.length) {
      return null;
    }
    return { speed: this.readVec2(offset) };
  }
  readStringList(offset) {
    if (offset === null) {
      return [];
    }
    const names = [];
    let cursor = offset;
    while (true) {
      const ptr = this.readPtr(cursor);
      if (ptr === null) {
        break;
      }
      names.push(this.readString(ptr));
      cursor += 4;
    }
    return names;
  }
  parseKeyframes(offset, count) {
    if (offset === null || count <= 0) {
      return null;
    }
    const frames = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_KEYFRAME_SIZE;
      frames[i] = {
        easeType: this.readS32(base),
        timeSeconds: this.readF32(base + 4),
        value: this.readF32(base + 8),
        tangentIn: this.readF32(base + 12),
        tangentOut: this.readF32(base + 16)
      };
    }
    return frames;
  }
  parseAnimHeader(offset) {
    if (offset === null) {
      return null;
    }
    const anim = {
      rotXKeyframeCount: this.readU32(offset),
      rotXKeyframes: null,
      rotYKeyframeCount: this.readU32(offset + 8),
      rotYKeyframes: null,
      rotZKeyframeCount: this.readU32(offset + 16),
      rotZKeyframes: null,
      posXKeyframeCount: this.readU32(offset + 24),
      posXKeyframes: null,
      posYKeyframeCount: this.readU32(offset + 32),
      posYKeyframes: null,
      posZKeyframeCount: this.readU32(offset + 40),
      posZKeyframes: null
    };
    anim.rotXKeyframes = this.parseKeyframes(this.readPtr(offset + 4), anim.rotXKeyframeCount);
    anim.rotYKeyframes = this.parseKeyframes(this.readPtr(offset + 12), anim.rotYKeyframeCount);
    anim.rotZKeyframes = this.parseKeyframes(this.readPtr(offset + 20), anim.rotZKeyframeCount);
    anim.posXKeyframes = this.parseKeyframes(this.readPtr(offset + 28), anim.posXKeyframeCount);
    anim.posYKeyframes = this.parseKeyframes(this.readPtr(offset + 36), anim.posYKeyframeCount);
    anim.posZKeyframes = this.parseKeyframes(this.readPtr(offset + 44), anim.posZKeyframeCount);
    return anim;
  }
  parseBgAnim(offset) {
    if (offset === null) {
      return null;
    }
    if (offset < 0 || offset + STAGE_BG_ANIM_SIZE > this.data.length) {
      return null;
    }
    const anim = {
      loopStartSeconds: this.readF32(offset),
      loopEndSeconds: this.readF32(offset + 4),
      scaleXKeyframeCount: this.readU32(offset + 8),
      scaleXKeyframes: null,
      scaleYKeyframeCount: this.readU32(offset + 16),
      scaleYKeyframes: null,
      scaleZKeyframeCount: this.readU32(offset + 24),
      scaleZKeyframes: null,
      rotXKeyframeCount: this.readU32(offset + 32),
      rotXKeyframes: null,
      rotYKeyframeCount: this.readU32(offset + 40),
      rotYKeyframes: null,
      rotZKeyframeCount: this.readU32(offset + 48),
      rotZKeyframes: null,
      posXKeyframeCount: this.readU32(offset + 56),
      posXKeyframes: null,
      posYKeyframeCount: this.readU32(offset + 64),
      posYKeyframes: null,
      posZKeyframeCount: this.readU32(offset + 72),
      posZKeyframes: null,
      visibleKeyframeCount: this.readU32(offset + 80),
      visibleKeyframes: null,
      translucencyKeyframeCount: this.readU32(offset + 88),
      translucencyKeyframes: null
    };
    anim.scaleXKeyframes = this.parseKeyframes(this.readPtr(offset + 12), anim.scaleXKeyframeCount);
    anim.scaleYKeyframes = this.parseKeyframes(this.readPtr(offset + 20), anim.scaleYKeyframeCount);
    anim.scaleZKeyframes = this.parseKeyframes(this.readPtr(offset + 28), anim.scaleZKeyframeCount);
    anim.rotXKeyframes = this.parseKeyframes(this.readPtr(offset + 36), anim.rotXKeyframeCount);
    anim.rotYKeyframes = this.parseKeyframes(this.readPtr(offset + 44), anim.rotYKeyframeCount);
    anim.rotZKeyframes = this.parseKeyframes(this.readPtr(offset + 52), anim.rotZKeyframeCount);
    anim.posXKeyframes = this.parseKeyframes(this.readPtr(offset + 60), anim.posXKeyframeCount);
    anim.posYKeyframes = this.parseKeyframes(this.readPtr(offset + 68), anim.posYKeyframeCount);
    anim.posZKeyframes = this.parseKeyframes(this.readPtr(offset + 76), anim.posZKeyframeCount);
    anim.visibleKeyframes = this.parseKeyframes(this.readPtr(offset + 84), anim.visibleKeyframeCount);
    anim.translucencyKeyframes = this.parseKeyframes(
      this.readPtr(offset + 92),
      anim.translucencyKeyframeCount
    );
    return anim;
  }
  parseFlipbooks(offset) {
    if (offset === null) {
      return null;
    }
    if (offset < 0 || offset + STAGE_FLIPBOOK_SIZE > this.data.length) {
      return null;
    }
    const nightWindowAnimCount = this.readS32(offset);
    const nightWindowAnimsPtr = this.readPtr(offset + 4);
    const stormFireAnimCount = this.readS32(offset + 8);
    const stormFireAnimsPtr = this.readPtr(offset + 12);
    const nightWindowAnims = [];
    if (nightWindowAnimsPtr && nightWindowAnimCount > 0) {
      for (let i = 0; i < nightWindowAnimCount; i += 1) {
        const base = nightWindowAnimsPtr + i * STAGE_NIGHT_WINDOW_SIZE;
        nightWindowAnims.push({
          pos: this.readVec3(base),
          rotX: this.readS16(base + 12),
          rotY: this.readS16(base + 14),
          rotZ: this.readS16(base + 16),
          id: this.readU8(base + 18)
        });
      }
    }
    const stormFireAnims = [];
    if (stormFireAnimsPtr && stormFireAnimCount > 0) {
      for (let i = 0; i < stormFireAnimCount; i += 1) {
        const base = stormFireAnimsPtr + i * STAGE_STORM_FIRE_SIZE;
        stormFireAnims.push({
          pos: this.readVec3(base),
          frameOffset: this.readU8(base + 12)
        });
      }
    }
    return {
      nightWindowAnimCount,
      nightWindowAnims,
      stormFireAnimCount,
      stormFireAnims
    };
  }
  parseBgObjects(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const objs = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_BG_OBJECT_SIZE;
      const namePtr = this.readPtr(base + 4);
      objs[i] = {
        flags: this.readU32(base),
        name: namePtr ? this.readString(namePtr) : "",
        pos: this.readVec3(base + 12),
        rotX: this.readS16(base + 24),
        rotY: this.readS16(base + 26),
        rotZ: this.readS16(base + 28),
        scale: this.readVec3(base + 32),
        translucency: this.readF32(base + 44),
        anim: this.parseBgAnim(this.readPtr(base + 48)),
        flipbooks: this.parseFlipbooks(this.readPtr(base + 52))
      };
    }
    return objs;
  }
  parseGoals(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const goals = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_GOAL_SIZE;
      const typeValue = this.readU16(base + 18);
      goals[i] = {
        pos: this.readVec3(base),
        rot: this.readS16Vec(base + 12),
        typeValue,
        type: String.fromCharCode(typeValue >> 8)
      };
    }
    return goals;
  }
  parseBumpers(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const bumpers = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_BUMPER_SIZE;
      bumpers[i] = {
        pos: this.readVec3(base),
        rot: this.readS16Vec(base + 12),
        scale: this.readVec3(base + 20)
      };
    }
    return bumpers;
  }
  parseJamabars(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const jamabars = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_JAMABAR_SIZE;
      jamabars[i] = {
        pos: this.readVec3(base),
        rot: this.readS16Vec(base + 12),
        scale: this.readVec3(base + 20)
      };
    }
    return jamabars;
  }
  parseBananas(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const bananas = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_BANANA_SIZE;
      bananas[i] = {
        pos: this.readVec3(base),
        type: this.readS32(base + 12)
      };
    }
    return bananas;
  }
  parseCones(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const cones = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_CONE_SIZE;
      cones[i] = {
        pos: this.readVec3(base),
        rot: this.readS16Vec(base + 12),
        flags: this.readU16(base + 18),
        scale: this.readVec3(base + 20)
      };
    }
    return cones;
  }
  parseSpheres(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const spheres = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_SPHERE_SIZE;
      spheres[i] = {
        pos: this.readVec3(base),
        radius: this.readF32(base + 12),
        flags: this.readU16(base + 16)
      };
    }
    return spheres;
  }
  parseCylinders(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const cylinders = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_CYLINDER_SIZE;
      cylinders[i] = {
        pos: this.readVec3(base),
        radius: this.readF32(base + 12),
        height: this.readF32(base + 16),
        rot: this.readS16Vec(base + 20),
        flags: this.readU16(base + 26)
      };
    }
    return cylinders;
  }
  parseAnimGroupModels(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const models = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_ANIM_GROUP_MODEL_SIZE;
      const namePtr = this.readPtr(base + 4);
      models[i] = {
        flags: this.readU32(base),
        name: namePtr ? this.readString(namePtr) : "",
        value: this.readF32(base + 8)
      };
    }
    return models;
  }
  parseGridCellTris(offset, countX, countZ) {
    if (offset === null || countX <= 0 || countZ <= 0) {
      return { cells: null, maxIndex: -1 };
    }
    const cellCount = countX * countZ;
    if (offset < 0 || offset + cellCount * 4 > this.data.length) {
      return { cells: null, maxIndex: -1 };
    }
    const cells = new Array(cellCount);
    let maxIndex = -1;
    for (let i = 0; i < cellCount; i += 1) {
      const listPtr = this.readPtr(offset + i * 4);
      if (listPtr === null) {
        cells[i] = null;
        continue;
      }
      const indices = [];
      let cursor = listPtr;
      while (true) {
        const idx = this.readS16(cursor);
        cursor += 2;
        if (idx < 0) {
          break;
        }
        indices.push(idx);
        if (idx > maxIndex) {
          maxIndex = idx;
        }
      }
      cells[i] = indices;
    }
    return { cells, maxIndex };
  }
  parseTriangles(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const triangles = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_TRIANGLE_SIZE;
      triangles[i] = {
        pos: this.readVec3(base),
        normal: this.readVec3(base + 12),
        rot: this.readS16Vec(base + 24),
        flags: this.readU16(base + 30),
        vert2: this.readVec2(base + 32),
        vert3: this.readVec2(base + 40),
        edge2Normal: this.readVec2(base + 48),
        edge3Normal: this.readVec2(base + 56)
      };
    }
    return triangles;
  }
  parseAnimGroup(offset) {
    const initPos = this.readVec3(offset);
    const initRot = this.readS16Vec(offset + 12);
    const unk12 = this.readU16(offset + 18);
    const animPtr = this.readPtr(offset + 20);
    const modelNamesPtr = this.readPtr(offset + 24);
    const trianglesPtr = this.readPtr(offset + 28);
    const gridCellTrisPtr = this.readPtr(offset + 32);
    const gridOriginX = this.readF32(offset + 36);
    const gridOriginZ = this.readF32(offset + 40);
    const gridStepX = this.readF32(offset + 44);
    const gridStepZ = this.readF32(offset + 48);
    const gridCellCountX = this.readS32(offset + 52);
    const gridCellCountZ = this.readS32(offset + 56);
    const goalCount = this.readS32(offset + 60);
    const goalsPtr = this.readPtr(offset + 64);
    const unk48 = this.readPtr(offset + 72);
    const bumperCount = this.readS32(offset + 76);
    const bumpersPtr = this.readPtr(offset + 80);
    const jamabarCount = this.readS32(offset + 84);
    const jamabarsPtr = this.readPtr(offset + 88);
    const bananaCount = this.readS32(offset + 92);
    const bananasPtr = this.readPtr(offset + 96);
    const coliConeCount = this.readS32(offset + 100);
    const coliConesPtr = this.readPtr(offset + 104);
    const coliSphereCount = this.readS32(offset + 108);
    const coliSpheresPtr = this.readPtr(offset + 112);
    const coliCylinderCount = this.readS32(offset + 116);
    const coliCylindersPtr = this.readPtr(offset + 120);
    const animGroupModelCount = this.readS32(offset + 124);
    const animGroupModelsPtr = this.readPtr(offset + 128);
    const fallOutBoxCount = this.readS32(offset + 132);
    const fallOutBoxesPtr = this.readPtr(offset + 136);
    const unk8C = this.readS32(offset + 140);
    const unk90 = this.readPtr(offset + 144);
    const unkB8 = this.readVec3(offset + 184);
    const gridData = this.parseGridCellTris(gridCellTrisPtr, gridCellCountX, gridCellCountZ);
    const triangleCount = gridData.maxIndex + 1;
    const fallOutBoxes = this.parseFalloutBoxes(fallOutBoxesPtr, fallOutBoxCount);
    return {
      initPos,
      initRot,
      unk12,
      anim: this.parseAnimHeader(animPtr),
      modelNames: this.readStringList(modelNamesPtr),
      triangles: this.parseTriangles(trianglesPtr, triangleCount),
      gridCellTris: gridData.cells,
      gridOriginX,
      gridOriginZ,
      gridStepX,
      gridStepZ,
      gridCellCountX,
      gridCellCountZ,
      goalCount,
      goals: this.parseGoals(goalsPtr, goalCount),
      unk48,
      bumperCount,
      bumpers: this.parseBumpers(bumpersPtr, bumperCount),
      jamabarCount,
      jamabars: this.parseJamabars(jamabarsPtr, jamabarCount),
      bananaCount,
      bananas: this.parseBananas(bananasPtr, bananaCount),
      coliConeCount,
      coliCones: this.parseCones(coliConesPtr, coliConeCount),
      coliSphereCount,
      coliSpheres: this.parseSpheres(coliSpheresPtr, coliSphereCount),
      coliCylinderCount,
      coliCylinders: this.parseCylinders(coliCylindersPtr, coliCylinderCount),
      animGroupModelCount,
      animGroupModels: this.parseAnimGroupModels(animGroupModelsPtr, animGroupModelCount),
      unk84: fallOutBoxCount,
      unk88: fallOutBoxes,
      fallOutBoxCount,
      fallOutBoxes,
      unk8C,
      unk90,
      unkB8
    };
  }
  parseStartPositions(offset, fallOutOffset) {
    if (offset === null) {
      return [];
    }
    let count = 1;
    if (fallOutOffset !== null && fallOutOffset > offset) {
      const diff = fallOutOffset - offset;
      if (diff >= STAGE_START_POS_SIZE) {
        count = Math.max(1, Math.floor(diff / STAGE_START_POS_SIZE));
      }
    }
    const starts = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_START_POS_SIZE;
      starts[i] = {
        pos: this.readVec3(base),
        rot: this.readS16Vec(base + 12)
      };
    }
    return starts;
  }
  parseFalloutBoxes(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const boxes = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_FALLOUT_BOX_SIZE;
      boxes[i] = {
        pos: this.readVec3(base),
        scale: this.readVec3(base + 12),
        rot: {
          x: this.readS16(base + 24),
          y: this.readS16(base + 26),
          z: this.readS16(base + 28)
        }
      };
    }
    return boxes;
  }
  parseStage() {
    const loopStartSeconds = this.readS32(0);
    const loopEndSeconds = this.readS32(4);
    const animGroupCount = this.readS32(8);
    const animGroupsPtr = this.readPtr(12);
    const startPosOffset = this.readPtr(16);
    const fallOutOffset = this.readPtr(20);
    const goalsCount = this.readS32(24);
    const goalsPtr = this.readPtr(28);
    const bumperCount = this.readS32(40);
    const bumpersPtr = this.readPtr(44);
    const jamabarCount = this.readS32(48);
    const jamabarsPtr = this.readPtr(52);
    const bananaCount = this.readS32(56);
    const bananasPtr = this.readPtr(60);
    const coliConeCount = this.readS32(64);
    const coliConesPtr = this.readPtr(68);
    const coliSphereCount = this.readS32(72);
    const coliSpheresPtr = this.readPtr(76);
    const coliCylinderCount = this.readS32(80);
    const coliCylindersPtr = this.readPtr(84);
    const animGroupModelCount = this.readS32(88);
    const animGroupModelsPtr = this.readPtr(92);
    const bgObjectCount = this.readS32(104);
    const bgObjectsPtr = this.readPtr(108);
    const fgObjectCount = this.readS32(112);
    const fgObjectsPtr = this.readPtr(116);
    const unk78 = this.readPtr(120);
    const unk7C = this.readS32(124);
    const mirrorCount = this.readS32(128);
    const mirrorsPtr = this.readPtr(132);
    const unk88 = this.readPtr(136);
    const unk90 = this.readPtr(144);
    const animGroups = [];
    if (animGroupsPtr !== null) {
      for (let i = 0; i < animGroupCount; i += 1) {
        animGroups.push(this.parseAnimGroup(animGroupsPtr + i * STAGE_ANIM_GROUP_SIZE));
      }
    }
    const startPositions = this.parseStartPositions(startPosOffset, fallOutOffset);
    const fallOutY = fallOutOffset !== null ? this.readF32(fallOutOffset) : 0;
    return {
      loopStartSeconds,
      loopEndSeconds,
      animGroupCount,
      animGroups,
      startPositions,
      fallOutY,
      goalsCount,
      goals: this.parseGoals(goalsPtr, goalsCount),
      bumperCount,
      bumpers: this.parseBumpers(bumpersPtr, bumperCount),
      jamabarCount,
      jamabars: this.parseJamabars(jamabarsPtr, jamabarCount),
      bananaCount,
      bananas: this.parseBananas(bananasPtr, bananaCount),
      coliConeCount,
      coliCones: this.parseCones(coliConesPtr, coliConeCount),
      coliSphereCount,
      coliSpheres: this.parseSpheres(coliSpheresPtr, coliSphereCount),
      coliCylinderCount,
      coliCylinders: this.parseCylinders(coliCylindersPtr, coliCylinderCount),
      animGroupModelCount,
      animGroupModels: this.parseAnimGroupModels(animGroupModelsPtr, animGroupModelCount),
      bgObjectCount,
      bgObjects: this.parseBgObjects(bgObjectsPtr, bgObjectCount),
      fgObjectCount,
      fgObjects: this.parseBgObjects(fgObjectsPtr, fgObjectCount),
      unk78,
      unk7C,
      mirrorCount,
      mirrorsPtr,
      unk88,
      unk90
    };
  }
};
var StageParserSmb2 = class extends StageParser {
  constructor(data) {
    super(data);
    this.stageModelNameCache = /* @__PURE__ */ new Map();
  }
  parseStartPositions(offset) {
    if (offset === null) {
      return [];
    }
    return [{
      pos: this.readVec3(offset),
      rot: this.readS16Vec(offset + 12)
    }];
  }
  parseSwitches(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const switches = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE_SWITCH_SIZE;
      switches[i] = {
        pos: this.readVec3(base),
        rot: this.readS16Vec(base + 12),
        type: this.readS16(base + 18),
        animGroupId: this.readS16(base + 20),
        cooldown: 0
      };
    }
    return switches;
  }
  parseWormholes(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    if (offset < 0 || offset >= this.data.length) {
      return [];
    }
    const maxCount = Math.floor((this.data.length - offset) / STAGE_WORMHOLE_SIZE);
    if (maxCount <= 0) {
      return [];
    }
    const safeCount = Math.min(count, maxCount);
    const wormholes = new Array(safeCount);
    for (let i = 0; i < safeCount; i += 1) {
      const base = offset + i * STAGE_WORMHOLE_SIZE;
      wormholes[i] = {
        _fileOffset: base,
        pos: this.readVec3(base + 4),
        rot: this.readS16Vec(base + 16),
        destOffset: this.readPtr(base + 24),
        dest: null
      };
    }
    return wormholes;
  }
  resolveStageModelName(ptrA) {
    if (ptrA === null) {
      return "";
    }
    if (this.stageModelNameCache.has(ptrA)) {
      return this.stageModelNameCache.get(ptrA);
    }
    const stageModelPtr = this.readPtr(ptrA + 8);
    if (stageModelPtr === null) {
      this.stageModelNameCache.set(ptrA, "");
      return "";
    }
    const namePtr = this.readPtr(stageModelPtr + 4);
    const name = namePtr ? this.readString(namePtr) : "";
    this.stageModelNameCache.set(ptrA, name);
    return name;
  }
  parseStageModelInstances(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const instances = new Array(count);
    for (let i = 0; i < count; i += 1) {
      const base = offset + i * STAGE2_MODEL_INSTANCE_SIZE;
      const stageModelPtrA = this.readPtr(base);
      instances[i] = {
        modelName: this.resolveStageModelName(stageModelPtrA),
        pos: this.readVec3(base + 4),
        rot: this.readS16Vec(base + 16),
        flags: this.readU16(base + 22),
        scale: this.readVec3(base + 24),
        stageModelPtrA
      };
    }
    return instances;
  }
  parseStageModelNames(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    const names = [];
    for (let i = 0; i < count; i += 1) {
      const ptrA = this.readPtr(offset + i * 4);
      const name = this.resolveStageModelName(ptrA);
      if (name) {
        names.push(name);
      }
    }
    return names;
  }
  parseBgObjects(offset, count) {
    if (offset === null || count <= 0) {
      return [];
    }
    if (offset < 0 || offset >= this.data.length) {
      return [];
    }
    const maxCount = Math.floor((this.data.length - offset) / STAGE2_BG_OBJECT_SIZE);
    const safeCount = Math.min(count, maxCount);
    const objs = new Array(safeCount);
    for (let i = 0; i < safeCount; i += 1) {
      const base = offset + i * STAGE2_BG_OBJECT_SIZE;
      const namePtr = this.readPtr(base + 4);
      const effectHeaderPtr = this.readPtr(base + 52);
      const textureScroll = effectHeaderPtr !== null ? this.parseTextureScroll(this.readPtr(effectHeaderPtr + 16)) : null;
      objs[i] = {
        flags: this.readU32(base),
        name: namePtr ? this.readString(namePtr) : "",
        pos: this.readVec3(base + 12),
        rotX: this.readS16(base + 24),
        rotY: this.readS16(base + 26),
        rotZ: this.readS16(base + 28),
        scale: this.readVec3(base + 32),
        translucency: this.readF32(base + 44),
        anim: this.parseBgAnim(this.readPtr(base + 48)),
        flipbooks: this.parseFlipbooks(this.readPtr(base + 52)),
        textureScroll
      };
    }
    return objs;
  }
  parseAnimGroup(offset) {
    const origin = this.readVec3(offset);
    const initRot = this.readS16Vec(offset + 12);
    const animLoopType = this.readU16(offset + 18);
    const hasSeesaw = animLoopType === ANIM_SEESAW;
    const animPtr = this.readPtr(offset + 20);
    const conveyorSpeed = this.readVec3(offset + 24);
    const trianglesPtr = this.readPtr(offset + 36);
    const gridCellTrisPtr = this.readPtr(offset + 40);
    const gridOriginX = this.readF32(offset + 44);
    const gridOriginZ = this.readF32(offset + 48);
    const gridStepX = this.readF32(offset + 52);
    const gridStepZ = this.readF32(offset + 56);
    const gridCellCountX = this.readS32(offset + 60);
    const gridCellCountZ = this.readS32(offset + 64);
    const goalCount = this.readS32(offset + 68);
    const goalsPtr = this.readPtr(offset + 72);
    const bumperCount = this.readS32(offset + 76);
    const bumpersPtr = this.readPtr(offset + 80);
    const jamabarCount = this.readS32(offset + 84);
    const jamabarsPtr = this.readPtr(offset + 88);
    const bananaCount = this.readS32(offset + 92);
    const bananasPtr = this.readPtr(offset + 96);
    const coliConeCount = this.readS32(offset + 100);
    const coliConesPtr = this.readPtr(offset + 104);
    const coliSphereCount = this.readS32(offset + 108);
    const coliSpheresPtr = this.readPtr(offset + 112);
    const coliCylinderCount = this.readS32(offset + 116);
    const coliCylindersPtr = this.readPtr(offset + 120);
    const falloutVolumeCount = this.readS32(offset + 124);
    const falloutVolumePtr = this.readPtr(offset + 128);
    const reflectiveCount = this.readS32(offset + 132);
    const reflectivePtr = this.readPtr(offset + 136);
    const stageModelInstanceCount = this.readS32(offset + 140);
    const stageModelInstancePtr = this.readPtr(offset + 144);
    const stageModelCount = this.readS32(offset + 148);
    const stageModelPtrB = this.readPtr(offset + 152);
    const animGroupId = this.readS16(offset + 164);
    const switchCount = this.readS32(offset + 168);
    const switchesPtr = this.readPtr(offset + 172);
    const seesawSensitivity = this.readF32(offset + 184);
    const seesawFriction = this.readF32(offset + 188);
    const seesawSpring = this.readF32(offset + 192);
    const wormholeCount = this.readS32(offset + 196);
    const wormholesPtr = this.readPtr(offset + 200);
    const initialPlaybackState = this.readS32(offset + 204);
    const loopStartSeconds = this.readF32(offset + 208);
    const loopEndSeconds = this.readF32(offset + 212);
    const textureScrollPtr = this.readPtr(offset + 216);
    const textureScroll = this.parseTextureScroll(textureScrollPtr);
    const gridData = this.parseGridCellTris(gridCellTrisPtr, gridCellCountX, gridCellCountZ);
    const triangleCount = gridData.maxIndex + 1;
    const wormholes = this.parseWormholes(wormholesPtr, wormholeCount);
    const stageModelInstances = this.parseStageModelInstances(stageModelInstancePtr, stageModelInstanceCount);
    const stageModelNames = this.parseStageModelNames(stageModelPtrB, stageModelCount);
    return {
      origin,
      initPos: origin,
      initRot,
      animLoopType,
      hasSeesaw,
      anim: this.parseAnimHeader(animPtr),
      conveyorSpeed,
      triangles: this.parseTriangles(trianglesPtr, triangleCount),
      gridCellTris: gridData.cells,
      gridOriginX,
      gridOriginZ,
      gridStepX,
      gridStepZ,
      gridCellCountX,
      gridCellCountZ,
      goalCount,
      goals: this.parseGoals(goalsPtr, goalCount),
      bumperCount,
      bumpers: this.parseBumpers(bumpersPtr, bumperCount),
      jamabarCount,
      jamabars: this.parseJamabars(jamabarsPtr, jamabarCount),
      bananaCount,
      bananas: this.parseBananas(bananasPtr, bananaCount),
      coliConeCount,
      coliCones: this.parseCones(coliConesPtr, coliConeCount),
      coliSphereCount,
      coliSpheres: this.parseSpheres(coliSpheresPtr, coliSphereCount),
      coliCylinderCount,
      coliCylinders: this.parseCylinders(coliCylindersPtr, coliCylinderCount),
      falloutVolumeCount,
      falloutVolumes: this.parseFalloutBoxes(falloutVolumePtr, falloutVolumeCount),
      reflectiveCount,
      reflectivePtr,
      stageModelInstanceCount,
      stageModelInstancePtr,
      stageModelInstances,
      stageModelCount,
      stageModelPtrB,
      stageModelNames,
      animGroupId,
      switchCount,
      switches: this.parseSwitches(switchesPtr, switchCount),
      seesawSensitivity,
      seesawFriction,
      seesawSpring,
      wormholeCount,
      wormholes,
      initialPlaybackState,
      loopStartSeconds,
      loopEndSeconds,
      textureScroll
    };
  }
  parseStage() {
    const animGroupCount = this.readS32(8);
    const animGroupsPtr = this.readPtr(12);
    const startPosOffset = this.readPtr(16);
    const fallOutOffset = this.readPtr(20);
    const goalsCount = this.readS32(24);
    const goalsPtr = this.readPtr(28);
    const bumperCount = this.readS32(32);
    const bumpersPtr = this.readPtr(36);
    const jamabarCount = this.readS32(40);
    const jamabarsPtr = this.readPtr(44);
    const bananaCount = this.readS32(48);
    const bananasPtr = this.readPtr(52);
    const coliConeCount = this.readS32(56);
    const coliConesPtr = this.readPtr(60);
    const coliSphereCount = this.readS32(64);
    const coliSpheresPtr = this.readPtr(68);
    const coliCylinderCount = this.readS32(72);
    const coliCylindersPtr = this.readPtr(76);
    const falloutVolumeCount = this.readS32(80);
    const falloutVolumePtr = this.readPtr(84);
    const bgObjectCount = this.readS32(88);
    const bgObjectsPtr = this.readPtr(92);
    const fgObjectCount = this.readS32(96);
    const fgObjectsPtr = this.readPtr(100);
    const reflectiveCount = this.readS32(112);
    const reflectivePtr = this.readPtr(116);
    const stageModelInstanceCount = this.readS32(132);
    const stageModelInstancePtr = this.readPtr(136);
    const stageModelCount = this.readS32(140);
    const stageModelPtrA = this.readPtr(144);
    const stageModelBCount = this.readS32(148);
    const stageModelPtrB = this.readPtr(152);
    const switchCount = this.readS32(168);
    const switchesPtr = this.readPtr(172);
    const fogAnimPtr = this.readPtr(176);
    const wormholeCount = this.readS32(180);
    const wormholesPtr = this.readPtr(184);
    const fogPtr = this.readPtr(188);
    const mystery3Ptr = this.readPtr(212);
    const animGroups = [];
    const wormholeMap = /* @__PURE__ */ new Map();
    if (animGroupsPtr !== null) {
      for (let i = 0; i < animGroupCount; i += 1) {
        const animGroup = this.parseAnimGroup(animGroupsPtr + i * STAGE2_ANIM_GROUP_SIZE);
        for (const wormhole of animGroup.wormholes) {
          wormholeMap.set(wormhole._fileOffset, wormhole);
          wormhole.animGroupIndex = i;
        }
        animGroups.push(animGroup);
      }
    }
    const stageWormholes = this.parseWormholes(wormholesPtr, wormholeCount);
    for (const wormhole of stageWormholes) {
      wormholeMap.set(wormhole._fileOffset, wormhole);
      wormhole.animGroupIndex = 0;
    }
    for (const animGroup of animGroups) {
      for (const wormhole of animGroup.wormholes) {
        if (wormhole.destOffset !== null) {
          wormhole.dest = wormholeMap.get(wormhole.destOffset) ?? null;
        }
      }
    }
    for (const wormhole of stageWormholes) {
      if (wormhole.destOffset !== null) {
        wormhole.dest = wormholeMap.get(wormhole.destOffset) ?? null;
      }
    }
    const startPositions = this.parseStartPositions(startPosOffset);
    const fallOutY = fallOutOffset !== null ? this.readF32(fallOutOffset) : 0;
    const stageModelInstances = this.parseStageModelInstances(stageModelInstancePtr, stageModelInstanceCount);
    const stageModelNames = this.parseStageModelNames(stageModelPtrB, stageModelBCount);
    return {
      format: "smb2",
      loopStartSeconds: 0,
      loopEndSeconds: 0,
      animGroupCount,
      animGroups,
      startPositions,
      fallOutY,
      goalsCount,
      goals: this.parseGoals(goalsPtr, goalsCount),
      bumperCount,
      bumpers: this.parseBumpers(bumpersPtr, bumperCount),
      jamabarCount,
      jamabars: this.parseJamabars(jamabarsPtr, jamabarCount),
      bananaCount,
      bananas: this.parseBananas(bananasPtr, bananaCount),
      coliConeCount,
      coliCones: this.parseCones(coliConesPtr, coliConeCount),
      coliSphereCount,
      coliSpheres: this.parseSpheres(coliSpheresPtr, coliSphereCount),
      coliCylinderCount,
      coliCylinders: this.parseCylinders(coliCylindersPtr, coliCylinderCount),
      falloutVolumeCount,
      falloutVolumes: this.parseFalloutBoxes(falloutVolumePtr, falloutVolumeCount),
      bgObjectCount,
      bgObjects: this.parseBgObjects(bgObjectsPtr, bgObjectCount),
      fgObjectCount,
      fgObjects: this.parseBgObjects(fgObjectsPtr, fgObjectCount),
      reflectiveCount,
      reflectivePtr,
      stageModelInstanceCount,
      stageModelInstancePtr,
      stageModelInstances,
      stageModelCount,
      stageModelPtrA,
      stageModelBCount,
      stageModelPtrB,
      stageModelNames,
      switchCount,
      switches: this.parseSwitches(switchesPtr, switchCount),
      fogAnimPtr,
      wormholeCount,
      wormholes: stageWormholes,
      fogPtr,
      mystery3Ptr
    };
  }
};
var StageRuntime = class {
  constructor(stage, seed = stage.stageId ?? 0) {
    this.stage = stage;
    this.format = stage.format ?? "smb1";
    this.timerFrames = 0;
    this.animGroups = [];
    this.bumpers = [];
    this.jamabars = [];
    this.goals = [];
    this.goalBags = [];
    this.goalBagsByGroup = [];
    this.goalTapes = [];
    this.goalTapesByGroup = [];
    this.bananas = [];
    this.confetti = [];
    this.effects = [];
    this.switches = [];
    this.switchesByGroup = [];
    this.switchModelBounds = null;
    this.switchPressCount = 0;
    this.wormholes = [];
    this.seesaws = [];
    this.animGroupIdMap = /* @__PURE__ */ new Map();
    this.boundSphere = {
      pos: { x: 0, y: 0, z: 0 },
      radius: 50
    };
    this.matrixStack = new MatrixStack();
    this.goalHoldOpen = false;
    this.switchesEnabled = true;
    this.simRng = new DeterministicRng(seed);
    this.visualRng = new DeterministicRng((seed ^ 2654435769) >>> 0);
    this.initAnimGroups();
    this.initObjects();
  }
  resetTimer() {
    this.timerFrames = 0;
  }
  initAnimGroups() {
    const count = this.stage.animGroupCount;
    this.animGroups.length = count;
    this.animGroupIdMap.clear();
    if (this.format === "smb2") {
      for (let i = 0; i < count; i += 1) {
        const stageAg = this.stage.animGroups[i];
        const info = {
          pos: { x: stageAg.origin.x, y: stageAg.origin.y, z: stageAg.origin.z },
          prevPos: {
            x: stageAg.origin.x - stageAg.conveyorSpeed.x,
            y: stageAg.origin.y - stageAg.conveyorSpeed.y,
            z: stageAg.origin.z - stageAg.conveyorSpeed.z
          },
          rot: { x: stageAg.initRot.x, y: stageAg.initRot.y, z: stageAg.initRot.z },
          prevRot: { x: stageAg.initRot.x, y: stageAg.initRot.y, z: stageAg.initRot.z },
          transform: new Float32Array(12),
          prevTransform: new Float32Array(12),
          animFrame: 0,
          playbackState: stageAg.initialPlaybackState ?? 0,
          seesawState: null
        };
        this.matrixStack.fromIdentity();
        this.matrixStack.toMtx(info.transform);
        this.matrixStack.translateNeg(stageAg.conveyorSpeed);
        this.matrixStack.toMtx(info.prevTransform);
        this.animGroups[i] = info;
        if (stageAg.animGroupId !== void 0) {
          const existing = this.animGroupIdMap.get(stageAg.animGroupId);
          if (existing) {
            existing.push(i);
          } else {
            this.animGroupIdMap.set(stageAg.animGroupId, [i]);
          }
        }
        if (stageAg.hasSeesaw) {
          info.seesawState = createSeesawState(stageAg, this.matrixStack);
          this.seesaws.push(info.seesawState);
        }
      }
      return;
    }
    for (let i = 0; i < count; i += 1) {
      const stageAg = this.stage.animGroups[i];
      const info = {
        pos: { x: stageAg.initPos.x, y: stageAg.initPos.y, z: stageAg.initPos.z },
        prevPos: {
          x: stageAg.initPos.x - stageAg.unkB8.x,
          y: stageAg.initPos.y - stageAg.unkB8.y,
          z: stageAg.initPos.z - stageAg.unkB8.z
        },
        rot: { x: stageAg.initRot.x, y: stageAg.initRot.y, z: stageAg.initRot.z },
        prevRot: { x: stageAg.initRot.x, y: stageAg.initRot.y, z: stageAg.initRot.z },
        transform: new Float32Array(12),
        prevTransform: new Float32Array(12)
      };
      this.matrixStack.fromIdentity();
      this.matrixStack.toMtx(info.transform);
      this.matrixStack.translateNeg(stageAg.unkB8);
      this.matrixStack.toMtx(info.prevTransform);
      this.animGroups[i] = info;
    }
  }
  initObjects() {
    const count = this.stage.animGroupCount;
    const stack5 = this.matrixStack;
    this.bumpers.length = count;
    this.jamabars.length = count;
    this.goals.length = 0;
    this.goalBags.length = 0;
    this.goalBagsByGroup.length = count;
    this.goalTapes.length = 0;
    this.goalTapesByGroup.length = count;
    this.bananas.length = 0;
    this.confetti.length = 0;
    this.effects.length = 0;
    this.switches.length = 0;
    this.switchesByGroup.length = count;
    this.wormholes.length = 0;
    for (let i = 0; i < count; i += 1) {
      this.switchesByGroup[i] = [];
    }
    for (let i = 0; i < count; i += 1) {
      const stageAg = this.stage.animGroups[i];
      const bumperStates = [];
      for (const bumper of stageAg.bumpers) {
        const basePos = { x: bumper.pos.x, y: bumper.pos.y, z: bumper.pos.z };
        const centerOffset = {
          x: BUMPER_BOUND_CENTER.x,
          y: BUMPER_BOUND_CENTER.y,
          z: BUMPER_BOUND_CENTER.z
        };
        stack5.fromIdentity();
        stack5.rotateZ(bumper.rot.z);
        stack5.rotateY(bumper.rot.y);
        stack5.rotateX(bumper.rot.x);
        stack5.tfPoint(centerOffset, centerOffset);
        const coliPos = {
          x: basePos.x + centerOffset.x,
          y: basePos.y + centerOffset.y,
          z: basePos.z + centerOffset.z
        };
        bumperStates.push({
          animGroupId: i,
          basePos,
          pos: { x: coliPos.x, y: coliPos.y, z: coliPos.z },
          prevPos: { x: coliPos.x, y: coliPos.y, z: coliPos.z },
          rot: { x: bumper.rot.x, y: bumper.rot.y, z: bumper.rot.z },
          scale: { x: bumper.scale.x, y: bumper.scale.y, z: bumper.scale.z },
          radius: BUMPER_BOUND_RADIUS,
          modelRadius: BUMPER_MODEL_RADIUS,
          state: 0,
          spin: 0,
          spinVel: 0,
          pulseX: 1,
          pulseZ: 1,
          counter: 0,
          transform: new Float32Array(12)
        });
      }
      const jamabarStates = [];
      for (const jamabar of stageAg.jamabars) {
        jamabarStates.push({
          animGroupId: i,
          basePos: { x: jamabar.pos.x, y: jamabar.pos.y, z: jamabar.pos.z },
          pos: { x: jamabar.pos.x, y: jamabar.pos.y, z: jamabar.pos.z },
          prevPos: { x: jamabar.pos.x, y: jamabar.pos.y, z: jamabar.pos.z },
          rot: { x: jamabar.rot.x, y: jamabar.rot.y, z: jamabar.rot.z },
          scale: { x: jamabar.scale.x, y: jamabar.scale.y, z: jamabar.scale.z },
          localPos: { x: 0, y: 0, z: 0 },
          localVel: { x: 0, y: 0, z: 0 },
          radius: JAMABAR_BOUND_RADIUS,
          transform: new Float32Array(12)
        });
      }
      this.bumpers[i] = bumperStates;
      this.jamabars[i] = jamabarStates;
      const bagStates = [];
      const tapeStates = [];
      for (const goal of stageAg.goals) {
        this.goals.push({
          animGroupId: i,
          pos: { x: goal.pos.x, y: goal.pos.y, z: goal.pos.z },
          rot: { x: goal.rot.x, y: goal.rot.y, z: goal.rot.z },
          type: goal.type,
          transform: new Float32Array(12)
        });
        const tape = createGoalTapeState(goal, i, this, stack5);
        this.goalTapes.push(tape);
        tapeStates.push(tape);
        const bag = createGoalBagState(goal, i, stack5);
        this.goalBags.push(bag);
        bagStates.push(bag);
      }
      this.goalBagsByGroup[i] = bagStates;
      this.goalTapesByGroup[i] = tapeStates;
      for (const banana of stageAg.bananas) {
        const bananaType = banana.type & 3;
        const rotVelY = BANANA_ROT_VEL_Y[bananaType] ?? BANANA_ROT_VEL_Y[0];
        const baseScale = BANANA_BASE_SCALES[bananaType] ?? BANANA_BASE_SCALES[0];
        this.bananas.push({
          animGroupId: i,
          localPos: { x: banana.pos.x, y: banana.pos.y, z: banana.pos.z },
          prevLocalPos: { x: banana.pos.x, y: banana.pos.y, z: banana.pos.z },
          pos: { x: banana.pos.x, y: banana.pos.y, z: banana.pos.z },
          type: banana.type,
          flags: 34,
          cooldown: 0,
          collected: false,
          state: 2,
          collectTimer: 0,
          holdTimer: 0,
          holdOffset: { x: 0, y: 0, z: 0 },
          holdScaleTarget: 1,
          holdRotVel: 0,
          flyTimer: 0,
          flyScaleTarget: BANANA_FLY_SCALE_TARGET,
          flyStartPos: { x: banana.pos.x, y: banana.pos.y, z: banana.pos.z },
          flyStartScale: 1,
          tiltTimer: 0,
          baseScale,
          scale: 1,
          prevScale: 1,
          vel: { x: 0, y: 0, z: 0 },
          rotX: 0,
          rotY: 0,
          rotZ: 0,
          prevRotX: 0,
          prevRotY: 0,
          prevRotZ: 0,
          rotVelX: 0,
          rotVelY,
          rotVelZ: 0
        });
      }
      if (stageAg.switches) {
        for (const stageSwitch of stageAg.switches) {
          const basePos = { x: stageSwitch.pos.x, y: stageSwitch.pos.y, z: stageSwitch.pos.z };
          const runtimeSwitch = {
            ...stageSwitch,
            animGroupIndex: i,
            basePos,
            pos: { x: basePos.x, y: basePos.y, z: basePos.z },
            prevPos: { x: basePos.x, y: basePos.y, z: basePos.z },
            localPos: { x: 0, y: 0, z: 0 },
            localVel: { x: 0, y: 0, z: 0 },
            state: 0,
            pressImpulse: false,
            triggered: false
          };
          this.switches.push(runtimeSwitch);
          this.switchesByGroup[i].push(runtimeSwitch);
        }
      }
      if (stageAg.wormholes) {
        for (const wormhole of stageAg.wormholes) {
          this.wormholes.push(wormhole);
        }
      }
    }
    if (this.stage.wormholes) {
      for (const wormhole of this.stage.wormholes) {
        this.wormholes.push(wormhole);
      }
    }
    if (this.stage.switches) {
      for (const stageSwitch of this.stage.switches) {
        const basePos = { x: stageSwitch.pos.x, y: stageSwitch.pos.y, z: stageSwitch.pos.z };
        const runtimeSwitch = {
          ...stageSwitch,
          animGroupIndex: 0,
          basePos,
          pos: { x: basePos.x, y: basePos.y, z: basePos.z },
          prevPos: { x: basePos.x, y: basePos.y, z: basePos.z },
          localPos: { x: 0, y: 0, z: 0 },
          localVel: { x: 0, y: 0, z: 0 },
          state: 0,
          pressImpulse: false,
          triggered: false
        };
        this.switches.push(runtimeSwitch);
        if (this.switchesByGroup[0]) {
          this.switchesByGroup[0].push(runtimeSwitch);
        }
      }
    }
    this.syncObjectTransforms();
  }
  applySwitchModelBounds(boundsByType) {
    this.switchModelBounds = boundsByType ?? null;
    if (!boundsByType) {
      return;
    }
    for (const stageSwitch of this.switches) {
      const modelBounds = boundsByType[stageSwitch.type & 7];
      if (!modelBounds) {
        continue;
      }
      stageSwitch.modelBoundCenter = {
        x: modelBounds.center.x,
        y: modelBounds.center.y,
        z: modelBounds.center.z
      };
      stageSwitch.modelBoundRadius = modelBounds.radius;
    }
  }
  isAnimGroupInPlaybackState(animGroupId, playbackState) {
    const targetIndices = this.animGroupIdMap.get(animGroupId) ?? [animGroupId];
    for (const index of targetIndices) {
      const group = this.animGroups[index];
      if (!group || (group.playbackState & 7) !== playbackState) {
        return false;
      }
    }
    return true;
  }
  applySwitchPlayback(stageSwitch, countSound = true) {
    const nextState = stageSwitch.type & 7;
    if (countSound && stageSwitch.state < 2) {
      this.switchPressCount = (this.switchPressCount ?? 0) + 1;
    }
    const targetIndices = this.animGroupIdMap.get(stageSwitch.animGroupId) ?? [stageSwitch.animGroupId];
    for (const targetIndex of targetIndices) {
      const targetInfo = this.animGroups[targetIndex];
      const targetAg = this.stage.animGroups[targetIndex];
      if (!targetInfo || !targetAg) {
        continue;
      }
      const prevState = targetInfo.playbackState & 7;
      if (targetAg.animLoopType === ANIM_PLAY_ONCE && prevState === 1 && (nextState === 0 || nextState === 3)) {
        targetInfo.animFrame = Math.trunc((targetAg.loopStartSeconds ?? 0) * 60);
      }
      targetInfo.playbackState = targetInfo.playbackState & ~7 | nextState;
      if (nextState === 1) {
        targetInfo.prevTransform.set(targetInfo.transform);
      }
    }
  }
  advance(frameDelta, paused2, world, animTimerOverride = null, smb2LoadInFrames = null, ball = null, camera2 = null) {
    if (paused2) {
      return;
    }
    if (animTimerOverride !== null) {
      this.timerFrames = animTimerOverride;
    } else {
      this.timerFrames += frameDelta;
    }
    if (this.format === "smb2") {
      this.updateSwitchesSmb2PreAnim();
    }
    this.updateAnimGroups(this.timerFrames / 60, frameDelta, smb2LoadInFrames);
    if (world) {
      this.updateObjects(world, ball, camera2);
    }
  }
  updateSwitchesSmb2PreAnim() {
    const stack5 = this.matrixStack;
    for (const stageSwitch of this.switches) {
      stageSwitch.prevPos.x = stageSwitch.pos.x;
      stageSwitch.prevPos.y = stageSwitch.pos.y;
      stageSwitch.prevPos.z = stageSwitch.pos.z;
      const playbackState = stageSwitch.type & 7;
      const groupMatches = this.isAnimGroupInPlaybackState(stageSwitch.animGroupId, playbackState);
      if (stageSwitch.state === 2) {
        stageSwitch.state = 3;
      }
      if (stageSwitch.state < 2) {
        if (stageSwitch.state === 0) {
          stageSwitch.state = 1;
          stageSwitch.pressImpulse = false;
          stageSwitch.triggered = false;
        }
        stageSwitch.localVel.y += -stageSwitch.localPos.y * 0.1;
        stageSwitch.localVel.y *= 0.95;
        stageSwitch.localPos.y += stageSwitch.localVel.y;
        if (stageSwitch.localPos.y < -0.1) {
          stageSwitch.localPos.y = -0.1;
          if (stageSwitch.localVel.y < 0) {
            stageSwitch.localVel.y *= -0.8;
          }
        } else if (stageSwitch.localPos.y > 0.1) {
          stageSwitch.localPos.y = 0.1;
          if (stageSwitch.localVel.y > 0) {
            stageSwitch.localVel.y *= -0.8;
          }
        }
        if (groupMatches) {
          stageSwitch.state = 2;
          if (!stageSwitch.triggered) {
            this.applySwitchPlayback(stageSwitch, false);
            stageSwitch.triggered = true;
          }
        }
        if (stageSwitch.pressImpulse && stageSwitch.localPos.y < -0.025) {
          stageSwitch.state = 2;
          if (!stageSwitch.triggered) {
            this.switchPressCount = (this.switchPressCount ?? 0) + 1;
            this.applySwitchPlayback(stageSwitch, false);
            stageSwitch.triggered = true;
          }
        }
      } else if (!groupMatches) {
        stageSwitch.state = 0;
      }
      if (stageSwitch.state >= 2) {
        stageSwitch.localVel.y += (-0.1 - stageSwitch.localPos.y) * 0.1;
        stageSwitch.localVel.y *= 0.9;
        stageSwitch.localPos.y += stageSwitch.localVel.y;
        if (stageSwitch.localPos.y < -0.1) {
          stageSwitch.localPos.y = -0.1;
          if (stageSwitch.localVel.y < 0) {
            stageSwitch.localVel.y *= -0.8;
          }
        } else if (stageSwitch.localPos.y > 0) {
          stageSwitch.localPos.y = 0;
          if (stageSwitch.localVel.y > 0) {
            stageSwitch.localVel.y *= -0.8;
          }
        }
      }
      stack5.fromIdentity();
      stack5.rotateZ(stageSwitch.rot.z);
      stack5.rotateY(stageSwitch.rot.y);
      stack5.rotateX(stageSwitch.rot.x);
      const localPos = {
        x: stageSwitch.localPos.x,
        y: stageSwitch.localPos.y,
        z: stageSwitch.localPos.z
      };
      stack5.tfPoint(localPos, localPos);
      stageSwitch.pos.x = stageSwitch.basePos.x + localPos.x;
      stageSwitch.pos.y = stageSwitch.basePos.y + localPos.y;
      stageSwitch.pos.z = stageSwitch.basePos.z + localPos.z;
    }
  }
  updateAnimGroups(timeSeconds, frameDelta = 1, smb2LoadInFrames = null) {
    const stage = this.stage;
    if (this.format === "smb2") {
      this.updateAnimGroupsSmb2(frameDelta, smb2LoadInFrames);
      return;
    }
    const loopSpan = stage.loopEndSeconds - stage.loopStartSeconds;
    let animTime = timeSeconds + stage.loopStartSeconds;
    if (loopSpan > 0) {
      animTime -= loopSpan * floor(animTime / loopSpan);
      animTime += stage.loopStartSeconds;
    }
    for (let i = 0; i < stage.animGroupCount; i += 1) {
      const stageAg = stage.animGroups[i];
      const info = this.animGroups[i];
      const anim = stageAg.anim;
      if (anim) {
        if (anim.rotXKeyframes) {
          info.prevRot.x = info.rot.x;
          info.rot.x = degToS16(interpolateKeyframes(anim.rotXKeyframeCount, anim.rotXKeyframes, animTime));
        }
        if (anim.rotYKeyframes) {
          info.prevRot.y = info.rot.y;
          info.rot.y = degToS16(interpolateKeyframes(anim.rotYKeyframeCount, anim.rotYKeyframes, animTime));
        }
        if (anim.rotZKeyframes) {
          info.prevRot.z = info.rot.z;
          info.rot.z = degToS16(interpolateKeyframes(anim.rotZKeyframeCount, anim.rotZKeyframes, animTime));
        }
        if (anim.posXKeyframes) {
          info.prevPos.x = info.pos.x - stageAg.unkB8.x;
          info.pos.x = interpolateKeyframes(anim.posXKeyframeCount, anim.posXKeyframes, animTime);
        }
        if (anim.posYKeyframes) {
          info.prevPos.y = info.pos.y - stageAg.unkB8.y;
          info.pos.y = interpolateKeyframes(anim.posYKeyframeCount, anim.posYKeyframes, animTime);
        }
        if (anim.posZKeyframes) {
          info.prevPos.z = info.pos.z - stageAg.unkB8.z;
          info.pos.z = interpolateKeyframes(anim.posZKeyframeCount, anim.posZKeyframes, animTime);
        }
      }
      this.matrixStack.fromTranslate(info.pos);
      this.matrixStack.rotateZ(info.rot.z);
      this.matrixStack.rotateY(info.rot.y);
      this.matrixStack.rotateX(info.rot.x - stageAg.initRot.x);
      this.matrixStack.rotateY(-stageAg.initRot.y);
      this.matrixStack.rotateZ(-stageAg.initRot.z);
      this.matrixStack.translateNeg(stageAg.initPos);
      this.matrixStack.toMtx(info.transform);
      this.matrixStack.fromTranslate(info.prevPos);
      this.matrixStack.rotateZ(info.prevRot.z);
      this.matrixStack.rotateY(info.prevRot.y);
      this.matrixStack.rotateX(info.prevRot.x - stageAg.initRot.x);
      this.matrixStack.rotateY(-stageAg.initRot.y);
      this.matrixStack.rotateZ(-stageAg.initRot.z);
      this.matrixStack.translateNeg(stageAg.initPos);
      this.matrixStack.toMtx(info.prevTransform);
    }
  }
  updateAnimGroupsSmb2(frameDelta, smb2LoadInFrames = null) {
    const stage = this.stage;
    const stack5 = this.matrixStack;
    for (let i = 0; i < stage.animGroupCount; i += 1) {
      const stageAg = stage.animGroups[i];
      const info = this.animGroups[i];
      const anim = stageAg.anim;
      const playbackState = info.playbackState & 7;
      let animTime = null;
      if (smb2LoadInFrames !== null && smb2LoadInFrames >= 0 && smb2LoadInFrames <= SMB2_STAGE_LOADIN_FRAMES) {
        if (playbackState === 1) {
          animTime = 0;
        } else {
          let animFrame = SMB2_STAGE_LOADIN_FRAMES - smb2LoadInFrames;
          animTime = animFrame / 60;
          if (playbackState === 3) {
            animTime *= 2;
            animFrame <<= 1;
          } else if (playbackState === 2) {
            animTime = -animTime;
          } else if (playbackState === 4) {
            animTime *= -2;
            animFrame *= -2;
          }
          info.animFrame = animFrame;
        }
      }
      if (animTime === null && anim) {
        let delta = 0;
        if (playbackState === 0) delta = frameDelta;
        else if (playbackState === 2) delta = -frameDelta;
        else if (playbackState === 3) delta = frameDelta * 2;
        else if (playbackState === 4) delta = -frameDelta * 2;
        info.animFrame += delta;
        if (stageAg.animLoopType === ANIM_PLAY_ONCE) {
          const startFrame = Math.trunc((stageAg.loopStartSeconds ?? 0) * 60);
          const endFrame = Math.trunc((stageAg.loopEndSeconds ?? 0) * 60);
          if (delta < 0 && info.animFrame < startFrame) {
            info.animFrame = startFrame;
            info.playbackState = info.playbackState & ~7 | 1;
          } else if (delta > 0 && info.animFrame > endFrame) {
            info.animFrame = endFrame;
            info.playbackState = info.playbackState & ~7 | 1;
          }
        }
      }
      if (animTime === null) {
        animTime = info.animFrame / 60;
      }
      if (stageAg.animLoopType === ANIM_LOOP || stageAg.animLoopType === ANIM_SEESAW) {
        const loopSpan = stageAg.loopEndSeconds - stageAg.loopStartSeconds;
        if (loopSpan > 0) {
          animTime -= loopSpan * Math.trunc(animTime / loopSpan);
          animTime += stageAg.loopStartSeconds;
        }
      }
      info.prevPos.x = info.pos.x - stageAg.conveyorSpeed.x;
      info.prevPos.y = info.pos.y - stageAg.conveyorSpeed.y;
      info.prevPos.z = info.pos.z - stageAg.conveyorSpeed.z;
      if (anim) {
        if (anim.rotXKeyframes) {
          info.prevRot.x = info.rot.x;
          info.rot.x = degToS16(interpolateKeyframes(anim.rotXKeyframeCount, anim.rotXKeyframes, animTime));
        }
        if (anim.rotYKeyframes) {
          info.prevRot.y = info.rot.y;
          info.rot.y = degToS16(interpolateKeyframes(anim.rotYKeyframeCount, anim.rotYKeyframes, animTime));
        }
        if (anim.rotZKeyframes) {
          info.prevRot.z = info.rot.z;
          info.rot.z = degToS16(interpolateKeyframes(anim.rotZKeyframeCount, anim.rotZKeyframes, animTime));
        }
        if (anim.posXKeyframes) {
          info.pos.x = interpolateKeyframes(anim.posXKeyframeCount, anim.posXKeyframes, animTime);
        }
        if (anim.posYKeyframes) {
          info.pos.y = interpolateKeyframes(anim.posYKeyframeCount, anim.posYKeyframes, animTime);
        }
        if (anim.posZKeyframes) {
          info.pos.z = interpolateKeyframes(anim.posZKeyframeCount, anim.posZKeyframes, animTime);
        }
      }
      const baseTransform = new Float32Array(12);
      const basePrevTransform = new Float32Array(12);
      stack5.fromTranslate(info.pos);
      stack5.rotateZ(info.rot.z);
      stack5.rotateY(info.rot.y);
      stack5.rotateX(info.rot.x - stageAg.initRot.x);
      stack5.rotateY(-stageAg.initRot.y);
      stack5.rotateZ(-stageAg.initRot.z);
      stack5.translateNeg(stageAg.origin);
      stack5.toMtx(baseTransform);
      stack5.fromTranslate(info.prevPos);
      stack5.rotateZ(info.prevRot.z);
      stack5.rotateY(info.prevRot.y);
      stack5.rotateX(info.prevRot.x - stageAg.initRot.x);
      stack5.rotateY(-stageAg.initRot.y);
      stack5.rotateZ(-stageAg.initRot.z);
      stack5.translateNeg(stageAg.origin);
      stack5.toMtx(basePrevTransform);
      if (info.seesawState) {
        tickSeesawState(info.seesawState);
        stack5.fromMtx(baseTransform);
        stack5.multRight(info.seesawState.transform);
        stack5.rotateZ(toS16(info.seesawState.angle));
        stack5.multRight(info.seesawState.invTransform);
        stack5.toMtx(info.transform);
        stack5.fromMtx(basePrevTransform);
        stack5.multRight(info.seesawState.transform);
        stack5.rotateZ(toS16(info.seesawState.prevAngle));
        stack5.multRight(info.seesawState.invTransform);
        stack5.toMtx(info.prevTransform);
      } else {
        info.transform.set(baseTransform);
        info.prevTransform.set(basePrevTransform);
      }
    }
  }
  updateObjects(world, ball = null, camera2 = null) {
    const animGroups = this.animGroups;
    const gravity = world.gravity ?? { x: 0, y: -1, z: 0 };
    const stack5 = this.matrixStack;
    const ballWorldPos = ball ? { x: ball.pos.x, y: ball.pos.y, z: ball.pos.z } : null;
    const ballLocalByGroup = ball ? new Array(animGroups.length) : null;
    let flyTargetWorld = null;
    const getBallLocalPos = (groupId) => {
      if (!ballLocalByGroup || !ballWorldPos) {
        return null;
      }
      if (ballLocalByGroup[groupId]) {
        return ballLocalByGroup[groupId];
      }
      const localPos = { x: ballWorldPos.x, y: ballWorldPos.y, z: ballWorldPos.z };
      if (groupId !== 0 && animGroups[groupId]) {
        stack5.fromMtx(animGroups[groupId].transform);
        stack5.rigidInvTfPoint(localPos, localPos);
      }
      ballLocalByGroup[groupId] = localPos;
      return localPos;
    };
    if (camera2) {
      const fov2 = BANANA_FOV_TAN * 2;
      flyTargetWorld = {
        x: BANANA_HUD_TARGET_X * fov2,
        y: BANANA_HUD_TARGET_Y * fov2,
        z: BANANA_HUD_TARGET_Z
      };
      stack5.fromTranslate(camera2.eye);
      stack5.rotateY(camera2.rotY);
      stack5.rotateX(camera2.rotX);
      stack5.rotateZ(camera2.rotZ);
      stack5.tfPoint(flyTargetWorld, flyTargetWorld);
    }
    for (const tape of this.goalTapes) {
      updateGoalTape(tape, animGroups, gravity, stack5);
    }
    for (const bag of this.goalBags) {
      updateGoalBag(bag, animGroups, gravity, this.goalHoldOpen, stack5, this.simRng);
    }
    updateConfetti(this, gravity);
    updateBallEffects(this.effects, gravity, this, this.visualRng);
    for (let i = 0; i < animGroups.length; i += 1) {
      const bumperStates = this.bumpers[i];
      for (const bumper of bumperStates) {
        bumper.prevPos.x = bumper.pos.x;
        bumper.prevPos.y = bumper.pos.y;
        bumper.prevPos.z = bumper.pos.z;
        if (bumper.state === 0) {
          bumper.spinVel += 256 - bumper.spinVel >> 6;
          if (bumper.pulseX > 1) {
            bumper.pulseX -= 0.06666666666666667;
            if (bumper.pulseX < 1) {
              bumper.pulseX = 1;
            }
          }
          bumper.pulseZ = bumper.pulseX;
        } else if (bumper.state === 1) {
          bumper.state = 2;
          bumper.counter = 7;
        }
        if (bumper.state === 2) {
          bumper.counter -= 1;
          if (bumper.counter < 0) {
            bumper.state = 0;
          }
          bumper.spinVel += 256;
          bumper.pulseX += 0.5 * (2 - bumper.pulseX);
          bumper.pulseZ = bumper.pulseX;
        }
        bumper.spin = toS16(bumper.spin + bumper.spinVel);
      }
      const jamabarStates = this.jamabars[i];
      for (const jamabar of jamabarStates) {
        jamabar.prevPos.x = jamabar.pos.x;
        jamabar.prevPos.y = jamabar.pos.y;
        jamabar.prevPos.z = jamabar.pos.z;
        stack5.fromTranslate(jamabar.basePos);
        stack5.rotateZ(jamabar.rot.z);
        stack5.rotateY(jamabar.rot.y);
        stack5.rotateX(jamabar.rot.x);
        stack5.push();
        if (animGroups[i]) {
          stack5.multLeft(animGroups[i].transform);
        }
        const gravityLocal = { x: gravity.x, y: gravity.y, z: gravity.z };
        stack5.rigidInvTfVec(gravityLocal, gravityLocal);
        stack5.pop();
        jamabar.localVel.z += gravityLocal.z * 0.016;
        jamabar.localVel.z *= 0.97;
        jamabar.localPos.z += jamabar.localVel.z;
        if (jamabar.localPos.z < -2.5) {
          jamabar.localPos.z = -2.5;
          if (jamabar.localVel.z < 0) {
            jamabar.localVel.z = -jamabar.localVel.z;
          }
        } else if (jamabar.localPos.z > 0) {
          jamabar.localPos.z = 0;
          if (jamabar.localVel.z > 0) {
            jamabar.localVel.z = -jamabar.localVel.z;
          }
        }
        stack5.tfPoint(jamabar.localPos, jamabar.pos);
      }
    }
    for (const banana of this.bananas) {
      banana.prevLocalPos.x = banana.localPos.x;
      banana.prevLocalPos.y = banana.localPos.y;
      banana.prevLocalPos.z = banana.localPos.z;
      banana.prevScale = banana.scale;
      banana.prevRotX = banana.rotX;
      banana.prevRotY = banana.rotY;
      banana.prevRotZ = banana.rotZ;
      if (banana.cooldown > 0) {
        banana.cooldown -= 1;
      }
      const ballLocalPos = banana.state === BANANA_STATE_HOLDING || banana.state === BANANA_STATE_FLY ? getBallLocalPos(banana.animGroupId) : null;
      let flyTargetLocal = null;
      if (banana.state === BANANA_STATE_FLY && flyTargetWorld) {
        flyTargetLocal = { x: flyTargetWorld.x, y: flyTargetWorld.y, z: flyTargetWorld.z };
        if (banana.animGroupId !== 0 && animGroups[banana.animGroupId]) {
          stack5.fromMtx(animGroups[banana.animGroupId].transform);
          stack5.rigidInvTfPoint(flyTargetLocal, flyTargetLocal);
        }
      }
      updateBanana(banana, ballLocalPos, flyTargetLocal);
    }
    for (const stageSwitch of this.switches) {
      if (stageSwitch.cooldown > 0) {
        stageSwitch.cooldown -= 1;
      }
    }
    if (this.format !== "smb2") {
      for (const stageSwitch of this.switches) {
        stageSwitch.prevPos.x = stageSwitch.pos.x;
        stageSwitch.prevPos.y = stageSwitch.pos.y;
        stageSwitch.prevPos.z = stageSwitch.pos.z;
        const playbackState = stageSwitch.type & 7;
        const groupMatches = this.isAnimGroupInPlaybackState(stageSwitch.animGroupId, playbackState);
        if (stageSwitch.state === 2) {
          stageSwitch.state = 3;
        }
        if (stageSwitch.state < 2) {
          if (stageSwitch.state === 0) {
            stageSwitch.state = 1;
            stageSwitch.pressImpulse = false;
            stageSwitch.triggered = false;
          }
          stageSwitch.localVel.y += -stageSwitch.localPos.y * 0.1;
          stageSwitch.localVel.y *= 0.95;
          stageSwitch.localPos.y += stageSwitch.localVel.y;
          if (stageSwitch.localPos.y < -0.1) {
            stageSwitch.localPos.y = -0.1;
            if (stageSwitch.localVel.y < 0) {
              stageSwitch.localVel.y *= -0.8;
            }
          } else if (stageSwitch.localPos.y > 0.1) {
            stageSwitch.localPos.y = 0.1;
            if (stageSwitch.localVel.y > 0) {
              stageSwitch.localVel.y *= -0.8;
            }
          }
          if (groupMatches) {
            stageSwitch.state = 2;
            if (!stageSwitch.triggered) {
              this.applySwitchPlayback(stageSwitch, false);
              stageSwitch.triggered = true;
            }
          }
          if (stageSwitch.pressImpulse && stageSwitch.localPos.y < -0.025) {
            stageSwitch.state = 2;
            if (!stageSwitch.triggered) {
              this.switchPressCount = (this.switchPressCount ?? 0) + 1;
              this.applySwitchPlayback(stageSwitch, false);
              stageSwitch.triggered = true;
            }
          }
        } else if (!groupMatches) {
          stageSwitch.state = 0;
        }
        if (stageSwitch.state >= 2) {
          stageSwitch.localVel.y += (-0.1 - stageSwitch.localPos.y) * 0.1;
          stageSwitch.localVel.y *= 0.9;
          stageSwitch.localPos.y += stageSwitch.localVel.y;
          if (stageSwitch.localPos.y < -0.1) {
            stageSwitch.localPos.y = -0.1;
            if (stageSwitch.localVel.y < 0) {
              stageSwitch.localVel.y *= -0.8;
            }
          } else if (stageSwitch.localPos.y > 0) {
            stageSwitch.localPos.y = 0;
            if (stageSwitch.localVel.y > 0) {
              stageSwitch.localVel.y *= -0.8;
            }
          }
        }
        stack5.fromIdentity();
        stack5.rotateZ(stageSwitch.rot.z);
        stack5.rotateY(stageSwitch.rot.y);
        stack5.rotateX(stageSwitch.rot.x);
        const localPos = {
          x: stageSwitch.localPos.x,
          y: stageSwitch.localPos.y,
          z: stageSwitch.localPos.z
        };
        stack5.tfPoint(localPos, localPos);
        stageSwitch.pos.x = stageSwitch.basePos.x + localPos.x;
        stageSwitch.pos.y = stageSwitch.basePos.y + localPos.y;
        stageSwitch.pos.z = stageSwitch.basePos.z + localPos.z;
      }
    }
    this.syncObjectTransforms();
  }
  syncObjectTransforms() {
    const animGroups = this.animGroups;
    const stack5 = this.matrixStack;
    for (const goal of this.goals) {
      stack5.fromTranslate(goal.pos);
      stack5.rotateZ(goal.rot.z);
      stack5.rotateY(goal.rot.y);
      stack5.rotateX(goal.rot.x);
      if (animGroups[goal.animGroupId]) {
        stack5.multLeft(animGroups[goal.animGroupId].transform);
      }
      stack5.toMtx(goal.transform);
    }
    for (let i = 0; i < this.bumpers.length; i += 1) {
      const bumperStates = this.bumpers[i];
      for (const bumper of bumperStates) {
        const drawPos = bumper.basePos ?? bumper.pos;
        stack5.fromTranslate(drawPos);
        stack5.rotateZ(bumper.rot.z);
        stack5.rotateY(bumper.rot.y);
        stack5.rotateX(bumper.rot.x);
        stack5.rotateY(bumper.spin);
        stack5.scaleXYZ(bumper.scale.x * bumper.pulseX, bumper.scale.y, bumper.scale.z * bumper.pulseZ);
        if (animGroups[i]) {
          stack5.multLeft(animGroups[i].transform);
        }
        stack5.toMtx(bumper.transform);
      }
    }
    for (let i = 0; i < this.jamabars.length; i += 1) {
      const jamabarStates = this.jamabars[i];
      for (const jamabar of jamabarStates) {
        stack5.fromTranslate(jamabar.pos);
        stack5.rotateZ(jamabar.rot.z);
        stack5.rotateY(jamabar.rot.y);
        stack5.rotateX(jamabar.rot.x);
        stack5.scaleXYZ(jamabar.scale.x, jamabar.scale.y, jamabar.scale.z);
        if (animGroups[i]) {
          stack5.multLeft(animGroups[i].transform);
        }
        stack5.toMtx(jamabar.transform);
      }
    }
    for (const banana of this.bananas) {
      if (animGroups[banana.animGroupId]) {
        stack5.fromMtx(animGroups[banana.animGroupId].transform);
        stack5.tfPoint(banana.localPos, banana.pos);
      } else {
        banana.pos.x = banana.localPos.x;
        banana.pos.y = banana.localPos.y;
        banana.pos.z = banana.localPos.z;
      }
    }
  }
  openGoalBag(goalId, ball) {
    const bag = this.goalBags[goalId];
    if (!bag || bag.flags !== 0) {
      return;
    }
    bag.flags = 1;
    bag.state = 2;
    bag.boundSphereRadius = GOAL_BAG_BASE_RADIUS * GOAL_BAG_OPEN_SCALE;
    bag.modelOrigin.x = GOAL_BAG_BASE_CENTER.x * GOAL_BAG_OPEN_SCALE;
    bag.modelOrigin.y = GOAL_BAG_BASE_CENTER.y * GOAL_BAG_OPEN_SCALE;
    bag.modelOrigin.z = GOAL_BAG_BASE_CENTER.z * GOAL_BAG_OPEN_SCALE;
    bag.localVel.x += 0.5 * ball.vel.x;
    bag.localVel.y += 0.5 * ball.vel.y;
    bag.localVel.z += 0.5 * ball.vel.z;
    if (bag.openFrame < 0) {
      bag.openFrame = this.timerFrames;
    }
    updateGoalBagTransform(bag, this.matrixStack);
    spawnGoalBagConfetti(this, bag, ball, this.visualRng);
  }
  breakGoalTape(goalId, ball) {
    this.openGoalBag(goalId, ball);
    const tape = this.goalTapes[goalId];
    if (!tape || tape.flags !== 0) {
      return;
    }
    const stack5 = this.matrixStack;
    const localPos = { x: ball.pos.x, y: ball.pos.y, z: ball.pos.z };
    const localVel = { x: ball.vel.x, y: ball.vel.y, z: ball.vel.z };
    stack5.fromIdentity();
    stack5.translate(tape.goal.pos);
    stack5.rotateZ(tape.goal.rot.z);
    stack5.rotateY(tape.goal.rot.y);
    stack5.rotateX(tape.goal.rot.x);
    stack5.rigidInvTfPoint(localPos, localPos);
    stack5.rigidInvTfVec(localVel, localVel);
    let nearestIndex = -1;
    let nearestDist = 17.5;
    for (let i = 0; i < tape.points.length; i += 1) {
      const point = tape.points[i];
      if ((point.flags & 4) === 0) {
        continue;
      }
      const dx = point.pos.x - localPos.x;
      const dy = point.pos.y - localPos.y;
      const dz = point.pos.z - localPos.z;
      const dist = sqrt(dx * dx + dy * dy + dz * dz);
      if (dist < nearestDist) {
        nearestDist = dist;
        nearestIndex = i;
      }
    }
    if (nearestIndex < 0 || nearestIndex + 1 >= tape.points.length) {
      return;
    }
    const pointA = tape.points[nearestIndex];
    const pointB = tape.points[nearestIndex + 1];
    pointA.flags &= ~4;
    pointB.flags &= ~2;
    pointA.vel.x += localVel.x;
    pointA.vel.y += localVel.y;
    pointA.vel.z += localVel.z;
    pointB.vel.x += localVel.x;
    pointB.vel.y += localVel.y;
    pointB.vel.z += localVel.z;
    tape.flags = 1;
    if (tape.breakFrame < 0) {
      tape.breakFrame = this.timerFrames;
    }
  }
  computeBoundSphere() {
    const animGroups = this.animGroups;
    const stack5 = new MatrixStack();
    const localStack = new MatrixStack();
    let hasBounds = false;
    const min = { x: 0, y: 0, z: 0 };
    const max2 = { x: 0, y: 0, z: 0 };
    for (let i = 0; i < this.stage.animGroupCount; i += 1) {
      const stageAg = this.stage.animGroups[i];
      if (!stageAg.triangles || stageAg.triangles.length === 0) {
        continue;
      }
      let localHas = false;
      const localMin = { x: 0, y: 0, z: 0 };
      const localMax = { x: 0, y: 0, z: 0 };
      for (const tri of stageAg.triangles) {
        localStack.fromTranslate(tri.pos);
        localStack.rotateY(tri.rot.y);
        localStack.rotateX(tri.rot.x);
        localStack.rotateZ(tri.rot.z);
        const v1 = { x: tri.pos.x, y: tri.pos.y, z: tri.pos.z };
        const v2 = { x: tri.vert2.x, y: tri.vert2.y, z: 0 };
        const v3 = { x: tri.vert3.x, y: tri.vert3.y, z: 0 };
        localStack.tfPoint(v2, v2);
        localStack.tfPoint(v3, v3);
        if (!localHas) {
          localHas = true;
          localMin.x = v1.x;
          localMin.y = v1.y;
          localMin.z = v1.z;
          localMax.x = v1.x;
          localMax.y = v1.y;
          localMax.z = v1.z;
        }
        const verts = [v1, v2, v3];
        for (const v of verts) {
          if (v.x < localMin.x) localMin.x = v.x;
          if (v.y < localMin.y) localMin.y = v.y;
          if (v.z < localMin.z) localMin.z = v.z;
          if (v.x > localMax.x) localMax.x = v.x;
          if (v.y > localMax.y) localMax.y = v.y;
          if (v.z > localMax.z) localMax.z = v.z;
        }
      }
      if (!localHas) {
        continue;
      }
      const corners = [
        { x: localMin.x, y: localMin.y, z: localMin.z },
        { x: localMin.x, y: localMin.y, z: localMax.z },
        { x: localMin.x, y: localMax.y, z: localMin.z },
        { x: localMin.x, y: localMax.y, z: localMax.z },
        { x: localMax.x, y: localMin.y, z: localMin.z },
        { x: localMax.x, y: localMin.y, z: localMax.z },
        { x: localMax.x, y: localMax.y, z: localMin.z },
        { x: localMax.x, y: localMax.y, z: localMax.z }
      ];
      stack5.fromMtx(animGroups[i].transform);
      for (const corner of corners) {
        stack5.tfPoint(corner, corner);
        if (!hasBounds) {
          hasBounds = true;
          min.x = corner.x;
          min.y = corner.y;
          min.z = corner.z;
          max2.x = corner.x;
          max2.y = corner.y;
          max2.z = corner.z;
        } else {
          if (corner.x < min.x) min.x = corner.x;
          if (corner.y < min.y) min.y = corner.y;
          if (corner.z < min.z) min.z = corner.z;
          if (corner.x > max2.x) max2.x = corner.x;
          if (corner.y > max2.y) max2.y = corner.y;
          if (corner.z > max2.z) max2.z = corner.z;
        }
      }
    }
    if (!hasBounds) {
      this.boundSphere.pos.x = 0;
      this.boundSphere.pos.y = 0;
      this.boundSphere.pos.z = 0;
      this.boundSphere.radius = 50;
      return;
    }
    this.boundSphere.pos.x = (max2.x + min.x) * 0.5;
    this.boundSphere.pos.y = (max2.y + min.y) * 0.5;
    this.boundSphere.pos.z = (max2.z + min.z) * 0.5;
    const half = {
      x: (max2.x - min.x) * 0.5,
      y: (max2.y - min.y) * 0.5,
      z: (max2.z - min.z) * 0.5
    };
    this.boundSphere.radius = sqrt(half.x * half.x + half.y * half.y + half.z * half.z);
    if (this.boundSphere.radius < FLY_IN_MIN_RADIUS) {
      this.boundSphere.radius = FLY_IN_MIN_RADIUS;
    }
  }
  getFlyInSphere() {
    const override = STAGE_FLY_IN_OVERRIDES.get(this.stage.stageId);
    if (override) {
      return {
        pos: { x: override.pos.x, y: override.pos.y, z: override.pos.z },
        radius: override.radius
      };
    }
    const radius = Math.max(this.boundSphere.radius, FLY_IN_MIN_RADIUS);
    return {
      pos: { x: this.boundSphere.pos.x, y: this.boundSphere.pos.y, z: this.boundSphere.pos.z },
      radius
    };
  }
};
function createSeesawState(stageAg, stack5) {
  const seesaw = {
    angle: 0,
    prevAngle: 0,
    angleVel: 0,
    sensitivity: stageAg.seesawSensitivity * 40,
    friction: 1 - stageAg.seesawFriction * 0.02,
    spring: stageAg.seesawSpring * -2,
    transform: new Float32Array(12),
    invTransform: new Float32Array(12)
  };
  stack5.fromTranslate(stageAg.origin);
  stack5.rotateZ(stageAg.initRot.z);
  stack5.rotateY(stageAg.initRot.y);
  stack5.rotateX(stageAg.initRot.x);
  stack5.toMtx(seesaw.transform);
  stack5.fromRotateX(-stageAg.initRot.x);
  stack5.rotateY(-stageAg.initRot.y);
  stack5.rotateZ(-stageAg.initRot.z);
  stack5.translateNeg(stageAg.origin);
  stack5.toMtx(seesaw.invTransform);
  return seesaw;
}
function tickSeesawState(seesaw) {
  const sinAngle = sinS16(toS16(seesaw.angle));
  seesaw.angleVel += seesaw.spring * sinAngle;
  seesaw.angleVel *= seesaw.friction;
  seesaw.prevAngle = seesaw.angle;
  seesaw.angle += seesaw.angleVel;
}
function createGoalTapeState(goal, animGroupId, stageRuntime, stack5) {
  const anchorY = stageRuntime.stage.goalTapeAnchorY ?? GOAL_TAPE_ANCHOR_Y;
  const points = new Array(GOAL_TAPE_SEGMENT_COUNT);
  for (let i = 0; i < GOAL_TAPE_SEGMENT_COUNT; i += 1) {
    const t = (GOAL_TAPE_SEGMENT_COUNT - 1 - i) / (GOAL_TAPE_SEGMENT_COUNT - 1);
    points[i] = {
      pos: {
        x: GOAL_TAPE_X_SCALE * t - GOAL_TAPE_X_OFFSET,
        y: anchorY,
        z: 0
      },
      prevPos: { x: GOAL_TAPE_X_SCALE * t - GOAL_TAPE_X_OFFSET, y: anchorY, z: 0 },
      normal: { x: 0, y: 0, z: 1 },
      prevNormal: { x: 0, y: 0, z: 1 },
      t,
      vel: { x: 0, y: 0, z: 0 },
      flags: 6,
      len: GOAL_TAPE_SEGMENT_LEN
    };
  }
  points[0].flags = points[0].flags & ~2 | 1;
  points[GOAL_TAPE_SEGMENT_COUNT - 1].flags = points[GOAL_TAPE_SEGMENT_COUNT - 1].flags & ~4 | 1;
  const goalPos = { x: goal.pos.x, y: goal.pos.y, z: goal.pos.z };
  const goalRot = { x: goal.rot.x, y: goal.rot.y, z: goal.rot.z };
  const anchorPos = { x: 0, y: anchorY, z: 0 };
  const animGroup = stageRuntime.animGroups[animGroupId];
  stack5.fromTranslate(goalPos);
  stack5.rotateZ(goalRot.z);
  stack5.rotateY(goalRot.y);
  stack5.rotateX(goalRot.x);
  if (animGroup) {
    stack5.multLeft(animGroup.transform);
  }
  stack5.tfPoint(anchorPos, anchorPos);
  let floorY = GOAL_TAPE_GROUND_OFFSET;
  const hit = raycastStageDown(anchorPos, stageRuntime);
  if (hit?.flags) {
    const localHit = { x: hit.pos.x, y: hit.pos.y, z: hit.pos.z };
    stack5.rigidInvTfPoint(localHit, localHit);
    if (anchorY > localHit.y) {
      floorY = localHit.y + GOAL_TAPE_GROUND_OFFSET;
    }
  }
  return {
    animGroupId,
    flags: 0,
    breakFrame: -1,
    groundY: floorY,
    anchorY,
    targetY: anchorY,
    goal: {
      pos: goalPos,
      rot: goalRot
    },
    points
  };
}
function createGoalBagState(goal, animGroupId, stack5) {
  const localOffset = { x: GOAL_BAG_OFFSET.x, y: GOAL_BAG_OFFSET.y, z: GOAL_BAG_OFFSET.z };
  stack5.fromTranslate(goal.pos);
  stack5.rotateZ(goal.rot.z);
  stack5.rotateY(goal.rot.y);
  stack5.rotateX(goal.rot.x);
  stack5.tfPoint(localOffset, localOffset);
  const localPos = { x: GOAL_BAG_LOCAL_START.x, y: GOAL_BAG_LOCAL_START.y, z: GOAL_BAG_LOCAL_START.z };
  vecNormalizeLen(localPos);
  const bag = {
    animGroupId,
    state: 1,
    counter: 0,
    flags: 0,
    openness: 0,
    prevOpenness: 0,
    unk8: 0,
    openFrame: -1,
    goal: {
      pos: { x: goal.pos.x, y: goal.pos.y, z: goal.pos.z },
      rot: { x: goal.rot.x, y: goal.rot.y, z: goal.rot.z }
    },
    rotX: goal.rot.x,
    rotY: goal.rot.y,
    rotZ: goal.rot.z,
    prevRotX: goal.rot.x,
    prevRotY: goal.rot.y,
    prevRotZ: goal.rot.z,
    uSomePos: localOffset,
    localPos,
    localVel: { x: 0, y: 0, z: 0 },
    modelOrigin: { x: GOAL_BAG_BASE_CENTER.x, y: GOAL_BAG_BASE_CENTER.y, z: GOAL_BAG_BASE_CENTER.z },
    boundSphereRadius: GOAL_BAG_BASE_RADIUS,
    position: { x: 0, y: 0, z: 0 },
    prevPos: { x: 0, y: 0, z: 0 }
  };
  updateGoalBagTransform(bag, stack5);
  bag.prevPos.x = bag.position.x;
  bag.prevPos.y = bag.position.y;
  bag.prevPos.z = bag.position.z;
  return bag;
}
function updateGoalBagTransform(bag, stack5) {
  bag.prevPos.x = bag.position.x;
  bag.prevPos.y = bag.position.y;
  bag.prevPos.z = bag.position.z;
  stack5.fromTranslate(bag.uSomePos);
  stack5.rotateY(bag.rotY);
  stack5.rotateX(bag.rotX);
  stack5.rotateZ(bag.rotZ);
  stack5.tfPoint(bag.modelOrigin, bag.position);
}
function updateGoalBag(bag, animGroups, gravity, holdOpen, stack5, rng) {
  bag.prevOpenness = bag.openness;
  bag.prevRotX = bag.rotX;
  bag.prevRotY = bag.rotY;
  bag.prevRotZ = bag.rotZ;
  switch (bag.state) {
    case 1:
      break;
    case 2:
    case 3:
      bag.state = 4;
      bag.counter = -1;
      bag.unk8 = 0.05 + 0.1 * randFloat2(rng);
    // fall through
    case 4:
      if (bag.counter > 0) {
        bag.counter -= 1;
        if (bag.counter === 0 && !holdOpen) {
          bag.state = 5;
        }
      }
      bag.unk8 += 5e-3;
      bag.unk8 *= 0.99;
      bag.openness += bag.unk8;
      if (bag.openness < 0) {
        bag.openness = 0;
        if (bag.unk8 < 0) {
          bag.unk8 = 0.5 * -bag.unk8;
        }
      } else if (bag.openness > 1) {
        bag.openness = 1;
        if (bag.unk8 > 0) {
          bag.unk8 = 0.5 * -bag.unk8;
        }
      }
      break;
    case 5:
    case 6:
      bag.state = 7;
      bag.counter = 60;
      bag.unk8 = 0.05 + 0.1 * randFloat2(rng);
    // fall through
    case 7:
      bag.counter -= 1;
      bag.unk8 -= 5e-3;
      bag.unk8 *= 0.99;
      bag.openness += bag.unk8;
      if (bag.openness < 0) {
        bag.openness = 0;
        bag.flags = 0;
        bag.openFrame = -1;
        if (bag.counter < 0) {
          bag.state = 1;
          bag.unk8 = 0;
          bag.boundSphereRadius = GOAL_BAG_BASE_RADIUS;
          bag.modelOrigin.x = GOAL_BAG_BASE_CENTER.x;
          bag.modelOrigin.y = GOAL_BAG_BASE_CENTER.y;
          bag.modelOrigin.z = GOAL_BAG_BASE_CENTER.z;
        } else if (bag.unk8 < 0) {
          bag.unk8 = 0.5 * -bag.unk8;
        }
      } else if (bag.openness > 1) {
        bag.openness = 1;
        if (bag.unk8 > 0) {
          bag.unk8 = 0.5 * -bag.unk8;
        }
      }
      break;
    default:
      break;
  }
  const sp3C = { x: 8e-3 * gravity.x, y: 8e-3 * gravity.y, z: 8e-3 * gravity.z };
  if (bag.animGroupId > 0) {
    stack5.fromMtx(animGroups[bag.animGroupId].transform);
    stack5.rigidInvTfVec(sp3C, sp3C);
  }
  bag.localVel.x += sp3C.x;
  bag.localVel.y += sp3C.y;
  bag.localVel.z += sp3C.z;
  if (bag.animGroupId > 0) {
    const animGroup = animGroups[bag.animGroupId];
    const prevWorld = { x: 0, y: 0, z: 0 };
    const currWorld = { x: 0, y: 0, z: 0 };
    stack5.fromMtx(animGroup.prevTransform);
    stack5.tfPoint(bag.position, prevWorld);
    stack5.fromMtx(animGroup.transform);
    stack5.tfPoint(bag.position, currWorld);
    prevWorld.x -= currWorld.x;
    prevWorld.y -= currWorld.y;
    prevWorld.z -= currWorld.z;
    stack5.rigidInvTfVec(prevWorld, prevWorld);
    bag.localVel.x += 0.02 * (prevWorld.x - bag.localVel.x);
    bag.localVel.y += 0.02 * (prevWorld.y - bag.localVel.y);
    bag.localVel.z += 0.02 * (prevWorld.z - bag.localVel.z);
  } else {
    bag.localVel.x *= 0.98;
    bag.localVel.y *= 0.98;
    bag.localVel.z *= 0.98;
  }
  const sp30 = { x: GOAL_BAG_GUIDE_POS.x, y: GOAL_BAG_GUIDE_POS.y, z: GOAL_BAG_GUIDE_POS.z };
  const sp24 = { x: GOAL_BAG_GUIDE_DIR.x, y: GOAL_BAG_GUIDE_DIR.y, z: GOAL_BAG_GUIDE_DIR.z };
  stack5.fromTranslate(bag.goal.pos);
  stack5.rotateZ(bag.goal.rot.z);
  stack5.rotateY(bag.goal.rot.y);
  stack5.rotateX(bag.goal.rot.x);
  stack5.tfPoint(sp30, sp30);
  stack5.tfVec(sp24, sp24);
  const temp_f31 = bag.boundSphereRadius;
  const sp18 = {
    x: bag.uSomePos.x + temp_f31 * bag.localPos.x,
    y: bag.uSomePos.y + temp_f31 * bag.localPos.y,
    z: bag.uSomePos.z + temp_f31 * bag.localPos.z
  };
  const axisDelta = {
    x: sp18.x - sp30.x,
    y: sp18.y - sp30.y,
    z: sp18.z - sp30.z
  };
  const temp_f12 = vecDot(axisDelta, sp24);
  if (axisDelta.x * axisDelta.x + axisDelta.y * axisDelta.y + axisDelta.z * axisDelta.z - temp_f12 * temp_f12 < temp_f31 * temp_f31) {
    const projected = {
      x: sp30.x + sp24.x * temp_f12,
      y: sp30.y + sp24.y * temp_f12,
      z: sp30.z + sp24.z * temp_f12
    };
    const spC = {
      x: sp18.x - projected.x,
      y: sp18.y - projected.y,
      z: sp18.z - projected.z
    };
    vecNormalizeLen(spC);
    bag.localPos.x = projected.x + spC.x * temp_f31 - bag.uSomePos.x;
    bag.localPos.y = projected.y + spC.y * temp_f31 - bag.uSomePos.y;
    bag.localPos.z = projected.z + spC.z * temp_f31 - bag.uSomePos.z;
    vecNormalizeLen(bag.localPos);
    let temp_f2_4 = spC.x * bag.localVel.x + spC.y * bag.localVel.y + spC.z * bag.localVel.z;
    if (temp_f2_4 < 0) {
      temp_f2_4 *= -1.5;
      bag.localVel.x += temp_f2_4 * spC.x;
      bag.localVel.y += temp_f2_4 * spC.y;
      bag.localVel.z += temp_f2_4 * spC.z;
    }
  }
  const temp_f2_6 = -vecDot(bag.localPos, bag.localVel);
  bag.localVel.x += temp_f2_6 * bag.localPos.x;
  bag.localVel.y += temp_f2_6 * bag.localPos.y;
  bag.localVel.z += temp_f2_6 * bag.localPos.z;
  bag.localPos.x += bag.localVel.x;
  bag.localPos.y += bag.localVel.y;
  bag.localPos.z += bag.localVel.z;
  vecNormalizeLen(bag.localPos);
  const rotVec = { x: bag.localPos.x, y: bag.localPos.y, z: bag.localPos.z };
  stack5.fromRotateY(-bag.rotY);
  stack5.rotateX(0);
  stack5.tfVec(rotVec, rotVec);
  bag.rotX = atan2S16Safe(rotVec.z, rotVec.y) - 32768;
  bag.rotZ = atan2S16Safe(rotVec.x, sqrt(sumSq2(rotVec.z, rotVec.y)));
  updateGoalBagTransform(bag, stack5);
}
function updateBanana(banana, ballLocalPos, flyTargetLocal) {
  if (banana.state === 0) {
    return;
  }
  if (banana.tiltTimer > 0) {
    banana.tiltTimer -= 1;
  }
  if (banana.state === BANANA_STATE_HOLDING) {
    banana.holdTimer -= 1;
    if (banana.holdTimer <= 0) {
      banana.state = BANANA_STATE_FLY;
      banana.flyTimer = BANANA_FLY_FRAMES;
      if (ballLocalPos) {
        banana.flyStartPos.x = ballLocalPos.x + banana.holdOffset.x;
        banana.flyStartPos.y = ballLocalPos.y + banana.holdOffset.y;
        banana.flyStartPos.z = ballLocalPos.z + banana.holdOffset.z;
      } else {
        banana.flyStartPos.x = banana.localPos.x;
        banana.flyStartPos.y = banana.localPos.y;
        banana.flyStartPos.z = banana.localPos.z;
      }
      banana.flyStartScale = banana.scale;
      return;
    }
    if (ballLocalPos) {
      banana.holdOffset.x *= BANANA_HOLD_DAMP;
      banana.holdOffset.z *= BANANA_HOLD_DAMP;
      const t = (BANANA_HOLD_FRAMES - banana.holdTimer) / BANANA_HOLD_FRAMES;
      const targetY = BANANA_HOLD_Y_BASE + BANANA_HOLD_Y_RANGE * t;
      banana.holdOffset.y += (targetY - banana.holdOffset.y) * BANANA_HOLD_Y_LERP;
      banana.localPos.x = ballLocalPos.x + banana.holdOffset.x;
      banana.localPos.y = ballLocalPos.y + banana.holdOffset.y;
      banana.localPos.z = ballLocalPos.z + banana.holdOffset.z;
    }
    const rotDelta = toS16(BANANA_HOLD_ROT_TARGET - banana.holdRotVel);
    banana.holdRotVel = toS16(banana.holdRotVel + (rotDelta >> 3));
    banana.rotY = toS16(banana.rotY + banana.holdRotVel);
    banana.scale += (banana.holdScaleTarget - banana.scale) * 0.2;
    return;
  }
  if (banana.state === BANANA_STATE_FLY) {
    if (!flyTargetLocal) {
      banana.state = 6;
      return;
    }
    banana.flyTimer -= 1;
    const t = 1 - Math.max(0, banana.flyTimer) / BANANA_FLY_FRAMES;
    const eased = 1 - Math.cos(t * Math.PI / 2);
    let startPos = banana.flyStartPos;
    if (ballLocalPos) {
      banana.localPos.x = ballLocalPos.x + banana.holdOffset.x;
      banana.localPos.y = ballLocalPos.y + banana.holdOffset.y;
      banana.localPos.z = ballLocalPos.z + banana.holdOffset.z;
      startPos = banana.localPos;
    }
    banana.localPos.x = startPos.x + (flyTargetLocal.x - startPos.x) * eased;
    banana.localPos.y = startPos.y + (flyTargetLocal.y - startPos.y) * eased;
    banana.localPos.z = startPos.z + (flyTargetLocal.z - startPos.z) * eased;
    banana.scale = banana.flyStartScale + (banana.flyScaleTarget - banana.flyStartScale) * eased;
    banana.rotY = toS16(banana.rotY + banana.holdRotVel);
    if (banana.flyTimer <= 0) {
      banana.state = 0;
      banana.collected = true;
    }
    return;
  }
  switch (banana.state) {
    case 1:
      banana.state = 2;
      break;
    case 3:
      banana.state = 4;
    // fall through
    case 4:
      banana.state = 5;
      banana.collectTimer = BANANA_COLLECT_WAIT_FRAMES;
    // fall through
    case 5:
      banana.collectTimer -= 1;
      if (banana.collectTimer < 0) {
        banana.state = 6;
      }
      break;
    case 6:
      banana.scale -= BANANA_SHRINK_STEP;
      if (banana.scale <= 0) {
        banana.scale = 0;
        banana.state = 0;
        banana.collected = true;
      }
      break;
    default:
      break;
  }
  banana.localPos.x += banana.vel.x;
  banana.localPos.y += banana.vel.y;
  banana.localPos.z += banana.vel.z;
  banana.rotX = toS16(banana.rotX + banana.rotVelX);
  banana.rotY = toS16(banana.rotY + banana.rotVelY);
  banana.rotZ = toS16(banana.rotZ + banana.rotVelZ);
}
function updateGoalTape(tape, animGroups, gravity, stack5) {
  const points = tape.points;
  const motionDelta = { x: 0, y: 0, z: 0 };
  const prevWorld = { x: 0, y: 0, z: 0 };
  const currWorld = { x: 0, y: 0, z: 0 };
  let hasGroupMotion = false;
  if (tape.animGroupId !== 0 && animGroups[tape.animGroupId]) {
    const animGroup2 = animGroups[tape.animGroupId];
    hasGroupMotion = true;
    stack5.fromMtx(animGroup2.prevTransform);
    stack5.tfPoint(tape.goal.pos, prevWorld);
    stack5.fromMtx(animGroup2.transform);
    stack5.tfPoint(tape.goal.pos, currWorld);
    motionDelta.x = prevWorld.x - currWorld.x;
    motionDelta.y = prevWorld.y - currWorld.y;
    motionDelta.z = prevWorld.z - currWorld.z;
    stack5.fromRotateZ(tape.goal.rot.z);
    stack5.rotateY(tape.goal.rot.y);
    stack5.rotateX(tape.goal.rot.x);
    stack5.rigidInvTfVec(motionDelta, motionDelta);
  }
  const gravityLocal = {
    x: GOAL_TAPE_GRAVITY_SCALE * gravity.x,
    y: GOAL_TAPE_GRAVITY_SCALE * gravity.y,
    z: GOAL_TAPE_GRAVITY_SCALE * gravity.z
  };
  const animGroup = animGroups[tape.animGroupId];
  if (animGroup) {
    stack5.fromMtx(animGroup.transform);
  } else {
    stack5.fromIdentity();
  }
  stack5.translate(tape.goal.pos);
  stack5.rotateZ(tape.goal.rot.z);
  stack5.rotateY(tape.goal.rot.y);
  stack5.rotateX(tape.goal.rot.x);
  stack5.rigidInvTfVec(gravityLocal, gravityLocal);
  for (const point of points) {
    point.prevPos.x = point.pos.x;
    point.prevPos.y = point.pos.y;
    point.prevPos.z = point.pos.z;
    point.prevNormal.x = point.normal.x;
    point.prevNormal.y = point.normal.y;
    point.prevNormal.z = point.normal.z;
  }
  const neighborSum = { x: 0, y: 0, z: 0 };
  const delta = { x: 0, y: 0, z: 0 };
  for (let i = 0; i < points.length; i += 1) {
    const point = points[i];
    if (point.flags & 1) {
      continue;
    }
    neighborSum.x = 0;
    neighborSum.y = 0;
    neighborSum.z = 0;
    if (point.flags & 2) {
      const prev = points[i - 1];
      neighborSum.x += prev.normal.x;
      neighborSum.y += prev.normal.y;
      neighborSum.z += prev.normal.z;
      delta.x = prev.pos.x - point.pos.x;
      delta.y = prev.pos.y - point.pos.y;
      delta.z = prev.pos.z - point.pos.z;
      const len = vecNormalizeLen(delta);
      let target = prev.len;
      if (len > target) {
        target = 1.05 * (len - target);
        point.vel.x += delta.x * target;
        point.vel.y += delta.y * target;
        point.vel.z += delta.z * target;
      } else {
        target = -target;
        point.pos.x = prev.pos.x + delta.x * target;
        point.pos.y = prev.pos.y + delta.y * target;
        point.pos.z = prev.pos.z + delta.z * target;
        const dot = -vecDot(point.vel, delta);
        point.vel.x += delta.x * dot;
        point.vel.y += delta.y * dot;
        point.vel.z += delta.z * dot;
      }
    }
    if (point.flags & 4) {
      const next = points[i + 1];
      neighborSum.x += next.normal.x;
      neighborSum.y += next.normal.y;
      neighborSum.z += next.normal.z;
      delta.x = next.pos.x - point.pos.x;
      delta.y = next.pos.y - point.pos.y;
      delta.z = next.pos.z - point.pos.z;
      const len = vecNormalizeLen(delta);
      let target = point.len;
      if (len > target) {
        target = 1.05 * (len - target);
        point.vel.x += delta.x * target;
        point.vel.y += delta.y * target;
        point.vel.z += delta.z * target;
      } else {
        target = -target;
        point.pos.x = next.pos.x + delta.x * target;
        point.pos.y = next.pos.y + delta.y * target;
        point.pos.z = next.pos.z + delta.z * target;
        const dot = -vecDot(point.vel, delta);
        point.vel.x += delta.x * dot;
        point.vel.y += delta.y * dot;
        point.vel.z += delta.z * dot;
      }
    }
    point.vel.x += gravityLocal.x;
    point.vel.y += gravityLocal.y;
    point.vel.z += gravityLocal.z;
    stack5.fromRotateY(toS16(49152 * (point.vel.x + point.vel.z)));
    stack5.rotateX(toS16(98304 * point.vel.y));
    stack5.tfVec(point.normal, point.normal);
    point.normal.x += 0.075 * (neighborSum.x - point.normal.x);
    point.normal.y += 0.075 * (neighborSum.y - point.normal.y);
    point.normal.z += 0.075 * (neighborSum.z - point.normal.z);
    vecNormalizeLen(point.normal);
  }
  if (tape.anchorY > tape.targetY) {
    tape.anchorY -= GOAL_TAPE_Y_STEP;
    if (tape.anchorY < tape.targetY) {
      tape.anchorY = tape.targetY;
    }
  } else if (tape.anchorY < tape.targetY) {
    tape.anchorY += GOAL_TAPE_Y_STEP;
    if (tape.anchorY > tape.targetY) {
      tape.anchorY = tape.targetY;
    }
  }
  points[0].pos.y = tape.anchorY;
  points[points.length - 1].pos.y = tape.anchorY;
  for (let i = 0; i < points.length; i += 1) {
    const point = points[i];
    if (point.flags & 1) {
      continue;
    }
    if (hasGroupMotion && (point.flags & 6) !== 6) {
      point.vel.x += 0.15 * (motionDelta.x - point.vel.x);
      point.vel.y += 0.15 * (motionDelta.y - point.vel.y);
      point.vel.z += 0.15 * (motionDelta.z - point.vel.z);
    } else {
      point.vel.x *= 0.85;
      point.vel.y *= 0.85;
      point.vel.z *= 0.85;
    }
    point.pos.x += point.vel.x;
    point.pos.y += point.vel.y;
    point.pos.z += point.vel.z;
    if (point.pos.y < tape.groundY) {
      point.pos.y = tape.groundY;
      point.vel.y = 0;
      point.normal.x *= 0.9;
      point.normal.y += 0.1 * (1 - point.normal.y);
      point.normal.z *= 0.9;
      vecNormalizeLen(point.normal);
    }
  }
}
function createConfettiParticle(modelIndex, pos, vel, rotX, rotY, rotZ, scale, life) {
  return {
    modelIndex,
    pos: { x: pos.x, y: pos.y, z: pos.z },
    prevPos: { x: pos.x, y: pos.y, z: pos.z },
    vel: { x: vel.x, y: vel.y, z: vel.z },
    rotX,
    rotY,
    rotZ,
    prevRotX: rotX,
    prevRotY: rotY,
    prevRotZ: rotZ,
    rotVelX: 0,
    rotVelY: 0,
    rotVelZ: 0,
    scale,
    life,
    onGround: false,
    groundPos: { x: 0, y: 0, z: 0 },
    groundNormal: { x: 0, y: 1, z: 0 },
    groundVel: { x: 0, y: 0, z: 0 },
    groundBias: 0
  };
}
function spawnGoalBagConfetti(stageRuntime, bag, ball, rng) {
  const animGroup = stageRuntime.animGroups[bag.animGroupId];
  const stack5 = stageRuntime.matrixStack;
  const vel = { x: ball.vel.x, y: ball.vel.y, z: ball.vel.z };
  const worldPos = { x: 0, y: 0, z: 0 };
  const prevWorldPos = { x: 0, y: 0, z: 0 };
  if (animGroup) {
    stack5.fromMtx(animGroup.transform);
    stack5.tfVec(vel, vel);
  }
  if (animGroup) {
    stack5.fromMtx(animGroup.transform);
    stack5.tfPoint(bag.position, worldPos);
    stack5.fromMtx(animGroup.prevTransform);
    stack5.tfPoint(bag.position, prevWorldPos);
    vel.x += worldPos.x - prevWorldPos.x;
    vel.y += worldPos.y - prevWorldPos.y;
    vel.z += worldPos.z - prevWorldPos.z;
  } else {
    vel.x += bag.position.x - bag.prevPos.x;
    vel.y += bag.position.y - bag.prevPos.y;
    vel.z += bag.position.z - bag.prevPos.z;
  }
  const baseRadius = bag.boundSphereRadius;
  const modelIndexBase = 0;
  if (animGroup) {
    stack5.fromMtx(animGroup.transform);
  } else {
    stack5.fromIdentity();
  }
  stack5.translate(bag.position);
  const localPos = { x: 0, y: 0, z: 0 };
  const spawnPos = { x: 0, y: 0, z: 0 };
  const spawnCount = 160;
  for (let i = 0; i < spawnCount; i += 1) {
    localPos.z = 0.5 * (baseRadius * (1 + randFloat2(rng)));
    stack5.rotateY(randS162(rng));
    stack5.rotateX(randS162(rng));
    localPos.x = 0;
    localPos.y = 0;
    stack5.tfPoint(localPos, spawnPos);
    const rotX = randS162(rng);
    const rotY = randS162(rng);
    const rotZ = randS162(rng);
    const scale = 0.5 + 0.5 * randFloat2(rng);
    const life = Math.trunc(CONFETTI_LIFE_BASE + CONFETTI_LIFE_RANGE * randFloat2(rng));
    const modelIndex = (modelIndexBase + i % CONFETTI_MODEL_COUNT) % CONFETTI_MODEL_COUNT;
    const frag = createConfettiParticle(modelIndex, spawnPos, vel, rotX, rotY, rotZ, scale, life);
    frag.groundBias = 1e-4 * randFloat2(rng);
    stageRuntime.confetti.push(frag);
  }
}
function updateConfetti(stageRuntime, gravity) {
  const stack5 = stageRuntime.matrixStack;
  const confetti = stageRuntime.confetti;
  for (let i = confetti.length - 1; i >= 0; i -= 1) {
    const frag = confetti[i];
    frag.prevPos.x = frag.pos.x;
    frag.prevPos.y = frag.pos.y;
    frag.prevPos.z = frag.pos.z;
    frag.prevRotX = frag.rotX;
    frag.prevRotY = frag.rotY;
    frag.prevRotZ = frag.rotZ;
    frag.life -= 1;
    if (frag.life <= 0) {
      confetti.splice(i, 1);
      continue;
    }
    frag.vel.x += gravity.x * CONFETTI_GRAVITY_SCALE;
    frag.vel.y += gravity.y * CONFETTI_GRAVITY_SCALE;
    frag.vel.z += gravity.z * CONFETTI_GRAVITY_SCALE;
    const dir = { x: 0, y: 1, z: 0 };
    stack5.fromIdentity();
    stack5.rotateY(frag.rotY);
    stack5.rotateX(frag.rotX);
    stack5.rotateZ(frag.rotZ);
    stack5.tfVec(dir, dir);
    const dot = dir.x * frag.vel.x + dir.y * frag.vel.y + dir.z * frag.vel.z;
    const align3 = CONFETTI_BOUNCE * dot;
    frag.vel.x += dir.x * align3;
    frag.vel.y += dir.y * align3;
    frag.vel.z += dir.z * align3;
    frag.vel.x *= CONFETTI_VEL_DAMP;
    frag.vel.y *= CONFETTI_VEL_DAMP;
    frag.vel.z *= CONFETTI_VEL_DAMP;
    frag.pos.x += frag.vel.x;
    frag.pos.y += frag.vel.y;
    frag.pos.z += frag.vel.z;
    const rotScale = CONFETTI_ROT_SPEED_SCALE / Math.max(frag.scale, 1e-3);
    frag.rotVelX = frag.rotVelX + Math.trunc(rotScale * (frag.vel.x + frag.vel.y)) | 0;
    frag.rotVelY = frag.rotVelY + Math.trunc(rotScale * (frag.vel.y + frag.vel.z)) | 0;
    frag.rotVelZ = frag.rotVelZ + Math.trunc(rotScale * (frag.vel.z + frag.vel.x)) | 0;
    frag.rotVelX -= frag.rotVelX >> 5;
    frag.rotVelY -= frag.rotVelY >> 5;
    frag.rotVelZ -= frag.rotVelZ >> 5;
    frag.rotX = toS16(frag.rotX + frag.rotVelX);
    frag.rotY = toS16(frag.rotY + frag.rotVelY);
    frag.rotZ = toS16(frag.rotZ + frag.rotVelZ);
    if ((frag.life & 15) === 0) {
      frag.onGround = false;
      const hit = raycastStageDown(frag.pos, stageRuntime);
      if (hit && hit.pos.y > frag.pos.y - CONFETTI_GROUND_CHECK) {
        frag.onGround = true;
        frag.groundPos.x = hit.pos.x;
        frag.groundPos.y = hit.pos.y;
        frag.groundPos.z = hit.pos.z;
        if (hit.normal) {
          frag.groundNormal.x = hit.normal.x;
          frag.groundNormal.y = hit.normal.y;
          frag.groundNormal.z = hit.normal.z;
        } else {
          frag.groundNormal.x = 0;
          frag.groundNormal.y = 1;
          frag.groundNormal.z = 0;
        }
        if (hit.surfaceVel) {
          frag.groundVel.x = hit.surfaceVel.x;
          frag.groundVel.y = hit.surfaceVel.y;
          frag.groundVel.z = hit.surfaceVel.z;
        } else {
          frag.groundVel.x = 0;
          frag.groundVel.y = 0;
          frag.groundVel.z = 0;
        }
      }
    }
    if (frag.onGround) {
      let nx = frag.groundNormal.x;
      let ny = frag.groundNormal.y;
      let nz = frag.groundNormal.z;
      const groundDir = { x: 0, y: 1, z: 0 };
      stack5.fromIdentity();
      stack5.rotateY(frag.rotY);
      stack5.rotateX(frag.rotX);
      stack5.rotateZ(frag.rotZ);
      stack5.tfVec(groundDir, groundDir);
      const normalDot = groundDir.x * nx + groundDir.y * ny + groundDir.z * nz;
      const contactEps = frag.groundBias + (1 - Math.abs(normalDot)) * 0.1;
      const dist = nx * (frag.pos.x - frag.groundPos.x) + ny * (frag.pos.y - frag.groundPos.y) + nz * (frag.pos.z - frag.groundPos.z);
      if (dist < contactEps + 0.05) {
        const push = contactEps + 0.05 - dist;
        frag.pos.x += push * nx;
        frag.pos.y += push * ny;
        frag.pos.z += push * nz;
        let normalSpeed = frag.vel.x * nx + frag.vel.y * ny + frag.vel.z * nz;
        if (normalSpeed < 0) {
          normalSpeed = -normalSpeed;
          frag.vel.x += normalSpeed * nx;
          frag.vel.y += normalSpeed * ny;
          frag.vel.z += normalSpeed * nz;
          const surfaceBlend = Math.abs(normalDot) * 0.125;
          frag.vel.x += surfaceBlend * (frag.groundVel.x - frag.vel.x);
          frag.vel.y += surfaceBlend * (frag.groundVel.y - frag.vel.y);
          frag.vel.z += surfaceBlend * (frag.groundVel.z - frag.vel.z);
          normalSpeed *= 0.5;
          frag.vel.x += normalSpeed * nx;
          frag.vel.y += normalSpeed * ny;
          frag.vel.z += normalSpeed * nz;
        }
        if (normalDot < 0) {
          nx = -nx;
          ny = -ny;
          nz = -nz;
        }
        groundDir.x = nx * 0.05 + groundDir.x * 0.95;
        groundDir.y = ny * 0.05 + groundDir.y * 0.95;
        groundDir.z = nz * 0.05 + groundDir.z * 0.95;
        vecNormalizeLen(groundDir);
        const prevRotX = frag.rotX;
        const prevRotZ = frag.rotZ;
        const rotVec = { x: groundDir.x, y: groundDir.y, z: groundDir.z };
        stack5.fromRotateY(-frag.rotY);
        stack5.rotateX(0);
        stack5.tfVec(rotVec, rotVec);
        frag.rotX = atan2S16(rotVec.z, rotVec.y);
        frag.rotZ = -atan2S16(rotVec.x, sqrt(sumSq2(rotVec.z, rotVec.y)));
        frag.rotVelX = (frag.rotVelX >> 2) + (frag.rotX - prevRotX >> 2);
        frag.rotVelY -= frag.rotVelY >> 4;
        frag.rotVelZ = (frag.rotVelZ >> 2) + (frag.rotZ - prevRotZ >> 2);
      }
    }
  }
}
function parseStageDef(data, gameSource = "smb1") {
  const view = new DataView(data.buffer, data.byteOffset, data.byteLength);
  const magicA = view.getUint32(0, false);
  const magicB = view.getUint32(4, false);
  if (gameSource === "smb2" || magicA === STAGE2_MAGIC_A && (magicB === STAGE2_MAGIC_B || magicB === STAGE2_MAGIC_B_ALT)) {
    const parser2 = new StageParserSmb2(data);
    return parser2.parseStage();
  }
  const parser = new StageParser(data);
  const stage = parser.parseStage();
  stage.format = "smb1";
  return stage;
}
function computeGmaBoundSphere(gma, modelNames = null) {
  let hasBounds = false;
  const min = { x: 0, y: 0, z: 0 };
  const max2 = { x: 0, y: 0, z: 0 };
  const nameSet = modelNames && modelNames.length ? new Set(modelNames) : null;
  const modelIter = nameSet ? gma.nameMap.entries() : gma.idMap.values();
  for (const entry of modelIter) {
    const model = nameSet ? entry[1] : entry;
    const name = nameSet ? entry[0] : null;
    if (!model || nameSet && !nameSet.has(name)) {
      continue;
    }
    const r = model.boundSphereRadius;
    const center = model.boundSphereCenter;
    const minX = center.x - r;
    const minY = center.y - r;
    const minZ = center.z - r;
    const maxX = center.x + r;
    const maxY = center.y + r;
    const maxZ = center.z + r;
    if (!hasBounds) {
      hasBounds = true;
      min.x = minX;
      min.y = minY;
      min.z = minZ;
      max2.x = maxX;
      max2.y = maxY;
      max2.z = maxZ;
    } else {
      if (minX < min.x) min.x = minX;
      if (minY < min.y) min.y = minY;
      if (minZ < min.z) min.z = minZ;
      if (maxX > max2.x) max2.x = maxX;
      if (maxY > max2.y) max2.y = maxY;
      if (maxZ > max2.z) max2.z = maxZ;
    }
  }
  if (!hasBounds) {
    return null;
  }
  const pos = {
    x: (max2.x + min.x) * 0.5,
    y: (max2.y + min.y) * 0.5,
    z: (max2.z + min.z) * 0.5
  };
  const half = {
    x: (max2.x - min.x) * 0.5,
    y: (max2.y - min.y) * 0.5,
    z: (max2.z - min.z) * 0.5
  };
  const radius = sqrt(half.x * half.x + half.y * half.y + half.z * half.z);
  return { pos, radius: Math.max(radius, FLY_IN_MIN_RADIUS) };
}
function findModelBySuffix(gma, suffix) {
  for (const [name, model] of gma.nameMap) {
    if (name.endsWith(suffix)) {
      return model;
    }
  }
  return null;
}
function extractSwitchModelBounds(gma) {
  const bounds = new Array(SWITCH_MODEL_SUFFIXES.length).fill(null);
  let fallbackModel = null;
  for (const [name, model] of gma.nameMap) {
    if (!name.startsWith("BUTTON_")) {
      continue;
    }
    if (name.endsWith("BASE")) {
      continue;
    }
    fallbackModel = fallbackModel ?? model;
  }
  for (let i = 0; i < SWITCH_MODEL_SUFFIXES.length; i += 1) {
    const model = findModelBySuffix(gma, SWITCH_MODEL_SUFFIXES[i]) ?? fallbackModel;
    if (!model) {
      continue;
    }
    bounds[i] = {
      center: model.boundSphereCenter,
      radius: model.boundSphereRadius
    };
  }
  return bounds;
}
async function loadStageModelBounds(stageId, basePath = STAGE_BASE_PATHS.smb1, modelNames = null) {
  const id = formatStageId(stageId);
  const gmaPath = `${basePath}/st${id}/st${id}.gma`;
  const tplPath = `${basePath}/st${id}/st${id}.tpl`;
  let gmaBuffer;
  let tplBuffer;
  try {
    [gmaBuffer, tplBuffer] = await Promise.all([fetchPackBuffer(gmaPath), fetchPackBuffer(tplPath)]);
  } catch {
    return null;
  }
  const tpl = parseAVTpl(tplBuffer, `st${id}`);
  const gma = parseGma(gmaBuffer, tpl);
  const boundSphere = computeGmaBoundSphere(gma, modelNames) ?? computeGmaBoundSphere(gma);
  return {
    boundSphere,
    switchModelBounds: extractSwitchModelBounds(gma)
  };
}
async function loadGoalTapeAnchorY(basePath = STAGE_BASE_PATHS.smb1, gameSource = "smb1") {
  const commonNlPath = `${basePath}/init/common_p.lz`;
  const commonNlTplPath = `${basePath}/init/common.lz`;
  let nlBuffer;
  let tplBuffer;
  try {
    [nlBuffer, tplBuffer] = await Promise.all([fetchPackBuffer(commonNlPath), fetchPackBuffer(commonNlTplPath)]);
  } catch {
    return null;
  }
  const tplSlice = decompressLZ(new ArrayBufferSlice(tplBuffer));
  const nlSlice = decompressLZ(new ArrayBufferSlice(nlBuffer));
  if (!tplSlice.byteLength || !nlSlice.byteLength) {
    return null;
  }
  const tpl = parseAVTpl(tplSlice.arrayBuffer, "common-nl");
  const nlObj = parseObj(nlSlice, tpl);
  let model = nlObj.get(14 /* GOAL_TAPE */);
  if (!model && (gameSource === "smb2" || gameSource === "mb2ws")) {
    model = nlObj.get(3 /* GOAL_TAPE_SMB2 */);
  }
  if (!model) {
    return null;
  }
  return model.boundSphereCenter[1];
}
async function loadStageDef(stageId, basePath = STAGE_BASE_PATHS.smb1, gameSource = "smb1") {
  const id = formatStageId(stageId);
  const path = `${basePath}/st${id}/STAGE${id}.lz`;
  const buffer = await fetchPackBuffer(path);
  const decompressed = lzssDecompress(buffer);
  const view = new Uint8Array(decompressed.buffer, decompressed.byteOffset, decompressed.byteLength);
  const stage = parseStageDef(view, gameSource);
  stage.stageId = stageId;
  stage.gameSource = gameSource;
  return stage;
}

// src/input.ts
var Input = class {
  constructor() {
    this.down = /* @__PURE__ */ new Set();
    this.pressed = /* @__PURE__ */ new Set();
    this.gamepadIndex = null;
    this.controlModeKey = "smb_control_mode";
    this.hasTouch = "ontouchstart" in window || (navigator.maxTouchPoints ?? 0) > 0;
    const hasCoarsePointer = window.matchMedia?.("(pointer: coarse)")?.matches ?? false;
    this.hasGyro = typeof window.DeviceOrientationEvent !== "undefined" && (this.hasTouch || hasCoarsePointer);
    this.touch = {
      pointerId: null,
      active: false,
      centerX: 0,
      centerY: 0,
      value: { x: 0, y: 0 }
    };
    this.touchAction = {
      pointerId: null,
      active: false
    };
    this.gyro = {
      baselineSet: false,
      baseBeta: 0,
      baseGamma: 0,
      value: { x: 0, y: 0 }
    };
    this.gyroRaw = {
      beta: 0,
      gamma: 0,
      hasSample: false
    };
    this.gyroSensitivity = 25;
    this.joystickScale = 1;
    this.inputFalloff = 1;
    this.touchPreview = false;
    this.padGate = loadPadGate() ?? DEFAULT_STICK_GATE.map((point) => [point[0], point[1]]);
    this.gyroTapMode = "recalibrate";
    this.touchRoot = document.getElementById("touch-controls");
    this.joystickEl = this.touchRoot?.querySelector?.(".joystick") ?? null;
    this.joystickHandleEl = this.touchRoot?.querySelector?.(".joystick-handle") ?? null;
    this.touchRoot?.style.setProperty("--joystick-scale", String(this.joystickScale));
    this.handlers = {
      keydown: (event) => {
        if (!this.down.has(event.code)) {
          this.pressed.add(event.code);
        }
        this.down.add(event.code);
      },
      keyup: (event) => {
        this.down.delete(event.code);
      },
      pointerdown: (event) => {
        if (!this.hasTouch) {
          return;
        }
        if (this.getControlMode() !== "touch") {
          return;
        }
        if (!this.isTouchLayerActive()) {
          return;
        }
        if (this.isOverlayVisible() && this.touchPreview) {
          if (!(event.target instanceof HTMLElement)) {
            return;
          }
          const onJoystick = event.target.closest(".joystick");
          if (!onJoystick) {
            return;
          }
        }
        if (this.touch.pointerId !== null) {
          return;
        }
        event.preventDefault();
        this.touch.pointerId = event.pointerId;
        this.touch.active = true;
        if (this.isOverlayVisible() && this.touchPreview && this.joystickEl) {
          const rect = this.joystickEl.getBoundingClientRect();
          this.touch.centerX = rect.left + rect.width / 2;
          this.touch.centerY = rect.top + rect.height / 2;
        } else {
          this.touch.centerX = event.clientX;
          this.touch.centerY = event.clientY;
        }
        this.touch.value.x = 0;
        this.touch.value.y = 0;
        this.touchRoot?.setPointerCapture?.(event.pointerId);
        if (!this.isOverlayVisible() || !this.touchPreview) {
          this.showJoystickAt(event.clientX, event.clientY);
        }
        this.updateJoystickHandle(0, 0);
      },
      pointermove: (event) => {
        if (!this.touch.active || event.pointerId !== this.touch.pointerId) {
          return;
        }
        event.preventDefault();
        const MAX_RADIUS = 55 * this.joystickScale;
        const dx = event.clientX - this.touch.centerX;
        const dy = event.clientY - this.touch.centerY;
        const dist = Math.hypot(dx, dy);
        let nx = 0;
        let ny = 0;
        let px = dx;
        let py = dy;
        if (dist > 0) {
          const clamped = Math.min(dist, MAX_RADIUS);
          const s = clamped / dist;
          px = dx * s;
          py = dy * s;
          nx = px / MAX_RADIUS;
          ny = py / MAX_RADIUS;
        }
        this.touch.value.x = clamp3(nx * 1.5, -1, 1);
        this.touch.value.y = clamp3(ny * 1.5, -1, 1);
        this.updateJoystickHandle(px, py);
      },
      pointerup: (event) => {
        if (event.pointerId === this.touch.pointerId) {
          this.endTouch();
        }
        if (event.pointerId === this.touchAction.pointerId) {
          this.endTouchAction();
        }
      },
      pointercancel: (event) => {
        if (event.pointerId === this.touch.pointerId) {
          this.endTouch();
        }
        if (event.pointerId === this.touchAction.pointerId) {
          this.endTouchAction();
        }
      },
      pointerdownAction: (event) => {
        if (!this.hasTouch) {
          return;
        }
        if (event.pointerType !== "touch") {
          return;
        }
        if (this.isOverlayVisible()) {
          return;
        }
        if (this.getControlMode() === "gyro" && this.gyroTapMode === "recalibrate") {
          event.preventDefault();
          this.recalibrateGyro();
          return;
        }
        if (event.target instanceof HTMLElement) {
          const interactive = event.target.closest("button, input, select, textarea, a, label");
          if (interactive) {
            return;
          }
        }
        if (this.touchAction.pointerId !== null) {
          return;
        }
        event.preventDefault();
        this.touchAction.pointerId = event.pointerId;
        this.touchAction.active = true;
      },
      deviceorientation: (event) => {
        if (!this.hasGyro) {
          return;
        }
        if (this.getControlMode() !== "gyro") {
          return;
        }
        const rawBeta = typeof event.beta === "number" ? event.beta : 0;
        const rawGamma = typeof event.gamma === "number" ? event.gamma : 0;
        const { beta, gamma } = adjustGyroForOrientation(rawBeta, rawGamma);
        this.gyroRaw.beta = beta;
        this.gyroRaw.gamma = gamma;
        this.gyroRaw.hasSample = true;
        if (!this.gyro.baselineSet) {
          this.gyro.baselineSet = true;
          this.gyro.baseBeta = beta;
          this.gyro.baseGamma = gamma;
        }
        const MAX_ANGLE = this.gyroSensitivity;
        const x = (gamma - this.gyro.baseGamma) / MAX_ANGLE;
        const y = (beta - this.gyro.baseBeta) / MAX_ANGLE;
        this.gyro.value.x = clamp3(x, -1, 1);
        this.gyro.value.y = clamp3(y, -1, 1);
      },
      gamepadconnected: (event) => {
        if (this.gamepadIndex === null) {
          this.gamepadIndex = event.gamepad.index;
        }
      },
      gamepaddisconnected: (event) => {
        if (event.gamepad.index === this.gamepadIndex) {
          this.gamepadIndex = null;
        }
      }
    };
    window.addEventListener("keydown", this.handlers.keydown);
    window.addEventListener("keyup", this.handlers.keyup);
    if (this.hasTouch && this.touchRoot) {
      this.touchRoot.addEventListener("pointerdown", this.handlers.pointerdown, { passive: false });
      window.addEventListener("pointermove", this.handlers.pointermove, { passive: false });
      window.addEventListener("pointerup", this.handlers.pointerup);
      window.addEventListener("pointercancel", this.handlers.pointercancel);
    }
    if (this.hasTouch) {
      window.addEventListener("pointerdown", this.handlers.pointerdownAction, { passive: false });
    }
    if (this.hasGyro) {
      window.addEventListener("deviceorientation", this.handlers.deviceorientation);
    }
    window.addEventListener("gamepadconnected", this.handlers.gamepadconnected);
    window.addEventListener("gamepaddisconnected", this.handlers.gamepaddisconnected);
  }
  destroy() {
    window.removeEventListener("keydown", this.handlers.keydown);
    window.removeEventListener("keyup", this.handlers.keyup);
    if (this.hasTouch && this.touchRoot) {
      this.touchRoot.removeEventListener("pointerdown", this.handlers.pointerdown);
      window.removeEventListener("pointermove", this.handlers.pointermove);
      window.removeEventListener("pointerup", this.handlers.pointerup);
      window.removeEventListener("pointercancel", this.handlers.pointercancel);
    }
    if (this.hasTouch) {
      window.removeEventListener("pointerdown", this.handlers.pointerdownAction);
    }
    if (this.hasGyro) {
      window.removeEventListener("deviceorientation", this.handlers.deviceorientation);
    }
    window.removeEventListener("gamepadconnected", this.handlers.gamepadconnected);
    window.removeEventListener("gamepaddisconnected", this.handlers.gamepaddisconnected);
  }
  getControlMode() {
    const raw = localStorage.getItem(this.controlModeKey);
    if (raw === "gyro" || raw === "touch") {
      return raw;
    }
    return this.hasTouch ? "touch" : "gyro";
  }
  isOverlayVisible() {
    const overlay2 = document.getElementById("overlay");
    if (!overlay2) {
      return false;
    }
    return !overlay2.classList.contains("hidden");
  }
  isTouchLayerActive() {
    if (!this.touchRoot) {
      return false;
    }
    if (this.isOverlayVisible() && !this.touchPreview) {
      return false;
    }
    return true;
  }
  syncTouchLayer(mode) {
    if (!this.touchRoot) {
      return;
    }
    const overlayVisible = this.isOverlayVisible();
    const shouldEnable = mode === "touch" && this.hasTouch && !overlayVisible;
    const shouldPreview = mode === "touch" && this.hasTouch && overlayVisible && this.touchPreview;
    if (!shouldEnable && !shouldPreview) {
      if (this.touch.active) {
        this.endTouch();
      }
      this.touchRoot.classList.remove("active");
      this.touchRoot.classList.remove("preview");
      this.touchRoot.classList.add("hidden");
      this.joystickEl?.classList.add("hidden");
      return;
    }
    this.touchRoot.classList.remove("hidden");
    if (shouldEnable) {
      this.touchRoot.classList.add("active");
      this.touchRoot.classList.remove("preview");
      this.joystickEl?.classList.add("hidden");
    } else {
      this.touchRoot.classList.remove("active");
      this.touchRoot.classList.add("preview");
      this.joystickEl?.classList.remove("hidden");
    }
  }
  showJoystickAt(x, y) {
    if (!this.touchRoot || !this.joystickEl) {
      return;
    }
    this.touchRoot.classList.add("active");
    this.touchRoot.classList.remove("hidden");
    this.joystickEl.classList.remove("hidden");
    this.joystickEl.style.left = `${x}px`;
    this.joystickEl.style.top = `${y}px`;
  }
  updateJoystickHandle(dx, dy) {
    if (!this.joystickHandleEl) {
      return;
    }
    if (this.joystickEl?.classList.contains("hidden") && !this.isOverlayVisible()) {
      this.joystickEl.classList.remove("hidden");
    }
    const scale = this.joystickScale || 1;
    const adjX = dx / scale;
    const adjY = dy / scale;
    this.joystickHandleEl.style.transform = `translate(calc(-50% + ${adjX}px), calc(-50% + ${adjY}px))`;
  }
  hideJoystick() {
    if (this.touchPreview && this.isOverlayVisible()) {
      return;
    }
    this.joystickEl?.classList.add("hidden");
  }
  endTouch() {
    this.touch.active = false;
    this.touch.pointerId = null;
    this.touch.value.x = 0;
    this.touch.value.y = 0;
    this.hideJoystick();
  }
  endTouchAction() {
    this.touchAction.active = false;
    this.touchAction.pointerId = null;
  }
  isDown(code) {
    return this.down.has(code);
  }
  recalibrateGyro() {
    if (!this.hasGyro) {
      return;
    }
    if (this.gyroRaw.hasSample) {
      this.gyro.baseBeta = this.gyroRaw.beta;
      this.gyro.baseGamma = this.gyroRaw.gamma;
      this.gyro.baselineSet = true;
    } else {
      this.gyro.baselineSet = false;
    }
  }
  getGyroSample() {
    return {
      beta: this.gyroRaw.beta,
      gamma: this.gyroRaw.gamma,
      baseBeta: this.gyro.baseBeta,
      baseGamma: this.gyro.baseGamma,
      baselineSet: this.gyro.baselineSet,
      hasSample: this.gyroRaw.hasSample
    };
  }
  setGyroSensitivity(value) {
    this.gyroSensitivity = clamp3(value, 10, 25);
  }
  getGyroSensitivity() {
    return this.gyroSensitivity;
  }
  setJoystickScale(value) {
    this.joystickScale = clamp3(value, 0.5, 2);
    this.touchRoot?.style.setProperty("--joystick-scale", String(this.joystickScale));
  }
  setInputFalloff(value) {
    this.inputFalloff = clamp3(value, 1, 2);
  }
  setGyroTapMode(mode) {
    this.gyroTapMode = mode === "action" ? "action" : "recalibrate";
  }
  setPadGate(points) {
    if (!Array.isArray(points) || points.length !== 8) {
      return;
    }
    this.padGate = points.map((point) => [point[0], point[1]]);
    savePadGate(this.padGate);
  }
  getPadGate() {
    return this.padGate.map((point) => [point[0], point[1]]);
  }
  setTouchPreview(enabled) {
    this.touchPreview = !!enabled;
    this.syncTouchLayer(this.getControlMode());
    if (!this.touchPreview && this.touch.active) {
      this.endTouch();
    }
  }
  getRawInputPreview() {
    if (this.hasTouch && this.touch.active) {
      return { x: this.touch.value.x, y: this.touch.value.y };
    }
    const padStick = this.getGamepadStick();
    if (padStick && (Math.abs(padStick.x) > 0 || Math.abs(padStick.y) > 0)) {
      return padStick;
    }
    return null;
  }
  applyInputFalloffToStick(stick) {
    return applyInputFalloff(stick, this.inputFalloff);
  }
  wasPressed(code) {
    if (this.pressed.has(code)) {
      this.pressed.delete(code);
      return true;
    }
    return false;
  }
  clearPressed() {
    this.pressed.clear();
  }
  getActiveGamepad() {
    const gamepads = navigator.getGamepads?.() ?? navigator.webkitGetGamepads?.();
    if (!gamepads) {
      return null;
    }
    if (this.gamepadIndex !== null) {
      const candidate = gamepads[this.gamepadIndex];
      if (candidate?.connected) {
        return candidate;
      }
    }
    for (const candidate of gamepads) {
      if (candidate?.connected) {
        this.gamepadIndex = candidate.index;
        return candidate;
      }
    }
    return null;
  }
  isPrimaryActionDown() {
    if (this.isDown("Space") || this.isDown("Enter") || this.isDown("KeyZ")) {
      return true;
    }
    if (this.touchAction.active) {
      return true;
    }
    const pad = this.getActiveGamepad();
    if (!pad?.buttons?.length) {
      return false;
    }
    const button = pad.buttons[0];
    return !!button && (button.pressed || button.value > 0.5);
  }
  getGamepadStick() {
    const gamepads = navigator.getGamepads?.() ?? navigator.webkitGetGamepads?.();
    if (!gamepads) {
      return null;
    }
    let pad = null;
    if (this.gamepadIndex !== null) {
      const candidate = gamepads[this.gamepadIndex];
      if (candidate?.connected && candidate.axes.length >= 2) {
        pad = candidate;
      }
    }
    if (!pad) {
      for (const candidate of gamepads) {
        if (candidate?.connected && candidate.axes.length >= 2) {
          pad = candidate;
          this.gamepadIndex = candidate.index;
          break;
        }
      }
    }
    if (!pad) {
      return null;
    }
    const primary = readPadStick(pad, this.padGate);
    if (primary.magnitudeSq > GAMEPAD_SWITCH_THRESHOLD) {
      return primary.value;
    }
    let best = primary;
    for (const candidate of gamepads) {
      if (!candidate?.connected || candidate.axes.length < 2) {
        continue;
      }
      const result = readPadStick(candidate, this.padGate);
      if (result.magnitudeSq > best.magnitudeSq) {
        best = result;
        this.gamepadIndex = candidate.index;
      }
    }
    return best.magnitudeSq > 0 ? best.value : null;
  }
  getStick() {
    const mode = this.getControlMode();
    this.syncTouchLayer(mode);
    if (mode !== "gyro") {
      this.gyro.baselineSet = false;
    }
    if (mode === "gyro" && this.hasGyro && this.gyro.baselineSet) {
      const gx = this.gyro.value.x;
      const gy = this.gyro.value.y;
      if (Math.abs(gx) > 0 || Math.abs(gy) > 0) {
        return { x: gx, y: gy };
      }
    }
    if (mode === "touch" && this.hasTouch) {
      const tx = this.touch.value.x;
      const ty = this.touch.value.y;
      if (Math.abs(tx) > 0 || Math.abs(ty) > 0) {
        return applyInputFalloff({ x: tx, y: ty }, this.inputFalloff);
      }
    }
    const padStick = this.getGamepadStick();
    if (padStick && (Math.abs(padStick.x) > 0 || Math.abs(padStick.y) > 0)) {
      return applyInputFalloff(padStick, this.inputFalloff);
    }
    const left = this.isDown("ArrowLeft") || this.isDown("KeyA");
    const right = this.isDown("ArrowRight") || this.isDown("KeyD");
    const up = this.isDown("ArrowUp") || this.isDown("KeyW");
    const down = this.isDown("ArrowDown") || this.isDown("KeyS");
    let x = 0;
    let y = 0;
    if (left) x -= 1;
    if (right) x += 1;
    if (up) y -= 1;
    if (down) y += 1;
    if (x > 1) x = 1;
    if (x < -1) x = -1;
    if (y > 1) y = 1;
    if (y < -1) y = -1;
    return { x, y };
  }
};
var DEFAULT_STICK_GATE = [
  [84, 0],
  [59, 59],
  [0, 84],
  [-59, 59],
  [-84, 0],
  [-59, -59],
  [0, -84],
  [59, -59]
];
var PAD_GATE_KEY = "smb_pad_gate";
function loadPadGate() {
  try {
    const raw = localStorage.getItem(PAD_GATE_KEY);
    if (!raw) {
      return null;
    }
    const parsed = JSON.parse(raw);
    if (!Array.isArray(parsed) || parsed.length !== 8) {
      return null;
    }
    const gate = parsed.map((point) => {
      if (!Array.isArray(point) || point.length !== 2) {
        return null;
      }
      const x = Number(point[0]);
      const y = Number(point[1]);
      if (!Number.isFinite(x) || !Number.isFinite(y)) {
        return null;
      }
      return [x, y];
    });
    if (gate.some((point) => point === null)) {
      return null;
    }
    return gate;
  } catch {
    return null;
  }
}
function savePadGate(gate) {
  try {
    localStorage.setItem(PAD_GATE_KEY, JSON.stringify(gate));
  } catch {
  }
}
var STICK_SHAPE_POINTS = [
  [105, 0],
  [105, 105],
  [0, 105],
  [-105, 105],
  [-105, 0],
  [-105, -105],
  [0, -105],
  [105, -105]
];
var STICK_SHAPE_TABLE = [
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  1,
  1,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  4,
  4,
  4,
  5,
  5,
  5,
  6,
  6,
  7,
  7,
  7,
  8,
  8,
  9,
  9,
  10,
  10,
  11,
  11,
  12,
  12,
  13,
  14,
  14,
  15,
  15,
  16,
  17,
  17,
  18,
  19,
  19,
  20,
  21,
  22,
  22,
  23,
  24,
  25,
  25,
  26,
  27,
  28,
  29,
  29,
  30,
  31,
  32,
  33,
  34,
  35,
  36,
  37,
  38,
  39,
  40,
  41,
  42,
  43,
  44,
  45,
  46,
  47,
  48,
  49,
  50,
  51,
  52,
  54,
  55,
  56,
  57,
  58,
  60
];
var STICK_RANGE = 60;
var FLOAT_EPSILON = 11920928955078125e-23;
function clamp3(value, min, max2) {
  if (value < min) {
    return min;
  }
  if (value > max2) {
    return max2;
  }
  return value;
}
function applyStickGate(x, y, gate) {
  let adjX = x;
  let adjY = y;
  for (let i = 0; i < 8; i += 1) {
    const next = i === 7 ? 0 : i + 1;
    const f9 = gate[i][0];
    const f4 = gate[i][1];
    const f10 = gate[next][0];
    const f5 = gate[next][1];
    let denom = f9 * f5 - f10 * f4;
    if (Math.abs(denom) < FLOAT_EPSILON) {
      continue;
    }
    denom = 1 / denom;
    const f5_ = (f5 * adjX - f10 * adjY) * denom;
    const f3 = (-f4 * adjX + f9 * adjY) * denom;
    if (f5_ < 0 || f3 < 0) {
      continue;
    }
    let mapped = Math.trunc(f5_ * STICK_SHAPE_POINTS[i][0] + f3 * STICK_SHAPE_POINTS[next][0]);
    let sign = mapped < 0 ? -1 : 1;
    let idx = clamp3(Math.abs(mapped), 0, 99);
    adjX = sign * STICK_SHAPE_TABLE[idx];
    mapped = Math.trunc(f5_ * STICK_SHAPE_POINTS[i][1] + f3 * STICK_SHAPE_POINTS[next][1]);
    sign = mapped < 0 ? -1 : 1;
    idx = clamp3(Math.abs(mapped), 0, 99);
    adjY = sign * STICK_SHAPE_TABLE[idx];
    break;
  }
  return { x: adjX, y: adjY };
}
var GAMEPAD_SWITCH_THRESHOLD = 25e-4;
function readPadStick(pad, gate) {
  const rawX = pad.axes[0] ?? 0;
  const rawY = pad.axes[1] ?? 0;
  const { x, y } = applyStickGate(
    clamp3(Math.round(rawX * 127), -128, 127),
    clamp3(Math.round(rawY * 127), -128, 127),
    gate
  );
  const value = {
    x: clamp3(x / STICK_RANGE, -1, 1),
    y: clamp3(y / STICK_RANGE, -1, 1)
  };
  return { value, magnitudeSq: value.x * value.x + value.y * value.y };
}
function applyInputFalloff(stick, power) {
  const maxAxis = Math.max(Math.abs(stick.x), Math.abs(stick.y));
  if (maxAxis <= 0) {
    return stick;
  }
  const clamped = Math.min(1, maxAxis);
  const eased = Math.pow(clamped, power);
  const scale = eased / maxAxis;
  return { x: stick.x * scale, y: stick.y * scale };
}
function adjustGyroForOrientation(beta, gamma) {
  const angle = getScreenOrientationAngle();
  switch (angle) {
    case 90:
      return { beta: -gamma, gamma: beta };
    case 180:
      return { beta: -beta, gamma: -gamma };
    case 270:
      return { beta: gamma, gamma: -beta };
    default:
      return { beta, gamma };
  }
}
function getScreenOrientationAngle() {
  const orientation = window.screen?.orientation?.angle;
  if (typeof orientation === "number") {
    return (orientation % 360 + 360) % 360;
  }
  const legacy = typeof window.orientation === "number" ? window.orientation : 0;
  return (legacy % 360 + 360) % 360;
}

// src/camera.ts
import { mat3, vec3 as vec34 } from "gl-matrix";
var stack2 = new MatrixStack();
var tmpVec = { x: 0, y: 0, z: 0 };
var tmpVec2 = { x: 0, y: 0, z: 0 };
var wormholeVec = vec34.create();
var wormholeMat3 = mat3.create();
var SMB2_FLY_IN_MIN_RADIUS = 31.25;
var SMB2_SPIN_IN_PRESETS = [
  { zScale: 0.8, yScale: 0.4, yawOffset: -49152 },
  { zScale: 0.8, yScale: 0.4, yawOffset: 49152 },
  { zScale: 0.8, yScale: 0.4, yawOffset: -24576 },
  { zScale: 0.8, yScale: 0.4, yawOffset: 24576 }
];
var SMB2_FLY_IN_OVERRIDES = /* @__PURE__ */ new Map([
  [52, { pos: { x: 0, y: 0, z: -110 }, radius: 150 }],
  [279, { pos: { x: 0, y: 0, z: -50 }, radius: 100 }],
  [17, { pos: { x: 0, y: 0, z: 0 }, radius: 200 }]
]);
var SMB2_PIVOT_Y_BASE = 0.8;
var SMB2_PIVOT_Y_OFFSET = 0.18;
var SMB2_PIVOT_Y_OFFSET_STAGE = 346;
var SMB2_YAW_LERP_CLAMP = 416;
var SMB2_YAW_STEP_CLAMP = 768;
var SMB2_PITCH_BASE = -2304;
var SMB2_PITCH_OFFSET = 512;
var SMB2_PITCH_LIMIT = 12288;
var SMB2_STANDSTILL_SPEED = 0.02;
var smb2FrameCounter = 0;
function applyMat4ToPoint(out, mtx) {
  vec34.set(wormholeVec, out.x, out.y, out.z);
  vec34.transformMat4(wormholeVec, wormholeVec, mtx);
  out.x = wormholeVec[0];
  out.y = wormholeVec[1];
  out.z = wormholeVec[2];
}
function applyMat3ToVec(out, mtx) {
  vec34.set(wormholeVec, out.x, out.y, out.z);
  vec34.transformMat3(wormholeVec, wormholeVec, mtx);
  out.x = wormholeVec[0];
  out.y = wormholeVec[1];
  out.z = wormholeVec[2];
}
function cameraFaceDirection(camera2, lookDir) {
  camera2.rotY = atan2S16(lookDir.x, lookDir.z) - 32768;
  camera2.rotX = atan2S16Safe(lookDir.y, sqrt(sumSq2(lookDir.x, lookDir.z)));
  camera2.rotZ = 0;
}
var GameplayCamera = class {
  constructor() {
    this.eye = { x: 0, y: 0, z: 0 };
    this.lookAt = { x: 0, y: 0, z: 0 };
    this.eyeVel = { x: 0, y: 0, z: 0 };
    this.lookAtVel = { x: 0, y: 0, z: 0 };
    this.rotX = 0;
    this.rotY = 0;
    this.rotZ = 0;
    this.flags = 0;
    this.state = CAMERA_STATE.LEVEL_MAIN;
    this.timerCurr = 0;
    this.timerMax = 0;
    this.unk54 = { x: 0, y: 0, z: 0 };
    this.unk60 = 0;
    this.unk64 = 0;
    this.unk68 = 0;
    this.unk6C = 0;
    this.unk70 = 0;
    this.unk74 = { x: 0, y: 0, z: 0 };
    this.unk88 = 0;
    this.unk8C = 0;
    this.unk90 = 0;
    this.unkAC = { x: 0, y: 0, z: 0 };
    this.unkB8 = 0;
    this.unk10C = 0;
    this.readyMode = "smb1";
    this.smb2Standstill = 0;
    this.smb2PivotXRot = 0;
    this.smb2YawVel = 0;
  }
  reset() {
    this.eye.x = 0;
    this.eye.y = 0;
    this.eye.z = 0;
    this.lookAt.x = 0;
    this.lookAt.y = 0;
    this.lookAt.z = 0;
    this.eyeVel.x = 0;
    this.eyeVel.y = 0;
    this.eyeVel.z = 0;
    this.lookAtVel.x = 0;
    this.lookAtVel.y = 0;
    this.lookAtVel.z = 0;
    this.rotX = 0;
    this.rotY = 0;
    this.rotZ = 0;
    this.flags = 0;
    this.state = CAMERA_STATE.LEVEL_MAIN;
    this.timerCurr = 0;
    this.timerMax = 0;
    this.unk54.x = 0;
    this.unk54.y = 0;
    this.unk54.z = 0;
    this.unk60 = 0;
    this.unk64 = 0;
    this.unk68 = 0;
    this.unk6C = 0;
    this.unk70 = 0;
    this.unk74.x = 0;
    this.unk74.y = 0;
    this.unk74.z = 0;
    this.unk88 = 0;
    this.unk8C = 0;
    this.unk90 = 0;
    this.unkAC.x = 0;
    this.unkAC.y = 0;
    this.unkAC.z = 0;
    this.unkB8 = 0;
    this.unk10C = 0;
    this.readyMode = "smb1";
    this.smb2Standstill = 0;
    this.smb2PivotXRot = 0;
    this.smb2YawVel = 0;
  }
  applyWormholeTransform(wormholeTf) {
    mat3.fromMat4(wormholeMat3, wormholeTf);
    applyMat4ToPoint(this.eye, wormholeTf);
    applyMat4ToPoint(this.lookAt, wormholeTf);
    applyMat4ToPoint(this.unkAC, wormholeTf);
    applyMat4ToPoint(this.unk54, wormholeTf);
    applyMat4ToPoint(this.unk74, wormholeTf);
    applyMat3ToVec(this.eyeVel, wormholeMat3);
    applyMat3ToVec(this.lookAtVel, wormholeMat3);
    tmpVec.x = this.lookAt.x - this.eye.x;
    tmpVec.y = this.lookAt.y - this.eye.y;
    tmpVec.z = this.lookAt.z - this.eye.z;
    cameraFaceDirection(this, tmpVec);
  }
  initForStage(ball, startRotY = 0, stageRuntime = null) {
    if (stageRuntime?.stage?.format === "smb2") {
      this.initForStageSmb2(ball, startRotY, stageRuntime);
      return;
    }
    this.reset();
    this.lookAt.x = ball.pos.x;
    this.lookAt.y = ball.pos.y + 0.5;
    this.lookAt.z = ball.pos.z;
    stack2.fromTranslate(this.lookAt);
    stack2.rotateY(startRotY);
    tmpVec.x = 0;
    tmpVec.y = 1;
    tmpVec.z = 3;
    stack2.tfPoint(tmpVec, this.eye);
    tmpVec.x = 0;
    tmpVec.y = 0;
    tmpVec.z = 3;
    stack2.tfPoint(tmpVec, this.unkAC);
    tmpVec.x = this.lookAt.x - this.eye.x;
    tmpVec.y = this.lookAt.y - this.eye.y;
    tmpVec.z = this.lookAt.z - this.eye.z;
    cameraFaceDirection(this, tmpVec);
    this.state = CAMERA_STATE.LEVEL_MAIN;
  }
  initForStageSmb2(ball, startRotY, stageRuntime) {
    this.reset();
    const stageId = stageRuntime?.stage?.stageId ?? -1;
    const pivotOffset = stageId === SMB2_PIVOT_Y_OFFSET_STAGE ? 0 : SMB2_PIVOT_Y_OFFSET;
    const pitchOffset = stageId === SMB2_PIVOT_Y_OFFSET_STAGE ? 0 : SMB2_PITCH_OFFSET;
    this.lookAt.x = ball.pos.x;
    this.lookAt.y = ball.pos.y + SMB2_PIVOT_Y_BASE + pivotOffset;
    this.lookAt.z = ball.pos.z;
    stack2.fromTranslate(this.lookAt);
    stack2.rotateY(startRotY);
    tmpVec.x = 0;
    tmpVec.y = 1;
    tmpVec.z = 3;
    stack2.tfPoint(tmpVec, this.eye);
    tmpVec.x = 0;
    tmpVec.y = 0;
    tmpVec.z = 3;
    stack2.tfPoint(tmpVec, this.unkAC);
    tmpVec.x = this.lookAt.x - this.eye.x;
    tmpVec.y = this.lookAt.y - this.eye.y;
    tmpVec.z = this.lookAt.z - this.eye.z;
    cameraFaceDirection(this, tmpVec);
    this.rotX = toS16(SMB2_PITCH_BASE - pitchOffset);
    this.rotZ = 0;
    this.state = CAMERA_STATE.LEVEL_MAIN;
  }
  initReady(stageRuntime, startRotY, startPos, flyInFrames = 90) {
    if (stageRuntime?.stage?.format === "smb2") {
      this.initReadySmb2(stageRuntime, startRotY, startPos, flyInFrames);
      return;
    }
    this.reset();
    const flyIn = stageRuntime?.getFlyInSphere?.() ?? stageRuntime?.boundSphere;
    if (flyIn) {
      this.unk54.x = flyIn.pos.x;
      this.unk54.y = flyIn.pos.y;
      this.unk54.z = flyIn.pos.z;
      this.unk60 = flyIn.radius * 0.8;
      this.unk64 = flyIn.radius * 0.8;
    }
    stack2.fromTranslate(this.unk54);
    stack2.rotateY(startRotY);
    tmpVec.x = 0;
    tmpVec.y = this.unk64;
    tmpVec.z = this.unk60;
    stack2.tfPoint(tmpVec, tmpVec);
    tmpVec.x = this.unk54.x - tmpVec.x;
    tmpVec.y = this.unk54.y - tmpVec.y;
    tmpVec.z = this.unk54.z - tmpVec.z;
    this.unk6C = toS16(atan2S16(tmpVec.x, tmpVec.z) - 32768);
    this.unk68 = atan2S16Safe(tmpVec.y, sqrt(sumSq2(tmpVec.x, tmpVec.z)));
    this.unk70 = 0;
    this.unk74.x = startPos.x;
    this.unk74.y = startPos.y + 0.5;
    this.unk74.z = startPos.z;
    stack2.fromTranslate(this.unk74);
    stack2.rotateY(startRotY);
    tmpVec.x = 0;
    tmpVec.y = 1;
    tmpVec.z = 3;
    stack2.tfPoint(tmpVec, tmpVec);
    tmpVec.x = this.unk74.x - tmpVec.x;
    tmpVec.y = this.unk74.y - tmpVec.y;
    tmpVec.z = this.unk74.z - tmpVec.z;
    this.unk8C = toS16(atan2S16(tmpVec.x, tmpVec.z) - 32768) + 65536;
    this.unk88 = atan2S16Safe(tmpVec.y, sqrt(sumSq2(tmpVec.x, tmpVec.z)));
    this.unk90 = 0;
    this.flags |= 1;
    this.timerCurr = flyInFrames;
    this.timerMax = flyInFrames;
    this.state = CAMERA_STATE.READY_MAIN;
    this.updateReadyMain(false, false);
  }
  initReadySmb2(stageRuntime, startRotY, startPos, flyInFrames = 90) {
    this.reset();
    this.readyMode = "smb2";
    const stageId = stageRuntime?.stage?.stageId ?? -1;
    const override = SMB2_FLY_IN_OVERRIDES.get(stageId);
    const flyIn = override ?? stageRuntime?.boundSphere;
    const radius = Math.max(flyIn?.radius ?? 0, SMB2_FLY_IN_MIN_RADIUS);
    let presetIndex = smb2FrameCounter & 3;
    if (stageId === 286 && presetIndex === 2) {
      presetIndex = 0;
    }
    const preset = SMB2_SPIN_IN_PRESETS[presetIndex];
    if (flyIn) {
      this.unk54.x = flyIn.pos.x;
      this.unk54.y = flyIn.pos.y;
      this.unk54.z = flyIn.pos.z;
    }
    this.unk60 = radius * preset.zScale;
    this.unk64 = radius * preset.yScale;
    stack2.fromTranslate(this.unk54);
    stack2.rotateY(startRotY);
    tmpVec.x = 0;
    tmpVec.y = this.unk64;
    tmpVec.z = this.unk60;
    stack2.tfPoint(tmpVec, tmpVec);
    tmpVec.x = this.unk54.x - tmpVec.x;
    tmpVec.y = this.unk54.y - tmpVec.y;
    tmpVec.z = this.unk54.z - tmpVec.z;
    this.unk6C = toS16(atan2S16(tmpVec.x, tmpVec.z) - 32768 + preset.yawOffset);
    this.unk68 = atan2S16Safe(tmpVec.y, sqrt(sumSq2(tmpVec.x, tmpVec.z)));
    this.unk70 = 0;
    const pivotYOffset = (stageId === 346 ? 0 : 0.18) + 0.8;
    this.unk74.x = startPos.x;
    this.unk74.y = startPos.y + pivotYOffset;
    this.unk74.z = startPos.z;
    this.unk8C = toS16(startRotY);
    this.unk88 = toS16(-2304 - (stageId === 346 ? 0 : 512));
    this.unk90 = 0;
    this.flags |= 1;
    this.timerCurr = flyInFrames;
    this.timerMax = flyInFrames;
    this.state = CAMERA_STATE.READY_MAIN;
    this.updateReadyMain(false, false);
  }
  updateReadyMain(paused2, fastForward) {
    if (paused2) {
      return;
    }
    if (this.timerCurr > 0) {
      this.timerCurr -= 1;
      if (fastForward) {
        this.timerCurr -= 1;
      }
    }
    let t = this.timerCurr / (this.timerMax || 1);
    t = smoothstep2(t);
    this.lookAt.x = this.unk74.x * (1 - t) + this.unk54.x * t;
    this.lookAt.y = this.unk74.y * (1 - t) + this.unk54.y * t;
    this.lookAt.z = this.unk74.z * (1 - t) + this.unk54.z * t;
    const deltaX = toS16(this.unk88 - this.unk68);
    const deltaZ = toS16(this.unk90 - this.unk70);
    this.rotX = toS16(this.unk68 + deltaX * (1 - t));
    this.rotY = toS16(this.unk6C + (this.unk8C - this.unk6C) * (1 - t));
    this.rotZ = toS16(this.unk70 + deltaZ * (1 - t));
    stack2.fromTranslate(this.lookAt);
    stack2.rotateY(this.rotY);
    tmpVec.x = 0;
    tmpVec.y = 1 - t + this.unk64 * t;
    tmpVec.z = (1 - t) * 3 + this.unk60 * t;
    stack2.tfPoint(tmpVec, this.eye);
  }
  updateLevelMain(ball, paused2) {
    if (paused2) {
      return;
    }
    const prevEye = { x: this.eye.x, y: this.eye.y, z: this.eye.z };
    const prevLookAt = { x: this.lookAt.x, y: this.lookAt.y, z: this.lookAt.z };
    tmpVec.x = this.unkAC.x - this.lookAt.x;
    tmpVec.y = this.unkAC.y - this.lookAt.y;
    tmpVec.z = this.unkAC.z - this.lookAt.z;
    let f1 = sumSq3(tmpVec.x, tmpVec.y, tmpVec.z);
    if (f1 > 1e-7) {
      f1 = rsqrt(f1);
      tmpVec.x *= f1;
      tmpVec.y *= f1;
      tmpVec.z *= f1;
    } else {
      tmpVec.x = 1;
      tmpVec.y = 0;
      tmpVec.z = 0;
    }
    tmpVec.x = tmpVec.x * 0.75 + this.lookAt.x;
    tmpVec.y = tmpVec.y * 0.75 + this.lookAt.y;
    tmpVec.z = tmpVec.z * 0.75 + this.lookAt.z;
    this.lookAt.x = ball.pos.x;
    this.lookAt.y = ball.pos.y + 0.5;
    this.lookAt.z = ball.pos.z;
    tmpVec.x = this.lookAt.x - tmpVec.x;
    tmpVec.y = this.lookAt.y - tmpVec.y;
    tmpVec.z = this.lookAt.z - tmpVec.z;
    let pitch = 0;
    if (ball.unk80 >= 60) {
      pitch = atan2S16Safe(tmpVec.y, sqrt(sumSq2(tmpVec.x, tmpVec.z)));
    }
    let yaw = toS16(atan2S16(tmpVec.x, tmpVec.z) - 32768);
    let deltaYaw = toS16(yaw - this.rotY);
    yaw = toS16(this.rotY + clamp2(deltaYaw, -512, 512));
    if (!(this.flags & 1 << 1) && !(ball.flags & BALL_FLAGS.GOAL)) {
      let steer = toS16(ball.unk92 - yaw);
      if (steer > 2048) {
        steer -= 2048;
      } else if (steer < -2048) {
        steer += 2048;
      } else {
        steer = 0;
      }
      steer >>= 7;
      let steerVel = this.unk10C;
      if (steer === 0) {
        steerVel = 0;
      } else if (steerVel < 0 && steer > 0 || steerVel > 0 && steer < 0) {
        steerVel = 0;
      } else if (steer < 0) {
        if (steer < steerVel - 4) {
          steerVel -= 4;
        } else {
          steerVel = steer;
        }
      } else if (steer > steerVel + 4) {
        steerVel += 4;
      } else {
        steerVel = steer;
      }
      yaw = toS16(yaw + steerVel);
      deltaYaw = clamp2(toS16(yaw - this.rotY), -768, 768);
      yaw = toS16(this.rotY + deltaYaw);
    }
    if (pitch < -6144) {
      pitch = -6144;
    } else if (pitch > 6144) {
      pitch = 6144;
    }
    const pitchSmoothed = toS16(this.unkB8 + 0.2 * (pitch - this.unkB8));
    this.unkB8 = pitchSmoothed;
    stack2.fromTranslate(this.lookAt);
    stack2.rotateY(yaw);
    stack2.rotateX(pitchSmoothed);
    tmpVec.x = 0;
    tmpVec.y = 0;
    tmpVec.z = 3;
    stack2.tfPoint(tmpVec, this.unkAC);
    this.unk10C = toS16(yaw - this.rotY);
    this.rotY = yaw;
    this.rotX = toS16(pitchSmoothed + 62208);
    stack2.fromTranslate(this.lookAt);
    stack2.rotateY(this.rotY);
    stack2.rotateX(this.rotX);
    tmpVec2.x = 0;
    tmpVec2.y = 0;
    tmpVec2.z = sqrt(sumSq2(3, 1));
    stack2.tfPoint(tmpVec2, this.eye);
    this.eyeVel.x = this.eye.x - prevEye.x;
    this.eyeVel.y = this.eye.y - prevEye.y;
    this.eyeVel.z = this.eye.z - prevEye.z;
    this.lookAtVel.x = this.lookAt.x - prevLookAt.x;
    this.lookAtVel.y = this.lookAt.y - prevLookAt.y;
    this.lookAtVel.z = this.lookAt.z - prevLookAt.z;
  }
  updateLevelMainSmb2(ball, stageRuntime, paused2) {
    if (paused2) {
      return;
    }
    const prevEye = { x: this.eye.x, y: this.eye.y, z: this.eye.z };
    const prevLookAt = { x: this.lookAt.x, y: this.lookAt.y, z: this.lookAt.z };
    const stageId = stageRuntime?.stage?.stageId ?? -1;
    const pivotOffset = stageId === SMB2_PIVOT_Y_OFFSET_STAGE ? 0 : SMB2_PIVOT_Y_OFFSET;
    const pitchOffset = stageId === SMB2_PIVOT_Y_OFFSET_STAGE ? 0 : SMB2_PITCH_OFFSET;
    const speed = ball.speed ?? sqrt(sumSq3(ball.vel.x, ball.vel.y, ball.vel.z));
    if (speed <= SMB2_STANDSTILL_SPEED) {
      this.smb2Standstill = Math.min(60, this.smb2Standstill + 1);
    } else {
      this.smb2Standstill = Math.max(0, this.smb2Standstill - 1);
    }
    tmpVec.x = this.unkAC.x - this.lookAt.x;
    tmpVec.y = this.unkAC.y - this.lookAt.y;
    tmpVec.z = this.unkAC.z - this.lookAt.z;
    let lenSq = sumSq3(tmpVec.x, tmpVec.y, tmpVec.z);
    if (lenSq > 11920928955078125e-23) {
      const invLen = rsqrt(lenSq);
      tmpVec.x *= invLen;
      tmpVec.y *= invLen;
      tmpVec.z *= invLen;
    } else {
      tmpVec.x = 1;
      tmpVec.y = 0;
      tmpVec.z = 0;
    }
    this.lookAt.x = ball.pos.x;
    this.lookAt.y = ball.pos.y + SMB2_PIVOT_Y_BASE + pivotOffset;
    this.lookAt.z = ball.pos.z;
    tmpVec.x = this.lookAt.x - (tmpVec.x * 0.75 + prevLookAt.x);
    tmpVec.y = this.lookAt.y - (tmpVec.y * 0.75 + prevLookAt.y);
    tmpVec.z = this.lookAt.z - (tmpVec.z * 0.75 + prevLookAt.z);
    let pitchRaw = 0;
    if (ball.unk80 >= 60) {
      pitchRaw = atan2S16Safe(tmpVec.y, sqrt(sumSq2(tmpVec.x, tmpVec.z)));
    }
    let yaw = toS16(atan2S16(tmpVec.x, tmpVec.z) - 32768);
    let yawDelta = toS16(yaw - this.rotY);
    let yawAdjust = clamp2(Math.trunc(yawDelta * 0.6), -SMB2_YAW_LERP_CLAMP, SMB2_YAW_LERP_CLAMP);
    yaw = toS16(this.rotY + yawAdjust);
    const groundNormalY = ball.physBall?.hardestColiPlane?.normal?.y ?? 0;
    const onGround = (ball.physBall?.flags & COLI_FLAGS.OCCURRED) !== 0 && groundNormalY > 0.5;
    if (onGround) {
      const standstillFactor = 1 - this.smb2Standstill / 60;
      const yawLimit = standstillFactor * 4096;
      let steer = toS16(ball.unk92 - yaw);
      let yawDiff = 0;
      if (yawLimit < steer) {
        yawDiff = steer - yawLimit;
      } else if (steer < -yawLimit) {
        yawDiff = steer + yawLimit;
      }
      let steerBlend = 1;
      if (speed >= 0.2777778) {
        steerBlend = 0;
      } else if (speed > 0.18518518) {
        steerBlend = (speed - 0.18518518) / 0.09259259;
      }
      yaw = toS16(yaw + Math.trunc(yawDiff * steerBlend / 128));
    }
    let yawStep = toS16(yaw - this.rotY);
    yawStep = clamp2(yawStep, -SMB2_YAW_STEP_CLAMP, SMB2_YAW_STEP_CLAMP);
    yaw = toS16(this.rotY + yawStep);
    const pitchMin = pitchOffset - SMB2_PITCH_LIMIT;
    const pitchMax = pitchOffset + SMB2_PITCH_LIMIT;
    if (pitchRaw < pitchMin) {
      pitchRaw = pitchMin;
    } else if (pitchRaw > pitchMax) {
      pitchRaw = pitchMax;
    }
    if (this.smb2PivotXRot < 0) {
      this.smb2PivotXRot = Math.trunc(this.smb2PivotXRot * 0.99);
    } else {
      this.smb2PivotXRot = Math.trunc(this.smb2PivotXRot * 0.95);
    }
    this.smb2PivotXRot = toS16(this.smb2PivotXRot + (pitchRaw - this.smb2PivotXRot) * 0.2);
    stack2.fromTranslate(this.lookAt);
    stack2.rotateY(yaw);
    stack2.rotateX(this.smb2PivotXRot);
    tmpVec.x = 0;
    tmpVec.y = 0;
    tmpVec.z = 3;
    stack2.tfPoint(tmpVec, this.unkAC);
    this.smb2YawVel = toS16(yaw - this.rotY);
    this.rotY = yaw;
    this.rotX = toS16(this.smb2PivotXRot + (SMB2_PITCH_BASE - pitchOffset));
    stack2.fromTranslate(this.lookAt);
    stack2.rotateY(this.rotY);
    stack2.rotateX(this.rotX);
    tmpVec2.x = 0;
    tmpVec2.y = 0;
    tmpVec2.z = sqrt(10);
    stack2.tfPoint(tmpVec2, this.eye);
    if (this.rotZ !== 0) {
      this.rotZ = toS16(this.rotZ * 0.95);
    }
    this.eyeVel.x = this.eye.x - prevEye.x;
    this.eyeVel.y = this.eye.y - prevEye.y;
    this.eyeVel.z = this.eye.z - prevEye.z;
    this.lookAtVel.x = this.lookAt.x - prevLookAt.x;
    this.lookAtVel.y = this.lookAt.y - prevLookAt.y;
    this.lookAtVel.z = this.lookAt.z - prevLookAt.z;
  }
  setGoalMain() {
    this.state = CAMERA_STATE.GOAL_MAIN;
  }
  initFalloutReplay(ball) {
    this.state = CAMERA_STATE.FALLOUT_REPLAY;
    this.flags |= 1;
    this.lookAt.x = ball.pos.x;
    this.lookAt.y = ball.pos.y;
    this.lookAt.z = ball.pos.z;
    const randYaw = toS16(Math.floor(Math.random() * 65536));
    stack2.fromIdentity();
    stack2.rotateY(randYaw);
    tmpVec.x = 3;
    tmpVec.y = 3;
    tmpVec.z = 3;
    stack2.tfVec(tmpVec, tmpVec);
    this.eye.x = ball.pos.x + tmpVec.x;
    this.eye.y = ball.pos.y + tmpVec.y;
    this.eye.z = ball.pos.z + tmpVec.z;
    this.eyeVel.x = (ball.pos.x - this.eye.x) * 0.05;
    this.eyeVel.y = (ball.pos.y - this.eye.y) * 0.05;
    this.eyeVel.z = (ball.pos.z - this.eye.z) * 0.05;
    this.lookAtVel.x = 0;
    this.lookAtVel.y = 0;
    this.lookAtVel.z = 0;
    tmpVec.x = this.lookAt.x - this.eye.x;
    tmpVec.y = this.lookAt.y - this.eye.y;
    tmpVec.z = this.lookAt.z - this.eye.z;
    cameraFaceDirection(this, tmpVec);
  }
  updateFalloutReplay(ball, paused2) {
    if (paused2) {
      return;
    }
    this.eyeVel.x *= 0.97;
    this.eyeVel.y *= 0.955;
    this.eyeVel.z *= 0.97;
    this.eye.x += this.eyeVel.x;
    this.eye.y += this.eyeVel.y;
    this.eye.z += this.eyeVel.z;
    this.lookAtVel.x = 0.15 * (ball.pos.x - this.lookAt.x);
    this.lookAtVel.y = 0.15 * (ball.pos.y - this.lookAt.y);
    this.lookAtVel.z = 0.15 * (ball.pos.z - this.lookAt.z);
    this.lookAt.x += this.lookAtVel.x;
    this.lookAt.y += this.lookAtVel.y;
    this.lookAt.z += this.lookAtVel.z;
    tmpVec.x = this.lookAt.x - this.eye.x;
    tmpVec.y = this.lookAt.y - this.eye.y;
    tmpVec.z = this.lookAt.z - this.eye.z;
    cameraFaceDirection(this, tmpVec);
  }
  updateGoalMain(ball, paused2) {
    if (paused2) {
      return;
    }
    tmpVec.x = ball.pos.x - this.eye.x;
    tmpVec.y = 0;
    tmpVec.z = ball.pos.z - this.eye.z;
    const dot = tmpVec.x * this.eyeVel.x + tmpVec.y * this.eyeVel.y + tmpVec.z * this.eyeVel.z;
    const dirLen = sumSq2(tmpVec.x, tmpVec.z);
    if (dirLen > 0) {
      const invLen = rsqrt(dirLen);
      tmpVec.x *= invLen;
      tmpVec.z *= invLen;
    }
    this.eyeVel.y *= 0.97;
    let f2 = -0.01 * dot;
    this.eyeVel.x += f2 * tmpVec.x;
    this.eyeVel.z += f2 * tmpVec.z;
    if (f2 < 0) {
      f2 *= 0.5;
      this.eyeVel.x += f2 * tmpVec.z;
      this.eyeVel.z += f2 * tmpVec.x;
    }
    this.eye.x += this.eyeVel.x;
    this.eye.y += this.eyeVel.y;
    this.eye.z += this.eyeVel.z;
    this.lookAtVel.x = 0.3 * (ball.pos.x - this.lookAt.x);
    this.lookAtVel.y = 0.3 * (ball.pos.y - this.lookAt.y);
    this.lookAtVel.z = 0.3 * (ball.pos.z - this.lookAt.z);
    this.lookAt.x += this.lookAtVel.x;
    this.lookAt.y += this.lookAtVel.y;
    this.lookAt.z += this.lookAtVel.z;
    tmpVec.x = this.eye.x - this.lookAt.x;
    tmpVec.y = 0;
    tmpVec.z = this.eye.z - this.lookAt.z;
    const dist = sqrt(sumSq2(tmpVec.x, tmpVec.z));
    if (dist > 1e-7) {
      const f3 = (dist + 0.08 * (2 - dist)) / dist;
      this.eye.x = tmpVec.x * f3 + this.lookAt.x;
      this.eye.z = tmpVec.z * f3 + this.lookAt.z;
      if (!(ball.flags & BALL_FLAGS.FLAG_09)) {
        tmpVec.y = this.lookAt.y - this.eye.y;
        this.eye.y += 0.01 * tmpVec.y;
      }
    }
    tmpVec.x = this.lookAt.x - this.eye.x;
    tmpVec.y = this.lookAt.y - this.eye.y;
    tmpVec.z = this.lookAt.z - this.eye.z;
    cameraFaceDirection(this, tmpVec);
  }
  update(ball, stageRuntime, paused2, fastForwardIntro = false) {
    if (!paused2) {
      smb2FrameCounter = smb2FrameCounter + 1 >>> 0;
    }
    switch (this.state) {
      case CAMERA_STATE.FALLOUT_REPLAY:
        this.updateFalloutReplay(ball, paused2);
        break;
      case CAMERA_STATE.READY_MAIN:
        this.updateReadyMain(paused2, fastForwardIntro);
        break;
      case CAMERA_STATE.GOAL_MAIN:
        this.updateGoalMain(ball, paused2);
        break;
      case CAMERA_STATE.LEVEL_MAIN:
      default:
        if (stageRuntime?.stage?.format === "smb2") {
          this.updateLevelMainSmb2(ball, stageRuntime, paused2);
        } else {
          this.updateLevelMain(ball, paused2);
        }
        break;
    }
  }
};

// src/determinism.ts
function quantizeStickAxis(value) {
  const clamped = Math.max(-1, Math.min(1, value));
  const quantized = Math.round(clamped * 127);
  if (quantized < -127) {
    return -127;
  }
  if (quantized > 127) {
    return 127;
  }
  return quantized;
}
function dequantizeStickAxis(value) {
  return value / 127;
}
function quantizeStick(stick) {
  return {
    x: quantizeStickAxis(stick.x),
    y: quantizeStickAxis(stick.y)
  };
}
function dequantizeStick(stick) {
  return {
    x: dequantizeStickAxis(stick.x),
    y: dequantizeStickAxis(stick.y)
  };
}

// src/replay.ts
function createReplayData(gameSource, stageId, ticks, inputStartTick, inputs, hashes, note) {
  return {
    version: 1,
    gameSource,
    stageId,
    ticks,
    inputStartTick,
    inputs,
    hashes,
    note
  };
}

// src/physics.ts
import { mat3 as mat32, mat4 as mat45, vec3 as vec35 } from "gl-matrix";
var RAD_TO_S16 = 32768 / Math.PI;
var FLT_EPSILON2 = 11920929e-14;
var GOAL_FLOAT_FRAMES = 90;
var WORMHOLE_TRIGGER_HEIGHT = 4;
var WORMHOLE_TRIGGER_WIDTH = 4;
var WORMHOLE_TRIGGER_OFFSET_Y = 2;
var WORMHOLE_OFFSET_Y = 2.2;
var WORMHOLE_COOLDOWN_FRAMES = 30;
var stack3 = new MatrixStack();
var rotYTmp = { value: 0 };
var rotXTmp = { value: 0 };
var rotZTmp = { value: 0 };
var adjustPlanePoint = { x: 0, y: 0, z: 0 };
var adjustPlaneNormal = { x: 0, y: 0, z: 0 };
var adjustSp38 = { x: 0, y: 0, z: 0 };
var adjustSp44 = { x: 0, y: 0, z: 0 };
var adjustSp2C = { x: 0, y: 0, z: 0 };
var adjustSp20 = { x: 0, y: 0, z: 0 };
var adjustSp14 = { x: 0, y: 0, z: 0 };
var movementTmp = { x: 0, y: 0, z: 0 };
var planeNormalWorldTmp = { x: 0, y: 0, z: 0 };
var contactOffsetTmp = { x: 0, y: 0, z: 0 };
var movementLocalTmp = { x: 0, y: 0, z: 0 };
var axisTmp = { x: 0, y: 0, z: 0 };
var accelTmp = { x: 0, y: 0, z: 0 };
var wormholeUnitY = { x: 0, y: 1, z: 0 };
var wormholeForwardPoint = { x: 0, y: 0, z: -1 };
var wormholeBackwardPoint = { x: 0, y: 0, z: 1 };
var wormholeEye = { x: 0, y: 0, z: 0 };
var wormholeUp = { x: 0, y: 0, z: 0 };
var wormholeTarget = { x: 0, y: 0, z: 0 };
var wormholeVecA = vec35.create();
var wormholeVecB = vec35.create();
var wormholeVecC = vec35.create();
var wormholeMatA = mat45.create();
var wormholeMatB = mat45.create();
var wormholeMatC = mat45.create();
var wormholeMat32 = mat32.create();
var seesawBall = {
  pos: { x: 0, y: 0, z: 0 },
  prevPos: { x: 0, y: 0, z: 0 },
  vel: { x: 0, y: 0, z: 0 },
  animGroupId: 0
};
function createBallState() {
  return {
    playerId: 0,
    pos: { x: 0, y: 0, z: 0 },
    prevPos: { x: 0, y: 0, z: 0 },
    vel: { x: 0, y: 0, z: 0 },
    rotX: 0,
    rotY: 0,
    rotZ: 0,
    flags: 0,
    state: BALL_STATES.READY,
    startPos: { x: 0, y: 0, z: 0 },
    startRotY: 0,
    goalTimer: 0,
    currRadius: 0.5,
    accel: 9799992e-9,
    restitution: 0.5,
    unk60: 0,
    unk62: 0,
    unk64: 0,
    unk80: 0,
    unk92: 0,
    apeYaw: 0,
    unkA8: { x: 0, y: 0, z: 0, w: 1 },
    unkB8: { x: 0, y: 0, z: 0 },
    unkC4: 0,
    unkF8: 0,
    apeQuat: { x: 0, y: 0, z: 0, w: 1 },
    apeFlags: 0,
    transform: new Float32Array(12),
    prevTransform: new Float32Array(12),
    unk114: { x: 0, y: 1, z: 0 },
    deltaQuat: { x: 0, y: 0, z: 0, w: 1 },
    orientation: { x: 0, y: 0, z: 0, w: 1 },
    prevOrientation: { x: 0, y: 0, z: 0, w: 1 },
    speed: 0,
    bananas: 0,
    audio: {
      lastImpactFrame: -9999,
      rollingVol: 0,
      rollingPitch: 0,
      bumperHit: false,
      lastColiSpeed: 0,
      lastColiFlags: 0
    },
    wormholeCooldown: 0,
    wormholeTransform: null,
    physBall: createPhysicsBall()
  };
}
function createPhysicsBall() {
  return {
    flags: 0,
    pos: { x: 0, y: 0, z: 0 },
    prevPos: { x: 0, y: 0, z: 0 },
    vel: { x: 0, y: 0, z: 0 },
    radius: 0.5,
    gravityAccel: 9799992e-9,
    restitution: 0.5,
    hardestColiSpeed: 0,
    hardestColiPlane: {
      point: { x: 0, y: 0, z: 0 },
      normal: { x: 0, y: 1, z: 0 }
    },
    hardestColiAnimGroupId: 0,
    friction: 0.01,
    frictionMode: "smb1",
    animGroupId: 0
  };
}
function resetBall(ball, startPos, startRotY = ball.startRotY) {
  ball.pos.x = startPos.x;
  ball.pos.y = startPos.y;
  ball.pos.z = startPos.z;
  ball.prevPos.x = startPos.x;
  ball.prevPos.y = startPos.y;
  ball.prevPos.z = startPos.z;
  ball.vel.x = 0;
  ball.vel.y = 0;
  ball.vel.z = 0;
  ball.rotX = 0;
  ball.rotY = 0;
  ball.rotZ = 0;
  ball.flags = 0;
  ball.state = BALL_STATES.PLAY;
  ball.goalTimer = 0;
  ball.startRotY = startRotY;
  ball.unk80 = 0;
  ball.unk92 = 0;
  ball.apeYaw = toS16(startRotY - 16384);
  ball.unkA8.x = 0;
  ball.unkA8.y = 0;
  ball.unkA8.z = 0;
  ball.unkA8.w = 1;
  ball.unkB8.x = 0;
  ball.unkB8.y = 0;
  ball.unkB8.z = 0;
  ball.unkC4 = 0;
  ball.unkF8 = 0;
  setApeQuatFromYaw(ball, startRotY - 16384);
  ball.apeFlags = 0;
  ball.unk114.x = 0;
  ball.unk114.y = 1;
  ball.unk114.z = 0;
  ball.deltaQuat.x = 0;
  ball.deltaQuat.y = 0;
  ball.deltaQuat.z = 0;
  ball.deltaQuat.w = 1;
  ball.orientation.x = 0;
  ball.orientation.y = 0;
  ball.orientation.z = 0;
  ball.orientation.w = 1;
  ball.prevOrientation.x = ball.orientation.x;
  ball.prevOrientation.y = ball.orientation.y;
  ball.prevOrientation.z = ball.orientation.z;
  ball.prevOrientation.w = ball.orientation.w;
  ball.wormholeCooldown = 0;
  ball.wormholeTransform = null;
  updateBallTransform(ball);
  ball.prevTransform.set(ball.transform);
}
function initBallForStage(ball, startPos, startRotY) {
  ball.startPos.x = startPos.x;
  ball.startPos.y = startPos.y;
  ball.startPos.z = startPos.z;
  ball.startRotY = startRotY;
  ball.flags = BALL_FLAGS.INVISIBLE;
  ball.state = BALL_STATES.READY;
  ball.goalTimer = 0;
  ball.vel.x = 0;
  ball.vel.y = 0;
  ball.vel.z = 0;
  ball.rotX = 0;
  ball.rotY = 0;
  ball.rotZ = 0;
  const dropFrames = 24;
  const dropOffset = ball.accel * dropFrames * dropFrames * 0.5;
  ball.pos.x = startPos.x;
  ball.pos.y = startPos.y + dropOffset;
  ball.pos.z = startPos.z;
  ball.prevPos.x = ball.pos.x;
  ball.prevPos.y = ball.pos.y;
  ball.prevPos.z = ball.pos.z;
  ball.unk80 = 0;
  ball.unk92 = 0;
  ball.apeYaw = toS16(startRotY - 16384);
  ball.unkA8.x = 0;
  ball.unkA8.y = 0;
  ball.unkA8.z = 0;
  ball.unkA8.w = 1;
  ball.unkB8.x = 0;
  ball.unkB8.y = 0;
  ball.unkB8.z = 0;
  ball.unkC4 = 0;
  ball.unkF8 = 0;
  setApeQuatFromYaw(ball, startRotY - 16384);
  ball.apeFlags = 0;
  ball.unk114.x = 0;
  ball.unk114.y = 1;
  ball.unk114.z = 0;
  ball.deltaQuat.x = 0;
  ball.deltaQuat.y = 0;
  ball.deltaQuat.z = 0;
  ball.deltaQuat.w = 1;
  ball.orientation.x = 0;
  ball.orientation.y = 0;
  ball.orientation.z = 0;
  ball.orientation.w = 1;
  ball.prevOrientation.x = ball.orientation.x;
  ball.prevOrientation.y = ball.orientation.y;
  ball.prevOrientation.z = ball.orientation.z;
  ball.prevOrientation.w = ball.orientation.w;
  ball.wormholeCooldown = 0;
  ball.wormholeTransform = null;
  updateBallTransform(ball);
  ball.prevTransform.set(ball.transform);
}
function startBallDrop(ball, frames = 24) {
  const f4 = frames;
  if (f4 <= 0) {
    return;
  }
  ball.prevPos.x = ball.pos.x;
  ball.prevPos.y = ball.pos.y;
  ball.prevPos.z = ball.pos.z;
  const f2 = (ball.startPos.y - ball.pos.y) / f4;
  ball.vel.x = 0;
  ball.vel.y = ball.accel * f4 * 0.5 + f2;
  ball.vel.z = 0;
  ball.rotX = 8192;
  ball.rotY = toS16(ball.startRotY - 16384);
  ball.rotZ = 0;
  stack3.fromIdentity();
  stack3.rotateY(ball.rotY);
  stack3.rotateX(ball.rotX);
  stack3.rotateZ(ball.rotZ);
  stack3.toQuat(ball.orientation);
  ball.flags &= ~BALL_FLAGS.INVISIBLE;
  ball.flags |= BALL_FLAGS.FLAG_14;
  ball.state = BALL_STATES.PLAY;
  ball.unk80 = 0;
  ball.unk92 = 0;
  ball.apeYaw = toS16(ball.startRotY - 16384);
  setApeQuatFromYaw(ball, ball.startRotY - 16384);
  ball.apeFlags = 0;
  ball.wormholeCooldown = 0;
  ball.wormholeTransform = null;
  updateBallTransform(ball);
  ball.prevTransform.set(ball.transform);
}
function updateBallCameraSteerYaw(ball) {
  const speed = sqrt(sumSq2(ball.vel.x, ball.vel.z));
  let velYaw = ball.apeYaw;
  if (speed > FLT_EPSILON2) {
    velYaw = atan2S16(ball.vel.x, ball.vel.z) - 32768;
  }
  let blend = 0;
  if (speed >= 0.37037037037037035) {
    blend = 1;
  } else if (speed >= 0.23148148148148145) {
    blend = (speed - 0.23148148148148145) / 0.1388888888888889;
  }
  const delta = toS16(velYaw - ball.apeYaw);
  ball.unk92 = toS16(ball.apeYaw + delta * blend);
}
function updateBallTransform(ball) {
  stack3.fromQuat(ball.orientation);
  stack3.setTranslate(ball.pos);
  stack3.toMtx(ball.transform);
}
function setApeQuatFromYaw(ball, yaw) {
  stack3.fromIdentity();
  stack3.rotateY(toS16(yaw));
  stack3.toQuat(ball.apeQuat);
}
function updateBallApeBasis(ball) {
  const sp64 = { x: 0, y: 0, z: 0 };
  const sp58 = { x: 0, y: 0, z: 0 };
  const sp4C = { x: 0, y: 0, z: 0 };
  const sp40 = { x: 0, y: 0, z: 0 };
  const sp34 = { x: 0, y: 0, z: 0 };
  const sp28 = { x: 0, y: 0, z: 0 };
  const sp1C = { x: 0, y: 0, z: 0 };
  stack3.fromMtx(ball.transform);
  ball.unkC4 = vecLen(ball.unkB8);
  stack3.tfVec({ x: 0, y: 1, z: 0 }, sp58);
  stack3.tfVec({ x: 1, y: 0, z: 0 }, sp40);
  stack3.tfVec({ x: 0, y: 0, z: 1 }, sp28);
  sp1C.x = 0;
  sp1C.y = -ball.currRadius;
  sp1C.z = 0;
  stack3.rigidInvTfVec(sp1C, sp1C);
  stack3.fromMtx(ball.prevTransform);
  stack3.tfVec(sp1C, ball.unkB8);
  ball.unkB8.y += ball.currRadius;
  stack3.tfVec({ x: 0, y: 1, z: 0 }, sp64);
  stack3.tfVec({ x: 1, y: 0, z: 0 }, sp4C);
  stack3.tfVec({ x: 0, y: 0, z: 1 }, sp34);
  let f31 = vecDotNormalized(sp64, sp58);
  let f1 = vecDotNormalized(sp4C, sp40);
  if (f31 > f1) {
    f31 = f1;
    sp64.x = sp4C.x;
    sp64.y = sp4C.y;
    sp64.z = sp4C.z;
    sp58.x = sp40.x;
    sp58.y = sp40.y;
    sp58.z = sp40.z;
  }
  f1 = vecDotNormalized(sp34, sp28);
  if (f31 > f1) {
    f31 = f1;
    sp64.x = sp34.x;
    sp64.y = sp34.y;
    sp64.z = sp34.z;
    sp58.x = sp28.x;
    sp58.y = sp28.y;
    sp58.z = sp28.z;
  }
  if (f31 > -0.9998 && f31 < 0.9998) {
    quatFromDirs(ball.unkA8, sp64, sp58);
  } else {
    ball.unkA8.x = 0;
    ball.unkA8.y = 0;
    ball.unkA8.z = 0;
    ball.unkA8.w = 1;
  }
}
function updateApeBaseOrientation(ball) {
  const tmpQuat = { x: ball.unkA8.x, y: ball.unkA8.y, z: ball.unkA8.z, w: ball.unkA8.w };
  tmpQuat.w /= 0.65;
  tmpQuat.x *= 0.65;
  tmpQuat.y *= 0.65;
  tmpQuat.z *= 0.65;
  quatNormalize(tmpQuat);
  stack3.fromQuat(tmpQuat);
  stack3.toMtx(stack3.mtxB);
  stack3.fromQuat(ball.apeQuat);
  stack3.normalizeBasis();
  stack3.multLeft(stack3.mtxB);
  stack3.normalizeBasis();
  if (!(ball.flags & BALL_FLAGS.FLAG_05)) {
    const f31 = vecLen(ball.vel);
    const f12 = vecLen(ball.unkB8);
    if (f31 > 0.032407406717538834) {
      if (f12 * 100 < ball.unkC4) {
        ball.flags |= BALL_FLAGS.FLAG_05;
      } else if (f12 * 3 < ball.unkC4 && f31 * 1.5 < ball.unkF8) {
        ball.flags |= BALL_FLAGS.FLAG_05;
      }
    }
  }
  if (tmpQuat.w < 0.9941) {
    return false;
  }
  stack3.toMtx(stack3.mtxB);
  const sp48 = { x: 0, y: 1, z: 0 };
  stack3.rigidInvTfVec(sp48, sp48);
  const sp3C = { x: 0, y: 1, z: 0 };
  const f1 = 1 - vecDotNormalized(sp48, sp3C);
  const quat3 = { x: 0, y: 0, z: 0, w: 1 };
  if (f1 > 0.01) {
    const sp30 = { x: 0, y: 1, z: 0 };
    if (f1 > 1.999) {
      sp48.x = 1;
      sp48.y = 0;
      sp48.z = 0;
    } else {
      vecCross(sp30, sp48, sp48);
    }
    quatFromAxisAngle(sp48, 910, quat3);
  } else {
    quatFromDirs(quat3, { x: 0, y: 1, z: 0 }, sp48);
  }
  quatNormalize(quat3);
  stack3.fromQuat(quat3);
  stack3.normalizeBasis();
  stack3.multLeft(stack3.mtxB);
  return true;
}
function updateApeFromVelocity(ball) {
  const sp4C = { x: ball.vel.x, y: 0, z: ball.vel.z };
  if (vecLen(sp4C) < 27777777e-11) {
    return 0;
  }
  vecNormalizeLen(sp4C);
  stack3.rigidInvTfVec(sp4C, sp4C);
  const sp40 = { x: 0, y: 0, z: 0 };
  let var1 = sp4C.x;
  const quat3 = { x: 0, y: 0, z: 0, w: 1 };
  if (var1 > -0.992) {
    const sp24 = { x: -1, y: 0, z: 0 };
    var1 = 1 - var1;
    if (var1 > 999999993922529e-23) {
      vecCross(sp24, sp4C, sp40);
    } else {
      sp40.x = 0;
      sp40.y = 1;
      sp40.z = 0;
    }
    quatFromAxisAngle(sp40, 728, quat3);
  } else {
    quatFromDirs(quat3, { x: -1, y: 0, z: 0 }, sp4C);
  }
  stack3.push();
  stack3.fromQuat(quat3);
  stack3.normalizeBasis();
  stack3.toMtx(stack3.mtxB);
  stack3.pop();
  stack3.multRight(stack3.mtxB);
  return vecLen(ball.unkB8) * 1.5;
}
function updateApeSpinCompensation() {
  const tmp = new Float32Array(12);
  stack3.toMtx(tmp);
  const sp24 = { x: 0, y: 0, z: 0 };
  stack3.tfVec({ x: -1, y: 0, z: 0 }, sp24);
  const quat3 = { x: 0, y: 0, z: 0, w: 1 };
  if (sp24.y < 0.99) {
    const sp18 = { x: 0, y: 1, z: 0 };
    vecCross(sp24, sp18, sp24);
    quatFromAxisAngle(sp24, 910, quat3);
  } else {
    quatFromDirs(quat3, sp24, { x: 0, y: 1, z: 0 });
  }
  stack3.fromQuat(quat3);
  stack3.normalizeBasis();
  stack3.multRight(tmp);
}
function updateApeOrientation(ball, physBall, stageRuntime) {
  const APE_FLAG_ON_GROUND = 1 << 0;
  const APE_FLAG_IN_AIR = 1 << 1;
  ball.apeFlags &= ~3;
  const rayHit = raycastStageDown(ball.pos, stageRuntime);
  if (!rayHit && ball.vel.y < -0.16203702986240387) {
    ball.apeFlags |= APE_FLAG_IN_AIR;
  } else if (vecLen(ball.unkB8) < 27777777e-11) {
    ball.apeFlags |= APE_FLAG_ON_GROUND;
  }
  let r27 = (ball.flags & BALL_FLAGS.GOAL) !== 0;
  r27 = r27 || !(ball.apeFlags & 3);
  updateApeBaseOrientation(ball);
  if (r27) {
    updateApeFromVelocity(ball);
  } else {
    stack3.fromQuat(ball.apeQuat);
    stack3.normalizeBasis();
    if (ball.apeFlags & APE_FLAG_IN_AIR) {
      updateApeSpinCompensation();
    }
  }
  stack3.toQuat(ball.apeQuat);
  const tmpDir = { x: -1, y: 0, z: 0 };
  stack3.fromQuat(ball.apeQuat);
  stack3.tfVec(tmpDir, tmpDir);
  ball.apeYaw = toS16(atan2S16(tmpDir.x, tmpDir.z) - 32768);
}
function startGoal(ball) {
  ball.state = BALL_STATES.GOAL_MAIN;
  ball.flags |= BALL_FLAGS.GOAL | BALL_FLAGS.FLAG_08 | BALL_FLAGS.FLAG_10;
  if (ball.flags & (BALL_FLAGS.GOAL | BALL_FLAGS.FLAG_13)) {
    ball.flags |= BALL_FLAGS.FLAG_06;
  }
  ball.deltaQuat.x = 0;
  ball.deltaQuat.y = 0;
  ball.deltaQuat.z = 0;
  ball.deltaQuat.w = 1;
  ball.orientation.x = 0;
  ball.orientation.y = 0;
  ball.orientation.z = 0;
  ball.orientation.w = 1;
  ball.goalTimer = 0;
}
function initPhysBallFromBall(ball, physBall, stageFormat = "smb1") {
  physBall.flags = 0;
  physBall.pos.x = ball.pos.x;
  physBall.pos.y = ball.pos.y;
  physBall.pos.z = ball.pos.z;
  physBall.prevPos.x = ball.prevPos.x;
  physBall.prevPos.y = ball.prevPos.y;
  physBall.prevPos.z = ball.prevPos.z;
  physBall.vel.x = ball.vel.x;
  physBall.vel.y = ball.vel.y;
  physBall.vel.z = ball.vel.z;
  physBall.radius = ball.currRadius;
  physBall.gravityAccel = ball.accel;
  physBall.restitution = ball.restitution;
  physBall.hardestColiSpeed = 0;
  physBall.animGroupId = 0;
  physBall.hardestColiAnimGroupId = 0;
  physBall.friction = 0.01;
  physBall.frictionMode = stageFormat === "smb2" ? "smb2" : "smb1";
}
function syncBallFromPhysBall(ball, physBall) {
  if (physBall.flags & COLI_FLAGS.OCCURRED) {
    ball.flags |= BALL_FLAGS.FLAG_00;
  }
  ball.pos.x = physBall.pos.x;
  ball.pos.y = physBall.pos.y;
  ball.pos.z = physBall.pos.z;
  ball.vel.x = physBall.vel.x;
  ball.vel.y = physBall.vel.y;
  ball.vel.z = physBall.vel.z;
}
function adjustMovementForAnimGroup(ball, physBall, movement, animGroups) {
  const group = animGroups[physBall.hardestColiAnimGroupId];
  adjustPlanePoint.x = physBall.hardestColiPlane.point.x;
  adjustPlanePoint.y = physBall.hardestColiPlane.point.y;
  adjustPlanePoint.z = physBall.hardestColiPlane.point.z;
  adjustPlaneNormal.x = physBall.hardestColiPlane.normal.x;
  adjustPlaneNormal.y = physBall.hardestColiPlane.normal.y;
  adjustPlaneNormal.z = physBall.hardestColiPlane.normal.z;
  stack3.fromMtx(group.transform);
  stack3.tfPoint(adjustPlanePoint, adjustSp38);
  stack3.tfVec(adjustPlaneNormal, adjustSp44);
  adjustSp14.x = adjustSp38.x - ball.pos.x;
  adjustSp14.y = adjustSp38.y - ball.pos.y;
  adjustSp14.z = adjustSp38.z - ball.pos.z;
  adjustSp2C.x = ball.pos.x + adjustSp14.x * adjustSp44.x;
  adjustSp2C.y = ball.pos.y + adjustSp14.y * adjustSp44.y;
  adjustSp2C.z = ball.pos.z + adjustSp14.z * adjustSp44.z;
  stack3.rigidInvTfPoint(adjustSp2C, adjustSp14);
  stack3.fromMtx(group.prevTransform);
  stack3.tfPoint(adjustSp14, adjustSp20);
  adjustSp14.x = adjustSp2C.x - adjustSp20.x;
  adjustSp14.y = adjustSp2C.y - adjustSp20.y;
  adjustSp14.z = adjustSp2C.z - adjustSp20.z;
  movement.x -= adjustSp14.x;
  movement.y -= adjustSp14.y;
  movement.z -= adjustSp14.z;
}
function updateBallOrientation(ball) {
  quatMul(ball.orientation, ball.orientation, ball.deltaQuat);
  quatNormalize(ball.orientation);
  stack3.fromQuat(ball.orientation);
  stack3.toEulerYXZ(rotYTmp, rotXTmp, rotZTmp);
  ball.rotY = rotYTmp.value;
  ball.rotX = rotXTmp.value;
  ball.rotZ = rotZTmp.value;
}
function handleBallRotationalKinematics(ball, physBall, animGroups, stageRuntime, goalMode) {
  let doRot = 0;
  if (goalMode) {
    if (physBall.hardestColiSpeed < 0) {
      doRot = 1;
    }
  } else if (physBall.flags & COLI_FLAGS.OCCURRED) {
    doRot = 1;
  }
  if (!doRot) {
    if (ball.flags & BALL_FLAGS.FLAG_10) {
      ball.vel.x *= 0.95;
      ball.vel.y *= 0.95;
      ball.vel.z *= 0.95;
    }
    return;
  }
  movementTmp.x = ball.pos.x - ball.prevPos.x;
  movementTmp.y = ball.pos.y - ball.prevPos.y;
  movementTmp.z = ball.pos.z - ball.prevPos.z;
  if (physBall.hardestColiAnimGroupId > 0) {
    adjustMovementForAnimGroup(ball, physBall, movementTmp, animGroups);
  }
  const planeNormal = physBall.hardestColiPlane.normal;
  stack3.fromMtx(animGroups[physBall.hardestColiAnimGroupId].transform);
  stack3.tfVec(planeNormal, planeNormalWorldTmp);
  contactOffsetTmp.x = -planeNormalWorldTmp.x * ball.currRadius;
  contactOffsetTmp.y = -planeNormalWorldTmp.y * ball.currRadius;
  contactOffsetTmp.z = -planeNormalWorldTmp.z * ball.currRadius;
  stack3.fromRotateY(ball.rotY);
  stack3.rotateX(ball.rotX);
  stack3.rotateZ(ball.rotZ);
  stack3.rigidInvTfVec(contactOffsetTmp, contactOffsetTmp);
  movementLocalTmp.x = -movementTmp.x;
  movementLocalTmp.y = -movementTmp.y;
  movementLocalTmp.z = -movementTmp.z;
  stack3.rigidInvTfVec(movementLocalTmp, movementLocalTmp);
  vecCross(contactOffsetTmp, movementLocalTmp, axisTmp);
  let invRadiusSq = 0;
  if (ball.currRadius > FLT_EPSILON2) {
    invRadiusSq = RAD_TO_S16 / (ball.currRadius * ball.currRadius);
  }
  ball.unk60 = axisTmp.x * invRadiusSq;
  ball.unk62 = axisTmp.y * invRadiusSq;
  ball.unk64 = axisTmp.z * invRadiusSq;
  if (ball.currRadius > FLT_EPSILON2) {
    let len = vecLen(axisTmp);
    if (len !== 0) {
      len = vecNormalizeLen(axisTmp);
      quatFromAxisAngle(
        axisTmp,
        len * 2 / (ball.currRadius * ball.currRadius * Math.PI) * RAD_TO_S16,
        ball.deltaQuat
      );
    }
  }
}
function stepBall(ball, stageRuntime, world) {
  const stage = stageRuntime.stage;
  const animGroups = stageRuntime.animGroups;
  if (ball.state === BALL_STATES.GOAL_MAIN) {
    ball.goalTimer += 1;
    if (ball.goalTimer >= GOAL_FLOAT_FRAMES && !(ball.flags & BALL_FLAGS.FLAG_09)) {
      ball.flags &= ~(BALL_FLAGS.FLAG_08 | BALL_FLAGS.FLAG_10);
      ball.flags |= BALL_FLAGS.FLAG_09;
    }
  }
  if (ball.transform[0] === 0 && ball.transform[5] === 0 && ball.transform[10] === 0) {
    updateBallTransform(ball);
  }
  ball.prevTransform.set(ball.transform);
  ball.prevPos.x = ball.pos.x;
  ball.prevPos.y = ball.pos.y;
  ball.prevPos.z = ball.pos.z;
  ball.prevOrientation.x = ball.orientation.x;
  ball.prevOrientation.y = ball.orientation.y;
  ball.prevOrientation.z = ball.orientation.z;
  ball.prevOrientation.w = ball.orientation.w;
  ball.speed = vecLen(ball.vel);
  ball.unkF8 = ball.speed;
  ball.flags &= ~BALL_FLAGS.FLAG_05;
  accelTmp.x = 0;
  accelTmp.y = -ball.accel;
  accelTmp.z = 0;
  if (ball.flags & BALL_FLAGS.FLAG_09) {
    accelTmp.y = -accelTmp.y;
  } else if (ball.flags & BALL_FLAGS.FLAG_08) {
    accelTmp.y = 0;
  }
  stack3.fromIdentity();
  stack3.rotateX(world.xrot);
  stack3.rotateZ(world.zrot);
  stack3.rigidInvTfVec(accelTmp, accelTmp);
  ball.vel.x += accelTmp.x;
  ball.vel.y += accelTmp.y;
  ball.vel.z += accelTmp.z;
  ball.pos.x += ball.vel.x;
  ball.pos.y += ball.vel.y;
  ball.pos.z += ball.vel.z;
  const physBall = ball.physBall;
  initPhysBallFromBall(ball, physBall, stage.format);
  collideBallWithStage(physBall, stage, animGroups);
  const stageColiFlags = physBall.flags;
  const stageColiSpeed = physBall.hardestColiSpeed;
  if (stage.format === "smb2" && physBall.flags & COLI_FLAGS.OCCURRED) {
    const seesawState = animGroups[physBall.hardestColiAnimGroupId]?.seesawState;
    if (seesawState) {
      seesawBall.pos.x = physBall.pos.x;
      seesawBall.pos.y = physBall.pos.y;
      seesawBall.pos.z = physBall.pos.z;
      seesawBall.prevPos.x = physBall.prevPos.x;
      seesawBall.prevPos.y = physBall.prevPos.y;
      seesawBall.prevPos.z = physBall.prevPos.z;
      seesawBall.vel.x = 0;
      seesawBall.vel.y = 0;
      seesawBall.vel.z = 0;
      seesawBall.animGroupId = 0;
      tfPhysballToAnimGroupSpace(seesawBall, physBall.hardestColiAnimGroupId, animGroups);
      seesawBall.vel.x = physBall.hardestColiPlane.normal.x;
      seesawBall.vel.y = physBall.hardestColiPlane.normal.y;
      seesawBall.vel.z = physBall.hardestColiPlane.normal.z;
      vecSetLen(seesawBall.vel, seesawBall.vel, physBall.hardestColiSpeed);
      applySeesawCollision(seesawBall, seesawState);
    }
  }
  if (stage.format !== "smb2" && stage.stageId === 92 && physBall.animGroupId !== 0) {
    tfPhysballToAnimGroupSpace(physBall, 0, animGroups);
  }
  collideBallWithBonusWave(physBall, stageRuntime);
  syncBallFromPhysBall(ball, physBall);
  if (physBall.flags & COLI_FLAGS.OCCURRED) {
    if (physBall.hardestColiAnimGroupId === 0) {
      ball.unk114.x = -physBall.hardestColiPlane.normal.x;
      ball.unk114.y = -physBall.hardestColiPlane.normal.y;
      ball.unk114.z = -physBall.hardestColiPlane.normal.z;
    } else {
      stack3.fromMtx(animGroups[physBall.hardestColiAnimGroupId].transform);
      stack3.tfVec(physBall.hardestColiPlane.normal, ball.unk114);
      ball.unk114.x = -ball.unk114.x;
      ball.unk114.y = -ball.unk114.y;
      ball.unk114.z = -ball.unk114.z;
    }
  }
  if (stageRuntime.effects) {
    const onGround = (physBall.flags & COLI_FLAGS.OCCURRED) !== 0 && physBall.hardestColiPlane.normal.y > 0;
    const rng = stageRuntime.visualRng;
    spawnMovementSparks(stageRuntime.effects, ball, onGround, rng);
    if (physBall.flags & COLI_FLAGS.OCCURRED && physBall.hardestColiSpeed < -0.06) {
      spawnCollisionStars(stageRuntime.effects, ball, physBall.hardestColiSpeed, rng);
    }
    if (ball.state === BALL_STATES.GOAL_MAIN && ball.unk80 & 1) {
      spawnPostGoalSparkle(stageRuntime.effects, ball, rng);
    }
  }
  const goalMode = ball.state === BALL_STATES.GOAL_MAIN;
  handleBallRotationalKinematics(ball, physBall, animGroups, stageRuntime, goalMode);
  updateBallOrientation(ball);
  updateBallTransform(ball);
  updateBallApeBasis(ball);
  updateApeOrientation(ball, physBall, stageRuntime);
  updateBallCameraSteerYaw(ball);
  initPhysBallFromBall(ball, physBall, stage.format);
  collideBallWithStageObjects(physBall, stageRuntime);
  syncBallFromPhysBall(ball, physBall);
  if (ball.audio) {
    ball.audio.lastColiFlags = stageColiFlags | physBall.flags;
    ball.audio.lastColiSpeed = Math.min(stageColiSpeed, physBall.hardestColiSpeed);
  }
  if (stage?.format === "smb2") {
    if (ball.wormholeCooldown > 0) {
      ball.wormholeCooldown -= 1;
    } else {
      const hit = checkBallEnteredWormhole(ball, stageRuntime);
      if (hit && hit.wormhole.dest) {
        teleportBallToWormhole(ball, stageRuntime, hit.wormhole, hit.wormhole.dest);
        ball.wormholeCooldown = WORMHOLE_COOLDOWN_FRAMES;
      }
    }
  }
  ball.unk80 += 1;
}
function buildWormholeView(stageRuntime, wormhole, forwardPoint, outMat4) {
  const animGroupIndex = wormhole.animGroupIndex ?? 0;
  if (animGroupIndex > 0 && stageRuntime.animGroups[animGroupIndex]) {
    stack3.fromMtx(stageRuntime.animGroups[animGroupIndex].transform);
  } else {
    stack3.fromIdentity();
  }
  stack3.translate(wormhole.pos);
  stack3.rotateZ(wormhole.rot.z);
  stack3.rotateY(wormhole.rot.y);
  stack3.rotateX(wormhole.rot.x);
  stack3.translateXYZ(0, WORMHOLE_OFFSET_Y, 0);
  stack3.getTranslateAlt(wormholeEye);
  stack3.tfVec(wormholeUnitY, wormholeUp);
  stack3.tfPoint(forwardPoint, wormholeTarget);
  vec35.set(wormholeVecA, wormholeEye.x, wormholeEye.y, wormholeEye.z);
  vec35.set(wormholeVecB, wormholeTarget.x, wormholeTarget.y, wormholeTarget.z);
  vec35.set(wormholeVecC, wormholeUp.x, wormholeUp.y, wormholeUp.z);
  mat45.lookAt(outMat4, wormholeVecA, wormholeVecB, wormholeVecC);
}
function computeWormholeTransform(stageRuntime, srcWormhole, destWormhole, outMat4) {
  buildWormholeView(stageRuntime, srcWormhole, wormholeForwardPoint, wormholeMatA);
  buildWormholeView(stageRuntime, destWormhole, wormholeBackwardPoint, wormholeMatB);
  if (!mat45.invert(wormholeMatC, wormholeMatB)) {
    return false;
  }
  mat45.multiply(outMat4, wormholeMatC, wormholeMatA);
  return true;
}
function teleportBallToWormhole(ball, stageRuntime, srcWormhole, destWormhole) {
  const wormholeTf = mat45.create();
  if (!computeWormholeTransform(stageRuntime, srcWormhole, destWormhole, wormholeTf)) {
    const destPos = { x: destWormhole.pos.x, y: destWormhole.pos.y, z: destWormhole.pos.z };
    const animGroupIndex = destWormhole.animGroupIndex ?? 0;
    if (animGroupIndex > 0) {
      stack3.fromMtx(stageRuntime.animGroups[animGroupIndex].transform);
      stack3.tfPoint(destPos, destPos);
    }
    ball.pos.x = destPos.x;
    ball.pos.y = destPos.y;
    ball.pos.z = destPos.z;
    ball.prevPos.x = destPos.x;
    ball.prevPos.y = destPos.y;
    ball.prevPos.z = destPos.z;
    updateBallTransform(ball);
    ball.prevTransform.set(ball.transform);
    return;
  }
  vec35.set(wormholeVecA, ball.pos.x, ball.pos.y, ball.pos.z);
  vec35.transformMat4(wormholeVecA, wormholeVecA, wormholeTf);
  ball.pos.x = wormholeVecA[0];
  ball.pos.y = wormholeVecA[1];
  ball.pos.z = wormholeVecA[2];
  vec35.set(wormholeVecA, ball.prevPos.x, ball.prevPos.y, ball.prevPos.z);
  vec35.transformMat4(wormholeVecA, wormholeVecA, wormholeTf);
  ball.prevPos.x = wormholeVecA[0];
  ball.prevPos.y = wormholeVecA[1];
  ball.prevPos.z = wormholeVecA[2];
  mat32.fromMat4(wormholeMat32, wormholeTf);
  vec35.set(wormholeVecA, ball.vel.x, ball.vel.y, ball.vel.z);
  vec35.transformMat3(wormholeVecA, wormholeVecA, wormholeMat32);
  ball.vel.x = wormholeVecA[0];
  ball.vel.y = wormholeVecA[1];
  ball.vel.z = wormholeVecA[2];
  vec35.set(wormholeVecA, ball.unk114.x, ball.unk114.y, ball.unk114.z);
  vec35.transformMat3(wormholeVecA, wormholeVecA, wormholeMat32);
  ball.unk114.x = wormholeVecA[0];
  ball.unk114.y = wormholeVecA[1];
  ball.unk114.z = wormholeVecA[2];
  updateBallTransform(ball);
  ball.prevTransform.set(ball.transform);
  ball.wormholeTransform = wormholeTf;
}
function checkBallEnteredWormhole(ball, stageRuntime) {
  const stage = stageRuntime.stage;
  const animGroups = stageRuntime.animGroups;
  const physBall = ball.physBall;
  initPhysBallFromBall(ball, physBall, stage.format);
  for (let animGroupId = 0; animGroupId < stage.animGroupCount; animGroupId += 1) {
    const stageAg = stage.animGroups[animGroupId];
    const stageWormholes = animGroupId === 0 ? stage.wormholes ?? [] : [];
    const wormholes = stageWormholes.length ? (stageAg.wormholes ?? []).concat(stageWormholes) : stageAg.wormholes ?? [];
    if (!wormholes.length) {
      continue;
    }
    if (animGroupId !== physBall.animGroupId) {
      tfPhysballToAnimGroupSpace(physBall, animGroupId, animGroups);
    }
    for (const wormhole of wormholes) {
      const trigger = {
        pos: { x: 0, y: WORMHOLE_TRIGGER_OFFSET_Y, z: 0 },
        rot: { x: wormhole.rot.x, y: wormhole.rot.y, z: wormhole.rot.z },
        width: WORMHOLE_TRIGGER_WIDTH,
        height: WORMHOLE_TRIGGER_HEIGHT
      };
      stack3.fromTranslate(wormhole.pos);
      stack3.rotateZ(wormhole.rot.z);
      stack3.rotateY(wormhole.rot.y);
      stack3.rotateX(wormhole.rot.x);
      stack3.tfPoint(trigger.pos, trigger.pos);
      if (testLineIntersectsRect(physBall.pos, physBall.prevPos, trigger)) {
        return { wormhole };
      }
    }
  }
  if (physBall.animGroupId !== 0) {
    tfPhysballToAnimGroupSpace(physBall, 0, animGroups);
  }
  return null;
}
function checkBallEnteredGoal(ball, stageRuntime) {
  const stage = stageRuntime.stage;
  const animGroups = stageRuntime.animGroups;
  const physBall = ball.physBall;
  initPhysBallFromBall(ball, physBall, stage.format);
  let goalId = 0;
  for (let animGroupId = 0; animGroupId < stage.animGroupCount; animGroupId += 1) {
    const stageAg = stage.animGroups[animGroupId];
    if (stageAg.goalCount > 0) {
      if (animGroupId !== physBall.animGroupId) {
        tfPhysballToAnimGroupSpace(physBall, animGroupId, animGroups);
      }
      for (const goal of stageAg.goals) {
        const trigger = {
          pos: { x: 0, y: 1, z: 0 },
          rot: { x: goal.rot.x, y: goal.rot.y, z: goal.rot.z },
          width: 2,
          height: 2
        };
        stack3.fromTranslate(goal.pos);
        stack3.rotateZ(goal.rot.z);
        stack3.rotateY(goal.rot.y);
        stack3.rotateX(goal.rot.x);
        stack3.tfPoint(trigger.pos, trigger.pos);
        if (testLineIntersectsRect(physBall.pos, physBall.prevPos, trigger)) {
          return { goalId, animGroupId, goalType: goal.type };
        }
        goalId += 1;
      }
    }
  }
  return null;
}

// src/world.ts
var stack4 = new MatrixStack();
var upVec = { x: 0, y: 1, z: 0 };
var World = class {
  constructor({ maxTilt = 23 } = {}) {
    this.maxTilt = maxTilt;
    this.xrot = 0;
    this.zrot = 0;
    this.xrotPrev = 0;
    this.zrotPrev = 0;
    this.gravity = { x: 0, y: -1, z: 0 };
  }
  reset() {
    this.xrot = 0;
    this.zrot = 0;
    this.xrotPrev = 0;
    this.zrotPrev = 0;
    this.gravity.x = 0;
    this.gravity.y = -1;
    this.gravity.z = 0;
  }
  updateInput(stick, cameraRotY) {
    this.xrotPrev = this.xrot;
    this.zrotPrev = this.zrot;
    let stickX = stick.x;
    let stickY = stick.y;
    if (stickX < -1) stickX = -1;
    else if (stickX > 1) stickX = 1;
    if (stickY < -1) stickY = -1;
    else if (stickY > 1) stickY = 1;
    const maxTiltS16 = this.maxTilt * DEG_TO_S16;
    let inpXRot = stickY * maxTiltS16;
    let inpZRot = -stickX * maxTiltS16;
    inpXRot = toS16(inpXRot);
    inpZRot = toS16(inpZRot);
    stack4.fromIdentity();
    stack4.rotateY(cameraRotY);
    stack4.rotateX(inpXRot);
    stack4.rotateZ(inpZRot);
    upVec.x = 0;
    upVec.y = 1;
    upVec.z = 0;
    stack4.tfVec(upVec, upVec);
    inpXRot = atan2S16(upVec.z, upVec.y);
    inpZRot = -atan2S16(upVec.x, sqrt(sumSq2(upVec.z, upVec.y)));
    const dx = toS16(inpXRot - this.xrot);
    const dz = toS16(inpZRot - this.zrot);
    this.xrot = toS16(this.xrot + dx * 0.2);
    this.zrot = toS16(this.zrot + dz * 0.2);
    this.gravity.x = 0;
    this.gravity.y = -1;
    this.gravity.z = 0;
    stack4.fromIdentity();
    stack4.rotateX(this.xrot);
    stack4.rotateZ(this.zrot);
    stack4.rigidInvTfVec(this.gravity, this.gravity);
  }
};

// src/game.ts
var STAGE_BASE_PATH = STAGE_BASE_PATHS[GAME_SOURCES.SMB1];
var MAX_FRAME_DELTA = 5;
var BONUS_STAGE_MIN_ID = 91;
var BONUS_STAGE_MAX_ID = 95;
var BANANA_SINGLE_RADIUS = 0.5;
var BANANA_BUNCH_RADIUS = 0.75;
var BANANA_SINGLE_VALUE = 1;
var BANANA_BUNCH_VALUE = 10;
var BANANA_SINGLE_POINTS = 100;
var BANANA_BUNCH_POINTS = 1e3;
var BANANA_STATE_HOLDING2 = 7;
var BANANA_HOLD_FRAMES2 = 30;
var ITEM_FLAG_COLLIDABLE = 1 << 1;
var GOAL_SEQUENCE_FRAMES = 360;
var BONUS_CLEAR_SEQUENCE_FRAMES = 180;
var GOAL_SKIP_TOTAL_FRAMES = 210;
var RINGOUT_TOTAL_FRAMES = 270;
var RINGOUT_BONUS_CUTOFF_FRAMES = 260;
var RINGOUT_BONUS_REMAINING_FRAMES = 110;
var RINGOUT_SKIP_DELAY_FRAMES = 60;
var RINGOUT_STATUS_TEXT = "Fall out!";
var TIMEOVER_TOTAL_FRAMES = 120;
var TIMEOVER_STATUS_TEXT = "Time over!";
var HURRY_UP_FRAMES = 11 * 60;
var COUNTDOWN_START_FRAMES = 10 * 60;
var DEFAULT_LIVES = 3;
var SPEED_MPH_SCALE = 134.21985;
var SPEED_BAR_MAX_MPH = 70;
var fallOutStack = new MatrixStack();
var fallOutLocal = { x: 0, y: 0, z: 0 };
var nowMs = () => typeof performance !== "undefined" ? performance.now() : Date.now();
function lerp2(a, b, t) {
  return a + (b - a) * t;
}
function lerpS16(a, b, t) {
  const delta = toS16(b - a);
  return toS16(a + delta * t);
}
function nlerpQuat(out, a, b, t) {
  let bx = b.x;
  let by = b.y;
  let bz = b.z;
  let bw = b.w;
  const dot = a.x * bx + a.y * by + a.z * bz + a.w * bw;
  if (dot < 0) {
    bx = -bx;
    by = -by;
    bz = -bz;
    bw = -bw;
  }
  out.x = a.x + (bx - a.x) * t;
  out.y = a.y + (by - a.y) * t;
  out.z = a.z + (bz - a.z) * t;
  out.w = a.w + (bw - a.w) * t;
  const len = sqrt(out.x * out.x + out.y * out.y + out.z * out.z + out.w * out.w);
  if (len > 0) {
    out.x /= len;
    out.y /= len;
    out.z /= len;
    out.w /= len;
  }
}
function isSmb2CourseConfig(config) {
  return typeof config === "object" && config !== null && "mode" in config;
}
function isMb2wsCourseConfig(config) {
  return typeof config === "object" && config !== null && "mode" in config;
}
function formatTimer(frames) {
  const clampedFrames = Math.max(0, Math.floor(frames));
  const totalSeconds = Math.floor(clampedFrames / 60);
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = totalSeconds % 60;
  const frameRemainder = clampedFrames % 60;
  const centis = Math.floor(frameRemainder * 100 / 60);
  return `${String(minutes).padStart(2, "0")}:${String(seconds).padStart(2, "0")}.${String(centis).padStart(2, "0")}`;
}
function isBonusStageId(stageId) {
  return stageId >= BONUS_STAGE_MIN_ID && stageId <= BONUS_STAGE_MAX_ID;
}
function isBananaBunch(type) {
  return (type & 1) === 1;
}
function bananaRadiusForType(type) {
  return isBananaBunch(type) ? BANANA_BUNCH_RADIUS : BANANA_SINGLE_RADIUS;
}
function bananaValueForType(type) {
  return isBananaBunch(type) ? BANANA_BUNCH_VALUE : BANANA_SINGLE_VALUE;
}
function bananaPointValueForType(type) {
  return isBananaBunch(type) ? BANANA_BUNCH_POINTS : BANANA_SINGLE_POINTS;
}
function formatScore(value) {
  return String(Math.max(0, Math.trunc(value))).padStart(9, "0");
}
function bananaTiltFactor(banana) {
  if (!banana) {
    return 1;
  }
  if ((banana.state ?? 0) < 7 && !(banana.collected ?? false)) {
    return 1;
  }
  const timer = Math.max(0, banana.tiltTimer ?? 0);
  return Math.min(1, timer / 30);
}
function normalizeGoalType(goalType) {
  if (goalType === "G" || goalType === "R" || goalType === "B") {
    return goalType;
  }
  if (goalType === 1) {
    return "G";
  }
  if (goalType === 2) {
    return "R";
  }
  return "B";
}
function computeGoalScore(goalType, framesRemaining, timeLimitFrames) {
  const normalizedGoal = normalizeGoalType(goalType);
  const timeRemaining = Math.max(0, Math.floor(framesRemaining));
  let score = Math.floor(timeRemaining * 100 / 60);
  if (normalizedGoal === "G") {
    score += 1e4;
  } else if (normalizedGoal === "R") {
    score += 2e4;
  }
  let jumpDistance = 1;
  if (timeLimitFrames > 0 && timeRemaining > timeLimitFrames >> 1) {
    jumpDistance *= 2;
  }
  return score * jumpDistance;
}
var Game = class {
  hud;
  onReadyToResume;
  onPaused;
  onResumed;
  onStageLoaded;
  stageBasePath;
  gameSource;
  audio;
  input;
  world;
  ball;
  cameraController;
  tmpPhysBall;
  fixedStep;
  accumulator;
  running;
  paused;
  course;
  stage;
  stageRuntime;
  bananasLeft;
  score;
  lives;
  stageTimeLimitFrames;
  stageTimerFrames;
  statusText;
  loadToken;
  pendingAdvance;
  introTimerFrames;
  goalTimerFrames;
  goalSkipTimerFrames;
  goalInfo;
  introTotalFrames;
  dropFrames;
  stageAttempts;
  ringoutTimerFrames;
  ringoutSkipTimerFrames;
  timeoverTimerFrames;
  bonusClearPending;
  readyAnnouncerPlayed;
  goAnnouncerPlayed;
  goalWooshPlayed;
  hurryUpAnnouncerPlayed;
  timeOverAnnouncerPlayed;
  animGroupTransforms;
  bananaGroups;
  bananaCollectedByAnimGroup;
  renderBallState;
  renderBananas;
  renderGoalBags;
  renderGoalTapes;
  renderConfetti;
  renderEffects;
  renderJamabars;
  renderSwitches;
  renderStageTilt;
  prevCameraPose;
  cameraPose;
  interpolatedAnimGroupTransforms;
  effectDebugLastLogTime;
  loadingStage;
  simPerf;
  simTick;
  inputFeed;
  inputFeedIndex;
  inputRecord;
  fixedTickMode;
  fixedTicksPerUpdate;
  autoRecordInputs;
  inputStartTick;
  replayInputStartTick;
  replayAutoFastForward;
  constructor({
    hud,
    onReadyToResume,
    onPaused,
    onResumed,
    onStageLoaded,
    stageBasePath,
    gameSource,
    audio: audio2
  } = {}) {
    this.hud = hud ?? null;
    this.onReadyToResume = onReadyToResume;
    this.onPaused = onPaused;
    this.onResumed = onResumed;
    this.onStageLoaded = onStageLoaded;
    this.gameSource = gameSource ?? GAME_SOURCES.SMB1;
    this.stageBasePath = stageBasePath ?? STAGE_BASE_PATHS[this.gameSource];
    this.audio = audio2 ?? null;
    this.input = null;
    this.world = null;
    this.ball = null;
    this.cameraController = null;
    this.tmpPhysBall = {
      pos: { x: 0, y: 0, z: 0 },
      prevPos: { x: 0, y: 0, z: 0 },
      vel: { x: 0, y: 0, z: 0 },
      radius: 0.5,
      animGroupId: 0
    };
    this.fixedStep = 1 / 60;
    this.accumulator = 0;
    this.running = false;
    this.paused = true;
    this.course = null;
    this.stage = null;
    this.stageRuntime = null;
    this.bananasLeft = 0;
    this.score = 0;
    this.lives = DEFAULT_LIVES;
    this.stageTimeLimitFrames = DEFAULT_STAGE_TIME;
    this.stageTimerFrames = 0;
    this.statusText = "";
    this.loadToken = 0;
    this.pendingAdvance = false;
    this.introTimerFrames = 0;
    this.goalTimerFrames = 0;
    this.goalSkipTimerFrames = 0;
    this.goalInfo = null;
    this.introTotalFrames = 120;
    this.dropFrames = 24;
    this.stageAttempts = 0;
    this.ringoutTimerFrames = 0;
    this.ringoutSkipTimerFrames = 0;
    this.timeoverTimerFrames = 0;
    this.bonusClearPending = false;
    this.readyAnnouncerPlayed = false;
    this.goAnnouncerPlayed = false;
    this.goalWooshPlayed = false;
    this.hurryUpAnnouncerPlayed = false;
    this.timeOverAnnouncerPlayed = false;
    this.animGroupTransforms = null;
    this.bananaGroups = null;
    this.bananaCollectedByAnimGroup = null;
    this.renderBallState = null;
    this.renderBananas = null;
    this.renderGoalBags = null;
    this.renderGoalTapes = null;
    this.renderConfetti = null;
    this.renderEffects = null;
    this.renderJamabars = null;
    this.renderSwitches = null;
    this.renderStageTilt = null;
    this.prevCameraPose = null;
    this.cameraPose = null;
    this.interpolatedAnimGroupTransforms = null;
    this.effectDebugLastLogTime = 0;
    this.loadingStage = false;
    this.simPerf = {
      enabled: true,
      logEvery: 120,
      tickCount: 0,
      tickMs: 0,
      lastTickMs: 0
    };
    this.simTick = 0;
    this.inputFeed = null;
    this.inputFeedIndex = 0;
    this.inputRecord = null;
    this.fixedTickMode = false;
    this.fixedTicksPerUpdate = 1;
    this.autoRecordInputs = true;
    this.inputStartTick = 0;
    this.replayInputStartTick = null;
    this.replayAutoFastForward = false;
  }
  setGameSource(source) {
    this.gameSource = source;
    this.stageBasePath = STAGE_BASE_PATHS[source] ?? STAGE_BASE_PATH;
    this.audio?.stopMusic();
  }
  setInputFeed(feed) {
    this.inputFeed = feed;
    this.inputFeedIndex = 0;
  }
  setFixedTickMode(enabled, ticksPerUpdate = 1) {
    this.fixedTickMode = enabled;
    this.fixedTicksPerUpdate = Math.max(1, ticksPerUpdate | 0);
  }
  setReplayMode(enabled, useFixedTicks = true) {
    this.autoRecordInputs = !enabled;
    this.setFixedTickMode(enabled && useFixedTicks, 1);
    if (enabled) {
      this.inputRecord = null;
      this.replayInputStartTick = 0;
      this.replayAutoFastForward = true;
    } else {
      this.inputFeed = null;
      this.inputFeedIndex = 0;
      this.replayInputStartTick = null;
      this.replayAutoFastForward = false;
    }
  }
  startInputRecording() {
    this.inputRecord = [];
  }
  stopInputRecording() {
    const record = this.inputRecord;
    this.inputRecord = null;
    return record;
  }
  exportReplay(note, hashes) {
    if (!this.stage || !this.inputRecord) {
      return null;
    }
    return createReplayData(
      this.gameSource,
      this.stage.stageId,
      this.inputRecord.length,
      this.inputStartTick,
      this.inputRecord.slice(),
      hashes,
      note
    );
  }
  init() {
    this.input = new Input();
    this.world = new World();
    this.ball = createBallState();
    this.cameraController = new GameplayCamera();
    this.running = true;
  }
  ensureCameraPose() {
    if (!this.cameraController) {
      return null;
    }
    if (!this.cameraPose || !this.prevCameraPose) {
      this.cameraPose = {
        eye: { x: 0, y: 0, z: 0 },
        lookAt: { x: 0, y: 0, z: 0 },
        rotX: 0,
        rotY: 0,
        rotZ: 0
      };
      this.prevCameraPose = {
        eye: { x: 0, y: 0, z: 0 },
        lookAt: { x: 0, y: 0, z: 0 },
        rotX: 0,
        rotY: 0,
        rotZ: 0
      };
    }
    return { prev: this.prevCameraPose, curr: this.cameraPose };
  }
  captureCameraPose(target) {
    if (!this.cameraController) {
      return;
    }
    target.eye.x = this.cameraController.eye.x;
    target.eye.y = this.cameraController.eye.y;
    target.eye.z = this.cameraController.eye.z;
    target.lookAt.x = this.cameraController.lookAt.x;
    target.lookAt.y = this.cameraController.lookAt.y;
    target.lookAt.z = this.cameraController.lookAt.z;
    target.rotX = this.cameraController.rotX;
    target.rotY = this.cameraController.rotY;
    target.rotZ = this.cameraController.rotZ;
  }
  copyCameraPose(src, dst) {
    dst.eye.x = src.eye.x;
    dst.eye.y = src.eye.y;
    dst.eye.z = src.eye.z;
    dst.lookAt.x = src.lookAt.x;
    dst.lookAt.y = src.lookAt.y;
    dst.lookAt.z = src.lookAt.z;
    dst.rotX = src.rotX;
    dst.rotY = src.rotY;
    dst.rotZ = src.rotZ;
  }
  syncCameraPose() {
    const poses = this.ensureCameraPose();
    if (!poses) {
      return;
    }
    this.captureCameraPose(poses.curr);
    this.copyCameraPose(poses.curr, poses.prev);
  }
  getInterpolationAlpha() {
    if (this.paused) {
      return 1;
    }
    if (this.fixedStep <= 0) {
      return 1;
    }
    return Math.min(1, Math.max(0, this.accumulator / this.fixedStep));
  }
  async start(difficulty) {
    this.statusText = "Loading course...";
    this.updateHud();
    try {
      if (typeof difficulty === "string") {
        this.course = new Course(difficulty);
      } else if (isSmb2CourseConfig(difficulty) && this.gameSource === GAME_SOURCES.SMB2) {
        this.course = new Smb2Course(difficulty);
      } else if (isMb2wsCourseConfig(difficulty) && this.gameSource === GAME_SOURCES.MB2WS) {
        this.course = new Mb2wsCourse(difficulty);
      } else {
        this.course = new Course(difficulty.difficulty, difficulty.stageIndex);
      }
    } catch (err2) {
      this.statusText = "Missing course data.";
      console.error(err2);
      this.updateHud();
      return;
    }
    this.score = 0;
    this.lives = DEFAULT_LIVES;
    await this.loadStage(this.course.currentStageId);
    this.paused = false;
    this.onReadyToResume?.();
  }
  pause() {
    if (this.paused) {
      return;
    }
    this.paused = true;
    this.onPaused?.();
  }
  resume() {
    if (!this.paused) {
      return;
    }
    this.paused = false;
    void this.audio?.resume();
    this.onResumed?.();
  }
  getCurrentStageId() {
    return this.course?.currentStageId ?? null;
  }
  getCameraPose(alpha = 1) {
    if (!this.cameraController) {
      return null;
    }
    const poses = this.ensureCameraPose();
    if (!poses || alpha >= 1) {
      return {
        eye: this.cameraController.eye,
        lookAt: this.cameraController.lookAt,
        rotX: this.cameraController.rotX,
        rotY: this.cameraController.rotY,
        rotZ: this.cameraController.rotZ
      };
    }
    const { prev, curr } = poses;
    return {
      eye: {
        x: lerp2(prev.eye.x, curr.eye.x, alpha),
        y: lerp2(prev.eye.y, curr.eye.y, alpha),
        z: lerp2(prev.eye.z, curr.eye.z, alpha)
      },
      lookAt: {
        x: lerp2(prev.lookAt.x, curr.lookAt.x, alpha),
        y: lerp2(prev.lookAt.y, curr.lookAt.y, alpha),
        z: lerp2(prev.lookAt.z, curr.lookAt.z, alpha)
      },
      rotX: lerpS16(prev.rotX, curr.rotX, alpha),
      rotY: lerpS16(prev.rotY, curr.rotY, alpha),
      rotZ: lerpS16(prev.rotZ, curr.rotZ, alpha)
    };
  }
  getStageTimerFrames(alpha = 1) {
    return this.getAnimTimeFrames(alpha);
  }
  getAnimTimeFrames(alpha = 1) {
    const timerFrames = this.stageRuntime?.timerFrames ?? null;
    if (timerFrames === null) {
      return null;
    }
    if (alpha >= 1 || this.accumulator <= 0) {
      return timerFrames;
    }
    const prev = Math.max(0, timerFrames - 1);
    return prev + alpha;
  }
  getAnimGroupTransforms(alpha = 1) {
    if (!this.stageRuntime) {
      return null;
    }
    if (alpha >= 1) {
      return this.animGroupTransforms;
    }
    if (!this.interpolatedAnimGroupTransforms || this.interpolatedAnimGroupTransforms.length !== this.stageRuntime.animGroups.length) {
      this.interpolatedAnimGroupTransforms = new Array(this.stageRuntime.animGroups.length);
      for (let i = 0; i < this.stageRuntime.animGroups.length; i += 1) {
        this.interpolatedAnimGroupTransforms[i] = new Float32Array(12);
      }
    }
    for (let i = 0; i < this.stageRuntime.animGroups.length; i += 1) {
      const group = this.stageRuntime.animGroups[i];
      const out = this.interpolatedAnimGroupTransforms[i];
      const prev = group.prevTransform ?? group.transform;
      const curr = group.transform;
      for (let j = 0; j < 12; j += 1) {
        out[j] = prev[j] + (curr[j] - prev[j]) * alpha;
      }
    }
    return this.interpolatedAnimGroupTransforms;
  }
  getBallRenderState(alpha = 1) {
    if (!this.ball) {
      return null;
    }
    const useInterpolation = alpha < 1;
    if (!this.renderBallState) {
      this.renderBallState = {
        pos: { x: this.ball.pos.x, y: this.ball.pos.y, z: this.ball.pos.z },
        orientation: {
          x: this.ball.orientation.x,
          y: this.ball.orientation.y,
          z: this.ball.orientation.z,
          w: this.ball.orientation.w
        },
        radius: this.ball.currRadius,
        visible: (this.ball.flags & BALL_FLAGS.INVISIBLE) === 0
      };
    }
    const renderState = this.renderBallState;
    if (useInterpolation) {
      renderState.pos.x = lerp2(this.ball.prevPos.x, this.ball.pos.x, alpha);
      renderState.pos.y = lerp2(this.ball.prevPos.y, this.ball.pos.y, alpha);
      renderState.pos.z = lerp2(this.ball.prevPos.z, this.ball.pos.z, alpha);
      nlerpQuat(renderState.orientation, this.ball.prevOrientation, this.ball.orientation, alpha);
    } else {
      renderState.pos.x = this.ball.pos.x;
      renderState.pos.y = this.ball.pos.y;
      renderState.pos.z = this.ball.pos.z;
      renderState.orientation.x = this.ball.orientation.x;
      renderState.orientation.y = this.ball.orientation.y;
      renderState.orientation.z = this.ball.orientation.z;
      renderState.orientation.w = this.ball.orientation.w;
    }
    renderState.radius = this.ball.currRadius;
    renderState.visible = (this.ball.flags & BALL_FLAGS.INVISIBLE) === 0;
    return this.renderBallState;
  }
  getGoalBagRenderState(alpha = 1) {
    if (!this.stageRuntime) {
      return null;
    }
    const bags = this.stageRuntime.goalBags;
    const useInterpolation = alpha < 1;
    if (!this.renderGoalBags || this.renderGoalBags.length !== bags.length) {
      this.renderGoalBags = new Array(bags.length);
      for (let i = 0; i < bags.length; i += 1) {
        const bag = bags[i];
        this.renderGoalBags[i] = {
          animGroupId: bag.animGroupId,
          rotX: bag.rotX,
          rotY: bag.rotY,
          rotZ: bag.rotZ,
          openness: bag.openness,
          uSomePos: { x: bag.uSomePos.x, y: bag.uSomePos.y, z: bag.uSomePos.z }
        };
      }
    }
    for (let i = 0; i < bags.length; i += 1) {
      const bag = bags[i];
      const renderBag = this.renderGoalBags[i];
      renderBag.animGroupId = bag.animGroupId;
      if (useInterpolation) {
        renderBag.rotX = lerpS16(bag.prevRotX ?? bag.rotX, bag.rotX, alpha);
        renderBag.rotY = lerpS16(bag.prevRotY ?? bag.rotY, bag.rotY, alpha);
        renderBag.rotZ = lerpS16(bag.prevRotZ ?? bag.rotZ, bag.rotZ, alpha);
        renderBag.openness = lerp2(bag.prevOpenness ?? bag.openness, bag.openness, alpha);
      } else {
        renderBag.rotX = bag.rotX;
        renderBag.rotY = bag.rotY;
        renderBag.rotZ = bag.rotZ;
        renderBag.openness = bag.openness;
      }
      renderBag.uSomePos.x = bag.uSomePos.x;
      renderBag.uSomePos.y = bag.uSomePos.y;
      renderBag.uSomePos.z = bag.uSomePos.z;
    }
    return this.renderGoalBags;
  }
  getGoalTapeRenderState(alpha = 1) {
    if (!this.stageRuntime) {
      return null;
    }
    const tapes = this.stageRuntime.goalTapes;
    const useInterpolation = alpha < 1;
    if (!this.renderGoalTapes || this.renderGoalTapes.length !== tapes.length) {
      this.renderGoalTapes = new Array(tapes.length);
      for (let i = 0; i < tapes.length; i += 1) {
        const tape = tapes[i];
        const points = new Array(tape.points.length);
        for (let j = 0; j < tape.points.length; j += 1) {
          const point = tape.points[j];
          points[j] = {
            pos: { x: point.pos.x, y: point.pos.y, z: point.pos.z },
            normal: { x: point.normal.x, y: point.normal.y, z: point.normal.z },
            t: point.t,
            flags: point.flags
          };
        }
        this.renderGoalTapes[i] = {
          animGroupId: tape.animGroupId,
          pos: { x: tape.goal.pos.x, y: tape.goal.pos.y, z: tape.goal.pos.z },
          rot: { x: tape.goal.rot.x, y: tape.goal.rot.y, z: tape.goal.rot.z },
          points,
          index: i
        };
      }
    }
    for (let i = 0; i < tapes.length; i += 1) {
      const tape = tapes[i];
      const renderTape = this.renderGoalTapes[i];
      renderTape.animGroupId = tape.animGroupId;
      renderTape.index = i;
      renderTape.pos.x = tape.goal.pos.x;
      renderTape.pos.y = tape.goal.pos.y;
      renderTape.pos.z = tape.goal.pos.z;
      renderTape.rot.x = tape.goal.rot.x;
      renderTape.rot.y = tape.goal.rot.y;
      renderTape.rot.z = tape.goal.rot.z;
      for (let j = 0; j < tape.points.length; j += 1) {
        const point = tape.points[j];
        const renderPoint = renderTape.points[j];
        renderPoint.t = point.t;
        renderPoint.flags = point.flags;
        if (useInterpolation) {
          renderPoint.pos.x = lerp2(point.prevPos?.x ?? point.pos.x, point.pos.x, alpha);
          renderPoint.pos.y = lerp2(point.prevPos?.y ?? point.pos.y, point.pos.y, alpha);
          renderPoint.pos.z = lerp2(point.prevPos?.z ?? point.pos.z, point.pos.z, alpha);
          renderPoint.normal.x = lerp2(point.prevNormal?.x ?? point.normal.x, point.normal.x, alpha);
          renderPoint.normal.y = lerp2(point.prevNormal?.y ?? point.normal.y, point.normal.y, alpha);
          renderPoint.normal.z = lerp2(point.prevNormal?.z ?? point.normal.z, point.normal.z, alpha);
          const normalLen = sqrt(
            renderPoint.normal.x * renderPoint.normal.x + renderPoint.normal.y * renderPoint.normal.y + renderPoint.normal.z * renderPoint.normal.z
          );
          if (normalLen > 0) {
            renderPoint.normal.x /= normalLen;
            renderPoint.normal.y /= normalLen;
            renderPoint.normal.z /= normalLen;
          }
        } else {
          renderPoint.pos.x = point.pos.x;
          renderPoint.pos.y = point.pos.y;
          renderPoint.pos.z = point.pos.z;
          renderPoint.normal.x = point.normal.x;
          renderPoint.normal.y = point.normal.y;
          renderPoint.normal.z = point.normal.z;
        }
      }
    }
    return this.renderGoalTapes;
  }
  getConfettiRenderState(alpha = 1) {
    if (!this.stageRuntime) {
      return null;
    }
    const confetti = this.stageRuntime.confetti;
    const useInterpolation = alpha < 1;
    if (!this.renderConfetti) {
      this.renderConfetti = [];
    }
    if (this.renderConfetti.length < confetti.length) {
      for (let i = this.renderConfetti.length; i < confetti.length; i += 1) {
        const frag = confetti[i];
        this.renderConfetti.push({
          modelIndex: frag.modelIndex,
          pos: { x: frag.pos.x, y: frag.pos.y, z: frag.pos.z },
          rotX: frag.rotX,
          rotY: frag.rotY,
          rotZ: frag.rotZ,
          scale: frag.scale
        });
      }
    }
    this.renderConfetti.length = confetti.length;
    for (let i = 0; i < confetti.length; i += 1) {
      const frag = confetti[i];
      const renderFrag = this.renderConfetti[i];
      renderFrag.modelIndex = frag.modelIndex;
      if (useInterpolation) {
        renderFrag.pos.x = lerp2(frag.prevPos?.x ?? frag.pos.x, frag.pos.x, alpha);
        renderFrag.pos.y = lerp2(frag.prevPos?.y ?? frag.pos.y, frag.pos.y, alpha);
        renderFrag.pos.z = lerp2(frag.prevPos?.z ?? frag.pos.z, frag.pos.z, alpha);
        renderFrag.rotX = lerpS16(frag.prevRotX ?? frag.rotX, frag.rotX, alpha);
        renderFrag.rotY = lerpS16(frag.prevRotY ?? frag.rotY, frag.rotY, alpha);
        renderFrag.rotZ = lerpS16(frag.prevRotZ ?? frag.rotZ, frag.rotZ, alpha);
      } else {
        renderFrag.pos.x = frag.pos.x;
        renderFrag.pos.y = frag.pos.y;
        renderFrag.pos.z = frag.pos.z;
        renderFrag.rotX = frag.rotX;
        renderFrag.rotY = frag.rotY;
        renderFrag.rotZ = frag.rotZ;
      }
      renderFrag.scale = frag.scale;
    }
    return this.renderConfetti;
  }
  getEffectRenderState(alpha = 1) {
    if (!this.stageRuntime) {
      return null;
    }
    const effects = this.stageRuntime.effects;
    if (!effects || effects.length === 0) {
      this.renderEffects = null;
      return null;
    }
    let nanCount = 0;
    let nanSample = null;
    if (!this.renderEffects) {
      this.renderEffects = [];
    }
    let outIdx = 0;
    for (const effect of effects) {
      if (!Number.isFinite(effect.pos.x) || !Number.isFinite(effect.pos.y) || !Number.isFinite(effect.pos.z) || !Number.isFinite(effect.prevPos.x) || !Number.isFinite(effect.prevPos.y) || !Number.isFinite(effect.prevPos.z)) {
        nanCount += 1;
        if (!nanSample) {
          nanSample = {
            kind: effect.kind,
            pos: { x: effect.pos.x, y: effect.pos.y, z: effect.pos.z },
            prevPos: { x: effect.prevPos.x, y: effect.prevPos.y, z: effect.prevPos.z }
          };
        }
      }
      const pos = {
        x: effect.prevPos.x + (effect.pos.x - effect.prevPos.x) * alpha,
        y: effect.prevPos.y + (effect.pos.y - effect.prevPos.y) * alpha,
        z: effect.prevPos.z + (effect.pos.z - effect.prevPos.z) * alpha
      };
      if (!Number.isFinite(pos.x) || !Number.isFinite(pos.y) || !Number.isFinite(pos.z)) {
        const now = Date.now();
        if (now - this.effectDebugLastLogTime > 1e3) {
          console.warn(
            "[effects] bad-pos kind=%s alpha=%s pos=%s prev=%s curr=%s",
            effect.kind,
            alpha,
            `${pos.x},${pos.y},${pos.z}`,
            `${effect.prevPos.x},${effect.prevPos.y},${effect.prevPos.z}`,
            `${effect.pos.x},${effect.pos.y},${effect.pos.z}`
          );
          this.effectDebugLastLogTime = now;
        }
        continue;
      }
      if (effect.kind === "coli") {
        this.renderEffects[outIdx++] = {
          kind: "streak",
          id: effect.id,
          pos,
          prevPos: { x: effect.prevPos.x, y: effect.prevPos.y, z: effect.prevPos.z },
          glowPos: effect.hasGround ? { x: effect.glowPos.x, y: effect.glowPos.y, z: effect.glowPos.z } : void 0,
          glowRotX: effect.hasGround ? effect.glowRotX : void 0,
          glowRotY: effect.hasGround ? effect.glowRotY : void 0,
          glowDist: effect.hasGround ? effect.glowDist : void 0,
          scale: effect.scale,
          alpha: effect.alpha,
          lifeRatio: effect.life / Math.max(1, effect.life + effect.age),
          colorR: effect.colorR,
          colorG: effect.colorG,
          colorB: effect.colorB
        };
      } else if (effect.kind === "colistar") {
        const rotX = lerpS16(effect.prevRotX, effect.rotX, alpha);
        const rotY = lerpS16(effect.prevRotY, effect.rotY, alpha);
        const rotZ = lerpS16(effect.prevRotZ, effect.rotZ, alpha);
        this.renderEffects[outIdx++] = {
          kind: "streak",
          id: effect.id,
          pos,
          prevPos: { x: effect.prevPos.x, y: effect.prevPos.y, z: effect.prevPos.z },
          scale: effect.scale * 0.6,
          alpha: effect.alpha,
          lifeRatio: effect.life / Math.max(1, effect.life + effect.age),
          colorR: effect.colorR,
          colorG: effect.colorG,
          colorB: effect.colorB
        };
        this.renderEffects[outIdx++] = {
          kind: "star",
          id: effect.id,
          pos,
          rotX,
          rotY,
          rotZ,
          glowPos: effect.hasGround ? { x: effect.glowPos.x, y: effect.glowPos.y, z: effect.glowPos.z } : void 0,
          glowRotX: effect.hasGround ? effect.glowRotX : void 0,
          glowRotY: effect.hasGround ? effect.glowRotY : void 0,
          glowDist: effect.hasGround ? effect.glowDist : void 0,
          scale: effect.scale,
          alpha: effect.alpha,
          colorR: effect.colorR,
          colorG: effect.colorG,
          colorB: effect.colorB
        };
      } else if (effect.kind === "coliflash") {
        this.renderEffects[outIdx++] = {
          kind: "flash",
          id: effect.id,
          pos,
          rotX: effect.rotX,
          rotY: effect.rotY,
          normal: { x: effect.surfaceNormal.x, y: effect.surfaceNormal.y, z: effect.surfaceNormal.z },
          glowPos: effect.hasGround ? { x: effect.glowPos.x, y: effect.glowPos.y, z: effect.glowPos.z } : void 0,
          glowRotX: effect.hasGround ? effect.glowRotX : void 0,
          glowRotY: effect.hasGround ? effect.glowRotY : void 0,
          glowDist: effect.hasGround ? effect.glowDist : void 0,
          scale: effect.scale,
          alpha: effect.alpha
        };
      } else if (effect.kind === "levitate") {
        this.renderEffects[outIdx++] = {
          kind: "sparkle",
          id: effect.id,
          pos,
          rotX: effect.rotX,
          rotY: effect.rotY,
          rotZ: effect.rotZ,
          scale: effect.scale,
          alpha: effect.alpha
        };
      }
    }
    this.renderEffects.length = outIdx;
    if (nanCount > 0) {
      const now = Date.now();
      if (now - this.effectDebugLastLogTime > 1e3) {
        console.log(
          "[effects] nan=%d/%d sample=%s",
          nanCount,
          effects.length,
          nanSample ? `${nanSample.kind} pos=${nanSample.pos.x},${nanSample.pos.y},${nanSample.pos.z} prev=${nanSample.prevPos.x},${nanSample.prevPos.y},${nanSample.prevPos.z}` : "n/a"
        );
        this.effectDebugLastLogTime = now;
      }
    }
    return this.renderEffects;
  }
  getSwitchRenderState(alpha = 1) {
    if (!this.stageRuntime) {
      return null;
    }
    const switches = this.stageRuntime.switches;
    const useInterpolation = alpha < 1;
    if (!this.renderSwitches || this.renderSwitches.length !== switches.length) {
      this.renderSwitches = new Array(switches.length);
      for (let i = 0; i < switches.length; i += 1) {
        const stageSwitch = switches[i];
        this.renderSwitches[i] = {
          animGroupId: stageSwitch.animGroupIndex ?? 0,
          pos: { x: stageSwitch.pos.x, y: stageSwitch.pos.y, z: stageSwitch.pos.z },
          rotX: stageSwitch.rot.x,
          rotY: stageSwitch.rot.y,
          rotZ: stageSwitch.rot.z,
          type: stageSwitch.type & 7
        };
      }
      return this.renderSwitches;
    }
    for (let i = 0; i < switches.length; i += 1) {
      const stageSwitch = switches[i];
      const renderSwitch = this.renderSwitches[i];
      renderSwitch.animGroupId = stageSwitch.animGroupIndex ?? 0;
      if (useInterpolation) {
        renderSwitch.pos.x = lerp2(stageSwitch.prevPos?.x ?? stageSwitch.pos.x, stageSwitch.pos.x, alpha);
        renderSwitch.pos.y = lerp2(stageSwitch.prevPos?.y ?? stageSwitch.pos.y, stageSwitch.pos.y, alpha);
        renderSwitch.pos.z = lerp2(stageSwitch.prevPos?.z ?? stageSwitch.pos.z, stageSwitch.pos.z, alpha);
      } else {
        renderSwitch.pos.x = stageSwitch.pos.x;
        renderSwitch.pos.y = stageSwitch.pos.y;
        renderSwitch.pos.z = stageSwitch.pos.z;
      }
      renderSwitch.rotX = stageSwitch.rot.x;
      renderSwitch.rotY = stageSwitch.rot.y;
      renderSwitch.rotZ = stageSwitch.rot.z;
      renderSwitch.type = stageSwitch.type & 7;
    }
    return this.renderSwitches;
  }
  getJamabarRenderState(alpha = 1) {
    if (!this.stageRuntime) {
      return null;
    }
    const jamabarGroups = this.stageRuntime.jamabars;
    const useInterpolation = alpha < 1;
    let totalCount = 0;
    for (let i = 0; i < jamabarGroups.length; i += 1) {
      totalCount += jamabarGroups[i].length;
    }
    if (!this.renderJamabars || this.renderJamabars.length !== totalCount) {
      this.renderJamabars = new Array(totalCount);
      let initIdx = 0;
      for (let i = 0; i < jamabarGroups.length; i += 1) {
        const jamabars = jamabarGroups[i];
        for (let j = 0; j < jamabars.length; j += 1) {
          const jamabar = jamabars[j];
          this.renderJamabars[initIdx] = {
            animGroupId: jamabar.animGroupId ?? i,
            pos: { x: jamabar.pos.x, y: jamabar.pos.y, z: jamabar.pos.z },
            rot: { x: jamabar.rot.x, y: jamabar.rot.y, z: jamabar.rot.z },
            scale: { x: jamabar.scale.x, y: jamabar.scale.y, z: jamabar.scale.z }
          };
          initIdx += 1;
        }
      }
    }
    let idx = 0;
    for (let i = 0; i < jamabarGroups.length; i += 1) {
      const jamabars = jamabarGroups[i];
      for (let j = 0; j < jamabars.length; j += 1) {
        const jamabar = jamabars[j];
        const renderJamabar = this.renderJamabars[idx];
        renderJamabar.animGroupId = jamabar.animGroupId ?? i;
        if (useInterpolation) {
          renderJamabar.pos.x = lerp2(jamabar.prevPos.x, jamabar.pos.x, alpha);
          renderJamabar.pos.y = lerp2(jamabar.prevPos.y, jamabar.pos.y, alpha);
          renderJamabar.pos.z = lerp2(jamabar.prevPos.z, jamabar.pos.z, alpha);
        } else {
          renderJamabar.pos.x = jamabar.pos.x;
          renderJamabar.pos.y = jamabar.pos.y;
          renderJamabar.pos.z = jamabar.pos.z;
        }
        renderJamabar.rot.x = jamabar.rot.x;
        renderJamabar.rot.y = jamabar.rot.y;
        renderJamabar.rot.z = jamabar.rot.z;
        renderJamabar.scale.x = jamabar.scale.x;
        renderJamabar.scale.y = jamabar.scale.y;
        renderJamabar.scale.z = jamabar.scale.z;
        idx += 1;
      }
    }
    this.renderJamabars.length = totalCount;
    return this.renderJamabars;
  }
  getStageTiltRenderState(alpha = 1) {
    if (!this.world) {
      return null;
    }
    const useInterpolation = alpha < 1;
    const xrot = useInterpolation ? lerpS16(this.world.xrotPrev, this.world.xrot, alpha) : this.world.xrot;
    const zrot = useInterpolation ? lerpS16(this.world.zrotPrev, this.world.zrot, alpha) : this.world.zrot;
    if (!this.renderStageTilt) {
      this.renderStageTilt = {
        xrot,
        zrot
      };
    } else {
      this.renderStageTilt.xrot = xrot;
      this.renderStageTilt.zrot = zrot;
    }
    return this.renderStageTilt;
  }
  getBananaStateRefsByAnimGroup() {
    if (!this.stageRuntime || !this.stage || !this.bananaGroups || !this.bananaCollectedByAnimGroup) {
      return null;
    }
    for (let i = 0; i < this.bananaGroups.length; i += 1) {
      const group = this.bananaGroups[i];
      const collected = this.bananaCollectedByAnimGroup[i];
      for (let j = 0; j < group.length; j += 1) {
        collected[j] = group[j].collected;
      }
    }
    return this.bananaCollectedByAnimGroup;
  }
  getBananaRenderState(alpha = 1) {
    if (!this.stageRuntime) {
      return null;
    }
    const bananas = this.stageRuntime.bananas;
    const useInterpolation = alpha < 1;
    if (!this.renderBananas || this.renderBananas.length !== bananas.length) {
      this.renderBananas = new Array(bananas.length);
      for (let i = 0; i < bananas.length; i += 1) {
        const banana = bananas[i];
        this.renderBananas[i] = {
          animGroupId: banana.animGroupId,
          pos: { x: banana.localPos.x, y: banana.localPos.y, z: banana.localPos.z },
          rotX: banana.rotX,
          rotY: banana.rotY,
          rotZ: banana.rotZ,
          scale: banana.scale,
          tiltFactor: bananaTiltFactor(banana),
          type: banana.type,
          visible: banana.state !== 0
        };
      }
    }
    for (let i = 0; i < bananas.length; i += 1) {
      const banana = bananas[i];
      const renderBanana = this.renderBananas[i];
      renderBanana.animGroupId = banana.animGroupId;
      renderBanana.type = banana.type;
      renderBanana.visible = banana.state !== 0;
      renderBanana.tiltFactor = bananaTiltFactor(banana);
      if (useInterpolation) {
        renderBanana.pos.x = lerp2(banana.prevLocalPos.x, banana.localPos.x, alpha);
        renderBanana.pos.y = lerp2(banana.prevLocalPos.y, banana.localPos.y, alpha);
        renderBanana.pos.z = lerp2(banana.prevLocalPos.z, banana.localPos.z, alpha);
        renderBanana.rotX = lerpS16(banana.prevRotX ?? banana.rotX, banana.rotX, alpha);
        renderBanana.rotY = lerpS16(banana.prevRotY ?? banana.rotY, banana.rotY, alpha);
        renderBanana.rotZ = lerpS16(banana.prevRotZ ?? banana.rotZ, banana.rotZ, alpha);
        renderBanana.scale = lerp2(banana.prevScale ?? banana.scale, banana.scale, alpha);
      } else {
        renderBanana.pos.x = banana.localPos.x;
        renderBanana.pos.y = banana.localPos.y;
        renderBanana.pos.z = banana.localPos.z;
        renderBanana.rotX = banana.rotX;
        renderBanana.rotY = banana.rotY;
        renderBanana.rotZ = banana.rotZ;
        renderBanana.scale = banana.scale;
      }
    }
    return this.renderBananas;
  }
  async loadStage(stageId) {
    const loadToken = ++this.loadToken;
    const isRestart = this.stage?.stageId === stageId;
    this.loadingStage = true;
    this.accumulator = 0;
    this.input?.clearPressed();
    this.statusText = `Loading stage ${String(stageId).padStart(3, "0")}...`;
    this.updateHud();
    try {
      const stage = await loadStageDef(stageId, this.stageBasePath, this.gameSource);
      if (loadToken !== this.loadToken) {
        return;
      }
      try {
        const anchorY = await loadGoalTapeAnchorY(this.stageBasePath, this.gameSource);
        if (anchorY !== null) {
          stage.goalTapeAnchorY = anchorY;
        }
      } catch (err2) {
        console.warn("Failed to load goal tape model origin.", err2);
      }
      this.stage = stage;
      this.stageAttempts = isRestart ? this.stageAttempts + 1 : 1;
      this.stageRuntime = new StageRuntime(stage);
      this.simTick = 0;
      this.inputFeedIndex = 0;
      this.inputStartTick = 0;
      this.animGroupTransforms = this.stageRuntime.animGroups.map((group) => group.transform);
      this.interpolatedAnimGroupTransforms = null;
      this.bananaGroups = new Array(this.stage.animGroupCount);
      this.bananaCollectedByAnimGroup = new Array(this.stage.animGroupCount);
      for (let i = 0; i < this.stage.animGroupCount; i += 1) {
        this.bananaGroups[i] = [];
        this.bananaCollectedByAnimGroup[i] = [];
      }
      for (const banana of this.stageRuntime.bananas) {
        this.bananaGroups[banana.animGroupId].push(banana);
      }
      for (let i = 0; i < this.bananaGroups.length; i += 1) {
        this.bananaCollectedByAnimGroup[i].length = this.bananaGroups[i].length;
      }
      this.stageRuntime.resetTimer();
      this.stageRuntime.updateAnimGroups(0, 0);
      this.stageRuntime.computeBoundSphere();
      try {
        const modelData = await loadStageModelBounds(
          stageId,
          this.stageBasePath,
          this.stage?.format === "smb2" ? this.stage.stageModelNames : null
        );
        if (modelData) {
          this.stageRuntime.boundSphere = modelData.boundSphere;
          if (this.stageRuntime.format === "smb2") {
            this.stageRuntime.applySwitchModelBounds(modelData.switchModelBounds);
          }
        }
      } catch (err2) {
        console.warn("Failed to load stage model bounds.", err2);
      }
      this.bananasLeft = this.stageRuntime.bananas.length;
      this.stageTimerFrames = 0;
      this.stageTimeLimitFrames = this.course?.getTimeLimitFrames() ?? DEFAULT_STAGE_TIME;
      this.timeoverTimerFrames = 0;
      this.hurryUpAnnouncerPlayed = false;
      this.timeOverAnnouncerPlayed = false;
      this.pendingAdvance = false;
      if (this.autoRecordInputs) {
        this.startInputRecording();
      }
      this.resetBallForStage({ withIntro: true });
      if (this.replayInputStartTick !== null) {
        const startTick = Math.max(0, this.replayInputStartTick);
        this.introTotalFrames = startTick;
        this.introTimerFrames = startTick;
        if (this.ball) {
          this.cameraController?.initForStage(this.ball, this.ball.startRotY, this.stageRuntime);
        }
        this.replayAutoFastForward = true;
        this.setFixedTickMode(true, 1);
      }
      void this.audio?.playMusicForStage(stageId, this.gameSource);
      this.statusText = "";
      this.updateHud();
      this.onStageLoaded?.(stageId);
    } catch (err2) {
      this.statusText = `Failed to load stage ${stageId}.`;
      console.error(err2);
      this.updateHud();
    } finally {
      if (loadToken === this.loadToken) {
        this.loadingStage = false;
        this.input?.clearPressed();
      }
    }
  }
  resetBallForStage({ withIntro = false } = {}) {
    if (!this.ball || !this.stage) {
      return;
    }
    if (this.ball.audio) {
      this.ball.audio.lastImpactFrame = -9999;
      this.ball.audio.rollingVol = 0;
      this.ball.audio.rollingPitch = 0;
      this.ball.audio.bumperHit = false;
    }
    this.world?.reset();
    const start = this.stage.startPositions?.[0];
    const startPos = start?.pos ?? { x: 0, y: 0, z: 0 };
    const startRotY = start?.rot?.y ?? 0;
    if (withIntro) {
      const isFirstAttempt = this.stageAttempts <= 1;
      const introFrames = isFirstAttempt ? 360 : 120;
      const flyInFrames = isFirstAttempt ? 350 : 90;
      initBallForStage(this.ball, startPos, startRotY);
      this.ball.bananas = 0;
      this.introTotalFrames = introFrames;
      this.introTimerFrames = introFrames;
      this.goalTimerFrames = 0;
      this.goalSkipTimerFrames = 0;
      this.goalInfo = null;
      this.bonusClearPending = false;
      this.readyAnnouncerPlayed = false;
      this.goAnnouncerPlayed = false;
      this.goalWooshPlayed = false;
      if (!isFirstAttempt) {
        void this.audio?.playAnnouncerReady();
        this.readyAnnouncerPlayed = true;
      }
      this.cameraController?.initReady(this.stageRuntime, startRotY, startPos, flyInFrames);
    } else {
      resetBall(this.ball, startPos, startRotY);
      this.introTimerFrames = 0;
      this.goalTimerFrames = 0;
      this.goalSkipTimerFrames = 0;
      this.goalInfo = null;
      this.bonusClearPending = false;
      this.readyAnnouncerPlayed = false;
      this.goAnnouncerPlayed = false;
      this.goalWooshPlayed = false;
      this.cameraController?.initForStage(this.ball, startRotY, this.stageRuntime);
    }
    this.syncCameraPose();
    this.ringoutTimerFrames = 0;
    this.ringoutSkipTimerFrames = 0;
    this.timeoverTimerFrames = 0;
    this.hurryUpAnnouncerPlayed = false;
    this.timeOverAnnouncerPlayed = false;
    this.accumulator = 0;
  }
  beginFalloutSequence(isBonusStage2) {
    if (!this.ball || this.ringoutTimerFrames > 0) {
      return;
    }
    this.ringoutTimerFrames = RINGOUT_TOTAL_FRAMES;
    this.ringoutSkipTimerFrames = RINGOUT_SKIP_DELAY_FRAMES;
    this.statusText = RINGOUT_STATUS_TEXT;
    if (!isBonusStage2 && this.lives > 0) {
      this.lives -= 1;
    }
    void this.audio?.playFallout(this.gameSource);
    if (isBonusStage2) {
      void this.audio?.playAnnouncerBonusFinish();
    }
    this.cameraController?.initFalloutReplay(this.ball);
    this.updateHud();
  }
  beginTimeoverSequence(isBonusStage2) {
    if (!this.ball || this.timeoverTimerFrames > 0) {
      return;
    }
    this.timeoverTimerFrames = TIMEOVER_TOTAL_FRAMES;
    this.statusText = TIMEOVER_STATUS_TEXT;
    this.ball.state = BALL_STATES.READY;
    this.ball.flags |= BALL_FLAGS.TIMEOVER;
    this.ball.vel.x = 0;
    this.ball.vel.y = 0;
    this.ball.vel.z = 0;
    this.ball.prevPos.x = this.ball.pos.x;
    this.ball.prevPos.y = this.ball.pos.y;
    this.ball.prevPos.z = this.ball.pos.z;
    this.ball.speed = 0;
    if (!isBonusStage2 && this.lives > 0) {
      this.lives -= 1;
    }
    if (!this.timeOverAnnouncerPlayed) {
      void this.audio?.playAnnouncerTimeOver();
      this.timeOverAnnouncerPlayed = true;
    }
    this.updateHud();
  }
  beginBonusClearSequence() {
    if (!this.ball || this.goalTimerFrames > 0) {
      return;
    }
    this.bonusClearPending = true;
    this.goalTimerFrames = BONUS_CLEAR_SEQUENCE_FRAMES;
    this.goalSkipTimerFrames = GOAL_SKIP_TOTAL_FRAMES;
    this.goalInfo = null;
    startGoal(this.ball);
    void this.audio?.playAnnouncerPerfect();
  }
  updateRingout(isBonusStage2) {
    if (this.paused || this.ringoutTimerFrames <= 0) {
      return false;
    }
    this.ringoutTimerFrames -= 1;
    if (this.ringoutSkipTimerFrames > 0) {
      this.ringoutSkipTimerFrames -= 1;
    }
    if (isBonusStage2 && this.ringoutTimerFrames === RINGOUT_BONUS_CUTOFF_FRAMES) {
      this.ringoutTimerFrames = RINGOUT_BONUS_REMAINING_FRAMES;
    }
    const canSkip = !isBonusStage2 && this.ringoutSkipTimerFrames <= 0 && this.input?.isPrimaryActionDown?.();
    if (canSkip) {
      this.ringoutTimerFrames = 0;
    }
    if (this.ringoutTimerFrames > 0) {
      return false;
    }
    this.ringoutSkipTimerFrames = 0;
    this.statusText = "";
    if (isBonusStage2) {
      this.accumulator = 0;
      void this.advanceCourse(this.makeAdvanceInfo(INFO_FLAGS.FALLOUT));
      return true;
    }
    if (this.stage) {
      this.accumulator = 0;
      void this.loadStage(this.stage.stageId);
    }
    return true;
  }
  updateTimeover(isBonusStage2) {
    if (this.paused || this.timeoverTimerFrames <= 0) {
      return false;
    }
    this.timeoverTimerFrames -= 1;
    if (this.timeoverTimerFrames > 0) {
      return false;
    }
    this.statusText = "";
    if (isBonusStage2) {
      this.accumulator = 0;
      void this.advanceCourse(this.makeAdvanceInfo(INFO_FLAGS.TIMEOVER));
      return true;
    }
    if (this.stage) {
      this.accumulator = 0;
      void this.loadStage(this.stage.stageId);
    }
    return true;
  }
  isBallFallout() {
    if (!this.ball || !this.stage || !this.stageRuntime) {
      return false;
    }
    if (this.ball.pos.y < this.stage.fallOutY) {
      return true;
    }
    const stage = this.stage;
    const animGroups = this.stageRuntime.animGroups;
    const physBall = this.tmpPhysBall;
    physBall.pos.x = this.ball.pos.x;
    physBall.pos.y = this.ball.pos.y;
    physBall.pos.z = this.ball.pos.z;
    physBall.prevPos.x = this.ball.prevPos.x;
    physBall.prevPos.y = this.ball.prevPos.y;
    physBall.prevPos.z = this.ball.prevPos.z;
    physBall.vel.x = this.ball.vel.x;
    physBall.vel.y = this.ball.vel.y;
    physBall.vel.z = this.ball.vel.z;
    physBall.animGroupId = this.ball.physBall?.animGroupId ?? 0;
    for (let animGroupId = 0; animGroupId < stage.animGroupCount; animGroupId += 1) {
      const stageAg = stage.animGroups[animGroupId];
      const fallOutBoxes = stageAg?.fallOutBoxes;
      if (!fallOutBoxes || fallOutBoxes.length === 0) {
        continue;
      }
      if (animGroupId !== physBall.animGroupId) {
        tfPhysballToAnimGroupSpace(physBall, animGroupId, animGroups);
      }
      for (const box of fallOutBoxes) {
        fallOutStack.fromTranslate(box.pos);
        fallOutStack.rotateZ(box.rot.z);
        fallOutStack.rotateY(box.rot.y);
        fallOutStack.rotateX(box.rot.x);
        fallOutStack.rigidInvTfPoint(physBall.pos, fallOutLocal);
        const scaleX = box.scale.x;
        const scaleY = box.scale.y;
        const scaleZ = box.scale.z;
        if (Math.abs(scaleX) < 1e-7 || Math.abs(scaleY) < 1e-7 || Math.abs(scaleZ) < 1e-7) {
          continue;
        }
        const localX = fallOutLocal.x / scaleX;
        const localY = fallOutLocal.y / scaleY;
        const localZ = fallOutLocal.z / scaleZ;
        if (localX < -0.5 || localX > 0.5) {
          continue;
        }
        if (localY < -0.5 || localY > 0.5) {
          continue;
        }
        if (localZ < -0.5 || localZ > 0.5) {
          continue;
        }
        if (physBall.animGroupId !== 0) {
          tfPhysballToAnimGroupSpace(physBall, 0, animGroups);
        }
        return true;
      }
    }
    if (physBall.animGroupId !== 0) {
      tfPhysballToAnimGroupSpace(physBall, 0, animGroups);
    }
    return false;
  }
  isBonusStageActive() {
    const bonus = this.course?.isBonusStage?.();
    if (bonus !== void 0) {
      return bonus;
    }
    const stageId = this.course?.currentStageId ?? 0;
    return isBonusStageId(stageId);
  }
  makeAdvanceInfo(flags, goalType = null) {
    return {
      flags,
      goalType,
      timerCurr: this.stageTimerFrames,
      u_currStageId: this.course?.currentStageId ?? 0
    };
  }
  async advanceCourse(info) {
    if (this.pendingAdvance || !this.course || !this.stage) {
      return;
    }
    this.pendingAdvance = true;
    const advanced = this.course.advance(info);
    if (!advanced) {
      this.statusText = "Course complete.";
      this.updateHud();
      this.pendingAdvance = false;
      return;
    }
    try {
      await this.loadStage(this.course.currentStageId);
    } finally {
      this.pendingAdvance = false;
    }
  }
  collectBananas() {
    if (!this.stageRuntime || !this.ball) {
      return false;
    }
    const animGroups = this.stageRuntime.animGroups;
    const physBall = this.tmpPhysBall;
    physBall.pos.x = this.ball.pos.x;
    physBall.pos.y = this.ball.pos.y;
    physBall.pos.z = this.ball.pos.z;
    physBall.prevPos.x = this.ball.prevPos.x;
    physBall.prevPos.y = this.ball.prevPos.y;
    physBall.prevPos.z = this.ball.prevPos.z;
    physBall.vel.x = this.ball.vel.x;
    physBall.vel.y = this.ball.vel.y;
    physBall.vel.z = this.ball.vel.z;
    physBall.radius = this.ball.currRadius;
    physBall.animGroupId = 0;
    let collectedAny = false;
    for (const banana of this.stageRuntime.bananas) {
      if (banana.collected) {
        continue;
      }
      if (!(banana.flags & ITEM_FLAG_COLLIDABLE) || banana.cooldown > 0) {
        continue;
      }
      if (physBall.animGroupId !== banana.animGroupId) {
        tfPhysballToAnimGroupSpace(physBall, banana.animGroupId, animGroups);
      }
      const radius = bananaRadiusForType(banana.type);
      if (!intersectsMovingSpheres(
        physBall.prevPos,
        physBall.pos,
        banana.prevLocalPos,
        banana.localPos,
        physBall.radius,
        radius
      )) {
        continue;
      }
      banana.cooldown = 8;
      banana.flags &= ~ITEM_FLAG_COLLIDABLE;
      banana.state = BANANA_STATE_HOLDING2;
      banana.collectTimer = 0;
      banana.holdTimer = BANANA_HOLD_FRAMES2;
      banana.holdOffset.x = banana.localPos.x - physBall.pos.x;
      banana.holdOffset.y = banana.localPos.y - physBall.pos.y;
      banana.holdOffset.z = banana.localPos.z - physBall.pos.z;
      banana.holdScaleTarget = banana.scale * 0.5;
      banana.holdRotVel = 0;
      banana.flyTimer = 0;
      banana.flyScaleTarget = 0;
      banana.tiltTimer = 30;
      banana.vel.x = 0;
      banana.vel.y = 0;
      banana.vel.z = 0;
      if (this.bananasLeft > 0) {
        this.bananasLeft -= 1;
      }
      this.ball.bananas += bananaValueForType(banana.type);
      this.score += bananaPointValueForType(banana.type);
      void this.audio?.playBananaCollect(isBananaBunch(banana.type));
      collectedAny = true;
    }
    return collectedAny;
  }
  handleInput() {
    if (!this.input) {
      return;
    }
    if (this.input.wasPressed("KeyR")) {
      if (this.course) {
        void this.loadStage(this.course.currentStageId);
      }
    }
    if (this.input.wasPressed("KeyN")) {
      this.skipStage();
    }
  }
  skipStage() {
    if (!this.course || !this.stage) {
      return;
    }
    const goalType = this.stage.goals?.[0]?.type ?? "B";
    const advanced = this.course.advance({
      flags: INFO_FLAGS.GOAL,
      goalType,
      timerCurr: this.stageTimerFrames,
      u_currStageId: this.course.currentStageId
    });
    if (!advanced) {
      this.statusText = "Course complete.";
      return;
    }
    void this.loadStage(this.course.currentStageId);
  }
  beginGoalSequence(goalHit) {
    if (this.goalTimerFrames > 0 || !this.stage || !this.ball) {
      return;
    }
    this.goalInfo = goalHit;
    const timeRemaining = Math.max(0, this.stageTimeLimitFrames - this.stageTimerFrames);
    this.score += computeGoalScore(goalHit?.goalType ?? this.stage.goals?.[0]?.type ?? "B", timeRemaining, this.stageTimeLimitFrames);
    if (this.score > 999999999) {
      this.score = 999999999;
    }
    this.goalTimerFrames = GOAL_SEQUENCE_FRAMES;
    this.goalSkipTimerFrames = GOAL_SKIP_TOTAL_FRAMES;
    startGoal(this.ball);
    void this.audio?.playGoal(this.gameSource);
    void this.audio?.playAnnouncerGoal(0.5);
    if (this.audio && this.stageTimeLimitFrames > 0) {
      const timeLeft = Math.max(0, this.stageTimeLimitFrames - this.stageTimerFrames);
      const isHigh = timeLeft > this.stageTimeLimitFrames >> 1;
      void this.audio.playAnnouncerTimeBonus(this.gameSource, isHigh);
    }
    if (this.stageRuntime && this.stageRuntime.goalBags.length > 0) {
      const tempBall = this.tmpPhysBall;
      tempBall.pos.x = this.ball.pos.x;
      tempBall.pos.y = this.ball.pos.y;
      tempBall.pos.z = this.ball.pos.z;
      tempBall.prevPos.x = this.ball.prevPos.x;
      tempBall.prevPos.y = this.ball.prevPos.y;
      tempBall.prevPos.z = this.ball.prevPos.z;
      tempBall.vel.x = this.ball.vel.x;
      tempBall.vel.y = this.ball.vel.y;
      tempBall.vel.z = this.ball.vel.z;
      tempBall.animGroupId = 0;
      tfPhysballToAnimGroupSpace(tempBall, goalHit.animGroupId, this.stageRuntime.animGroups);
      this.stageRuntime.breakGoalTape(goalHit.goalId, tempBall);
    }
    this.cameraController?.setGoalMain();
  }
  async finishGoalSequence() {
    if (!this.course || !this.stage) {
      return;
    }
    if (this.bonusClearPending) {
      this.bonusClearPending = false;
      await this.advanceCourse(this.makeAdvanceInfo(INFO_FLAGS.BONUS_CLEAR));
      return;
    }
    const goalType = this.goalInfo?.goalType ?? this.stage.goals?.[0]?.type ?? "B";
    await this.advanceCourse(this.makeAdvanceInfo(INFO_FLAGS.GOAL, goalType));
  }
  updateHud() {
    if (!this.hud) {
      return;
    }
    const stageId = this.stage?.stageId ?? this.course?.currentStageId ?? null;
    if (this.hud.stage) {
      this.hud.stage.textContent = this.course ? this.course.getStageLabel() : "Stage";
    }
    if (this.hud.level) {
      this.hud.level.textContent = stageId !== null ? `Stage ${String(stageId).padStart(3, "0")}` : "Stage";
    }
    if (this.hud.timer) {
      const timeLeft = Math.max(0, this.stageTimeLimitFrames - this.stageTimerFrames);
      this.hud.timer.textContent = formatTimer(timeLeft);
    }
    if (this.hud.score) {
      this.hud.score.textContent = formatScore(this.score);
    }
    if (this.hud.bananas) {
      this.hud.bananas.textContent = String(this.ball?.bananas ?? 0);
    }
    if (this.hud.lives) {
      this.hud.lives.textContent = String(this.lives);
    }
    if (this.hud.speed || this.hud.speedFill) {
      const speedMph = Math.max(0, (this.ball?.speed ?? 0) * SPEED_MPH_SCALE);
      if (this.hud.speed) {
        this.hud.speed.textContent = `${speedMph.toFixed(1)} mph`;
      }
      if (this.hud.speedFill) {
        const pct = Math.min(100, speedMph / SPEED_BAR_MAX_MPH * 100);
        this.hud.speedFill.style.width = `${pct}%`;
      }
    }
    if (this.hud.status) {
      let status = this.statusText;
      if (this.paused) {
        status = status ? `${status} (Paused)` : "Paused";
      }
      this.hud.status.textContent = status;
    }
  }
  readDeterministicStick(inputEnabled) {
    let frame = null;
    const canConsumeReplay = this.replayInputStartTick === null || this.simTick >= this.replayInputStartTick;
    if (this.inputFeed && canConsumeReplay) {
      frame = this.inputFeed[this.inputFeedIndex] ?? { x: 0, y: 0 };
      this.inputFeedIndex += 1;
    }
    if (!inputEnabled) {
      return { x: 0, y: 0 };
    }
    if (this.inputRecord && this.autoRecordInputs) {
      if (this.inputRecord.length === 0) {
        this.inputStartTick = this.simTick;
      }
      if (!frame) {
        const raw = this.input?.getStick?.() ?? { x: 0, y: 0 };
        frame = quantizeStick(raw);
      }
      this.inputRecord.push({ x: frame.x, y: frame.y });
    }
    if (!frame) {
      const raw = this.input?.getStick?.() ?? { x: 0, y: 0 };
      frame = quantizeStick(raw);
    }
    return dequantizeStick(frame);
  }
  update(dtSeconds) {
    if (!this.running) {
      return;
    }
    if (this.loadingStage) {
      this.accumulator = 0;
      this.updateHud();
      return;
    }
    if (this.paused) {
      this.accumulator = 0;
    } else if (this.fixedTickMode) {
      this.accumulator = this.fixedStep * this.fixedTicksPerUpdate;
    } else {
      this.accumulator = Math.min(this.accumulator + dtSeconds, this.fixedStep * MAX_FRAME_DELTA);
    }
    this.handleInput();
    if (this.stageRuntime && this.stage && this.ball && this.cameraController && this.world) {
      if (this.pendingAdvance) {
        this.accumulator = 0;
      }
      this.stageRuntime.goalHoldOpen = this.goalTimerFrames > 0;
      while (!this.pendingAdvance && this.accumulator >= this.fixedStep) {
        const tickStart = this.simPerf.enabled ? nowMs() : 0;
        try {
          const ringoutActive = this.ringoutTimerFrames > 0;
          const timeoverActive = this.timeoverTimerFrames > 0;
          const inputEnabled = this.introTimerFrames <= 0 && this.goalTimerFrames <= 0 && !ringoutActive && !timeoverActive;
          const switchesEnabled = this.goalTimerFrames <= 0 && !ringoutActive && !timeoverActive;
          const isBonusStage2 = this.isBonusStageActive();
          this.input?.setGyroTapMode?.(inputEnabled ? "recalibrate" : "action");
          const fastForwardIntro = this.stageAttempts === 1 && this.introTimerFrames > 120 && this.input?.isPrimaryActionDown?.();
          const isSmb2 = this.stage?.format === "smb2";
          const animTimerOverride = !isSmb2 && this.introTimerFrames > 0 ? Math.max(0, 120 - this.introTimerFrames) : null;
          const smb2LoadInFrames = isSmb2 && this.introTimerFrames > 0 ? this.introTimerFrames : null;
          this.stageRuntime.switchesEnabled = switchesEnabled;
          const stick = this.readDeterministicStick(inputEnabled);
          this.world.updateInput(stick, this.cameraController.rotY);
          const stagePaused = this.paused || timeoverActive;
          this.stageRuntime.advance(
            1,
            stagePaused,
            this.world,
            animTimerOverride,
            smb2LoadInFrames,
            this.ball,
            this.cameraController
          );
          if (this.goalTimerFrames > 0) {
            this.goalTimerFrames -= 1;
            this.goalSkipTimerFrames -= 1;
            if (!this.goalWooshPlayed && this.ball.goalTimer >= GOAL_FLOAT_FRAMES) {
              void this.audio?.playSfx("ball_woosh", this.gameSource, 0.85);
              this.goalWooshPlayed = true;
            }
            const canSkipGoal = this.goalSkipTimerFrames <= 0 && this.ball.flags & BALL_FLAGS.FLAG_09 && this.input?.isPrimaryActionDown?.();
            if (canSkipGoal) {
              this.goalTimerFrames = 0;
              this.accumulator = 0;
              void this.finishGoalSequence();
              break;
            }
            if (this.goalTimerFrames === 0) {
              this.accumulator = 0;
              void this.finishGoalSequence();
              break;
            }
          }
          if (this.introTimerFrames > 0) {
            const prevIntroTimerFrames = this.introTimerFrames;
            this.introTimerFrames -= 1;
            if (fastForwardIntro) {
              this.introTimerFrames -= 1;
            }
            if (!this.readyAnnouncerPlayed && prevIntroTimerFrames > 120 && this.introTimerFrames <= 120) {
              void this.audio?.playAnnouncerReady();
              this.readyAnnouncerPlayed = true;
            }
            if (this.introTimerFrames === this.dropFrames) {
              startBallDrop(this.ball, this.dropFrames);
            }
            if (this.introTimerFrames === 0) {
              this.cameraController.initForStage(this.ball, this.ball.startRotY, this.stageRuntime);
              if (!this.goAnnouncerPlayed) {
                void this.audio?.playAnnouncerGo();
                this.goAnnouncerPlayed = true;
              }
            }
          }
          if (!timeoverActive && (this.ball.state === BALL_STATES.PLAY || this.ball.state === BALL_STATES.GOAL_MAIN)) {
            stepBall(this.ball, this.stageRuntime, this.world);
            const switchPresses = this.stageRuntime.switchPressCount ?? 0;
            if (switchPresses > 0) {
              this.stageRuntime.switchPressCount = 0;
              for (let i = 0; i < switchPresses; i += 1) {
                void this.audio?.playSfx("switch_press", this.gameSource, 0.6);
              }
            }
            if (this.ball.wormholeTransform) {
              this.cameraController.applyWormholeTransform(this.ball.wormholeTransform);
              this.ball.wormholeTransform = null;
            }
            if (!ringoutActive && this.goalTimerFrames <= 0 && this.isBallFallout()) {
              this.beginFalloutSequence(isBonusStage2);
            }
          }
          if (this.audio && this.ball) {
            const frameCount = this.stageRuntime?.timerFrames ?? 0;
            void this.audio.updateRollingSound(this.ball, this.gameSource, frameCount);
            void this.audio.playImpactForBall(this.ball, this.gameSource, frameCount);
            void this.audio.consumeBallEvents(this.ball, this.gameSource);
          }
          if (inputEnabled && !this.paused && this.ringoutTimerFrames <= 0 && !timeoverActive) {
            this.stageTimerFrames += 1;
            if (this.stageTimeLimitFrames > 0) {
              const timeLeft = this.stageTimeLimitFrames - this.stageTimerFrames;
              if (timeLeft === HURRY_UP_FRAMES && !this.hurryUpAnnouncerPlayed) {
                void this.audio?.playAnnouncerHurryUp();
                this.hurryUpAnnouncerPlayed = true;
              }
              if (timeLeft <= COUNTDOWN_START_FRAMES && timeLeft >= 60 && timeLeft % 60 === 0) {
                const count = Math.trunc(timeLeft / 60) - 1;
                void this.audio?.playAnnouncerCount(count);
              }
              if (timeLeft <= 0 && this.timeoverTimerFrames <= 0) {
                this.accumulator = 0;
                this.beginTimeoverSequence(isBonusStage2);
                break;
              }
            }
          }
          const canCollectBananas = !ringoutActive && !timeoverActive && (this.ball.state === BALL_STATES.PLAY || this.ball.state === BALL_STATES.GOAL_MAIN);
          if (canCollectBananas) {
            const collected = this.collectBananas();
            if (collected && isBonusStage2 && this.bananasLeft <= 0 && inputEnabled && this.ball.state === BALL_STATES.PLAY) {
              this.accumulator = 0;
              this.beginBonusClearSequence();
              break;
            }
          }
          if (inputEnabled && this.ball.state === BALL_STATES.PLAY) {
            const goalHit = checkBallEnteredGoal(this.ball, this.stageRuntime);
            if (goalHit) {
              this.beginGoalSequence(goalHit);
            }
          }
          if (ringoutActive) {
            if (this.updateRingout(isBonusStage2)) {
              break;
            }
          }
          if (timeoverActive) {
            if (this.updateTimeover(isBonusStage2)) {
              break;
            }
          }
          const cameraPoses = this.ensureCameraPose();
          if (cameraPoses) {
            this.copyCameraPose(cameraPoses.curr, cameraPoses.prev);
          }
          const cameraPaused = this.paused || timeoverActive;
          this.cameraController.update(this.ball, this.stageRuntime, cameraPaused, fastForwardIntro);
          if (cameraPoses) {
            this.captureCameraPose(cameraPoses.curr);
          }
          this.accumulator -= this.fixedStep;
        } finally {
          if (this.simPerf.enabled) {
            const tickMs = nowMs() - tickStart;
            this.simPerf.lastTickMs = tickMs;
            this.simPerf.tickMs += tickMs;
            this.simPerf.tickCount += 1;
          }
          this.simTick += 1;
          if (this.replayAutoFastForward && this.replayInputStartTick !== null) {
            if (this.simTick >= this.replayInputStartTick) {
              this.replayAutoFastForward = false;
              this.setFixedTickMode(false, 1);
            }
          }
        }
      }
      if (this.simPerf.enabled && this.simPerf.tickCount >= this.simPerf.logEvery) {
        const avgMs = this.simPerf.tickMs / Math.max(1, this.simPerf.tickCount);
        console.log(
          "[perf] sim-tick avg=%sms last=%sms over=%d",
          avgMs.toFixed(3),
          this.simPerf.lastTickMs.toFixed(3),
          this.simPerf.tickCount
        );
        this.simPerf.tickCount = 0;
        this.simPerf.tickMs = 0;
      }
    }
    this.updateHud();
  }
};

// src/smb2_render.ts
import { vec2 as vec24, vec3 as vec313 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/Stagedef.ts
import { vec3 as vec37 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/Utils.ts
import { vec2 as vec22, vec3 as vec36 } from "gl-matrix";
var S16_TO_RADIANS = Math.PI / 32768;
var EPSILON2 = 11920928955078125e-23;
var MKB_FPS = 60;
var SPIN_IN_FRAMES = 120;
var MkbTime = class {
  // Current animation time in frames@60fps, starting from zero
  animTimeFrames = 0;
  animTimeSeconds = 0;
  // Delta time in 60fps frames from last render frame
  deltaTimeFrames = 0;
  // Time in frames remaining on the level's clock (aka what would be displayed on the goal)
  stageTimeFrames = 0;
  // Time limit for beating the stage in frames (all stages are either 60 or 30)
  stageTimeLimitFrames = 0;
  // Set when a goal is activated
  stageTimeFrozen = false;
  constructor(stageTimeLimitSeconds) {
    this.stageTimeLimitFrames = stageTimeLimitSeconds * MKB_FPS;
  }
  updateDeltaTimeSeconds(deltaSeconds) {
    this.deltaTimeFrames = deltaSeconds * MKB_FPS;
    this.animTimeFrames += this.deltaTimeFrames;
    this.animTimeSeconds = this.animTimeFrames / MKB_FPS;
    if (!this.stageTimeFrozen) {
      this.stageTimeFrames = clamp(
        this.stageTimeLimitFrames - this.animTimeFrames + SPIN_IN_FRAMES,
        0,
        this.stageTimeLimitFrames
      );
    }
  }
  overrideTimeFrames(timeFrames, deltaFrames) {
    this.animTimeFrames = timeFrames;
    this.deltaTimeFrames = deltaFrames;
    this.animTimeSeconds = this.animTimeFrames / MKB_FPS;
    if (!this.stageTimeFrozen) {
      this.stageTimeFrames = clamp(
        this.stageTimeLimitFrames - this.animTimeFrames + SPIN_IN_FRAMES,
        0,
        this.stageTimeLimitFrames
      );
    }
  }
  getAnimTimeFrames() {
    return this.animTimeFrames;
  }
  getAnimTimeSeconds() {
    return this.animTimeSeconds;
  }
  getDeltaTimeFrames() {
    return this.deltaTimeFrames;
  }
  getStageTimeFrames() {
    return this.stageTimeFrames;
  }
  freezeStageTime() {
    this.stageTimeFrozen = true;
  }
};
function parseVec3f(view, offset) {
  const x = view.getFloat32(offset);
  const y = view.getFloat32(offset + 4);
  const z = view.getFloat32(offset + 8);
  return vec36.fromValues(x, y, z);
}
function parseVec2f(view, offset) {
  const x = view.getFloat32(offset);
  const y = view.getFloat32(offset + 4);
  return vec22.fromValues(x, y);
}
var scratchVec3a3 = vec36.create();
function getMat4RotY(mtx) {
  const res = scratchVec3a3;
  transformVec3Mat4w0(res, mtx, Vec3UnitX);
  res[1] = 0;
  vec36.normalize(res, res);
  return Math.atan2(-res[2], res[0]);
}

// src/noclip/SuperMonkeyBall/Stagedef.ts
var ANIM_GROUP_SIZE = 196;
var GOAL_SIZE = 20;
var BUMPER_SIZE = 32;
var JAMABAR_SIZE = 32;
var BANANA_SIZE = 16;
var COLI_CONE_SIZE = 32;
var COLI_SPHERE_SIZE = 20;
var COLI_CYLINDER_SIZE = 28;
var BG_MODEL_SIZE = 56;
var ANIM_KEYFRAME_SIZE = 20;
var COLI_TRI_SIZE = 64;
var ANIM_GROUP_MODEL_SIZE = 12;
var NIGHT_WINDOW_ANIM_SIZE = 20;
var STORM_FIRE_ANIM_SIZE = 16;
function parseVec3s(view, offset) {
  const x = view.getInt16(offset);
  const y = view.getInt16(offset + 2);
  const z = view.getInt16(offset + 4);
  return vec37.fromValues(x, y, z);
}
function parseKeyframeList(view, offset) {
  const keyframes = [];
  const keyframeCount = view.getUint32(offset);
  const keyframeListOffs = view.getUint32(offset + 4);
  for (let i = 0; i < keyframeCount; i++) {
    const keyframeOffs = keyframeListOffs + i * ANIM_KEYFRAME_SIZE;
    const easeType = view.getInt32(keyframeOffs + 0);
    const timeSeconds = view.getFloat32(keyframeOffs + 4);
    const value = view.getFloat32(keyframeOffs + 8);
    const tangentIn = view.getFloat32(keyframeOffs + 12);
    const tangentOut = view.getFloat32(keyframeOffs + 16);
    keyframes.push({ easeType, timeSeconds, value, tangentIn, tangentOut });
  }
  return keyframes;
}
function parseAnimGroupAnim(view, offset) {
  if (offset === 0) return null;
  const rotXKeyframes = parseKeyframeList(view, offset + 0);
  const rotYKeyframes = parseKeyframeList(view, offset + 8);
  const rotZKeyframes = parseKeyframeList(view, offset + 16);
  const posXKeyframes = parseKeyframeList(view, offset + 24);
  const posYKeyframes = parseKeyframeList(view, offset + 32);
  const posZKeyframes = parseKeyframeList(view, offset + 40);
  return {
    rotXKeyframes,
    rotYKeyframes,
    rotZKeyframes,
    posXKeyframes,
    posYKeyframes,
    posZKeyframes
  };
}
function parseSlicedList(view, offset, origList, origListOffs, elemSize) {
  const count = view.getUint32(offset);
  const listOffs = view.getUint32(offset + 4);
  const idx = (listOffs - origListOffs) / elemSize;
  return origList.slice(idx, idx + count);
}
function parseMirrorModelNames(buffer, view, listOffs, count) {
  if (listOffs === 0 || count <= 0) {
    return [];
  }
  const names = [];
  for (let i = 0; i < count; i++) {
    const entryOffs = listOffs + i * 8;
    const namePtr = view.getUint32(entryOffs + 0);
    if (namePtr !== 0) {
      names.push(readString(buffer, namePtr));
    }
  }
  return names;
}
function parseStagedefLz(buffer) {
  return parseStagedefUncompressed(decompressLZ(buffer));
}
function parseFlipbookAnims(view, offset) {
  if (offset === 0) return null;
  const nightWindowAnims = [];
  const stormFireAnims = [];
  const nightWindowAnimCount = view.getInt32(offset + 0);
  const nightWindowAnimsOffs = view.getUint32(offset + 4);
  const stormFireAnimCount = view.getInt32(offset + 8);
  const stormFireAnimsOffs = view.getUint32(offset + 12);
  for (let i = 0; i < nightWindowAnimCount; i++) {
    const nightWindowAnimOffs = nightWindowAnimsOffs + i * NIGHT_WINDOW_ANIM_SIZE;
    const pos = parseVec3f(view, nightWindowAnimOffs + 0);
    const rot = parseVec3s(view, nightWindowAnimOffs + 12);
    const id = view.getInt8(nightWindowAnimOffs + 18);
    nightWindowAnims.push({ pos, rot, id });
  }
  for (let i = 0; i < stormFireAnimCount; i++) {
    const stormFireAnimOffs = stormFireAnimsOffs + i * STORM_FIRE_ANIM_SIZE;
    const pos = parseVec3f(view, stormFireAnimOffs + 0);
    const frameOffset = view.getInt8(stormFireAnimOffs + 12);
    stormFireAnims.push({ pos, frameOffset });
  }
  return { nightWindowAnims, stormFireAnims };
}
function parseBgModelList(buffer, offset) {
  const view = buffer.createDataView();
  const bgModelCount = view.getUint32(offset);
  const bgModelListOffs = view.getUint32(offset + 4);
  const bgObjects = [];
  for (let i = 0; i < bgModelCount; i++) {
    const bgObjectOffs = bgModelListOffs + i * BG_MODEL_SIZE;
    const flags = view.getUint32(bgObjectOffs + 0);
    const modelName = readString(buffer, view.getUint32(bgObjectOffs + 4));
    const pos = parseVec3f(view, bgObjectOffs + 12);
    const rot = parseVec3s(view, bgObjectOffs + 24);
    const scale = parseVec3f(view, bgObjectOffs + 32);
    const translucency = view.getFloat32(bgObjectOffs + 44);
    let anim = null;
    const bgAnimOffs = view.getUint32(bgObjectOffs + 48);
    if (bgAnimOffs !== 0) {
      anim = {
        loopStartSeconds: view.getInt32(bgAnimOffs + 0),
        loopEndSeconds: view.getInt32(bgAnimOffs + 4),
        scaleXKeyframes: parseKeyframeList(view, bgAnimOffs + 8),
        scaleYKeyframes: parseKeyframeList(view, bgAnimOffs + 16),
        scaleZKeyframes: parseKeyframeList(view, bgAnimOffs + 24),
        rotXKeyframes: parseKeyframeList(view, bgAnimOffs + 32),
        rotYKeyframes: parseKeyframeList(view, bgAnimOffs + 40),
        rotZKeyframes: parseKeyframeList(view, bgAnimOffs + 48),
        posXKeyframes: parseKeyframeList(view, bgAnimOffs + 56),
        posYKeyframes: parseKeyframeList(view, bgAnimOffs + 64),
        posZKeyframes: parseKeyframeList(view, bgAnimOffs + 72),
        visibleKeyframes: parseKeyframeList(view, bgAnimOffs + 80),
        translucencyKeyframes: parseKeyframeList(view, bgAnimOffs + 88)
      };
    }
    const flipbookAnimsOffs = view.getUint32(bgObjectOffs + 52);
    const flipbookAnims = parseFlipbookAnims(view, flipbookAnimsOffs);
    const bgObject = {
      flags,
      modelName,
      pos,
      rot,
      scale,
      anim,
      translucency,
      flipbookAnims
    };
    bgObjects.push(bgObject);
  }
  return bgObjects;
}
function parseStagedefUncompressed(buffer) {
  const view = buffer.createDataView();
  const loopStartSeconds = view.getInt32(0);
  const loopEndSeconds = view.getInt32(4);
  const startOffs = view.getUint32(16);
  const startPos = parseVec3f(view, startOffs + 0);
  const startRot = parseVec3s(view, startOffs + 12);
  const initBallPose = { pos: startPos, rot: startRot };
  const falloutPlaneOffs = view.getUint32(20);
  const falloutPlane = { y: view.getFloat32(falloutPlaneOffs) };
  const goalCount = view.getUint32(24);
  const goalListOffs = view.getUint32(28);
  const goals = [];
  for (let i = 0; i < goalCount; i++) {
    const goalOffs = goalListOffs + i * GOAL_SIZE;
    const pos = parseVec3f(view, goalOffs + 0);
    const rot = parseVec3s(view, goalOffs + 12);
    const typeStr = readString(buffer, goalOffs + 18, 1, false);
    let type;
    if (typeStr === "B") type = 0 /* Blue */;
    else if (typeStr === "G") type = 1 /* Green */;
    else if (typeStr === "R") type = 2 /* Red */;
    else throw new Error(`Unknown goal type '${typeStr}'`);
    goals.push({ pos, rot, type });
  }
  const bumperCount = view.getUint32(40);
  const bumperListOffs = view.getUint32(44);
  const bumpers = [];
  for (let i = 0; i < bumperCount; i++) {
    const bumperOffs = bumperListOffs + i * BUMPER_SIZE;
    const pos = parseVec3f(view, bumperOffs + 0);
    const rot = parseVec3s(view, bumperOffs + 12);
    const scale = parseVec3f(view, bumperOffs + 20);
    bumpers.push({ pos, rot, scale });
  }
  const jamabarCount = view.getUint32(48);
  const jamabarListOffs = view.getUint32(52);
  const jamabars = [];
  for (let i = 0; i < jamabarCount; i++) {
    const jamabarOffs = jamabarListOffs + i * JAMABAR_SIZE;
    const pos = parseVec3f(view, jamabarOffs + 0);
    const rot = parseVec3s(view, jamabarOffs + 12);
    const scale = parseVec3f(view, jamabarOffs + 20);
    jamabars.push({ pos, rot, scale });
  }
  const bananaCount = view.getUint32(56);
  const bananaListOffs = view.getUint32(60);
  const bananas = [];
  for (let i = 0; i < bananaCount; i++) {
    const bananaOffs = bananaListOffs + i * BANANA_SIZE;
    const pos = parseVec3f(view, bananaOffs + 0);
    const type = view.getUint32(bananaOffs + 12);
    bananas.push({ pos, type });
  }
  const coliConeCount = view.getUint32(48);
  const coliConeListOffs = view.getUint32(52);
  const coliCones = [];
  for (let i = 0; i < coliConeCount; i++) {
    const coliConeOffs = coliConeListOffs + i * COLI_CONE_SIZE;
    const pos = parseVec3f(view, coliConeOffs + 0);
    const rot = parseVec3s(view, coliConeOffs + 12);
    const scale = parseVec3f(view, coliConeOffs + 20);
    coliCones.push({ pos, rot, scale });
  }
  const coliSphereCount = view.getUint32(56);
  const coliSphereListOffs = view.getUint32(60);
  const coliSpheres = [];
  for (let i = 0; i < coliSphereCount; i++) {
    const coliSphereOffs = coliSphereListOffs + i * COLI_SPHERE_SIZE;
    const pos = parseVec3f(view, coliSphereOffs + 0);
    const radius = view.getFloat32(coliSphereOffs + 12);
    coliSpheres.push({ pos, radius });
  }
  const coliCylinderCount = view.getUint32(64);
  const coliCylinderListOffs = view.getUint32(68);
  const coliCylinders = [];
  for (let i = 0; i < coliCylinderCount; i++) {
    const coliCylinderOffs = coliCylinderListOffs + i * COLI_CYLINDER_SIZE;
    const pos = parseVec3f(view, coliCylinderOffs + 0);
    const radius = view.getFloat32(coliCylinderOffs + 12);
    const height = view.getFloat32(coliCylinderOffs + 16);
    const rot = parseVec3s(view, coliCylinderOffs + 20);
    coliCylinders.push({ pos, radius, height, rot });
  }
  const animGroupModelCount = view.getUint32(88);
  const animGroupModelListOffs = view.getUint32(92);
  const animGroupModels = [];
  for (let i = 0; i < animGroupModelCount; i++) {
    const levelModelOffs = animGroupModelListOffs + i * ANIM_GROUP_MODEL_SIZE;
    const flags = view.getUint32(levelModelOffs + 0);
    const modelName = readString(buffer, view.getUint32(levelModelOffs + 4));
    animGroupModels.push({ flags, modelName });
  }
  const bgObjects = parseBgModelList(buffer, 104);
  const fgObjects = parseBgModelList(buffer, 112);
  const mirrorCount = view.getUint32(128);
  const mirrorsOffs = view.getUint32(132);
  const mirrors = parseMirrorModelNames(buffer, view, mirrorsOffs, mirrorCount).map(
    (modelName) => ({ modelName })
  );
  const animGroupCount = view.getUint32(8);
  const animGroupListOffs = view.getUint32(12);
  const animGroups = [];
  for (let i = 0; i < animGroupCount; i++) {
    const coliHeaderOffs = animGroupListOffs + i * ANIM_GROUP_SIZE;
    const initPos = parseVec3f(view, coliHeaderOffs + 0);
    const initRot = parseVec3s(view, coliHeaderOffs + 12);
    const animType = view.getUint16(coliHeaderOffs + 18);
    const animHeaderOffs = view.getUint32(coliHeaderOffs + 20);
    const anim = parseAnimGroupAnim(view, animHeaderOffs);
    const coliTriListOffs = view.getUint32(coliHeaderOffs + 28);
    const coliTriIdxsOffs = view.getUint32(coliHeaderOffs + 32);
    const gridOriginX = view.getFloat32(coliHeaderOffs + 36);
    const gridOriginZ = view.getFloat32(coliHeaderOffs + 40);
    const gridStepX = view.getFloat32(coliHeaderOffs + 44);
    const gridStepZ = view.getFloat32(coliHeaderOffs + 48);
    const gridCellCountX = view.getUint32(coliHeaderOffs + 52);
    const gridCellCountZ = view.getUint32(coliHeaderOffs + 56);
    const gridCellTris = [];
    for (let z = 0; z < gridCellCountZ; z++) {
      for (let x = 0; x < gridCellCountX; x++) {
        const gridIdx = z * gridCellCountX + x;
        const triIdxListOffs = view.getUint32(coliTriIdxsOffs + gridIdx * 4);
        const triIdxList = [];
        if (triIdxListOffs !== 0) {
          for (let triIdxIdx = 0; ; triIdxIdx++) {
            const triIdx = view.getInt16(triIdxListOffs + triIdxIdx * 2);
            if (triIdx !== -1) {
              triIdxList.push(triIdx);
            } else {
              break;
            }
          }
        }
        gridCellTris.push(triIdxList);
      }
    }
    let maxTriIdx = -1;
    for (let idxList of gridCellTris) {
      maxTriIdx = Math.max(maxTriIdx, Math.max(...idxList));
    }
    const numTris = maxTriIdx + 1;
    const coliTris = [];
    for (let i2 = 0; i2 < numTris; i2++) {
      const triOffs = coliTriListOffs + i2 * COLI_TRI_SIZE;
      const point1Pos = parseVec3f(view, triOffs + 0);
      const normal = parseVec3f(view, triOffs + 12);
      const rotFromXY = parseVec3s(view, triOffs + 24);
      const point2Point1Delta = parseVec2f(view, triOffs + 32);
      const point3Point1Delta = parseVec2f(view, triOffs + 40);
      const tangent = parseVec2f(view, triOffs + 48);
      const bitangent = parseVec2f(view, triOffs + 56);
      coliTris.push({
        pos: point1Pos,
        normal,
        rot: rotFromXY,
        vert2: point2Point1Delta,
        vert3: point3Point1Delta,
        edge2Normal: tangent,
        edge3Normal: bitangent
      });
    }
    const subGoals = parseSlicedList(view, coliHeaderOffs + 60, goals, goalListOffs, GOAL_SIZE);
    const subBumpers = parseSlicedList(view, coliHeaderOffs + 76, bumpers, bumperListOffs, BUMPER_SIZE);
    const subJamabars = parseSlicedList(view, coliHeaderOffs + 84, jamabars, jamabarListOffs, JAMABAR_SIZE);
    const subBananas = parseSlicedList(view, coliHeaderOffs + 92, bananas, bananaListOffs, BANANA_SIZE);
    const subColiCones = parseSlicedList(view, coliHeaderOffs + 100, coliCones, coliConeListOffs, COLI_CONE_SIZE);
    const subColiSpheres = parseSlicedList(
      view,
      coliHeaderOffs + 108,
      coliSpheres,
      coliSphereListOffs,
      COLI_SPHERE_SIZE
    );
    const subColiCylinders = parseSlicedList(
      view,
      coliHeaderOffs + 116,
      coliCylinders,
      coliCylinderListOffs,
      COLI_CYLINDER_SIZE
    );
    const subAnimGroupModels = parseSlicedList(
      view,
      coliHeaderOffs + 124,
      animGroupModels,
      animGroupModelListOffs,
      ANIM_GROUP_MODEL_SIZE
    );
    const mirrorModelCount = view.getUint32(coliHeaderOffs + 140);
    const mirrorModelListOffs = view.getUint32(coliHeaderOffs + 144);
    const mirrorModelNames = parseMirrorModelNames(buffer, view, mirrorModelListOffs, mirrorModelCount);
    animGroups.push({
      originPos: initPos,
      originRot: initRot,
      animType,
      anim,
      // conveyorVel: conveyorVel,
      coliTris,
      gridCellTris,
      gridOriginX,
      gridOriginZ,
      gridStepX,
      gridStepZ,
      gridCellCountX,
      gridCellCountZ,
      goals: subGoals,
      bumpers: subBumpers,
      jamabars: subJamabars,
      bananas: subBananas,
      coliCones: subColiCones,
      coliSpheres: subColiSpheres,
      coliCylinders: subColiCylinders,
      wormholes: [],
      animGroupModels: subAnimGroupModels,
      mirrorModelNames
      // reflectiveStageModels: [],
      // stageModelInstances: [],
      // stageModelPtrB: [],
      // textureScroll: textureScroll,
    });
  }
  return {
    loopStartSeconds,
    loopEndSeconds,
    animGroups,
    initBallPose,
    falloutPlane,
    goals,
    bumpers,
    jamabars,
    bananas,
    wormholes: [],
    levelModels: animGroupModels,
    bgObjects,
    fgObjects,
    mirrors
    // reflectiveModels: [],
  };
}

// src/noclip/SuperMonkeyBall/Model.ts
import { mat4 as mat410, vec3 as vec311 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/TevLayer.ts
var TevLayerInst = class {
  constructor(device, renderCache, tevLayerData, textureCache) {
    this.tevLayerData = tevLayerData;
    this.loadedTex = textureCache.getTexture(device, tevLayerData.gxTexture);
    const wrapS = tevLayerData.flags >> 2 & 3;
    const wrapT = tevLayerData.flags >> 4 & 3;
    const width = tevLayerData.gxTexture.width;
    const height = tevLayerData.gxTexture.height;
    let maxLod = tevLayerData.flags >> 7 & 15;
    if (width !== height) {
      maxLod = 0;
    } else if (maxLod === 15) {
      const minDim = Math.min(width, height);
      maxLod = Math.max(0, Math.log2(minDim) - 4);
    }
    this.gfxSampler = renderCache.createSampler({
      wrapS: translateWrapModeGfx(wrapS),
      wrapT: translateWrapModeGfx(wrapT),
      minFilter: 1 /* Bilinear */,
      magFilter: 1 /* Bilinear */,
      mipFilter: maxLod === 0 ? 0 /* Nearest */ : 1 /* Linear */,
      minLOD: 0,
      maxLOD: maxLod
    });
  }
  loadedTex;
  gfxSampler;
  fillTextureMapping(mapping) {
    mapping.gfxTexture = this.loadedTex;
    mapping.gfxSampler = this.gfxSampler;
  }
};

// src/noclip/SuperMonkeyBall/Shape.ts
import { mat4 as mat49, vec3 as vec310 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/Material.ts
import { mat4 as mat48, vec3 as vec39 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/Gma.ts
import { mat4 as mat47, vec3 as vec38 } from "gl-matrix";
var SHAPE_BASE_SIZE2 = 96;
function parseTevLayer2(buffer, tpl) {
  const view = buffer.createDataView();
  const flags = view.getUint32(0);
  const texIdx = view.getInt16(4);
  const lodBias = view.getInt8(6);
  const anisotropy = view.getInt8(7);
  const unk0x0C = view.getInt8(12);
  const swappable = !!view.getUint8(13);
  const unk0x10 = view.getInt32(16);
  const type = view.getUint8(19);
  const alphaType = type >> 4 & 7;
  const colorType = type & 15;
  return {
    flags,
    gxTexture: assertExists(tpl.get(texIdx)),
    lodBias,
    maxAniso: anisotropy,
    unk0x0C,
    unk0x10,
    alphaType,
    colorType,
    swappable
  };
}
function parseMatrix2(buffer) {
  const view = buffer.createDataView();
  const m00 = view.getFloat32(0);
  const m01 = view.getFloat32(4);
  const m02 = view.getFloat32(8);
  const m03 = view.getFloat32(12);
  const m10 = view.getFloat32(16);
  const m11 = view.getFloat32(20);
  const m12 = view.getFloat32(24);
  const m13 = view.getFloat32(28);
  const m20 = view.getFloat32(32);
  const m21 = view.getFloat32(36);
  const m22 = view.getFloat32(40);
  const m23 = view.getFloat32(44);
  const matrix = mat47.fromValues(
    m00,
    m10,
    m20,
    0,
    m01,
    m11,
    m21,
    0,
    m02,
    m12,
    m22,
    0,
    m03,
    m13,
    m23,
    1
  );
  return matrix;
}
function parseMaterial2(buffer, idx) {
  const view = buffer.createDataView();
  const tevLayerIdxs = [];
  const materialColor = colorNewFromRGBA8(view.getUint32(4));
  const ambientColor = colorNewFromRGBA8(view.getUint32(8));
  const specularColor = colorNewFromRGBA8(view.getUint32(12));
  const alpha = view.getUint8(17) / 255;
  const tevLayerCount = view.getUint8(18);
  const unk0x14 = view.getUint8(20);
  const unk0x15 = view.getUint8(21);
  for (let i = 0; i < 3; i++) {
    let offs = 22 + i * 2;
    tevLayerIdxs[i] = view.getInt16(offs);
  }
  const vtxAttrs = view.getUint32(28);
  let flags = view.getUint32(0);
  if (vtxAttrs & 1 << 11 /* CLR0 */) {
    flags |= 256 /* VertColors */;
  }
  if (tevLayerCount === 0) {
    flags |= 128 /* SimpleMaterial */;
  }
  const blendFactors = view.getUint32(64);
  return {
    flags,
    materialColor,
    ambientColor,
    specularColor,
    alpha,
    tevLayerCount,
    unk0x14,
    unk0x15,
    tevLayerIdxs,
    vtxAttrs,
    blendFactors
  };
}
function parseShape2(buffer, idx) {
  const view = buffer.createDataView();
  const material = parseMaterial2(buffer.slice(0, SHAPE_BASE_SIZE2), idx);
  const origin = vec38.create();
  const dlistFlags = view.getUint8(19);
  const frontCulledDlistSize = view.getInt32(40);
  const backCulledDlistSize = view.getInt32(44);
  vec38.set(origin, view.getFloat32(48), view.getFloat32(52), view.getFloat32(56));
  const dlists = [];
  let dlistOffs = SHAPE_BASE_SIZE2;
  if (dlistFlags & 1 /* HasDlist0 */) {
    const frontCulledDlist = buffer.slice(dlistOffs, dlistOffs + frontCulledDlistSize);
    dlists.push({
      data: frontCulledDlist,
      cullMode: material.flags & 2 /* DoubleSided */ ? 0 /* NONE */ : 1 /* FRONT */
    });
    dlistOffs += frontCulledDlistSize;
  }
  if (dlistFlags & 2 /* HasDlist1 */) {
    const backCulledDlist = buffer.slice(dlistOffs, dlistOffs + backCulledDlistSize);
    dlists.push({
      data: backCulledDlist,
      cullMode: material.flags & 2 /* DoubleSided */ ? 0 /* NONE */ : 2 /* BACK */
    });
    dlistOffs += backCulledDlistSize;
  }
  if (dlistFlags & (4 /* HasDlist2 */ | 8 /* HasDlist3 */)) {
    const extraFrontCulledDlistSize = view.getInt32(dlistOffs + 8);
    const extraBackCulledDlistSize = view.getInt32(dlistOffs + 12);
    dlistOffs += 32;
    const extraFrontCulledDlist = buffer.slice(dlistOffs, dlistOffs + extraFrontCulledDlistSize);
    dlists.push({ data: extraFrontCulledDlist, cullMode: 1 /* FRONT */ });
    dlistOffs += extraFrontCulledDlistSize;
    const extraBackCulledDlist = buffer.slice(dlistOffs, dlistOffs + extraBackCulledDlistSize);
    dlists.push({ data: extraBackCulledDlist, cullMode: 2 /* BACK */ });
    dlistOffs += extraBackCulledDlistSize;
  }
  return {
    material,
    origin,
    dlists,
    size: dlistOffs
  };
}
function parseModel3(buffer, name, tpl) {
  const view = buffer.createDataView();
  assert(readString(buffer, 0, 4) === "GCMF");
  const tevLayers = [];
  const matrices = [];
  const shapes = [];
  const boundSphereCenter = vec38.create();
  const modelFlags = view.getUint32(4);
  let useVtxCon = modelFlags & (8 /* Skin */ | 16 /* Effective */);
  vec38.set(boundSphereCenter, view.getFloat32(8), view.getFloat32(12), view.getFloat32(16));
  const boundSphereRadius = view.getFloat32(20);
  const tevLayerCount = view.getInt16(24);
  const opaqueShapeCount = view.getInt16(26);
  const translucentShapeCount = view.getInt16(28);
  const mtxCount = view.getInt8(30);
  const texMtxSize = view.getInt32(32);
  let allMaterialCount = opaqueShapeCount + translucentShapeCount;
  let offs = 64;
  for (let i = 0; i < tevLayerCount; i++) {
    tevLayers.push(parseTevLayer2(buffer.slice(offs), tpl));
    offs += 32;
  }
  for (let i = 0; i < mtxCount; i++) {
    matrices.push(parseMatrix2(buffer.slice(offs)));
    offs += 48;
  }
  let vtxConCount = 0;
  let vtxCon1Offs = 0;
  let vtxCon2Offs = 0;
  let vtxCon3Offs = 0;
  let vtxCon4Offs = 0;
  if (useVtxCon) {
    vtxConCount = view.getInt32(texMtxSize + 0);
    vtxCon1Offs = view.getInt32(texMtxSize + 4);
    vtxCon2Offs = view.getInt32(texMtxSize + 8);
    vtxCon3Offs = view.getInt32(texMtxSize + 12);
    vtxCon4Offs = view.getInt32(texMtxSize + 16);
  }
  let shapeOffs = useVtxCon ? 32 : 0;
  let shapeBuff = buffer.slice(texMtxSize);
  for (let i = 0; i < allMaterialCount; i++) {
    const shape = parseShape2(shapeBuff.slice(shapeOffs), i);
    shapeOffs += shape.size;
    if (shape.material.vtxAttrs & 1 << 25 /* _NBT */) {
      continue;
    }
    shapes.push(shape);
  }
  return {
    name,
    flags: modelFlags,
    boundSphereCenter,
    boundSphereRadius,
    opaqueShapeCount,
    translucentShapeCount,
    matrices,
    tevLayers,
    shapes
  };
}
function parseGma2(gmaBuffer, tpl) {
  const view = gmaBuffer.createDataView();
  const count = view.getInt32(0);
  const gcmfEntryOffs = [];
  const gcmfBaseOffs = view.getUint32(4);
  const entry = gmaBuffer.slice(8);
  const entryView = entry.createDataView();
  let offs = 0;
  for (let i = 0; i < count; i++) {
    const gcmfOffs = entryView.getInt32(offs);
    const nameOffs = entryView.getInt32(offs + 4);
    gcmfEntryOffs.push({ gcmfOffs, nameOffs });
    offs += 8;
  }
  const modelNameMap = /* @__PURE__ */ new Map();
  const modelIdMap = /* @__PURE__ */ new Map();
  const nameBuf = entry.slice(8 * count, gcmfBaseOffs);
  const modelBuf = gmaBuffer.slice(gcmfBaseOffs);
  for (let i = 0; i < gcmfEntryOffs.length; i++) {
    let nameOffs = gcmfEntryOffs[i].nameOffs;
    let modelOffs = gcmfEntryOffs[i].gcmfOffs;
    if (modelOffs < 0 && nameOffs <= 0) {
      continue;
    }
    const name = readString(nameBuf, nameOffs);
    const modelFlags = view.getUint32(gcmfBaseOffs + modelOffs + 4);
    const unsupported = modelFlags & (4 /* Stitching */ | 8 /* Skin */ | 16 /* Effective */);
    if (unsupported) {
      continue;
    }
    const model = parseModel3(modelBuf.slice(modelOffs), name, tpl);
    if (model.opaqueShapeCount + model.translucentShapeCount < 1) {
      continue;
    }
    modelNameMap.set(name, model);
    modelIdMap.set(i, model);
  }
  return { nameMap: modelNameMap, idMap: modelIdMap };
}

// src/noclip/SuperMonkeyBall/Material.ts
var SWAP_TABLES = [
  [0 /* R */, 1 /* G */, 2 /* B */, 3 /* A */],
  [0 /* R */, 1 /* G */, 2 /* B */, 0 /* R */],
  // Used for alpha textures
  [0 /* R */, 1 /* G */, 2 /* B */, 1 /* G */],
  [0 /* R */, 1 /* G */, 2 /* B */, 2 /* B */]
];
var WORLD_SPECULAR_TEX_WIDTH = 16;
var WORLD_SPECULAR_TEX_HEIGHT = 4;
var worldSpecularTexture = null;
var worldSpecularSampler = null;
function fillWorldSpecularMapping(renderCache, mapping) {
  if (worldSpecularTexture === null || worldSpecularSampler === null) {
    const device = renderCache.device;
    worldSpecularTexture = device.createTexture(
      makeTextureDescriptor2D(GfxFormat.U8_RGBA_NORM, WORLD_SPECULAR_TEX_WIDTH, WORLD_SPECULAR_TEX_HEIGHT, 1)
    );
    const data = new Uint8Array(WORLD_SPECULAR_TEX_WIDTH * WORLD_SPECULAR_TEX_HEIGHT * 4);
    for (let y = 0; y < WORLD_SPECULAR_TEX_HEIGHT; y++) {
      const value = y < 2 ? 255 : 0;
      for (let x = 0; x < WORLD_SPECULAR_TEX_WIDTH; x++) {
        const idx = (y * WORLD_SPECULAR_TEX_WIDTH + x) * 4;
        data[idx + 0] = value;
        data[idx + 1] = value;
        data[idx + 2] = value;
        data[idx + 3] = 255;
      }
    }
    device.uploadTextureData(worldSpecularTexture, 0, [data]);
    worldSpecularSampler = device.createSampler({
      wrapS: 0 /* Clamp */,
      wrapT: 0 /* Clamp */,
      minFilter: 1 /* Bilinear */,
      magFilter: 1 /* Bilinear */,
      mipFilter: 0 /* Nearest */,
      minLOD: 0,
      maxLOD: 0
    });
  }
  mapping.gfxTexture = worldSpecularTexture;
  mapping.gfxSampler = worldSpecularSampler;
  mapping.width = WORLD_SPECULAR_TEX_WIDTH;
  mapping.height = WORLD_SPECULAR_TEX_HEIGHT;
}
function buildDiffuseLayer(mb, state, colorIn, alphaIn, texGenMatrix) {
  mb.setTevDirect(state.stage);
  mb.setTevSwapMode(state.stage, SWAP_TABLES[0], SWAP_TABLES[0]);
  mb.setTexCoordGen(state.texCoord, 1 /* MTX2x4 */, state.texGenSrc, texGenMatrix);
  mb.setTevOrder(state.stage, state.texCoord, state.texMap, 0 /* COLOR0A0 */);
  mb.setTevColorIn(state.stage, 15 /* ZERO */, 8 /* TEXC */, colorIn, 15 /* ZERO */);
  mb.setTevColorOp(state.stage, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  mb.setTevAlphaIn(state.stage, 7 /* ZERO */, 4 /* TEXA */, alphaIn, 7 /* ZERO */);
  mb.setTevAlphaOp(state.stage, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  state.stage++;
  state.texCoord++;
  state.texMap++;
  state.texGenSrc++;
}
function buildViewSpecularLayer(mb, state, colorIn, alphaIn) {
  mb.setTevDirect(state.stage);
  mb.setTevSwapMode(state.stage, SWAP_TABLES[0], SWAP_TABLES[0]);
  mb.setTevKColorSel(state.stage, 12 /* KCSEL_K0 */);
  mb.setTexCoordGen(
    state.texCoord,
    0 /* MTX3x4 */,
    1 /* NRM */,
    30 /* TEXMTX0 */,
    true,
    64 /* PTTEXMTX0 */
  );
  mb.setTevOrder(state.stage, state.texCoord, state.texMap, 0 /* COLOR0A0 */);
  mb.setTevColorIn(state.stage, 15 /* ZERO */, 8 /* TEXC */, 14 /* KONST */, colorIn);
  mb.setTevColorOp(state.stage, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  mb.setTevAlphaIn(state.stage, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, alphaIn);
  mb.setTevAlphaOp(state.stage, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  state.stage++;
  state.texCoord++;
  state.texMap++;
  state.texGenSrc++;
}
function buildWorldSpecularLayer(mb, state, colorIn, alphaIn) {
  const stage0 = state.stage;
  const stage1 = state.stage + 1;
  mb.setTevDirect(stage0);
  mb.setTevSwapMode(stage0, SWAP_TABLES[0], SWAP_TABLES[0]);
  mb.setTevKColorSel(stage0, 13 /* KCSEL_K1 */);
  mb.setTexCoordGen(
    state.texCoord,
    0 /* MTX3x4 */,
    1 /* NRM */,
    30 /* TEXMTX0 */,
    true,
    70 /* PTTEXMTX2 */
  );
  mb.setTevOrder(stage0, state.texCoord, 0 /* TEXMAP0 */, 0 /* COLOR0A0 */);
  mb.setTevColorIn(stage0, 15 /* ZERO */, 8 /* TEXC */, 14 /* KONST */, 15 /* ZERO */);
  mb.setTevColorOp(stage0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 3 /* REG2 */);
  mb.setTevAlphaIn(stage0, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, alphaIn);
  mb.setTevAlphaOp(stage0, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 3 /* REG2 */);
  mb.setTevDirect(stage1);
  mb.setTevSwapMode(stage1, SWAP_TABLES[0], SWAP_TABLES[0]);
  mb.setTexCoordGen(
    state.texCoord + 1,
    0 /* MTX3x4 */,
    1 /* NRM */,
    30 /* TEXMTX0 */,
    true,
    67 /* PTTEXMTX1 */
  );
  mb.setTevOrder(stage1, state.texCoord + 1, state.texMap, 0 /* COLOR0A0 */);
  mb.setTevColorIn(stage1, 15 /* ZERO */, 8 /* TEXC */, 6 /* C2 */, colorIn);
  mb.setTevColorOp(stage1, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  mb.setTevAlphaIn(stage1, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, alphaIn);
  mb.setTevAlphaOp(stage1, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  state.stage += 2;
  state.texCoord += 2;
  state.texMap += 1;
  state.texGenSrc++;
}
function buildAlphaBlendLayer(mb, state, colorIn, alphaIn, texGenMatrix) {
  mb.setTevDirect(state.stage);
  mb.setTevSwapMode(state.stage, SWAP_TABLES[0], SWAP_TABLES[1]);
  mb.setTexCoordGen(state.texCoord, 1 /* MTX2x4 */, state.texGenSrc, texGenMatrix);
  mb.setTevOrder(state.stage, state.texCoord, state.texMap, 0 /* COLOR0A0 */);
  mb.setTevColorIn(state.stage, 15 /* ZERO */, 15 /* ZERO */, 15 /* ZERO */, colorIn);
  mb.setTevColorOp(state.stage, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  mb.setTevAlphaIn(state.stage, 7 /* ZERO */, 4 /* TEXA */, alphaIn, 7 /* ZERO */);
  mb.setTevAlphaOp(state.stage, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  state.stage++;
  state.texCoord++;
  state.texMap++;
  state.texGenSrc++;
}
function buildDummyPassthroughLayer(mb, state, colorIn, alphaIn) {
  mb.setTevDirect(state.stage);
  mb.setTevOrder(state.stage, 255 /* TEXCOORD_NULL */, 255 /* TEXMAP_NULL */, 0 /* COLOR0A0 */);
  mb.setTevColorIn(state.stage, 15 /* ZERO */, 15 /* ZERO */, 15 /* ZERO */, colorIn);
  mb.setTevColorOp(state.stage, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  mb.setTevAlphaIn(state.stage, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, alphaIn);
  mb.setTevAlphaOp(state.stage, 0 /* ADD */, 0 /* ZERO */, 0 /* SCALE_1 */, true, 0 /* PREV */);
  state.stage++;
}
var scratchMaterialParams2 = new MaterialParams();
var scratchColor1 = colorNewCopy(White);
var scratchColor2 = colorNewCopy(White);
var scratchColor3 = colorNewCopy(White);
var scratchVec3a4 = vec39.create();
var scratchVec3b3 = vec39.create();
var scratchVec3c2 = vec39.create();
var scratchVec3d2 = vec39.create();
var scratchVec3e2 = vec39.create();
var scratchMat4a = mat48.create();
var vec3Zero = vec39.fromValues(0, 0, 0);
var vec3Up = vec39.fromValues(0, 1, 0);
function mat4GetElem(m, row, col) {
  return m[col * 4 + row];
}
function mat4SetElem(m, row, col, value) {
  m[col * 4 + row] = value;
}
function scaleMat4x3(m, scale) {
  for (let col = 0; col < 3; col++) {
    for (let row = 0; row < 3; row++) {
      m[col * 4 + row] *= scale;
    }
  }
}
function applySpecularPostTransform(dst, src) {
  mat48.copy(dst, src);
  mat4SetElem(dst, 0, 3, 0.5);
  mat4SetElem(dst, 1, 0, -mat4GetElem(dst, 1, 0));
  mat4SetElem(dst, 1, 1, -mat4GetElem(dst, 1, 1));
  mat4SetElem(dst, 1, 2, -mat4GetElem(dst, 1, 2));
  mat4SetElem(dst, 1, 3, 0.5);
  mat4SetElem(dst, 2, 0, 0);
  mat4SetElem(dst, 2, 1, 0);
  mat4SetElem(dst, 2, 2, 0);
  mat4SetElem(dst, 2, 3, 1);
  scaleMat4x3(dst, 0.5);
}
function computeViewSpecularPostTexMtx(dst, modelDirView) {
  mat48.lookAt(dst, vec3Zero, modelDirView, vec3Up);
  applySpecularPostTransform(dst, dst);
}
function computeWorldSpecularPostTexMtx(dst1, dst2, modelDirView, lightDirView) {
  const target = scratchVec3c2;
  const scaledModelDir = scratchVec3d2;
  const up = scratchVec3e2;
  vec39.scale(scaledModelDir, modelDirView, -0.9);
  vec39.add(target, lightDirView, scaledModelDir);
  vec39.scale(target, target, 0.5);
  vec39.sub(up, target, scaledModelDir);
  mat48.lookAt(scratchMat4a, vec3Zero, target, up);
  applySpecularPostTransform(dst1, scratchMat4a);
  mat48.identity(dst2);
  mat4SetElem(dst2, 0, 0, 0);
  mat4SetElem(dst2, 0, 2, 0.5);
  mat4SetElem(dst2, 0, 3, 0.5);
  mat4SetElem(dst2, 1, 1, 0);
  mat4SetElem(dst2, 2, 2, 0);
  mat4SetElem(dst2, 2, 3, 1);
  mat48.mul(dst2, dst2, scratchMat4a);
}
var MaterialInst2 = class {
  constructor(materialData, modelTevLayers, translucentShape, cullMode, modelBoundCenter, modelBoundRadius) {
    this.materialData = materialData;
    this.translucentShape = translucentShape;
    this.cullMode = cullMode;
    this.modelBoundCenter = modelBoundCenter;
    this.modelBoundRadius = modelBoundRadius;
    this.tevLayers = [];
    this.textureSlots = [];
    for (let i = 0; i < materialData.tevLayerCount; i++) {
      const tevLayerIdx = materialData.tevLayerIdxs[i];
      const tevLayer = modelTevLayers[tevLayerIdx];
      const flags = tevLayer.tevLayerData.flags;
      this.tevLayers.push(tevLayer);
      if (flags & 1 /* TypeViewSpecular */) this.hasViewSpecular = true;
      if (flags & 32768 /* TypeWorldSpecular */) {
        this.hasWorldSpecular = true;
      }
      this.textureSlots.push(tevLayer);
    }
    this.genGXMaterial();
  }
  tevLayers;
  materialHelper;
  textureSlots;
  hasViewSpecular = false;
  hasWorldSpecular = false;
  genGXMaterial() {
    const mb = new GXMaterialBuilder();
    mb.setCullMode(this.cullMode);
    let colorIn = 10 /* RASC */;
    let alphaIn = 5 /* RASA */;
    if (this.materialData.flags & 1 /* Unlit */) {
      if (this.materialData.flags & 256 /* VertColors */) {
        mb.setChanCtrl(
          4 /* COLOR0A0 */,
          false,
          1 /* VTX */,
          // Ambient src, no-op. With light channel disabled there is no ambient light
          1 /* VTX */,
          // Material source
          0,
          0 /* NONE */,
          2 /* NONE */
        );
      } else {
        colorIn = 2 /* C0 */;
        alphaIn = 1 /* A0 */;
      }
    } else {
      if (this.materialData.flags & 256 /* VertColors */) {
        mb.setChanCtrl(
          2 /* ALPHA0 */,
          // chan
          false,
          // enable
          0 /* REG */,
          // amb_src
          1 /* VTX */,
          // mat_src
          0,
          // light_mask
          0 /* NONE */,
          // diff_fn
          2 /* NONE */
          // attn_fn
        );
        mb.setChanCtrl(
          0 /* COLOR0 */,
          // chan
          true,
          // enable
          0 /* REG */,
          // amb_src
          1 /* VTX */,
          // mat_src
          1,
          // light_mask, assuming we only have on directional light for now
          2 /* CLAMP */,
          // diff_fn
          1 /* SPOT */
          // attn_fn
        );
      } else {
        mb.setChanCtrl(
          2 /* ALPHA0 */,
          // chan
          false,
          // enable
          0 /* REG */,
          // amb_src
          0 /* REG */,
          // mat_src
          0,
          // light_mask
          0 /* NONE */,
          // diff_fn
          2 /* NONE */
          // attn_fn
        );
        mb.setChanCtrl(
          0 /* COLOR0 */,
          // chan
          true,
          // enable
          0 /* REG */,
          // amb_src
          0 /* REG */,
          // mat_src
          1,
          // light_mask, assuming we only have on directional light for now
          2 /* CLAMP */,
          // diff_fn
          1 /* SPOT */
          // attn_fn
        );
      }
    }
    const buildState = {
      stage: 0,
      texCoord: 0 /* TEXCOORD0 */,
      texMap: this.hasWorldSpecular ? 1 /* TEXMAP1 */ : 0 /* TEXMAP0 */,
      texGenSrc: 4 /* TEX0 */
    };
    if (this.materialData.flags & 128 /* SimpleMaterial */) {
      mb.setTevOrder(
        buildState.stage,
        255 /* TEXCOORD_NULL */,
        255 /* TEXMAP_NULL */,
        0 /* COLOR0A0 */
      );
      mb.setTevColorIn(buildState.stage, 15 /* ZERO */, 15 /* ZERO */, 15 /* ZERO */, colorIn);
      mb.setTevColorOp(
        buildState.stage,
        0 /* ADD */,
        0 /* ZERO */,
        0 /* SCALE_1 */,
        true,
        0 /* PREV */
      );
      mb.setTevAlphaIn(buildState.stage, 7 /* ZERO */, 7 /* ZERO */, 7 /* ZERO */, alphaIn);
      mb.setTevAlphaOp(
        buildState.stage,
        0 /* ADD */,
        0 /* ZERO */,
        0 /* SCALE_1 */,
        true,
        0 /* PREV */
      );
      buildState.stage++;
    } else {
      for (let layerIdx = 0; layerIdx < this.tevLayers.length; layerIdx++) {
        const layer = this.tevLayers[layerIdx];
        const texGenMatrix = layer.tevLayerData.flags & 131072 /* EnableUvScroll */ ? 33 /* TEXMTX1 */ : 36 /* TEXMTX2 */;
        const layerTypeFlags = layer.tevLayerData.flags & (8192 /* TypeAlphaBlend */ | 1 /* TypeViewSpecular */ | 32768 /* TypeWorldSpecular */);
        if (layerTypeFlags === 0) {
          buildDiffuseLayer(mb, buildState, colorIn, alphaIn, texGenMatrix);
        } else if (layerTypeFlags & 8192 /* TypeAlphaBlend */) {
          buildAlphaBlendLayer(mb, buildState, colorIn, alphaIn, texGenMatrix);
        } else if (layerTypeFlags & 1 /* TypeViewSpecular */) {
          buildViewSpecularLayer(mb, buildState, colorIn, alphaIn);
        } else if (layerTypeFlags & 32768 /* TypeWorldSpecular */) {
          buildWorldSpecularLayer(mb, buildState, colorIn, alphaIn);
        } else {
          buildDummyPassthroughLayer(mb, buildState, colorIn, alphaIn);
        }
        colorIn = 0 /* CPREV */;
        alphaIn = 0 /* APREV */;
      }
    }
    mb.setAlphaCompare(4 /* GREATER */, 0, 0 /* AND */, 4 /* GREATER */, 0);
    let srcBlendFactor = 4 /* SRCALPHA */;
    if (this.materialData.flags & 32 /* CustomBlendSrc */) {
      srcBlendFactor = this.materialData.blendFactors & 15;
    }
    let destBlendFactor = 5 /* INVSRCALPHA */;
    if (this.materialData.flags & 64 /* CustomBlendDest */) {
      destBlendFactor = this.materialData.blendFactors >> 4 & 15;
    }
    mb.setBlendMode(1 /* BLEND */, srcBlendFactor, destBlendFactor, 0 /* CLEAR */);
    mb.setZMode(true, 3 /* LEQUAL */, true);
    this.materialHelper = new GXMaterialHelperGfx(mb.finish());
  }
  setMaterialHacks(hacks) {
    this.materialHelper.setMaterialHacks(hacks);
  }
  prewarmProgram(renderCache) {
    this.materialHelper.cacheProgram(renderCache);
  }
  setOnRenderInst(renderCache, inst, drawParams, renderParams) {
    this.materialHelper.setOnRenderInst(renderCache, inst);
    const materialParams = scratchMaterialParams2;
    materialParams.clear();
    if (this.hasWorldSpecular) {
      fillWorldSpecularMapping(renderCache, materialParams.m_TextureMapping[0]);
    }
    const texSlotOffset = this.hasWorldSpecular ? 1 : 0;
    for (let i = 0; i < this.textureSlots.length; i++) {
      const slot = this.textureSlots[i];
      slot.fillTextureMapping(materialParams.m_TextureMapping[i + texSlotOffset]);
    }
    const overrideTexture = renderParams.textureOverride;
    if (overrideTexture && overrideTexture.gfxTexture && overrideTexture.gfxSampler) {
      materialParams.m_TextureMapping[texSlotOffset].copy(overrideTexture);
    }
    const lighting = assertExists(renderParams.lighting);
    const ambientColor = scratchColor2;
    if (this.materialData.flags & 8 /* CustomMatAmbColors */) {
      colorMult(ambientColor, this.materialData.ambientColor, lighting.ambientColor);
    } else {
      colorCopy(ambientColor, lighting.ambientColor);
    }
    const materialColor = scratchColor1;
    if (this.materialData.flags & (8 /* CustomMatAmbColors */ | 128 /* SimpleMaterial */)) {
      colorCopy(materialColor, this.materialData.materialColor);
    } else {
      colorCopy(materialColor, White);
    }
    materialColor.a = this.materialData.alpha * renderParams.alpha;
    const colorMul = renderParams.colorMul;
    materialColor.r *= colorMul.r;
    materialColor.g *= colorMul.g;
    materialColor.b *= colorMul.b;
    materialColor.a *= colorMul.a;
    mat48.copy(materialParams.u_TexMtx[1], renderParams.texMtx);
    mat48.identity(materialParams.u_TexMtx[2]);
    ambientColor.r *= colorMul.r;
    ambientColor.g *= colorMul.g;
    ambientColor.b *= colorMul.b;
    ambientColor.a *= colorMul.a;
    colorCopy(materialParams.u_Color[0 /* MAT0 */], materialColor);
    colorCopy(materialParams.u_Color[2 /* AMB0 */], ambientColor);
    colorCopy(materialParams.u_Color[9 /* C0 */], materialColor);
    materialParams.u_Lights[0].copy(lighting.infLightViewSpace);
    const allowSpecular = !renderParams.disableSpecular;
    if (this.hasViewSpecular || this.hasWorldSpecular) {
      transformVec3Mat4w1(scratchVec3a4, renderParams.viewFromModel, this.modelBoundCenter);
      scratchVec3a4[2] -= this.modelBoundRadius;
      vec39.normalize(scratchVec3a4, scratchVec3a4);
      mat48.copy(materialParams.u_TexMtx[0], renderParams.viewFromModel);
      materialParams.u_TexMtx[0][12] = 0;
      materialParams.u_TexMtx[0][13] = 0;
      materialParams.u_TexMtx[0][14] = 0;
      if (this.hasViewSpecular) {
        computeViewSpecularPostTexMtx(materialParams.u_PostTexMtx[0], scratchVec3a4);
      }
      if (this.hasWorldSpecular) {
        vec39.normalize(scratchVec3b3, lighting.infLightViewSpace.Position);
        computeWorldSpecularPostTexMtx(
          materialParams.u_PostTexMtx[1],
          materialParams.u_PostTexMtx[2],
          scratchVec3a4,
          scratchVec3b3
        );
      }
      if (allowSpecular) {
        colorCopy(scratchColor3, this.materialData.specularColor);
        if (scratchColor3.r === 0 && scratchColor3.g === 0 && scratchColor3.b === 0) {
          colorCopy(scratchColor3, White);
        }
        scratchColor3.a = 1;
        if (this.hasViewSpecular) {
          colorCopy(materialParams.u_Color[4 /* K0 */], scratchColor3);
        }
        if (this.hasWorldSpecular) {
          scratchColor3.r *= lighting.specularColorScale.r;
          scratchColor3.g *= lighting.specularColorScale.g;
          scratchColor3.b *= lighting.specularColorScale.b;
          colorCopy(materialParams.u_Color[5 /* K1 */], scratchColor3);
        }
      } else {
        if (this.hasViewSpecular) {
          colorCopy(materialParams.u_Color[4 /* K0 */], OpaqueBlack);
        }
        if (this.hasWorldSpecular) {
          colorCopy(materialParams.u_Color[5 /* K1 */], OpaqueBlack);
        }
      }
    }
    this.materialHelper.allocateMaterialParamsDataOnInst(inst, materialParams);
    inst.setSamplerBindingsFromTextureMappings(materialParams.m_TextureMapping);
    this.materialHelper.allocateDrawParamsDataOnInst(inst, drawParams);
  }
};

// src/noclip/SuperMonkeyBall/Shape.ts
function fillVatFormat(vtxType, isNBT) {
  const vatFormat = [];
  const compShift = vtxType === 3 /* S16 */ ? 13 : 0;
  vatFormat[9 /* POS */] = { compCnt: 1 /* POS_XYZ */, compType: vtxType, compShift };
  vatFormat[10 /* NRM */] = {
    compCnt: isNBT ? 1 /* NRM_NBT */ : 0 /* NRM_XYZ */,
    compType: vtxType,
    compShift
  };
  vatFormat[11 /* CLR0 */] = {
    compCnt: 1 /* CLR_RGBA */,
    compType: 5 /* RGBA8 */,
    compShift
  };
  vatFormat[12 /* CLR1 */] = {
    compCnt: 1 /* CLR_RGBA */,
    compType: 5 /* RGBA8 */,
    compShift
  };
  vatFormat[13 /* TEX0 */] = { compCnt: 1 /* TEX_ST */, compType: vtxType, compShift };
  vatFormat[14 /* TEX1 */] = { compCnt: 1 /* TEX_ST */, compType: vtxType, compShift };
  vatFormat[15 /* TEX2 */] = { compCnt: 1 /* TEX_ST */, compType: vtxType, compShift };
  return vatFormat;
}
function generateLoadedVertexData(dlist, loader) {
  const arrays = [];
  const loadedVertexData = loader.runVertices(arrays, dlist);
  return loadedVertexData;
}
var SubShapeInst = class {
  constructor(cache2, material, loadedVertexLayout, loadedVertexData, buffers) {
    this.material = material;
    this.loadedVertexData = loadedVertexData;
    this.buffers = buffers;
    this.inputLayout = createInputLayout(cache2, loadedVertexLayout);
    assert(this.loadedVertexData.draws.length === 1);
  }
  inputLayout;
  setOnRenderInst(cache2, renderInst, drawParams, renderParams) {
    this.material.setOnRenderInst(cache2, renderInst, drawParams, renderParams);
    renderInst.setVertexInput(this.inputLayout, this.buffers.vertexBuffers, this.buffers.indexBuffer);
    const draw = this.loadedVertexData.draws[0];
    renderInst.setDrawCount(draw.indexCount, draw.indexOffset);
  }
  setVertexInput(renderInst) {
    renderInst.setVertexInput(this.inputLayout, this.buffers.vertexBuffers, this.buffers.indexBuffer);
    const draw = this.loadedVertexData.draws[0];
    renderInst.setDrawCount(draw.indexCount, draw.indexOffset);
  }
};
var scratchDrawParams2 = new DrawParams();
var scratchVec3a5 = vec310.create();
var ShapeInst = class {
  constructor(device, renderCache, shapeData, modelTevLayers, modelFlags, translucent, modelBoundCenter, modelBoundRadius) {
    this.shapeData = shapeData;
    this.translucent = translucent;
    this.modelBoundCenter = modelBoundCenter;
    this.modelBoundRadius = modelBoundRadius;
    const vtxAttr = shapeData.material.vtxAttrs;
    const vcd = [];
    for (let i = 0; i <= 20 /* MAX */; i++) {
      if ((vtxAttr & 1 << i) !== 0) {
        vcd[i] = { type: 1 /* DIRECT */ };
      }
    }
    const isNBT = (vtxAttr & 1 << 25 /* _NBT */) !== 0;
    if (isNBT) {
      vcd[10 /* NRM */] = { type: 1 /* DIRECT */ };
    }
    const vat = [];
    vat[0 /* VTXFMT0 */] = fillVatFormat(4 /* F32 */, isNBT);
    vat[1 /* VTXFMT1 */] = fillVatFormat(3 /* S16 */, isNBT);
    const loader = compileVtxLoaderMultiVat(vat, vcd);
    const loadedVertexLayout = loader.loadedVertexLayout;
    const loadedVertexDatas = shapeData.dlists.map(
      (dlist) => generateLoadedVertexData(dlist.data.slice(1), loader)
    );
    this.bufferCoalescer = loadedDataCoalescerComboGfx(device, loadedVertexDatas);
    this.subShapes = shapeData.dlists.map((dlist, i) => {
      const buf = this.bufferCoalescer.coalescedBuffers[i];
      const material = new MaterialInst2(
        shapeData.material,
        modelTevLayers,
        translucent,
        dlist.cullMode,
        this.modelBoundCenter,
        this.modelBoundRadius
      );
      return new SubShapeInst(renderCache, material, loadedVertexLayout, loadedVertexDatas[i], buf);
    });
  }
  bufferCoalescer;
  subShapes;
  setMaterialHacks(hacks) {
    for (let i = 0; i < this.subShapes.length; i++) {
      this.subShapes[i].material.setMaterialHacks(hacks);
    }
  }
  prewarmPrograms(renderCache) {
    for (let i = 0; i < this.subShapes.length; i++) {
      this.subShapes[i].material.prewarmProgram(renderCache);
    }
  }
  prepareToRender(ctx, renderParams) {
    const drawParams = scratchDrawParams2;
    mat49.copy(drawParams.u_PosMtx[0], renderParams.viewFromModel);
    for (let i = 0; i < this.subShapes.length; i++) {
      const renderInst = ctx.renderInstManager.newRenderInst();
      const subShape = this.subShapes[i];
      subShape.setOnRenderInst(ctx.renderInstManager.gfxRenderCache, renderInst, drawParams, renderParams);
      if (renderParams.megaStateFlags) {
        renderInst.setMegaStateFlags(renderParams.megaStateFlags);
      }
      if (ctx.forceAlphaWrite) {
        setAttachmentStateSimple(renderInst.getMegaStateFlags(), {
          channelWriteMask: GfxChannelWriteMask.RGBA
        });
      }
      if (this.translucent && renderParams.sort === 0 /* Translucent */ || renderParams.sort === 1 /* All */) {
        const originViewSpace = scratchVec3a5;
        transformVec3Mat4w1(originViewSpace, renderParams.viewFromModel, this.shapeData.origin);
        renderInst.sortKey = -(vec310.len(originViewSpace) + renderParams.depthOffset);
        ctx.translucentInstList.submitRenderInst(renderInst);
      } else {
        ctx.opaqueInstList.submitRenderInst(renderInst);
      }
    }
  }
  prepareToRenderCustom(ctx, renderParams, configureRenderInst) {
    for (let i = 0; i < this.subShapes.length; i++) {
      const renderInst = ctx.renderInstManager.newRenderInst();
      configureRenderInst(renderInst, renderParams);
      this.subShapes[i].setVertexInput(renderInst);
      if (ctx.forceAlphaWrite) {
        setAttachmentStateSimple(renderInst.getMegaStateFlags(), {
          channelWriteMask: GfxChannelWriteMask.RGBA
        });
      }
      if (renderParams.sort === 0 /* Translucent */ || renderParams.sort === 1 /* All */) {
        const originViewSpace = scratchVec3a5;
        transformVec3Mat4w1(originViewSpace, renderParams.viewFromModel, this.shapeData.origin);
        renderInst.sortKey = -(vec310.len(originViewSpace) + renderParams.depthOffset);
        ctx.translucentInstList.submitRenderInst(renderInst);
      } else {
        ctx.opaqueInstList.submitRenderInst(renderInst);
      }
    }
  }
  destroy(device) {
    this.bufferCoalescer.destroy(device);
  }
};

// src/noclip/SuperMonkeyBall/Model.ts
var RenderParams2 = class {
  viewFromModel = mat410.create();
  alpha;
  sort;
  texMtx = mat410.create();
  lighting;
  depthOffset;
  colorMul;
  disableSpecular;
  textureOverride;
  megaStateFlags;
  constructor() {
    this.colorMul = colorNewFromRGBA(1, 1, 1, 1);
    this.reset();
  }
  reset() {
    mat410.identity(this.viewFromModel);
    this.alpha = 1;
    this.sort = 0 /* Translucent */;
    mat410.identity(this.texMtx);
    this.lighting = null;
    this.depthOffset = 0;
    this.colorMul.r = 1;
    this.colorMul.g = 1;
    this.colorMul.b = 1;
    this.colorMul.a = 1;
    this.disableSpecular = false;
    this.textureOverride = null;
    this.megaStateFlags = void 0;
  }
};
var scratchVec3a6 = vec311.create();
var scratchVec3b4 = vec311.create();
var ModelInst2 = class {
  // Each shape's material uses up to three of these
  constructor(device, renderCache, modelData, texHolder) {
    this.modelData = modelData;
    this.tevLayers = modelData.tevLayers.map(
      (tevLayerData) => new TevLayerInst(device, renderCache, tevLayerData, texHolder)
    );
    this.shapes = modelData.shapes.map(
      (shapeData, i) => new ShapeInst(
        device,
        renderCache,
        shapeData,
        this.tevLayers,
        modelData.flags,
        i >= modelData.opaqueShapeCount,
        modelData.boundSphereCenter,
        modelData.boundSphereRadius
      )
    );
    this.prewarmPrograms(renderCache);
  }
  shapes;
  tevLayers;
  setMaterialHacks(hacks) {
    for (let i = 0; i < this.shapes.length; i++) {
      this.shapes[i].setMaterialHacks(hacks);
    }
  }
  prewarmPrograms(renderCache) {
    for (let i = 0; i < this.shapes.length; i++) {
      this.shapes[i].prewarmPrograms(renderCache);
    }
  }
  prepareToRender(ctx, renderParams) {
    const scale = scratchVec3a6;
    mat410.getScaling(scale, renderParams.viewFromModel);
    const maxScale = Math.max(...scale);
    const centerWorldSpace = scratchVec3a6;
    transformVec3Mat4w1(centerWorldSpace, renderParams.viewFromModel, this.modelData.boundSphereCenter);
    transformVec3Mat4w1(centerWorldSpace, ctx.viewerInput.camera.worldMatrix, centerWorldSpace);
    const mirrorPlaneNormal = ctx.mirrorPlaneNormal;
    const mirrorPlanePoint = ctx.mirrorPlanePoint;
    if (mirrorPlaneNormal && mirrorPlanePoint) {
      vec311.sub(scratchVec3b4, centerWorldSpace, mirrorPlanePoint);
      const dist = vec311.dot(scratchVec3b4, mirrorPlaneNormal);
      if (dist < -(this.modelData.boundSphereRadius * maxScale)) {
        return;
      }
    }
    const inFrustum = ctx.viewerInput.camera.frustum.containsSphere(
      centerWorldSpace,
      this.modelData.boundSphereRadius * maxScale
    );
    if (!inFrustum) return;
    for (let i = 0; i < this.shapes.length; i++) {
      this.shapes[i].prepareToRender(ctx, renderParams);
    }
  }
  prepareToRenderCustom(ctx, renderParams, configureRenderInst) {
    const scale = scratchVec3a6;
    mat410.getScaling(scale, renderParams.viewFromModel);
    const maxScale = Math.max(...scale);
    const centerWorldSpace = scratchVec3a6;
    transformVec3Mat4w1(centerWorldSpace, renderParams.viewFromModel, this.modelData.boundSphereCenter);
    transformVec3Mat4w1(centerWorldSpace, ctx.viewerInput.camera.worldMatrix, centerWorldSpace);
    const mirrorPlaneNormal = ctx.mirrorPlaneNormal;
    const mirrorPlanePoint = ctx.mirrorPlanePoint;
    if (mirrorPlaneNormal && mirrorPlanePoint) {
      vec311.sub(scratchVec3b4, centerWorldSpace, mirrorPlanePoint);
      const dist = vec311.dot(scratchVec3b4, mirrorPlaneNormal);
      if (dist < -(this.modelData.boundSphereRadius * maxScale)) {
        return;
      }
    }
    const inFrustum = ctx.viewerInput.camera.frustum.containsSphere(
      centerWorldSpace,
      this.modelData.boundSphereRadius * maxScale
    );
    if (!inFrustum) return;
    for (let i = 0; i < this.shapes.length; i++) {
      this.shapes[i].prepareToRenderCustom(ctx, renderParams, configureRenderInst);
    }
  }
  destroy(device) {
    for (let i = 0; i < this.shapes.length; i++) {
      this.shapes[i].destroy(device);
    }
  }
};

// src/noclip/SuperMonkeyBall/Background.ts
import { mat4 as mat411, vec3 as vec312 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/ModelCache.ts
var TextureCache = class {
  cache = /* @__PURE__ */ new Map();
  getTexture(device, gxTexture) {
    const loadedTex = this.cache.get(gxTexture.name);
    if (loadedTex === void 0) {
      const mipChain = calcMipChain(gxTexture, gxTexture.mipCount);
      const freshTex = loadTextureFromMipChain(device, mipChain);
      this.cache.set(gxTexture.name, freshTex.gfxTexture);
      return freshTex.gfxTexture;
    }
    return loadedTex;
  }
  destroy(device) {
    for (const loadedTex of this.cache.values())
      device.destroyTexture(loadedTex);
  }
};
var CacheEntry = class {
  constructor(gma) {
    this.gma = gma;
    this.modelCache = /* @__PURE__ */ new Map();
  }
  modelCache;
};
var ModelCache = class {
  constructor(device, renderCache, stageData) {
    this.device = device;
    this.renderCache = renderCache;
    this.stageEntry = new CacheEntry(stageData.stageGma);
    this.bgEntry = new CacheEntry(stageData.bgGma);
    this.commonEntry = new CacheEntry(stageData.commonGma);
    this.allEntries = [this.stageEntry, this.bgEntry, this.commonEntry];
    this.textureCache = new TextureCache();
    const usesSmb2Models = stageData.gameSource === "smb2" || stageData.gameSource === "mb2ws";
    if (usesSmb2Models) {
      this.blueGoalModel = this.findModelBySubstring(["GOAL_B", "GOAL"]);
      this.greenGoalModel = this.findModelBySubstring(["GOAL_G"]);
      this.redGoalModel = this.findModelBySubstring(["GOAL_R"]);
    } else {
      this.blueGoalModel = this.findBgSpecificModel("GOAL") || this.findBgSpecificModel("GOAL_B");
      this.greenGoalModel = this.findBgSpecificModel("GOAL_G");
      this.redGoalModel = this.findBgSpecificModel("GOAL_R");
    }
    this.bumperModel = this.findBgSpecificModel("BUMPER_L1");
    this.jamabarModel = this.getModel(83 /* mb_jamabar */, 2 /* Common */) ?? this.findModelBySubstring(["JAMABAR"]);
    if (usesSmb2Models) {
      this.wormholeModel = this.findModelBySubstring(["WORMHOLE"]);
      this.wormholeSurfaceModel = this.findModelBySubstring(["WORM_SURFACE"]);
    }
  }
  // Earlier appearance in this list is higher search precedence
  stageEntry;
  bgEntry;
  commonEntry;
  allEntries;
  textureCache;
  blueGoalModel = null;
  greenGoalModel = null;
  redGoalModel = null;
  bumperModel = null;
  jamabarModel = null;
  wormholeModel = null;
  wormholeSurfaceModel = null;
  fillTextureMappingFromGxTexture(gxTexture, mapping) {
    mapping.gfxTexture = this.textureCache.getTexture(this.device, gxTexture);
    mapping.width = gxTexture.width;
    mapping.height = gxTexture.height;
    mapping.flipY = false;
  }
  findModelBySubstring(substrings) {
    for (let i = 0; i < this.allEntries.length; i++) {
      const entry = this.allEntries[i];
      for (const gma of entry.gma.nameMap.values()) {
        if (substrings.some((substr) => gma.name.includes(substr))) {
          return this.getModelFromEntry(gma.name, entry);
        }
      }
    }
    return null;
  }
  findBgSpecificModel(postfix) {
    for (let i = 0; i < this.allEntries.length; i++) {
      const entry = this.allEntries[i];
      for (const gma of entry.gma.idMap.values()) {
        if (gma.name.slice(4) === postfix) {
          return this.getModelFromEntry(gma.name, entry);
        }
      }
    }
    return null;
  }
  getModelFromEntry(model, entry) {
    let modelData;
    if (typeof model === "number") {
      modelData = entry.gma.idMap.get(model);
    } else {
      modelData = entry.gma.nameMap.get(model);
    }
    if (modelData === void 0) {
      return null;
    }
    const modelInst = entry.modelCache.get(modelData.name);
    if (modelInst !== void 0) {
      return modelInst;
    }
    const freshModelInst = new ModelInst2(this.device, this.renderCache, modelData, this.textureCache);
    entry.modelCache.set(modelData.name, freshModelInst);
    return freshModelInst;
  }
  getModel(model, src) {
    switch (src) {
      case 0 /* Stage */: {
        return this.getModelFromEntry(model, this.stageEntry);
      }
      case 1 /* Bg */: {
        return this.getModelFromEntry(model, this.bgEntry);
      }
      case 2 /* Common */: {
        return this.getModelFromEntry(model, this.commonEntry);
      }
      case 3 /* StageAndBg */: {
        if (typeof model !== "string") {
          throw new Error("Must request model by name when searching in multiple sources");
        }
        return this.getModelFromEntry(model, this.stageEntry) ?? this.getModelFromEntry(model, this.bgEntry);
      }
    }
  }
  // Screw it, don't make fancy generic prefix whatever lookup just for goals, just do it here
  getBlueGoalModel() {
    return this.blueGoalModel;
  }
  getGreenGoalModel() {
    return this.greenGoalModel;
  }
  getRedGoalModel() {
    return this.redGoalModel;
  }
  getBumperModel() {
    return this.bumperModel;
  }
  getJamabarModel() {
    return this.jamabarModel;
  }
  getWormholeModel() {
    return this.wormholeModel;
  }
  getWormholeSurfaceModel() {
    return this.wormholeSurfaceModel;
  }
  setMaterialHacks(hacks) {
    for (let i = 0; i < this.allEntries.length; i++) {
      for (const model of this.allEntries[i].modelCache.values()) {
        model.setMaterialHacks(hacks);
      }
    }
  }
  destroy(device) {
    for (let i = 0; i < this.allEntries.length; i++) {
      this.allEntries[i].modelCache.forEach((model) => model.destroy(device));
    }
    this.textureCache.destroy(device);
  }
};

// src/noclip/SuperMonkeyBall/Background.ts
var scratchMat4a2 = mat411.create();
var scratchRenderParams = new RenderParams2();
var BgJungle = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
    }
  }
};
var BgWater = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
    }
  }
};
var NIGHT_WINDOW_A_MODELS = [
  9 /* NIG_MADO_A_PT00 */,
  10 /* NIG_MADO_A_PT01 */,
  11 /* NIG_MADO_A_PT02 */,
  12 /* NIG_MADO_A_PT03 */,
  13 /* NIG_MADO_A_PT04 */,
  14 /* NIG_MADO_A_PT05 */,
  15 /* NIG_MADO_A_PT06 */,
  16 /* NIG_MADO_A_PT07 */,
  17 /* NIG_MADO_A_PT08 */,
  18 /* NIG_MADO_A_PT09 */,
  19 /* NIG_MADO_A_PT10 */,
  20 /* NIG_MADO_A_PT11 */,
  21 /* NIG_MADO_A_PT12 */,
  22 /* NIG_MADO_A_PT13 */
];
var NIGHT_WINDOW_B_MODELS = [
  23 /* NIG_MADO_B_PT00 */,
  24 /* NIG_MADO_B_PT01 */,
  25 /* NIG_MADO_B_PT02 */,
  26 /* NIG_MADO_B_PT03 */,
  27 /* NIG_MADO_B_PT04 */,
  28 /* NIG_MADO_B_PT05 */,
  29 /* NIG_MADO_B_PT06 */,
  30 /* NIG_MADO_B_PT07 */,
  31 /* NIG_MADO_B_PT08 */,
  32 /* NIG_MADO_B_PT09 */,
  33 /* NIG_MADO_B_PT10 */
];
var NIGHT_WINDOW_C_MODELS = [
  34 /* NIG_MADO_C_PT00 */,
  35 /* NIG_MADO_C_PT01 */,
  36 /* NIG_MADO_C_PT02 */,
  37 /* NIG_MADO_C_PT03 */,
  38 /* NIG_MADO_C_PT04 */,
  39 /* NIG_MADO_C_PT05 */,
  40 /* NIG_MADO_C_PT06 */,
  41 /* NIG_MADO_C_PT07 */,
  42 /* NIG_MADO_C_PT08 */,
  43 /* NIG_MADO_C_PT09 */,
  44 /* NIG_MADO_C_PT10 */,
  45 /* NIG_MADO_C_PT11 */,
  46 /* NIG_MADO_C_PT12 */,
  47 /* NIG_MADO_C_PT13 */,
  48 /* NIG_MADO_C_PT14 */,
  49 /* NIG_MADO_C_PT15 */,
  50 /* NIG_MADO_C_PT16 */,
  51 /* NIG_MADO_C_PT17 */
];
var NIGHT_WINDOW_D_MODELS = [
  52 /* NIG_MADO_D_PT00 */,
  53 /* NIG_MADO_D_PT01 */,
  54 /* NIG_MADO_D_PT02 */,
  55 /* NIG_MADO_D_PT03 */,
  56 /* NIG_MADO_D_PT04 */,
  57 /* NIG_MADO_D_PT05 */,
  58 /* NIG_MADO_D_PT06 */,
  59 /* NIG_MADO_D_PT07 */,
  60 /* NIG_MADO_D_PT08 */,
  61 /* NIG_MADO_D_PT09 */,
  62 /* NIG_MADO_D_PT10 */,
  63 /* NIG_MADO_D_PT11 */,
  64 /* NIG_MADO_D_PT12 */,
  65 /* NIG_MADO_D_PT13 */,
  66 /* NIG_MADO_D_PT14 */,
  67 /* NIG_MADO_D_PT15 */,
  68 /* NIG_MADO_D_PT16 */,
  69 /* NIG_MADO_D_PT17 */
];
var NIGHT_WINDOW_E_MODELS = [
  70 /* NIG_MADO_E_PT00 */,
  71 /* NIG_MADO_E_PT01 */,
  72 /* NIG_MADO_E_PT02 */,
  73 /* NIG_MADO_E_PT03 */,
  74 /* NIG_MADO_E_PT04 */,
  75 /* NIG_MADO_E_PT05 */,
  76 /* NIG_MADO_E_PT06 */,
  77 /* NIG_MADO_E_PT07 */,
  78 /* NIG_MADO_E_PT08 */,
  79 /* NIG_MADO_E_PT09 */,
  80 /* NIG_MADO_E_PT10 */,
  81 /* NIG_MADO_E_PT11 */,
  82 /* NIG_MADO_E_PT12 */,
  83 /* NIG_MADO_E_PT13 */,
  84 /* NIG_MADO_E_PT14 */,
  85 /* NIG_MADO_E_PT15 */,
  86 /* NIG_MADO_E_PT16 */,
  87 /* NIG_MADO_E_PT17 */
];
var NIGHT_WINDOW_F_MODELS = [
  92 /* NIG_MADO_F_PT00 */,
  93 /* NIG_MADO_F_PT01 */,
  94 /* NIG_MADO_F_PT02 */,
  95 /* NIG_MADO_F_PT03 */,
  96 /* NIG_MADO_F_PT04 */,
  97 /* NIG_MADO_F_PT05 */,
  98 /* NIG_MADO_F_PT06 */,
  99 /* NIG_MADO_F_PT07 */,
  100 /* NIG_MADO_F_PT08 */,
  101 /* NIG_MADO_F_PT09 */,
  102 /* NIG_MADO_F_PT10 */,
  103 /* NIG_MADO_F_PT11 */,
  104 /* NIG_MADO_F_PT12 */,
  105 /* NIG_MADO_F_PT13 */,
  106 /* NIG_MADO_F_PT14 */,
  107 /* NIG_MADO_F_PT15 */
];
var NIGHT_WINDOW_G_MODELS = [
  108 /* NIG_MADO_G_PT00 */,
  109 /* NIG_MADO_G_PT01 */,
  110 /* NIG_MADO_G_PT02 */,
  111 /* NIG_MADO_G_PT03 */,
  112 /* NIG_MADO_G_PT04 */,
  113 /* NIG_MADO_G_PT05 */,
  114 /* NIG_MADO_G_PT06 */,
  115 /* NIG_MADO_G_PT07 */,
  116 /* NIG_MADO_G_PT08 */,
  117 /* NIG_MADO_G_PT09 */,
  118 /* NIG_MADO_G_PT10 */,
  119 /* NIG_MADO_G_PT11 */,
  120 /* NIG_MADO_G_PT12 */,
  121 /* NIG_MADO_G_PT13 */,
  122 /* NIG_MADO_G_PT14 */
];
var NIGHT_WINDOW_MODEL_LISTS = [
  NIGHT_WINDOW_A_MODELS,
  NIGHT_WINDOW_B_MODELS,
  NIGHT_WINDOW_C_MODELS,
  NIGHT_WINDOW_D_MODELS,
  NIGHT_WINDOW_E_MODELS,
  NIGHT_WINDOW_F_MODELS,
  NIGHT_WINDOW_G_MODELS
];
var BgNight = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
    for (const modelList of NIGHT_WINDOW_MODEL_LISTS) {
      for (const id of modelList) {
        state.modelCache.getModel(id, 1 /* Bg */);
      }
    }
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
      const flipbookAnims = this.bgObjects[i].bgObjectData.flipbookAnims;
      if (flipbookAnims === null) continue;
      for (let j = 0; j < flipbookAnims.nightWindowAnims.length; j++) {
        const windowAnim = flipbookAnims.nightWindowAnims[j];
        const modelListIdx = windowAnim.id - 65;
        const modelList = NIGHT_WINDOW_MODEL_LISTS[modelListIdx] ?? NIGHT_WINDOW_A_MODELS;
        const animFrame = Math.floor(state.time.getAnimTimeFrames() / 2) % modelList.length;
        const windowModel = assertExists(state.modelCache.getModel(modelList[animFrame], 1 /* Bg */));
        const renderParams = scratchRenderParams;
        renderParams.reset();
        renderParams.lighting = state.lighting;
        renderParams.sort = 2 /* None */;
        mat411.translate(renderParams.viewFromModel, ctx.viewerInput.camera.viewMatrix, windowAnim.pos);
        mat411.rotateZ(
          renderParams.viewFromModel,
          renderParams.viewFromModel,
          S16_TO_RADIANS * windowAnim.rot[2]
        );
        mat411.rotateY(
          renderParams.viewFromModel,
          renderParams.viewFromModel,
          S16_TO_RADIANS * windowAnim.rot[1]
        );
        mat411.rotateX(
          renderParams.viewFromModel,
          renderParams.viewFromModel,
          S16_TO_RADIANS * windowAnim.rot[0]
        );
        windowModel.prepareToRender(ctx, renderParams);
      }
    }
  }
};
var BgSunset = class {
  bgObjects = [];
  cloudModels = [];
  // Models to apply texture scroll to
  lastTimeFrames = 0;
  mode = 0 /* Default */;
  constructor(state, bgObjects) {
    for (const bgObject of bgObjects) {
      const name = bgObject.bgObjectData.modelName;
      if (name === "SUN_GROUND" || name.startsWith("SUN_CLOUD_")) {
        const cloudModel = {
          bgObject,
          currTexTranslate: vec312.create(),
          currTexVel: vec312.create(),
          desiredTexVel: vec312.create()
        };
        this.cloudModels.push(cloudModel);
        vec312.set(cloudModel.currTexTranslate, Math.random(), Math.random(), Math.random());
        vec312.set(cloudModel.desiredTexVel, 0, (Math.random() * 0.2 + 0.9) * 0.0015151514671742916, 0);
        vec312.rotateZ(cloudModel.desiredTexVel, cloudModel.desiredTexVel, Vec3Zero, Math.random() * Math.PI);
        vec312.copy(cloudModel.currTexVel, cloudModel.desiredTexVel);
      } else {
        this.bgObjects.push(bgObject);
      }
    }
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
    let speedUpClouds = false;
    if (this.mode === 0 /* Default */ && state.time.getStageTimeFrames() < 660) {
      this.mode = 1 /* HurryUp */;
      speedUpClouds = true;
    }
    for (let i = 0; i < this.cloudModels.length; i++) {
      const cloudModel = this.cloudModels[i];
      cloudModel.bgObject.update(state);
      if (speedUpClouds) {
        vec312.set(cloudModel.desiredTexVel, 0, (Math.random() * 0.2 + 0.9) * 0.0030303029343485832, 0);
        vec312.rotateZ(cloudModel.desiredTexVel, cloudModel.desiredTexVel, Vec3Zero, Math.random() * Math.PI);
      }
      const lerp4 = Math.pow(0.95, state.time.getDeltaTimeFrames());
      vec312.lerp(cloudModel.currTexVel, cloudModel.desiredTexVel, cloudModel.currTexVel, lerp4);
      vec312.scaleAndAdd(
        cloudModel.currTexTranslate,
        cloudModel.currTexTranslate,
        cloudModel.currTexVel,
        state.time.getDeltaTimeFrames()
      );
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
    }
    for (let i = 0; i < this.cloudModels.length; i++) {
      const cloudModel = this.cloudModels[i];
      const texMtx = scratchMat4a2;
      mat411.fromTranslation(texMtx, cloudModel.currTexTranslate);
      cloudModel.bgObject.prepareToRender(state, ctx, texMtx);
    }
  }
};
var BgSpace = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
    }
  }
};
var BgSand = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
    }
  }
};
var BgIce = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
    }
  }
};
var STORM_FIRE_MODELS = [
  8 /* STM_FIRE00 */,
  9 /* STM_FIRE01 */,
  10 /* STM_FIRE02 */,
  11 /* STM_FIRE03 */,
  12 /* STM_FIRE04 */,
  13 /* STM_FIRE05 */,
  14 /* STM_FIRE06 */,
  15 /* STM_FIRE07 */,
  16 /* STM_FIRE08 */,
  17 /* STM_FIRE09 */,
  18 /* STM_FIRE10 */,
  19 /* STM_FIRE11 */,
  20 /* STM_FIRE12 */,
  21 /* STM_FIRE13 */,
  22 /* STM_FIRE14 */,
  23 /* STM_FIRE15 */,
  24 /* STM_FIRE16 */,
  25 /* STM_FIRE17 */,
  26 /* STM_FIRE18 */,
  27 /* STM_FIRE19 */,
  28 /* STM_FIRE20 */,
  29 /* STM_FIRE21 */,
  30 /* STM_FIRE22 */,
  31 /* STM_FIRE23 */,
  32 /* STM_FIRE24 */,
  33 /* STM_FIRE25 */,
  34 /* STM_FIRE26 */,
  35 /* STM_FIRE27 */,
  36 /* STM_FIRE28 */,
  37 /* STM_FIRE29 */,
  38 /* STM_FIRE30 */,
  39 /* STM_FIRE31 */
];
var BgStorm = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
    for (const id of STORM_FIRE_MODELS) {
      state.modelCache.getModel(id, 1 /* Bg */);
    }
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    const cameraRotY = getMat4RotY(ctx.viewerInput.camera.worldMatrix);
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
      const flipbookAnims = this.bgObjects[i].bgObjectData.flipbookAnims;
      if (flipbookAnims === null) continue;
      for (let j = 0; j < flipbookAnims.stormFireAnims.length; j++) {
        const fireAnim = flipbookAnims.stormFireAnims[j];
        const fireFrame = (Math.floor(state.time.getAnimTimeFrames()) + 4 * fireAnim.frameOffset) % STORM_FIRE_MODELS.length;
        const fireModel = assertExists(state.modelCache.getModel(STORM_FIRE_MODELS[fireFrame], 1 /* Bg */));
        const renderParams = scratchRenderParams;
        renderParams.reset();
        renderParams.lighting = state.lighting;
        mat411.translate(renderParams.viewFromModel, ctx.viewerInput.camera.viewMatrix, fireAnim.pos);
        mat411.rotateY(renderParams.viewFromModel, renderParams.viewFromModel, cameraRotY);
        fireModel.prepareToRender(ctx, renderParams);
      }
    }
  }
};
var BgBonus = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
    }
  }
};
var BgMaster = class {
  bgObjects = [];
  constructor(state, bgObjects) {
    this.bgObjects = bgObjects;
  }
  update(state) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].update(state);
    }
  }
  prepareToRender(state, ctx) {
    for (let i = 0; i < this.bgObjects.length; i++) {
      this.bgObjects[i].prepareToRender(state, ctx);
    }
  }
};

// src/noclip/SuperMonkeyBall/StageInfo.ts
var BgInfos;
((BgInfos3) => {
  BgInfos3.Jungle = {
    fileName: "bg_jun",
    clearColor: colorNewFromRGBA8(4294967295),
    bgConstructor: BgJungle,
    ambientColor: colorNewFromRGBA(0.6, 0.6, 0.6),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Water = {
    fileName: "bg_wat",
    clearColor: colorNewFromRGBA8(255),
    bgConstructor: BgWater,
    ambientColor: colorNewFromRGBA(0.28, 0.48, 0.63),
    infLightColor: colorNewFromRGBA(0.6, 0.85, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Night = {
    fileName: "bg_nig",
    clearColor: colorNewFromRGBA8(255),
    bgConstructor: BgNight,
    ambientColor: colorNewFromRGBA(0.4, 0.4, 0.7),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Sunset = {
    fileName: "bg_sun",
    clearColor: colorNewFromRGBA8(255),
    bgConstructor: BgSunset,
    ambientColor: colorNewFromRGBA(0.4, 0.4, 0.7),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Space = {
    fileName: "bg_spa",
    clearColor: colorNewFromRGBA8(255),
    bgConstructor: BgSpace,
    ambientColor: colorNewFromRGBA(0.5, 0.45, 0.6),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 29184,
    infLightRotY: 17664
  };
  BgInfos3.Sand = {
    fileName: "bg_snd",
    clearColor: colorNewFromRGBA8(3636230143),
    bgConstructor: BgSand,
    ambientColor: colorNewFromRGBA(0.45, 0.4, 0.25),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 24576,
    infLightRotY: 24576
  };
  BgInfos3.Ice = {
    fileName: "bg_ice",
    clearColor: colorNewFromRGBA8(255),
    bgConstructor: BgIce,
    ambientColor: colorNewFromRGBA(0.55, 0.6, 0.85),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Storm = {
    fileName: "bg_stm",
    clearColor: colorNewFromRGBA8(255),
    bgConstructor: BgStorm,
    ambientColor: colorNewFromRGBA(0.3, 0.3, 0.45),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Bonus = {
    fileName: "bg_bns",
    clearColor: colorNewFromRGBA8(255),
    bgConstructor: BgBonus,
    ambientColor: colorNewFromRGBA(0.6, 0.7, 0.8),
    infLightColor: colorNewFromRGBA(0.8, 0.8, 0.8),
    infLightRotX: -11776,
    infLightRotY: 21888
  };
  BgInfos3.Target = {
    fileName: "bg_pil",
    clearColor: colorNewFromRGBA8(4294967295),
    bgConstructor: {},
    ambientColor: colorNewFromRGBA(0.6, 0.6, 0.6),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Golf = {
    fileName: "bg_gol",
    clearColor: colorNewFromRGBA8(4294967295),
    bgConstructor: {},
    ambientColor: colorNewFromRGBA(0.6, 0.6, 0.6),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Bowling = {
    fileName: "bg_bow",
    clearColor: colorNewFromRGBA8(4294967295),
    bgConstructor: {},
    ambientColor: colorNewFromRGBA(0.6, 0.6, 0.6),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Master = {
    fileName: "bg_mst",
    clearColor: colorNewFromRGBA8(4294954495),
    bgConstructor: BgMaster,
    ambientColor: colorNewFromRGBA(0.6, 0.6, 0.6),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
  BgInfos3.Ending = {
    fileName: "bg_ending",
    clearColor: colorNewFromRGBA8(4294967295),
    bgConstructor: {},
    ambientColor: colorNewFromRGBA(0.6, 0.6, 0.6),
    infLightColor: colorNewFromRGBA(1, 1, 1),
    infLightRotX: 8192,
    infLightRotY: 24576
  };
})(BgInfos || (BgInfos = {}));
var STAGE_LIST = [
  { id: 1 /* St001_Plain */, bgInfo: BgInfos.Jungle },
  { id: 2 /* St002_Diamond */, bgInfo: BgInfos.Jungle },
  { id: 3 /* St003_Hairpin */, bgInfo: BgInfos.Jungle },
  { id: 4 /* St004_Wide_Bridge */, bgInfo: BgInfos.Jungle },
  { id: 5 /* St005_Slopes */, bgInfo: BgInfos.Sunset },
  { id: 6 /* St006_Steps */, bgInfo: BgInfos.Sunset },
  { id: 7 /* St007_Blocks */, bgInfo: BgInfos.Sunset },
  { id: 8 /* St008_Jump_Single */, bgInfo: BgInfos.Sunset },
  { id: 9 /* St009_Exam_A */, bgInfo: BgInfos.Sunset },
  { id: 11 /* St011_Bump */, bgInfo: BgInfos.Jungle },
  { id: 12 /* St012_Walking */, bgInfo: BgInfos.Jungle },
  { id: 13 /* St013_Repulse */, bgInfo: BgInfos.Jungle },
  { id: 14 /* St014_Narrow_Bridge */, bgInfo: BgInfos.Jungle },
  { id: 15 /* St015_Break */, bgInfo: BgInfos.Sunset },
  { id: 16 /* St016_Curves */, bgInfo: BgInfos.Sunset },
  { id: 17 /* St017_Downhill */, bgInfo: BgInfos.Sunset },
  { id: 18 /* St018_Blocks_Slim */, bgInfo: BgInfos.Sunset },
  { id: 21 /* St021_Choice */, bgInfo: BgInfos.Night },
  { id: 22 /* St022_Bowl */, bgInfo: BgInfos.Night },
  { id: 23 /* St023_Jumpies */, bgInfo: BgInfos.Night },
  { id: 24 /* St024_Stoppers */, bgInfo: BgInfos.Night },
  { id: 25 /* St025_Floor_Bent */, bgInfo: BgInfos.Night },
  { id: 26 /* St026_Conveyor */, bgInfo: BgInfos.Night },
  { id: 27 /* St027_Exam_B */, bgInfo: BgInfos.Night },
  { id: 28 /* St028_Chaser */, bgInfo: BgInfos.Night },
  { id: 29 /* St029_Jump_Double */, bgInfo: BgInfos.Night },
  { id: 31 /* St031_Middle_Jam */, bgInfo: BgInfos.Water },
  { id: 32 /* St032_Antlion */, bgInfo: BgInfos.Water },
  { id: 33 /* St033_Collapse */, bgInfo: BgInfos.Water },
  { id: 34 /* St034_Swing_Bar */, bgInfo: BgInfos.Water },
  { id: 35 /* St035_Labyrinth */, bgInfo: BgInfos.Water },
  { id: 36 /* St036_Spiral */, bgInfo: BgInfos.Water },
  { id: 37 /* St037_Wavy_Jump */, bgInfo: BgInfos.Water },
  { id: 38 /* St038_Spiky */, bgInfo: BgInfos.Water },
  { id: 39 /* St039_Unrest */, bgInfo: BgInfos.Water },
  { id: 40 /* St040_Polar */, bgInfo: BgInfos.Water },
  { id: 41 /* St041_Ruin */, bgInfo: BgInfos.Jungle },
  { id: 42 /* St042_Branch */, bgInfo: BgInfos.Jungle },
  { id: 43 /* St043_Overturn */, bgInfo: BgInfos.Jungle },
  { id: 44 /* St044_Excursion */, bgInfo: BgInfos.Jungle },
  { id: 45 /* St045_Dodecagon */, bgInfo: BgInfos.Night },
  { id: 46 /* St046_Exam_C */, bgInfo: BgInfos.Night },
  { id: 47 /* St047_Skeleton */, bgInfo: BgInfos.Night },
  { id: 48 /* St048_Tracks */, bgInfo: BgInfos.Night },
  { id: 51 /* St051_Downhill_Hard */, bgInfo: BgInfos.Water },
  { id: 52 /* St052_Gears */, bgInfo: BgInfos.Water },
  { id: 53 /* St053_Destruction */, bgInfo: BgInfos.Water },
  { id: 54 /* St054_Invasion */, bgInfo: BgInfos.Water },
  { id: 55 /* St055_Diving */, bgInfo: BgInfos.Water },
  { id: 56 /* St056_Floor_Slant */, bgInfo: BgInfos.Water },
  { id: 57 /* St057_Tram */, bgInfo: BgInfos.Water },
  { id: 58 /* St058_Swing_Bar_Long */, bgInfo: BgInfos.Water },
  { id: 59 /* St059_Paperwork */, bgInfo: BgInfos.Water },
  { id: 61 /* St061_Twin_Attacker */, bgInfo: BgInfos.Sand },
  { id: 62 /* St062_Sega_Logo */, bgInfo: BgInfos.Sand },
  { id: 63 /* St063_Snake */, bgInfo: BgInfos.Sand },
  { id: 64 /* St064_Wind */, bgInfo: BgInfos.Sand },
  { id: 65 /* St065_Windy_Slide */, bgInfo: BgInfos.Sand },
  { id: 66 /* St066_Fall_Down */, bgInfo: BgInfos.Sand },
  { id: 67 /* St067_Twin_Cross */, bgInfo: BgInfos.Sand },
  { id: 68 /* St068_Spiral_Hard */, bgInfo: BgInfos.Sand },
  { id: 69 /* St069_Conveyor_Parts */, bgInfo: BgInfos.Sand },
  { id: 71 /* St071_Gaps */, bgInfo: BgInfos.Ice },
  { id: 72 /* St072_Curvature */, bgInfo: BgInfos.Ice },
  { id: 73 /* St073_Ant_Lion_Super */, bgInfo: BgInfos.Ice },
  { id: 74 /* St074_Drum */, bgInfo: BgInfos.Ice },
  { id: 75 /* St075_Twist_And_Spin */, bgInfo: BgInfos.Ice },
  { id: 76 /* St076_Speedy_Jam */, bgInfo: BgInfos.Ice },
  { id: 77 /* St077_Quake */, bgInfo: BgInfos.Ice },
  { id: 78 /* St078_Cassiopeia */, bgInfo: BgInfos.Ice },
  { id: 79 /* St079_Pirates */, bgInfo: BgInfos.Ice },
  { id: 81 /* St081_Bowl_Open */, bgInfo: BgInfos.Storm },
  { id: 82 /* St082_Checker */, bgInfo: BgInfos.Storm },
  { id: 83 /* St083_Carpet */, bgInfo: BgInfos.Storm },
  { id: 84 /* St084_Ridge */, bgInfo: BgInfos.Storm },
  { id: 85 /* St085_Mixer */, bgInfo: BgInfos.Storm },
  { id: 86 /* St086_Rings */, bgInfo: BgInfos.Storm },
  { id: 87 /* St087_Stairs */, bgInfo: BgInfos.Storm },
  { id: 88 /* St088_Clover */, bgInfo: BgInfos.Storm },
  { id: 89 /* St089_Coffee_Cup */, bgInfo: BgInfos.Storm },
  { id: 90 /* St090_Metamorphasis */, bgInfo: BgInfos.Storm },
  { id: 91 /* St091_Bonus_Basic */, bgInfo: BgInfos.Bonus },
  { id: 92 /* St092_Bonus_Wave */, bgInfo: BgInfos.Bonus },
  { id: 93 /* St093_Bonus_Grid */, bgInfo: BgInfos.Bonus },
  { id: 94 /* St094_Bonus_Bumpy */, bgInfo: BgInfos.Bonus },
  { id: 95 /* St095_Bonus_Hunting */, bgInfo: BgInfos.Bonus },
  { id: 99 /* St099_Jungle_Bg */, bgInfo: BgInfos.Jungle },
  { id: 101 /* St101_Blur_Bridge */, bgInfo: BgInfos.Space },
  { id: 102 /* St102_Hitter */, bgInfo: BgInfos.Space },
  { id: 103 /* St103_Av_Logo */, bgInfo: BgInfos.Space },
  { id: 104 /* St104_Hard_Hitter */, bgInfo: BgInfos.Space },
  { id: 105 /* St105_Puzzle */, bgInfo: BgInfos.Space },
  { id: 106 /* St106_Polar_Large */, bgInfo: BgInfos.Space },
  { id: 107 /* St107_Breathe */, bgInfo: BgInfos.Space },
  { id: 108 /* St108_Ferris_Wheel */, bgInfo: BgInfos.Space },
  { id: 109 /* St109_Factory */, bgInfo: BgInfos.Space },
  { id: 110 /* St110_Curl_Pipe */, bgInfo: BgInfos.Space },
  { id: 111 /* St111_Magic_Hand */, bgInfo: BgInfos.Space },
  { id: 112 /* St112_Sanctuary */, bgInfo: BgInfos.Space },
  { id: 113 /* St113_Daa_Loo_Maa */, bgInfo: BgInfos.Space },
  { id: 115 /* St115_Alternate_Edge_Master */, bgInfo: BgInfos.Master },
  { id: 116 /* St116_Alternate_Roll_Master */, bgInfo: BgInfos.Master },
  { id: 117 /* St117_Arcade_Curves */, bgInfo: BgInfos.Master },
  { id: 118 /* St118_Arcade_Jump_Double */, bgInfo: BgInfos.Master },
  { id: 119 /* St119_Arcade_Downhill_Hard */, bgInfo: BgInfos.Master },
  { id: 120 /* St120_Arcade_Dodecagon */, bgInfo: BgInfos.Master },
  { id: 121 /* St121_Wave_Master */, bgInfo: BgInfos.Master },
  { id: 122 /* St122_Fan_Master */, bgInfo: BgInfos.Master },
  { id: 123 /* St123_Stamina_Master */, bgInfo: BgInfos.Master },
  { id: 124 /* St124_Spring_Master */, bgInfo: BgInfos.Master },
  { id: 125 /* St125_Dance_Master */, bgInfo: BgInfos.Master },
  { id: 126 /* St126_Roll_Master */, bgInfo: BgInfos.Master },
  { id: 127 /* St127_Edge_Master */, bgInfo: BgInfos.Master },
  { id: 128 /* St128_Dodge_Master */, bgInfo: BgInfos.Master },
  { id: 129 /* St129_Bridge_Master */, bgInfo: BgInfos.Master },
  { id: 130 /* St130_Monkey_Master */, bgInfo: BgInfos.Master },
  { id: 131 /* St131_Race_Space */, bgInfo: BgInfos.Space },
  { id: 132 /* St132_Race_Unused */, bgInfo: BgInfos.Sand },
  { id: 133 /* St133_Race_Jungle */, bgInfo: BgInfos.Jungle },
  { id: 134 /* St134_Race_Ice */, bgInfo: BgInfos.Ice },
  { id: 135 /* St135_Race_Downtown */, bgInfo: BgInfos.Night },
  { id: 136 /* St136_Race_Water */, bgInfo: BgInfos.Water },
  { id: 137 /* St137_Chaser_Duplicate */, bgInfo: BgInfos.Night },
  { id: 138 /* St138_Race_Desert */, bgInfo: BgInfos.Sand },
  { id: 139 /* St139_Exam_A_Broken */, bgInfo: BgInfos.Sunset },
  { id: 140 /* St140_Av_Logo_Broken */, bgInfo: BgInfos.Space },
  { id: 141 /* St141_Yellow_Square */, bgInfo: BgInfos.Space },
  { id: 142 /* St142_Water_Test */, bgInfo: BgInfos.Water },
  { id: 143 /* St143_Fight_Jungle */, bgInfo: BgInfos.Jungle },
  { id: 144 /* St144_Fight_Ice */, bgInfo: BgInfos.Ice },
  { id: 145 /* St145_Fight_Space */, bgInfo: BgInfos.Space },
  { id: 150 /* St150_Tutorial */, bgInfo: BgInfos.Jungle },
  { id: 151 /* St151_Target_Circles */, bgInfo: BgInfos.Target },
  { id: 152 /* St152_Target_Pyramids */, bgInfo: BgInfos.Target },
  { id: 153 /* St153_Target_Hexagons */, bgInfo: BgInfos.Target },
  { id: 154 /* St154_Target_Unuseds */, bgInfo: BgInfos.Target },
  { id: 155 /* St155_Monkey_Target_Bg */, bgInfo: BgInfos.Target },
  { id: 161 /* St161_Golf_Hole_18 */, bgInfo: BgInfos.Jungle },
  { id: 162 /* St162_Golf_Hole_4 */, bgInfo: BgInfos.Jungle },
  { id: 163 /* St163_Golf_Hole_6 */, bgInfo: BgInfos.Jungle },
  { id: 164 /* St164_Golf_Hole_3 */, bgInfo: BgInfos.Jungle },
  { id: 165 /* St165_Golf_Hole_5 */, bgInfo: BgInfos.Jungle },
  { id: 166 /* St166_Golf_Hole_15 */, bgInfo: BgInfos.Jungle },
  { id: 167 /* St167_Golf_Hole_1 */, bgInfo: BgInfos.Jungle },
  { id: 168 /* St168_Golf_Hole_8 */, bgInfo: BgInfos.Jungle },
  { id: 169 /* St169_Golf_Hole_10 */, bgInfo: BgInfos.Jungle },
  { id: 170 /* St170_Golf_Hole_14 */, bgInfo: BgInfos.Jungle },
  { id: 171 /* St171_Golf_Hole_16 */, bgInfo: BgInfos.Jungle },
  { id: 172 /* St172_Golf_Hole_7 */, bgInfo: BgInfos.Jungle },
  { id: 173 /* St173_Golf_Hole_12 */, bgInfo: BgInfos.Jungle },
  { id: 174 /* St174_Golf_Hole_17 */, bgInfo: BgInfos.Jungle },
  { id: 175 /* St175_Golf_Hole_9 */, bgInfo: BgInfos.Jungle },
  { id: 176 /* St176_Golf_Hole_13 */, bgInfo: BgInfos.Jungle },
  { id: 177 /* St177_Golf_Hole_2 */, bgInfo: BgInfos.Jungle },
  { id: 178 /* St178_Golf_Hole_11 */, bgInfo: BgInfos.Jungle },
  { id: 179 /* St179_Bowling */, bgInfo: BgInfos.Bowling },
  { id: 197 /* St197_Bonus_Bg */, bgInfo: BgInfos.Bonus },
  { id: 198 /* St198_Ending_Cutscene_Bg */, bgInfo: BgInfos.Ending }
];
var STAGE_INFO_MAP = new Map(
  STAGE_LIST.map((stageInfo) => [stageInfo.id, stageInfo])
);

// src/smb2_render.ts
var SMB2_STAGE_THEME_IDS = [
  0,
  // 0
  19,
  // 1
  19,
  // 2
  19,
  // 3
  19,
  // 4
  19,
  // 5
  19,
  // 6
  17,
  // 7
  17,
  // 8
  17,
  // 9
  17,
  // 10
  17,
  // 11
  17,
  // 12
  17,
  // 13
  17,
  // 14
  17,
  // 15
  17,
  // 16
  18,
  // 17
  32,
  // 18
  32,
  // 19
  32,
  // 20
  32,
  // 21
  32,
  // 22
  32,
  // 23
  32,
  // 24
  32,
  // 25
  32,
  // 26
  32,
  // 27
  20,
  // 28
  20,
  // 29
  20,
  // 30
  20,
  // 31
  20,
  // 32
  20,
  // 33
  20,
  // 34
  20,
  // 35
  20,
  // 36
  20,
  // 37
  21,
  // 38
  21,
  // 39
  21,
  // 40
  21,
  // 41
  21,
  // 42
  21,
  // 43
  21,
  // 44
  21,
  // 45
  21,
  // 46
  21,
  // 47
  25,
  // 48
  24,
  // 49
  24,
  // 50
  24,
  // 51
  24,
  // 52
  24,
  // 53
  24,
  // 54
  24,
  // 55
  24,
  // 56
  24,
  // 57
  24,
  // 58
  22,
  // 59
  22,
  // 60
  22,
  // 61
  22,
  // 62
  22,
  // 63
  22,
  // 64
  22,
  // 65
  22,
  // 66
  22,
  // 67
  22,
  // 68
  1,
  // 69
  19,
  // 70
  1,
  // 71
  1,
  // 72
  1,
  // 73
  1,
  // 74
  1,
  // 75
  1,
  // 76
  1,
  // 77
  1,
  // 78
  1,
  // 79
  1,
  // 80
  1,
  // 81
  1,
  // 82
  1,
  // 83
  1,
  // 84
  1,
  // 85
  1,
  // 86
  1,
  // 87
  1,
  // 88
  1,
  // 89
  1,
  // 90
  1,
  // 91
  1,
  // 92
  1,
  // 93
  1,
  // 94
  1,
  // 95
  1,
  // 96
  1,
  // 97
  1,
  // 98
  1,
  // 99
  1,
  // 100
  27,
  // 101
  27,
  // 102
  1,
  // 103
  1,
  // 104
  1,
  // 105
  1,
  // 106
  1,
  // 107
  1,
  // 108
  1,
  // 109
  1,
  // 110
  1,
  // 111
  1,
  // 112
  1,
  // 113
  1,
  // 114
  1,
  // 115
  1,
  // 116
  1,
  // 117
  1,
  // 118
  1,
  // 119
  1,
  // 120
  19,
  // 121
  18,
  // 122
  22,
  // 123
  1,
  // 124
  1,
  // 125
  1,
  // 126
  1,
  // 127
  1,
  // 128
  1,
  // 129
  1,
  // 130
  19,
  // 131
  20,
  // 132
  24,
  // 133
  17,
  // 134
  22,
  // 135
  18,
  // 136
  4,
  // 137
  31,
  // 138
  31,
  // 139
  31,
  // 140
  6,
  // 141
  3,
  // 142
  19,
  // 143
  20,
  // 144
  34,
  // 145
  20,
  // 146
  21,
  // 147
  6,
  // 148
  6,
  // 149
  19,
  // 150
  11,
  // 151
  29,
  // 152
  26,
  // 153
  23,
  // 154
  29,
  // 155
  29,
  // 156
  29,
  // 157
  29,
  // 158
  28,
  // 159
  30,
  // 160
  33,
  // 161
  33,
  // 162
  33,
  // 163
  33,
  // 164
  33,
  // 165
  33,
  // 166
  33,
  // 167
  33,
  // 168
  33,
  // 169
  33,
  // 170
  33,
  // 171
  33,
  // 172
  33,
  // 173
  33,
  // 174
  33,
  // 175
  33,
  // 176
  33,
  // 177
  33,
  // 178
  14,
  // 179
  12,
  // 180
  3,
  // 181
  3,
  // 182
  3,
  // 183
  1,
  // 184
  1,
  // 185
  1,
  // 186
  1,
  // 187
  1,
  // 188
  1,
  // 189
  1,
  // 190
  1,
  // 191
  1,
  // 192
  1,
  // 193
  1,
  // 194
  19,
  // 195
  1,
  // 196
  10,
  // 197
  16,
  // 198
  2,
  // 199
  20,
  // 200
  19,
  // 201
  19,
  // 202
  19,
  // 203
  19,
  // 204
  26,
  // 205
  20,
  // 206
  20,
  // 207
  20,
  // 208
  20,
  // 209
  20,
  // 210
  22,
  // 211
  22,
  // 212
  22,
  // 213
  22,
  // 214
  22,
  // 215
  23,
  // 216
  23,
  // 217
  23,
  // 218
  23,
  // 219
  23,
  // 220
  19,
  // 221
  19,
  // 222
  19,
  // 223
  19,
  // 224
  26,
  // 225
  20,
  // 226
  20,
  // 227
  20,
  // 228
  20,
  // 229
  26,
  // 230
  18,
  // 231
  18,
  // 232
  18,
  // 233
  18,
  // 234
  18,
  // 235
  18,
  // 236
  18,
  // 237
  18,
  // 238
  18,
  // 239
  26,
  // 240
  21,
  // 241
  21,
  // 242
  21,
  // 243
  21,
  // 244
  21,
  // 245
  21,
  // 246
  21,
  // 247
  21,
  // 248
  21,
  // 249
  21,
  // 250
  22,
  // 251
  22,
  // 252
  22,
  // 253
  22,
  // 254
  22,
  // 255
  23,
  // 256
  23,
  // 257
  23,
  // 258
  23,
  // 259
  23,
  // 260
  19,
  // 261
  19,
  // 262
  19,
  // 263
  19,
  // 264
  26,
  // 265
  21,
  // 266
  21,
  // 267
  21,
  // 268
  21,
  // 269
  26,
  // 270
  24,
  // 271
  24,
  // 272
  24,
  // 273
  24,
  // 274
  24,
  // 275
  24,
  // 276
  24,
  // 277
  24,
  // 278
  24,
  // 279
  26,
  // 280
  25,
  // 281
  25,
  // 282
  25,
  // 283
  25,
  // 284
  25,
  // 285
  25,
  // 286
  25,
  // 287
  25,
  // 288
  25,
  // 289
  26,
  // 290
  17,
  // 291
  17,
  // 292
  17,
  // 293
  17,
  // 294
  17,
  // 295
  17,
  // 296
  17,
  // 297
  17,
  // 298
  17,
  // 299
  26,
  // 300
  32,
  // 301
  32,
  // 302
  32,
  // 303
  32,
  // 304
  32,
  // 305
  32,
  // 306
  32,
  // 307
  32,
  // 308
  32,
  // 309
  32,
  // 310
  22,
  // 311
  22,
  // 312
  22,
  // 313
  22,
  // 314
  22,
  // 315
  22,
  // 316
  22,
  // 317
  22,
  // 318
  22,
  // 319
  22,
  // 320
  22,
  // 321
  22,
  // 322
  22,
  // 323
  22,
  // 324
  22,
  // 325
  23,
  // 326
  23,
  // 327
  23,
  // 328
  23,
  // 329
  23,
  // 330
  23,
  // 331
  23,
  // 332
  23,
  // 333
  23,
  // 334
  23,
  // 335
  23,
  // 336
  23,
  // 337
  23,
  // 338
  23,
  // 339
  23,
  // 340
  23,
  // 341
  23,
  // 342
  23,
  // 343
  23,
  // 344
  23,
  // 345
  23,
  // 346
  23,
  // 347
  23,
  // 348
  23,
  // 349
  23,
  // 350
  1,
  // 351
  1,
  // 352
  1,
  // 353
  1,
  // 354
  1,
  // 355
  1,
  // 356
  1,
  // 357
  1,
  // 358
  1,
  // 359
  1,
  // 360
  1,
  // 361
  1,
  // 362
  1,
  // 363
  1,
  // 364
  1,
  // 365
  1,
  // 366
  1,
  // 367
  1,
  // 368
  1,
  // 369
  1,
  // 370
  1,
  // 371
  1,
  // 372
  1,
  // 373
  1,
  // 374
  1,
  // 375
  1,
  // 376
  1,
  // 377
  1,
  // 378
  1,
  // 379
  1,
  // 380
  1,
  // 381
  1,
  // 382
  1,
  // 383
  1,
  // 384
  1,
  // 385
  1,
  // 386
  1,
  // 387
  1,
  // 388
  1,
  // 389
  1,
  // 390
  1,
  // 391
  1,
  // 392
  1,
  // 393
  1,
  // 394
  1,
  // 395
  1,
  // 396
  29,
  // 397
  23,
  // 398
  35,
  // 399
  22,
  // 400
  29,
  // 401
  35,
  // 402
  19,
  // 403
  29,
  // 404
  17,
  // 405
  40,
  // 406
  39,
  // 407
  35,
  // 408
  32,
  // 409
  37,
  // 410
  37,
  // 411
  35,
  // 412
  38,
  // 413
  21,
  // 414
  36,
  // 415
  41,
  // 416
  22,
  // 417
  23,
  // 418
  35,
  // 419
  32
  // 420
];
var MB2WS_STAGE_THEME_IDS = [
  0,
  2,
  2,
  2,
  2,
  10,
  5,
  5,
  5,
  5,
  10,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  19,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  2,
  2,
  2,
  2,
  10,
  5,
  5,
  5,
  5,
  10,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  10,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  10,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  2,
  2,
  2,
  2,
  10,
  5,
  5,
  5,
  5,
  10,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  10,
  19,
  19,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  25,
  25,
  25,
  25,
  25,
  25,
  25,
  25,
  25,
  19,
  19,
  19,
  19,
  20,
  20,
  20,
  20,
  20,
  20,
  1,
  19,
  19,
  19,
  19,
  19,
  17,
  17,
  31,
  31,
  31,
  6,
  3,
  19,
  20,
  34,
  20,
  21,
  6,
  6,
  17,
  11,
  29,
  19,
  23,
  29,
  29,
  29,
  29,
  28,
  30,
  17,
  17,
  17,
  17,
  17,
  17,
  17,
  18,
  18,
  18,
  18,
  18,
  18,
  18,
  18,
  18,
  18,
  32,
  14,
  12,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  19,
  4,
  32,
  32,
  32,
  32,
  1,
  10,
  16,
  2,
  20,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  10,
  9,
  9,
  9,
  9,
  9,
  9,
  9,
  9,
  9,
  9,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  15,
  15,
  15,
  15,
  15,
  15,
  15,
  15,
  15,
  15,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  32,
  32,
  32,
  32,
  20,
  20,
  20,
  20,
  20,
  20,
  20,
  20,
  20,
  20,
  21,
  21,
  21,
  21,
  21,
  21,
  21,
  21,
  21,
  21,
  25,
  25,
  25,
  25,
  25,
  19,
  25,
  25,
  25,
  25,
  25,
  24,
  24,
  24,
  24,
  19,
  24,
  24,
  24,
  24,
  24,
  24,
  22,
  22,
  22,
  19,
  22,
  22,
  22,
  22,
  22,
  22,
  22,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  22,
  22,
  22,
  32,
  22,
  22,
  22,
  22,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  23,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  17,
  1,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  10,
  18,
  18,
  18,
  18,
  4,
  18,
  18,
  18,
  18,
  1,
  6,
  25,
  25,
  7,
  25,
  25,
  25,
  25,
  6,
  23,
  1,
  1,
  1,
  1,
  1,
  10,
  29,
  23,
  35,
  22,
  29,
  35,
  19,
  29,
  17,
  40,
  39,
  35,
  32,
  37,
  37,
  35,
  38,
  21,
  36,
  41,
  22,
  23,
  35,
  32,
  0
];
var SMB2_THEME_BG_NAMES = {
  2: "bg_jun",
  3: "bg_wat",
  4: "bg_nig",
  5: "bg_sun",
  6: "bg_spa",
  7: "bg_snd",
  8: "bg_ice",
  9: "bg_stm",
  10: "bg_bns",
  11: "bg_pil",
  13: "bg_gol",
  14: "bg_bow",
  15: "bg_mst",
  16: "bg_ending",
  17: "bg_lav2",
  18: "bg_wat2",
  19: "bg_jun2",
  20: "bg_par2",
  21: "bg_pot2",
  22: "bg_spa2",
  23: "bg_ele2",
  24: "bg_gea2",
  25: "bg_bub2",
  26: "bg_bns2",
  27: "bg_fut2",
  28: "bg_bow2",
  29: "bg_tar2",
  32: "bg_wha2",
  33: "bg_gol2",
  34: "bg_pot2",
  35: "bg_vil2",
  36: "bg_au_bub2",
  37: "bg_au_par2",
  38: "bg_au_gea2",
  39: "bg_au_wat2",
  40: "bg_au_tar2",
  41: "bg_bow2"
};
var SMB2_BG_INFO_BY_NAME = {
  "bg_jun": BgInfos.Jungle,
  "bg_jun2": BgInfos.Jungle,
  "bg_wat": BgInfos.Water,
  "bg_wat2": BgInfos.Water,
  "bg_nig": BgInfos.Night,
  "bg_sun": BgInfos.Sunset,
  "bg_spa": BgInfos.Space,
  "bg_spa2": BgInfos.Space,
  "bg_snd": BgInfos.Sand,
  "bg_ice": BgInfos.Ice,
  "bg_stm": BgInfos.Storm,
  "bg_bns": BgInfos.Bonus,
  "bg_bns2": BgInfos.Bonus,
  "bg_pil": BgInfos.Target,
  "bg_gol": BgInfos.Golf,
  "bg_gol2": BgInfos.Golf,
  "bg_bow": BgInfos.Bowling,
  "bg_bow2": BgInfos.Bowling,
  "bg_mst": BgInfos.Master,
  "bg_ending": BgInfos.Ending
};
function applyPackBgInfo(stageId, gameSource, baseInfo, fileName) {
  if (!hasPackForGameSource(gameSource)) {
    return { ...baseInfo, fileName };
  }
  const packEnv = getPackStageEnv(stageId);
  const packBg = packEnv?.bgInfo;
  if (!packBg) {
    return { ...baseInfo, fileName };
  }
  const packFileName = packBg.fileName || fileName;
  const mapped = (packFileName ? SMB2_BG_INFO_BY_NAME[packFileName] : null) ?? baseInfo;
  return {
    ...mapped,
    fileName: packFileName,
    clearColor: packBg.clearColor ? colorNewFromRGBA(packBg.clearColor[0], packBg.clearColor[1], packBg.clearColor[2], packBg.clearColor[3]) : mapped.clearColor,
    ambientColor: packBg.ambientColor ? colorNewFromRGBA(packBg.ambientColor[0], packBg.ambientColor[1], packBg.ambientColor[2], 1) : mapped.ambientColor,
    infLightColor: packBg.infLightColor ? colorNewFromRGBA(packBg.infLightColor[0], packBg.infLightColor[1], packBg.infLightColor[2], 1) : mapped.infLightColor,
    infLightRotX: packBg.infLightRotX ?? mapped.infLightRotX,
    infLightRotY: packBg.infLightRotY ?? mapped.infLightRotY
  };
}
function toVec3(input) {
  return vec313.fromValues(input.x, input.y, input.z);
}
function toVec2(input) {
  return vec24.fromValues(input.x, input.y);
}
function keyframesOrEmpty(list) {
  return list ?? [];
}
function mapAnimType(value) {
  switch (value) {
    case 1:
      return 1 /* Once */;
    case 0:
    default:
      return 0 /* Loop */;
  }
}
function mapGoalType(type) {
  switch (type) {
    case "G":
      return 1 /* Green */;
    case "R":
      return 2 /* Red */;
    case "B":
    default:
      return 0 /* Blue */;
  }
}
function mapBananaType(type) {
  return (type & 1) === 1 ? 1 /* Bunch */ : 0 /* Single */;
}
function convertBgAnim(anim) {
  if (!anim) {
    return null;
  }
  return {
    loopStartSeconds: anim.loopStartSeconds ?? 0,
    loopEndSeconds: anim.loopEndSeconds ?? 0,
    scaleXKeyframes: keyframesOrEmpty(anim.scaleXKeyframes),
    scaleYKeyframes: keyframesOrEmpty(anim.scaleYKeyframes),
    scaleZKeyframes: keyframesOrEmpty(anim.scaleZKeyframes),
    rotXKeyframes: keyframesOrEmpty(anim.rotXKeyframes),
    rotYKeyframes: keyframesOrEmpty(anim.rotYKeyframes),
    rotZKeyframes: keyframesOrEmpty(anim.rotZKeyframes),
    posXKeyframes: keyframesOrEmpty(anim.posXKeyframes),
    posYKeyframes: keyframesOrEmpty(anim.posYKeyframes),
    posZKeyframes: keyframesOrEmpty(anim.posZKeyframes),
    visibleKeyframes: keyframesOrEmpty(anim.visibleKeyframes),
    translucencyKeyframes: keyframesOrEmpty(anim.translucencyKeyframes)
  };
}
function convertFlipbookAnims(flipbooks) {
  if (!flipbooks) {
    return null;
  }
  return {
    nightWindowAnims: flipbooks.nightWindowAnims.map((windowAnim) => ({
      pos: toVec3(windowAnim.pos),
      rot: vec313.fromValues(windowAnim.rotX, windowAnim.rotY, windowAnim.rotZ),
      id: windowAnim.id
    })),
    stormFireAnims: flipbooks.stormFireAnims.map((fireAnim) => ({
      pos: toVec3(fireAnim.pos),
      frameOffset: fireAnim.frameOffset
    }))
  };
}
function convertBgObject(obj) {
  return {
    flags: obj.flags,
    modelName: obj.name,
    pos: toVec3(obj.pos),
    rot: vec313.fromValues(obj.rotX, obj.rotY, obj.rotZ),
    scale: toVec3(obj.scale),
    translucency: obj.translucency ?? 0,
    anim: convertBgAnim(obj.anim),
    flipbookAnims: convertFlipbookAnims(obj.flipbooks),
    textureScroll: obj.textureScroll ? { speed: toVec2(obj.textureScroll.speed) } : void 0
  };
}
function convertStageModelInstances(list) {
  if (!list || list.length === 0) {
    return [];
  }
  return list.map((instance) => ({
    modelName: instance.modelName ?? "",
    flags: instance.flags ?? 0,
    pos: toVec3(instance.pos),
    rot: toVec3(instance.rot),
    scale: toVec3(instance.scale)
  }));
}
function getSmb2StageInfo(stageId) {
  const themeId = SMB2_STAGE_THEME_IDS[stageId] ?? 0;
  const fileName = SMB2_THEME_BG_NAMES[themeId] ?? "";
  const baseInfo = (fileName ? SMB2_BG_INFO_BY_NAME[fileName] : null) ?? BgInfos.Jungle;
  return {
    id: stageId,
    bgInfo: applyPackBgInfo(stageId, GAME_SOURCES.SMB2, baseInfo, fileName)
  };
}
function getMb2wsStageInfo(stageId) {
  const themeId = MB2WS_STAGE_THEME_IDS[stageId] ?? 0;
  const fileName = SMB2_THEME_BG_NAMES[themeId] ?? "";
  const baseInfo = (fileName ? SMB2_BG_INFO_BY_NAME[fileName] : null) ?? BgInfos.Jungle;
  return {
    id: stageId,
    bgInfo: applyPackBgInfo(stageId, GAME_SOURCES.MB2WS, baseInfo, fileName)
  };
}
function convertSmb2StageDef(stage) {
  const animGroups = stage.animGroups.map((group) => ({
    originPos: toVec3(group.origin ?? group.initPos),
    originRot: toVec3(group.initRot),
    animType: mapAnimType(group.animLoopType ?? 0),
    anim: group.anim ? {
      rotXKeyframes: keyframesOrEmpty(group.anim.rotXKeyframes),
      rotYKeyframes: keyframesOrEmpty(group.anim.rotYKeyframes),
      rotZKeyframes: keyframesOrEmpty(group.anim.rotZKeyframes),
      posXKeyframes: keyframesOrEmpty(group.anim.posXKeyframes),
      posYKeyframes: keyframesOrEmpty(group.anim.posYKeyframes),
      posZKeyframes: keyframesOrEmpty(group.anim.posZKeyframes)
    } : null,
    textureScroll: group.textureScroll ? { speed: toVec2(group.textureScroll.speed) } : void 0,
    coliTris: group.triangles.map((tri) => ({
      pos: toVec3(tri.pos),
      normal: toVec3(tri.normal),
      rot: toVec3(tri.rot),
      vert2: toVec2(tri.vert2),
      vert3: toVec2(tri.vert3),
      edge2Normal: toVec2(tri.edge2Normal),
      edge3Normal: toVec2(tri.edge3Normal)
    })),
    gridCellTris: group.gridCellTris ?? [],
    gridOriginX: group.gridOriginX ?? 0,
    gridOriginZ: group.gridOriginZ ?? 0,
    gridStepX: group.gridStepX ?? 0,
    gridStepZ: group.gridStepZ ?? 0,
    gridCellCountX: group.gridCellCountX ?? 0,
    gridCellCountZ: group.gridCellCountZ ?? 0,
    goals: group.goals.map((goal) => ({
      pos: toVec3(goal.pos),
      rot: toVec3(goal.rot),
      type: mapGoalType(goal.type)
    })),
    bumpers: group.bumpers.map((bumper) => ({
      pos: toVec3(bumper.pos),
      rot: toVec3(bumper.rot),
      scale: toVec3(bumper.scale)
    })),
    jamabars: group.jamabars.map((jamabar) => ({
      pos: toVec3(jamabar.pos),
      rot: toVec3(jamabar.rot),
      scale: toVec3(jamabar.scale)
    })),
    wormholes: (group.wormholes ?? []).map((wormhole) => ({
      pos: toVec3(wormhole.pos),
      rot: toVec3(wormhole.rot)
    })),
    bananas: group.bananas.map((banana) => ({
      pos: toVec3(banana.pos),
      type: mapBananaType(banana.type)
    })),
    coliCones: group.coliCones.map((cone) => ({
      pos: toVec3(cone.pos),
      rot: toVec3(cone.rot),
      scale: toVec3(cone.scale)
    })),
    coliSpheres: group.coliSpheres.map((sphere) => ({
      pos: toVec3(sphere.pos),
      radius: sphere.radius
    })),
    coliCylinders: group.coliCylinders.map((cylinder) => ({
      pos: toVec3(cylinder.pos),
      radius: cylinder.radius,
      height: cylinder.height,
      rot: toVec3(cylinder.rot)
    })),
    animGroupModels: (group.stageModelNames ?? []).map((modelName) => ({
      flags: 0,
      modelName
    })),
    stageModelInstances: convertStageModelInstances(group.stageModelInstances),
    loopStartSeconds: group.loopStartSeconds ?? 0,
    loopEndSeconds: group.loopEndSeconds ?? 0
  }));
  if (stage.wormholes?.length) {
    animGroups[0].wormholes.push(
      ...stage.wormholes.map((wormhole) => ({
        pos: toVec3(wormhole.pos),
        rot: toVec3(wormhole.rot)
      }))
    );
  }
  const start = stage.startPositions?.[0];
  return {
    loopStartSeconds: stage.loopStartSeconds ?? 0,
    loopEndSeconds: stage.loopEndSeconds ?? 0,
    animGroups,
    initBallPose: {
      pos: toVec3(start?.pos ?? { x: 0, y: 0, z: 0 }),
      rot: toVec3(start?.rot ?? { x: 0, y: 0, z: 0 })
    },
    falloutPlane: { y: stage.fallOutY ?? 0 },
    goals: stage.goals.map((goal) => ({
      pos: toVec3(goal.pos),
      rot: toVec3(goal.rot),
      type: mapGoalType(goal.type)
    })),
    bumpers: stage.bumpers.map((bumper) => ({
      pos: toVec3(bumper.pos),
      rot: toVec3(bumper.rot),
      scale: toVec3(bumper.scale)
    })),
    jamabars: stage.jamabars.map((jamabar) => ({
      pos: toVec3(jamabar.pos),
      rot: toVec3(jamabar.rot),
      scale: toVec3(jamabar.scale)
    })),
    bananas: stage.bananas.map((banana) => ({
      pos: toVec3(banana.pos),
      type: mapBananaType(banana.type)
    })),
    wormholes: (stage.wormholes ?? []).map((wormhole) => ({
      pos: toVec3(wormhole.pos),
      rot: toVec3(wormhole.rot)
    })),
    levelModels: [],
    bgObjects: stage.bgObjects.map(convertBgObject),
    fgObjects: stage.fgObjects.map(convertBgObject)
  };
}

// src/audio.ts
var AUDIO_BASE_PATH = "./audio";
var SFX_DIR = "sfx";
var MUSIC_DIR_BY_SOURCE = {
  [GAME_SOURCES.SMB1]: "smb1-music-compressed",
  [GAME_SOURCES.SMB2]: "smb2-music-compressed",
  [GAME_SOURCES.MB2WS]: "smb2-music-compressed"
};
var ROLLING_SFX_NAME = "ball_roll";
var SMB2_SPEED_MPH_SCALE = 134.21985;
var GOAL_SFX_NAME = "goal_enter";
var GOAL_ANNOUNCER_NAME = "an_goal";
var READY_ANNOUNCER_NAME = "an_ready";
var GO_ANNOUNCER_NAMES = ["an_go_1", "an_go_2"];
var PERFECT_ANNOUNCER_NAME = "an_perfect";
var BONUS_FINISH_ANNOUNCER_NAME = "an_bonus_finish";
var HURRY_UP_ANNOUNCER_NAME = "an_hurryup";
var TIME_OVER_ANNOUNCER_NAME = "an_timeover";
var BANANA_SFX_NAME = "banana_collect";
var BANANA_BUNCH_SFX_NAME = "banana_bunch_collect";
var FALLOUT_SFX_NAME = "fallout";
var SMB1_BG_MUSIC = {
  bg_jun: "jungle",
  bg_sun: "sky",
  bg_bns: "bonus",
  bg_nig: "mall",
  bg_wat: "water",
  bg_snd: "desert",
  bg_ice: "arctic",
  bg_stm: "storm",
  bg_spa: "extra",
  bg_mst: "master",
  bg_ending: "ending"
};
var SMB2_BG_MUSIC = {
  bg_jun2: "jungle",
  bg_lav2: "volcano",
  bg_wat2: "ocean",
  bg_wha2: "whale",
  bg_par2: "amusement_park",
  bg_pot2: "pot",
  bg_bub2: "washingmachine",
  bg_gea2: "clocktower",
  bg_spa2: "colony",
  bg_ele2: "badboon",
  bg_bns2: "bonus"
};
var SMB1_TRACK_INFO = {
  amusement_park: { hasIntro: false },
  arctic: { hasIntro: false },
  badboon: { hasIntro: true },
  bonus: { hasIntro: true },
  desert: { hasIntro: true },
  ending: { hasIntro: true },
  extra: { hasIntro: true },
  jungle: { hasIntro: false },
  mall: { hasIntro: true },
  master: { hasIntro: true },
  sky: { hasIntro: true },
  storm: { hasIntro: true },
  water: { hasIntro: true }
};
var SMB2_TRACK_INFO = {
  amusement_park: { hasIntro: false },
  badboon: { hasIntro: true },
  bonus: { hasIntro: true },
  clocktower: { hasIntro: false },
  colony: { hasIntro: true },
  jungle: { hasIntro: true },
  // SMB2 jungle has an intro; SMB1 jungle does not.
  ocean: { hasIntro: true },
  pot: { hasIntro: true },
  volcano: { hasIntro: true },
  washingmachine: { hasIntro: true },
  whale: { hasIntro: false }
};
var MUSIC_TRACK_INFO = {
  [GAME_SOURCES.SMB1]: SMB1_TRACK_INFO,
  [GAME_SOURCES.SMB2]: SMB2_TRACK_INFO,
  [GAME_SOURCES.MB2WS]: SMB2_TRACK_INFO
};
var AudioManager = class {
  ctx = null;
  masterGain = null;
  sfxGain = null;
  announcerGain = null;
  musicGain = null;
  bufferCache = /* @__PURE__ */ new Map();
  rolling = /* @__PURE__ */ new Map();
  musicIntroSource = null;
  musicLoopSource = null;
  currentMusicKey = null;
  musicToken = 0;
  musicVolume = 0.5;
  sfxVolume = 0.3;
  announcerVolume = 0.3;
  async resume() {
    const ctx = await this.ensureContext();
    if (ctx.state === "suspended") {
      await ctx.resume();
    }
  }
  async playSfx(sfx, gameSource, volume = 1, rate = 1, delaySeconds = 0) {
    const url = typeof sfx === "number" ? this.resolveSfxUrl(sfx, gameSource) : this.resolveNamedSfxUrl(sfx);
    if (!url) {
      return;
    }
    const ctx = await this.ensureContext();
    const buffer = await this.getBuffer(url);
    if (!buffer) {
      return;
    }
    this.playBuffer(buffer, this.sfxGain ?? ctx.destination, volume, rate, delaySeconds);
  }
  async playGoal(gameSource) {
    await this.playSfx(GOAL_SFX_NAME, gameSource, 0.9);
  }
  async playAnnouncerGoal(delaySeconds = 1) {
    await this.playAnnouncer(GOAL_ANNOUNCER_NAME, 0.9, delaySeconds);
  }
  async playAnnouncerReady() {
    await this.playAnnouncer(READY_ANNOUNCER_NAME, 0.9);
  }
  async playAnnouncerGo() {
    const name = GO_ANNOUNCER_NAMES[Math.floor(Math.random() * GO_ANNOUNCER_NAMES.length)];
    await this.playAnnouncer(name, 0.9);
  }
  async playAnnouncerPerfect() {
    await this.playAnnouncer(PERFECT_ANNOUNCER_NAME, 0.9);
  }
  async playAnnouncerBonusFinish() {
    await this.playAnnouncer(BONUS_FINISH_ANNOUNCER_NAME, 0.9);
  }
  async playAnnouncerHurryUp() {
    await this.playAnnouncer(HURRY_UP_ANNOUNCER_NAME, 0.9);
  }
  async playAnnouncerTimeOver() {
    await this.playAnnouncer(TIME_OVER_ANNOUNCER_NAME, 0.9);
  }
  async playAnnouncerCount(count) {
    const clamped = Math.max(0, Math.min(10, Math.trunc(count)));
    await this.playAnnouncer(`an_count_${clamped}`, 0.9);
  }
  async playBananaCollect(isBunch) {
    const name = isBunch ? BANANA_BUNCH_SFX_NAME : BANANA_SFX_NAME;
    await this.playSfx(name, GAME_SOURCES.SMB1, 0.85);
  }
  async playFallout(gameSource) {
    await this.playSfx(FALLOUT_SFX_NAME, gameSource, 0.9);
  }
  async playBumper(gameSource) {
    await this.playSfx("bumper_hit", gameSource, 0.9);
  }
  async playAnnouncerTimeBonus(gameSource, isHigh) {
    void gameSource;
    void isHigh;
  }
  async playMusicForStage(stageId, gameSource) {
    const bgFile = this.getBgFileName(stageId, gameSource);
    if (!bgFile) {
      return;
    }
    const track = this.getMusicTrackPrefix(bgFile, gameSource);
    if (!track) {
      return;
    }
    const ctx = await this.ensureContext();
    const musicKey = `${gameSource}:${track}`;
    if (this.currentMusicKey === musicKey) {
      return;
    }
    this.stopMusic();
    const token = ++this.musicToken;
    const { introUrl, loopUrl, oneshotUrl } = this.resolveMusicUrls(track, gameSource);
    const loopBuffer = loopUrl ? await this.getBuffer(loopUrl) : null;
    const introBuffer = introUrl ? await this.getBuffer(introUrl) : null;
    const oneshotBuffer = loopBuffer ? null : oneshotUrl ? await this.getBuffer(oneshotUrl) : null;
    if (token !== this.musicToken) {
      return;
    }
    if (loopBuffer) {
      const startTime = ctx.currentTime + 0.01;
      if (introBuffer) {
        const introSource = ctx.createBufferSource();
        introSource.buffer = introBuffer;
        introSource.connect(this.musicGain ?? ctx.destination);
        introSource.start(startTime);
        this.musicIntroSource = introSource;
        const loopSource = ctx.createBufferSource();
        loopSource.buffer = loopBuffer;
        loopSource.loop = true;
        loopSource.connect(this.musicGain ?? ctx.destination);
        loopSource.start(startTime + introBuffer.duration);
        this.musicLoopSource = loopSource;
      } else {
        const loopSource = ctx.createBufferSource();
        loopSource.buffer = loopBuffer;
        loopSource.loop = true;
        loopSource.connect(this.musicGain ?? ctx.destination);
        loopSource.start(startTime);
        this.musicLoopSource = loopSource;
      }
      this.currentMusicKey = musicKey;
      return;
    }
    if (oneshotBuffer) {
      const source = ctx.createBufferSource();
      source.buffer = oneshotBuffer;
      source.connect(this.musicGain ?? ctx.destination);
      source.start();
      this.musicLoopSource = source;
      this.currentMusicKey = musicKey;
    }
  }
  stopMusic() {
    if (this.musicIntroSource) {
      this.musicIntroSource.stop();
      this.musicIntroSource.disconnect();
      this.musicIntroSource = null;
    }
    if (this.musicLoopSource) {
      this.musicLoopSource.stop();
      this.musicLoopSource.disconnect();
      this.musicLoopSource = null;
    }
    this.currentMusicKey = null;
    this.musicToken += 1;
  }
  async updateRollingSound(ball, gameSource, frameCount) {
    if (!ball?.physBall) {
      return;
    }
    if ((frameCount & 7) !== 0 && ball.audio?.rollingVol !== 0) {
      return;
    }
    const onGround = (ball.audio?.lastColiFlags & COLI_FLAGS.OCCURRED) !== 0;
    const speedScaled = ball.speed * 216;
    let vol = 0;
    let pitch = 0;
    let rate = 1;
    if (onGround && speedScaled > 10) {
      vol = Math.min((speedScaled - 10) * 1.5, 100);
      pitch = Math.min((speedScaled - 10) * 15, 80) * 0.85;
      const speedMph = ball.speed * SMB2_SPEED_MPH_SCALE;
      const pitchFactor = Math.min(Math.max((speedMph - 10) / 60, 0), 1);
      rate = 0.65 + pitchFactor * 1.25;
    }
    ball.audio.rollingVol = vol;
    ball.audio.rollingPitch = pitch;
    await this.setRollingLoop(ball.playerId ?? 0, gameSource, vol, rate);
  }
  async playImpactForBall(ball, gameSource, frameCount) {
    if (!ball?.physBall || !ball.audio) {
      return;
    }
    const onGround = (ball.audio?.lastColiFlags & COLI_FLAGS.OCCURRED) !== 0;
    if (!onGround) {
      return;
    }
    const impact = Math.max(0, -ball.audio.lastColiSpeed);
    if (impact <= 0.05 || frameCount - ball.audio.lastImpactFrame < 6) {
      return;
    }
    ball.audio.lastImpactFrame = frameCount;
    let sfxName = "";
    if (impact > 0.18699999898672104) {
      sfxName = "ball_hit_hard";
    } else if (impact > 0.14299999922513962) {
      sfxName = "ball_hit_med";
    } else if (impact > 0.0989999994635582) {
      sfxName = "ball_hit_soft";
    }
    if (sfxName) {
      await this.playSfx(sfxName, gameSource, 0.9);
    }
  }
  async consumeBallEvents(ball, gameSource) {
    if (!ball?.audio) {
      return;
    }
    if (ball.audio.bumperHit) {
      ball.audio.bumperHit = false;
      await this.playBumper(gameSource);
    }
  }
  async setRollingLoop(playerId, gameSource, vol, rate) {
    const ctx = await this.ensureContext();
    let rolling = this.rolling.get(playerId);
    if (!rolling) {
      const gain = ctx.createGain();
      gain.gain.value = 0;
      gain.connect(this.sfxGain ?? ctx.destination);
      rolling = { source: null, gain, rate: 1, volume: 0 };
      this.rolling.set(playerId, rolling);
    }
    if (vol <= 0) {
      if (rolling.source) {
        rolling.source.stop();
        rolling.source.disconnect();
        rolling.source = null;
      }
      rolling.gain.gain.value = 0;
      rolling.volume = 0;
      return;
    }
    if (!rolling.source) {
      const url = this.resolveNamedSfxUrl(ROLLING_SFX_NAME);
      const buffer = url ? await this.getBuffer(url) : null;
      if (!buffer) {
        return;
      }
      const source = ctx.createBufferSource();
      source.buffer = buffer;
      source.loop = true;
      source.connect(rolling.gain);
      source.start();
      rolling.source = source;
    }
    const targetVolume = Math.min(vol / 127, 1);
    const targetRate = rate;
    rolling.gain.gain.value = targetVolume;
    if (rolling.source) {
      rolling.source.playbackRate.value = targetRate;
    }
    rolling.volume = targetVolume;
    rolling.rate = targetRate;
  }
  async ensureContext() {
    if (!this.ctx) {
      this.ctx = new AudioContext();
      this.masterGain = this.ctx.createGain();
      this.sfxGain = this.ctx.createGain();
      this.announcerGain = this.ctx.createGain();
      this.musicGain = this.ctx.createGain();
      this.masterGain.gain.value = 0.9;
      this.sfxGain.gain.value = this.sfxVolume;
      this.announcerGain.gain.value = this.announcerVolume;
      this.musicGain.gain.value = this.musicVolume;
      this.sfxGain.connect(this.masterGain);
      this.announcerGain.connect(this.masterGain);
      this.musicGain.connect(this.masterGain);
      this.masterGain.connect(this.ctx.destination);
    }
    return this.ctx;
  }
  setMusicVolume(value) {
    this.musicVolume = this.clampVolume(value);
    if (this.musicGain) {
      this.musicGain.gain.value = this.musicVolume;
    }
  }
  setSfxVolume(value) {
    this.sfxVolume = this.clampVolume(value);
    if (this.sfxGain) {
      this.sfxGain.gain.value = this.sfxVolume;
    }
  }
  setAnnouncerVolume(value) {
    this.announcerVolume = this.clampVolume(value);
    if (this.announcerGain) {
      this.announcerGain.gain.value = this.announcerVolume;
    }
  }
  async getBuffer(url) {
    if (!this.bufferCache.has(url)) {
      this.bufferCache.set(
        url,
        fetch(url).then((res) => res.ok ? res.arrayBuffer() : null).then((buf) => buf ? this.ensureContext().then((ctx) => ctx.decodeAudioData(buf)) : null)
      );
    }
    return this.bufferCache.get(url) ?? null;
  }
  resolveSfxUrl(id, gameSource) {
    const hex = `0x${id.toString(16).toUpperCase().padStart(4, "0")}`;
    return `${AUDIO_BASE_PATH}/${SFX_DIR}/${hex}.wav`;
  }
  resolveNamedSfxUrl(name) {
    return `${AUDIO_BASE_PATH}/${SFX_DIR}/${name}.wav`;
  }
  resolveBgmUrl(track, suffix, gameSource) {
    const folder = MUSIC_DIR_BY_SOURCE[gameSource] ?? MUSIC_DIR_BY_SOURCE[GAME_SOURCES.SMB1];
    return `${AUDIO_BASE_PATH}/${folder}/${track}${suffix}.ogg`;
  }
  resolveMusicUrls(track, gameSource) {
    const info = MUSIC_TRACK_INFO[gameSource]?.[track];
    if (!info) {
      console.warn(`Missing MUSIC_TRACK_INFO for ${gameSource}:${track} (assuming no intro)`);
    }
    const hasIntro = info?.hasIntro ?? false;
    return {
      introUrl: hasIntro ? this.resolveBgmUrl(track, "_intro", gameSource) : null,
      loopUrl: this.resolveBgmUrl(track, "_loop", gameSource),
      oneshotUrl: this.resolveBgmUrl(track, "", gameSource)
    };
  }
  getMusicTrackPrefix(bgFile, gameSource) {
    if (gameSource === GAME_SOURCES.SMB2 || gameSource === GAME_SOURCES.MB2WS) {
      return SMB2_BG_MUSIC[bgFile] ?? null;
    }
    return SMB1_BG_MUSIC[bgFile] ?? null;
  }
  async playAnnouncer(name, volume = 1, delaySeconds = 0) {
    const url = this.resolveNamedSfxUrl(name);
    if (!url) {
      return;
    }
    const ctx = await this.ensureContext();
    const buffer = await this.getBuffer(url);
    if (!buffer) {
      return;
    }
    this.playBuffer(buffer, this.announcerGain ?? ctx.destination, volume, 1, delaySeconds);
  }
  playBuffer(buffer, destination, volume, rate, delaySeconds) {
    if (!this.ctx) {
      return;
    }
    const source = this.ctx.createBufferSource();
    const gain = this.ctx.createGain();
    source.buffer = buffer;
    source.playbackRate.value = rate;
    gain.gain.value = volume;
    source.connect(gain);
    gain.connect(destination);
    const startTime = this.ctx.currentTime + Math.max(0, delaySeconds);
    source.start(startTime);
  }
  clampVolume(value) {
    if (!Number.isFinite(value)) {
      return 0;
    }
    return Math.max(0, Math.min(1, value));
  }
  getBgFileName(stageId, gameSource) {
    if (gameSource === GAME_SOURCES.SMB2) {
      return getSmb2StageInfo(stageId)?.bgInfo?.fileName ?? null;
    }
    if (gameSource === GAME_SOURCES.MB2WS) {
      return getMb2wsStageInfo(stageId)?.bgInfo?.fileName ?? null;
    }
    return STAGE_INFO_MAP.get(stageId)?.bgInfo?.fileName ?? null;
  }
};

// src/noclip/Camera.ts
import { mat4 as mat414 } from "gl-matrix";

// src/noclip/gfx/helpers/ProjectionHelpers.ts
import { mat4 as mat412 } from "gl-matrix";
var mtxOpenGLFromD3D = mat412.fromValues(
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  2,
  0,
  0,
  0,
  -1,
  1
);
function projectionMatrixOpenGLFromD3D(m) {
  mat412.mul(m, mtxOpenGLFromD3D, m);
}
var mtxD3DFromOpenGL = mat412.fromValues(
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  0.5,
  0,
  0,
  0,
  0.5,
  1
);
function projectionMatrixD3DFromOpenGL(m) {
  mat412.mul(m, mtxD3DFromOpenGL, m);
}
function projectionMatrixConvertClipSpaceNearZ(m, dst, src) {
  if (dst === src)
    return;
  if (dst === -1 /* NegativeOne */)
    projectionMatrixOpenGLFromD3D(m);
  else if (dst === 0 /* Zero */)
    projectionMatrixD3DFromOpenGL(m);
}

// src/noclip/Geometry.ts
import { vec3 as vec314, vec4 as vec42, mat4 as mat413 } from "gl-matrix";
var scratchVec4 = vec42.create();
var scratchMatrix = mat413.create();
var Plane = class _Plane {
  constructor(x = 0, y = 0, z = 0, d = 0) {
    this.d = d;
    vec314.set(this.n, x, y, z);
  }
  static scratchVec3 = nArray(2, () => vec314.create());
  n = vec314.create();
  set(n, d) {
    vec314.copy(this.n, n);
    this.d = d;
  }
  copy(o) {
    this.set(o.n, o.d);
  }
  negate() {
    vec314.negate(this.n, this.n);
    this.d *= -1;
  }
  distance(x, y, z) {
    const nx = this.n[0], ny = this.n[1], nz = this.n[2];
    const dot = x * nx + y * ny + z * nz;
    return dot + this.d;
  }
  distanceVec3(p) {
    return vec314.dot(p, this.n) + this.d;
  }
  // Assumes input normal is not normalized.
  set4Unnormalized(nx, ny, nz, d) {
    const h = Math.hypot(nx, ny, nz);
    vec314.set(this.n, nx / h, ny / h, nz / h);
    this.d = d / h;
  }
  getVec4v(dst) {
    vec42.set(dst, this.n[0], this.n[1], this.n[2], this.d);
  }
  setVec4v(v) {
    vec314.set(this.n, v[0], v[1], v[2]);
    this.d = v[3];
  }
  setTri(p0, p1, p2) {
    const scratch = _Plane.scratchVec3;
    vec314.sub(scratch[0], p1, p0);
    vec314.sub(scratch[1], p2, p0);
    vec314.cross(this.n, scratch[0], scratch[1]);
    vec314.normalize(this.n, this.n);
    this.d = -vec314.dot(this.n, p0);
  }
  projectToPlane(dst, pt) {
    vec314.scaleAndAdd(dst, pt, this.n, -this.distanceVec3(pt));
  }
  intersectLine(dst, p0, dir) {
    const t = -(vec314.dot(this.n, p0) + this.d) / vec314.dot(this.n, dir);
    vec314.scaleAndAdd(dst, p0, dir, t);
  }
  // Compute point where line segment intersects plane
  intersectLineSegment(dst, p0, p1) {
    const dir = _Plane.scratchVec3[1];
    vec314.sub(dir, p1, p0);
    this.intersectLine(dst, p0, dir);
  }
  transform(mtx) {
    this.getVec4v(scratchVec4);
    mat413.invert(scratchMatrix, mtx);
    mat413.transpose(scratchMatrix, scratchMatrix);
    vec42.transformMat4(scratchVec4, scratchVec4, scratchMatrix);
    this.setVec4v(scratchVec4);
  }
};
var scratchVec3a7 = vec314.create();
var scratchVec3b5 = vec314.create();
var Frustum = class _Frustum {
  planes = nArray(6, () => new Plane());
  constructor() {
  }
  updateClipFrustum(m, clipSpaceNearZ) {
    const planes = this.planes;
    let index = 0;
    planes[index++].set4Unnormalized(m[3] + m[0], m[7] + m[4], m[11] + m[8], m[15] + m[12]);
    planes[index++].set4Unnormalized(m[3] + m[1], m[7] + m[5], m[11] + m[9], m[15] + m[13]);
    planes[index++].set4Unnormalized(m[3] - m[0], m[7] - m[4], m[11] - m[8], m[15] - m[12]);
    planes[index++].set4Unnormalized(m[3] - m[1], m[7] - m[5], m[11] - m[9], m[15] - m[13]);
    if (clipSpaceNearZ === -1 /* NegativeOne */) {
      planes[index++].set4Unnormalized(m[3] + m[2], m[7] + m[6], m[11] + m[10], m[15] + m[14]);
    } else if (clipSpaceNearZ === 0 /* Zero */) {
      planes[index++].set4Unnormalized(m[2], m[6], m[10], m[14]);
    }
    planes[index++].set4Unnormalized(m[3] - m[2], m[7] - m[6], m[11] - m[10], m[15] - m[14]);
  }
  copy(o) {
    for (let i = 0; i < this.planes.length; i++) {
      this.planes[i].copy(o.planes[i]);
    }
  }
  clone() {
    const f = new _Frustum();
    f.copy(this);
    return f;
  }
  intersect(aabb) {
    const center = scratchVec3a7;
    const extents = scratchVec3b5;
    vec314.add(center, aabb.min, aabb.max);
    vec314.scale(center, center, 0.5);
    vec314.sub(extents, aabb.max, center);
    let fullyInside = true;
    for (let i = 0; i < this.planes.length; i++) {
      const plane = this.planes[i];
      const r = extents[0] * Math.abs(plane.n[0]) + extents[1] * Math.abs(plane.n[1]) + extents[2] * Math.abs(plane.n[2]);
      const d = plane.distanceVec3(center);
      if (d + r < 0) {
        return 1 /* Outside */;
      }
      if (d - r < 0) {
        fullyInside = false;
      }
    }
    return fullyInside ? 0 /* Inside */ : 2 /* Intersection */;
  }
  contains(aabb) {
    return this.intersect(aabb) === 0 /* Inside */;
  }
  containsSphere(v, radius) {
    for (let i = 0; i < this.planes.length; i++) {
      if (this.planes[i].distanceVec3(v) < -radius) {
        return false;
      }
    }
    return true;
  }
  containsPoint(v) {
    for (let i = 0; i < this.planes.length; i++) {
      if (this.planes[i].distanceVec3(v) < 0) {
        return false;
      }
    }
    return true;
  }
  transform(src, m) {
    this.copy(src);
    for (let i = 0; i < this.planes.length; i++) {
      this.planes[i].transform(m);
    }
  }
};

// src/noclip/Camera.ts
var Camera = class {
  clipSpaceNearZ;
  viewMatrix = mat414.create();
  worldMatrix = mat414.create();
  projectionMatrix = mat414.create();
  clipFromWorldMatrix = mat414.create();
  frustum = new Frustum();
  fovY = Math.PI / 3;
  aspect = 1;
  isOrthographic = false;
  left = -1;
  right = 1;
  bottom = -1;
  top = 1;
  near = 1;
  far = Infinity;
  identity() {
    mat414.identity(this.worldMatrix);
    mat414.identity(this.viewMatrix);
  }
  worldMatrixUpdated() {
    mat414.invert(this.viewMatrix, this.worldMatrix);
    this.updateClipFromWorld();
  }
  setPerspective(fovY, aspect, n, f = Infinity) {
    this.fovY = fovY;
    this.aspect = aspect;
    this.isOrthographic = false;
    const nearY = Math.tan(fovY * 0.5) * n;
    const nearX = nearY * aspect;
    this.setFrustum(-nearX, nearX, -nearY, nearY, n, f);
  }
  setOrthographic(orthoScaleY, aspect, n, f) {
    this.aspect = aspect;
    this.isOrthographic = true;
    const nearY = orthoScaleY;
    const nearX = orthoScaleY * aspect;
    this.setFrustum(-nearX, nearX, -nearY, nearY, n, f);
  }
  setClipPlanes(n, f = Infinity) {
    if (this.isOrthographic) {
      this.setOrthographic(this.top, this.aspect, n, f);
    } else {
      this.setPerspective(this.fovY, this.aspect, n, f);
    }
  }
  updateClipFromWorld() {
    mat414.mul(this.clipFromWorldMatrix, this.projectionMatrix, this.viewMatrix);
    this.frustum.updateClipFrustum(this.clipFromWorldMatrix, this.clipSpaceNearZ);
  }
  updateProjectionMatrix() {
    if (this.isOrthographic) {
      projectionMatrixForCuboid(this.projectionMatrix, this.left, this.right, this.bottom, this.top, this.near, this.far);
    } else {
      projectionMatrixForFrustum(this.projectionMatrix, this.left, this.right, this.bottom, this.top, this.near, this.far);
    }
    projectionMatrixReverseDepth(this.projectionMatrix);
    projectionMatrixConvertClipSpaceNearZ(this.projectionMatrix, this.clipSpaceNearZ, -1 /* NegativeOne */);
    this.updateClipFromWorld();
  }
  setFrustum(left, right, bottom, top, near, far) {
    this.left = left;
    this.right = right;
    this.bottom = bottom;
    this.top = top;
    this.near = near;
    this.far = far;
    this.updateProjectionMatrix();
  }
};

// src/noclip/gfx/platform/GfxPlatformImpl.ts
var defaultBindingLayoutSamplerDescriptor = {
  formatKind: 0 /* Float */,
  dimension: 0 /* n2D */
};
function isFormatSamplerKindCompatible(samplerKind, textureKind) {
  if (textureKind === samplerKind)
    return true;
  else if (samplerKind === 1 /* UnfilterableFloat */ && (textureKind === 4 /* Depth */ || textureKind === 0 /* Float */))
    return true;
  return false;
}

// src/noclip/gfx/platform/GfxPlatformWebGL2.ts
var UBO_PAGE_MAX_BYTE_SIZE = 65536;
function translateQueryPoolType(type) {
  switch (type) {
    case 0 /* OcclusionConservative */:
      return WebGL2RenderingContext.ANY_SAMPLES_PASSED_CONSERVATIVE;
    default:
      throw "whoops";
  }
}
function translateVertexFormat(fmt) {
  function translateType(flags2) {
    switch (flags2) {
      case 1 /* U8 */:
        return WebGL2RenderingContext.UNSIGNED_BYTE;
      case 2 /* U16 */:
        return WebGL2RenderingContext.UNSIGNED_SHORT;
      case 3 /* U32 */:
        return WebGL2RenderingContext.UNSIGNED_INT;
      case 4 /* S8 */:
        return WebGL2RenderingContext.BYTE;
      case 5 /* S16 */:
        return WebGL2RenderingContext.SHORT;
      case 6 /* S32 */:
        return WebGL2RenderingContext.INT;
      case 7 /* F16 */:
        return WebGL2RenderingContext.HALF_FLOAT;
      case 8 /* F32 */:
        return WebGL2RenderingContext.FLOAT;
      default:
        throw "whoops";
    }
  }
  function translateSize(flags2) {
    switch (flags2) {
      case 1 /* R */:
        return 1;
      case 2 /* RG */:
        return 2;
      case 3 /* RGB */:
        return 3;
      case 4 /* RGBA */:
        return 4;
    }
  }
  const typeFlags = getFormatTypeFlags(fmt);
  const compFlags = getFormatCompFlags(fmt);
  const flags = getFormatFlags(fmt);
  const type = translateType(typeFlags);
  const size = translateSize(compFlags);
  const normalized = !!(flags & 1 /* Normalized */);
  return { size, type, normalized };
}
function isFormatSizedInteger(fmt) {
  const flags = getFormatFlags(fmt);
  if (!!(flags & 1 /* Normalized */))
    return false;
  const typeFlags = getFormatTypeFlags(fmt);
  if (typeFlags === 4 /* S8 */ || typeFlags === 5 /* S16 */ || typeFlags === 6 /* S32 */)
    return true;
  if (typeFlags === 1 /* U8 */ || typeFlags === 2 /* U16 */ || typeFlags === 3 /* U32 */)
    return true;
  return false;
}
function translateIndexFormat(format) {
  switch (format) {
    case GfxFormat.U8_R:
      return WebGL2RenderingContext.UNSIGNED_BYTE;
    case GfxFormat.U16_R:
      return WebGL2RenderingContext.UNSIGNED_SHORT;
    case GfxFormat.U32_R:
      return WebGL2RenderingContext.UNSIGNED_INT;
    default:
      throw "whoops";
  }
}
function translateBufferHint(hint) {
  switch (hint) {
    case 1 /* Static */:
      return WebGL2RenderingContext.STATIC_DRAW;
    case 2 /* Dynamic */:
      return WebGL2RenderingContext.DYNAMIC_DRAW;
  }
}
function translateBufferUsageToTarget(usage) {
  if (usage & 1 /* Index */)
    return WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER;
  else if (usage & 2 /* Vertex */)
    return WebGL2RenderingContext.ARRAY_BUFFER;
  else if (usage & 4 /* Uniform */)
    return WebGL2RenderingContext.UNIFORM_BUFFER;
  else if (usage & (8 /* Storage */ | 16 /* CopySrc */))
    return WebGL2RenderingContext.COPY_WRITE_BUFFER;
  else
    throw "whoops";
}
function translateWrapMode(wrapMode) {
  switch (wrapMode) {
    case 0 /* Clamp */:
      return WebGL2RenderingContext.CLAMP_TO_EDGE;
    case 1 /* Repeat */:
      return WebGL2RenderingContext.REPEAT;
    case 2 /* Mirror */:
      return WebGL2RenderingContext.MIRRORED_REPEAT;
    default:
      throw "whoops";
  }
}
function translateMinFilter(texFilter, mipFilter) {
  if (mipFilter === 1 /* Linear */ && texFilter === 1 /* Bilinear */)
    return WebGL2RenderingContext.LINEAR_MIPMAP_LINEAR;
  if (mipFilter === 1 /* Linear */ && texFilter === 0 /* Point */)
    return WebGL2RenderingContext.NEAREST_MIPMAP_LINEAR;
  if (mipFilter === 0 /* Nearest */ && texFilter === 1 /* Bilinear */)
    return WebGL2RenderingContext.LINEAR_MIPMAP_NEAREST;
  if (mipFilter === 0 /* Nearest */ && texFilter === 0 /* Point */)
    return WebGL2RenderingContext.NEAREST_MIPMAP_NEAREST;
  throw new Error(`Unknown texture filter mode`);
}
function translateMagFilter(texFilter) {
  if (texFilter === 1 /* Bilinear */)
    return WebGL2RenderingContext.LINEAR;
  else if (texFilter === 0 /* Point */)
    return WebGL2RenderingContext.NEAREST;
  throw new Error(`Unknown texture filter mode`);
}
function translatePrimitiveTopology(topology) {
  switch (topology) {
    case 0 /* Triangles */:
      return WebGL2RenderingContext.TRIANGLES;
    case 1 /* Lines */:
      return WebGL2RenderingContext.LINES;
    default:
      throw new Error("Unknown primitive topology mode");
  }
}
function translateTextureDimension(dimension) {
  if (dimension === 0 /* n2D */)
    return WebGL2RenderingContext.TEXTURE_2D;
  else if (dimension === 1 /* n2DArray */)
    return WebGL2RenderingContext.TEXTURE_2D_ARRAY;
  else if (dimension === 3 /* Cube */)
    return WebGL2RenderingContext.TEXTURE_CUBE_MAP;
  else if (dimension === 2 /* n3D */)
    return WebGL2RenderingContext.TEXTURE_3D;
  else
    throw "whoops";
}
function getPlatformBuffer(buffer_, byteOffset = 0) {
  const buffer = buffer_;
  return buffer.gl_buffer_pages[byteOffset / buffer.pageByteSize | 0];
}
function getPlatformTexture(texture_) {
  const texture = texture_;
  return texture.gl_texture;
}
function getPlatformSampler(sampler_) {
  const sampler = sampler_;
  return sampler.gl_sampler;
}
function assignPlatformName(o, name) {
  o.name = name;
  o.__SPECTOR_Metadata = { name };
}
function createBindingLayouts(bindingLayouts) {
  let firstUniformBuffer = 0, firstSampler = 0;
  const bindingLayoutTables = [];
  for (let i = 0; i < bindingLayouts.length; i++) {
    const { numUniformBuffers, numSamplers, samplerEntries } = bindingLayouts[i];
    const bindingSamplerEntries = [];
    if (samplerEntries !== void 0)
      assert2(samplerEntries.length === numSamplers);
    for (let j = 0; j < numSamplers; j++) {
      const samplerEntry = samplerEntries !== void 0 ? samplerEntries[j] : defaultBindingLayoutSamplerDescriptor;
      const { dimension, formatKind } = samplerEntry;
      bindingSamplerEntries.push({ gl_target: translateTextureDimension(dimension), formatKind });
    }
    bindingLayoutTables.push({ firstUniformBuffer, numUniformBuffers, firstSampler, numSamplers, samplerEntries: bindingSamplerEntries });
    firstUniformBuffer += numUniformBuffers;
    firstSampler += numSamplers;
  }
  return { numUniformBuffers: firstUniformBuffer, numSamplers: firstSampler, bindingLayoutTables };
}
function isBlendStateNone(blendState) {
  return blendState.blendMode === GfxBlendMode.Add && blendState.blendSrcFactor === GfxBlendFactor.One && blendState.blendDstFactor === GfxBlendFactor.Zero;
}
function isBlockCompressSized(w, h, bw, bh) {
  if (w % bw !== 0)
    return false;
  if (h % bh !== 0)
    return false;
  return true;
}
var ResourceCreationTracker = class {
  liveObjects = /* @__PURE__ */ new Set();
  creationStacks = /* @__PURE__ */ new WeakMap();
  deletionStacks = /* @__PURE__ */ new WeakMap();
  trackResourceCreated(o) {
    this.creationStacks.set(o, new Error().stack);
    this.liveObjects.add(o);
  }
  trackResourceDestroyed(o) {
    if (this.deletionStacks.has(o))
      console.warn(`Object double freed:`, o, `

Creation stack: `, this.creationStacks.get(o), `

Deletion stack: `, this.deletionStacks.get(o), `

This stack: `, new Error().stack);
    this.deletionStacks.set(o, new Error().stack);
    this.liveObjects.delete(o);
  }
  checkForLeaks() {
    for (const o of this.liveObjects.values())
      console.warn("Object leaked:", o, "Creation stack:", this.creationStacks.get(o));
  }
};
function prependLineNo(str, lineStart = 1) {
  const lines = str.split("\n");
  return lines.map((s, i) => `${leftPad2("" + (lineStart + i), 4, " ")}  ${s}`).join("\n");
}
var GfxPlatformWebGL2Config = class {
  trackResources = false;
  shaderDebug = false;
};
var GfxImplP_GL = class {
  constructor(gl, configuration) {
    this.gl = gl;
    this._contextAttributes = assertExists2(gl.getContextAttributes());
    this._WEBGL_compressed_texture_s3tc = gl.getExtension("WEBGL_compressed_texture_s3tc");
    this._WEBGL_compressed_texture_s3tc_srgb = gl.getExtension("WEBGL_compressed_texture_s3tc_srgb");
    this._EXT_clip_control = gl.getExtension("EXT_clip_control");
    this._EXT_texture_compression_rgtc = gl.getExtension("EXT_texture_compression_rgtc");
    this._EXT_texture_compression_bptc = gl.getExtension("EXT_texture_compression_bptc");
    this._EXT_texture_filter_anisotropic = gl.getExtension("EXT_texture_filter_anisotropic");
    this._EXT_texture_norm16 = gl.getExtension("EXT_texture_norm16");
    this._KHR_parallel_shader_compile = gl.getExtension("KHR_parallel_shader_compile");
    this._OES_texture_float_linear = gl.getExtension("OES_texture_float_linear");
    this._OES_texture_half_float_linear = gl.getExtension("OES_texture_half_float_linear");
    this._OES_draw_buffers_indexed = gl.getExtension("OES_draw_buffers_indexed");
    this._WEBGL_polygon_mode = gl.getExtension("WEBGL_polygon_mode");
    this._WEBGL_provoking_vertex = gl.getExtension("WEBGL_provoking_vertex");
    this._uniformBufferMaxPageByteSize = Math.min(gl.getParameter(gl.MAX_UNIFORM_BLOCK_SIZE), UBO_PAGE_MAX_BYTE_SIZE);
    if (this._EXT_clip_control !== null) {
      this._EXT_clip_control.clipControlEXT(this._EXT_clip_control.LOWER_LEFT_EXT, this._EXT_clip_control.ZERO_TO_ONE_EXT);
      this.clipSpaceNearZ = 0 /* Zero */;
    } else {
      this.clipSpaceNearZ = -1 /* NegativeOne */;
    }
    if (this._WEBGL_provoking_vertex !== null)
      this._WEBGL_provoking_vertex.provokingVertexWEBGL(this._WEBGL_provoking_vertex.FIRST_VERTEX_CONVENTION_WEBGL);
    this._scTexture = {
      _T: 1 /* Texture */,
      dimension: 0 /* n2D */,
      usage: 2 /* RenderTarget */,
      ResourceUniqueId: this.getNextUniqueId(),
      width: 0,
      height: 0,
      depthOrArrayLayers: 1,
      numLevels: 1,
      gl_target: null,
      gl_texture: null,
      pixelFormat: this._contextAttributes.alpha === false ? GfxFormat.U8_RGB_RT : GfxFormat.U8_RGBA_RT,
      formatKind: 0 /* Float */
    };
    this._resolveColorReadFramebuffer = this.ensureResourceExists(gl.createFramebuffer());
    this._resolveColorDrawFramebuffer = this.ensureResourceExists(gl.createFramebuffer());
    this._resolveDepthStencilReadFramebuffer = this.ensureResourceExists(gl.createFramebuffer());
    this._resolveDepthStencilDrawFramebuffer = this.ensureResourceExists(gl.createFramebuffer());
    this._renderPassDrawFramebuffer = this.ensureResourceExists(gl.createFramebuffer());
    this._readbackFramebuffer = this.ensureResourceExists(gl.createFramebuffer());
    this._fallbackTexture2D = this.createFallbackTexture(0 /* n2D */, 0 /* Float */);
    this._fallbackTexture2DArray = this.createFallbackTexture(1 /* n2DArray */, 0 /* Float */);
    this._fallbackTexture3D = this.createFallbackTexture(2 /* n3D */, 0 /* Float */);
    this._fallbackTextureCube = this.createFallbackTexture(3 /* Cube */, 0 /* Float */);
    this._fallbackVertexBuffer = this.createBuffer(4, 2 /* Vertex */, 1 /* Static */);
    this._currentMegaState.depthCompare = GfxCompareMode.Less;
    this._currentMegaState.depthWrite = false;
    this._currentMegaState.attachmentsState[0].channelWriteMask = 15 /* AllChannels */;
    for (let i = 1; i < 4; i++)
      this._currentMegaState.attachmentsState[i] = copyAttachmentState(void 0, this._currentMegaState.attachmentsState[0]);
    gl.enable(gl.DEPTH_TEST);
    gl.enable(gl.STENCIL_TEST);
    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);
    this._checkLimits();
    this._checkForBugQuirks();
    if (configuration.shaderDebug)
      this._shaderDebug = true;
    if (configuration.trackResources)
      this._resourceCreationTracker = new ResourceCreationTracker();
  }
  // Configuration
  _shaderDebug = false;
  _contextAttributes;
  // GL extension
  _WEBGL_compressed_texture_s3tc = null;
  _WEBGL_compressed_texture_s3tc_srgb = null;
  _EXT_clip_control = null;
  _EXT_texture_compression_rgtc = null;
  _EXT_texture_compression_bptc = null;
  _EXT_texture_filter_anisotropic = null;
  _EXT_texture_norm16 = null;
  _KHR_parallel_shader_compile = null;
  _OES_draw_buffers_indexed = null;
  _OES_texture_float_linear = null;
  _OES_texture_half_float_linear = null;
  _WEBGL_polygon_mode = null;
  _WEBGL_provoking_vertex = null;
  // Swap Chain
  _scTexture = null;
  _scPlatformFramebuffer = null;
  // GfxDevice
  _currentActiveTexture = null;
  _currentBoundVAO = null;
  _currentProgram = null;
  _resourceCreationTracker = null;
  _resourceUniqueId = 0;
  // Cached GL driver state
  _currentColorAttachment = [];
  _currentColorAttachmentView = [];
  _currentColorResolveTo = [];
  _currentColorResolveView = [];
  _currentDepthStencilAttachment = null;
  _currentDepthStencilAttachmentView = null;
  _currentDepthStencilResolveTo = null;
  _currentDepthStencilResolveView = null;
  _currentSampleCount = -1;
  _currentPipeline;
  _currentIndexBufferByteOffset = null;
  _currentMegaState = copyMegaState(defaultMegaState);
  _currentSamplers = [];
  _currentTextures = [];
  _currentUniformBuffers = [];
  _currentUniformBufferByteOffsets = [];
  _currentUniformBufferByteSizes = [];
  _currentScissorEnabled = false;
  _currentStencilRef = null;
  // Pass Execution
  _currentRenderPassDescriptor = null;
  _currentStatisticsGroup = null;
  _resolveColorAttachmentsChanged = false;
  _resolveColorReadFramebuffer;
  _resolveColorDrawFramebuffer;
  _resolveDepthStencilAttachmentsChanged = false;
  _resolveDepthStencilReadFramebuffer;
  _resolveDepthStencilDrawFramebuffer;
  _renderPassDrawFramebuffer;
  _readbackFramebuffer;
  _fallbackTexture2D;
  _fallbackTexture2DDepth = void 0;
  _fallbackTexture2DArray;
  _fallbackTexture3D;
  _fallbackTextureCube;
  _fallbackVertexBuffer;
  // GfxVendorInfo
  platform = 0 /* WebGL2 */;
  glslVersion = `#version 300 es`;
  explicitBindingLocations = false;
  separateSamplerTextures = false;
  viewportOrigin = 0 /* LowerLeft */;
  clipSpaceNearZ;
  // GfxLimits
  _uniformBufferMaxPageByteSize;
  uniformBufferByteAlignment;
  uniformBufferMaxPageByteSize;
  supportedSampleCounts;
  occlusionQueriesRecommended;
  computeShadersSupported = false;
  wireframeSupported = false;
  vertexBufferMinStride = 1;
  createFallbackTexture(dimension, formatKind) {
    const depth = dimension === 3 /* Cube */ ? 6 : 1;
    const pixelFormat = formatKind === 4 /* Depth */ ? GfxFormat.D32F : GfxFormat.U8_RGBA_NORM;
    const texture = this.createTexture({
      dimension,
      pixelFormat,
      usage: 1 /* Sampled */,
      width: 1,
      height: 1,
      depthOrArrayLayers: depth,
      numLevels: 1
    });
    if (formatKind === 0 /* Float */)
      this.uploadTextureData(texture, 0, [new Uint8Array(4 * depth)]);
    return getPlatformTexture(texture);
  }
  _checkLimits() {
    const gl = this.gl;
    this.uniformBufferByteAlignment = gl.getParameter(gl.UNIFORM_BUFFER_OFFSET_ALIGNMENT);
    this.uniformBufferMaxPageByteSize = this._uniformBufferMaxPageByteSize;
    const supportedSampleCounts = gl.getInternalformatParameter(gl.RENDERBUFFER, gl.DEPTH32F_STENCIL8, gl.SAMPLES);
    this.supportedSampleCounts = supportedSampleCounts ? [...supportedSampleCounts] : [];
    if (!this.supportedSampleCounts.includes(1))
      this.supportedSampleCounts.push(1);
    this.supportedSampleCounts.sort((a, b) => a - b);
    this.occlusionQueriesRecommended = true;
    if (this._WEBGL_polygon_mode !== null)
      this.wireframeSupported = true;
  }
  _checkForBugQuirks() {
    if (navigator.userAgent.includes("Firefox")) {
      this.occlusionQueriesRecommended = false;
    }
  }
  //#region GfxSwapChain
  configureSwapChain(width, height, platformFramebuffer) {
    const texture = this._scTexture;
    texture.width = width;
    texture.height = height;
    this._scPlatformFramebuffer = nullify2(platformFramebuffer);
  }
  getDevice() {
    return this;
  }
  getCanvas() {
    return this.gl.canvas;
  }
  getOnscreenTexture() {
    return this._scTexture;
  }
  //#endregion
  //#region GfxDevice
  translateTextureInternalFormat(fmt) {
    switch (fmt) {
      case GfxFormat.F16_R:
        return WebGL2RenderingContext.R16F;
      case GfxFormat.F16_RG:
        return WebGL2RenderingContext.RG16F;
      case GfxFormat.F16_RGB:
        return WebGL2RenderingContext.RGB16F;
      case GfxFormat.F16_RGBA:
        return WebGL2RenderingContext.RGBA16F;
      case GfxFormat.F32_R:
        return WebGL2RenderingContext.R32F;
      case GfxFormat.F32_RG:
        return WebGL2RenderingContext.RG32F;
      case GfxFormat.F32_RGB:
        return WebGL2RenderingContext.RGB32F;
      case GfxFormat.F32_RGBA:
        return WebGL2RenderingContext.RGBA32F;
      case GfxFormat.U8_R_NORM:
        return WebGL2RenderingContext.R8;
      case GfxFormat.U8_RG_NORM:
        return WebGL2RenderingContext.RG8;
      case GfxFormat.U8_RGB_NORM:
      case GfxFormat.U8_RGB_RT:
        return WebGL2RenderingContext.RGB8;
      case GfxFormat.U8_RGB_SRGB:
        return WebGL2RenderingContext.SRGB8;
      case GfxFormat.U8_RGBA_NORM:
      case GfxFormat.U8_RGBA_RT:
        return WebGL2RenderingContext.RGBA8;
      case GfxFormat.U8_RGBA_SRGB:
      case GfxFormat.U8_RGBA_RT_SRGB:
        return WebGL2RenderingContext.SRGB8_ALPHA8;
      case GfxFormat.U16_R:
        return WebGL2RenderingContext.R16UI;
      case GfxFormat.U16_R_NORM:
        return this._EXT_texture_norm16.R16_EXT;
      case GfxFormat.U16_RG_NORM:
        return this._EXT_texture_norm16.RG16_EXT;
      case GfxFormat.U16_RGBA_NORM:
        return this._EXT_texture_norm16.RGBA16_EXT;
      case GfxFormat.U16_RGBA_5551:
        return WebGL2RenderingContext.RGB5_A1;
      case GfxFormat.U16_RGB_565:
        return WebGL2RenderingContext.RGB565;
      case GfxFormat.U32_R:
        return WebGL2RenderingContext.R32UI;
      case GfxFormat.S8_RGBA_NORM:
        return WebGL2RenderingContext.RGBA8_SNORM;
      case GfxFormat.S8_RG_NORM:
        return WebGL2RenderingContext.RG8_SNORM;
      case GfxFormat.BC1:
        return this._WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;
      case GfxFormat.BC1_SRGB:
        return this._WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
      case GfxFormat.BC2:
        return this._WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;
      case GfxFormat.BC2_SRGB:
        return this._WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
      case GfxFormat.BC3:
        return this._WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;
      case GfxFormat.BC3_SRGB:
        return this._WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
      case GfxFormat.BC4_UNORM:
        return this._EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;
      case GfxFormat.BC4_SNORM:
        return this._EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;
      case GfxFormat.BC5_UNORM:
        return this._EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;
      case GfxFormat.BC5_SNORM:
        return this._EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
      case GfxFormat.BC6H_UNORM:
        return this._EXT_texture_compression_bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT;
      case GfxFormat.BC6H_SNORM:
        return this._EXT_texture_compression_bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;
      case GfxFormat.BC7:
        return this._EXT_texture_compression_bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT;
      case GfxFormat.BC7_SRGB:
        return this._EXT_texture_compression_bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;
      case GfxFormat.D32F_S8:
        return WebGL2RenderingContext.DEPTH32F_STENCIL8;
      case GfxFormat.D24_S8:
        return WebGL2RenderingContext.DEPTH24_STENCIL8;
      case GfxFormat.D32F:
        return WebGL2RenderingContext.DEPTH_COMPONENT32F;
      case GfxFormat.D24:
        return WebGL2RenderingContext.DEPTH_COMPONENT24;
      default:
        throw "whoops";
    }
  }
  translateTextureFormat(fmt) {
    if (this.isTextureFormatCompressed(fmt))
      return this.translateTextureInternalFormat(fmt);
    switch (fmt) {
      case GfxFormat.D24_S8:
      case GfxFormat.D32F_S8:
        return WebGL2RenderingContext.DEPTH_STENCIL;
      case GfxFormat.D24:
      case GfxFormat.D32F:
        return WebGL2RenderingContext.DEPTH_COMPONENT;
      default:
        break;
    }
    const isInteger = isFormatSizedInteger(fmt);
    const compFlags = getFormatCompFlags(fmt);
    switch (compFlags) {
      case 1 /* R */:
        return isInteger ? WebGL2RenderingContext.RED_INTEGER : WebGL2RenderingContext.RED;
      case 2 /* RG */:
        return isInteger ? WebGL2RenderingContext.RG_INTEGER : WebGL2RenderingContext.RG;
      case 3 /* RGB */:
        return isInteger ? WebGL2RenderingContext.RGB_INTEGER : WebGL2RenderingContext.RGB;
      case 4 /* RGBA */:
        return isInteger ? WebGL2RenderingContext.RGBA_INTEGER : WebGL2RenderingContext.RGBA;
    }
  }
  translateTextureType(fmt) {
    const typeFlags = getFormatTypeFlags(fmt);
    switch (typeFlags) {
      case 1 /* U8 */:
        return WebGL2RenderingContext.UNSIGNED_BYTE;
      case 2 /* U16 */:
        return WebGL2RenderingContext.UNSIGNED_SHORT;
      case 3 /* U32 */:
        return WebGL2RenderingContext.UNSIGNED_INT;
      case 4 /* S8 */:
        return WebGL2RenderingContext.BYTE;
      case 7 /* F16 */:
        return WebGL2RenderingContext.HALF_FLOAT;
      case 8 /* F32 */:
        return WebGL2RenderingContext.FLOAT;
      case 97 /* U16_PACKED_5551 */:
        return WebGL2RenderingContext.UNSIGNED_SHORT_5_5_5_1;
      case 98 /* U16_PACKED_565 */:
        return WebGL2RenderingContext.UNSIGNED_SHORT_5_6_5;
      case 130 /* D32F */:
        return WebGL2RenderingContext.FLOAT;
      case 129 /* D24 */:
      case 131 /* D24S8 */:
        return WebGL2RenderingContext.UNSIGNED_INT_24_8;
      case 132 /* D32FS8 */:
        return WebGL2RenderingContext.FLOAT_32_UNSIGNED_INT_24_8_REV;
      default:
        throw "whoops";
    }
  }
  isTextureFormatCompressed(fmt) {
    const typeFlags = getFormatTypeFlags(fmt);
    switch (typeFlags) {
      case 65 /* BC1 */:
      case 66 /* BC2 */:
      case 67 /* BC3 */:
      case 68 /* BC4_UNORM */:
      case 69 /* BC4_SNORM */:
      case 70 /* BC5_UNORM */:
      case 71 /* BC5_SNORM */:
      case 72 /* BC6H_UNORM */:
      case 73 /* BC6H_SNORM */:
      case 74 /* BC7 */:
        return true;
      default:
        return false;
    }
  }
  _setActiveTexture(texture) {
    if (this._currentActiveTexture !== texture) {
      this.gl.activeTexture(texture);
      this._currentActiveTexture = texture;
    }
  }
  _setVAO(vao) {
    if (this._currentBoundVAO !== vao) {
      this.gl.bindVertexArray(vao);
      this._currentBoundVAO = vao;
    }
  }
  _programCompiled(program) {
    assert2(program.compileState !== 0 /* NeedsCompile */);
    if (program.compileState === 1 /* Compiling */) {
      program.compileState = 2 /* NeedsBind */;
      if (this._shaderDebug)
        this._checkProgramCompilationForErrors(program);
    }
  }
  _setProgram(program) {
    const gl_program = program.gl_program;
    if (this._currentProgram === gl_program)
      return;
    this._programCompiled(program);
    this.gl.useProgram(gl_program);
    this._currentProgram = gl_program;
    this._bindUniformBlocks(program);
  }
  _bindUniformBlocks(program) {
    const gl = this.gl;
    const prog = program.gl_program;
    const deviceProgram = program.descriptor;
    const uniformBlocksVert = findall(deviceProgram.preprocessedVert, /uniform (\w+) {([^]*?)}/g);
    const uniformBlocksFrag = deviceProgram.preprocessedFrag !== null ? findall(deviceProgram.preprocessedFrag, /uniform (\w+) {([^]*?)}/g) : [];
    const uniformBlockNames = [];
    const seen = /* @__PURE__ */ new Set();
    const pushName = (name) => {
      if (!seen.has(name)) {
        seen.add(name);
        uniformBlockNames.push(name);
      }
    };
    for (let i = 0; i < uniformBlocksVert.length; i++) {
      pushName(uniformBlocksVert[i][1]);
    }
    for (let i = 0; i < uniformBlocksFrag.length; i++) {
      pushName(uniformBlocksFrag[i][1]);
    }
    pushName("ub_SceneParams");
    pushName("ub_MaterialParams");
    pushName("ub_DrawParams");
    pushName("ub_MirrorParams");
    pushName("ub_WavyParams");
    pushName("ub_ShadowParams");
    const bindingForBlockName = (blockName, fallbackIndex) => {
      switch (blockName) {
        case "ub_SceneParams":
          return 0;
        case "ub_MaterialParams":
          return 1;
        case "ub_DrawParams":
          return 2;
        case "ub_MirrorParams":
        case "ub_WavyParams":
        case "ub_ShadowParams":
          return 1;
        default:
          return fallbackIndex;
      }
    };
    for (let i = 0; i < uniformBlockNames.length; i++) {
      const blockName = uniformBlockNames[i];
      const blockIdx = gl.getUniformBlockIndex(prog, blockName);
      if (blockIdx !== -1 && blockIdx !== 4294967295) {
        const bindingIndex = bindingForBlockName(blockName, i);
        gl.uniformBlockBinding(prog, blockIdx, bindingIndex);
      }
    }
  }
  ensureResourceExists(resource) {
    if (resource === null) {
      const error = this.gl.getError();
      throw new Error(`Created resource is null; GL error encountered: ${error}`);
    } else {
      return resource;
    }
  }
  _createBufferPage(byteSize, usage, hint) {
    const gl = this.gl;
    const gl_buffer = this.ensureResourceExists(gl.createBuffer());
    const gl_target = translateBufferUsageToTarget(usage);
    const gl_hint = translateBufferHint(hint);
    gl.bindBuffer(gl_target, gl_buffer);
    gl.bufferData(gl_target, byteSize, gl_hint);
    return gl_buffer;
  }
  getNextUniqueId() {
    return ++this._resourceUniqueId;
  }
  createBuffer(byteSize, usage, hint, initialData) {
    const gl_buffer_pages = [];
    let pageByteSize;
    if (usage === 4 /* Uniform */) {
      assert2(byteSize % this._uniformBufferMaxPageByteSize === 0);
      let byteSizeLeft = byteSize;
      while (byteSizeLeft > 0) {
        gl_buffer_pages.push(this._createBufferPage(Math.min(byteSizeLeft, this._uniformBufferMaxPageByteSize), usage, hint));
        byteSizeLeft -= this._uniformBufferMaxPageByteSize;
      }
      pageByteSize = this._uniformBufferMaxPageByteSize;
    } else {
      this.gl.bindVertexArray(null);
      gl_buffer_pages.push(this._createBufferPage(byteSize, usage, hint));
      pageByteSize = byteSize;
      this.gl.bindVertexArray(this._currentBoundVAO);
    }
    const gl_target = translateBufferUsageToTarget(usage);
    const buffer = { _T: 0 /* Buffer */, ResourceUniqueId: this.getNextUniqueId(), gl_buffer_pages, gl_target, usage, byteSize, pageByteSize };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(buffer);
    if (initialData !== void 0)
      this.uploadBufferData(buffer, 0, initialData);
    return buffer;
  }
  _createTexture(descriptor) {
    const gl = this.gl;
    const gl_texture = this.ensureResourceExists(gl.createTexture());
    let gl_target;
    const internalformat = this.translateTextureInternalFormat(descriptor.pixelFormat);
    this._setActiveTexture(gl.TEXTURE0);
    this._currentTextures[0] = null;
    const numLevels = descriptor.numLevels;
    if (descriptor.dimension === 0 /* n2D */) {
      gl_target = WebGL2RenderingContext.TEXTURE_2D;
      gl.bindTexture(gl_target, gl_texture);
      gl.texStorage2D(gl_target, numLevels, internalformat, descriptor.width, descriptor.height);
      assert2(descriptor.depthOrArrayLayers === 1);
    } else if (descriptor.dimension === 1 /* n2DArray */) {
      gl_target = WebGL2RenderingContext.TEXTURE_2D_ARRAY;
      gl.bindTexture(gl_target, gl_texture);
      gl.texStorage3D(gl_target, numLevels, internalformat, descriptor.width, descriptor.height, descriptor.depthOrArrayLayers);
    } else if (descriptor.dimension === 2 /* n3D */) {
      gl_target = WebGL2RenderingContext.TEXTURE_3D;
      gl.bindTexture(gl_target, gl_texture);
      gl.texStorage3D(gl_target, numLevels, internalformat, descriptor.width, descriptor.height, descriptor.depthOrArrayLayers);
    } else if (descriptor.dimension === 3 /* Cube */) {
      gl_target = WebGL2RenderingContext.TEXTURE_CUBE_MAP;
      gl.bindTexture(gl_target, gl_texture);
      gl.texStorage2D(gl_target, numLevels, internalformat, descriptor.width, descriptor.height);
      assert2(descriptor.depthOrArrayLayers === 6);
    } else {
      throw "whoops";
    }
    const texture = {
      _T: 1 /* Texture */,
      ResourceUniqueId: this.getNextUniqueId(),
      gl_texture,
      gl_target,
      dimension: descriptor.dimension,
      pixelFormat: descriptor.pixelFormat,
      width: descriptor.width,
      height: descriptor.height,
      depthOrArrayLayers: descriptor.depthOrArrayLayers,
      numLevels: descriptor.numLevels,
      usage: descriptor.usage,
      formatKind: getFormatSamplerKind(descriptor.pixelFormat)
    };
    return texture;
  }
  createTexture(descriptor) {
    const texture = this._createTexture(descriptor);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(texture);
    return texture;
  }
  createSampler(descriptor) {
    const gl = this.gl;
    const gl_sampler = this.ensureResourceExists(gl.createSampler());
    gl.samplerParameteri(gl_sampler, gl.TEXTURE_WRAP_S, translateWrapMode(descriptor.wrapS));
    gl.samplerParameteri(gl_sampler, gl.TEXTURE_WRAP_T, translateWrapMode(descriptor.wrapT));
    gl.samplerParameteri(gl_sampler, gl.TEXTURE_WRAP_R, translateWrapMode(descriptor.wrapQ ?? descriptor.wrapS));
    gl.samplerParameteri(gl_sampler, gl.TEXTURE_MIN_FILTER, translateMinFilter(descriptor.minFilter, descriptor.mipFilter));
    gl.samplerParameteri(gl_sampler, gl.TEXTURE_MAG_FILTER, translateMagFilter(descriptor.magFilter));
    if (descriptor.minLOD !== void 0)
      gl.samplerParameterf(gl_sampler, gl.TEXTURE_MIN_LOD, descriptor.minLOD);
    if (descriptor.maxLOD !== void 0)
      gl.samplerParameterf(gl_sampler, gl.TEXTURE_MAX_LOD, descriptor.maxLOD);
    if (descriptor.compareMode !== void 0) {
      gl.samplerParameteri(gl_sampler, gl.TEXTURE_COMPARE_MODE, gl.COMPARE_REF_TO_TEXTURE);
      gl.samplerParameteri(gl_sampler, gl.TEXTURE_COMPARE_FUNC, descriptor.compareMode);
    }
    const maxAnisotropy = descriptor.maxAnisotropy ?? 1;
    if (maxAnisotropy > 1 && this._EXT_texture_filter_anisotropic !== null) {
      assert2(descriptor.minFilter === 1 /* Bilinear */ && descriptor.magFilter === 1 /* Bilinear */ && descriptor.mipFilter === 1 /* Linear */);
      gl.samplerParameterf(gl_sampler, this._EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT, maxAnisotropy);
    }
    const sampler = { _T: 3 /* Sampler */, ResourceUniqueId: this.getNextUniqueId(), gl_sampler };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(sampler);
    return sampler;
  }
  createRenderTarget(descriptor) {
    const { pixelFormat, width, height, sampleCount } = descriptor;
    const gl = this.gl;
    const gl_renderbuffer = this.ensureResourceExists(gl.createRenderbuffer());
    gl.bindRenderbuffer(gl.RENDERBUFFER, gl_renderbuffer);
    gl.renderbufferStorageMultisample(gl.RENDERBUFFER, sampleCount, this.translateTextureInternalFormat(pixelFormat), width, height);
    const renderTarget = {
      _T: 2 /* RenderTarget */,
      ResourceUniqueId: this.getNextUniqueId(),
      gl_renderbuffer,
      gfxTexture: null,
      pixelFormat,
      width,
      height,
      sampleCount
    };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(renderTarget);
    return renderTarget;
  }
  createRenderTargetFromTexture(gfxTexture) {
    const { pixelFormat, width, height } = gfxTexture;
    const renderTarget = {
      _T: 2 /* RenderTarget */,
      ResourceUniqueId: this.getNextUniqueId(),
      gl_renderbuffer: null,
      gfxTexture,
      pixelFormat,
      width,
      height,
      sampleCount: 1
    };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(renderTarget);
    return renderTarget;
  }
  _createProgram(descriptor) {
    const gl = this.gl;
    const gl_program = this.ensureResourceExists(gl.createProgram());
    const gl_shader_vert = null;
    const gl_shader_frag = null;
    const compileState = 0 /* NeedsCompile */;
    const program = { _T: 4 /* Program */, ResourceUniqueId: this.getNextUniqueId(), descriptor, compileState, gl_program, gl_shader_vert, gl_shader_frag };
    return program;
  }
  createComputeProgram(program) {
    throw "whoops";
  }
  createProgram(descriptor) {
    const program = this._createProgram(descriptor);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(program);
    return program;
  }
  createBindings(descriptor) {
    const { bindingLayout, uniformBufferBindings, samplerBindings } = descriptor;
    assert2(uniformBufferBindings.length >= bindingLayout.numUniformBuffers);
    assert2(samplerBindings.length >= bindingLayout.numSamplers);
    const bindings = { _T: 5 /* Bindings */, ResourceUniqueId: this.getNextUniqueId(), uniformBufferBindings, samplerBindings };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(bindings);
    return bindings;
  }
  createInputLayout(inputLayoutDescriptor) {
    const { vertexAttributeDescriptors, vertexBufferDescriptors, indexBufferFormat } = inputLayoutDescriptor;
    assert2(indexBufferFormat === GfxFormat.U16_R || indexBufferFormat === GfxFormat.U32_R || indexBufferFormat === null);
    const indexBufferType = indexBufferFormat !== null ? translateIndexFormat(indexBufferFormat) : null;
    const indexBufferCompByteSize = indexBufferFormat !== null ? getFormatCompByteSize(indexBufferFormat) : null;
    const gl = this.gl;
    const vao = this.ensureResourceExists(gl.createVertexArray());
    gl.bindVertexArray(vao);
    gl.bindBuffer(gl.ARRAY_BUFFER, getPlatformBuffer(this._fallbackVertexBuffer));
    const vertexBufferFormats = [];
    for (let i = 0; i < inputLayoutDescriptor.vertexAttributeDescriptors.length; i++) {
      const attr = inputLayoutDescriptor.vertexAttributeDescriptors[i];
      if (isFormatSizedInteger(attr.format)) {
      }
      const inputLayoutBuffer = assertExists2(inputLayoutDescriptor.vertexBufferDescriptors[attr.bufferIndex]);
      const format = translateVertexFormat(attr.format);
      vertexBufferFormats.push(format);
      if (isFormatSizedInteger(attr.format))
        gl.vertexAttribIPointer(attr.location, format.size, format.type, 0, 0);
      else
        gl.vertexAttribPointer(attr.location, format.size, format.type, format.normalized, 0, 0);
      if (inputLayoutBuffer.frequency === 2 /* PerInstance */) {
        gl.vertexAttribDivisor(attr.location, 1);
      } else if (inputLayoutBuffer.frequency === 3 /* Constant */) {
        gl.vertexAttribDivisor(attr.location, 4294967295);
      }
      gl.enableVertexAttribArray(attr.location);
    }
    gl.bindVertexArray(null);
    const inputLayout = { _T: 6 /* InputLayout */, ResourceUniqueId: this.getNextUniqueId(), vertexAttributeDescriptors, vertexBufferDescriptors, vao, vertexBufferFormats, indexBufferFormat, indexBufferType, indexBufferCompByteSize };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(inputLayout);
    return inputLayout;
  }
  createRenderPipeline(descriptor) {
    const bindingLayouts = createBindingLayouts(descriptor.bindingLayouts);
    const drawMode = translatePrimitiveTopology(descriptor.topology);
    const program = descriptor.program;
    const inputLayout = descriptor.inputLayout;
    if (program.compileState === 0 /* NeedsCompile */) {
      if (inputLayout !== null) {
        this._setVAO(inputLayout.vao);
        this._tryCompileProgram(program);
        this._setVAO(null);
      } else {
        this._tryCompileProgram(program);
      }
    }
    const megaState = descriptor.megaStateDescriptor;
    const colorAttachmentFormats = descriptor.colorAttachmentFormats.slice();
    const depthStencilAttachmentFormat = descriptor.depthStencilAttachmentFormat;
    const sampleCount = descriptor.sampleCount;
    const pipeline = {
      _T: 7 /* RenderPipeline */,
      ResourceUniqueId: this.getNextUniqueId(),
      bindingLayouts,
      drawMode,
      program,
      megaState,
      inputLayout,
      colorAttachmentFormats,
      depthStencilAttachmentFormat,
      sampleCount
    };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(pipeline);
    return pipeline;
  }
  createComputePipeline(descriptor) {
    throw "whoops";
  }
  createReadback(byteSize) {
    const gl = this.gl;
    const gl_buffer = this.ensureResourceExists(gl.createBuffer());
    gl.bindBuffer(gl.PIXEL_PACK_BUFFER, gl_buffer);
    gl.bufferData(gl.PIXEL_PACK_BUFFER, byteSize, gl.STREAM_READ);
    gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);
    const readback = { _T: 9 /* Readback */, ResourceUniqueId: this.getNextUniqueId(), byteSize, gl_buffer, gl_sync: null };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(readback);
    return readback;
  }
  createQueryPool(type, elemCount) {
    const gl = this.gl;
    const gl_query = nArray2(elemCount, () => this.ensureResourceExists(gl.createQuery()));
    const gl_query_type = translateQueryPoolType(type);
    const queryPool = { _T: 10 /* QueryPool */, ResourceUniqueId: this.getNextUniqueId(), gl_query, gl_query_type };
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceCreated(queryPool);
    return queryPool;
  }
  async createWebXRLayer(webXRSession) {
    await this.gl.makeXRCompatible();
    return new XRWebGLLayer(webXRSession, this.gl, { antialias: false });
  }
  destroyBuffer(o) {
    const { gl_buffer_pages } = o;
    for (let i = 0; i < gl_buffer_pages.length; i++)
      this.gl.deleteBuffer(gl_buffer_pages[i]);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  _destroyTexture(o) {
    this.gl.deleteTexture(getPlatformTexture(o));
  }
  destroyTexture(o) {
    this._destroyTexture(o);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroySampler(o) {
    this.gl.deleteSampler(getPlatformSampler(o));
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroyRenderTarget(o_) {
    const o = o_;
    if (o.gl_renderbuffer !== null)
      this.gl.deleteRenderbuffer(o.gl_renderbuffer);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroyProgram(o) {
    const program = o;
    this.gl.deleteProgram(program.gl_program);
    this.gl.deleteShader(program.gl_shader_vert);
    this.gl.deleteShader(program.gl_shader_frag);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroyBindings(o) {
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroyInputLayout(o) {
    const inputLayout = o;
    if (this._currentBoundVAO === inputLayout.vao) {
      this.gl.bindVertexArray(null);
      this._currentBoundVAO = null;
    }
    this.gl.deleteVertexArray(inputLayout.vao);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroyComputePipeline(o) {
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroyRenderPipeline(o) {
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroyReadback(o) {
    const readback = o;
    if (readback.gl_sync !== null)
      this.gl.deleteSync(readback.gl_sync);
    if (readback.gl_buffer !== null)
      this.gl.deleteBuffer(readback.gl_buffer);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(o);
  }
  destroyQueryPool(o) {
    const queryPool = o;
    for (let i = 0; i < queryPool.gl_query.length; i++)
      this.gl.deleteQuery(queryPool.gl_query[i]);
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.trackResourceDestroyed(queryPool);
  }
  pipelineQueryReady(o) {
    const pipeline = o;
    return this.queryProgramReady(pipeline.program);
  }
  pipelineForceReady(o) {
  }
  createRenderPass(descriptor) {
    assert2(this._currentRenderPassDescriptor === null);
    this._currentRenderPassDescriptor = descriptor;
    const { colorAttachments, depthStencilAttachment } = descriptor;
    this._setRenderPassParametersBegin(colorAttachments.length);
    for (let i = 0; i < colorAttachments.length; i++)
      this._setRenderPassParametersColor(i, colorAttachments[i]);
    this._setRenderPassParametersDepthStencil(depthStencilAttachment);
    this._validateCurrentAttachments();
    for (let i = 0; i < colorAttachments.length; i++) {
      const attachment = colorAttachments[i];
      if (attachment === null)
        continue;
      const clearColor = attachment.clearColor;
      if (clearColor === "load")
        continue;
      this._setRenderPassParametersClearColor(i, clearColor.r, clearColor.g, clearColor.b, clearColor.a);
    }
    if (depthStencilAttachment !== null)
      this._setRenderPassParametersClearDepthStencil(depthStencilAttachment.clearDepth, depthStencilAttachment.clearStencil);
    return this;
  }
  createComputePass() {
    throw "whoops";
  }
  submitPass(o) {
    assert2(o === this);
    assert2(this._currentRenderPassDescriptor !== null);
    this.endPass();
    this._currentRenderPassDescriptor = null;
  }
  beginFrame() {
  }
  endFrame() {
    const gl = this.gl;
    if (this._currentMegaState.attachmentsState[0].channelWriteMask !== 8 /* Alpha */) {
      if (this._OES_draw_buffers_indexed !== null) {
        this._OES_draw_buffers_indexed.colorMaskiOES(0, false, false, false, true);
        this._currentMegaState.attachmentsState[0].channelWriteMask = 8 /* Alpha */;
      } else {
        gl.colorMask(false, false, false, true);
        for (let i = 0; i < this._currentMegaState.attachmentsState.length; i++)
          this._currentMegaState.attachmentsState[0].channelWriteMask = 8 /* Alpha */;
      }
    }
    gl.clearBufferfv(gl.COLOR, 0, [0, 0, 0, 1]);
  }
  zeroBuffer(buffer, dstByteOffset, byteCount) {
    this.uploadBufferData(buffer, dstByteOffset, new Uint8Array(byteCount));
  }
  copySubTexture2D(dst_, dstX, dstY, src_, srcX, srcY) {
    const gl = this.gl;
    const dst = dst_;
    const src = src_;
    assert2(src.numLevels === 1);
    assert2(dst.numLevels === 1);
    if (dst === this._scTexture) {
      gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._scPlatformFramebuffer);
    } else {
      gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._resolveColorDrawFramebuffer);
      this._bindFramebufferAttachment(gl.DRAW_FRAMEBUFFER, gl.COLOR_ATTACHMENT0, dst);
    }
    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this._resolveColorReadFramebuffer);
    this._bindFramebufferAttachment(gl.READ_FRAMEBUFFER, gl.COLOR_ATTACHMENT0, src);
    gl.blitFramebuffer(srcX, srcY, srcX + src.width, srcY + src.height, dstX, dstY, dstX + src.width, dstY + src.height, gl.COLOR_BUFFER_BIT, gl.LINEAR);
    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);
    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);
  }
  copyCanvasToTexture(dst_, dstZ, src) {
    const gl = this.gl;
    const dst = dst_;
    assert2(dst !== this._scTexture);
    const gl_target = dst.gl_target;
    assert2(dst.width === src.width);
    assert2(dst.height === src.height);
    const gl_format = this.translateTextureFormat(dst.pixelFormat);
    const gl_type = this.translateTextureType(dst.pixelFormat);
    gl.texSubImage3D(gl_target, 0, 0, 0, dstZ, dst.width, dst.height, 1, gl_format, gl_type, src);
  }
  uploadBufferData(buffer, dstByteOffset, data, srcByteOffset = 0, byteSize = data.byteLength - srcByteOffset) {
    const gl = this.gl;
    const { gl_target, byteSize: dstByteSize, pageByteSize: dstPageByteSize } = buffer;
    if (gl_target === gl.UNIFORM_BUFFER) {
      if (!(dstByteOffset % dstPageByteSize === 0))
        throw new Error(`Assert fail: (dstByteOffset [${dstByteOffset}] % dstPageByteSize [${dstPageByteSize}]) === 0`);
      if (!(byteSize % dstPageByteSize === 0))
        throw new Error(`Assert fail: (byteSize [${byteSize}] % dstPageByteSize [${dstPageByteSize}]) === 0`);
    }
    if (!(dstByteOffset + byteSize <= dstByteSize))
      throw new Error(`Assert fail: (dstByteOffset [${dstByteOffset}] + byteSize [${byteSize}]) <= dstByteSize [${dstByteSize}], gl_target ${gl_target}`);
    const virtBufferByteOffsetEnd = dstByteOffset + byteSize;
    let virtBufferByteOffset = dstByteOffset;
    let physBufferByteOffset = dstByteOffset % dstPageByteSize;
    while (virtBufferByteOffset < virtBufferByteOffsetEnd) {
      gl.bindBuffer(gl.COPY_WRITE_BUFFER, getPlatformBuffer(buffer, virtBufferByteOffset));
      gl.bufferSubData(gl.COPY_WRITE_BUFFER, physBufferByteOffset, data, srcByteOffset, Math.min(virtBufferByteOffsetEnd - virtBufferByteOffset, dstPageByteSize));
      virtBufferByteOffset += dstPageByteSize;
      physBufferByteOffset = 0;
      srcByteOffset += dstPageByteSize;
      this._debugGroupStatisticsBufferUpload();
    }
  }
  uploadTextureData(texture, firstMipLevel, levelDatas) {
    const gl = this.gl;
    const { gl_texture, gl_target, pixelFormat, width, height, depthOrArrayLayers: depth, numLevels } = texture;
    const isCompressed = this.isTextureFormatCompressed(pixelFormat);
    const is3D = gl_target === WebGL2RenderingContext.TEXTURE_3D || gl_target === WebGL2RenderingContext.TEXTURE_2D_ARRAY;
    const isCube = gl_target === WebGL2RenderingContext.TEXTURE_CUBE_MAP;
    this._setActiveTexture(gl.TEXTURE0);
    this._currentTextures[0] = null;
    gl.bindTexture(gl_target, gl_texture);
    let w = width, h = height, d = depth;
    const maxMipLevel = Math.min(firstMipLevel + levelDatas.length, numLevels);
    const gl_format = this.translateTextureFormat(pixelFormat);
    for (let i = 0, levelDatasIdx = 0; i < maxMipLevel; i++) {
      if (i >= firstMipLevel) {
        const levelData = levelDatas[levelDatasIdx++];
        const sliceElementSize = levelData.length / depth;
        if (isCube) {
          for (let z = 0; z < depth; z++) {
            const face_target = WebGL2RenderingContext.TEXTURE_CUBE_MAP_POSITIVE_X + z % 6;
            if (isCompressed) {
              gl.compressedTexSubImage2D(face_target, i, 0, 0, w, h, gl_format, levelData, z * sliceElementSize, sliceElementSize);
            } else {
              const gl_type = this.translateTextureType(pixelFormat);
              gl.texSubImage2D(face_target, i, 0, 0, w, h, gl_format, gl_type, levelData, z * sliceElementSize);
            }
          }
        } else if (is3D) {
          if (isCompressed) {
            gl.compressedTexSubImage3D(gl_target, i, 0, 0, 0, w, h, d, gl_format, levelData);
          } else {
            const gl_type = this.translateTextureType(pixelFormat);
            gl.texSubImage3D(gl_target, i, 0, 0, 0, w, h, d, gl_format, gl_type, levelData);
          }
        } else {
          if (isCompressed) {
            gl.compressedTexSubImage2D(gl_target, i, 0, 0, w, h, gl_format, levelData);
          } else {
            const gl_type = this.translateTextureType(pixelFormat);
            gl.texSubImage2D(gl_target, i, 0, 0, w, h, gl_format, gl_type, levelData);
          }
        }
      }
      w = Math.max(w / 2 | 0, 1);
      h = Math.max(h / 2 | 0, 1);
    }
  }
  readBuffer(o, dstOffset, buffer_, srcOffset, byteSize) {
    const gl = this.gl;
    const readback = o;
    const buffer = buffer_;
    const end = srcOffset + byteSize;
    assert2(end <= buffer.byteSize);
    assert2(dstOffset + byteSize <= readback.byteSize);
    while (srcOffset < end) {
      const pageIdx = srcOffset / buffer.pageByteSize | 0;
      const pageOffset = pageIdx * buffer.pageByteSize;
      const pageSrcOffset = srcOffset - pageOffset;
      const pageSize = buffer.pageByteSize - pageSrcOffset;
      gl.bindBuffer(gl.COPY_READ_BUFFER, buffer.gl_buffer_pages[pageIdx]);
      gl.bindBuffer(gl.COPY_WRITE_BUFFER, readback.gl_buffer);
      gl.copyBufferSubData(gl.COPY_READ_BUFFER, gl.COPY_WRITE_BUFFER, pageSrcOffset, dstOffset, pageSize);
      srcOffset += pageSize;
      dstOffset += pageSize;
    }
    gl.bindBuffer(gl.COPY_READ_BUFFER, null);
    gl.bindBuffer(gl.COPY_WRITE_BUFFER, null);
  }
  readPixelFromTexture(o, dstOffset, a, x, y) {
    const gl = this.gl;
    const readback = o;
    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this._readbackFramebuffer);
    const texture = a;
    gl.framebufferTexture2D(gl.READ_FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture.gl_texture, 0);
    gl.bindBuffer(gl.PIXEL_PACK_BUFFER, readback.gl_buffer);
    const gl_format = this.translateTextureFormat(texture.pixelFormat);
    const gl_type = this.translateTextureType(texture.pixelFormat);
    const formatByteSize = getFormatByteSize(texture.pixelFormat);
    gl.readPixels(x, y, 1, 1, gl_format, gl_type, dstOffset * formatByteSize);
    gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);
  }
  submitReadback(o) {
    const gl = this.gl;
    const readback = o;
    if (readback.gl_sync !== null) {
      gl.deleteSync(readback.gl_sync);
    }
    readback.gl_sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0);
  }
  queryReadbackFinished(dst, dstOffs, o) {
    const gl = this.gl;
    const readback = o;
    const gl_sync = assertExists2(readback.gl_sync);
    if (gl.getSyncParameter(gl_sync, gl.SYNC_STATUS) === gl.SIGNALED) {
      gl.bindBuffer(gl.PIXEL_UNPACK_BUFFER, readback.gl_buffer);
      gl.getBufferSubData(gl.PIXEL_UNPACK_BUFFER, 0, dst, dstOffs);
      gl.bindBuffer(gl.PIXEL_UNPACK_BUFFER, null);
      return true;
    } else {
      return false;
    }
  }
  queryPoolResultOcclusion(o, dstOffs) {
    const gl = this.gl;
    const queryPool = o;
    const gl_query = queryPool.gl_query[dstOffs];
    if (!gl.getQueryParameter(gl_query, gl.QUERY_RESULT_AVAILABLE))
      return null;
    return !!gl.getQueryParameter(gl_query, gl.QUERY_RESULT);
  }
  queryLimits() {
    return this;
  }
  queryTextureFormatSupported(format, width, height) {
    switch (format) {
      case GfxFormat.BC1_SRGB:
      case GfxFormat.BC2_SRGB:
      case GfxFormat.BC3_SRGB:
        if (this._WEBGL_compressed_texture_s3tc_srgb !== null)
          return isBlockCompressSized(width, height, 4, 4);
        return false;
      case GfxFormat.BC1:
      case GfxFormat.BC2:
      case GfxFormat.BC3:
        if (this._WEBGL_compressed_texture_s3tc !== null)
          return isBlockCompressSized(width, height, 4, 4);
        return false;
      case GfxFormat.BC4_UNORM:
      case GfxFormat.BC4_SNORM:
      case GfxFormat.BC5_UNORM:
      case GfxFormat.BC5_SNORM:
        if (this._EXT_texture_compression_rgtc !== null)
          return isBlockCompressSized(width, height, 4, 4);
        return false;
      case GfxFormat.BC6H_UNORM:
      case GfxFormat.BC6H_SNORM:
      case GfxFormat.BC7:
      case GfxFormat.BC7_SRGB:
        if (this._EXT_texture_compression_bptc !== null)
          return isBlockCompressSized(width, height, 4, 4);
        return false;
      case GfxFormat.U16_R_NORM:
      case GfxFormat.U16_RG_NORM:
      case GfxFormat.U16_RGBA_NORM:
        return this._EXT_texture_norm16 !== null;
      case GfxFormat.F32_R:
      case GfxFormat.F32_RG:
      case GfxFormat.F32_RGB:
      case GfxFormat.F32_RGBA:
        return this._OES_texture_float_linear !== null;
      case GfxFormat.F16_R:
      case GfxFormat.F16_RG:
      case GfxFormat.F16_RGB:
      case GfxFormat.F16_RGBA:
        return this._OES_texture_half_float_linear !== null;
      default:
        return true;
    }
  }
  queryProgramReady(program) {
    const gl = this.gl;
    if (program.compileState === 0 /* NeedsCompile */) {
      throw "whoops";
    }
    if (program.compileState === 1 /* Compiling */) {
      let complete;
      if (this._KHR_parallel_shader_compile !== null) {
        complete = gl.getProgramParameter(program.gl_program, this._KHR_parallel_shader_compile.COMPLETION_STATUS_KHR);
      } else {
        complete = true;
      }
      if (complete)
        this._programCompiled(program);
      return complete;
    }
    return program.compileState === 2 /* NeedsBind */ || program.compileState === 3 /* ReadyToUse */;
  }
  queryVendorInfo() {
    return this;
  }
  queryRenderPass(o) {
    return this._currentRenderPassDescriptor;
  }
  queryRenderTarget(o) {
    const renderTarget = o;
    return renderTarget;
  }
  //#endregion
  //#region Debugging
  setResourceName(o, name) {
    o.ResourceName = name;
    if (o._T === 0 /* Buffer */) {
      const { gl_buffer_pages } = o;
      for (let i = 0; i < gl_buffer_pages.length; i++)
        assignPlatformName(gl_buffer_pages[i], `${name} Page ${i}`);
    } else if (o._T === 1 /* Texture */) {
      assignPlatformName(getPlatformTexture(o), name);
    } else if (o._T === 3 /* Sampler */) {
      assignPlatformName(getPlatformSampler(o), name);
    } else if (o._T === 2 /* RenderTarget */) {
      const { gl_renderbuffer } = o;
      if (gl_renderbuffer !== null)
        assignPlatformName(gl_renderbuffer, name);
    } else if (o._T === 6 /* InputLayout */) {
      assignPlatformName(o.vao, name);
    }
  }
  checkForLeaks() {
    if (this._resourceCreationTracker !== null)
      this._resourceCreationTracker.checkForLeaks();
  }
  setStatisticsGroup(statisticsGroup) {
    this._currentStatisticsGroup = statisticsGroup;
  }
  programPatched(o, descriptor) {
    assert2(this._shaderDebug);
    const program = o;
    const gl = this.gl;
    gl.deleteProgram(program.gl_program);
    program.descriptor = descriptor;
    program.gl_program = this.ensureResourceExists(gl.createProgram());
    program.compileState = 0 /* NeedsCompile */;
    this._tryCompileProgram(program);
    this._checkProgramCompilationForErrors(program);
  }
  getBufferData(buffer, dstBuffer, wordOffset = 0) {
    const gl = this.gl;
    gl.bindBuffer(gl.COPY_READ_BUFFER, getPlatformBuffer(buffer, wordOffset * 4));
    gl.getBufferSubData(gl.COPY_READ_BUFFER, wordOffset * 4, dstBuffer);
  }
  //#endregion
  //#region Pass execution
  _debugGroupStatisticsDrawCall(count = 1) {
    if (this._currentStatisticsGroup !== null)
      this._currentStatisticsGroup.drawCallCount += count;
  }
  _debugGroupStatisticsBufferUpload(count = 1) {
    if (this._currentStatisticsGroup !== null)
      this._currentStatisticsGroup.bufferUploadCount += count;
  }
  _debugGroupStatisticsTextureBind(count = 1) {
    if (this._currentStatisticsGroup !== null)
      this._currentStatisticsGroup.textureBindCount += count;
  }
  _debugGroupStatisticsTriangles(count) {
    if (this._currentStatisticsGroup !== null)
      this._currentStatisticsGroup.triangleCount += count;
  }
  _compileShader(contents, type) {
    const gl = this.gl;
    const shader = this.ensureResourceExists(gl.createShader(type));
    gl.shaderSource(shader, contents);
    gl.compileShader(shader);
    return shader;
  }
  _reportShaderError(shader, str) {
    const gl = this.gl;
    const status = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
    if (!status) {
      console.error(prependLineNo(str));
      const debug_shaders = gl.getExtension("WEBGL_debug_shaders");
      if (debug_shaders)
        console.error(debug_shaders.getTranslatedShaderSource(shader));
      console.error(gl.getShaderInfoLog(shader));
    }
    return status;
  }
  _checkProgramCompilationForErrors(program) {
    const gl = this.gl;
    const prog = program.gl_program;
    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {
      const descriptor = program.descriptor;
      const isShadowProgram = descriptor.preprocessedVert.includes("u_ShadowInfo") || descriptor.preprocessedFrag?.includes("u_ShadowInfo");
      if (!this._reportShaderError(program.gl_shader_vert, descriptor.preprocessedVert))
        return;
      if (program.gl_shader_frag !== null) {
        if (!this._reportShaderError(program.gl_shader_frag, descriptor.preprocessedFrag))
          return;
      }
      console.error(gl.getProgramInfoLog(program.gl_program));
      if (isShadowProgram) {
        console.error("Shadow program link failure; dumping preprocessed shaders.");
        console.error(descriptor.preprocessedVert);
        if (descriptor.preprocessedFrag)
          console.error(descriptor.preprocessedFrag);
      }
      debugger;
    }
  }
  _tryCompileProgram(program) {
    assert2(program.compileState === 0 /* NeedsCompile */);
    const descriptor = program.descriptor;
    const gl = this.gl;
    if (program.gl_shader_vert !== null)
      gl.deleteShader(program.gl_shader_vert);
    if (program.gl_shader_frag !== null)
      gl.deleteShader(program.gl_shader_frag);
    program.gl_shader_vert = this._compileShader(descriptor.preprocessedVert, gl.VERTEX_SHADER);
    gl.attachShader(program.gl_program, program.gl_shader_vert);
    if (descriptor.preprocessedFrag !== null) {
      program.gl_shader_frag = this._compileShader(descriptor.preprocessedFrag, gl.FRAGMENT_SHADER);
      gl.attachShader(program.gl_program, program.gl_shader_frag);
    }
    gl.linkProgram(program.gl_program);
    program.compileState = 1 /* Compiling */;
  }
  _bindFramebufferAttachmentTexture(framebuffer, binding, texture_, attachmentView) {
    const gl = this.gl;
    const texture = texture_;
    const gl_texture = texture.gl_texture, gl_target = texture.gl_target;
    const level = attachmentView !== null ? attachmentView.level : 0;
    const z = attachmentView !== null ? attachmentView.z : 0;
    if (gl_target === gl.TEXTURE_2D) {
      assert2(z === 0);
      gl.framebufferTexture2D(framebuffer, binding, gl_target, gl_texture, level);
    } else if (gl_target === gl.TEXTURE_CUBE_MAP) {
      assert2(z < 6);
      gl.framebufferTexture2D(framebuffer, binding, gl.TEXTURE_CUBE_MAP_POSITIVE_X + z, gl_texture, level);
    } else if (gl_target === gl.TEXTURE_2D_ARRAY || gl_target === gl.TEXTURE_3D) {
      assert2(z < texture.depthOrArrayLayers);
      gl.framebufferTextureLayer(framebuffer, binding, gl_texture, level, z);
    }
  }
  _bindFramebufferAttachment(framebuffer, binding, attachment, attachmentView = null) {
    const gl = this.gl;
    if (attachment === null) {
      gl.framebufferRenderbuffer(framebuffer, binding, gl.RENDERBUFFER, null);
    } else if (attachment._T === 2 /* RenderTarget */) {
      if (attachment.gl_renderbuffer !== null)
        gl.framebufferRenderbuffer(framebuffer, binding, gl.RENDERBUFFER, attachment.gl_renderbuffer);
      else if (attachment.gfxTexture !== null)
        this._bindFramebufferAttachmentTexture(framebuffer, binding, attachment.gfxTexture, attachmentView);
    } else if (attachment._T === 1 /* Texture */) {
      this._bindFramebufferAttachmentTexture(framebuffer, binding, attachment, attachmentView);
    }
  }
  _bindFramebufferDepthStencilAttachment(framebuffer, attachment, view) {
    const gl = this.gl;
    const flags = attachment !== null ? getFormatFlags(attachment.pixelFormat) : 4 /* Depth */ | 8 /* Stencil */;
    const depth = !!(flags & 4 /* Depth */), stencil = !!(flags & 8 /* Stencil */);
    if (depth && stencil) {
      this._bindFramebufferAttachment(framebuffer, gl.DEPTH_STENCIL_ATTACHMENT, attachment, view);
    } else if (depth) {
      this._bindFramebufferAttachment(framebuffer, gl.DEPTH_ATTACHMENT, attachment, view);
      this._bindFramebufferAttachment(framebuffer, gl.STENCIL_ATTACHMENT, null);
    } else if (stencil) {
      this._bindFramebufferAttachment(framebuffer, gl.STENCIL_ATTACHMENT, attachment, view);
      this._bindFramebufferAttachment(framebuffer, gl.DEPTH_ATTACHMENT, null);
    }
  }
  _validateCurrentAttachments() {
    let sampleCount = -1, width = -1, height = -1;
    for (let i = 0; i < this._currentColorAttachment.length; i++) {
      const attachment = this._currentColorAttachment[i];
      if (attachment === null)
        continue;
      if (sampleCount === -1) {
        sampleCount = attachment.sampleCount;
        width = attachment.width;
        height = attachment.height;
      } else {
        assert2(sampleCount === attachment.sampleCount);
        assert2(width === attachment.width);
        assert2(height === attachment.height);
      }
    }
    this._currentSampleCount = sampleCount;
  }
  _setRenderPassParametersBegin(numColorAttachments) {
    const gl = this.gl;
    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._renderPassDrawFramebuffer);
    gl.drawBuffers([gl.COLOR_ATTACHMENT0, gl.COLOR_ATTACHMENT1, gl.COLOR_ATTACHMENT2, gl.COLOR_ATTACHMENT3]);
    for (let i = numColorAttachments; i < this._currentColorAttachment.length; i++) {
      const attachment = this._currentColorAttachment[i];
      if (!attachment)
        continue;
      else if (attachment.gl_renderbuffer !== null)
        gl.framebufferRenderbuffer(gl.DRAW_FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i, gl.RENDERBUFFER, null);
      else if (attachment.gfxTexture !== null)
        gl.framebufferTexture2D(gl.DRAW_FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i, gl.TEXTURE_2D, null, 0);
      this._currentColorAttachment[i] = null;
    }
    this._currentColorAttachment.length = numColorAttachments;
  }
  _setRenderPassParametersColor(i, passAttachment) {
    const gl = this.gl;
    const attachment = passAttachment !== null ? passAttachment.renderTarget : null;
    const attachmentView = passAttachment !== null ? passAttachment.view : null;
    assert2(!!attachment === !!attachmentView);
    if (this._currentColorAttachment[i] !== attachment || !gfxRenderAttachmentViewEquals(this._currentColorAttachmentView[i], attachmentView)) {
      this._currentColorAttachment[i] = attachment;
      this._currentColorAttachmentView[i] = attachmentView;
      this._bindFramebufferAttachment(gl.DRAW_FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i, attachment, attachmentView);
      this._resolveColorAttachmentsChanged = true;
    }
    const resolveTo = passAttachment !== null ? passAttachment.resolveTo : null;
    const resolveView = passAttachment !== null ? passAttachment.resolveView : null;
    assert2(!!resolveTo === !!resolveView);
    if (this._currentColorResolveTo[i] !== resolveTo || this._currentColorResolveView[i] !== resolveView) {
      this._currentColorResolveTo[i] = resolveTo;
      this._currentColorResolveView[i] = resolveView;
      if (resolveTo !== null)
        this._resolveColorAttachmentsChanged = true;
    }
  }
  _setRenderPassParametersDepthStencil(passAttachment) {
    const gl = this.gl;
    const attachment = passAttachment !== null ? passAttachment.renderTarget : null;
    const attachmentView = passAttachment !== null ? passAttachment.view : null;
    if (this._currentDepthStencilAttachment !== attachment || !gfxRenderAttachmentViewEquals(this._currentDepthStencilAttachmentView, attachmentView)) {
      this._currentDepthStencilAttachment = attachment;
      this._currentDepthStencilAttachmentView = attachmentView;
      this._bindFramebufferDepthStencilAttachment(gl.DRAW_FRAMEBUFFER, this._currentDepthStencilAttachment, attachmentView);
      this._resolveDepthStencilAttachmentsChanged = true;
    }
    const resolveTo = passAttachment !== null ? passAttachment.resolveTo : null;
    const resolveView = passAttachment !== null ? passAttachment.resolveView : null;
    if (this._currentDepthStencilResolveTo !== resolveTo || !gfxRenderAttachmentViewEquals(this._currentDepthStencilResolveView, resolveView)) {
      this._currentDepthStencilResolveTo = resolveTo;
      this._currentDepthStencilResolveView = resolveView;
      if (resolveTo !== null)
        this._resolveDepthStencilAttachmentsChanged = true;
    }
  }
  _setScissorEnabled(v) {
    if (this._currentScissorEnabled === v)
      return;
    const gl = this.gl;
    if (v)
      gl.enable(gl.SCISSOR_TEST);
    else
      gl.disable(gl.SCISSOR_TEST);
    this._currentScissorEnabled = v;
  }
  _setRenderPassParametersClearColor(slot, r, g, b, a) {
    const gl = this.gl;
    if (this._OES_draw_buffers_indexed !== null) {
      const attachment = this._currentMegaState.attachmentsState[slot];
      if (attachment.channelWriteMask !== 15 /* AllChannels */) {
        this._OES_draw_buffers_indexed.colorMaskiOES(slot, true, true, true, true);
        attachment.channelWriteMask = 15 /* AllChannels */;
      }
    } else {
      const attachment = this._currentMegaState.attachmentsState[0];
      if (attachment.channelWriteMask !== 15 /* AllChannels */) {
        gl.colorMask(true, true, true, true);
        attachment.channelWriteMask = 15 /* AllChannels */;
      }
    }
    this._setScissorEnabled(false);
    gl.clearBufferfv(gl.COLOR, slot, [r, g, b, a]);
  }
  _setRenderPassParametersClearDepthStencil(clearDepth, clearStencil) {
    const gl = this.gl;
    if (clearDepth !== "load") {
      assert2(this._currentDepthStencilAttachment !== null);
      if (!this._currentMegaState.depthWrite) {
        gl.depthMask(true);
        this._currentMegaState.depthWrite = true;
      }
      gl.clearBufferfv(gl.DEPTH, 0, [clearDepth]);
    }
    if (clearStencil !== "load") {
      assert2(this._currentDepthStencilAttachment !== null);
      if (!this._currentMegaState.stencilWrite) {
        gl.stencilMask(255);
        this._currentMegaState.stencilWrite = true;
      }
      gl.clearBufferiv(gl.STENCIL, 0, [clearStencil]);
    }
  }
  _getFallbackTexture(samplerEntry) {
    const gl = this.gl;
    const gl_target = samplerEntry.gl_target, formatKind = samplerEntry.formatKind;
    if (gl_target === gl.TEXTURE_2D && formatKind === 4 /* Depth */)
      return this._fallbackTexture2DDepth;
    else if (gl_target === gl.TEXTURE_2D)
      return this._fallbackTexture2D;
    else if (gl_target === gl.TEXTURE_2D_ARRAY)
      return this._fallbackTexture2DArray;
    else if (gl_target === gl.TEXTURE_3D)
      return this._fallbackTexture3D;
    else if (gl_target === gl.TEXTURE_CUBE_MAP)
      return this._fallbackTextureCube;
    else
      throw "whoops";
  }
  setBindings(bindingLayoutIndex, bindings_, dynamicByteOffsets) {
    const gl = this.gl;
    assert2(bindingLayoutIndex < this._currentPipeline.bindingLayouts.bindingLayoutTables.length);
    const bindingLayoutTable = this._currentPipeline.bindingLayouts.bindingLayoutTables[bindingLayoutIndex];
    const { uniformBufferBindings, samplerBindings } = bindings_;
    assert2(uniformBufferBindings.length >= bindingLayoutTable.numUniformBuffers);
    assert2(dynamicByteOffsets.length >= bindingLayoutTable.numUniformBuffers);
    assert2(samplerBindings.length >= bindingLayoutTable.numSamplers);
    for (let i = 0; i < bindingLayoutTable.numUniformBuffers; i++) {
      const binding = uniformBufferBindings[i];
      if (binding.byteSize === 0)
        continue;
      const index = bindingLayoutTable.firstUniformBuffer + i;
      const buffer = binding.buffer;
      const byteOffset = dynamicByteOffsets[i];
      const byteSize = binding.byteSize;
      if (buffer !== this._currentUniformBuffers[index] || byteOffset !== this._currentUniformBufferByteOffsets[index] || byteSize !== this._currentUniformBufferByteSizes[index]) {
        const platformBufferByteOffset = byteOffset % buffer.pageByteSize;
        const platformBuffer = buffer.gl_buffer_pages[byteOffset / buffer.pageByteSize | 0];
        assert2(platformBufferByteOffset + byteSize <= buffer.pageByteSize);
        gl.bindBufferRange(gl.UNIFORM_BUFFER, index, platformBuffer, platformBufferByteOffset, byteSize);
        this._currentUniformBuffers[index] = buffer;
        this._currentUniformBufferByteOffsets[index] = byteOffset;
        this._currentUniformBufferByteSizes[index] = byteSize;
      }
    }
    for (let i = 0; i < bindingLayoutTable.numSamplers; i++) {
      const binding = samplerBindings[i];
      const samplerIndex = bindingLayoutTable.firstSampler + i;
      const samplerEntry = bindingLayoutTable.samplerEntries[i];
      const gfxTexture = binding !== null ? binding.gfxTexture : null;
      const gl_texture = gfxTexture !== null ? getPlatformTexture(gfxTexture) : null;
      const gl_sampler = binding !== null && binding.gfxSampler !== null ? getPlatformSampler(binding.gfxSampler) : null;
      if (this._currentSamplers[samplerIndex] !== gl_sampler) {
        gl.bindSampler(samplerIndex, gl_sampler);
        this._currentSamplers[samplerIndex] = gl_sampler;
      }
      if (this._currentTextures[samplerIndex] !== gl_texture) {
        this._setActiveTexture(gl.TEXTURE0 + samplerIndex);
        if (gfxTexture !== null) {
          const { gl_target, formatKind } = gfxTexture;
          gl.bindTexture(gl_target, gl_texture);
          this._debugGroupStatisticsTextureBind();
          assert2(samplerEntry.gl_target === gl_target);
          assert2(isFormatSamplerKindCompatible(samplerEntry.formatKind, formatKind));
        } else {
          gl.bindTexture(samplerEntry.gl_target, this._getFallbackTexture(samplerEntry));
        }
        this._currentTextures[samplerIndex] = gl_texture;
      }
    }
  }
  setViewport(x, y, w, h) {
    const gl = this.gl;
    gl.viewport(x, y, w, h);
  }
  setScissor(x, y, w, h) {
    const gl = this.gl;
    this._setScissorEnabled(true);
    gl.scissor(x, y, w, h);
  }
  _setAttachmentStateIndexed(i, newAttachmentState) {
    const gl = this.gl;
    const dbi = this._OES_draw_buffers_indexed;
    const currentAttachmentState = this._currentMegaState.attachmentsState[i];
    if (currentAttachmentState.channelWriteMask !== newAttachmentState.channelWriteMask) {
      dbi.colorMaskiOES(
        i,
        !!(newAttachmentState.channelWriteMask & 1 /* Red */),
        !!(newAttachmentState.channelWriteMask & 2 /* Green */),
        !!(newAttachmentState.channelWriteMask & 4 /* Blue */),
        !!(newAttachmentState.channelWriteMask & 8 /* Alpha */)
      );
      currentAttachmentState.channelWriteMask = newAttachmentState.channelWriteMask;
    }
    const blendModeChanged = currentAttachmentState.rgbBlendState.blendMode !== newAttachmentState.rgbBlendState.blendMode || currentAttachmentState.alphaBlendState.blendMode !== newAttachmentState.alphaBlendState.blendMode;
    const blendFuncChanged = currentAttachmentState.rgbBlendState.blendSrcFactor !== newAttachmentState.rgbBlendState.blendSrcFactor || currentAttachmentState.alphaBlendState.blendSrcFactor !== newAttachmentState.alphaBlendState.blendSrcFactor || currentAttachmentState.rgbBlendState.blendDstFactor !== newAttachmentState.rgbBlendState.blendDstFactor || currentAttachmentState.alphaBlendState.blendDstFactor !== newAttachmentState.alphaBlendState.blendDstFactor;
    const blendDisabled = isBlendStateNone(newAttachmentState.rgbBlendState) && isBlendStateNone(newAttachmentState.alphaBlendState);
    if (blendFuncChanged || blendModeChanged) {
      if (isBlendStateNone(currentAttachmentState.rgbBlendState) && isBlendStateNone(currentAttachmentState.alphaBlendState))
        dbi.enableiOES(gl.BLEND, i);
      else if (blendDisabled)
        dbi.disableiOES(gl.BLEND, i);
    }
    if (blendModeChanged) {
      dbi.blendEquationSeparateiOES(
        i,
        newAttachmentState.rgbBlendState.blendMode,
        newAttachmentState.alphaBlendState.blendMode
      );
      currentAttachmentState.rgbBlendState.blendMode = newAttachmentState.rgbBlendState.blendMode;
      currentAttachmentState.alphaBlendState.blendMode = newAttachmentState.alphaBlendState.blendMode;
    }
    if (blendFuncChanged) {
      dbi.blendFuncSeparateiOES(
        i,
        newAttachmentState.rgbBlendState.blendSrcFactor,
        newAttachmentState.rgbBlendState.blendDstFactor,
        newAttachmentState.alphaBlendState.blendSrcFactor,
        newAttachmentState.alphaBlendState.blendDstFactor
      );
      currentAttachmentState.rgbBlendState.blendSrcFactor = newAttachmentState.rgbBlendState.blendSrcFactor;
      currentAttachmentState.alphaBlendState.blendSrcFactor = newAttachmentState.alphaBlendState.blendSrcFactor;
      currentAttachmentState.rgbBlendState.blendDstFactor = newAttachmentState.rgbBlendState.blendDstFactor;
      currentAttachmentState.alphaBlendState.blendDstFactor = newAttachmentState.alphaBlendState.blendDstFactor;
    }
  }
  _setAttachmentState(newAttachmentState) {
    const gl = this.gl;
    const currentAttachmentState = this._currentMegaState.attachmentsState[0];
    if (currentAttachmentState.channelWriteMask !== newAttachmentState.channelWriteMask) {
      gl.colorMask(
        !!(newAttachmentState.channelWriteMask & 1 /* Red */),
        !!(newAttachmentState.channelWriteMask & 2 /* Green */),
        !!(newAttachmentState.channelWriteMask & 4 /* Blue */),
        !!(newAttachmentState.channelWriteMask & 8 /* Alpha */)
      );
      currentAttachmentState.channelWriteMask = newAttachmentState.channelWriteMask;
    }
    const blendModeChanged = currentAttachmentState.rgbBlendState.blendMode !== newAttachmentState.rgbBlendState.blendMode || currentAttachmentState.alphaBlendState.blendMode !== newAttachmentState.alphaBlendState.blendMode;
    const blendFuncChanged = currentAttachmentState.rgbBlendState.blendSrcFactor !== newAttachmentState.rgbBlendState.blendSrcFactor || currentAttachmentState.alphaBlendState.blendSrcFactor !== newAttachmentState.alphaBlendState.blendSrcFactor || currentAttachmentState.rgbBlendState.blendDstFactor !== newAttachmentState.rgbBlendState.blendDstFactor || currentAttachmentState.alphaBlendState.blendDstFactor !== newAttachmentState.alphaBlendState.blendDstFactor;
    if (blendFuncChanged || blendModeChanged) {
      if (isBlendStateNone(currentAttachmentState.rgbBlendState) && isBlendStateNone(currentAttachmentState.alphaBlendState))
        gl.enable(gl.BLEND);
      else if (isBlendStateNone(newAttachmentState.rgbBlendState) && isBlendStateNone(newAttachmentState.alphaBlendState))
        gl.disable(gl.BLEND);
    }
    if (blendModeChanged) {
      gl.blendEquationSeparate(
        newAttachmentState.rgbBlendState.blendMode,
        newAttachmentState.alphaBlendState.blendMode
      );
      currentAttachmentState.rgbBlendState.blendMode = newAttachmentState.rgbBlendState.blendMode;
      currentAttachmentState.alphaBlendState.blendMode = newAttachmentState.alphaBlendState.blendMode;
    }
    if (blendFuncChanged) {
      gl.blendFuncSeparate(
        newAttachmentState.rgbBlendState.blendSrcFactor,
        newAttachmentState.rgbBlendState.blendDstFactor,
        newAttachmentState.alphaBlendState.blendSrcFactor,
        newAttachmentState.alphaBlendState.blendDstFactor
      );
      currentAttachmentState.rgbBlendState.blendSrcFactor = newAttachmentState.rgbBlendState.blendSrcFactor;
      currentAttachmentState.alphaBlendState.blendSrcFactor = newAttachmentState.alphaBlendState.blendSrcFactor;
      currentAttachmentState.rgbBlendState.blendDstFactor = newAttachmentState.rgbBlendState.blendDstFactor;
      currentAttachmentState.alphaBlendState.blendDstFactor = newAttachmentState.alphaBlendState.blendDstFactor;
    }
  }
  _applyStencil() {
    if (this._currentStencilRef === null)
      return;
    this.gl.stencilFunc(this._currentMegaState.stencilCompare, this._currentStencilRef, 255);
  }
  _setMegaState(newMegaState) {
    const gl = this.gl;
    const currentMegaState = this._currentMegaState;
    if (this._OES_draw_buffers_indexed !== null) {
      assert2(newMegaState.attachmentsState.length === 1 || newMegaState.attachmentsState.length >= this._currentColorAttachment.length);
      for (let i = 0; i < this._currentColorAttachment.length; i++) {
        if (this._currentColorAttachment[i] === null)
          continue;
        const newAttachmentState = newMegaState.attachmentsState.length === 1 ? newMegaState.attachmentsState[0] : newMegaState.attachmentsState[i];
        this._setAttachmentStateIndexed(i, newAttachmentState);
      }
    } else {
      assert2(newMegaState.attachmentsState.length === 1);
      this._setAttachmentState(newMegaState.attachmentsState[0]);
    }
    if (currentMegaState.depthCompare !== newMegaState.depthCompare) {
      gl.depthFunc(newMegaState.depthCompare);
      currentMegaState.depthCompare = newMegaState.depthCompare;
    }
    if (currentMegaState.depthWrite !== newMegaState.depthWrite) {
      gl.depthMask(newMegaState.depthWrite);
      currentMegaState.depthWrite = newMegaState.depthWrite;
    }
    if (currentMegaState.stencilCompare !== newMegaState.stencilCompare) {
      currentMegaState.stencilCompare = newMegaState.stencilCompare;
      this._applyStencil();
    }
    if (currentMegaState.stencilWrite !== newMegaState.stencilWrite) {
      gl.stencilMask(newMegaState.stencilWrite ? 255 : 0);
      currentMegaState.stencilWrite = newMegaState.stencilWrite;
    }
    if (currentMegaState.stencilWrite) {
      if (currentMegaState.stencilPassOp !== newMegaState.stencilPassOp) {
        gl.stencilOp(gl.KEEP, gl.KEEP, newMegaState.stencilPassOp);
        currentMegaState.stencilPassOp = newMegaState.stencilPassOp;
      }
    }
    if (currentMegaState.cullMode !== newMegaState.cullMode) {
      if (currentMegaState.cullMode === 0 /* None */)
        gl.enable(gl.CULL_FACE);
      else if (newMegaState.cullMode === 0 /* None */)
        gl.disable(gl.CULL_FACE);
      if (newMegaState.cullMode === 2 /* Back */)
        gl.cullFace(gl.BACK);
      else if (newMegaState.cullMode === 1 /* Front */)
        gl.cullFace(gl.FRONT);
      currentMegaState.cullMode = newMegaState.cullMode;
    }
    if (currentMegaState.frontFace !== newMegaState.frontFace) {
      gl.frontFace(newMegaState.frontFace);
      currentMegaState.frontFace = newMegaState.frontFace;
    }
    if (currentMegaState.polygonOffset !== newMegaState.polygonOffset) {
      if (newMegaState.polygonOffset) {
        gl.polygonOffset(1, 1);
        gl.enable(gl.POLYGON_OFFSET_FILL);
      } else {
        gl.disable(gl.POLYGON_OFFSET_FILL);
      }
      currentMegaState.polygonOffset = newMegaState.polygonOffset;
    }
    if (currentMegaState.wireframe !== newMegaState.wireframe) {
      assert2(this.wireframeSupported || !currentMegaState.wireframe);
      if (newMegaState.wireframe) {
        this._WEBGL_polygon_mode.polygonModeWEBGL(gl.FRONT_AND_BACK, this._WEBGL_polygon_mode.LINE_WEBGL);
      } else {
        this._WEBGL_polygon_mode.polygonModeWEBGL(gl.FRONT_AND_BACK, this._WEBGL_polygon_mode.FILL_WEBGL);
      }
      currentMegaState.wireframe = newMegaState.wireframe;
    }
  }
  _validatePipelineFormats(pipeline) {
    for (let i = 0; i < this._currentColorAttachment.length; i++) {
      const attachment = this._currentColorAttachment[i];
      if (attachment === null)
        continue;
      assert2(attachment.pixelFormat === pipeline.colorAttachmentFormats[i]);
    }
    if (this._currentDepthStencilAttachment !== null)
      assert2(this._currentDepthStencilAttachment.pixelFormat === pipeline.depthStencilAttachmentFormat);
    if (this._currentSampleCount !== -1)
      assert2(this._currentSampleCount === pipeline.sampleCount);
  }
  setPipeline(o) {
    this._currentPipeline = o;
    this._validatePipelineFormats(this._currentPipeline);
    this._setMegaState(this._currentPipeline.megaState);
    const program = this._currentPipeline.program;
    this._setProgram(program);
    if (program.compileState === 2 /* NeedsBind */) {
      const gl = this.gl;
      const prog = program.gl_program;
      const deviceProgram = program.descriptor;
      const samplers = findall(deviceProgram.preprocessedVert, /^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm);
      for (let i = 0; i < samplers.length; i++) {
        const [m, name, location] = samplers[i];
        const samplerUniformLocation = gl.getUniformLocation(prog, name);
        gl.uniform1i(samplerUniformLocation, parseInt(location));
      }
      program.compileState = 3 /* ReadyToUse */;
    }
  }
  setVertexInput(inputLayout_, vertexBuffers, indexBuffer) {
    assert2(this._currentPipeline.inputLayout === inputLayout_);
    if (inputLayout_ !== null) {
      const inputLayout = inputLayout_;
      this._setVAO(inputLayout.vao);
      const gl = this.gl;
      for (let i = 0; i < inputLayout.vertexAttributeDescriptors.length; i++) {
        const attr = inputLayout.vertexAttributeDescriptors[i];
        const vertexBuffer = vertexBuffers[attr.bufferIndex];
        if (vertexBuffer === null)
          continue;
        gl.bindBuffer(gl.ARRAY_BUFFER, getPlatformBuffer(vertexBuffer.buffer));
        const bufferOffset = (vertexBuffer.byteOffset ?? 0) + attr.bufferByteOffset;
        const format = inputLayout.vertexBufferFormats[i];
        const inputLayoutBuffer = inputLayout.vertexBufferDescriptors[attr.bufferIndex];
        if (isFormatSizedInteger(attr.format))
          gl.vertexAttribIPointer(attr.location, format.size, format.type, inputLayoutBuffer.byteStride, bufferOffset);
        else
          gl.vertexAttribPointer(attr.location, format.size, format.type, format.normalized, inputLayoutBuffer.byteStride, bufferOffset);
      }
      assert2(indexBuffer !== null === (inputLayout.indexBufferFormat !== null));
      if (indexBuffer !== null) {
        const buffer = indexBuffer.buffer;
        assert2(buffer.usage === 1 /* Index */);
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, getPlatformBuffer(buffer));
        this._currentIndexBufferByteOffset = indexBuffer.byteOffset ?? 0;
      } else {
        this._currentIndexBufferByteOffset = null;
      }
    } else {
      assert2(indexBuffer === null);
      this._setVAO(null);
      this._currentIndexBufferByteOffset = null;
    }
  }
  setStencilRef(value) {
    if (this._currentStencilRef === value)
      return;
    this._currentStencilRef = value;
    this._applyStencil();
  }
  setBlendColor(color) {
    this.gl.blendColor(color.r, color.g, color.b, color.a);
  }
  draw(count, firstVertex) {
    const gl = this.gl;
    const pipeline = this._currentPipeline;
    gl.drawArrays(pipeline.drawMode, firstVertex, count);
    this._debugGroupStatisticsDrawCall();
    this._debugGroupStatisticsTriangles(count / 3);
  }
  drawIndexed(count, firstIndex) {
    const gl = this.gl;
    const pipeline = this._currentPipeline, inputLayout = assertExists2(pipeline.inputLayout);
    const byteOffset = assertExists2(this._currentIndexBufferByteOffset) + firstIndex * inputLayout.indexBufferCompByteSize;
    gl.drawElements(pipeline.drawMode, count, inputLayout.indexBufferType, byteOffset);
    this._debugGroupStatisticsDrawCall();
    this._debugGroupStatisticsTriangles(count / 3);
  }
  drawIndexedInstanced(count, firstIndex, instanceCount) {
    const gl = this.gl;
    const pipeline = this._currentPipeline, inputLayout = assertExists2(pipeline.inputLayout);
    const byteOffset = assertExists2(this._currentIndexBufferByteOffset) + firstIndex * inputLayout.indexBufferCompByteSize;
    gl.drawElementsInstanced(pipeline.drawMode, count, inputLayout.indexBufferType, byteOffset, instanceCount);
    this._debugGroupStatisticsDrawCall();
    this._debugGroupStatisticsTriangles(count / 3 * instanceCount);
  }
  beginOcclusionQuery(dstOffs) {
    const gl = this.gl;
    const queryPool = this._currentRenderPassDescriptor.occlusionQueryPool;
    gl.beginQuery(queryPool.gl_query_type, queryPool.gl_query[dstOffs]);
  }
  endOcclusionQuery() {
    const gl = this.gl;
    const queryPool = this._currentRenderPassDescriptor.occlusionQueryPool;
    gl.endQuery(queryPool.gl_query_type);
  }
  pushDebugGroup(name) {
  }
  popDebugGroup() {
  }
  insertDebugMarker(marker) {
  }
  endPass() {
    const gl = this.gl;
    const renderPassDescriptor = this._currentRenderPassDescriptor;
    for (let i = 0; i < this._currentColorAttachment.length; i++) {
      const colorResolveFrom = this._currentColorAttachment[i];
      if (colorResolveFrom !== null) {
        const colorResolveTo = this._currentColorResolveTo[i];
        const colorStore = renderPassDescriptor.colorAttachments[i].store;
        const boundReadFB = colorResolveTo !== null || !colorStore;
        if (boundReadFB) {
          gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this._resolveColorReadFramebuffer);
          if (this._resolveColorAttachmentsChanged)
            this._bindFramebufferAttachment(gl.READ_FRAMEBUFFER, gl.COLOR_ATTACHMENT0, colorResolveFrom, this._currentColorAttachmentView[i]);
        }
        if (colorResolveTo !== null) {
          assert2(colorResolveFrom.width === colorResolveTo.width && colorResolveFrom.height === colorResolveTo.height);
          assert2(colorResolveFrom.pixelFormat === colorResolveTo.pixelFormat);
          this._setScissorEnabled(false);
          if (colorResolveTo === this._scTexture) {
            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._scPlatformFramebuffer);
          } else {
            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._resolveColorDrawFramebuffer);
            if (this._resolveColorAttachmentsChanged) {
              this._bindFramebufferAttachmentTexture(gl.DRAW_FRAMEBUFFER, gl.COLOR_ATTACHMENT0, colorResolveTo, this._currentColorResolveView[i]);
            }
          }
          gl.blitFramebuffer(0, 0, colorResolveFrom.width, colorResolveFrom.height, 0, 0, colorResolveTo.width, colorResolveTo.height, gl.COLOR_BUFFER_BIT, gl.LINEAR);
        }
        if (!colorStore)
          gl.invalidateFramebuffer(gl.READ_FRAMEBUFFER, [gl.COLOR_ATTACHMENT0]);
        if (boundReadFB)
          gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);
      }
    }
    this._resolveColorAttachmentsChanged = false;
    const depthStencilResolveFrom = this._currentDepthStencilAttachment;
    if (depthStencilResolveFrom !== null) {
      const depthStencilResolveTo = this._currentDepthStencilResolveTo;
      const depthStencilStore = renderPassDescriptor.depthStencilAttachment.store;
      const boundReadFB = depthStencilResolveTo !== null || !depthStencilStore;
      if (boundReadFB) {
        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this._resolveDepthStencilReadFramebuffer);
        if (this._resolveDepthStencilAttachmentsChanged)
          this._bindFramebufferDepthStencilAttachment(gl.READ_FRAMEBUFFER, depthStencilResolveFrom, this._currentDepthStencilAttachmentView);
      }
      if (depthStencilResolveTo !== null) {
        assert2(depthStencilResolveFrom.width === depthStencilResolveTo.width && depthStencilResolveFrom.height === depthStencilResolveTo.height);
        this._setScissorEnabled(false);
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._resolveDepthStencilDrawFramebuffer);
        if (this._resolveDepthStencilAttachmentsChanged)
          this._bindFramebufferDepthStencilAttachment(gl.DRAW_FRAMEBUFFER, depthStencilResolveTo, this._currentDepthStencilResolveView);
        gl.blitFramebuffer(0, 0, depthStencilResolveFrom.width, depthStencilResolveFrom.height, 0, 0, depthStencilResolveTo.width, depthStencilResolveTo.height, gl.DEPTH_BUFFER_BIT, gl.NEAREST);
      }
      if (!depthStencilStore)
        gl.invalidateFramebuffer(gl.READ_FRAMEBUFFER, [gl.DEPTH_STENCIL_ATTACHMENT]);
      if (boundReadFB)
        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);
      this._resolveDepthStencilAttachmentsChanged = false;
    }
    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);
  }
  //#endregion
};
function createSwapChainForWebGL2(gl, configuration) {
  return new GfxImplP_GL(gl, configuration);
}

// src/noclip/SuperMonkeyBall/AVTpl.ts
function parseAVTplHeader2(texHeaderBuffer, tplName, idx, tplBuffer) {
  let view = texHeaderBuffer.createDataView();
  assert(view.getUint16(14) === 4660);
  const name = `${tplName}_${leftPad(idx.toString(), 3, "0")}`;
  const format = view.getUint32(0);
  const offs = view.getUint32(4);
  const width = view.getUint16(8);
  const height = view.getUint16(10);
  const mipCount = view.getUint16(12);
  const data = tplBuffer.slice(offs);
  const paletteFormat = null;
  const paletteData = null;
  return { name, format, width, height, mipCount, data, paletteFormat, paletteData };
}
function parseAVTpl2(buffer, tplName) {
  let view = buffer.createDataView();
  const textures = /* @__PURE__ */ new Map();
  let entryCount = view.getUint32(0);
  let offs = 4;
  for (let i = 0; i < entryCount; i++) {
    const texture = parseAVTplHeader2(buffer.slice(offs), tplName, i, buffer);
    offs += 16;
    if (texture.width === 0 && texture.height === 0 && texture.mipCount === 0) {
      continue;
    }
    textures.set(i, texture);
  }
  return textures;
}

// src/noclip/Render.ts
import { mat4 as mat418, vec3 as vec319 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/World.ts
import { mat4 as mat417, quat as quat2, vec3 as vec318, vec4 as vec43 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/BgObject.ts
import { mat4 as mat415, vec3 as vec315 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/Anim.ts
function searchKeyframes(timeSeconds, keyframes) {
  assert(keyframes.length > 0);
  if (timeSeconds < keyframes[0].timeSeconds) {
    return 0;
  }
  if (timeSeconds >= keyframes[keyframes.length - 1].timeSeconds) {
    return keyframes.length - 1;
  }
  let start = 0;
  let end = keyframes.length;
  while (end > start) {
    const mid = Math.floor((end - start) / 2) + start;
    if (timeSeconds < keyframes[mid].timeSeconds) {
      end = mid;
    } else {
      start = mid + 1;
    }
  }
  return start;
}
function interpolateKeyframes2(timeSeconds, keyframes) {
  if (keyframes.length === 0) {
    throw new Error("Cannot interpolate empty keyframe list");
  }
  if (timeSeconds <= keyframes[0].timeSeconds) {
    return keyframes[0].value;
  }
  if (timeSeconds >= keyframes[keyframes.length - 1].timeSeconds) {
    return keyframes[keyframes.length - 1].value;
  }
  const nextIdx = searchKeyframes(timeSeconds, keyframes);
  if (nextIdx === 0) {
    return keyframes[nextIdx].value;
  }
  const prev = keyframes[nextIdx - 1];
  const next = keyframes[nextIdx];
  if (prev.easeType === 0 /* Constant */) {
    return prev.value;
  }
  const t = invlerp(prev.timeSeconds, next.timeSeconds, timeSeconds);
  if (prev.easeType === 1 /* Linear */) {
    return lerp(prev.value, next.value, t);
  }
  const deltaSeconds = next.timeSeconds - prev.timeSeconds;
  const baseValue = lerp(prev.value, next.value, smoothstep(t));
  const t2 = t * t;
  const t3 = t2 * t;
  const inAdjust = next.tangentIn * (t3 - t2);
  const outAdjust = prev.tangentOut * (t + (t3 - 2 * t2));
  return baseValue + deltaSeconds * (inAdjust + outAdjust);
}
function loopWrap(timeSeconds, loopStartSeconds, loopEndSeconds) {
  const loopDuration = loopEndSeconds - loopStartSeconds;
  return (timeSeconds + loopStartSeconds) % loopDuration + loopStartSeconds;
}

// src/noclip/SuperMonkeyBall/BgObject.ts
var scratchVec3c3 = vec315.create();
var scratchVec3d3 = vec315.create();
var scratchVec3e3 = vec315.create();
var scratchMat4a3 = mat415.create();
var scratchRenderParams2 = new RenderParams2();
var BgObjectInst = class {
  // 1 - alpha
  constructor(model, bgObjectData) {
    this.model = model;
    this.bgObjectData = bgObjectData;
    this.translucency = bgObjectData.translucency;
    const rotRadians = scratchVec3c3;
    vec315.scale(rotRadians, bgObjectData.rot, S16_TO_RADIANS);
    this.buildWorldFromModelMtx(bgObjectData.pos, rotRadians, bgObjectData.scale);
  }
  worldFromModel = mat415.create();
  visible = true;
  translucency = 0;
  buildWorldFromModelMtx(pos, rotRadians, scale) {
    mat415.fromTranslation(this.worldFromModel, pos);
    mat415.rotateZ(this.worldFromModel, this.worldFromModel, rotRadians[2]);
    mat415.rotateY(this.worldFromModel, this.worldFromModel, rotRadians[1]);
    mat415.rotateX(this.worldFromModel, this.worldFromModel, rotRadians[0]);
    mat415.scale(this.worldFromModel, this.worldFromModel, scale);
  }
  update(state) {
    const anim = this.bgObjectData.anim;
    if (anim === null) return;
    const loopedTimeSeconds = loopWrap(
      state.time.getAnimTimeSeconds(),
      anim.loopStartSeconds,
      anim.loopEndSeconds
    );
    if (anim.visibleKeyframes.length !== 0) {
      const visibleFloat = interpolateKeyframes2(loopedTimeSeconds, anim.visibleKeyframes);
      this.visible = visibleFloat >= 0.5;
      if (!this.visible) return;
    }
    if (anim.translucencyKeyframes.length !== 0) {
      this.translucency = interpolateKeyframes2(loopedTimeSeconds, anim.translucencyKeyframes);
      if (this.translucency >= 1) {
        this.visible = false;
        return;
      }
    }
    const pos = scratchVec3c3;
    vec315.copy(pos, this.bgObjectData.pos);
    const rotRadians = scratchVec3e3;
    vec315.scale(rotRadians, this.bgObjectData.rot, S16_TO_RADIANS);
    const scale = scratchVec3d3;
    vec315.copy(scale, this.bgObjectData.scale);
    if (anim.posXKeyframes.length !== 0) {
      pos[0] = interpolateKeyframes2(loopedTimeSeconds, anim.posXKeyframes);
    }
    if (anim.posYKeyframes.length !== 0) {
      pos[1] = interpolateKeyframes2(loopedTimeSeconds, anim.posYKeyframes);
    }
    if (anim.posZKeyframes.length !== 0) {
      pos[2] = interpolateKeyframes2(loopedTimeSeconds, anim.posZKeyframes);
    }
    if (anim.rotXKeyframes.length !== 0) {
      rotRadians[0] = interpolateKeyframes2(loopedTimeSeconds, anim.rotXKeyframes) * 0.017453292519943295 /* DEG_TO_RAD */;
    }
    if (anim.rotYKeyframes.length !== 0) {
      rotRadians[1] = interpolateKeyframes2(loopedTimeSeconds, anim.rotYKeyframes) * 0.017453292519943295 /* DEG_TO_RAD */;
    }
    if (anim.rotZKeyframes.length !== 0) {
      rotRadians[2] = interpolateKeyframes2(loopedTimeSeconds, anim.rotZKeyframes) * 0.017453292519943295 /* DEG_TO_RAD */;
    }
    if (anim.scaleXKeyframes.length !== 0) {
      scale[0] = interpolateKeyframes2(loopedTimeSeconds, anim.scaleXKeyframes);
    }
    if (anim.scaleYKeyframes.length !== 0) {
      scale[1] = interpolateKeyframes2(loopedTimeSeconds, anim.scaleYKeyframes);
    }
    if (anim.scaleZKeyframes.length !== 0) {
      scale[2] = interpolateKeyframes2(loopedTimeSeconds, anim.scaleZKeyframes);
    }
    this.buildWorldFromModelMtx(pos, rotRadians, scale);
  }
  prepareToRender(state, ctx, texMtx) {
    this.prepareToRenderWithViewMatrix(state, ctx, ctx.viewerInput.camera.viewMatrix, texMtx);
  }
  prepareToRenderWithViewMatrix(state, ctx, viewMatrix, texMtx) {
    if (!this.visible) return;
    if (ctx.mirrorCapture && this.bgObjectData.flags & 1 << 7) {
      return;
    }
    const renderParams = scratchRenderParams2;
    renderParams.reset();
    renderParams.alpha = 1 - this.translucency;
    renderParams.sort = this.translucency < EPSILON2 ? 0 /* Translucent */ : 1 /* All */;
    if (texMtx !== void 0) {
      mat415.copy(renderParams.texMtx, texMtx);
    }
    const textureScroll = this.bgObjectData.textureScroll;
    if (textureScroll) {
      const timeSeconds = state.time.getAnimTimeSeconds();
      const scroll = scratchVec3c3;
      vec315.set(scroll, textureScroll.speed[0] * timeSeconds, textureScroll.speed[1] * timeSeconds, 0);
      if (texMtx !== void 0) {
        mat415.fromTranslation(scratchMat4a3, scroll);
        mat415.mul(renderParams.texMtx, renderParams.texMtx, scratchMat4a3);
      } else {
        mat415.fromTranslation(renderParams.texMtx, scroll);
      }
    }
    mat415.mul(renderParams.viewFromModel, viewMatrix, this.worldFromModel);
    renderParams.lighting = state.lightingGroups.getForBgFlags(this.bgObjectData.flags);
    renderParams.depthOffset = 400;
    this.model.prepareToRender(ctx, renderParams);
  }
};

// src/noclip/gfx/helpers/TextureHelpers.ts
function makeSolidColorTexture2D(device, color) {
  const tex = device.createTexture(makeTextureDescriptor2D(GfxFormat.U8_RGBA_NORM, 1, 1, 1));
  const data = new Uint8Array(4);
  data[0] = color.r * 255;
  data[1] = color.g * 255;
  data[2] = color.b * 255;
  data[3] = color.a * 255;
  device.uploadTextureData(tex, 0, [data]);
  return tex;
}

// src/noclip/SuperMonkeyBall/AnimGroup.ts
import { mat4 as mat416, vec3 as vec316 } from "gl-matrix";

// src/noclip/SuperMonkeyBall/BonusWave.ts
var BONUS_WAVE_MODEL_NAME = "SHAPE_STAGE134";
var BONUS_WAVE_VERTEX_GLOBAL = `
const float BONUS_WAVE_ANGLE_TO_RAD = 0.00009587379924285257;
`;
var BONUS_WAVE_VERTEX_MAIN = `
    float t_WaveDist = length(a_Position.xz);
    float t_WaveAmp = 0.5 + (-0.030833333333333333 * t_WaveDist);
    float t_WaveAngle = -1092.0 * (u_SceneTimeFrames - 30.0) + 16384.0 * t_WaveDist;
    if (t_WaveAngle <= 0.0) {
        float t_WaveRad = t_WaveAngle * BONUS_WAVE_ANGLE_TO_RAD;
        float t_WaveSin = sin(t_WaveRad);
        float t_WaveCos = cos(t_WaveRad);
        float t_WaveAmpDeriv = -0.030833333333333333;
        float t_WaveThetaDeriv = 16384.0 * BONUS_WAVE_ANGLE_TO_RAD;
        vec3 t_WavePos = a_Position.xyz;
        t_WavePos.y += t_WaveSin * t_WaveAmp;

        vec3 t_WaveNormal = vec3(0.0, 1.0, 0.0);
        if (t_WaveDist > 0.0) {
            float t_WaveDyDr = (t_WaveCos * t_WaveThetaDeriv * t_WaveAmp) + (t_WaveSin * t_WaveAmpDeriv);
            float t_WaveInvR = 1.0 / t_WaveDist;
            float t_WaveDx = t_WaveDyDr * a_Position.x * t_WaveInvR;
            float t_WaveDz = t_WaveDyDr * a_Position.z * t_WaveInvR;
            t_WaveNormal = normalize(vec3(-t_WaveDx, 1.0, -t_WaveDz));
        }

        mat4x3 t_WavePosMtx = UnpackMatrix(u_PosMtx[0]);
        t_Position = (t_WavePosMtx * vec4(t_WavePos, 1.0)).xyz;
        v_Position = t_Position;
        t_Normal = MulNormalMatrix(t_WavePosMtx, t_WaveNormal);
    }
`;
function createBonusWaveMaterialHacks() {
  return {
    extraVertexGlobal: BONUS_WAVE_VERTEX_GLOBAL,
    extraVertexMain: BONUS_WAVE_VERTEX_MAIN
  };
}

// src/noclip/SuperMonkeyBall/AnimGroup.ts
var scratchRenderParams3 = new RenderParams2();
var scratchShadowParams = new RenderParams2();
var scratchVec3a8 = vec316.create();
var scratchVec3b6 = vec316.create();
var scratchMat4a4 = mat416.create();
var scratchMat4b = mat416.create();
var scratchMat4c = mat416.create();
var goalTapeStack = new MatrixStack();
var goalTapeOffset = { x: 0, y: 0, z: 0 };
var scratchStageModelParams = new RenderParams2();
var SMB2_STAGE_MODEL_VISIBILITY_MASK = 1;
var SWITCH_MODEL_NAMES = [
  "BUTTON_P",
  "BUTTON_S",
  "BUTTON_R",
  "BUTTON_FF",
  "BUTTON_FR"
];
var StageModelInst = class {
  constructor(model, instance) {
    this.model = model;
    this.modelName = model.modelData.name;
    const rotRadians = scratchVec3a8;
    vec316.scale(rotRadians, instance.rot, S16_TO_RADIANS);
    mat416.fromTranslation(this.worldFromModel, instance.pos);
    mat416.rotateZ(this.worldFromModel, this.worldFromModel, rotRadians[2]);
    mat416.rotateY(this.worldFromModel, this.worldFromModel, rotRadians[1]);
    mat416.rotateX(this.worldFromModel, this.worldFromModel, rotRadians[0]);
    mat416.scale(this.worldFromModel, this.worldFromModel, instance.scale);
  }
  worldFromModel = mat416.create();
  modelName;
  prepareToRender(state, ctx, viewFromParent) {
    const rp = scratchStageModelParams;
    rp.reset();
    rp.sort = 2 /* None */;
    rp.lighting = state.lighting;
    mat416.mul(rp.viewFromModel, viewFromParent, this.worldFromModel);
    this.model.prepareToRender(ctx, rp);
  }
  prepareToRenderShadow(ctx, viewFromParent, renderParams, configureRenderInst) {
    mat416.mul(renderParams.viewFromModel, viewFromParent, this.worldFromModel);
    this.model.prepareToRenderCustom(ctx, renderParams, configureRenderInst);
  }
};
var AnimGroup = class {
  constructor(modelCache, stageData, animGroupIdx, goalTimerDigits, goalBagModels, goalTapeModel, resolveStageModel = null) {
    this.stageData = stageData;
    this.animGroupIdx = animGroupIdx;
    this.resolveStageModel = resolveStageModel;
    this.agData = stageData.stagedef.animGroups[animGroupIdx];
    this.models = [];
    for (let i = 0; i < this.agData.animGroupModels.length; i++) {
      const entry = this.agData.animGroupModels[i];
      const name = entry.modelName;
      const modelInst = modelCache.getModel(name, 3 /* StageAndBg */);
      if (modelInst !== null) {
        if (stageData.stageInfo.id === 92 /* St092_Bonus_Wave */ && name === BONUS_WAVE_MODEL_NAME) {
          modelInst.setMaterialHacks(createBonusWaveMaterialHacks());
        }
        this.models.push({ model: modelInst, flags: entry.flags });
        continue;
      }
      if (this.resolveStageModel) {
        const stageModel = this.resolveStageModel(name);
        if (stageModel) {
          if (stageData.stageInfo.id === 92 /* St092_Bonus_Wave */ && name === BONUS_WAVE_MODEL_NAME) {
            stageModel.setMaterialHacks(createBonusWaveMaterialHacks());
          }
          this.models.push({ model: stageModel, flags: entry.flags });
        }
      }
    }
    if (this.agData.stageModelInstances && this.agData.stageModelInstances.length > 0) {
      const visibilityMask = this.stageData.gameSource === "smb2" ? SMB2_STAGE_MODEL_VISIBILITY_MASK : 0;
      for (const instance of this.agData.stageModelInstances) {
        if (visibilityMask !== 0 && ((instance.flags ?? 0) & visibilityMask) !== 0) {
          continue;
        }
        if (!instance.modelName) {
          continue;
        }
        const modelInst = modelCache.getModel(instance.modelName, 3 /* StageAndBg */);
        if (modelInst !== null) {
          this.stageModels.push(new StageModelInst(modelInst, instance));
        }
      }
    }
    if (this.agData.mirrorModelNames && this.agData.mirrorModelNames.length > 0) {
      for (const name of this.agData.mirrorModelNames) {
        const modelInst = modelCache.getModel(name, 3 /* StageAndBg */);
        if (modelInst !== null) {
          this.mirrorModels.push(modelInst);
        }
      }
    }
    this.worldFromAg = mat416.create();
    this.originFromAg = mat416.create();
    if (animGroupIdx > 0) {
      mat416.fromXRotation(this.originFromAg, -this.agData.originRot[0] * S16_TO_RADIANS);
      mat416.rotateY(this.originFromAg, this.originFromAg, -this.agData.originRot[1] * S16_TO_RADIANS);
      mat416.rotateZ(this.originFromAg, this.originFromAg, -this.agData.originRot[2] * S16_TO_RADIANS);
      const negOrigin = scratchVec3a8;
      vec316.negate(negOrigin, this.agData.originPos);
      mat416.translate(this.originFromAg, this.originFromAg, negOrigin);
    } else {
      mat416.identity(this.originFromAg);
      mat416.identity(this.worldFromAg);
    }
    this.bananas = this.agData.bananas.map((ban) => new Banana(modelCache, stageData, ban));
    this.goals = this.agData.goals.map((goal) => new Goal(modelCache, goal, goalTimerDigits));
    this.bumpers = this.agData.bumpers.map((bumper) => new Bumper(modelCache, bumper));
    this.wormholes = this.agData.wormholes.map((wormhole) => new Wormhole(modelCache, wormhole));
    this.jamabarModel = modelCache.getJamabarModel();
    const usesSmb2Models = stageData.gameSource === "smb2" || stageData.gameSource === "mb2ws";
    const singleName = "OBJ_BANANA_01_LOD150";
    const bunchName = "OBJ_BANANA_02_LOD100";
    this.bananaModelSingle = (usesSmb2Models ? modelCache.getModel(singleName, 2 /* Common */) : null) ?? modelCache.getModel(35 /* OBJ_BANANA_01_LOD150 */, 2 /* Common */);
    this.bananaModelBunch = (usesSmb2Models ? modelCache.getModel(bunchName, 2 /* Common */) : null) ?? modelCache.getModel(38 /* OBJ_BANANA_02_LOD100 */, 2 /* Common */);
    if (stageData.gameSource === "smb2" || stageData.gameSource === "mb2ws") {
      this.switchModels = SWITCH_MODEL_NAMES.map((name) => modelCache.getModel(name, 0 /* Stage */));
      for (let i = 0; i < this.switchModels.length; i++) {
        if (this.switchModels[i]) {
          this.switchModelFallback = this.switchModels[i];
          break;
        }
      }
    }
    this.goalBagModels = goalBagModels;
    this.goalTapeModel = goalTapeModel;
    if (stageData.stageInfo.id === 101 /* St101_Blur_Bridge */) {
      this.blurBridgeAccordionModel = assertExists(modelCache.getModel("MOT_STAGE101_BLUR", 3 /* StageAndBg */));
    }
  }
  models;
  stageModels = [];
  mirrorModels = [];
  blurBridgeAccordionModel = null;
  worldFromAg;
  originFromAg;
  useExternalTransform = false;
  agData;
  bananas;
  bananaCollected = null;
  goals;
  bumpers;
  wormholes;
  goalBagModels;
  goalTapeModel;
  bananaModelSingle = null;
  bananaModelBunch = null;
  jamabarModel = null;
  switchModels = [];
  switchModelFallback = null;
  // Current translation, needed directly for blur bridge
  translation = vec316.create();
  loopedTimeSeconds = 0;
  setBananaCollected(collectedByIndex) {
    this.bananaCollected = collectedByIndex;
  }
  update(state) {
    if (this.animGroupIdx > 0) {
      const loopStart = this.agData.loopStartSeconds ?? this.stageData.stagedef.loopStartSeconds;
      const loopEnd = this.agData.loopEndSeconds ?? this.stageData.stagedef.loopEndSeconds;
      if (loopEnd > loopStart) {
        this.loopedTimeSeconds = loopWrap(
          state.time.getAnimTimeSeconds(),
          loopStart,
          loopEnd
        );
      } else {
        this.loopedTimeSeconds = state.time.getAnimTimeSeconds();
      }
      vec316.copy(this.translation, this.agData.originPos);
      const rotRadians = scratchVec3b6;
      vec316.scale(rotRadians, this.agData.originRot, S16_TO_RADIANS);
      const anim = this.agData.anim;
      if (anim !== null) {
        if (anim.posXKeyframes.length !== 0) {
          this.translation[0] = interpolateKeyframes2(this.loopedTimeSeconds, anim.posXKeyframes);
        }
        if (anim.posYKeyframes.length !== 0) {
          this.translation[1] = interpolateKeyframes2(this.loopedTimeSeconds, anim.posYKeyframes);
        }
        if (anim.posZKeyframes.length !== 0) {
          this.translation[2] = interpolateKeyframes2(this.loopedTimeSeconds, anim.posZKeyframes);
        }
        if (anim.rotXKeyframes.length !== 0) {
          rotRadians[0] = interpolateKeyframes2(this.loopedTimeSeconds, anim.rotXKeyframes) * 0.017453292519943295 /* DEG_TO_RAD */;
        }
        if (anim.rotYKeyframes.length !== 0) {
          rotRadians[1] = interpolateKeyframes2(this.loopedTimeSeconds, anim.rotYKeyframes) * 0.017453292519943295 /* DEG_TO_RAD */;
        }
        if (anim.rotZKeyframes.length !== 0) {
          rotRadians[2] = interpolateKeyframes2(this.loopedTimeSeconds, anim.rotZKeyframes) * 0.017453292519943295 /* DEG_TO_RAD */;
        }
      }
      if (!this.useExternalTransform) {
        mat416.fromTranslation(this.worldFromAg, this.translation);
        mat416.rotateZ(this.worldFromAg, this.worldFromAg, rotRadians[2]);
        mat416.rotateY(this.worldFromAg, this.worldFromAg, rotRadians[1]);
        mat416.rotateX(this.worldFromAg, this.worldFromAg, rotRadians[0]);
        mat416.mul(this.worldFromAg, this.worldFromAg, this.originFromAg);
      }
    }
    for (let i = 0; i < this.bananas.length; i++) {
      this.bananas[i].update(state);
    }
    for (let i = 0; i < this.bumpers.length; i++) {
      this.bumpers[i].update(state);
    }
  }
  setExternalTransform(src) {
    if (src === null) {
      this.useExternalTransform = false;
      return;
    }
    mat416.set(
      this.worldFromAg,
      src[0],
      src[4],
      src[8],
      0,
      src[1],
      src[5],
      src[9],
      0,
      src[2],
      src[6],
      src[10],
      0,
      src[3],
      src[7],
      src[11],
      1
    );
    this.useExternalTransform = true;
  }
  drawBlurBridgeAccordion(state, ctx, viewFromWorld) {
    if (this.blurBridgeAccordionModel === null || this.animGroupIdx === 0 || this.agData.animGroupModels.length === 0 || this.agData.anim === null) {
      return;
    }
    const rp = scratchRenderParams3;
    rp.reset();
    rp.lighting = state.lighting;
    const accordionPos = scratchVec3a8;
    vec316.copy(accordionPos, this.translation);
    const prevX = interpolateKeyframes2(this.loopedTimeSeconds - 0.5, this.agData.anim.posXKeyframes);
    const flip = prevX >= accordionPos[0];
    const deltaX = Math.abs(prevX - accordionPos[0]);
    accordionPos[0] = (accordionPos[0] + prevX) / 2 + (flip ? 1 : -1);
    mat416.translate(rp.viewFromModel, viewFromWorld, accordionPos);
    if (flip) {
      mat416.rotateY(rp.viewFromModel, rp.viewFromModel, Math.PI);
    }
    const scale = scratchVec3a8;
    vec316.set(scale, deltaX / 2, 1, 1);
    mat416.scale(rp.viewFromModel, rp.viewFromModel, scale);
    this.blurBridgeAccordionModel.prepareToRender(ctx, rp);
  }
  prepareToRender(state, ctx, bananas, jamabars, goalBags, goalTapes, switches, viewFromWorld = ctx.viewerInput.camera.viewMatrix, viewFromWorldBase = viewFromWorld, tiltParams = null, skipModelNames) {
    const rp = scratchRenderParams3;
    rp.reset();
    rp.lighting = state.lighting;
    const textureScroll = this.agData.textureScroll;
    if (textureScroll && (this.stageData.gameSource === "smb2" || this.stageData.gameSource === "mb2ws")) {
      const timeSeconds = state.time.getAnimTimeSeconds();
      vec316.set(scratchVec3b6, textureScroll.speed[0] * timeSeconds, textureScroll.speed[1] * timeSeconds, 0);
      mat416.fromTranslation(rp.texMtx, scratchVec3b6);
    }
    const viewFromAnimGroup = scratchMat4a4;
    mat416.mul(viewFromAnimGroup, viewFromWorld, this.worldFromAg);
    mat416.copy(rp.viewFromModel, viewFromAnimGroup);
    for (let i = 0; i < this.models.length; i++) {
      const entry = this.models[i];
      const model = entry.model;
      if (ctx.mirrorCapture && (entry.flags & 1 << 2) === 0) {
        continue;
      }
      if (skipModelNames && model instanceof ModelInst2 && skipModelNames.has(model.modelData.name)) {
        continue;
      }
      model.prepareToRender(ctx, rp);
    }
    for (let i = 0; i < this.stageModels.length; i++) {
      if (skipModelNames && skipModelNames.has(this.stageModels[i].modelName)) {
        continue;
      }
      this.stageModels[i].prepareToRender(state, ctx, viewFromAnimGroup);
    }
    if (bananas) {
      this.drawBananas(state, ctx, viewFromAnimGroup, bananas, viewFromWorldBase, tiltParams);
    } else {
      for (let i = 0; i < this.bananas.length; i++) {
        if (this.bananaCollected?.[i]) continue;
        this.bananas[i].prepareToRender(state, ctx, viewFromAnimGroup, viewFromWorld);
      }
    }
    for (let i = 0; i < this.goals.length; i++) {
      this.goals[i].prepareToRender(state, ctx, viewFromAnimGroup);
    }
    this.drawGoalTapes(state, ctx, viewFromAnimGroup, goalTapes);
    for (let i = 0; i < this.bumpers.length; i++) {
      this.bumpers[i].prepareToRender(state, ctx, viewFromAnimGroup);
    }
    this.drawJamabars(state, ctx, viewFromAnimGroup, jamabars);
    for (let i = 0; i < this.wormholes.length; i++) {
      this.wormholes[i].prepareToRender(state, ctx, viewFromAnimGroup);
    }
    this.drawGoalBags(state, ctx, viewFromAnimGroup, goalBags);
    this.drawSwitches(state, ctx, viewFromAnimGroup, switches);
    this.drawBlurBridgeAccordion(state, ctx, viewFromWorld);
  }
  prepareToRenderMirrors(state, ctx, viewFromWorld, configureRenderInst) {
    if (this.mirrorModels.length === 0) {
      return;
    }
    const rp = scratchRenderParams3;
    rp.reset();
    rp.sort = 2 /* None */;
    rp.lighting = state.lighting;
    const viewFromAnimGroup = scratchMat4a4;
    mat416.mul(viewFromAnimGroup, viewFromWorld, this.worldFromAg);
    mat416.copy(rp.viewFromModel, viewFromAnimGroup);
    for (let i = 0; i < this.mirrorModels.length; i++) {
      this.mirrorModels[i].prepareToRenderCustom?.(ctx, rp, configureRenderInst);
    }
  }
  getWorldFromAg() {
    return this.worldFromAg;
  }
  prepareToRenderShadow(ctx, viewFromWorld, configureRenderInst) {
    const rp = scratchShadowParams;
    rp.reset();
    rp.sort = 0 /* Translucent */;
    rp.depthOffset = 1e4;
    const viewFromAnimGroup = scratchMat4a4;
    mat416.mul(viewFromAnimGroup, viewFromWorld, this.worldFromAg);
    mat416.copy(rp.viewFromModel, viewFromAnimGroup);
    for (let i = 0; i < this.models.length; i++) {
      const entry = this.models[i];
      const model = entry.model;
      if (model.prepareToRenderCustom) {
        model.prepareToRenderCustom(ctx, rp, configureRenderInst);
      }
    }
    for (let i = 0; i < this.stageModels.length; i++) {
      this.stageModels[i].prepareToRenderShadow(ctx, viewFromAnimGroup, rp, configureRenderInst);
    }
  }
  drawBananas(state, ctx, viewFromAnimGroup, bananas, viewFromWorldBase, tiltParams) {
    if (bananas.length === 0) {
      return;
    }
    const rp = scratchRenderParams3;
    for (const banana of bananas) {
      if (!banana.visible) {
        continue;
      }
      const model = (banana.type & 1) === 1 ? this.bananaModelBunch : this.bananaModelSingle;
      if (!model) {
        continue;
      }
      let viewFromAg = viewFromAnimGroup;
      const tiltFactor = banana.tiltFactor ?? 1;
      if (tiltParams && tiltFactor < 1) {
        const rotX = tiltParams.rotX * tiltFactor;
        const rotZ = tiltParams.rotZ * tiltFactor;
        mat416.copy(scratchMat4b, viewFromWorldBase);
        if (rotX !== 0 || rotZ !== 0) {
          mat416.translate(scratchMat4b, scratchMat4b, tiltParams.pivot);
          mat416.rotateX(scratchMat4b, scratchMat4b, rotX);
          mat416.rotateZ(scratchMat4b, scratchMat4b, rotZ);
          vec316.negate(scratchVec3b6, tiltParams.pivot);
          mat416.translate(scratchMat4b, scratchMat4b, scratchVec3b6);
        }
        mat416.mul(scratchMat4c, scratchMat4b, this.worldFromAg);
        viewFromAg = scratchMat4c;
      } else if (tiltFactor >= 1) {
        viewFromAg = viewFromAnimGroup;
      } else {
        mat416.mul(scratchMat4c, viewFromWorldBase, this.worldFromAg);
        viewFromAg = scratchMat4c;
      }
      rp.reset();
      rp.sort = 2 /* None */;
      rp.lighting = state.lighting;
      mat416.translate(rp.viewFromModel, viewFromAg, [banana.pos.x, banana.pos.y, banana.pos.z]);
      mat416.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * banana.rotY);
      mat416.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * banana.rotX);
      mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * banana.rotZ);
      if (banana.scale !== 1) {
        mat416.scale(rp.viewFromModel, rp.viewFromModel, [banana.scale, banana.scale, banana.scale]);
      }
      model.prepareToRender(ctx, rp);
    }
  }
  drawGoalBags(state, ctx, viewFromAnimGroup, goalBags) {
    if (!goalBags || goalBags.length === 0) {
      return;
    }
    const closedModel = this.goalBagModels.closed;
    const openModelA = this.goalBagModels.openA;
    const openModelB = this.goalBagModels.openB;
    if (!closedModel && !openModelA && !openModelB) {
      return;
    }
    const rp = scratchRenderParams3;
    for (const bag of goalBags) {
      rp.reset();
      rp.sort = 1 /* All */;
      rp.lighting = state.lighting;
      mat416.translate(rp.viewFromModel, viewFromAnimGroup, [bag.uSomePos.x, bag.uSomePos.y, bag.uSomePos.z]);
      mat416.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * bag.rotY);
      mat416.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * bag.rotX);
      mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * bag.rotZ);
      if (bag.openness <= 0 || !openModelA || !openModelB) {
        closedModel?.prepareToRender(ctx, rp);
        continue;
      }
      const base = scratchMat4c;
      mat416.copy(base, rp.viewFromModel);
      mat416.translate(base, base, [0, -0.5 * bag.openness, 0]);
      const rotZ = 9102 * bag.openness;
      mat416.copy(rp.viewFromModel, base);
      mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, -S16_TO_RADIANS * rotZ);
      openModelA.prepareToRender(ctx, rp);
      mat416.copy(rp.viewFromModel, base);
      mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * rotZ);
      openModelB.prepareToRender(ctx, rp);
    }
  }
  drawGoalTapes(state, ctx, viewFromAnimGroup, goalTapes) {
    if (!goalTapes || goalTapes.length === 0 || !this.goalTapeModel) {
      return;
    }
    const rp = scratchRenderParams3;
    for (const tape of goalTapes) {
      rp.reset();
      rp.sort = 2 /* None */;
      rp.lighting = state.lighting;
      const base = scratchMat4b;
      mat416.translate(base, viewFromAnimGroup, [tape.pos.x, tape.pos.y, tape.pos.z]);
      mat416.rotateZ(base, base, S16_TO_RADIANS * tape.rot.z);
      mat416.rotateY(base, base, S16_TO_RADIANS * tape.rot.y);
      mat416.rotateX(base, base, S16_TO_RADIANS * tape.rot.x);
      mat416.copy(rp.viewFromModel, base);
      this.goalTapeModel.draw(ctx, rp, (ddraw, kind) => {
        const points = tape.points;
        let idx = 0;
        while (idx < points.length) {
          let end = idx;
          while (end < points.length - 1 && (points[end].flags & 4) !== 0) {
            end += 1;
          }
          if (end > idx) {
            ddraw.begin(152 /* DRAW_TRIANGLE_STRIP */);
            for (let i = idx; i <= end; i += 1) {
              const point = points[i];
              const rotY = atan2S16(point.normal.x, point.normal.z) - 32768;
              const rotX = atan2S16(point.normal.y, sqrt(sumSq2(point.normal.x, point.normal.z)));
              goalTapeStack.fromRotateY(rotY);
              goalTapeStack.rotateX(rotX);
              goalTapeOffset.x = 0;
              goalTapeOffset.y = 0.125;
              goalTapeOffset.z = 0;
              goalTapeStack.tfVec(goalTapeOffset, goalTapeOffset);
              const nx = point.normal.x;
              const ny = point.normal.y;
              const nz = point.normal.z;
              const s = point.t;
              const px = point.pos.x;
              const py = point.pos.y;
              const pz = point.pos.z;
              ddraw.position3f32(px + goalTapeOffset.x, py + goalTapeOffset.y, pz + goalTapeOffset.z);
              if (kind === "A") {
                ddraw.color4rgba8(11 /* CLR0 */, 255, 255, 255, 255);
              } else {
                ddraw.normal3f32(nx, ny, nz);
              }
              ddraw.texCoord2f32(13 /* TEX0 */, s, 1);
              ddraw.position3f32(px - goalTapeOffset.x, py - goalTapeOffset.y, pz - goalTapeOffset.z);
              if (kind === "A") {
                ddraw.color4rgba8(11 /* CLR0 */, 255, 255, 255, 255);
              } else {
                ddraw.normal3f32(nx, ny, nz);
              }
              ddraw.texCoord2f32(13 /* TEX0 */, s, 0);
            }
            ddraw.end();
          }
          idx = end + 1;
        }
      }, tape.index ?? 0);
    }
  }
  drawSwitches(state, ctx, viewFromAnimGroup, switches) {
    if (!switches || switches.length === 0 || this.switchModels.length === 0) {
      return;
    }
    const rp = scratchRenderParams3;
    for (const sw of switches) {
      const model = this.switchModels[sw.type & 7] ?? this.switchModelFallback;
      if (!model) {
        continue;
      }
      rp.reset();
      rp.lighting = state.lighting;
      mat416.translate(rp.viewFromModel, viewFromAnimGroup, [sw.pos.x, sw.pos.y, sw.pos.z]);
      mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * sw.rotZ);
      mat416.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * sw.rotY);
      mat416.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * sw.rotX);
      model.prepareToRender(ctx, rp);
    }
  }
  drawJamabars(state, ctx, viewFromAnimGroup, jamabars) {
    if (!jamabars || jamabars.length === 0 || !this.jamabarModel) {
      return;
    }
    const rp = scratchRenderParams3;
    for (const jamabar of jamabars) {
      rp.reset();
      rp.lighting = state.lighting;
      mat416.translate(rp.viewFromModel, viewFromAnimGroup, [jamabar.pos.x, jamabar.pos.y, jamabar.pos.z]);
      mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * jamabar.rot.z);
      mat416.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * jamabar.rot.y);
      mat416.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * jamabar.rot.x);
      mat416.scale(rp.viewFromModel, rp.viewFromModel, [jamabar.scale.x, jamabar.scale.y, jamabar.scale.z]);
      this.jamabarModel.prepareToRender(ctx, rp);
    }
  }
};
var scratchVec3c4 = vec316.create();
var Banana = class {
  constructor(modelCache, stageData, bananaData) {
    this.bananaData = bananaData;
    const modelId = bananaData.type === 0 /* Single */ ? 35 /* OBJ_BANANA_01_LOD150 */ : 38 /* OBJ_BANANA_02_LOD100 */;
    const usesSmb2Models = stageData.gameSource === "smb2" || stageData.gameSource === "mb2ws";
    const modelName = bananaData.type === 0 /* Single */ ? "OBJ_BANANA_01_LOD150" : "OBJ_BANANA_02_LOD100";
    const model = (usesSmb2Models ? modelCache.getModel(modelName, 2 /* Common */) : null) ?? modelCache.getModel(modelId, 2 /* Common */);
    this.model = assertExists(model);
  }
  model;
  yRotRadians = 0;
  update(state) {
    const incRadians = S16_TO_RADIANS * (this.bananaData.type === 0 /* Single */ ? 1024 : 768);
    this.yRotRadians += incRadians * state.time.getDeltaTimeFrames();
    this.yRotRadians %= 2 * Math.PI;
  }
  prepareToRender(state, ctx, viewFromAnimGroup, viewFromWorld) {
    const rp = scratchRenderParams3;
    rp.reset();
    rp.sort = 2 /* None */;
    rp.lighting = state.lighting;
    mat416.rotateY(rp.viewFromModel, viewFromWorld, this.yRotRadians);
    const posViewSpace = scratchVec3c4;
    transformVec3Mat4w1(posViewSpace, viewFromAnimGroup, this.bananaData.pos);
    setMatrixTranslation(rp.viewFromModel, posViewSpace);
    this.model.prepareToRender(ctx, rp);
  }
};
var Goal = class {
  constructor(modelCache, goalData, goalTimerDigits) {
    this.goalData = goalData;
    if (goalData.type === 0 /* Blue */) {
      this.model = assertExists(modelCache.getBlueGoalModel());
    } else if (goalData.type === 1 /* Green */) {
      this.model = assertExists(modelCache.getGreenGoalModel());
    } else {
      this.model = assertExists(modelCache.getRedGoalModel());
    }
    this.timerDigits = goalTimerDigits;
  }
  model;
  timerDigits;
  prepareToRender(state, ctx, viewFromAnimGroup) {
    const rp = scratchRenderParams3;
    rp.reset();
    rp.lighting = state.lighting;
    mat416.translate(rp.viewFromModel, viewFromAnimGroup, this.goalData.pos);
    mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.goalData.rot[2]);
    mat416.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.goalData.rot[1]);
    mat416.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.goalData.rot[0]);
    this.model.prepareToRender(ctx, rp);
    this.drawTimer(state, ctx, viewFromAnimGroup);
  }
  drawTimer(state, ctx, viewFromAnimGroup) {
    if (!this.timerDigits) {
      return;
    }
    const stageTimeFrames = state.time.getStageTimeFrames();
    let time = Math.floor(stageTimeFrames * 100 / 60);
    if (time < 0) {
      time = 0;
    }
    const base = scratchMat4b;
    mat416.translate(base, viewFromAnimGroup, this.goalData.pos);
    mat416.rotateZ(base, base, S16_TO_RADIANS * this.goalData.rot[2]);
    mat416.rotateY(base, base, S16_TO_RADIANS * this.goalData.rot[1]);
    mat416.rotateX(base, base, S16_TO_RADIANS * this.goalData.rot[0]);
    const rp = scratchRenderParams3;
    rp.reset();
    rp.sort = 2 /* None */;
    rp.lighting = state.lighting;
    const smallOffsetX = -0.45;
    const largeOffsetX = -0.6666;
    let digit = time % 10;
    time = Math.floor(time / 10);
    this.drawTimerDigit(ctx, rp, base, this.timerDigits.small[digit], 0);
    digit = time % 10;
    time = Math.floor(time / 10);
    this.drawTimerDigit(ctx, rp, base, this.timerDigits.small[digit], smallOffsetX);
    for (let i = 0; i < 3; i++) {
      digit = time % 10;
      time = Math.floor(time / 10);
      this.drawTimerDigit(ctx, rp, base, this.timerDigits.large[digit], largeOffsetX * i);
    }
  }
  drawTimerDigit(ctx, rp, base, model, offsetX) {
    if (!model) {
      return;
    }
    mat416.copy(rp.viewFromModel, base);
    if (offsetX !== 0) {
      mat416.translate(rp.viewFromModel, rp.viewFromModel, [offsetX, 0, 0]);
    }
    model.prepareToRender(ctx, rp);
  }
};
var Bumper = class {
  constructor(modelCache, bumperData) {
    this.bumperData = bumperData;
    this.model = assertExists(modelCache.getBumperModel());
  }
  model;
  yRotRadians = 0;
  update(state) {
    const incRadians = S16_TO_RADIANS * 256;
    this.yRotRadians += incRadians * state.time.getDeltaTimeFrames();
    this.yRotRadians %= 2 * Math.PI;
  }
  prepareToRender(state, ctx, viewFromAnimGroup) {
    const rp = scratchRenderParams3;
    rp.reset();
    rp.lighting = state.lighting;
    mat416.translate(rp.viewFromModel, viewFromAnimGroup, this.bumperData.pos);
    mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.bumperData.rot[2]);
    mat416.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.bumperData.rot[1]);
    mat416.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.bumperData.rot[0]);
    mat416.scale(rp.viewFromModel, rp.viewFromModel, this.bumperData.scale);
    mat416.rotateY(rp.viewFromModel, rp.viewFromModel, this.yRotRadians);
    this.model.prepareToRender(ctx, rp);
  }
};
var Wormhole = class {
  constructor(modelCache, wormholeData) {
    this.wormholeData = wormholeData;
    this.model = modelCache.getWormholeModel();
    this.surfaceModel = modelCache.getWormholeSurfaceModel();
  }
  model;
  surfaceModel;
  prepareToRender(state, ctx, viewFromAnimGroup) {
    if (!this.model && !this.surfaceModel) {
      return;
    }
    const rp = scratchRenderParams3;
    rp.reset();
    rp.lighting = state.lighting;
    mat416.translate(rp.viewFromModel, viewFromAnimGroup, this.wormholeData.pos);
    mat416.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.wormholeData.rot[2]);
    mat416.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.wormholeData.rot[1]);
    mat416.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * this.wormholeData.rot[0]);
    const base = scratchMat4b;
    mat416.copy(base, rp.viewFromModel);
    this.model?.prepareToRender(ctx, rp);
    if (this.surfaceModel) {
      mat416.copy(rp.viewFromModel, base);
      this.surfaceModel.prepareToRender(ctx, rp);
    }
  }
};

// src/noclip/SuperMonkeyBall/Lighting.ts
import { vec3 as vec317 } from "gl-matrix";
var Lighting = class {
  ambientColor;
  infLightViewSpace;
  specularColorScale;
  bgInfo;
  infLightWorldSpace;
  constructor(bgInfo, specularColorScale = null) {
    this.bgInfo = bgInfo;
    this.ambientColor = colorNewCopy(bgInfo.ambientColor);
    this.infLightWorldSpace = new Light();
    this.infLightViewSpace = new Light();
    this.specularColorScale = colorNewCopy(specularColorScale ?? bgInfo.infLightColor);
    colorCopy(this.infLightWorldSpace.Color, bgInfo.infLightColor);
    vec317.set(this.infLightWorldSpace.Position, 0, 0, -1);
    vec317.rotateX(
      this.infLightWorldSpace.Position,
      this.infLightWorldSpace.Position,
      Vec3Zero,
      S16_TO_RADIANS * bgInfo.infLightRotX
    );
    vec317.rotateY(
      this.infLightWorldSpace.Position,
      this.infLightWorldSpace.Position,
      Vec3Zero,
      S16_TO_RADIANS * bgInfo.infLightRotY
    );
    vec317.scale(this.infLightWorldSpace.Position, this.infLightWorldSpace.Position, 1e4);
    lightSetSpot(this.infLightWorldSpace, 0, 0 /* OFF */);
    this.infLightViewSpace.copy(this.infLightWorldSpace);
  }
  update(viewerInput2) {
    transformVec3Mat4w0(
      this.infLightViewSpace.Position,
      viewerInput2.camera.viewMatrix,
      this.infLightWorldSpace.Position
    );
  }
};
var LightingGroups = class {
  constructor(base) {
    this.base = base;
  }
  groupCache = /* @__PURE__ */ new Map();
  update(viewerInput2) {
    this.base.update(viewerInput2);
    for (const lighting of this.groupCache.values()) {
      lighting.update(viewerInput2);
    }
  }
  getForBgFlags(flags) {
    const customGroup = flags >>> 28;
    if (customGroup <= 0) {
      return this.base;
    }
    const cached = this.groupCache.get(customGroup);
    if (cached) {
      return cached;
    }
    const lighting = new Lighting(this.base.bgInfo, colorNewFromRGBA(0, 0, 0));
    this.groupCache.set(customGroup, lighting);
    return lighting;
  }
};

// src/noclip/SuperMonkeyBall/World.ts
var BALL_BASE_RADIUS = 0.5;
var STAGE_TILT_SCALE = 0.6;
var SHADOW_LIGHT_OFFSET = 15;
var SHADOW_RADIUS_SCALE = 1.4;
var SHADOW_FADE_SCALE = 0.2;
var SHADOW_PARAMS_WORDS = 40;
var SHADOW_UBO_INDEX = 1;
var STREAK_VERTEX_SIZE = 24;
var EFFECT_DEPTH_BIAS = 0.2;
var EFFECT_DEPTH_BIAS_MAX = 0.5;
var SPARKLE_TEXTURE_PATH = "assets/particle/beautifulstar.png";
var MIRROR_FLAT_UBO_INDEX = 1;
var MIRROR_FLAT_UBO_WORDS = 36;
var MIRROR_WAVY_UBO_INDEX = 1;
var MIRROR_WAVY_UBO_WORDS = 60;
var MIRROR_DISTORT_UBO_INDEX = 1;
var MIRROR_DISTORT_UBO_WORDS = 16;
var WAVY_MIRROR_PLANE_Y = 0.02;
var scratchRenderParams4 = new RenderParams2();
var scratchTiltedView = mat417.create();
var scratchTiltedViewPrev = mat417.create();
var scratchVec3a9 = vec318.create();
var scratchVec3b7 = vec318.create();
var scratchVec3c5 = vec318.create();
var scratchVec3d4 = vec318.create();
var scratchVec3e4 = vec318.create();
var scratchVec3f = vec318.create();
var scratchVec3g = vec318.create();
var scratchVec3h = vec318.create();
var scratchVec4a = vec43.create();
var scratchVec4b = vec43.create();
var scratchVec4c = vec43.create();
var scratchMat4a5 = mat417.create();
var scratchShadowView = mat417.create();
var scratchShadowFromView = mat417.create();
var scratchWorldFromView = mat417.create();
var scratchBallLightPos = vec318.create();
var scratchMirrorPlane = mat417.create();
var scratchMirrorMat4a = mat417.create();
var scratchMirrorMat4b = mat417.create();
var scratchMirrorMat4c = mat417.create();
var scratchMirrorMat4d = mat417.create();
var scratchMirrorMat4e = mat417.create();
var scratchMirrorVec3a = vec318.create();
function getNlModelInst(device, renderCache, nlObj, textureCache, id) {
  const modelData = nlObj.get(id);
  if (!modelData) {
    return null;
  }
  return new ModelInst(device, renderCache, modelData, textureCache);
}
function getGoalTapeModelData(stageData) {
  let model = stageData.nlObj.get(14 /* GOAL_TAPE */);
  if (!model && (stageData.gameSource === "smb2" || stageData.gameSource === "mb2ws")) {
    model = stageData.nlObj.get(3 /* GOAL_TAPE_SMB2 */);
  }
  return model ?? null;
}
function createShadowProgram(renderCache) {
  const vert = `
${GfxShaderLibrary.MatrixLibrary}

layout(std140) uniform ub_SceneParams {
    Mat4x4 u_Projection;
    vec4 u_Misc0;
};

layout(std140) uniform ub_ShadowParams {
    Mat4x4 u_ViewFromModel;
    Mat4x4 u_ShadowFromView;
    vec4 u_ShadowColor;
    vec4 u_ShadowInfo;
};

layout(location = 0) in vec4 a_Position;

out vec3 v_ShadowPos;
out vec2 v_ShadowUV;

void main() {
    mat4 proj = UnpackMatrix(u_Projection);
    mat4 viewFromModel = UnpackMatrix(u_ViewFromModel);
    mat4 shadowFromView = UnpackMatrix(u_ShadowFromView);
    vec4 posView = viewFromModel * vec4(a_Position.xyz, 1.0);
    vec4 posShadow = shadowFromView * posView;
    v_ShadowPos = posShadow.xyz;
    v_ShadowUV = posShadow.xy / (u_ShadowInfo.x * 2.0) + vec2(0.5);
    gl_Position = proj * posView;
}
`;
  const frag = `
${GfxShaderLibrary.MatrixLibrary}

precision highp float;

layout(std140) uniform ub_ShadowParams {
    Mat4x4 u_ViewFromModel;
    Mat4x4 u_ShadowFromView;
    vec4 u_ShadowColor;
    vec4 u_ShadowInfo;
};

uniform sampler2D u_Texture;

in vec3 v_ShadowPos;
in vec2 v_ShadowUV;

out vec4 o_Color;

void main() {
    if (v_ShadowUV.x < 0.0 || v_ShadowUV.x > 1.0 || v_ShadowUV.y < 0.0 || v_ShadowUV.y > 1.0) {
        discard;
    }
    vec4 tex = texture(u_Texture, v_ShadowUV);
    float dist = u_ShadowInfo.y - v_ShadowPos.z;
    float fade = clamp(1.0 - dist * u_ShadowInfo.z, 0.0, 1.0);
    float mask = max(max(tex.r, tex.g), tex.b);
    float alpha = mask * u_ShadowColor.a * fade;
    if (alpha <= 0.0) {
        discard;
    }
    o_Color = vec4(u_ShadowColor.rgb, alpha);
}
`;
  const program = preprocessProgram_GLSL(renderCache.device.queryVendorInfo(), vert, frag);
  return renderCache.createProgramSimple(program);
}
function createStreakProgram(renderCache) {
  const vert = `
${GfxShaderLibrary.MatrixLibrary}

precision highp float;

layout(std140) uniform ub_SceneParams {
    Mat4x4 u_Projection;
    vec4 u_Misc0;
};

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 2) in vec2 a_TexCoord;

out vec4 v_Color;
out vec2 v_TexCoord;

void main() {
    mat4 proj = UnpackMatrix(u_Projection);
    gl_Position = proj * vec4(a_Position, 1.0);
    v_Color = a_Color;
    v_TexCoord = a_TexCoord;
}
`;
  const frag = `
precision mediump float;

uniform sampler2D u_Texture;

in vec4 v_Color;
in vec2 v_TexCoord;

out vec4 o_Color;

void main() {
    vec4 tex = texture(u_Texture, v_TexCoord);
    o_Color = v_Color * tex;
}
`;
  const program = preprocessProgram_GLSL(renderCache.device.queryVendorInfo(), vert, frag);
  return renderCache.createProgramSimple(program);
}
function createMirrorFlatProgram(renderCache) {
  const vert = `
${GfxShaderLibrary.MatrixLibrary}

layout(std140) uniform ub_SceneParams {
    Mat4x4 u_Projection;
    vec4 u_Misc0;
};

layout(std140) uniform ub_MirrorParams {
    Mat4x4 u_ViewFromModel;
    Mat4x4 u_MirrorClipFromModel;
    vec4 u_MirrorAlpha;
};

layout(location = 0) in vec4 a_Position;
layout(location = 6) in vec4 a_Color;

out vec4 v_MirrorClip;
out vec4 v_Color;

void main() {
    mat4 viewFromModel = UnpackMatrix(u_ViewFromModel);
    vec4 posView = viewFromModel * vec4(a_Position.xyz, 1.0);
    gl_Position = UnpackMatrix(u_Projection) * posView;
    v_MirrorClip = UnpackMatrix(u_MirrorClipFromModel) * vec4(a_Position.xyz, 1.0);
    v_Color = a_Color;
}
`;
  const frag = `
${GfxShaderLibrary.MatrixLibrary}

precision highp float;

layout(std140) uniform ub_MirrorParams {
    Mat4x4 u_ViewFromModel;
    Mat4x4 u_MirrorClipFromModel;
    vec4 u_MirrorAlpha;
};

uniform sampler2D u_MirrorTexture;

in vec4 v_MirrorClip;
in vec4 v_Color;

out vec4 o_Color;

vec2 Project(vec4 clipPos) {
    vec2 uv = clipPos.xy / clipPos.w;
    return uv * 0.5 + vec2(0.5);
}

void main() {
    vec2 uv = clamp(Project(v_MirrorClip), 0.0, 1.0);
    vec4 tex = texture(u_MirrorTexture, uv);
    o_Color = vec4(tex.rgb, u_MirrorAlpha.x * v_Color.a);
}
`;
  const program = preprocessProgram_GLSL(renderCache.device.queryVendorInfo(), vert, frag);
  return renderCache.createProgramSimple(program);
}
function createMirrorWavyProgram(renderCache) {
  const vert = `
${GfxShaderLibrary.MatrixLibrary}

layout(std140) uniform ub_SceneParams {
    Mat4x4 u_Projection;
    vec4 u_Misc0;
};

layout(std140) uniform ub_MirrorParams {
    Mat4x4 u_ViewFromModel;
    Mat4x4 u_MirrorClipFromModel;
    Mat4x4 u_DistortClipFromModel;
    vec4 u_MirrorAlpha;
    vec4 u_IndTexMtx0;
    vec4 u_IndTexMtx1;
};

layout(location = 0) in vec4 a_Position;
layout(location = 6) in vec4 a_Color;

out vec4 v_MirrorClip;
out vec4 v_DistortClip;
out vec4 v_Color;

void main() {
    mat4 viewFromModel = UnpackMatrix(u_ViewFromModel);
    vec4 posView = viewFromModel * vec4(a_Position.xyz, 1.0);
    gl_Position = UnpackMatrix(u_Projection) * posView;
    v_MirrorClip = UnpackMatrix(u_MirrorClipFromModel) * vec4(a_Position.xyz, 1.0);
    v_DistortClip = UnpackMatrix(u_DistortClipFromModel) * vec4(a_Position.xyz, 1.0);
    v_Color = a_Color;
}
`;
  const frag = `
${GfxShaderLibrary.MatrixLibrary}

precision highp float;

layout(std140) uniform ub_MirrorParams {
    Mat4x4 u_ViewFromModel;
    Mat4x4 u_MirrorClipFromModel;
    Mat4x4 u_DistortClipFromModel;
    vec4 u_MirrorAlpha;
    vec4 u_IndTexMtx0;
    vec4 u_IndTexMtx1;
};

uniform sampler2D u_MirrorTexture;
uniform sampler2D u_DistortTexture;

in vec4 v_MirrorClip;
in vec4 v_DistortClip;
in vec4 v_Color;

out vec4 o_Color;

float IndMask(float n, int mask) { return float(int(n) & mask); }

vec2 Project(vec4 clipPos) {
    vec2 uv = clipPos.xy / clipPos.w;
    return uv * 0.5 + vec2(0.5);
}

void main() {
    vec2 mirrorUV = clamp(Project(v_MirrorClip), 0.0, 1.0);
    vec2 distortUV = clamp(Project(v_DistortClip), 0.0, 1.0);

    vec3 indCoord = 255.0 * texture(u_DistortTexture, distortUV).abg;
    indCoord = vec3(
        IndMask(indCoord.x, 0xF8),
        IndMask(indCoord.y, 0xF8),
        IndMask(indCoord.z, 0xF8)
    );
    indCoord += vec3(-128.0);
    vec2 indOffset = vec2(
        dot(u_IndTexMtx0.xyz, indCoord),
        dot(u_IndTexMtx1.xyz, indCoord)
    ) * (1.0 / 256.0);

    mirrorUV = clamp(mirrorUV + indOffset, 0.0, 1.0);
    vec4 tex = texture(u_MirrorTexture, mirrorUV);
    o_Color = vec4(tex.rgb, u_MirrorAlpha.x * v_Color.a);
}
`;
  const program = preprocessProgram_GLSL(renderCache.device.queryVendorInfo(), vert, frag);
  return renderCache.createProgramSimple(program);
}
function createMirrorDistortProgram(renderCache) {
  const vert = `
${GfxShaderLibrary.MatrixLibrary}
${GfxShaderLibrary.MulNormalMatrix}

layout(std140) uniform ub_SceneParams {
    Mat4x4 u_Projection;
    vec4 u_Misc0;
};

#define u_SceneTimeFrames u_Misc0[1]

layout(std140) uniform ub_WavyParams {
    Mat4x4 u_ViewFromModel;
};

layout(location = 0) in vec4 a_Position;
layout(location = 3) in vec3 a_Normal;

out vec2 v_TexCoord;

${BONUS_WAVE_VERTEX_GLOBAL}

void main() {
    vec3 t_Position = a_Position.xyz;
    vec3 t_Normal = a_Normal;

    float t_WaveDist = length(t_Position.xz);
    float t_WaveAmp = 0.5 + (-0.030833333333333333 * t_WaveDist);
    float t_WaveAngle = -1092.0 * (u_SceneTimeFrames - 30.0) + 16384.0 * t_WaveDist;
    if (t_WaveAngle <= 0.0) {
        float t_WaveRad = t_WaveAngle * BONUS_WAVE_ANGLE_TO_RAD;
        float t_WaveSin = sin(t_WaveRad);
        float t_WaveCos = cos(t_WaveRad);
        float t_WaveAmpDeriv = -0.030833333333333333;
        float t_WaveThetaDeriv = 16384.0 * BONUS_WAVE_ANGLE_TO_RAD;
        vec3 t_WavePos = t_Position;
        t_WavePos.y += t_WaveSin * t_WaveAmp;

        vec3 t_WaveNormal = vec3(0.0, 1.0, 0.0);
        if (t_WaveDist > 0.0) {
            float t_WaveDyDr = (t_WaveCos * t_WaveThetaDeriv * t_WaveAmp) + (t_WaveSin * t_WaveAmpDeriv);
            float t_WaveInvR = 1.0 / t_WaveDist;
            float t_WaveDx = t_WaveDyDr * t_Position.x * t_WaveInvR;
            float t_WaveDz = t_WaveDyDr * t_Position.z * t_WaveInvR;
            t_WaveNormal = normalize(vec3(-t_WaveDx, 1.0, -t_WaveDz));
        }

        t_Position = t_WavePos;
        t_Normal = t_WaveNormal;
    }

    mat4 viewFromModel = UnpackMatrix(u_ViewFromModel);
    vec4 posView = viewFromModel * vec4(t_Position, 1.0);
    gl_Position = UnpackMatrix(u_Projection) * posView;

    vec3 normalView = normalize((viewFromModel * vec4(t_Normal, 0.0)).xyz);
    v_TexCoord = normalView.xz * 0.5 + vec2(0.5);
}
`;
  const frag = `
precision highp float;

uniform sampler2D u_GradTexture;

in vec2 v_TexCoord;

out vec4 o_Color;

void main() {
    vec2 uv = clamp(v_TexCoord, 0.0, 1.0);
    vec4 tex = texture(u_GradTexture, uv);
    o_Color = vec4(tex.rgb, 1.0);
}
`;
  const program = preprocessProgram_GLSL(renderCache.device.queryVendorInfo(), vert, frag);
  return renderCache.createProgramSimple(program);
}
function collectStreakTextures(textureSources, gma) {
  for (const model of gma.nameMap.values()) {
    for (const tevLayer of model.tevLayers) {
      const tex = tevLayer.gxTexture;
      if (tex && tex.data && !textureSources.has(tex.name)) {
        textureSources.set(tex.name, tex);
      }
    }
  }
}
var BallInst = class {
  models;
  modelDepthOffsets;
  modelDisableSpecular;
  visible = false;
  pos = vec318.create();
  rotation = quat2.create();
  scale = vec318.create();
  modelFromBall = mat417.create();
  constructor(modelCache, stageData) {
    const models = [];
    const modelDepthOffsets = [];
    const modelDisableSpecular = [];
    const usesSmb2Models = stageData.gameSource === "smb2" || stageData.gameSource === "mb2ws";
    if (usesSmb2Models) {
      const inside = modelCache.getModel("BALL_INSIDE", 2 /* Common */);
      const outside = modelCache.getModel("BALL_OUTSIDE", 2 /* Common */);
      if (inside) {
        models.push(inside);
        modelDepthOffsets.push(2);
        modelDisableSpecular.push(true);
      }
      if (outside) {
        models.push(outside);
        modelDepthOffsets.push(0);
        modelDisableSpecular.push(false);
      }
    } else {
      const clearInside = modelCache.getModel(17 /* CLEAR_HEMI_INSIDE */, 2 /* Common */);
      const coloredInside = modelCache.getModel(49 /* RED_HEMI_INSIDE */, 2 /* Common */);
      const edge = modelCache.getModel(57 /* SPHERE_EDGE_01_RED */, 2 /* Common */);
      const clearOutside = modelCache.getModel(18 /* CLEAR_HEMI_OUTSIDE */, 2 /* Common */);
      const coloredOutside = modelCache.getModel(50 /* RED_HEMI_OUTSIDE */, 2 /* Common */);
      if (clearInside) {
        models.push(clearInside);
        modelDepthOffsets.push(4);
        modelDisableSpecular.push(true);
      }
      if (coloredInside) {
        models.push(coloredInside);
        modelDepthOffsets.push(3);
        modelDisableSpecular.push(true);
      }
      if (edge) {
        models.push(edge);
        modelDepthOffsets.push(2);
        modelDisableSpecular.push(false);
      }
      if (clearOutside) {
        models.push(clearOutside);
        modelDepthOffsets.push(1);
        modelDisableSpecular.push(false);
      }
      if (coloredOutside) {
        models.push(coloredOutside);
        modelDepthOffsets.push(0);
        modelDisableSpecular.push(false);
      }
    }
    this.models = models;
    this.modelDepthOffsets = modelDepthOffsets;
    this.modelDisableSpecular = modelDisableSpecular;
  }
  setState(state) {
    if (!state) {
      this.visible = false;
      return;
    }
    this.visible = state.visible;
    vec318.set(this.pos, state.pos.x, state.pos.y, state.pos.z);
    quat2.set(this.rotation, state.orientation.x, state.orientation.y, state.orientation.z, state.orientation.w);
    const scale = state.radius / BALL_BASE_RADIUS;
    vec318.set(this.scale, scale, scale, scale);
  }
  prepareToRender(state, ctx) {
    if (!this.visible || this.models.length === 0) return;
    const rp = new RenderParams2();
    rp.reset();
    rp.sort = 0 /* Translucent */;
    rp.lighting = state.lighting;
    mat417.fromRotationTranslationScale(this.modelFromBall, this.rotation, this.pos, this.scale);
    mat417.mul(rp.viewFromModel, ctx.viewerInput.camera.viewMatrix, this.modelFromBall);
    for (let i = 0; i < this.models.length; i++) {
      rp.depthOffset = this.modelDepthOffsets[i] ?? 0;
      rp.disableSpecular = this.modelDisableSpecular[i] ?? false;
      this.models[i].prepareToRender(ctx, rp);
    }
  }
};
var World2 = class {
  constructor(device, renderCache, stageData) {
    this.renderCache = renderCache;
    this.stageData = stageData;
    const lighting = new Lighting(stageData.stageInfo.bgInfo);
    this.worldState = {
      modelCache: new ModelCache(device, renderCache, stageData),
      time: new MkbTime(60),
      // TODO(complexplane): Per-stage time limit
      lighting,
      lightingGroups: new LightingGroups(lighting)
    };
    let goalTimerDigits = null;
    const hasStageNlObj = (stageData.stageNlObj?.size ?? 0) > 0;
    if (stageData.nlObj.size > 0 || hasStageNlObj) {
      this.nlTextureCache = new TextureCache();
      const smallDigits = [];
      const largeDigits = [];
      for (let i = 0; i < 10; i++) {
        smallDigits.push(
          getNlModelInst(
            device,
            renderCache,
            stageData.nlObj,
            this.nlTextureCache,
            29 /* S_LCD_0 */ + i
          )
        );
        largeDigits.push(
          getNlModelInst(
            device,
            renderCache,
            stageData.nlObj,
            this.nlTextureCache,
            19 /* L_LCD_0 */ + i
          )
        );
      }
      goalTimerDigits = { small: smallDigits, large: largeDigits };
      const tapeModelData = getGoalTapeModelData(stageData);
      if (tapeModelData) {
        this.goalTapeModel = new DynamicModelInst(
          device,
          renderCache,
          tapeModelData,
          this.nlTextureCache,
          "goal-tape"
        );
      }
    }
    const usesSmb2Models = stageData.gameSource === "smb2" || stageData.gameSource === "mb2ws";
    const shouldLogNaomi = stageData.stageInfo.id === 92 /* St092_Bonus_Wave */;
    const goalBagModels = {
      closed: usesSmb2Models ? this.worldState.modelCache.getModel("NEW_SCENT_BAG_WHOLE", 2 /* Common */) : this.worldState.modelCache.getModel(32 /* NEW_SCENT_BAG_WHOLE */, 2 /* Common */),
      openA: usesSmb2Models ? this.worldState.modelCache.getModel("NEW_SCENT_BAG_A", 2 /* Common */) : this.worldState.modelCache.getModel(30 /* NEW_SCENT_BAG_A */, 2 /* Common */),
      openB: usesSmb2Models ? this.worldState.modelCache.getModel("NEW_SCENT_BAG_B", 2 /* Common */) : this.worldState.modelCache.getModel(31 /* NEW_SCENT_BAG_B */, 2 /* Common */)
    };
    this.confettiModels = [
      usesSmb2Models ? this.worldState.modelCache.getModel("PAPER_PIECE_DEEPGREEN", 2 /* Common */) : this.worldState.modelCache.getModel(41 /* PAPER_PIECE_DEEPGREEN */, 2 /* Common */),
      usesSmb2Models ? this.worldState.modelCache.getModel("PAPER_PIECE_GREEN", 2 /* Common */) : this.worldState.modelCache.getModel(42 /* PAPER_PIECE_GREEN */, 2 /* Common */),
      usesSmb2Models ? this.worldState.modelCache.getModel("PAPER_PIECE_ORANGE", 2 /* Common */) : this.worldState.modelCache.getModel(43 /* PAPER_PIECE_ORANGE */, 2 /* Common */),
      usesSmb2Models ? this.worldState.modelCache.getModel("PAPER_PIECE_RED", 2 /* Common */) : this.worldState.modelCache.getModel(44 /* PAPER_PIECE_RED */, 2 /* Common */),
      usesSmb2Models ? this.worldState.modelCache.getModel("PAPER_PIECE_YELLOW", 2 /* Common */) : this.worldState.modelCache.getModel(45 /* PAPER_PIECE_YELLOW */, 2 /* Common */)
    ];
    const missingConfetti = this.confettiModels.map((model, index) => model ? null : index).filter((index) => index !== null);
    if (missingConfetti.length > 0) {
      console.log("confetti models missing", missingConfetti);
    }
    this.sparkModel = usesSmb2Models ? this.worldState.modelCache.getModel("CRASH_STAR", 2 /* Common */) : this.worldState.modelCache.getModel(19 /* CRASH_STAR */, 2 /* Common */);
    const isSkyTheme = usesSmb2Models && stageData.stageInfo.bgInfo.fileName.length > 0 && stageData.stageInfo.bgInfo.fileName.startsWith("bg_spa");
    if (usesSmb2Models) {
      const flashName = isSkyTheme ? "circle_white2_half" : "circle_white2";
      this.flashModel = this.worldState.modelCache.getModel(flashName, 2 /* Common */) ?? this.worldState.modelCache.getModel("circle_white2", 2 /* Common */);
    } else {
      this.flashModel = this.worldState.modelCache.getModel(79 /* CRASH_FLASH */, 2 /* Common */);
    }
    this.streakModel = usesSmb2Models ? this.worldState.modelCache.getModel("circle_white2", 2 /* Common */) : this.worldState.modelCache.getModel(91 /* circle_white2 */, 2 /* Common */);
    if (!this.streakModel) {
      this.streakModel = usesSmb2Models ? this.worldState.modelCache.getModel("circle_white", 2 /* Common */) : this.worldState.modelCache.getModel(90 /* circle_white */, 2 /* Common */);
    }
    this.glowModel = usesSmb2Models ? this.worldState.modelCache.getModel("circle_white2", 2 /* Common */) : this.worldState.modelCache.getModel(91 /* circle_white2 */, 2 /* Common */);
    if (!this.glowModel) {
      this.glowModel = usesSmb2Models ? this.worldState.modelCache.getModel("circle_white", 2 /* Common */) : this.worldState.modelCache.getModel(90 /* circle_white */, 2 /* Common */);
    }
    this.initSparkleTexture(device);
    const nlStageModels = hasStageNlObj && this.nlTextureCache && stageData.stageNlObjNameMap ? {
      obj: stageData.stageNlObj,
      nameMap: stageData.stageNlObjNameMap,
      textureCache: this.nlTextureCache,
      nameList: Array.from(stageData.stageNlObjNameMap.keys())
    } : null;
    if (shouldLogNaomi) {
      const stageNames = /* @__PURE__ */ new Set();
      for (const group of stageData.stagedef.animGroups) {
        for (const model of group.animGroupModels) {
          stageNames.add(model.modelName);
        }
      }
      const stageNameList = Array.from(stageNames.values());
      console.log(
        "[bonus-wave] animGroupModels",
        stageNameList.length,
        stageNameList.slice(0, 50)
      );
      if (nlStageModels) {
        console.log(
          "[bonus-wave] nlObj names",
          nlStageModels.nameList.length,
          nlStageModels.nameList.slice(0, 50)
        );
      } else {
        console.log("[bonus-wave] nlObj names: none");
      }
    }
    const resolveStageModel = nlStageModels ? (name) => {
      if (!this.nlStageModelCache) {
        this.nlStageModelCache = /* @__PURE__ */ new Map();
      }
      const cached = this.nlStageModelCache.get(name);
      if (cached) {
        return cached;
      }
      let matchReason = "direct";
      let modelIndex = nlStageModels.nameMap.get(name);
      if (modelIndex === void 0) {
        matchReason = "map";
        modelIndex = nlStageModels.nameMap.get(`${name}_MAP`);
      }
      if (modelIndex === void 0) {
        matchReason = "prefix";
        let bestName = null;
        let bestLen = 0;
        for (const candidate of nlStageModels.nameList) {
          if (!candidate.startsWith(name)) {
            continue;
          }
          if (candidate.length > bestLen) {
            bestName = candidate;
            bestLen = candidate.length;
          }
        }
        if (bestName) {
          modelIndex = nlStageModels.nameMap.get(bestName);
        }
      }
      if (shouldLogNaomi) {
        console.log("[bonus-wave] resolve", name, modelIndex, matchReason);
      }
      if (modelIndex === void 0) {
        return null;
      }
      const modelData = nlStageModels.obj.get(modelIndex);
      if (!modelData) {
        return null;
      }
      const inst = new ModelInst(device, renderCache, modelData, nlStageModels.textureCache);
      this.nlStageModelCache.set(name, inst);
      return inst;
    } : null;
    if (stageData.stageInfo.id === 92 /* St092_Bonus_Wave */ && resolveStageModel) {
      this.bonusWaveModel = resolveStageModel(BONUS_WAVE_MODEL_NAME);
      if (this.bonusWaveModel) {
        this.bonusWaveModel.setMaterialHacks(createBonusWaveMaterialHacks());
        if ("setForceCullMode" in this.bonusWaveModel) {
          this.bonusWaveModel.setForceCullMode(0 /* None */);
        }
      } else if (shouldLogNaomi) {
        console.log("[bonus-wave] bonus model missing", BONUS_WAVE_MODEL_NAME);
      }
    }
    this.animGroups = stageData.stagedef.animGroups.map(
      (_, i) => new AnimGroup(
        this.worldState.modelCache,
        stageData,
        i,
        goalTimerDigits,
        goalBagModels,
        this.goalTapeModel,
        resolveStageModel
      )
    );
    const mirrors = stageData.stagedef.mirrors ?? [];
    for (const mirror of mirrors) {
      this.mirrorModelNames.add(mirror.modelName);
    }
    for (let i = 0; i < this.animGroups.length; i++) {
      const names = this.animGroups[i].agData.mirrorModelNames ?? [];
      for (let j = 0; j < names.length; j++) {
        this.mirrorModelNames.add(names[j]);
      }
    }
    this.bananasByGroup = new Array(this.animGroups.length);
    this.jamabarsByGroup = new Array(this.animGroups.length);
    this.goalBagsByGroup = new Array(this.animGroups.length);
    this.goalTapesByGroup = new Array(this.animGroups.length);
    this.switchesByGroup = new Array(this.animGroups.length);
    for (let i = 0; i < this.animGroups.length; i++) {
      this.bananasByGroup[i] = [];
      this.jamabarsByGroup[i] = [];
      this.goalBagsByGroup[i] = [];
      this.goalTapesByGroup[i] = [];
      this.switchesByGroup[i] = [];
    }
    const bgObjects = [];
    for (const bgObject of stageData.stagedef.bgObjects) {
      if (!(bgObject.flags & 1 /* Visible */)) continue;
      const model = this.worldState.modelCache.getModel(bgObject.modelName, 3 /* StageAndBg */);
      if (model === null) continue;
      bgObjects.push(new BgObjectInst(model, bgObject));
    }
    const fgObjects = [];
    for (const fgObject of stageData.stagedef.fgObjects) {
      if (!(fgObject.flags & 1 /* Visible */)) continue;
      const model = this.worldState.modelCache.getModel(fgObject.modelName, 3 /* StageAndBg */);
      if (model === null) continue;
      fgObjects.push(new BgObjectInst(model, fgObject));
    }
    this.background = new stageData.stageInfo.bgInfo.bgConstructor(this.worldState, bgObjects);
    this.fgObjects = fgObjects;
    this.ball = new BallInst(this.worldState.modelCache, stageData);
    this.shadowProgram = createShadowProgram(renderCache);
    this.shadowMegaState.depthWrite = false;
    this.streakProgram = createStreakProgram(renderCache);
    this.mirrorFlatProgram = createMirrorFlatProgram(renderCache);
    this.mirrorWavyProgram = createMirrorWavyProgram(renderCache);
    this.mirrorDistortProgram = createMirrorDistortProgram(renderCache);
    const streakInputLayoutDesc = {
      vertexBufferDescriptors: [
        { byteStride: STREAK_VERTEX_SIZE, frequency: 1 /* PerVertex */ }
      ],
      vertexAttributeDescriptors: [
        { location: 0, bufferIndex: 0, format: GfxFormat.F32_RGB, bufferByteOffset: 0 },
        { location: 1, bufferIndex: 0, format: GfxFormat.U8_RGBA_NORM, bufferByteOffset: 12 },
        { location: 2, bufferIndex: 0, format: GfxFormat.F32_RG, bufferByteOffset: 16 }
      ],
      indexBufferFormat: null
    };
    this.streakInputLayout = renderCache.createInputLayout(streakInputLayoutDesc);
    const streakSamplerDesc = {
      wrapS: 0 /* Clamp */,
      wrapT: 0 /* Clamp */,
      minFilter: 1 /* Bilinear */,
      magFilter: 1 /* Bilinear */,
      mipFilter: 0 /* Nearest */,
      minLOD: 0,
      maxLOD: 0
    };
    this.streakDefaultTexture.gfxTexture = makeSolidColorTexture2D(device, { r: 1, g: 1, b: 1, a: 1 });
    this.streakDefaultTexture.gfxSampler = device.createSampler(streakSamplerDesc);
    this.streakDefaultTexture.width = 1;
    this.streakDefaultTexture.height = 1;
    this.initSparkleTexture(device);
    const mirrorSamplerDesc = {
      wrapS: 0 /* Clamp */,
      wrapT: 0 /* Clamp */,
      minFilter: 1 /* Bilinear */,
      magFilter: 1 /* Bilinear */,
      mipFilter: 0 /* Nearest */,
      minLOD: 0,
      maxLOD: 0
    };
    this.mirrorColorMapping.gfxSampler = device.createSampler(mirrorSamplerDesc);
    this.mirrorColorMapping.lateBinding = "mirror-color";
    this.mirrorDistortMapping.gfxSampler = device.createSampler(mirrorSamplerDesc);
    this.mirrorDistortMapping.lateBinding = "mirror-distort";
    this.mirrorGradMapping.gfxSampler = device.createSampler(mirrorSamplerDesc);
    const mirrorGradModel = stageData.commonGma.idMap.get(89 /* gb_grad */);
    const mirrorGradTex = mirrorGradModel?.tevLayers[0]?.gxTexture ?? null;
    if (mirrorGradTex) {
      this.worldState.modelCache.fillTextureMappingFromGxTexture(mirrorGradTex, this.mirrorGradMapping);
    } else {
      this.mirrorGradMapping.gfxTexture = makeSolidColorTexture2D(device, { r: 1, g: 1, b: 1, a: 1 });
      this.mirrorGradMapping.width = 1;
      this.mirrorGradMapping.height = 1;
      this.mirrorGradOwnsTexture = true;
    }
    collectStreakTextures(this.streakTextureSources, stageData.stageGma);
    collectStreakTextures(this.streakTextureSources, stageData.bgGma);
    collectStreakTextures(this.streakTextureSources, stageData.commonGma);
    const lightRotX = S16_TO_RADIANS * stageData.stageInfo.bgInfo.infLightRotX;
    const lightRotY = S16_TO_RADIANS * stageData.stageInfo.bgInfo.infLightRotY;
    vec318.set(this.shadowLightDir, 0, 0, -1);
    vec318.rotateX(this.shadowLightDir, this.shadowLightDir, Vec3Zero, lightRotX);
    vec318.rotateY(this.shadowLightDir, this.shadowLightDir, Vec3Zero, lightRotY);
    vec318.normalize(this.shadowLightDir, this.shadowLightDir);
    vec318.set(this.shadowLightUp, 0, 1, 0);
    vec318.rotateX(this.shadowLightUp, this.shadowLightUp, Vec3Zero, lightRotX);
    vec318.rotateY(this.shadowLightUp, this.shadowLightUp, Vec3Zero, lightRotY);
    const shadowModel = stageData.commonGma.idMap.get(90 /* circle_white */);
    const shadowTev = shadowModel?.tevLayers[0];
    if (shadowTev) {
      this.shadowTevLayer = new TevLayerInst(device, renderCache, shadowTev, this.shadowTextureCache);
      this.shadowTevLayer.fillTextureMapping(this.shadowTextureMapping);
    }
  }
  worldState;
  animGroups;
  background;
  fgObjects = [];
  ball;
  ballPos = vec318.create();
  ballRadius = 0;
  ballVisible = false;
  externalTimeFrames = null;
  externalDeltaFrames = 0;
  bananas = null;
  bananasByGroup = [];
  jamabars = null;
  jamabarsByGroup = [];
  goalBags = null;
  goalBagsByGroup = [];
  goalTapes = null;
  goalTapesByGroup = [];
  confetti = null;
  effects = null;
  switches = null;
  switchesByGroup = [];
  stageTilt = null;
  nlTextureCache = null;
  nlStageModelCache = null;
  bonusWaveModel = null;
  bonusWaveLastLogTime = -1;
  confettiModels;
  sparkModel = null;
  flashModel = null;
  streakModel = null;
  glowModel = null;
  sparkleTextureMapping = null;
  sparkleTextureReady = false;
  goalTapeModel = null;
  ballPosForTilt = vec318.create();
  ballPosForTiltPrev = vec318.create();
  hasBallPosForTilt = false;
  hasBallPosForTiltPrev = false;
  shadowProgram;
  shadowTextureMapping = new GXTextureMapping();
  shadowTextureCache = new TextureCache();
  shadowTevLayer = null;
  shadowLightDir = vec318.create();
  shadowLightUp = vec318.create();
  shadowColor = vec43.fromValues(0, 0, 0, 0.4);
  shadowMegaState = makeMegaState(
    setAttachmentStateSimple({ depthCompare: GfxCompareMode.LEqual, depthWrite: false }, {
      blendMode: GfxBlendMode.Add,
      blendSrcFactor: GfxBlendFactor.SrcAlpha,
      blendDstFactor: GfxBlendFactor.OneMinusSrcAlpha,
      channelWriteMask: 7 /* RGB */
    })
  );
  streakProgram;
  streakInputLayout;
  streakDefaultTexture = new GXTextureMapping();
  streakTextureSources = /* @__PURE__ */ new Map();
  streakTextureMappings = /* @__PURE__ */ new Map();
  lastStreakLogTime = -1;
  streakHistory = /* @__PURE__ */ new Map();
  prevViewFromWorld = mat417.create();
  lastViewFromWorld = mat417.create();
  hasPrevViewFromWorld = false;
  streakMegaState = makeMegaState(
    setAttachmentStateSimple({ depthWrite: false, cullMode: 0 /* None */ }, {
      blendMode: GfxBlendMode.Add,
      blendSrcFactor: GfxBlendFactor.SrcAlpha,
      blendDstFactor: GfxBlendFactor.One,
      channelWriteMask: GfxChannelWriteMask.RGBA
    })
  );
  mirrorFlatProgram;
  mirrorWavyProgram;
  mirrorDistortProgram;
  mirrorColorMapping = new GXTextureMapping();
  mirrorDistortMapping = new GXTextureMapping();
  mirrorGradMapping = new GXTextureMapping();
  mirrorGradOwnsTexture = false;
  mirrorModelNames = /* @__PURE__ */ new Set();
  mirrorFlatMegaState = makeMegaState(
    setAttachmentStateSimple({ depthWrite: false }, {
      blendMode: GfxBlendMode.Add,
      blendSrcFactor: GfxBlendFactor.SrcAlpha,
      blendDstFactor: GfxBlendFactor.OneMinusSrcAlpha,
      channelWriteMask: GfxChannelWriteMask.RGBA
    })
  );
  mirrorWavyMegaState = makeMegaState(
    setAttachmentStateSimple({ depthWrite: false }, {
      blendMode: GfxBlendMode.Add,
      blendSrcFactor: GfxBlendFactor.SrcAlpha,
      blendDstFactor: GfxBlendFactor.OneMinusSrcAlpha,
      channelWriteMask: GfxChannelWriteMask.RGBA
    })
  );
  mirrorDistortMegaState = makeMegaState(
    setAttachmentStateSimple({ depthWrite: true, cullMode: 0 /* None */ }, {
      blendMode: GfxBlendMode.Add,
      blendSrcFactor: GfxBlendFactor.One,
      blendDstFactor: GfxBlendFactor.Zero,
      channelWriteMask: GfxChannelWriteMask.RGBA
    })
  );
  initSparkleTexture(device) {
    const mapping = new GXTextureMapping();
    const samplerDesc = {
      wrapS: 0 /* Clamp */,
      wrapT: 0 /* Clamp */,
      minFilter: 1 /* Bilinear */,
      magFilter: 1 /* Bilinear */,
      mipFilter: 0 /* Nearest */,
      minLOD: 0,
      maxLOD: 0
    };
    mapping.gfxSampler = device.createSampler(samplerDesc);
    this.sparkleTextureMapping = mapping;
    if (typeof Image === "undefined") {
      console.warn("[sparkle] Image not available; skipping texture load");
      return;
    }
    const img = new Image();
    img.onload = () => {
      const width = img.naturalWidth || img.width;
      const height = img.naturalHeight || img.height;
      if (!width || !height) {
        return;
      }
      const canvas2 = document.createElement("canvas");
      canvas2.width = width;
      canvas2.height = height;
      const ctx = canvas2.getContext("2d");
      if (!ctx) {
        return;
      }
      ctx.clearRect(0, 0, width, height);
      ctx.drawImage(img, 0, 0, width, height);
      const tex = device.createTexture(makeTextureDescriptor2D(GfxFormat.U8_RGBA_NORM, width, height, 1));
      const imageData = ctx.getImageData(0, 0, width, height);
      const pixels = new Uint8Array(imageData.data.buffer, imageData.data.byteOffset, imageData.data.byteLength);
      device.uploadTextureData(tex, 0, [pixels]);
      if (mapping.gfxTexture) {
        device.destroyTexture(mapping.gfxTexture);
      }
      mapping.gfxTexture = tex;
      mapping.width = width;
      mapping.height = height;
      mapping.flipY = false;
      this.sparkleTextureReady = true;
    };
    img.onerror = () => {
      console.warn("[sparkle] failed to load texture", SPARKLE_TEXTURE_PATH);
    };
    img.src = SPARKLE_TEXTURE_PATH;
  }
  effectDepthState = { depthWrite: false, cullMode: 0 /* None */ };
  glowMegaState = makeMegaState(
    setAttachmentStateSimple({ depthWrite: false, cullMode: 0 /* None */ }, {
      blendMode: GfxBlendMode.Add,
      blendSrcFactor: GfxBlendFactor.SrcAlpha,
      blendDstFactor: GfxBlendFactor.One,
      channelWriteMask: 7 /* RGB */
    })
  );
  flashMegaState = makeMegaState(
    setAttachmentStateSimple({
      depthCompare: GfxCompareMode.LessEqual,
      depthWrite: false,
      cullMode: 0 /* None */,
      polygonOffset: true
    }, {
      blendMode: GfxBlendMode.Add,
      blendSrcFactor: GfxBlendFactor.SrcAlpha,
      blendDstFactor: GfxBlendFactor.One,
      channelWriteMask: 7 /* RGB */
    })
  );
  setExternalTimeFrames(timeFrames, deltaFrames) {
    this.externalTimeFrames = timeFrames;
    this.externalDeltaFrames = deltaFrames;
  }
  setBananaCollectedByAnimGroup(collectedByAnimGroup) {
    for (let i = 0; i < this.animGroups.length; i++) {
      const collected = collectedByAnimGroup[i];
      if (collected) {
        this.animGroups[i].setBananaCollected(collected);
      }
    }
  }
  setBallState(state) {
    this.ball.setState(state);
    if (state) {
      if (this.hasBallPosForTilt) {
        vec318.copy(this.ballPosForTiltPrev, this.ballPosForTilt);
        this.hasBallPosForTiltPrev = true;
      }
      this.ballVisible = state.visible;
      this.ballRadius = state.radius;
      vec318.set(this.ballPos, state.pos.x, state.pos.y, state.pos.z);
      vec318.set(this.ballPosForTilt, state.pos.x, state.pos.y, state.pos.z);
      this.hasBallPosForTilt = true;
    } else {
      this.hasBallPosForTilt = false;
      this.hasBallPosForTiltPrev = false;
      this.ballVisible = false;
      this.ballRadius = 0;
    }
  }
  update(viewerInput2) {
    if (this.externalTimeFrames !== null) {
      this.worldState.time.overrideTimeFrames(this.externalTimeFrames, this.externalDeltaFrames);
    } else {
      this.worldState.time.updateDeltaTimeSeconds(viewerInput2.deltaTime / 1e3);
    }
    if (this.hasPrevViewFromWorld) {
      mat417.copy(this.prevViewFromWorld, this.lastViewFromWorld);
    } else {
      mat417.copy(this.prevViewFromWorld, viewerInput2.camera.viewMatrix);
      this.hasPrevViewFromWorld = true;
    }
    mat417.copy(this.lastViewFromWorld, viewerInput2.camera.viewMatrix);
    for (let i = 0; i < this.animGroups.length; i++) {
      this.animGroups[i].update(this.worldState);
    }
    this.background.update(this.worldState);
    for (let i = 0; i < this.fgObjects.length; i++) {
      this.fgObjects[i].update(this.worldState);
    }
    this.worldState.lightingGroups.update(viewerInput2);
  }
  prepareToRender(ctx) {
    const bgOpaqueInstList = ctx.bgOpaqueInstList ?? ctx.opaqueInstList;
    const bgTranslucentInstList = ctx.bgTranslucentInstList ?? ctx.translucentInstList;
    const stageCtx = ctx.forceAlphaWrite ? ctx : {
      ...ctx,
      forceAlphaWrite: true
    };
    const bgCtx = bgOpaqueInstList === ctx.opaqueInstList && bgTranslucentInstList === ctx.translucentInstList ? ctx : {
      ...ctx,
      opaqueInstList: bgOpaqueInstList,
      translucentInstList: bgTranslucentInstList
    };
    const viewFromWorld = ctx.viewerInput.camera.viewMatrix;
    const viewFromWorldTilted = ctx.skipStageTilt ? viewFromWorld : this.getTiltedViewMatrix(viewFromWorld, scratchTiltedView);
    const viewFromWorldPrev = this.hasPrevViewFromWorld ? ctx.skipStageTilt ? this.prevViewFromWorld : this.getTiltedViewMatrix(
      this.prevViewFromWorld,
      scratchTiltedViewPrev,
      this.hasBallPosForTiltPrev ? this.ballPosForTiltPrev : this.ballPosForTilt
    ) : viewFromWorldTilted;
    const tiltParams = this.stageTilt && this.hasBallPosForTilt ? {
      rotX: this.stageTilt.xrot * STAGE_TILT_SCALE * S16_TO_RADIANS,
      rotZ: this.stageTilt.zrot * STAGE_TILT_SCALE * S16_TO_RADIANS,
      pivot: this.ballPosForTilt
    } : null;
    const bananasByGroup = this.bananas ? this.bananasByGroup : null;
    if (bananasByGroup) {
      for (let i = 0; i < bananasByGroup.length; i++) {
        bananasByGroup[i].length = 0;
      }
      for (const banana of this.bananas ?? []) {
        const group = banana.animGroupId;
        if (group >= 0 && group < bananasByGroup.length) {
          bananasByGroup[group].push(banana);
        }
      }
    }
    const jamabarsByGroup = this.jamabars ? this.jamabarsByGroup : null;
    if (jamabarsByGroup) {
      for (let i = 0; i < jamabarsByGroup.length; i++) {
        jamabarsByGroup[i].length = 0;
      }
      for (const jamabar of this.jamabars ?? []) {
        const group = jamabar.animGroupId;
        if (group >= 0 && group < jamabarsByGroup.length) {
          jamabarsByGroup[group].push(jamabar);
        }
      }
    }
    const goalBagsByGroup = this.goalBags ? this.goalBagsByGroup : null;
    if (goalBagsByGroup) {
      for (let i = 0; i < goalBagsByGroup.length; i++) {
        goalBagsByGroup[i].length = 0;
      }
      for (const bag of this.goalBags ?? []) {
        const group = bag.animGroupId;
        if (group >= 0 && group < goalBagsByGroup.length) {
          goalBagsByGroup[group].push(bag);
        }
      }
    }
    const goalTapesByGroup = this.goalTapes ? this.goalTapesByGroup : null;
    if (goalTapesByGroup) {
      for (let i = 0; i < goalTapesByGroup.length; i++) {
        goalTapesByGroup[i].length = 0;
      }
      for (const tape of this.goalTapes ?? []) {
        const group = tape.animGroupId;
        if (group >= 0 && group < goalTapesByGroup.length) {
          goalTapesByGroup[group].push(tape);
        }
      }
    }
    const switchesByGroup = this.switches ? this.switchesByGroup : null;
    if (switchesByGroup) {
      for (let i = 0; i < switchesByGroup.length; i++) {
        switchesByGroup[i].length = 0;
      }
      for (const sw of this.switches ?? []) {
        const group = sw.animGroupId;
        if (group >= 0 && group < switchesByGroup.length) {
          switchesByGroup[group].push(sw);
        }
      }
    }
    for (let i = 0; i < this.animGroups.length; i++) {
      this.animGroups[i].prepareToRender(
        this.worldState,
        stageCtx,
        bananasByGroup?.[i],
        jamabarsByGroup?.[i],
        goalBagsByGroup?.[i],
        goalTapesByGroup?.[i],
        switchesByGroup?.[i],
        viewFromWorldTilted,
        viewFromWorld,
        tiltParams,
        ctx.skipMirrorModels ? this.mirrorModelNames : void 0
      );
    }
    if (this.bonusWaveModel) {
      const rp = scratchRenderParams4;
      rp.reset();
      rp.lighting = this.worldState.lighting;
      mat417.copy(rp.viewFromModel, viewFromWorldTilted);
      this.bonusWaveModel.prepareToRender(stageCtx, rp);
    }
    this.drawProjectedShadow(stageCtx, viewFromWorldTilted);
    this.drawConfetti(stageCtx, viewFromWorldTilted);
    if (!ctx.mirrorCapture) {
      this.drawEffects(stageCtx, viewFromWorldTilted, viewFromWorldPrev);
    }
    for (let i = 0; i < this.fgObjects.length; i++) {
      this.fgObjects[i].prepareToRenderWithViewMatrix(this.worldState, stageCtx, viewFromWorldTilted);
    }
    this.background.prepareToRender(this.worldState, bgCtx);
    this.ball.prepareToRender(this.worldState, stageCtx);
  }
  getMirrorMode() {
    if (this.stageData.stageInfo.id === 92 /* St092_Bonus_Wave */ && this.bonusWaveModel) {
      return "wavy";
    }
    const mirrors = this.stageData.stagedef.mirrors ?? [];
    const hasMirrors = mirrors.length > 0 || this.stageData.stageInfo.id === 102 /* St102_Hitter */ || this.stageData.stageInfo.id === 103 /* St103_Av_Logo */;
    return hasMirrors ? "flat" : "none";
  }
  getMirrorPlaneMatrix(out, cameraWorldMatrix) {
    const stageId = this.stageData.stageInfo.id;
    mat417.identity(out);
    if (stageId === 92 /* St092_Bonus_Wave */) {
      mat417.fromTranslation(out, [0, WAVY_MIRROR_PLANE_Y, 0]);
      return true;
    }
    if (stageId === 103 /* St103_Av_Logo */) {
      if (this.animGroups.length > 1) {
        mat417.copy(out, this.animGroups[1].getWorldFromAg());
        return true;
      }
      return false;
    }
    if (stageId === 110 /* St110_Curl_Pipe */) {
      const cameraPos = scratchMirrorVec3a;
      mat417.getTranslation(cameraPos, cameraWorldMatrix);
      const mirrorY = cameraPos[1] >= -9 ? -9 : -43;
      mat417.fromTranslation(out, [0, mirrorY, 0]);
      return true;
    }
    if (stageId === 48 /* St048_Tracks */ || stageId === 102 /* St102_Hitter */) {
      return true;
    }
    const mirrors = this.stageData.stagedef.mirrors ?? [];
    const mirrorEntry = mirrors[0];
    if (!mirrorEntry) {
      return false;
    }
    const mirrorModel = this.worldState.modelCache.getModel(mirrorEntry.modelName, 3 /* StageAndBg */);
    if (!mirrorModel) {
      return false;
    }
    mat417.fromTranslation(out, [0, mirrorModel.modelData.boundSphereCenter[1], 0]);
    return true;
  }
  prepareToRenderMirrors(ctx, viewFromWorld, mirrorClipFromWorld, mirrorAlpha, distortClipFromWorld, indTexMtx0, indTexMtx1) {
    const viewFromWorldTilted = this.getTiltedViewMatrix(viewFromWorld, scratchMirrorMat4e);
    const worldFromView = scratchMirrorMat4a;
    mat417.invert(worldFromView, viewFromWorldTilted);
    if (distortClipFromWorld && indTexMtx0 && indTexMtx1) {
      const configureRenderInst2 = (renderInst, renderParams) => {
        renderInst.setGfxProgram(this.mirrorWavyProgram);
        renderInst.setMegaStateFlags(this.mirrorWavyMegaState);
        renderInst.setSamplerBindingsFromTextureMappings([this.mirrorColorMapping, this.mirrorDistortMapping]);
        const worldFromModel = scratchMirrorMat4b;
        const mirrorClipFromModel = scratchMirrorMat4c;
        const distortClipFromModel = scratchMirrorMat4d;
        mat417.mul(worldFromModel, worldFromView, renderParams.viewFromModel);
        mat417.mul(mirrorClipFromModel, mirrorClipFromWorld, worldFromModel);
        mat417.mul(distortClipFromModel, distortClipFromWorld, worldFromModel);
        const d = renderInst.allocateUniformBufferF32(MIRROR_WAVY_UBO_INDEX, MIRROR_WAVY_UBO_WORDS);
        fillMatrix4x4(d, 0, renderParams.viewFromModel);
        fillMatrix4x4(d, 16, mirrorClipFromModel);
        fillMatrix4x4(d, 32, distortClipFromModel);
        fillVec4(d, 48, mirrorAlpha, 0, 0, 0);
        fillVec4(d, 52, indTexMtx0[0], indTexMtx0[1], indTexMtx0[2], 0);
        fillVec4(d, 56, indTexMtx1[0], indTexMtx1[1], indTexMtx1[2], 0);
      };
      if (this.bonusWaveModel) {
        const rp = scratchRenderParams4;
        rp.reset();
        rp.sort = 2 /* None */;
        mat417.copy(rp.viewFromModel, viewFromWorldTilted);
        this.bonusWaveModel.prepareToRenderCustom?.(ctx, rp, configureRenderInst2);
      }
      return;
    }
    const configureRenderInst = (renderInst, renderParams) => {
      renderInst.setGfxProgram(this.mirrorFlatProgram);
      renderInst.setMegaStateFlags(this.mirrorFlatMegaState);
      renderInst.setSamplerBindingsFromTextureMappings([this.mirrorColorMapping]);
      const worldFromModel = scratchMirrorMat4b;
      const mirrorClipFromModel = scratchMirrorMat4c;
      mat417.mul(worldFromModel, worldFromView, renderParams.viewFromModel);
      mat417.mul(mirrorClipFromModel, mirrorClipFromWorld, worldFromModel);
      const d = renderInst.allocateUniformBufferF32(MIRROR_FLAT_UBO_INDEX, MIRROR_FLAT_UBO_WORDS);
      fillMatrix4x4(d, 0, renderParams.viewFromModel);
      fillMatrix4x4(d, 16, mirrorClipFromModel);
      fillVec4(d, 32, mirrorAlpha, 0, 0, 0);
    };
    for (let i = 0; i < this.animGroups.length; i++) {
      this.animGroups[i].prepareToRenderMirrors(this.worldState, ctx, viewFromWorldTilted, configureRenderInst);
    }
    const mirrors = this.stageData.stagedef.mirrors ?? [];
    if (mirrors.length > 0) {
      const mirrorNamesInGroups = /* @__PURE__ */ new Set();
      for (let i = 0; i < this.animGroups.length; i++) {
        const names = this.animGroups[i].agData.mirrorModelNames ?? [];
        for (let j = 0; j < names.length; j++) {
          mirrorNamesInGroups.add(names[j]);
        }
      }
      const rp = scratchRenderParams4;
      rp.reset();
      rp.sort = 2 /* None */;
      rp.lighting = this.worldState.lighting;
      mat417.copy(rp.viewFromModel, viewFromWorldTilted);
      for (let i = 0; i < mirrors.length; i++) {
        const mirrorEntry = mirrors[i];
        if (mirrorNamesInGroups.has(mirrorEntry.modelName)) {
          continue;
        }
        const mirrorModel = this.worldState.modelCache.getModel(mirrorEntry.modelName, 3 /* StageAndBg */);
        if (!mirrorModel) {
          continue;
        }
        mirrorModel.prepareToRenderCustom?.(ctx, rp, configureRenderInst);
      }
    }
  }
  prepareToRenderWavyDistort(ctx, viewFromWorld) {
    if (!this.bonusWaveModel) {
      return;
    }
    const viewFromWorldTilted = this.getTiltedViewMatrix(viewFromWorld, scratchMirrorMat4e);
    const configureRenderInst = (renderInst, renderParams) => {
      renderInst.setGfxProgram(this.mirrorDistortProgram);
      renderInst.setMegaStateFlags(this.mirrorDistortMegaState);
      renderInst.setSamplerBindingsFromTextureMappings([this.mirrorGradMapping]);
      const d = renderInst.allocateUniformBufferF32(MIRROR_DISTORT_UBO_INDEX, MIRROR_DISTORT_UBO_WORDS);
      fillMatrix4x4(d, 0, renderParams.viewFromModel);
    };
    const rp = scratchRenderParams4;
    rp.reset();
    rp.sort = 2 /* None */;
    mat417.copy(rp.viewFromModel, viewFromWorldTilted);
    this.bonusWaveModel.prepareToRenderCustom?.(ctx, rp, configureRenderInst);
  }
  getClearColor() {
    return this.stageData.stageInfo.bgInfo.clearColor;
  }
  getAnimTimeFrames() {
    return this.worldState.time.getAnimTimeFrames();
  }
  setMaterialHacks(hacks) {
    this.worldState.modelCache.setMaterialHacks(hacks);
  }
  setGoalBags(goalBags) {
    this.goalBags = goalBags;
  }
  setBananas(bananas) {
    this.bananas = bananas;
  }
  setJamabars(jamabars) {
    this.jamabars = jamabars;
  }
  setGoalTapes(goalTapes) {
    this.goalTapes = goalTapes;
  }
  setConfetti(confetti) {
    this.confetti = confetti;
  }
  setEffects(effects) {
    this.effects = effects;
  }
  setSwitches(switches) {
    this.switches = switches;
  }
  setStageTilt(stageTilt) {
    this.stageTilt = stageTilt;
  }
  setAnimGroupTransforms(transforms) {
    if (!transforms) {
      for (let i = 0; i < this.animGroups.length; i++) {
        this.animGroups[i].setExternalTransform(null);
      }
      return;
    }
    for (let i = 0; i < this.animGroups.length; i++) {
      this.animGroups[i].setExternalTransform(transforms[i] ?? null);
    }
  }
  getStreakTextureMapping(textureName) {
    if (!textureName) {
      return this.streakDefaultTexture;
    }
    const cached = this.streakTextureMappings.get(textureName);
    if (cached) {
      return cached;
    }
    const tex = this.streakTextureSources.get(textureName);
    if (!tex) {
      return this.streakDefaultTexture;
    }
    const mapping = new GXTextureMapping();
    this.worldState.modelCache.fillTextureMappingFromGxTexture(tex, mapping);
    if (!mapping.gfxSampler) {
      mapping.gfxSampler = this.streakDefaultTexture.gfxSampler;
    }
    this.streakTextureMappings.set(textureName, mapping);
    return mapping;
  }
  getTiltedViewMatrix(viewFromWorld, out, pivot) {
    if (!this.stageTilt || !this.hasBallPosForTilt) {
      return viewFromWorld;
    }
    const rotX = this.stageTilt.xrot * STAGE_TILT_SCALE * S16_TO_RADIANS;
    const rotZ = this.stageTilt.zrot * STAGE_TILT_SCALE * S16_TO_RADIANS;
    if (rotX === 0 && rotZ === 0) {
      return viewFromWorld;
    }
    const tiltPivot = pivot ?? this.ballPosForTilt;
    mat417.copy(out, viewFromWorld);
    mat417.translate(out, out, tiltPivot);
    mat417.rotateX(out, out, rotX);
    mat417.rotateZ(out, out, rotZ);
    vec318.negate(scratchVec3a9, tiltPivot);
    mat417.translate(out, out, scratchVec3a9);
    return out;
  }
  drawProjectedShadow(ctx, viewFromWorld) {
    if (!this.ballVisible || this.ballRadius <= 0 || !this.shadowTevLayer || !this.shadowTextureMapping.gfxTexture) {
      return;
    }
    const radius = this.ballRadius * SHADOW_RADIUS_SCALE;
    if (radius <= 0) {
      return;
    }
    const lightPos = scratchVec3a9;
    lightPos[0] = this.ballPos[0] + this.shadowLightDir[0] * SHADOW_LIGHT_OFFSET;
    lightPos[1] = this.ballPos[1] + this.shadowLightDir[1] * SHADOW_LIGHT_OFFSET;
    lightPos[2] = this.ballPos[2] + this.shadowLightDir[2] * SHADOW_LIGHT_OFFSET;
    mat417.lookAt(scratchShadowView, lightPos, this.ballPos, this.shadowLightUp);
    mat417.invert(scratchWorldFromView, viewFromWorld);
    mat417.mul(scratchShadowFromView, scratchShadowView, scratchWorldFromView);
    vec318.transformMat4(scratchBallLightPos, this.ballPos, scratchShadowView);
    const configureRenderInst = (renderInst, renderParams) => {
      renderInst.setBindingLayouts(gxBindingLayouts);
      fillSceneParamsDataOnTemplate(renderInst, ctx.viewerInput, 0, this.worldState.time.getAnimTimeFrames());
      renderInst.setGfxProgram(this.shadowProgram);
      renderInst.setMegaStateFlags(this.shadowMegaState);
      renderInst.setSamplerBindingsFromTextureMappings([this.shadowTextureMapping]);
      const d = renderInst.allocateUniformBufferF32(SHADOW_UBO_INDEX, SHADOW_PARAMS_WORDS);
      fillMatrix4x4(d, 0, renderParams.viewFromModel);
      fillMatrix4x4(d, 16, scratchShadowFromView);
      fillVec4(d, 32, this.shadowColor[0], this.shadowColor[1], this.shadowColor[2], this.shadowColor[3]);
      fillVec4(d, 36, radius, scratchBallLightPos[2], SHADOW_FADE_SCALE, 0);
    };
    for (let i = 0; i < this.animGroups.length; i++) {
      this.animGroups[i].prepareToRenderShadow(ctx, viewFromWorld, configureRenderInst);
    }
  }
  drawConfetti(ctx, viewFromWorld) {
    if (!this.confetti || this.confetti.length === 0) {
      return;
    }
    const rp = scratchRenderParams4;
    rp.reset();
    rp.sort = 2 /* None */;
    rp.lighting = this.worldState.lighting;
    for (const frag of this.confetti) {
      const model = this.confettiModels[frag.modelIndex];
      if (!model) {
        continue;
      }
      mat417.translate(rp.viewFromModel, viewFromWorld, [
        frag.pos.x,
        frag.pos.y,
        frag.pos.z
      ]);
      mat417.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * frag.rotY);
      mat417.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * frag.rotX);
      mat417.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * frag.rotZ);
      if (frag.scale !== 1) {
        mat417.scale(rp.viewFromModel, rp.viewFromModel, [frag.scale, frag.scale, frag.scale]);
      }
      model.prepareToRender(ctx, rp);
    }
  }
  drawEffects(ctx, viewFromWorld, viewFromWorldPrev) {
    if (!this.effects || this.effects.length === 0) {
      return;
    }
    const cameraPos = scratchVec3g;
    mat417.getTranslation(cameraPos, ctx.viewerInput.camera.worldMatrix);
    const rp = scratchRenderParams4;
    rp.reset();
    rp.sort = 0 /* Translucent */;
    rp.lighting = this.worldState.lighting;
    const glowModel = this.glowModel;
    const applyEffectDepthBias = (pos, normal, scale, out) => {
      out[0] = pos.x;
      out[1] = pos.y;
      out[2] = pos.z;
      const scaleMul = scale && Number.isFinite(scale) ? Math.max(1, scale) : 1;
      const bias = Math.min(EFFECT_DEPTH_BIAS_MAX, EFFECT_DEPTH_BIAS * scaleMul);
      if (!(bias > 0)) {
        return;
      }
      if (normal && Number.isFinite(normal.x) && Number.isFinite(normal.y) && Number.isFinite(normal.z)) {
        const len = Math.hypot(normal.x, normal.y, normal.z);
        if (len > 1e-4) {
          const invLen = bias / len;
          out[0] += normal.x * invLen;
          out[1] += normal.y * invLen;
          out[2] += normal.z * invLen;
          return;
        }
      }
      const dirX = cameraPos[0] - pos.x;
      const dirY = cameraPos[1] - pos.y;
      const dirZ = cameraPos[2] - pos.z;
      const dirLen = Math.hypot(dirX, dirY, dirZ);
      if (dirLen > 1e-4) {
        const invLen = bias / dirLen;
        out[0] += dirX * invLen;
        out[1] += dirY * invLen;
        out[2] += dirZ * invLen;
      }
    };
    const drawGlow = (effect, scaleMul = 1) => {
      if (!glowModel || !effect.glowPos || effect.glowDist === void 0) {
        return;
      }
      const dist = effect.glowDist;
      if (dist <= 0 || dist >= 0.5) {
        return;
      }
      const glowScale = (0.25 - dist * 0.5) * effect.scale * scaleMul;
      if (glowScale <= 0) {
        return;
      }
      const colorScale2 = 0.5 / (dist * 2 + 1);
      rp.alpha = 1;
      rp.colorMul.r = (effect.colorR ?? 1) * colorScale2;
      rp.colorMul.g = (effect.colorG ?? 1) * colorScale2;
      rp.colorMul.b = (effect.colorB ?? 1) * colorScale2;
      rp.colorMul.a = 1;
      rp.megaStateFlags = this.glowMegaState;
      const glowPos = scratchVec3h;
      applyEffectDepthBias(effect.glowPos, effect.normal, effect.scale, glowPos);
      mat417.translate(rp.viewFromModel, viewFromWorld, glowPos);
      if (effect.glowRotY !== void 0) {
        mat417.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * effect.glowRotY);
      }
      if (effect.glowRotX !== void 0) {
        mat417.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * effect.glowRotX);
      }
      mat417.scale(rp.viewFromModel, rp.viewFromModel, [glowScale, glowScale, glowScale]);
      glowModel.prepareToRender(ctx, rp);
      rp.megaStateFlags = void 0;
      rp.colorMul.r = 1;
      rp.colorMul.g = 1;
      rp.colorMul.b = 1;
      rp.colorMul.a = 1;
    };
    const drawFlash = (effect) => {
      const flashPos = effect.glowPos ?? effect.pos;
      const flashRotX = effect.glowRotX ?? effect.rotX;
      const flashRotY = effect.glowRotY ?? effect.rotY;
      if (flashRotX === void 0 || flashRotY === void 0) {
        return;
      }
      const intensity = effect.alpha;
      if (intensity <= 1 / 255) {
        return;
      }
      const scale = effect.scale * 2.5;
      rp.alpha = 1;
      const flashIntensity = Math.min(1, intensity * 0.5);
      rp.colorMul.r = flashIntensity;
      rp.colorMul.g = flashIntensity;
      rp.colorMul.b = flashIntensity * 0.8;
      rp.colorMul.a = 1;
      rp.megaStateFlags = this.flashMegaState;
      const biasedFlashPos = scratchVec3h;
      applyEffectDepthBias(flashPos, effect.normal, effect.scale, biasedFlashPos);
      mat417.translate(rp.viewFromModel, viewFromWorld, biasedFlashPos);
      mat417.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * flashRotY);
      mat417.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * flashRotX);
      mat417.scale(rp.viewFromModel, rp.viewFromModel, [scale, scale, scale]);
      glowModel?.prepareToRender(ctx, rp);
      rp.megaStateFlags = void 0;
      rp.colorMul.r = 1;
      rp.colorMul.g = 1;
      rp.colorMul.b = 1;
      rp.colorMul.a = 1;
    };
    const drawSparkleSprite = (effect) => {
      if (!this.sparkleTextureReady || !this.sparkleTextureMapping) {
        return;
      }
      const mapping = this.sparkleTextureMapping;
      if (!mapping.gfxTexture || !mapping.gfxSampler) {
        return;
      }
      const posView = scratchVec3d4;
      scratchVec3d4[0] = effect.pos.x;
      scratchVec3d4[1] = effect.pos.y;
      scratchVec3d4[2] = effect.pos.z;
      transformVec3Mat4w1(posView, viewFromWorld, scratchVec3d4);
      const size = effect.scale;
      if (!(size > 0)) {
        return;
      }
      const x = posView[0];
      const y = posView[1];
      const z = posView[2];
      const r = Math.round(Math.min(1, Math.max(0, effect.colorR ?? 1)) * 255);
      const g = Math.round(Math.min(1, Math.max(0, effect.colorG ?? 1)) * 255);
      const b = Math.round(Math.min(1, Math.max(0, effect.colorB ?? 1)) * 255);
      const a = Math.round(Math.min(1, Math.max(0, effect.alpha)) * 255);
      if (a <= 0) {
        return;
      }
      const left = x - size;
      const right = x + size;
      const top = y + size;
      const bottom = y - size;
      const vertexData = new ArrayBuffer(STREAK_VERTEX_SIZE * 6);
      const view = new DataView(vertexData);
      const writeVertex = (baseOffset, vx, vy, vz, u, v) => {
        view.setFloat32(baseOffset + 0, vx, true);
        view.setFloat32(baseOffset + 4, vy, true);
        view.setFloat32(baseOffset + 8, vz, true);
        view.setUint8(baseOffset + 12, r);
        view.setUint8(baseOffset + 13, g);
        view.setUint8(baseOffset + 14, b);
        view.setUint8(baseOffset + 15, a);
        view.setFloat32(baseOffset + 16, u, true);
        view.setFloat32(baseOffset + 20, v, true);
      };
      writeVertex(0, left, top, z, 0, 0);
      writeVertex(STREAK_VERTEX_SIZE, right, top, z, 1, 0);
      writeVertex(STREAK_VERTEX_SIZE * 2, left, bottom, z, 0, 1);
      writeVertex(STREAK_VERTEX_SIZE * 3, left, bottom, z, 0, 1);
      writeVertex(STREAK_VERTEX_SIZE * 4, right, top, z, 1, 0);
      writeVertex(STREAK_VERTEX_SIZE * 5, right, bottom, z, 1, 1);
      const vbuf = ctx.renderInstManager.gfxRenderCache.dynamicBufferCache.allocateData(
        2 /* Vertex */,
        new Uint8Array(vertexData)
      );
      const renderInst = ctx.renderInstManager.newRenderInst();
      renderInst.setBindingLayouts(gxBindingLayouts);
      fillSceneParamsDataOnTemplate(renderInst, ctx.viewerInput, 0, this.worldState.time.getAnimTimeFrames());
      renderInst.setGfxProgram(this.streakProgram);
      renderInst.setPrimitiveTopology(0 /* Triangles */);
      renderInst.setMegaStateFlags(this.streakMegaState);
      renderInst.setVertexInput(this.streakInputLayout, [vbuf], null);
      renderInst.setDrawCount(6);
      renderInst.setSamplerBindingsFromTextureMappings([mapping]);
      renderInst.setAllowSkippingIfPipelineNotReady(false);
      renderInst.sortKey = -Math.hypot(x, y, z);
      ctx.translucentInstList.submitRenderInst(renderInst);
    };
    let streakCount = 0;
    let starCount = 0;
    let flashCount = 0;
    let sparkleCount = 0;
    let streakSample = null;
    let streakNaNCount = 0;
    let streakNaNSample = null;
    const streakSeen = /* @__PURE__ */ new Set();
    for (const effect of this.effects) {
      rp.alpha = effect.alpha;
      if (effect.kind === "streak") {
        streakCount += 1;
        streakSeen.add(effect.id);
        const start = scratchVec3a9;
        const end = scratchVec3b7;
        scratchVec3d4[0] = effect.pos.x;
        scratchVec3d4[1] = effect.pos.y;
        scratchVec3d4[2] = effect.pos.z;
        transformVec3Mat4w1(end, viewFromWorld, scratchVec3d4);
        const nowMs2 = ctx.viewerInput.time;
        const persistenceMs = 33.4;
        const history = this.streakHistory.get(effect.id);
        if (!history) {
          const prev = vec318.clone(end);
          const older = vec318.clone(end);
          this.streakHistory.set(effect.id, { older, prev, lastUpdate: nowMs2 });
          vec318.copy(start, end);
        } else {
          let lastUpdate = history.lastUpdate;
          if (nowMs2 > lastUpdate + persistenceMs) {
            const steps = Math.min(4, Math.floor((nowMs2 - lastUpdate) / persistenceMs));
            for (let i = 0; i < steps; i += 1) {
              vec318.copy(history.older, history.prev);
              vec318.copy(history.prev, end);
              lastUpdate += persistenceMs;
            }
            history.lastUpdate = lastUpdate;
          }
          const ratio = Math.min(1, Math.max(0, (nowMs2 - history.lastUpdate) / persistenceMs));
          start[0] = history.older[0] + (history.prev[0] - history.older[0]) * ratio;
          start[1] = history.older[1] + (history.prev[1] - history.older[1]) * ratio;
          start[2] = history.older[2] + (history.prev[2] - history.older[2]) * ratio;
        }
        const fov = ctx.viewerInput.camera.fovY;
        const tanHalfFov = Math.tan(fov * 0.5);
        const tailX = start[0];
        const tailY = start[1];
        const tailZ = start[2];
        if (end[2] >= -1e-3 || tailZ >= -1e-3) {
          continue;
        }
        const backbufferHeight = Math.max(1, ctx.viewerInput.backbufferHeight);
        const endInvZ = 1 / Math.abs(end[2]);
        const tailInvZ = 1 / Math.abs(tailZ);
        const endScreenX = end[0] * endInvZ;
        const endScreenY = end[1] * endInvZ;
        let tailScreenX = tailX * tailInvZ;
        let tailScreenY = tailY * tailInvZ;
        let dirX = endScreenX - tailScreenX;
        let dirY = endScreenY - tailScreenY;
        let dirLen = Math.hypot(dirX, dirY);
        const lifeRatio = Math.min(1, Math.max(0, effect.lifeRatio ?? effect.alpha));
        let thicknessPx = 27;
        if (end[2] <= 0) {
          if (end[2] <= -3) {
            thicknessPx = 9;
          } else {
            thicknessPx = (end[2] + 3 + 1.5) * 6;
          }
        }
        const depth = Math.max(1e-3, Math.max(-end[2], -tailZ));
        const pixelScale = 2 / backbufferHeight * (depth / tanHalfFov);
        const resScale = backbufferHeight / 1200;
        const spriteSize = Math.max(
          1e-5,
          thicknessPx * pixelScale * effect.scale * 0.12 * lifeRatio * resScale
        );
        if (dirLen * 100 < spriteSize * 2) {
          if (dirLen < 1e-4) {
            dirLen = 1;
            dirX = 1;
            dirY = 0;
          }
          const invDirLen2 = 1 / dirLen;
          const screenDirX = dirX * invDirLen2;
          const screenDirY = dirY * invDirLen2;
          tailScreenX = endScreenX - screenDirX * spriteSize * 0.02;
          tailScreenY = endScreenY - screenDirY * spriteSize * 0.02;
          dirX = endScreenX - tailScreenX;
          dirY = endScreenY - tailScreenY;
          dirLen = Math.hypot(dirX, dirY);
        }
        if (dirLen < 1e-4) {
          continue;
        }
        const invDirLen = 1 / dirLen;
        const rightX = dirY * invDirLen;
        const rightY = -dirX * invDirLen;
        const trueDist = Math.hypot(dirX, dirY) * Math.max(Math.abs(tailZ), Math.abs(end[2]));
        const clampDist = Math.min(trueDist, spriteSize);
        const sizeFixX = -dirX * invDirLen * (spriteSize - clampDist);
        const sizeFixY = -dirY * invDirLen * (spriteSize - clampDist);
        const posFixX = dirX * invDirLen * (spriteSize - clampDist) * 0.5;
        const posFixY = dirY * invDirLen * (spriteSize - clampDist) * 0.5;
        const tailBaseX = tailX + sizeFixX + posFixX;
        const tailBaseY = tailY + sizeFixY + posFixY;
        const headBaseX = end[0] + posFixX;
        const headBaseY = end[1] + posFixY;
        const head0 = scratchVec3c5;
        const head1 = scratchVec3d4;
        const tail0 = scratchVec3e4;
        const tail1 = scratchVec3f;
        head0[0] = headBaseX + rightX * spriteSize;
        head0[1] = headBaseY + rightY * spriteSize;
        head0[2] = end[2];
        head1[0] = headBaseX - rightX * spriteSize;
        head1[1] = headBaseY - rightY * spriteSize;
        head1[2] = end[2];
        tail0[0] = tailBaseX + rightX * spriteSize;
        tail0[1] = tailBaseY + rightY * spriteSize;
        tail0[2] = tailZ;
        tail1[0] = tailBaseX - rightX * spriteSize;
        tail1[1] = tailBaseY - rightY * spriteSize;
        tail1[2] = tailZ;
        const headZ = end[2];
        if (!Number.isFinite(headZ) || !Number.isFinite(tailZ)) {
          streakNaNCount += 1;
          if (!streakNaNSample) {
            streakNaNSample = {
              pos: `${effect.pos.x},${effect.pos.y},${effect.pos.z}`,
              prev: `${effect.pos.x},${effect.pos.y},${effect.pos.z}`
            };
          }
        } else if (!streakSample) {
          const reprojErr = 0;
          streakSample = {
            headZ,
            tailZ,
            pos: { x: effect.pos.x, y: effect.pos.y, z: effect.pos.z },
            prev: { x: effect.pos.x, y: effect.pos.y, z: effect.pos.z },
            reprojErr
          };
        }
        const baseR = Math.min(1, Math.max(0, effect.colorR ?? 1));
        const baseG = Math.min(1, Math.max(0, effect.colorG ?? 1));
        const baseB = Math.min(1, Math.max(0, effect.colorB ?? 1));
        const headR = Math.round(baseR * 255);
        const headG = Math.round(baseG * 255);
        const headB = Math.round(baseB * 255);
        const tailR = Math.round(baseR * 96);
        const tailG = Math.round(baseG * 88);
        const tailB = Math.round(baseB * 8);
        const alpha = Math.round(Math.min(1, Math.max(0, effect.alpha)) * 255);
        const vertexData = new ArrayBuffer(STREAK_VERTEX_SIZE * 6);
        const view = new DataView(vertexData);
        const writeVertex = (baseOffset, x, y, z, r, g, b, a, u, v) => {
          view.setFloat32(baseOffset + 0, x, true);
          view.setFloat32(baseOffset + 4, y, true);
          view.setFloat32(baseOffset + 8, z, true);
          view.setUint8(baseOffset + 12, r);
          view.setUint8(baseOffset + 13, g);
          view.setUint8(baseOffset + 14, b);
          view.setUint8(baseOffset + 15, a);
          view.setFloat32(baseOffset + 16, u, true);
          view.setFloat32(baseOffset + 20, v, true);
        };
        writeVertex(0, head0[0], head0[1], head0[2], headR, headG, headB, alpha, 1, 0);
        writeVertex(STREAK_VERTEX_SIZE, head1[0], head1[1], head1[2], headR, headG, headB, alpha, 1, 1);
        writeVertex(STREAK_VERTEX_SIZE * 2, tail0[0], tail0[1], tail0[2], tailR, tailG, tailB, alpha, 0, 0);
        writeVertex(STREAK_VERTEX_SIZE * 3, tail0[0], tail0[1], tail0[2], tailR, tailG, tailB, alpha, 0, 0);
        writeVertex(STREAK_VERTEX_SIZE * 4, head1[0], head1[1], head1[2], headR, headG, headB, alpha, 1, 1);
        writeVertex(STREAK_VERTEX_SIZE * 5, tail1[0], tail1[1], tail1[2], tailR, tailG, tailB, alpha, 0, 1);
        const vbuf = ctx.renderInstManager.gfxRenderCache.dynamicBufferCache.allocateData(
          2 /* Vertex */,
          new Uint8Array(vertexData)
        );
        const renderInst = ctx.renderInstManager.newRenderInst();
        renderInst.setBindingLayouts(gxBindingLayouts);
        fillSceneParamsDataOnTemplate(renderInst, ctx.viewerInput, 0, this.worldState.time.getAnimTimeFrames());
        renderInst.setGfxProgram(this.streakProgram);
        renderInst.setPrimitiveTopology(0 /* Triangles */);
        renderInst.setMegaStateFlags(this.streakMegaState);
        renderInst.setVertexInput(this.streakInputLayout, [vbuf], null);
        renderInst.setDrawCount(6);
        renderInst.setSamplerBindingsFromTextureMappings([this.getStreakTextureMapping(effect.textureName)]);
        renderInst.setAllowSkippingIfPipelineNotReady(false);
        renderInst.sortKey = -Math.hypot(end[0], end[1], end[2]);
        ctx.translucentInstList.submitRenderInst(renderInst);
        drawGlow(effect);
        continue;
      }
      if (effect.kind === "sparkle") {
        sparkleCount += 1;
        drawSparkleSprite(effect);
        continue;
      }
      if (effect.kind === "flash") {
        flashCount += 1;
        drawFlash(effect);
        continue;
      } else {
        starCount += 1;
      }
      const model = this.sparkModel;
      if (!model) {
        continue;
      }
      const starPos = scratchVec3h;
      applyEffectDepthBias(effect.pos, effect.normal, effect.scale, starPos);
      mat417.translate(rp.viewFromModel, viewFromWorld, starPos);
      if (effect.rotY !== void 0) {
        mat417.rotateY(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * effect.rotY);
      }
      if (effect.rotX !== void 0) {
        mat417.rotateX(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * effect.rotX);
      }
      if (effect.rotZ !== void 0) {
        mat417.rotateZ(rp.viewFromModel, rp.viewFromModel, S16_TO_RADIANS * effect.rotZ);
      }
      if (effect.scale !== 1) {
        mat417.scale(rp.viewFromModel, rp.viewFromModel, [effect.scale, effect.scale, effect.scale]);
      }
      model.prepareToRender(ctx, rp);
      if (effect.kind === "star") {
        drawGlow(effect);
      }
    }
    const now = ctx.viewerInput.time;
    if (now - this.lastStreakLogTime > 1e3) {
      console.log(
        "[effects] total=%d streak=%d star=%d flash=%d sparkle=%d nan=%d sample=%s nanSample=%s",
        this.effects.length,
        streakCount,
        starCount,
        flashCount,
        sparkleCount,
        streakNaNCount,
        streakSample ? `${streakSample.headZ.toFixed(2)}/${streakSample.tailZ.toFixed(2)} err=${streakSample.reprojErr.toFixed(5)} pos=${streakSample.pos.x.toFixed(2)},${streakSample.pos.y.toFixed(2)},${streakSample.pos.z.toFixed(2)} prev=${streakSample.prev.x.toFixed(2)},${streakSample.prev.y.toFixed(2)},${streakSample.prev.z.toFixed(2)}` : "n/a",
        streakNaNSample ? `pos=${streakNaNSample.pos} prev=${streakNaNSample.prev}` : "n/a"
      );
      this.lastStreakLogTime = now;
    }
    if (this.streakHistory.size > 0) {
      for (const id of this.streakHistory.keys()) {
        if (!streakSeen.has(id)) {
          this.streakHistory.delete(id);
        }
      }
    }
  }
  destroy(device) {
    this.worldState.modelCache.destroy(device);
    if (this.nlStageModelCache) {
      for (const model of this.nlStageModelCache.values()) {
        model.destroy(device);
      }
      this.nlStageModelCache.clear();
    }
    this.goalTapeModel?.destroy(device);
    this.shadowTextureCache.destroy(device);
    this.nlTextureCache?.destroy(device);
    if (this.streakDefaultTexture.gfxTexture) {
      device.destroyTexture(this.streakDefaultTexture.gfxTexture);
    }
    if (this.streakDefaultTexture.gfxSampler) {
      device.destroySampler(this.streakDefaultTexture.gfxSampler);
    }
    if (this.mirrorColorMapping.gfxSampler) {
      device.destroySampler(this.mirrorColorMapping.gfxSampler);
    }
    if (this.mirrorDistortMapping.gfxSampler) {
      device.destroySampler(this.mirrorDistortMapping.gfxSampler);
    }
    if (this.mirrorGradMapping.gfxSampler) {
      device.destroySampler(this.mirrorGradMapping.gfxSampler);
    }
    if (this.mirrorGradOwnsTexture && this.mirrorGradMapping.gfxTexture) {
      device.destroyTexture(this.mirrorGradMapping.gfxTexture);
    }
    if (this.sparkleTextureMapping?.gfxTexture) {
      device.destroyTexture(this.sparkleTextureMapping.gfxTexture);
    }
    if (this.sparkleTextureMapping?.gfxSampler) {
      device.destroySampler(this.sparkleTextureMapping.gfxSampler);
    }
  }
};

// src/noclip/Render.ts
var scratchMirrorPlaneNormal = vec319.create();
var scratchMirrorPlanePoint = vec319.create();
var scratchMirrorReflection = mat418.create();
var scratchMirrorViewFromWorld = mat418.create();
var scratchMirrorViewFromWorldTilted = mat418.create();
var scratchMirrorWorldFromView = mat418.create();
var scratchMirrorClipFromWorld = mat418.create();
var scratchViewFromWorldTilted = mat418.create();
var scratchDistortClipFromWorld = mat418.create();
var mirrorFlipX = mat418.fromScaling(mat418.create(), [-1, 1, 1]);
var WAVY_MIRROR_ALPHA = 96 / 255;
function computeReflectionMatrix(out, planePoint, planeNormal) {
  vec319.normalize(scratchMirrorPlaneNormal, planeNormal);
  const nx = scratchMirrorPlaneNormal[0];
  const ny = scratchMirrorPlaneNormal[1];
  const nz = scratchMirrorPlaneNormal[2];
  const d = -(nx * planePoint[0] + ny * planePoint[1] + nz * planePoint[2]);
  out[0] = 1 - 2 * nx * nx;
  out[1] = -2 * nx * ny;
  out[2] = -2 * nx * nz;
  out[3] = 0;
  out[4] = -2 * ny * nx;
  out[5] = 1 - 2 * ny * ny;
  out[6] = -2 * ny * nz;
  out[7] = 0;
  out[8] = -2 * nz * nx;
  out[9] = -2 * nz * ny;
  out[10] = 1 - 2 * nz * nz;
  out[11] = 0;
  out[12] = -2 * nx * d;
  out[13] = -2 * ny * d;
  out[14] = -2 * nz * d;
  out[15] = 1;
}
function getMirrorCaptureDimensions(stageData, mirrorMode) {
  if (mirrorMode === "wavy") {
    return { width: 640, height: 224 };
  }
  const bgName = stageData.stageInfo.bgInfo.fileName;
  if (bgName === "bg_snd") {
    return { width: 160, height: 112 };
  }
  if (bgName === "bg_ice") {
    return { width: 320, height: 224 };
  }
  if (bgName === "bg_mst") {
    return stageData.stageInfo.id === 122 /* St122_Fan_Master */ ? { width: 320, height: 224 } : { width: 640, height: 448 };
  }
  if (bgName === "bg_stm") {
    return stageData.stageInfo.id === 89 /* St089_Coffee_Cup */ ? { width: 320, height: 224 } : { width: 640, height: 448 };
  }
  if (bgName === "bg_spa") {
    switch (stageData.stageInfo.id) {
      case 101 /* St101_Blur_Bridge */:
      case 109 /* St109_Factory */:
      case 110 /* St110_Curl_Pipe */:
      case 113 /* St113_Daa_Loo_Maa */:
      case 145 /* St145_Fight_Space */:
        return { width: 320, height: 224 };
      default:
        return { width: 640, height: 448 };
    }
  }
  return { width: 640, height: 448 };
}
var Renderer = class {
  constructor(device, stageData) {
    this.stageData = stageData;
    this.renderHelper = new GXRenderHelperGfx(device);
    this.world = new World2(device, this.renderHelper.renderCache, stageData);
  }
  renderHelper;
  world;
  opaqueInstList = new GfxRenderInstList();
  translucentInstList = new GfxRenderInstList();
  mirrorCaptureOpaqueInstList = new GfxRenderInstList();
  mirrorCaptureTranslucentInstList = new GfxRenderInstList();
  mirrorOverlayInstList = new GfxRenderInstList();
  mirrorDistortInstList = new GfxRenderInstList();
  mirrorCamera = new Camera();
  mirrorMode = "none";
  mirrorCaptureWidth = 0;
  mirrorCaptureHeight = 0;
  mirrorNeedsDistort = false;
  lastExternalTimeFrames = null;
  prepareToRender(device, viewerInput2, opaqueInstList, translucentInstList) {
    this.renderHelper.renderInstManager.reset();
    this.mirrorCaptureOpaqueInstList.reset();
    this.mirrorCaptureTranslucentInstList.reset();
    this.mirrorOverlayInstList.reset();
    this.mirrorDistortInstList.reset();
    this.world.update(viewerInput2);
    viewerInput2.camera.setClipPlanes(0.1);
    this.mirrorMode = this.world.getMirrorMode();
    this.mirrorNeedsDistort = this.mirrorMode === "wavy";
    this.mirrorCaptureWidth = 0;
    this.mirrorCaptureHeight = 0;
    const mirrorPlaneMatrix = scratchMirrorReflection;
    if (this.mirrorMode !== "none") {
      if (!this.world.getMirrorPlaneMatrix(mirrorPlaneMatrix, viewerInput2.camera.worldMatrix)) {
        this.mirrorMode = "none";
        this.mirrorNeedsDistort = false;
      }
    }
    if (this.mirrorMode !== "none") {
      const dims = getMirrorCaptureDimensions(this.stageData, this.mirrorMode);
      const mirrorAspect = viewerInput2.camera.aspect;
      this.mirrorCaptureHeight = dims.height;
      this.mirrorCaptureWidth = Math.max(1, Math.round(dims.height * mirrorAspect));
      const viewFromWorldTilted = this.world.getTiltedViewMatrix(
        viewerInput2.camera.viewMatrix,
        scratchViewFromWorldTilted
      );
      transformVec3Mat4w0(scratchMirrorPlaneNormal, mirrorPlaneMatrix, [0, 1, 0]);
      transformVec3Mat4w1(scratchMirrorPlanePoint, mirrorPlaneMatrix, [0, 0, 0]);
      computeReflectionMatrix(scratchMirrorReflection, scratchMirrorPlanePoint, scratchMirrorPlaneNormal);
      mat418.mul(scratchMirrorViewFromWorld, viewFromWorldTilted, scratchMirrorReflection);
      mat418.mul(scratchMirrorViewFromWorld, mirrorFlipX, scratchMirrorViewFromWorld);
      mat418.invert(scratchMirrorWorldFromView, scratchMirrorViewFromWorld);
      this.mirrorCamera.clipSpaceNearZ = viewerInput2.camera.clipSpaceNearZ;
      if (viewerInput2.camera.isOrthographic) {
        this.mirrorCamera.setOrthographic(
          viewerInput2.camera.top,
          mirrorAspect,
          viewerInput2.camera.near,
          viewerInput2.camera.far
        );
      } else {
        this.mirrorCamera.setPerspective(
          viewerInput2.camera.fovY,
          mirrorAspect,
          viewerInput2.camera.near,
          viewerInput2.camera.far
        );
      }
      mat418.copy(this.mirrorCamera.worldMatrix, scratchMirrorWorldFromView);
      this.mirrorCamera.worldMatrixUpdated();
      const mirrorViewerInput = {
        ...viewerInput2,
        camera: this.mirrorCamera,
        backbufferWidth: this.mirrorCaptureWidth,
        backbufferHeight: this.mirrorCaptureHeight
      };
      const mirrorTemplate = this.renderHelper.pushTemplateRenderInst();
      fillSceneParamsDataOnTemplate(mirrorTemplate, mirrorViewerInput, 0, this.world.getAnimTimeFrames());
      const mirrorCtx = {
        device,
        renderInstManager: this.renderHelper.renderInstManager,
        viewerInput: mirrorViewerInput,
        opaqueInstList: this.mirrorCaptureOpaqueInstList,
        translucentInstList: this.mirrorCaptureTranslucentInstList,
        skipMirrorModels: true,
        skipStageTilt: true,
        mirrorCapture: true,
        mirrorPlanePoint: scratchMirrorPlanePoint,
        mirrorPlaneNormal: scratchMirrorPlaneNormal
      };
      this.world.prepareToRender(mirrorCtx);
      this.renderHelper.renderInstManager.popTemplate();
      mat418.copy(scratchMirrorViewFromWorldTilted, scratchMirrorViewFromWorld);
      const mirrorViewFromWorldTilted = scratchMirrorViewFromWorldTilted;
      mat418.mul(scratchMirrorClipFromWorld, this.mirrorCamera.projectionMatrix, mirrorViewFromWorldTilted);
      mat418.mul(scratchDistortClipFromWorld, viewerInput2.camera.projectionMatrix, viewFromWorldTilted);
      let indTexMtx0 = null;
      let indTexMtx1 = null;
      if (this.mirrorNeedsDistort) {
        const ind0 = scratchMirrorPlaneNormal;
        const ind1 = scratchMirrorPlanePoint;
        vec319.set(ind0, 0, 1.6, 0);
        vec319.set(ind1, 1.2, 0, 0);
        const abs0 = Math.abs(ind0[1]);
        const abs1 = Math.abs(ind1[0]);
        if (abs0 > abs1) {
          while (Math.abs(ind0[1]) >= 1) {
            vec319.scale(ind0, ind0, 0.5);
            vec319.scale(ind1, ind1, 0.5);
          }
        } else {
          while (Math.abs(ind1[0]) >= 1) {
            vec319.scale(ind0, ind0, 0.5);
            vec319.scale(ind1, ind1, 0.5);
          }
        }
        indTexMtx0 = ind0;
        indTexMtx1 = ind1;
      }
      const mirrorOverlayTemplate = this.renderHelper.pushTemplateRenderInst();
      fillSceneParamsDataOnTemplate(mirrorOverlayTemplate, viewerInput2, 0, this.world.getAnimTimeFrames());
      const mirrorOverlayCtx = {
        device,
        renderInstManager: this.renderHelper.renderInstManager,
        viewerInput: viewerInput2,
        opaqueInstList: this.mirrorOverlayInstList,
        translucentInstList: this.mirrorOverlayInstList
      };
      const mirrorAlpha = this.mirrorMode === "wavy" ? WAVY_MIRROR_ALPHA : 1;
      this.world.prepareToRenderMirrors(
        mirrorOverlayCtx,
        viewerInput2.camera.viewMatrix,
        scratchMirrorClipFromWorld,
        mirrorAlpha,
        this.mirrorNeedsDistort ? scratchDistortClipFromWorld : null,
        indTexMtx0,
        indTexMtx1
      );
      if (this.mirrorNeedsDistort) {
        const mirrorDistortCtx = {
          device,
          renderInstManager: this.renderHelper.renderInstManager,
          viewerInput: viewerInput2,
          opaqueInstList: this.mirrorDistortInstList,
          translucentInstList: this.mirrorDistortInstList
        };
        this.world.prepareToRenderWavyDistort(mirrorDistortCtx, viewerInput2.camera.viewMatrix);
      }
      this.renderHelper.renderInstManager.popTemplate();
    }
    const template = this.renderHelper.pushTemplateRenderInst();
    fillSceneParamsDataOnTemplate(template, viewerInput2, 0, this.world.getAnimTimeFrames());
    const renderCtx = {
      device,
      renderInstManager: this.renderHelper.renderInstManager,
      viewerInput: viewerInput2,
      opaqueInstList,
      translucentInstList
    };
    this.world.prepareToRender(renderCtx);
    this.renderHelper.prepareToRender();
    this.renderHelper.renderInstManager.popTemplate();
  }
  render(device, viewerInput2) {
    this.prepareToRender(device, viewerInput2, this.opaqueInstList, this.translucentInstList);
    const mainColorDesc = makeBackbufferDescSimple(
      0 /* Color0 */,
      viewerInput2,
      makeAttachmentClearDescriptor(this.world.getClearColor())
    );
    const mainDepthDesc = makeBackbufferDescSimple(
      4 /* DepthStencil */,
      viewerInput2,
      opaqueBlackFullClearRenderPassDescriptor
    );
    const builder = this.renderHelper.renderGraph.newGraphBuilder();
    let mirrorColorTargetID = null;
    let mirrorColorResolveID = null;
    let mirrorDepthTargetID = null;
    let mirrorDistortTargetID = null;
    let mirrorDistortResolveID = null;
    let mirrorDistortDepthTargetID = null;
    if (this.mirrorMode !== "none") {
      const mirrorDims = { width: this.mirrorCaptureWidth, height: this.mirrorCaptureHeight };
      const mirrorColorDesc = new GfxrRenderTargetDescription(GfxFormat.U8_RGBA_RT);
      mirrorColorDesc.setDimensions(mirrorDims.width, mirrorDims.height, 1);
      mirrorColorDesc.clearColor = this.world.getClearColor();
      mirrorColorDesc.clearDepth = opaqueBlackFullClearRenderPassDescriptor.clearDepth;
      mirrorColorDesc.clearStencil = 0;
      const mirrorDepthDesc = new GfxrRenderTargetDescription(GfxFormat.D24);
      mirrorDepthDesc.setDimensions(mirrorDims.width, mirrorDims.height, 1);
      mirrorDepthDesc.clearColor = "load";
      mirrorDepthDesc.clearDepth = opaqueBlackFullClearRenderPassDescriptor.clearDepth;
      mirrorDepthDesc.clearStencil = 0;
      mirrorColorTargetID = builder.createRenderTargetID(mirrorColorDesc, "Mirror Color");
      mirrorDepthTargetID = builder.createRenderTargetID(mirrorDepthDesc, "Mirror Depth");
      builder.pushPass((pass) => {
        pass.setDebugName("Mirror Capture");
        pass.attachRenderTargetID(0 /* Color0 */, mirrorColorTargetID);
        pass.attachRenderTargetID(4 /* DepthStencil */, mirrorDepthTargetID);
        pass.exec((passRenderer) => {
          this.mirrorCaptureOpaqueInstList.drawOnPassRenderer(this.renderHelper.renderCache, passRenderer);
          this.mirrorCaptureTranslucentInstList.drawOnPassRenderer(this.renderHelper.renderCache, passRenderer);
        });
      });
      mirrorColorResolveID = builder.resolveRenderTarget(mirrorColorTargetID);
      if (this.mirrorNeedsDistort) {
        const distortDesc = new GfxrRenderTargetDescription(GfxFormat.U8_RGBA_RT);
        distortDesc.setDimensions(256, 256, 1);
        distortDesc.clearColor = makeAttachmentClearDescriptor({ r: 0, g: 0, b: 0, a: 0 }).clearColor;
        distortDesc.clearDepth = opaqueBlackFullClearRenderPassDescriptor.clearDepth;
        distortDesc.clearStencil = 0;
        const distortDepthDesc = new GfxrRenderTargetDescription(GfxFormat.D24);
        distortDepthDesc.setDimensions(256, 256, 1);
        distortDepthDesc.clearColor = "load";
        distortDepthDesc.clearDepth = opaqueBlackFullClearRenderPassDescriptor.clearDepth;
        distortDepthDesc.clearStencil = 0;
        mirrorDistortTargetID = builder.createRenderTargetID(distortDesc, "Mirror Distort");
        mirrorDistortDepthTargetID = builder.createRenderTargetID(distortDepthDesc, "Mirror Distort Depth");
        builder.pushPass((pass) => {
          pass.setDebugName("Mirror Distort");
          pass.attachRenderTargetID(0 /* Color0 */, mirrorDistortTargetID);
          pass.attachRenderTargetID(4 /* DepthStencil */, mirrorDistortDepthTargetID);
          pass.exec((passRenderer) => {
            this.mirrorDistortInstList.drawOnPassRenderer(this.renderHelper.renderCache, passRenderer);
          });
        });
        mirrorDistortResolveID = builder.resolveRenderTarget(mirrorDistortTargetID);
      }
    }
    const mainColorTargetID = builder.createRenderTargetID(mainColorDesc, "Main Color");
    const mainDepthTargetID = builder.createRenderTargetID(mainDepthDesc, "Main Depth");
    builder.pushPass((pass) => {
      pass.setDebugName("Main Opaque");
      pass.attachRenderTargetID(0 /* Color0 */, mainColorTargetID);
      pass.attachRenderTargetID(4 /* DepthStencil */, mainDepthTargetID);
      pass.exec((passRenderer) => {
        this.opaqueInstList.drawOnPassRenderer(this.renderHelper.renderCache, passRenderer);
      });
    });
    if (this.mirrorMode !== "none" && mirrorColorResolveID !== null) {
      builder.pushPass((pass) => {
        pass.setDebugName("Mirror Overlay");
        pass.attachRenderTargetID(0 /* Color0 */, mainColorTargetID);
        pass.attachRenderTargetID(4 /* DepthStencil */, mainDepthTargetID);
        pass.attachResolveTexture(mirrorColorResolveID);
        if (this.mirrorNeedsDistort && mirrorDistortResolveID !== null) {
          pass.attachResolveTexture(mirrorDistortResolveID);
        }
        pass.exec((passRenderer, scope) => {
          const mirrorTexture = scope.getResolveTextureForID(mirrorColorResolveID);
          this.mirrorOverlayInstList.resolveLateSamplerBinding("mirror-color", {
            gfxTexture: mirrorTexture,
            gfxSampler: null,
            lateBinding: null
          });
          if (this.mirrorNeedsDistort && mirrorDistortResolveID !== null) {
            const distortTexture = scope.getResolveTextureForID(mirrorDistortResolveID);
            this.mirrorOverlayInstList.resolveLateSamplerBinding("mirror-distort", {
              gfxTexture: distortTexture,
              gfxSampler: null,
              lateBinding: null
            });
          }
          this.mirrorOverlayInstList.drawOnPassRenderer(this.renderHelper.renderCache, passRenderer);
        });
      });
    }
    builder.pushPass((pass) => {
      pass.setDebugName("Main Translucent");
      pass.attachRenderTargetID(0 /* Color0 */, mainColorTargetID);
      pass.attachRenderTargetID(4 /* DepthStencil */, mainDepthTargetID);
      pass.exec((passRenderer) => {
        this.translucentInstList.drawOnPassRenderer(this.renderHelper.renderCache, passRenderer);
      });
    });
    this.renderHelper.antialiasingSupport.pushPasses(
      builder,
      viewerInput2,
      mainColorTargetID
    );
    builder.resolveRenderTargetToExternalTexture(mainColorTargetID, viewerInput2.onscreenTexture);
    this.renderHelper.renderGraph.execute(builder);
  }
  prewarmConfetti(device, viewerInput2) {
    const warmConfetti = [
      { modelIndex: 0, pos: { x: 0, y: 0, z: 0 }, rotX: 0, rotY: 0, rotZ: 0, scale: 1e-3 },
      { modelIndex: 1, pos: { x: 0, y: 0, z: 0 }, rotX: 0, rotY: 0, rotZ: 0, scale: 1e-3 },
      { modelIndex: 2, pos: { x: 0, y: 0, z: 0 }, rotX: 0, rotY: 0, rotZ: 0, scale: 1e-3 },
      { modelIndex: 3, pos: { x: 0, y: 0, z: 0 }, rotX: 0, rotY: 0, rotZ: 0, scale: 1e-3 },
      { modelIndex: 4, pos: { x: 0, y: 0, z: 0 }, rotX: 0, rotY: 0, rotZ: 0, scale: 1e-3 }
    ];
    const warmGoalBags = [
      { animGroupId: 0, rotX: 0, rotY: 0, rotZ: 0, openness: 0, uSomePos: { x: 0, y: 0, z: 0 } },
      { animGroupId: 0, rotX: 0, rotY: 0, rotZ: 0, openness: 1, uSomePos: { x: 0, y: 0, z: 0 } }
    ];
    const prevDeltaTime = viewerInput2.deltaTime;
    const prevTime = viewerInput2.time;
    viewerInput2.deltaTime = 0;
    this.world.setConfetti(warmConfetti);
    this.world.setGoalBags(warmGoalBags);
    this.render(device, viewerInput2);
    this.world.setConfetti(null);
    this.world.setGoalBags(null);
    viewerInput2.deltaTime = prevDeltaTime;
    viewerInput2.time = prevTime;
  }
  syncGameplayState(state) {
    if (state.timeFrames !== void 0 && state.timeFrames !== null) {
      const delta = this.lastExternalTimeFrames === null ? 0 : Math.max(0, state.timeFrames - this.lastExternalTimeFrames);
      this.lastExternalTimeFrames = state.timeFrames;
      this.world.setExternalTimeFrames(state.timeFrames, delta);
    }
    if (state.bananas !== void 0) {
      this.world.setBananas(state.bananas ?? null);
    }
    if (state.jamabars !== void 0) {
      this.world.setJamabars(state.jamabars ?? null);
    }
    if (state.bananaCollectedByAnimGroup) {
      this.world.setBananaCollectedByAnimGroup(state.bananaCollectedByAnimGroup);
    }
    if (state.ball !== void 0) {
      this.world.setBallState(state.ball ?? null);
    }
    if (state.goalBags !== void 0) {
      this.world.setGoalBags(state.goalBags ?? null);
    }
    if (state.goalTapes !== void 0) {
      this.world.setGoalTapes(state.goalTapes ?? null);
    }
    if (state.confetti !== void 0) {
      this.world.setConfetti(state.confetti ?? null);
    }
    if (state.effects !== void 0) {
      this.world.setEffects(state.effects ?? null);
    }
    if (state.switches !== void 0) {
      this.world.setSwitches(state.switches ?? null);
    }
    if (state.stageTilt !== void 0) {
      this.world.setStageTilt(state.stageTilt ?? null);
    }
    if (state.animGroupTransforms !== void 0) {
      this.world.setAnimGroupTransforms(state.animGroupTransforms ?? null);
    }
  }
  destroy(device) {
    this.renderHelper.destroy();
    this.world.destroy(device);
  }
  adjustCameraController(c) {
    c.setSceneMoveSpeedMult(1 / 32);
    c.setKeyMoveSpeed(20);
  }
};

// src/hud.ts
var HUD_WIDTH = 640;
var HUD_HEIGHT = 480;
var HURRY_UP_FRAMES2 = 11 * 60;
var GO_BANNER_FRAMES = 60;
var GOAL_BANNER_FRAMES = 240;
var GOAL_SEQUENCE_FRAMES2 = 360;
var HURRY_UP_BANNER_FRAMES = 30;
var TIME_OVER_BANNER_FRAMES = 120;
var BONUS_BANNER_FRAMES = 90;
var BOMB_FRAG_X = [7, 16, 26, 48, 0, 9, 55, 12, 33, 71];
var BOMB_FRAG_Y = [9, 0, 0, 4, 24, 16, 23, 63, 56, 69];
var BOMB_BASE_SCALE = 1;
var MPH_SCALE = 1;
var FONT_PARAMS = {
  num24x37: {
    spaceWidth: 26,
    lineHeight: 38,
    firstChar: 48,
    lastChar: 57,
    columns: 5,
    rows: 2,
    uStep: 0.1911764741,
    vStep: 0.475,
    uMargin: 0.0073529412,
    vMargin: 0.0125,
    padLeft: 0,
    padRight: 0,
    padTop: 0,
    padBottom: 0
  },
  num12x19: {
    spaceWidth: 16,
    lineHeight: 22,
    firstChar: 48,
    lastChar: 59,
    columns: 6,
    rows: 2,
    uStep: 0.166666666,
    vStep: 0.4583333333,
    uMargin: 0.0104166666,
    vMargin: 0.0208333333,
    padLeft: 0,
    padRight: 0,
    padTop: 0,
    padBottom: 0
  },
  num22x22: {
    spaceWidth: 22,
    lineHeight: 22,
    firstChar: 39,
    lastChar: 63,
    columns: 5,
    rows: 5,
    uStep: 0.171875,
    vStep: 0.171875,
    uMargin: 78125e-7,
    vMargin: 78125e-7,
    padLeft: 0,
    padRight: 0,
    padTop: 1,
    padBottom: 0
  },
  asc20x20: {
    spaceWidth: 20,
    lineHeight: 20,
    firstChar: 32,
    lastChar: 91,
    columns: 12,
    rows: 5,
    uStep: 0.078125,
    vStep: 0.078125,
    uMargin: 390625e-8,
    vMargin: 390625e-8,
    padLeft: 0,
    padRight: 0,
    padTop: 0,
    padBottom: 0
  },
  asc32x32: {
    spaceWidth: 32,
    lineHeight: 32,
    firstChar: 32,
    lastChar: 95,
    columns: 8,
    rows: 8,
    uStep: 0.125,
    vStep: 0.125,
    uMargin: 390625e-8,
    vMargin: 390625e-8,
    padLeft: 0,
    padRight: 1,
    padTop: 0,
    padBottom: 2
  },
  asc72x64: {
    spaceWidth: 72,
    lineHeight: 64,
    firstChar: 48,
    lastChar: 96,
    columns: 7,
    rows: 7,
    uStep: 0.140625,
    vStep: 0.1428571492,
    uMargin: 1953125e-9,
    vMargin: 0.0022321429,
    padLeft: 0,
    padRight: 1,
    padTop: 0,
    padBottom: 2
  },
  asc16x16: {
    spaceWidth: 16,
    lineHeight: 16,
    firstChar: 32,
    lastChar: 122,
    columns: 16,
    rows: 7,
    uStep: 0.0625,
    vStep: 0.166666666,
    uMargin: 390625e-8,
    vMargin: 0.0104166666,
    padLeft: 0,
    padRight: 0,
    padTop: 0,
    padBottom: 0
  }
};
function hudAsset(path) {
  const origin = window.location.origin;
  const pathname = window.location.pathname;
  const base = pathname.includes("/web/") ? `${origin}/web/` : `${origin}/`;
  return `${base}assets/hud/smb1/${path}`;
}
var HUD_ASSET_PATHS = {
  banana: hudAsset("bmp_com/012_banana_01.png"),
  bananaBunch: hudAsset("bmp_com/085_banana_10.png"),
  mph: hudAsset("bmp_com/088_game_icon_mph.png"),
  goal: hudAsset("bmp_nml/004_game_goal.png"),
  bomb: hudAsset("bmp_nml/000_icon_bombtimer.png"),
  bombCrack: hudAsset("bmp_nml/016_icon_bomb_hibi.png"),
  lvIcon: hudAsset("bmp_nml/001_icon_lv1234_j.png"),
  bombParts: [
    hudAsset("bmp_nml/017_icon_bomb_part_a.png"),
    hudAsset("bmp_nml/018_icon_bomb_part_b.png"),
    hudAsset("bmp_nml/019_icon_bomb_part_c.png"),
    hudAsset("bmp_nml/020_icon_bomb_part_d.png"),
    hudAsset("bmp_nml/021_icon_bomb_part_e.png"),
    hudAsset("bmp_nml/022_icon_bomb_part_f.png"),
    hudAsset("bmp_nml/023_icon_bomb_part_g.png"),
    hudAsset("bmp_nml/024_icon_bomb_part_h.png"),
    hudAsset("bmp_nml/025_icon_bomb_part_i.png"),
    hudAsset("bmp_nml/026_icon_bomb_part_j.png")
  ],
  fonts: {
    num24x37: hudAsset("bmp_nml/012_asc_ball26x38.png"),
    num12x19: hudAsset("bmp_nml/013_asc_ball16x22.png"),
    num22x22: hudAsset("bmp_nml/005_asc_ball22x22.png"),
    asc20x20: hudAsset("bmp_nml/009_asc_ball20x20.png"),
    asc32x32: hudAsset("bmp_nml/007_asc_tama32x32.png"),
    asc72x64: hudAsset("bmp_com/080_asc_tama72x64_new.png"),
    asc16x16: hudAsset("bmp_nml/006_asc_komo16x16.png")
  }
};
function loadImage(src) {
  return new Promise((resolve, reject) => {
    const img = new Image();
    img.onload = () => resolve(img);
    img.onerror = (err2) => reject(err2);
    img.src = src;
  });
}
function clamp4(value, min, max2) {
  return Math.min(max2, Math.max(min, value));
}
function lerp3(a, b, t) {
  return a + (b - a) * t;
}
function sinFixed(angle) {
  return Math.sin(angle * Math.PI / 32768);
}
function formatTimerSeconds(frames) {
  const clampedFrames = Math.max(0, Math.floor(frames));
  const seconds = Math.floor(clampedFrames / 60);
  const centis = Math.floor(clampedFrames % 60 * 100 / 60);
  return {
    seconds: String(seconds).padStart(3, "0"),
    centis: String(centis).padStart(2, "0")
  };
}
var tintCanvas = document.createElement("canvas");
var tintCtx = tintCanvas.getContext("2d");
function drawTintedImage(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh, color, opacity) {
  ctx.save();
  ctx.globalAlpha = opacity;
  if (!color || !tintCtx) {
    ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh);
    ctx.restore();
    return;
  }
  const w = Math.max(1, Math.ceil(dw));
  const h = Math.max(1, Math.ceil(dh));
  if (tintCanvas.width !== w || tintCanvas.height !== h) {
    tintCanvas.width = w;
    tintCanvas.height = h;
  } else {
    tintCtx.clearRect(0, 0, w, h);
  }
  tintCtx.globalCompositeOperation = "source-over";
  tintCtx.globalAlpha = 1;
  tintCtx.drawImage(img, sx, sy, sw, sh, 0, 0, dw, dh);
  tintCtx.globalCompositeOperation = "multiply";
  tintCtx.fillStyle = color;
  tintCtx.fillRect(0, 0, w, h);
  tintCtx.globalCompositeOperation = "destination-in";
  tintCtx.drawImage(img, sx, sy, sw, sh, 0, 0, dw, dh);
  ctx.drawImage(tintCanvas, dx, dy);
  ctx.restore();
}
function drawSprite(ctx, img, pos, scale, opacity = 1, color = null) {
  const dw = img.width * scale;
  const dh = img.height * scale;
  drawTintedImage(ctx, img, 0, 0, img.width, img.height, pos.x - dw / 2, pos.y - dh / 2, dw, dh, color, opacity);
}
function drawSpriteSolidTint(ctx, img, pos, scale, opacity = 1) {
  const dw = img.width * scale;
  const dh = img.height * scale;
  const w = Math.max(1, Math.ceil(dw));
  const h = Math.max(1, Math.ceil(dh));
  if (!tintCtx) {
    return;
  }
  if (tintCanvas.width !== w || tintCanvas.height !== h) {
    tintCanvas.width = w;
    tintCanvas.height = h;
  } else {
    tintCtx.clearRect(0, 0, w, h);
  }
  tintCtx.globalCompositeOperation = "source-over";
  tintCtx.globalAlpha = 1;
  tintCtx.drawImage(img, 0, 0, img.width, img.height, 0, 0, dw, dh);
  tintCtx.globalCompositeOperation = "source-in";
  tintCtx.fillStyle = "#ffffff";
  tintCtx.fillRect(0, 0, w, h);
  ctx.save();
  ctx.globalAlpha = opacity;
  ctx.drawImage(tintCanvas, pos.x - dw / 2, pos.y - dh / 2);
  ctx.restore();
}
function drawGlyph(ctx, font, charCode, x, y, scaleX, scaleY, color, opacity = 1) {
  const params = font.params;
  if (charCode < params.firstChar || charCode > params.lastChar) {
    return;
  }
  const glyphIndex = charCode - params.firstChar;
  const div = Math.floor(glyphIndex / params.columns);
  const mod2 = glyphIndex % params.columns;
  const u1 = params.uStep * mod2 + params.uMargin * params.padLeft;
  const v1 = params.vStep * div + params.vMargin * params.padTop;
  const u2 = params.uStep + (params.uStep * mod2 - params.uMargin * params.padRight);
  const v2 = params.vStep + (params.vStep * div - params.vMargin * params.padBottom);
  const sx = u1 * font.image.width;
  const sy = v1 * font.image.height;
  const sw = (u2 - u1) * font.image.width;
  const sh = (v2 - v1) * font.image.height;
  const dw = sw * scaleX;
  const dh = sh * scaleY;
  drawTintedImage(ctx, font.image, sx, sy, sw, sh, x, y - dh / 2, dw, dh, color, opacity);
}
function measureText(font, text, scale) {
  const params = font.params;
  let width = 0;
  for (const ch of text) {
    const code = ch.charCodeAt(0);
    if (ch === " ") {
      width += params.spaceWidth * scale;
      continue;
    }
    if (code < params.firstChar || code > params.lastChar) {
      width += params.spaceWidth * scale;
      continue;
    }
    width += params.spaceWidth * scale;
  }
  return width;
}
function drawText(ctx, font, text, pos, scale, color, align3, alignV = "center", opacity = 1) {
  const params = font.params;
  let x = pos.x;
  const textWidth = measureText(font, text, scale);
  if (align3 === "center") {
    x -= textWidth / 2;
  } else if (align3 === "right") {
    x -= textWidth;
  }
  let y = pos.y;
  if (alignV === "bottom") {
    y -= params.lineHeight * scale / 2;
  } else if (alignV === "top") {
    y += params.lineHeight * scale / 2;
  }
  for (const ch of text) {
    const code = ch.charCodeAt(0);
    if (ch === " ") {
      x += params.spaceWidth * scale;
      continue;
    }
    if (code < params.firstChar || code > params.lastChar) {
      x += params.spaceWidth * scale;
      continue;
    }
    const glyphIndex = code - params.firstChar;
    const div = Math.floor(glyphIndex / params.columns);
    const mod2 = glyphIndex % params.columns;
    const u1 = params.uStep * mod2 + params.uMargin * params.padLeft;
    const v1 = params.vStep * div + params.vMargin * params.padTop;
    const u2 = params.uStep + (params.uStep * mod2 - params.uMargin * params.padRight);
    const v2 = params.vStep + (params.vStep * div - params.vMargin * params.padBottom);
    const sx = u1 * font.image.width;
    const sy = v1 * font.image.height;
    const sw = (u2 - u1) * font.image.width;
    const sh = (v2 - v1) * font.image.height;
    const dw = sw * scale;
    const dh = sh * scale;
    drawTintedImage(ctx, font.image, sx, sy, sw, sh, x, y - dh / 2, dw, dh, color, opacity);
    x += params.spaceWidth * scale;
  }
}
function drawTextScaled(ctx, font, text, pos, scaleX, scaleY, color, align3, alignV = "center", opacity = 1) {
  const params = font.params;
  let x = pos.x;
  const textWidth = measureText(font, text, scaleX);
  if (align3 === "center") {
    x -= textWidth / 2;
  } else if (align3 === "right") {
    x -= textWidth;
  }
  let y = pos.y;
  if (alignV === "bottom") {
    y -= params.lineHeight * scaleY / 2;
  } else if (alignV === "top") {
    y += params.lineHeight * scaleY / 2;
  }
  for (const ch of text) {
    const code = ch.charCodeAt(0);
    if (ch === " ") {
      x += params.spaceWidth * scaleX;
      continue;
    }
    if (code < params.firstChar || code > params.lastChar) {
      x += params.spaceWidth * scaleX;
      continue;
    }
    const glyphIndex = code - params.firstChar;
    const div = Math.floor(glyphIndex / params.columns);
    const mod2 = glyphIndex % params.columns;
    const u1 = params.uStep * mod2 + params.uMargin * params.padLeft;
    const v1 = params.vStep * div + params.vMargin * params.padTop;
    const u2 = params.uStep + (params.uStep * mod2 - params.uMargin * params.padRight);
    const v2 = params.vStep + (params.vStep * div - params.vMargin * params.padBottom);
    const sx = u1 * font.image.width;
    const sy = v1 * font.image.height;
    const sw = (u2 - u1) * font.image.width;
    const sh = (v2 - v1) * font.image.height;
    const dw = sw * scaleX;
    const dh = sh * scaleY;
    drawTintedImage(ctx, font.image, sx, sy, sw, sh, x, y - dh / 2, dw, dh, color, opacity);
    x += params.spaceWidth * scaleX;
  }
}
function textMetrics(font, text, scale) {
  return {
    width: measureText(font, text, scale),
    height: font.params.lineHeight * scale
  };
}
function padNumber(value, width) {
  const text = String(Math.max(0, Math.trunc(value)));
  if (text.length >= width) {
    return text;
  }
  return `${" ".repeat(width - text.length)}${text}`;
}
function drawGlyphRotatedTopLeft(ctx, font, charCode, x, y, scale, rotation, color, opacity = 1) {
  const params = font.params;
  if (charCode < params.firstChar || charCode > params.lastChar) {
    return;
  }
  const glyphIndex = charCode - params.firstChar;
  const div = Math.floor(glyphIndex / params.columns);
  const mod2 = glyphIndex % params.columns;
  const u1 = params.uStep * mod2 + params.uMargin * params.padLeft;
  const v1 = params.vStep * div + params.vMargin * params.padTop;
  const u2 = params.uStep + (params.uStep * mod2 - params.uMargin * params.padRight);
  const v2 = params.vStep + (params.vStep * div - params.vMargin * params.padBottom);
  const sx = u1 * font.image.width;
  const sy = v1 * font.image.height;
  const sw = (u2 - u1) * font.image.width;
  const sh = (v2 - v1) * font.image.height;
  const dw = sw * scale;
  const dh = sh * scale;
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(rotation);
  drawTintedImage(ctx, font.image, sx, sy, sw, sh, 0, 0, dw, dh, color, opacity);
  ctx.restore();
}
function drawTextAt(ctx, font, text, left, top, scale, color, opacity = 1) {
  const params = font.params;
  let x = left;
  for (const ch of text) {
    const code = ch.charCodeAt(0);
    if (ch === " ") {
      x += params.spaceWidth * scale;
      continue;
    }
    if (code < params.firstChar || code > params.lastChar) {
      x += params.spaceWidth * scale;
      continue;
    }
    const glyphIndex = code - params.firstChar;
    const div = Math.floor(glyphIndex / params.columns);
    const mod2 = glyphIndex % params.columns;
    const u1 = params.uStep * mod2 + params.uMargin * params.padLeft;
    const v1 = params.vStep * div + params.vMargin * params.padTop;
    const u2 = params.uStep + (params.uStep * mod2 - params.uMargin * params.padRight);
    const v2 = params.vStep + (params.vStep * div - params.vMargin * params.padBottom);
    const sx = u1 * font.image.width;
    const sy = v1 * font.image.height;
    const sw = (u2 - u1) * font.image.width;
    const sh = (v2 - v1) * font.image.height;
    const dw = sw * scale;
    const dh = sh * scale;
    drawTintedImage(ctx, font.image, sx, sy, sw, sh, x, top, dw, dh, color, opacity);
    x += params.spaceWidth * scale;
  }
}
function normalizeGoalType2(goalType) {
  if (goalType === "G" || goalType === "R" || goalType === "B") {
    return goalType;
  }
  if (goalType === 1) {
    return "G";
  }
  if (goalType === 2) {
    return "R";
  }
  return "B";
}
function isWarpGoal(goalType) {
  const normalized = normalizeGoalType2(goalType);
  return normalized === "G" || normalized === "R";
}
function func800802E0(timerFrames) {
  if (timerFrames > 60) {
    const t2 = Math.abs(Math.sin((60 - timerFrames % 60 & 63) * (Math.PI / 128)));
    return 0.2 * (1 - Math.abs(1 - t2 * 2));
  }
  if (timerFrames < 15) {
    const t2 = (15 - timerFrames) / 15;
    if (t2 < 0.5) {
      return 0.2 - t2;
    }
    return -0.3 + t2 - 0.5;
  }
  const t = 1 - (timerFrames - 15) / 45;
  return t * 0.2;
}
var HudRenderer = class {
  canvas;
  ctx = null;
  assets = null;
  ready = false;
  scale = 1;
  offsetX = 0;
  offsetY = 0;
  frameCounter = 0;
  lastTimeLeft = null;
  bombFragments = [];
  bombCrackPulse = 0;
  currentGame = null;
  introStartFrames = 0;
  floorIntroActive = false;
  bonusFloorActive = false;
  finalFloorActive = false;
  floorIntroFrames = 0;
  floorIntroFadeFrames = 0;
  bonusFloorFrames = 0;
  finalFloorFrames = 0;
  warpTrails = [];
  goalScoreInfo = null;
  scoreDisplay = 0;
  scoreStepFrames = 0;
  scoreStepValue = 0;
  bonusBananaCounter = 0;
  goBanner = { timer: 0, duration: GO_BANNER_FRAMES };
  goalBanner = { timer: 0, duration: GOAL_BANNER_FRAMES };
  hurryBanner = { timer: 0, duration: HURRY_UP_BANNER_FRAMES };
  timeOverBanner = { timer: 0, duration: TIME_OVER_BANNER_FRAMES };
  perfectBanner = { timer: 0, duration: BONUS_BANNER_FRAMES };
  bonusFinishBanner = { timer: 0, duration: BONUS_BANNER_FRAMES };
  readyBanner = { timer: 0, duration: 120 };
  fallOutBanner = { timer: 0, duration: 270 };
  lastIntroFrames = 0;
  lastGoalFrames = 0;
  lastTimeOverFrames = 0;
  lastRingoutFrames = 0;
  lastStageId = null;
  lastBonusClear = false;
  constructor(canvas2) {
    this.canvas = canvas2;
    this.ctx = canvas2.getContext("2d");
  }
  async load() {
    if (!this.ctx) {
      return;
    }
    const [
      banana,
      bananaBunch,
      mph,
      goal,
      bomb,
      bombCrack,
      lvIcon,
      ...rest
    ] = await Promise.all([
      loadImage(HUD_ASSET_PATHS.banana),
      loadImage(HUD_ASSET_PATHS.bananaBunch),
      loadImage(HUD_ASSET_PATHS.mph),
      loadImage(HUD_ASSET_PATHS.goal),
      loadImage(HUD_ASSET_PATHS.bomb),
      loadImage(HUD_ASSET_PATHS.bombCrack),
      loadImage(HUD_ASSET_PATHS.lvIcon),
      ...HUD_ASSET_PATHS.bombParts.map(loadImage),
      ...Object.values(HUD_ASSET_PATHS.fonts).map(loadImage)
    ]);
    const fontImages = rest.slice(HUD_ASSET_PATHS.bombParts.length);
    const fontKeys = Object.keys(HUD_ASSET_PATHS.fonts);
    const fonts = {
      num24x37: { image: fontImages[fontKeys.indexOf("num24x37")], params: FONT_PARAMS.num24x37 },
      num12x19: { image: fontImages[fontKeys.indexOf("num12x19")], params: FONT_PARAMS.num12x19 },
      num22x22: { image: fontImages[fontKeys.indexOf("num22x22")], params: FONT_PARAMS.num22x22 },
      asc20x20: { image: fontImages[fontKeys.indexOf("asc20x20")], params: FONT_PARAMS.asc20x20 },
      asc32x32: { image: fontImages[fontKeys.indexOf("asc32x32")], params: FONT_PARAMS.asc32x32 },
      asc72x64: { image: fontImages[fontKeys.indexOf("asc72x64")], params: FONT_PARAMS.asc72x64 },
      asc16x16: { image: fontImages[fontKeys.indexOf("asc16x16")], params: FONT_PARAMS.asc16x16 }
    };
    this.assets = {
      banana,
      bananaBunch,
      mph,
      goal,
      bomb,
      bombCrack,
      lvIcon,
      bombParts: rest.slice(0, HUD_ASSET_PATHS.bombParts.length),
      fonts
    };
    this.ready = true;
  }
  resize(width, height) {
    if (!this.ctx) {
      return;
    }
    if (this.canvas.width !== width || this.canvas.height !== height) {
      this.canvas.width = width;
      this.canvas.height = height;
    }
    const scale = Math.min(width / HUD_WIDTH, height / HUD_HEIGHT);
    this.scale = scale;
    this.offsetX = (width - HUD_WIDTH * scale) / 2;
    this.offsetY = (height - HUD_HEIGHT * scale) / 2;
  }
  beginBanner(state) {
    state.timer = state.duration;
  }
  resetTransientBanners() {
    this.goBanner.timer = 0;
    this.goalBanner.timer = 0;
    this.hurryBanner.timer = 0;
    this.timeOverBanner.timer = 0;
    this.perfectBanner.timer = 0;
    this.bonusFinishBanner.timer = 0;
    this.readyBanner.timer = 0;
    this.fallOutBanner.timer = 0;
  }
  advanceBanner(state, dt) {
    if (state.timer > 0) {
      state.timer = Math.max(0, state.timer - dt);
    }
  }
  syncState(game2) {
    if (!game2) {
      return;
    }
    const stageId = game2.stage?.stageId ?? null;
    if (stageId !== this.lastStageId) {
      this.lastStageId = stageId;
      this.resetTransientBanners();
      const floorInfo = game2.course?.getFloorInfo?.();
      const firstAttempt = (game2.stageAttempts ?? 1) <= 1;
      this.finalFloorActive = Boolean(floorInfo?.isFinal);
      this.finalFloorFrames = firstAttempt ? 0 : 150;
      this.bonusFloorActive = Boolean(game2.isBonusStageActive?.());
      this.bonusFloorFrames = firstAttempt ? 0 : 150;
      this.floorIntroActive = firstAttempt;
      this.floorIntroFrames = 0;
      this.floorIntroFadeFrames = 0;
      this.introStartFrames = game2.introTimerFrames ?? 0;
      this.bombFragments = [];
      this.bombCrackPulse = 0;
      this.lastTimeLeft = null;
      this.warpTrails = [];
      this.goalScoreInfo = null;
      this.scoreDisplay = Math.max(0, Math.trunc(game2.score ?? 0));
      this.scoreStepFrames = 0;
      this.scoreStepValue = 0;
      this.bonusBananaCounter = 0;
    }
    if (this.lastIntroFrames > 0 && game2.introTimerFrames === 0) {
      this.beginBanner(this.goBanner);
    }
    if (this.lastIntroFrames === 0 && game2.introTimerFrames > 0) {
      this.resetTransientBanners();
      const firstAttempt = (game2.stageAttempts ?? 1) <= 1;
      this.floorIntroActive = firstAttempt;
      this.floorIntroFrames = 0;
      this.floorIntroFadeFrames = 0;
      this.introStartFrames = game2.introTimerFrames ?? 0;
      this.bonusFloorActive = Boolean(game2.isBonusStageActive?.());
      this.bonusFloorFrames = firstAttempt ? 0 : 150;
      const floorInfo = game2.course?.getFloorInfo?.();
      this.finalFloorActive = Boolean(floorInfo?.isFinal);
      this.finalFloorFrames = firstAttempt ? 0 : 150;
      if (game2.introTimerFrames <= 120) {
        this.beginBanner(this.readyBanner);
        if (this.floorIntroActive) {
          this.floorIntroFadeFrames = 15;
        }
      }
    }
    if (this.lastGoalFrames === 0 && game2.goalTimerFrames > 0 && !game2.bonusClearPending) {
      this.beginBanner(this.goalBanner);
      const timeRemaining = Math.max(0, (game2.stageTimeLimitFrames ?? 0) - (game2.stageTimerFrames ?? 0));
      const goalType = normalizeGoalType2(game2.goalInfo?.goalType ?? game2.stage?.goals?.[0]?.type ?? "B");
      let clearScore = Math.floor(timeRemaining * 100 / 60);
      if (goalType === "G") {
        clearScore += 1e4;
      } else if (goalType === "R") {
        clearScore += 2e4;
      }
      const timeBonus = (game2.stageTimeLimitFrames ?? 0) > 0 && timeRemaining > (game2.stageTimeLimitFrames ?? 0) >> 1 ? 2 : 1;
      let warpMultiplier = 1;
      if (isWarpGoal(goalType)) {
        const preview = game2.course?.peekJumpCount?.({
          flags: INFO_FLAGS.GOAL,
          goalType,
          timerCurr: game2.stageTimerFrames ?? 0,
          u_currStageId: game2.stage?.stageId ?? 0
        });
        if (typeof preview === "number" && preview > 0) {
          warpMultiplier = preview;
        } else {
          warpMultiplier = goalType === "R" ? 3 : 2;
        }
      }
      const floorScore = clearScore * warpMultiplier * timeBonus;
      this.goalScoreInfo = {
        clearScore,
        floorScore,
        warpMultiplier,
        timeBonus,
        goalType
      };
    }
    if (!this.lastBonusClear && game2.bonusClearPending) {
      this.beginBanner(this.perfectBanner);
    }
    if (this.lastTimeOverFrames === 0 && game2.timeoverTimerFrames > 0) {
      if (game2.isBonusStageActive?.()) {
        this.beginBanner(this.bonusFinishBanner);
      } else {
        this.beginBanner(this.timeOverBanner);
      }
    }
    if (this.lastIntroFrames > 120 && game2.introTimerFrames <= 120 && game2.introTimerFrames > 0) {
      this.beginBanner(this.readyBanner);
      if (this.floorIntroActive) {
        this.floorIntroFadeFrames = 15;
      }
    }
    if (this.lastRingoutFrames === 0 && game2.ringoutTimerFrames > 0) {
      if (game2.isBonusStageActive?.()) {
        this.beginBanner(this.bonusFinishBanner);
      } else {
        this.beginBanner(this.fallOutBanner);
      }
    }
    this.lastIntroFrames = game2.introTimerFrames;
    this.lastGoalFrames = game2.goalTimerFrames;
    this.lastTimeOverFrames = game2.timeoverTimerFrames;
    this.lastRingoutFrames = game2.ringoutTimerFrames;
    this.lastBonusClear = game2.bonusClearPending;
    if (game2.goalTimerFrames <= 0) {
      this.goalScoreInfo = null;
    }
  }
  update(game2, dtFrames) {
    this.currentGame = game2;
    this.syncState(game2);
    this.advanceBanner(this.goBanner, dtFrames);
    this.advanceBanner(this.goalBanner, dtFrames);
    this.advanceBanner(this.hurryBanner, dtFrames);
    this.advanceBanner(this.timeOverBanner, dtFrames);
    this.advanceBanner(this.perfectBanner, dtFrames);
    this.advanceBanner(this.bonusFinishBanner, dtFrames);
    this.advanceBanner(this.readyBanner, dtFrames);
    this.advanceBanner(this.fallOutBanner, dtFrames);
    this.frameCounter += dtFrames;
    const targetScore = Math.max(0, Math.trunc(game2?.score ?? 0));
    if (this.scoreDisplay > targetScore) {
      this.scoreDisplay = targetScore;
      this.scoreStepFrames = 0;
      this.scoreStepValue = 0;
    }
    if (this.scoreStepFrames === 0 && targetScore > this.scoreDisplay) {
      const diff = targetScore - this.scoreDisplay;
      this.scoreStepFrames = diff >= 1e3 ? 120 : 30;
      this.scoreStepValue = Math.floor(diff / this.scoreStepFrames);
      if (this.scoreStepValue <= 0) {
        this.scoreStepValue = 1;
      }
    }
    if (this.scoreStepFrames > 0) {
      const steps = Math.max(1, Math.floor(dtFrames));
      for (let i = 0; i < steps; i += 1) {
        if (this.scoreStepFrames <= 0) {
          break;
        }
        this.scoreDisplay += this.scoreStepValue;
        this.scoreStepFrames -= 1;
        if (this.scoreDisplay > targetScore) {
          this.scoreDisplay = targetScore;
        }
      }
      if (this.scoreStepFrames <= 0) {
        this.scoreDisplay = targetScore;
      }
    }
    if (game2?.stageTimeLimitFrames > 0) {
      const timeLeft2 = game2.stageTimeLimitFrames - game2.stageTimerFrames;
      if (timeLeft2 === HURRY_UP_FRAMES2) {
        this.beginBanner(this.hurryBanner);
      }
    }
    const timeLeft = game2?.stageTimeLimitFrames ? game2.stageTimeLimitFrames - game2.stageTimerFrames : null;
    if (timeLeft !== null && timeLeft <= 0 && (this.lastTimeLeft ?? 1) > 0) {
      this.spawnBombFragments();
    }
    this.lastTimeLeft = timeLeft;
    if (this.bombFragments.length > 0) {
      this.updateBombFragments(dtFrames);
    }
    if (timeLeft !== null && timeLeft < 240 && timeLeft > 0) {
      this.bombCrackPulse += 40 - timeLeft * 40 / 240;
    }
    if (this.floorIntroActive) {
      const introFrames = game2?.introTimerFrames;
      if (introFrames !== void 0 && introFrames > 0) {
        const totalFrames = Math.max(introFrames, game2?.introTotalFrames ?? introFrames);
        if (this.introStartFrames <= 0) {
          this.introStartFrames = totalFrames;
          this.floorIntroFrames = 0;
        } else if (this.introStartFrames < introFrames) {
          this.introStartFrames = totalFrames;
        }
        const elapsed = Math.max(0, this.introStartFrames - introFrames);
        if (elapsed > this.floorIntroFrames) {
          this.floorIntroFrames = elapsed;
        }
      } else {
        this.floorIntroFrames += dtFrames;
      }
      if ((game2?.introTimerFrames ?? 0) <= 0 && this.floorIntroFrames > 180) {
        this.floorIntroActive = false;
      }
    }
    if (this.floorIntroFadeFrames > 0) {
      this.floorIntroFadeFrames = Math.max(0, this.floorIntroFadeFrames - dtFrames);
      if (this.floorIntroFadeFrames === 0) {
        this.floorIntroActive = false;
      }
    }
    if (this.bonusFloorActive) {
      this.bonusFloorFrames += dtFrames;
    }
    if (this.finalFloorActive) {
      this.finalFloorFrames += dtFrames;
    }
    if (this.goalBanner.timer > 0 && !(game2?.isBonusStageActive?.() ?? false) && isWarpGoal(game2?.goalInfo?.goalType ?? null)) {
      const t = this.goalBanner.duration - this.goalBanner.timer;
      if (t % 2 === 1) {
        const warpX = 320 + 20 * sinFixed(t << 9);
        const warpY = 240 + 10 * sinFixed((t << 8) + 16384);
        this.warpTrails.push({
          x: warpX,
          y: warpY,
          scale: 1,
          opacity: 0.5,
          addG: 96,
          addB: 127,
          life: 16
        });
      }
    }
    if (this.warpTrails.length > 0) {
      this.warpTrails = this.warpTrails.filter((trail) => {
        trail.addG += 6;
        trail.addB += 7;
        trail.scale += 8e-3;
        trail.opacity -= 0.03125;
        trail.life -= 1;
        return trail.life > 0 && trail.opacity > 0;
      });
    }
    if (this.goalBanner.timer <= 0 && this.warpTrails.length > 0) {
      this.warpTrails = [];
    }
    const isBonusStage2 = game2?.isBonusStageActive?.() ?? false;
    if (isBonusStage2) {
      const inPlayMain = (game2?.introTimerFrames ?? 0) <= 0 && (game2?.goalTimerFrames ?? 0) <= 0 && (game2?.ringoutTimerFrames ?? 0) <= 0 && (game2?.timeoverTimerFrames ?? 0) <= 0;
      const bananasLeft = game2?.bananasLeft ?? 0;
      if (!inPlayMain || bananasLeft <= 0) {
        this.bonusBananaCounter = Math.max(0, this.bonusBananaCounter - dtFrames);
      } else {
        this.bonusBananaCounter = Math.min(60, this.bonusBananaCounter + dtFrames);
      }
    } else {
      this.bonusBananaCounter = 0;
    }
  }
  render(game2, dtSeconds) {
    if (!this.ctx || !this.assets || !this.ready) {
      return;
    }
    const ctx = this.ctx;
    ctx.save();
    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
    ctx.setTransform(this.scale, 0, 0, this.scale, this.offsetX, this.offsetY);
    ctx.imageSmoothingEnabled = true;
    ctx.imageSmoothingQuality = "high";
    const assets = this.assets;
    const fonts = assets.fonts;
    const timeLeftRaw = (game2?.stageTimeLimitFrames ?? 0) - (game2?.stageTimerFrames ?? 0);
    const timeLeft = Math.max(0, timeLeftRaw);
    const { seconds, centis } = formatTimerSeconds(timeLeft);
    const bananasCollected = game2?.ball?.bananas ?? 0;
    const bananasLeft = game2?.bananasLeft ?? 0;
    const bananaTotal = bananasCollected + bananasLeft;
    const score = String(Math.max(0, Math.trunc(this.scoreDisplay)));
    const lives = Math.max(0, Math.trunc(game2?.lives ?? 0));
    const speedMph = Math.max(0, (game2?.ball?.speed ?? 0) * 134.21985);
    const isBonusStage2 = game2?.isBonusStageActive?.() ?? false;
    const floorInfo = game2?.course?.getFloorInfo?.();
    const floorPrefix = floorInfo?.prefix ?? "FLOOR";
    const floorLabel = floorInfo ? `${floorPrefix} ${floorInfo.current}` : "FLOOR 1";
    const floorColor = floorPrefix === "EXTRA" ? "#ffe14d" : null;
    drawText(ctx, fonts.asc20x20, "SCORE", { x: 108, y: 24 }, 1, null, "center");
    drawText(ctx, fonts.num22x22, score, { x: 196, y: 48 }, 1, null, "right");
    drawSprite(ctx, assets.banana, { x: 428, y: 22 }, 0.2);
    drawText(ctx, fonts.asc20x20, "BANANA(S)", { x: 536, y: 24 }, 1, "#ffe66e", "center");
    drawText(ctx, fonts.num22x22, "/", { x: 518, y: 47 }, 1, "#ffe66e", "center");
    drawText(
      ctx,
      fonts.asc20x20,
      `${String(bananasCollected).padStart(3, "0")} ${String(bananaTotal).padStart(3, "0")}`,
      { x: 518, y: 48 },
      1,
      "#ffe66e",
      "center"
    );
    if (timeLeftRaw > 0) {
      const bombScale = timeLeftRaw <= 600 ? 1 + func800802E0(timeLeft) : 1;
      drawSprite(ctx, assets.bomb, { x: 320, y: 68 }, BOMB_BASE_SCALE * bombScale);
      if (timeLeftRaw <= 480) {
        const crackOpacity = timeLeftRaw > 420 ? 1 - (timeLeftRaw - 420) / 60 : 1;
        let crackColor = null;
        if (timeLeftRaw < 240) {
          const pulse = Math.abs(255 - Math.floor(this.bombCrackPulse) % 510);
          const blue = Math.max(128, pulse);
          crackColor = `rgb(255, ${Math.round(pulse)}, ${Math.round((blue - 128) * 2)})`;
        }
        drawSprite(ctx, assets.bombCrack, { x: 320, y: 68 }, BOMB_BASE_SCALE * bombScale, crackOpacity, crackColor);
      }
    }
    const showIcon = floorInfo?.showDifficultyIcon ?? false;
    const floorX = floorPrefix === "MASTER" ? 32 : showIcon ? 72 : 32;
    drawText(ctx, fonts.asc20x20, floorLabel, { x: floorX, y: 458 }, 1, floorColor, "left");
    const secMetrics = textMetrics(fonts.num24x37, seconds, 1);
    const secLeft = 320 - secMetrics.width / 2;
    const secTop = 85 - secMetrics.height;
    drawTextAt(ctx, fonts.num24x37, seconds, secLeft, secTop, 1, null);
    const centiMetrics = textMetrics(fonts.num12x19, `:${centis}`, 1);
    const centiLeft = secLeft + secMetrics.width - 4;
    const centiTop = 85 - centiMetrics.height;
    drawTextAt(ctx, fonts.num12x19, `:${centis}`, centiLeft, centiTop, 1, null);
    const speedText = String(Math.round(speedMph)).padStart(2, "0");
    drawText(ctx, fonts.asc20x20, speedText, { x: 32, y: 428 }, 1, null, "left");
    const speedWidth = measureText(fonts.asc20x20, speedText, 1);
    const mphWidth = assets.mph.width * MPH_SCALE;
    drawSprite(ctx, assets.mph, { x: 32 + speedWidth + mphWidth / 2 + 6, y: 428 }, MPH_SCALE);
    if (isBonusStage2 && this.bonusBananaCounter > 0) {
      const counter = Math.min(60, Math.max(0, this.bonusBananaCounter));
      const opacity = counter / 60;
      let blueness = 2 * (Math.floor(this.frameCounter) % 60 / 59);
      if (blueness > 1) {
        blueness = 2 - blueness;
      }
      const blue = Math.round(255 * blueness);
      const color = `rgb(255, 255, ${blue})`;
      drawText(
        ctx,
        fonts.asc32x32,
        `${padNumber(bananasLeft, 2)} BANANA${bananasLeft === 1 ? " " : "S"} LEFT`,
        { x: 320, y: 380 },
        1,
        color,
        "center",
        "center",
        opacity
      );
    }
    if (floorInfo && floorInfo.showDifficultyIcon) {
      const iconCell = 64;
      const iconIndex = floorInfo.difficultyIconIndex ?? 1;
      const sx = (iconIndex - 1) * iconCell;
      const sy = iconCell * 1;
      const scale = 0.5;
      const iconX = 48;
      const iconY = 458;
      drawTintedImage(
        ctx,
        assets.lvIcon,
        sx,
        sy,
        iconCell,
        iconCell,
        iconX - iconCell * scale * 0.5,
        iconY - iconCell * scale * 0.5,
        iconCell * scale,
        iconCell * scale,
        null,
        1
      );
    }
    if (this.bombFragments.length > 0) {
      this.renderBombFragments(ctx, assets);
    }
    this.renderBanners(ctx, assets);
    ctx.restore();
  }
  spawnBombFragments() {
    const fragments = [];
    for (let i = 0; i < BOMB_FRAG_X.length; i += 1) {
      fragments.push({
        index: i,
        x: 320 - 44 + BOMB_FRAG_X[i],
        y: 68 - 44 + BOMB_FRAG_Y[i],
        vx: 1.2 * (BOMB_FRAG_X[i] - 30),
        vy: 1.2 * (BOMB_FRAG_Y[i] - 20),
        opacity: 1,
        scale: BOMB_BASE_SCALE
      });
    }
    this.bombFragments = fragments;
  }
  updateBombFragments(dtFrames) {
    const step = dtFrames <= 0 ? 1 : dtFrames;
    for (let stepIndex = 0; stepIndex < step; stepIndex += 1) {
      this.bombFragments = this.bombFragments.filter((fragment) => {
        fragment.opacity *= 0.95;
        fragment.scale *= 1.01;
        const t = fragment.opacity * fragment.opacity;
        fragment.x += 0.9 * fragment.vx * t;
        fragment.y += 0.97 * fragment.vy * t + (1 - t);
        return fragment.opacity >= 5e-3;
      });
    }
  }
  renderBombFragments(ctx, assets) {
    for (const fragment of this.bombFragments) {
      const img = assets.bombParts[fragment.index % assets.bombParts.length];
      drawSprite(ctx, img, { x: fragment.x, y: fragment.y }, fragment.scale, fragment.opacity);
    }
  }
  renderBanners(ctx, assets) {
    const fonts = assets.fonts;
    const game2 = this.currentGame;
    if (this.goBanner.timer > 0) {
      const t = this.goBanner.duration - this.goBanner.timer;
      let scaleX = 1;
      let scaleY = 1;
      let opacity = 1;
      let flash = 0;
      if (t < 15) {
        const temp = 15 - t;
        opacity = t / 15;
        scaleX = 1 + temp * 0.1;
        scaleY = 1 - temp * 0.04;
      } else if (t < 30) {
        const wave = sinFixed((t - 15) * 2184);
        flash = Math.floor(this.frameCounter) >> 1 & 1 ? 192 : 0;
        scaleX = 1 - wave * 0.5;
        scaleY = 1 + wave;
      } else if (t < 45) {
        const wave = sinFixed((t - 30) * 2184);
        flash = Math.floor(this.frameCounter) >> 1 & 1 ? 192 : 0;
        scaleX = 1 + wave * 0.75;
        scaleY = 1 - wave * 0.375;
      } else {
        const remaining = this.goBanner.timer;
        opacity = remaining / 15;
        scaleX = 1 - (15 - remaining) * 0.04;
        scaleY = 1 + (15 - remaining) * 0.1;
      }
      const color = flash > 0 ? "#c0f2ff" : "#00a0ff";
      const font = fonts.asc72x64;
      const baseScaleX = 1.5 * scaleX;
      const baseScaleY = 1.5 * scaleY;
      const tempR23 = 1.5 * (36 * scaleX);
      const tempR3 = 1.5 * (32 * scaleY);
      for (let i = 0; i < 2; i += 1) {
        let phiX = 0;
        let phiY = 0;
        if (t < 15) {
          const side = i === 0 ? -320 : 320;
          phiX = side * sinFixed((15 - t) * 1092);
        } else if (t >= 45) {
          const side = i === 0 ? -240 : 240;
          phiY = side * sinFixed((15 - this.goBanner.timer) * 1092);
        }
        const charCode = i === 0 ? 71 : 79;
        const x = 320 + phiX - tempR23 + (i === 0 ? -tempR23 : tempR23);
        const y = 240 + phiY - tempR3 + font.params.lineHeight * baseScaleY / 2;
        drawGlyph(ctx, font, charCode, x, y, baseScaleX, baseScaleY, color, opacity);
      }
    }
    if (this.goalBanner.timer > 0) {
      const t = this.goalBanner.duration - this.goalBanner.timer;
      let x = 320;
      let y = 320;
      let scale = 1;
      let opacity = 1;
      let flash = 0;
      if (t < 30) {
        opacity = t / 30;
      } else if (t < 45) {
        flash = sinFixed((t - 30) * 2184) * 255;
      } else if (this.goalBanner.timer < 15) {
        opacity = this.goalBanner.timer / 15;
      }
      if (t >= 180) {
        const t2 = clamp4((t - 180) / 30, 0, 1);
        x = lerp3(320, 561, t2);
        y = lerp3(320, 420, t2);
        scale = lerp3(1, 0.5, t2);
      }
      if (t < 30) {
        const scatter = (30 - t) * 0.03333;
        const offsets = [
          { x: -1, y: 1 },
          { x: 1, y: 1 },
          { x: 1, y: -1 },
          { x: -1, y: -1 }
        ];
        for (const dir of offsets) {
          const pos = { x: x + scatter * (216 * dir.x), y: y + scatter * (192 * dir.y) };
          drawSprite(ctx, assets.goal, pos, scale, opacity);
          if (flash > 0) {
            drawSpriteSolidTint(ctx, assets.goal, pos, scale, opacity * (flash / 255));
          }
        }
      } else {
        const pos = { x, y };
        drawSprite(ctx, assets.goal, pos, scale, opacity);
        if (flash > 0) {
          drawSpriteSolidTint(ctx, assets.goal, pos, scale, opacity * (flash / 255));
        }
      }
      if (game2 && !(game2.isBonusStageActive?.() ?? false) && isWarpGoal(game2.goalInfo?.goalType ?? null)) {
        const floorInfo = game2.course?.getFloorInfo?.();
        const floorNum = floorInfo?.current ?? 1;
        const warpText = `JUMP TO FLOOR ${floorNum}`;
        for (const trail of this.warpTrails) {
          const color = `rgb(0, ${Math.min(255, Math.round(trail.addG))}, ${Math.min(255, Math.round(trail.addB))})`;
          drawText(
            ctx,
            fonts.asc32x32,
            warpText,
            { x: trail.x, y: trail.y },
            trail.scale,
            color,
            "center",
            trail.opacity
          );
        }
        const opacityWarp = t < 30 ? t / 30 : this.goalBanner.timer < 15 ? this.goalBanner.timer / 15 : 1;
        const warpX = 320 + 20 * sinFixed(t << 9);
        const warpY = 240 + 10 * sinFixed((t << 8) + 16384);
        drawText(
          ctx,
          fonts.asc32x32,
          warpText,
          { x: warpX, y: warpY },
          1,
          "#00c0ff",
          "center",
          opacityWarp
        );
      }
    }
    if (this.goalScoreInfo && game2?.goalTimerFrames > 0 && !(game2.isBonusStageActive?.() ?? false)) {
      const scoreInfo = this.goalScoreInfo;
      const baseT = GOAL_SEQUENCE_FRAMES2 - game2.goalTimerFrames;
      const counter = game2.goalTimerFrames;
      const baseX = 24;
      let lineY = 128;
      const font = fonts.asc16x16;
      const labelPhase = (t) => {
        if (t < 60) {
          return null;
        }
        if (t < 90) {
          return { opacity: 0.03333 * (t - 60), offsetX: (t - 90) * 5 };
        }
        if (counter <= 15) {
          return { opacity: 0.06666 * counter, offsetX: 0 };
        }
        return { opacity: 1, offsetX: 0 };
      };
      const valuePhase = (t) => {
        if (t < 120) {
          return null;
        }
        if (t < 150) {
          return { opacity: 0.03333 * (t - 120) };
        }
        if (counter <= 15) {
          return { opacity: 0.06666 * counter };
        }
        return { opacity: 1 };
      };
      const drawScoreLine = (t, label, value, color, addColor = null) => {
        const labelState = labelPhase(t);
        if (!labelState) {
          return;
        }
        const valueState = valuePhase(t);
        const lineTop = lineY - 10;
        const labelWidth = measureText(font, label, 1);
        const labelColor = addColor ? addColor : color;
        drawText(ctx, font, label, { x: baseX + labelState.offsetX, y: lineTop }, 1, labelColor, "left", "top", labelState.opacity);
        if (valueState) {
          drawText(
            ctx,
            font,
            value,
            { x: baseX + labelState.offsetX + labelWidth, y: lineTop },
            1,
            labelColor,
            "left",
            "top",
            valueState.opacity
          );
        }
      };
      let clearColor = "#6060ff";
      if (scoreInfo.goalType === "R") {
        clearColor = "#ff6060";
      } else if (scoreInfo.goalType === "G") {
        clearColor = "#60ff60";
      }
      const clearValue = ` ${padNumber(scoreInfo.clearScore, 5)}`;
      drawScoreLine(baseT, "CLEAR SCORE : ", clearValue, clearColor);
      if (scoreInfo.warpMultiplier > 1) {
        lineY += 20;
        const warpValue = scoreInfo.warpMultiplier < 10 ? `   X ${scoreInfo.warpMultiplier}` : `  X ${scoreInfo.warpMultiplier}`;
        drawScoreLine(baseT - 10, " WARP BONUS   ", warpValue, "#00c0ff");
      }
      if (scoreInfo.timeBonus > 1) {
        lineY += 20;
        drawScoreLine(baseT - 20, " TIME BONUS   ", "   X 2", "#ffff00");
      }
      lineY += 24;
      const floorValue = padNumber(scoreInfo.floorScore, 6);
      const floorT = baseT - 60;
      const flash = Math.max(sinFixed(floorT * 640) * 255, 0);
      const addR = Math.min(255, 255 + flash);
      const addG = Math.min(255, 128 + flash);
      const addB = Math.min(255, flash);
      drawScoreLine(floorT, "FLOOR SCORE : ", floorValue, "#ff8000", `rgb(${Math.round(addR)}, ${Math.round(addG)}, ${Math.round(addB)})`);
    }
    if (this.hurryBanner.timer > 0) {
      const t = this.hurryBanner.duration - this.hurryBanner.timer;
      const flash = Math.floor(t) % 2 === 0 ? 1 : 0;
      const jitterX = (Math.random() - 0.5) * 4;
      const jitterY = (Math.random() - 0.5) * 2;
      drawText(
        ctx,
        fonts.asc32x32,
        "HURRY UP!",
        { x: 320 + jitterX, y: 240 + jitterY },
        1,
        "#ff8800",
        "center",
        flash
      );
    }
    if (this.timeOverBanner.timer > 0) {
      const t = this.timeOverBanner.duration - this.timeOverBanner.timer;
      const opacity = t < 30 ? t / 30 : this.timeOverBanner.timer < 15 ? this.timeOverBanner.timer / 15 : 1;
      let y = 240;
      if (t < 30) {
        y = 240 - (30 - t) * 6;
      } else if (t < 60) {
        y = 240 - 32 * sinFixed((t - 30) * 1092);
      } else if (t < 90) {
        y = 240 - 8 * sinFixed((t - 60) * 1092);
      }
      drawText(ctx, fonts.asc72x64, "TIME OVER", { x: 320, y }, 1, "#ff8c00", "center", "center", opacity);
    }
    if (this.readyBanner.timer > 0) {
      const t = this.readyBanner.duration - this.readyBanner.timer;
      let opacity = 1;
      let scaleX = 1;
      let scaleY = 1;
      if (t < 30) {
        opacity = 0.03333 * t;
        scaleY = sinFixed(t * 546);
      } else if (t < 60) {
        scaleY = 1 - sinFixed((t - 30) * 1092) * 0.2;
      } else if (this.readyBanner.timer <= 15) {
        opacity = 0.06666 * this.readyBanner.timer;
        scaleX = 0.06666 * this.readyBanner.timer;
      }
      drawTextScaled(
        ctx,
        fonts.asc72x64,
        "READY",
        { x: 320, y: 240 },
        scaleX,
        scaleY,
        "#ffc800",
        "center",
        "center",
        opacity
      );
    }
    if (this.perfectBanner.timer > 0) {
      const t = clamp4((this.perfectBanner.duration - this.perfectBanner.timer) / 30, 0, 1);
      const scale = lerp3(5, 0.8, t);
      drawText(ctx, fonts.asc72x64, "PERFECT", { x: 320, y: 240 }, scale, null, "center");
    }
    if (this.bonusFinishBanner.timer > 0) {
      const t = clamp4((this.bonusFinishBanner.duration - this.bonusFinishBanner.timer) / 30, 0, 1);
      const scale = lerp3(5, 0.8, t);
      drawText(ctx, fonts.asc72x64, "BONUS FINISH", { x: 320, y: 240 }, scale, "#ff8800", "center");
    }
    if (this.fallOutBanner.timer > 0) {
      const t = this.fallOutBanner.duration - this.fallOutBanner.timer;
      const opacity = t < 30 ? 0.03333 * t : this.fallOutBanner.timer <= 15 ? 0.06666 * this.fallOutBanner.timer : 1;
      let x = 320;
      let y = 240;
      let scale = 1;
      if (t < 30) {
        y = 240 - (30 - t) * 6;
      } else if (t < 60) {
        y = 240 - 32 * sinFixed((t - 30) * 1092);
      } else if (t < 90) {
        y = 240 - 8 * sinFixed((t - 60) * 1092);
      } else if (t >= 120) {
        x = 496;
        y = 420;
        scale = 0.5;
      } else if (t >= 90) {
        const dt = t - 90;
        x = 320 + dt * 5.86666;
        y = 240 + dt * 6;
        scale = 1 - dt * 0.01666;
      }
      drawText(ctx, fonts.asc72x64, "FALL OUT", { x, y }, scale, "#ff8c00", "center", "center", opacity);
    }
    if (this.floorIntroActive && game2) {
      const floorInfo = game2.course?.getFloorInfo?.();
      const floorNum = floorInfo?.current ?? 1;
      const prefix = floorInfo?.prefix ?? "FLOOR";
      const text = `${prefix} ${floorNum}`;
      const font = fonts.asc72x64;
      const scaleX = 0.8;
      const scaleY = 0.8;
      const centerX = text.length * 57 / 2;
      const spaceIndex = text.indexOf(" ");
      const t = this.floorIntroFrames;
      const fadeFrames = this.floorIntroFadeFrames;
      const fadeOpacity = fadeFrames > 0 ? 0.06666 * fadeFrames : 1;
      let baseColor = "#ffd200";
      if (prefix === "EXTRA") {
        baseColor = "#ffe14d";
      }
      for (let i = 0; i < text.length; i += 1) {
        if (text[i] === " ") {
          continue;
        }
        if (i > spaceIndex) {
          if (t < 30 + spaceIndex * 16) {
            continue;
          }
        } else if (i > 0) {
          if (t < 30 + (i - 1) * 16) {
            continue;
          }
        }
        let xOffset = 0;
        let yOffset = 0;
        if (i === 0 && t < 30) {
          xOffset = (30 - t) * -5;
        } else if (i > 0 && i < spaceIndex && t < 30 + i * 16) {
          xOffset = -3.6 * (30 + i * 16 - t);
        } else if (i > spaceIndex) {
          xOffset = -28;
        }
        if (fadeFrames > 0) {
          const dir = i < spaceIndex ? i & 1 ? 1 : -1 : i & 1 ? -1 : 1;
          yOffset = (15 - fadeFrames) * 8 * dir;
        }
        const x = 320 - centerX + 14.4 + 57.6 * i + xOffset;
        const y = 240 - 25.6 + yOffset;
        let charOpacity = fadeOpacity;
        if (i > spaceIndex) {
          charOpacity = Math.min(0.0625 * (t - 30 - spaceIndex * 16), fadeOpacity);
        } else if (i > 0) {
          charOpacity = Math.min(0.0625 * (t - 30 - (i - 1) * 16), fadeOpacity);
        } else if (i === 0 && fadeFrames > 0) {
          charOpacity = fadeOpacity;
        }
        drawGlyph(
          ctx,
          font,
          text.charCodeAt(i),
          x,
          y + 25.6,
          scaleX,
          scaleY,
          baseColor,
          charOpacity
        );
      }
    }
    if (this.bonusFloorActive) {
      const t = this.bonusFloorFrames;
      const text = "BONUS FLOOR";
      const font = fonts.asc72x64;
      let opacity = 1;
      let rotation = 0;
      if (t < 60) {
        opacity = 0.01666 * t;
        rotation = (60 - t) * 273;
      }
      let x = 320;
      let y = 300;
      let scale = 0.5;
      if (t >= 150) {
        x = 500;
        y = 452;
        scale = 0.3;
      } else if (t >= 120) {
        const dt = t - 120;
        x = 320 + dt * 6;
        y = 300 + dt * 5.066666;
        scale = 0.5 - dt * 6666e-6;
      }
      const rotationRad = rotation * Math.PI / 32768;
      const textWidth = measureText(font, text, scale);
      let cursorX = x - textWidth / 2;
      const top = y - font.params.lineHeight * scale / 2;
      for (const ch of text) {
        if (ch === " ") {
          cursorX += font.params.spaceWidth * scale;
          continue;
        }
        drawGlyphRotatedTopLeft(
          ctx,
          font,
          ch.charCodeAt(0),
          cursorX,
          top,
          scale,
          rotationRad,
          "#ff8800",
          opacity
        );
        cursorX += font.params.spaceWidth * scale;
      }
    }
    if (this.finalFloorActive) {
      const t = this.finalFloorFrames;
      const floorInfo = game2?.course?.getFloorInfo?.();
      const difficulty = floorInfo?.difficultyIndex ?? 2;
      let baseColor = "#ffc000";
      if (difficulty === 0) {
        baseColor = "#00d000";
      } else if (difficulty === 1) {
        baseColor = "#0000e0";
      }
      const text = "FINAL FLOOR";
      const font = fonts.asc72x64;
      const baseScale = 0.5;
      const textWidth = measureText(font, text, 1);
      const w = textWidth * baseScale;
      const h = font.params.lineHeight * baseScale;
      let x = 320;
      let y = 300;
      let scale = baseScale;
      if (t >= 150) {
        x = 500;
        y = 452;
        scale = 0.3;
      } else if (t >= 120) {
        const dt = t - 120;
        x = 320 + dt * 6;
        y = 300 + dt * 5.066666;
        scale = baseScale - dt * 6666e-6;
      }
      if (t <= 120) {
        let advance = 0;
        for (let i = 0; i < text.length; i += 1) {
          if (i > Math.floor(t / 10)) {
            break;
          }
          const char = text[i];
          if (char === " ") {
            advance += font.params.spaceWidth * baseScale;
            continue;
          }
          const charWidth = font.params.spaceWidth;
          const elapsed = clamp4((t - 10 * i) / 10, 0, 1);
          const sx = 1 + (i % 2 === 0 ? 5 * (1 - elapsed) : 0);
          const sy = 1 + (i % 2 === 0 ? 0 : 5 * (1 - elapsed));
          const charX = x - w * 0.5 + advance - charWidth * baseScale * (sx - 1) * 0.5;
          const charY = y - h * 0.5 - h * (sy - 1) * 0.5;
          drawGlyph(
            ctx,
            font,
            char.charCodeAt(0),
            charX,
            charY + h * 0.5,
            baseScale * sx,
            baseScale * sy,
            baseColor,
            elapsed
          );
          advance += charWidth * baseScale;
        }
      } else {
        drawText(ctx, font, text, { x, y }, scale, baseColor, "center", 1);
      }
    }
  }
};

// src/main.ts
function clamp5(value, min, max2) {
  if (value < min) {
    return min;
  }
  if (value > max2) {
    return max2;
  }
  return value;
}
var DEFAULT_PAD_GATE = [
  [84, 0],
  [59, 59],
  [0, 84],
  [-59, 59],
  [-84, 0],
  [-59, -59],
  [0, -84],
  [59, -59]
];
function getStageBasePath(gameSource) {
  const selection = gameSourceSelect?.value;
  const usePack = !!selection && selection.startsWith("pack:") && hasPackForGameSource(gameSource);
  if (usePack) {
    return getPackStageBasePath(gameSource) ?? STAGE_BASE_PATHS[gameSource] ?? STAGE_BASE_PATHS[GAME_SOURCES.SMB1];
  }
  return STAGE_BASE_PATHS[gameSource] ?? STAGE_BASE_PATHS[GAME_SOURCES.SMB1];
}
var NAOMI_STAGE_IDS = /* @__PURE__ */ new Set([
  10,
  19,
  20,
  30,
  49,
  50,
  60,
  70,
  80,
  92,
  96,
  97,
  98,
  99,
  100,
  114,
  115,
  116,
  117,
  118,
  119,
  120
]);
function isNaomiStage(stageId) {
  return NAOMI_STAGE_IDS.has(stageId);
}
var loadedPacks = /* @__PURE__ */ new Map();
var activePackKey = null;
function normalizePackKey(base) {
  return base.replace(/\s+/g, "-").toLowerCase();
}
function createPackKey(pack) {
  const base = normalizePackKey(pack.manifest.id || pack.manifest.name || "pack");
  if (!loadedPacks.has(base)) {
    return base;
  }
  let counter = 2;
  while (loadedPacks.has(`${base}-${counter}`)) {
    counter += 1;
  }
  return `${base}-${counter}`;
}
function resolveSelectedGameSource() {
  const selection = gameSourceSelect?.value ?? GAME_SOURCES.SMB1;
  if (selection.startsWith("pack:")) {
    const pack = getActivePack();
    if (pack) {
      return { selection, gameSource: pack.manifest.gameSource };
    }
    return { selection, gameSource: GAME_SOURCES.SMB1 };
  }
  return { selection, gameSource: selection };
}
function updatePackUi() {
  const pack = getActivePack();
  if (packStatus) {
    if (!pack) {
      if (loadedPacks.size > 0) {
        packStatus.textContent = `Loaded packs: ${loadedPacks.size}`;
      } else {
        packStatus.textContent = "No pack loaded";
      }
    } else if (loadedPacks.size <= 1) {
      packStatus.textContent = `Loaded: ${pack.manifest.name} (${pack.manifest.gameSource.toUpperCase()})`;
    } else {
      packStatus.textContent = `Loaded packs: ${loadedPacks.size} (active: ${pack.manifest.name})`;
    }
  }
  if (!gameSourceSelect) {
    return;
  }
  for (const option of Array.from(gameSourceSelect.querySelectorAll('option[data-pack="true"]'))) {
    option.remove();
  }
  for (const [key, entry] of loadedPacks.entries()) {
    const option = document.createElement("option");
    option.value = `pack:${key}`;
    option.textContent = `Pack: ${entry.manifest.name}`;
    option.dataset.pack = "true";
    gameSourceSelect.appendChild(option);
  }
  if (activePackKey && gameSourceSelect.querySelector(`option[value="pack:${activePackKey}"]`)) {
    gameSourceSelect.value = `pack:${activePackKey}`;
  }
}
function syncPackEnabled() {
  if (!gameSourceSelect) {
    return;
  }
  const selection = gameSourceSelect.value;
  if (selection.startsWith("pack:")) {
    const key = selection.slice("pack:".length);
    const pack = loadedPacks.get(key) ?? null;
    activePackKey = pack ? key : null;
    setActivePack(pack);
    setPackEnabled(!!pack);
  } else {
    activePackKey = null;
    setPackEnabled(false);
  }
}
var canvas = document.getElementById("game");
var hudCanvas = document.getElementById("hud-canvas");
var overlay = document.getElementById("overlay");
var overlayPanel = document.querySelector(".panel");
var stageFade = document.getElementById("stage-fade");
var mobileMenuButton = document.getElementById("mobile-menu-button");
var fullscreenButton = document.getElementById("fullscreen-button");
var controlModeField = document.getElementById("control-mode-field");
var controlModeSelect = document.getElementById("control-mode");
var gyroRecalibrateButton = document.getElementById("gyro-recalibrate");
var gyroHelper = document.getElementById("gyro-helper");
var gyroHelperFrame = gyroHelper?.querySelector(".gyro-helper-frame");
var gyroHelperDevice = document.getElementById("gyro-helper-device");
var controlModeSettings = document.getElementById("control-mode-settings");
var gyroSettings = document.getElementById("gyro-settings");
var touchSettings = document.getElementById("touch-settings");
var inputFalloffBlock = document.getElementById("input-falloff-block");
var gamepadCalibrationBlock = document.getElementById("gamepad-calibration-block");
var gyroSensitivityInput = document.getElementById("gyro-sensitivity");
var gyroSensitivityValue = document.getElementById("gyro-sensitivity-value");
var joystickSizeInput = document.getElementById("joystick-size");
var joystickSizeValue = document.getElementById("joystick-size-value");
var inputFalloffInput = document.getElementById("input-falloff");
var inputFalloffValue = document.getElementById("input-falloff-value");
var inputFalloffCurveWrap = document.getElementById("input-falloff-curve-wrap");
var inputFalloffPath = document.getElementById("input-falloff-path");
var inputPreview = document.getElementById("input-preview");
var inputRawDot = document.getElementById("input-raw-dot");
var inputProcessedDot = document.getElementById("input-processed-dot");
var gamepadCalibrationOverlay = document.getElementById("gamepad-calibration");
var gamepadCalibrationMap = document.getElementById("gamepad-calibration-map");
var gamepadCalibrationButton = document.getElementById("gamepad-calibrate");
var gamepadCalibrationCtx = gamepadCalibrationMap?.getContext("2d") ?? null;
var startButton = document.getElementById("start");
var resumeButton = document.getElementById("resume");
var difficultySelect = document.getElementById("difficulty");
var smb1StageSelect = document.getElementById("smb1-stage");
var gameSourceSelect = document.getElementById("game-source");
var packLoadButton = document.getElementById("pack-load");
var packPicker = document.getElementById("pack-picker");
var packLoadZipButton = document.getElementById("pack-load-zip");
var packLoadFolderButton = document.getElementById("pack-load-folder");
var packStatus = document.getElementById("pack-status");
var packFileInput = document.getElementById("pack-file");
var packFolderInput = document.getElementById("pack-folder");
var replaySaveButton = document.getElementById("replay-save");
var replayLoadButton = document.getElementById("replay-load");
var replayFileInput = document.getElementById("replay-file");
var replayStatus = document.getElementById("replay-status");
var smb1Fields = document.getElementById("smb1-fields");
var smb2Fields = document.getElementById("smb2-fields");
var smb2ModeSelect = document.getElementById("smb2-mode");
var smb2ChallengeSelect = document.getElementById("smb2-challenge");
var smb2ChallengeStageSelect = document.getElementById("smb2-challenge-stage");
var smb2StoryWorldSelect = document.getElementById("smb2-story-world");
var smb2StoryStageSelect = document.getElementById("smb2-story-stage");
var interpolationToggle = document.getElementById("interpolation");
var musicVolumeInput = document.getElementById("music-volume");
var sfxVolumeInput = document.getElementById("sfx-volume");
var announcerVolumeInput = document.getElementById("announcer-volume");
var musicVolumeValue = document.getElementById("music-volume-value");
var sfxVolumeValue = document.getElementById("sfx-volume-value");
var announcerVolumeValue = document.getElementById("announcer-volume-value");
var hudStatus = document.getElementById("hud-status");
var defaultChallengeOptions = Array.from(smb2ChallengeSelect?.options ?? []).map((option) => ({
  value: option.value,
  label: option.textContent ?? option.value
}));
var hasTouch = "ontouchstart" in window || (navigator.maxTouchPoints ?? 0) > 0;
function updateMobileMenuButtonVisibility() {
  if (!mobileMenuButton) {
    return;
  }
  const shouldShow = hasTouch && overlay.classList.contains("hidden") && running;
  mobileMenuButton.classList.toggle("hidden", !shouldShow);
}
function updateFullscreenButtonVisibility() {
  if (!fullscreenButton) {
    return;
  }
  const root = document.documentElement;
  const supportsFullscreen = typeof root.requestFullscreen === "function" || typeof root.webkitRequestFullscreen === "function";
  const isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement);
  const shouldShow = hasTouch && supportsFullscreen;
  fullscreenButton.classList.toggle("hidden", !shouldShow);
  if (!shouldShow) {
    return;
  }
  fullscreenButton.textContent = supportsFullscreen && isFullscreen ? "Exit Fullscreen" : "Fullscreen";
}
function setOverlayVisible(visible) {
  overlay.classList.toggle("hidden", !visible);
  canvas.style.pointerEvents = visible ? "none" : "auto";
  document.body.classList.toggle("gameplay-active", !visible);
  updateMobileMenuButtonVisibility();
  updateFullscreenButtonVisibility();
  syncTouchPreviewVisibility();
}
var STAGE_FADE_MS = 333;
var currentSmb2LikeMode = null;
function hasSmb2LikeMode(config) {
  return typeof config === "object" && config !== null && "mode" in config;
}
function triggerStageFade(color) {
  if (!stageFade) {
    return;
  }
  stageFade.style.transition = "none";
  stageFade.style.backgroundColor = color;
  stageFade.style.opacity = "1";
  stageFade.getBoundingClientRect();
  stageFade.style.transition = `opacity ${STAGE_FADE_MS}ms linear`;
  stageFade.style.opacity = "0";
}
function maybeStartSmb2LikeStageFade() {
  if (activeGameSource === GAME_SOURCES.SMB1 || !currentSmb2LikeMode) {
    return;
  }
  const color = currentSmb2LikeMode === "story" ? "#fff" : "#000";
  triggerStageFade(color);
}
function resizeCanvasToDisplaySize(canvasElem) {
  const dpr = window.devicePixelRatio || 1;
  const viewport = window.visualViewport;
  const cssWidth = viewport?.width || canvasElem.clientWidth || window.innerWidth;
  const cssHeight = viewport?.height || canvasElem.clientHeight || window.innerHeight;
  const width = Math.floor(cssWidth * dpr);
  const height = Math.floor(cssHeight * dpr);
  if (canvasElem.width !== width || canvasElem.height !== height) {
    canvasElem.width = width;
    canvasElem.height = height;
  }
}
async function fetchSlice(path) {
  return fetchPackSlice(path);
}
async function initPackFromQuery() {
  const packParam = new URLSearchParams(window.location.search).get("pack");
  if (!packParam) {
    return;
  }
  try {
    const pack = await loadPackFromUrl(packParam);
    await applyLoadedPack(pack);
  } catch (error) {
    console.error(error);
    if (hudStatus) {
      hudStatus.textContent = "Failed to load pack.";
    }
  }
}
async function applyLoadedPack(pack) {
  const key = createPackKey(pack);
  loadedPacks.set(key, pack);
  activePackKey = key;
  setActivePack(pack);
  setPackEnabled(true);
  updatePackUi();
  updateSmb2ChallengeStages();
  updateSmb2StoryOptions();
  updateSmb1Stages();
  updateGameSourceFields();
}
async function loadRenderStage(stageId) {
  const stageIdStr = String(stageId).padStart(3, "0");
  const stageInfo = STAGE_INFO_MAP.get(stageId);
  if (!stageInfo) {
    throw new Error(`Missing StageInfo for stage ${stageId}`);
  }
  const stageBasePath = getStageBasePath(GAME_SOURCES.SMB1);
  const stagedefPath = `${stageBasePath}/st${stageIdStr}/STAGE${stageIdStr}.lz`;
  const stageGmaPath = `${stageBasePath}/st${stageIdStr}/st${stageIdStr}.gma`;
  const stageTplPath = `${stageBasePath}/st${stageIdStr}/st${stageIdStr}.tpl`;
  const commonGmaPath = `${stageBasePath}/init/common.gma`;
  const commonTplPath = `${stageBasePath}/init/common.tpl`;
  const commonNlPath = `${stageBasePath}/init/common_p.lz`;
  const commonNlTplPath = `${stageBasePath}/init/common.lz`;
  const bgName = stageInfo.bgInfo.fileName;
  const bgGmaPath = `${stageBasePath}/bg/${bgName}.gma`;
  const bgTplPath = `${stageBasePath}/bg/${bgName}.tpl`;
  const isNaomi = isNaomiStage(stageId);
  const stageNlObjPath = isNaomi ? `${stageBasePath}/st${stageIdStr}/st${stageIdStr}_p.lz` : null;
  const stageNlTplPath = isNaomi ? `${stageBasePath}/st${stageIdStr}/st${stageIdStr}.lz` : null;
  const [
    stagedefBuf,
    stageGmaBuf,
    stageTplBuf,
    commonGmaBuf,
    commonTplBuf,
    commonNlBuf,
    commonNlTplBuf,
    bgGmaBuf,
    bgTplBuf,
    stageNlObjBuf,
    stageNlTplBuf
  ] = await Promise.all([
    fetchSlice(stagedefPath),
    fetchSlice(stageGmaPath),
    fetchSlice(stageTplPath),
    fetchSlice(commonGmaPath),
    fetchSlice(commonTplPath),
    fetchSlice(commonNlPath),
    fetchSlice(commonNlTplPath),
    fetchSlice(bgGmaPath),
    fetchSlice(bgTplPath),
    stageNlObjPath ? fetchSlice(stageNlObjPath) : Promise.resolve(null),
    stageNlTplPath ? fetchSlice(stageNlTplPath) : Promise.resolve(null)
  ]);
  const stagedef = parseStagedefLz(stagedefBuf);
  const stageTpl = parseAVTpl2(stageTplBuf, `st${stageIdStr}`);
  const stageGma = parseGma2(stageGmaBuf, stageTpl);
  const commonTpl = parseAVTpl2(commonTplBuf, "common");
  const commonGma = parseGma2(commonGmaBuf, commonTpl);
  const commonNlTpl = parseAVTpl2(decompressLZ(commonNlTplBuf), "common-nl");
  const nlObj = parseObj(decompressLZ(commonNlBuf), commonNlTpl);
  const bgTpl = parseAVTpl2(bgTplBuf, bgName);
  const bgGma = parseGma2(bgGmaBuf, bgTpl);
  let stageNlObj = null;
  let stageNlObjNameMap = null;
  if (stageNlObjBuf && stageNlTplBuf) {
    const nlTpl = parseAVTpl2(decompressLZ(stageNlTplBuf), `st${stageIdStr}-nl`);
    const nlObjBuffer = decompressLZ(stageNlObjBuf);
    stageNlObj = parseObj(nlObjBuffer, nlTpl);
    stageNlObjNameMap = buildObjNameMap(nlObjBuffer);
  }
  return {
    stageInfo,
    stagedef,
    stageGma,
    bgGma,
    commonGma,
    nlObj,
    stageNlObj,
    stageNlObjNameMap,
    gameSource: GAME_SOURCES.SMB1
  };
}
async function loadRenderStageSmb2(stageId, stage, gameSource) {
  if (!stage || stage.format !== "smb2") {
    throw new Error("Missing SMB2 stage data.");
  }
  const stageIdStr = String(stageId).padStart(3, "0");
  const stageInfo = gameSource === GAME_SOURCES.MB2WS ? getMb2wsStageInfo(stageId) : getSmb2StageInfo(stageId);
  const stagedef = convertSmb2StageDef(stage);
  const stageBasePath = getStageBasePath(gameSource) ?? STAGE_BASE_PATHS[GAME_SOURCES.SMB2];
  const stageGmaPath = `${stageBasePath}/st${stageIdStr}/st${stageIdStr}.gma`;
  const stageTplPath = `${stageBasePath}/st${stageIdStr}/st${stageIdStr}.tpl`;
  const commonGmaPath = `${stageBasePath}/init/common.gma`;
  const commonTplPath = `${stageBasePath}/init/common.tpl`;
  const commonNlPath = `${stageBasePath}/init/common_p.lz`;
  const commonNlTplPath = `${stageBasePath}/init/common.lz`;
  const bgName = stageInfo.bgInfo.fileName;
  const bgGmaPath = bgName ? `${stageBasePath}/bg/${bgName}.gma` : "";
  const bgTplPath = bgName ? `${stageBasePath}/bg/${bgName}.tpl` : "";
  const [
    stageGmaBuf,
    stageTplBuf,
    commonGmaBuf,
    commonTplBuf,
    commonNlBuf,
    commonNlTplBuf,
    bgGmaBuf,
    bgTplBuf
  ] = await Promise.all([
    fetchSlice(stageGmaPath),
    fetchSlice(stageTplPath),
    fetchSlice(commonGmaPath),
    fetchSlice(commonTplPath),
    fetchSlice(commonNlPath),
    fetchSlice(commonNlTplPath),
    bgName ? fetchSlice(bgGmaPath) : Promise.resolve(new ArrayBufferSlice(new ArrayBuffer(0))),
    bgName ? fetchSlice(bgTplPath) : Promise.resolve(new ArrayBufferSlice(new ArrayBuffer(0)))
  ]);
  const stageTpl = parseAVTpl2(stageTplBuf, `st${stageIdStr}`);
  const stageGma = parseGma2(stageGmaBuf, stageTpl);
  const commonTpl = parseAVTpl2(commonTplBuf, "common");
  const commonGma = parseGma2(commonGmaBuf, commonTpl);
  const commonNlTpl = parseAVTpl2(decompressLZ(commonNlTplBuf), "common-nl");
  const nlObj = parseObj(decompressLZ(commonNlBuf), commonNlTpl);
  const bgGma = bgName ? parseGma2(bgGmaBuf, parseAVTpl2(bgTplBuf, bgName)) : { nameMap: /* @__PURE__ */ new Map(), idMap: /* @__PURE__ */ new Map() };
  return {
    stageInfo,
    stagedef,
    stageGma,
    bgGma,
    commonGma,
    nlObj,
    stageNlObj: null,
    stageNlObjNameMap: null,
    gameSource
  };
}
var renderer = null;
var gfxDevice = null;
var swapChain = null;
var camera = null;
var viewerInput = null;
var audio = new AudioManager();
var game = new Game({
  audio,
  onReadyToResume: () => {
    resumeButton.disabled = false;
  },
  onPaused: () => {
    paused = true;
    setOverlayVisible(true);
  },
  onResumed: () => {
    paused = false;
    setOverlayVisible(false);
  },
  onStageLoaded: (stageId) => {
    void handleStageLoaded(stageId);
  }
});
game.init();
var hudRenderer = new HudRenderer(hudCanvas);
void hudRenderer.load();
var running = false;
var paused = false;
var lastTime = performance.now();
var lastRenderTime = lastTime;
var lastHudTime = lastTime;
var lastControlModeSettingsCheck = lastTime;
var calibrationActive = false;
var calibrationSamples = [];
var calibrationSectorMax = new Array(8).fill(0);
var calibrationGate = [];
var calibrationFallbackGate = [];
var stageLoadToken = 0;
var renderReady = false;
var activeGameSource = GAME_SOURCES.SMB1;
var interpolationEnabled = true;
var RENDER_FRAME_MS = 1e3 / 60;
var syncState = {
  timeFrames: null,
  bananas: null,
  jamabars: null,
  bananaCollectedByAnimGroup: null,
  animGroupTransforms: null,
  ball: null,
  goalBags: null,
  goalTapes: null,
  confetti: null,
  effects: null,
  switches: null,
  stageTilt: null
};
var cameraEye = vec320.create();
function applyGameCamera(alpha = 1) {
  if (!camera) {
    return;
  }
  const pose = game.getCameraPose(alpha);
  if (!pose) {
    return;
  }
  vec320.set(cameraEye, pose.eye.x, pose.eye.y, pose.eye.z);
  mat419.identity(camera.worldMatrix);
  mat419.translate(camera.worldMatrix, camera.worldMatrix, cameraEye);
  mat419.rotateY(camera.worldMatrix, camera.worldMatrix, pose.rotY * S16_TO_RAD);
  mat419.rotateX(camera.worldMatrix, camera.worldMatrix, pose.rotX * S16_TO_RAD);
  mat419.rotateZ(camera.worldMatrix, camera.worldMatrix, pose.rotZ * S16_TO_RAD);
  camera.worldMatrixUpdated();
}
function initGfx() {
  const gl = canvas.getContext("webgl2", {
    antialias: false,
    preserveDrawingBuffer: false,
    depth: false,
    stencil: false
  });
  if (!gl) {
    throw new Error("WebGL2 is required.");
  }
  const config = new GfxPlatformWebGL2Config();
  config.trackResources = false;
  config.shaderDebug = false;
  swapChain = createSwapChainForWebGL2(gl, config);
  gfxDevice = swapChain.getDevice();
  camera = new Camera();
  camera.clipSpaceNearZ = gfxDevice.queryVendorInfo().clipSpaceNearZ;
  viewerInput = {
    camera,
    time: 0,
    deltaTime: 0,
    backbufferWidth: canvas.width,
    backbufferHeight: canvas.height,
    onscreenTexture: null,
    antialiasingMode: 0 /* None */,
    mouseLocation: { mouseX: 0, mouseY: 0 },
    debugConsole: { addInfoLine: () => {
    } }
  };
  canvas.addEventListener("mousemove", (event) => {
    if (!viewerInput) return;
    viewerInput.mouseLocation.mouseX = event.clientX * window.devicePixelRatio;
    viewerInput.mouseLocation.mouseY = event.clientY * window.devicePixelRatio;
  });
}
function prewarmConfettiRenderer() {
  if (!renderer || !gfxDevice || !swapChain || !viewerInput) {
    return;
  }
  resizeCanvasToDisplaySize(canvas);
  viewerInput.backbufferWidth = canvas.width;
  viewerInput.backbufferHeight = canvas.height;
  swapChain.configureSwapChain(canvas.width, canvas.height);
  gfxDevice.beginFrame();
  viewerInput.onscreenTexture = swapChain.getOnscreenTexture();
  renderer.prewarmConfetti(gfxDevice, viewerInput);
  gfxDevice.endFrame();
}
async function handleStageLoaded(stageId) {
  const token = ++stageLoadToken;
  renderReady = false;
  if (!swapChain || !gfxDevice) {
    initGfx();
  }
  if (activeGameSource !== GAME_SOURCES.SMB1) {
    const stage = game.stage;
    const stageData2 = await loadRenderStageSmb2(stageId, stage, activeGameSource);
    if (token !== stageLoadToken) {
      return;
    }
    if (renderer) {
      renderer.destroy(gfxDevice);
    }
    renderer = new Renderer(gfxDevice, stageData2);
    prewarmConfettiRenderer();
    window.smbStageInfo = {
      stageId,
      gameSource: activeGameSource,
      bgFile: stageData2.stageInfo?.bgInfo?.fileName ?? ""
    };
    applyGameCamera();
    running = true;
    paused = false;
    renderReady = true;
    lastTime = performance.now();
    updateMobileMenuButtonVisibility();
    maybeStartSmb2LikeStageFade();
    return;
  }
  const stageData = await loadRenderStage(stageId);
  if (token !== stageLoadToken) {
    return;
  }
  if (renderer) {
    renderer.destroy(gfxDevice);
  }
  renderer = new Renderer(gfxDevice, stageData);
  prewarmConfettiRenderer();
  window.smbStageInfo = {
    stageId,
    gameSource: activeGameSource,
    bgFile: stageData.stageInfo?.bgInfo?.fileName ?? ""
  };
  applyGameCamera();
  running = true;
  paused = false;
  renderReady = true;
  lastTime = performance.now();
  updateMobileMenuButtonVisibility();
  maybeStartSmb2LikeStageFade();
}
function setSelectOptions(select, values) {
  select.innerHTML = "";
  for (const option of values) {
    const elem = document.createElement("option");
    elem.value = option.value;
    elem.textContent = option.label;
    select.appendChild(elem);
  }
}
function getPackChallengeOrder(gameSource) {
  if (!hasPackForGameSource(gameSource)) {
    return null;
  }
  return getPackCourseData()?.challenge?.order ?? null;
}
function getPackStoryOrder(gameSource) {
  if (!hasPackForGameSource(gameSource)) {
    return null;
  }
  return getPackCourseData()?.story ?? null;
}
function getSmb2LikeChallengeOrder(gameSource) {
  const packOrder = getPackChallengeOrder(gameSource);
  if (packOrder) {
    return packOrder;
  }
  return gameSource === GAME_SOURCES.MB2WS ? MB2WS_CHALLENGE_ORDER : SMB2_CHALLENGE_ORDER;
}
function getSmb2LikeStoryOrder(gameSource) {
  const packOrder = getPackStoryOrder(gameSource);
  if (packOrder) {
    return packOrder;
  }
  return gameSource === GAME_SOURCES.MB2WS ? MB2WS_STORY_ORDER : SMB2_STORY_ORDER;
}
function updateSmb2ChallengeStages() {
  if (!smb2ChallengeSelect || !smb2ChallengeStageSelect) {
    return;
  }
  const { gameSource } = resolveSelectedGameSource();
  const order = getSmb2LikeChallengeOrder(gameSource);
  if (hasPackForGameSource(gameSource) && order) {
    const keys = Object.keys(order);
    if (keys.length > 0) {
      const current = smb2ChallengeSelect.value;
      const options2 = keys.map((key) => ({ value: key, label: key }));
      setSelectOptions(smb2ChallengeSelect, options2);
      smb2ChallengeSelect.value = keys.includes(current) ? current : keys[0];
    }
  } else if (defaultChallengeOptions.length > 0) {
    const current = smb2ChallengeSelect.value;
    setSelectOptions(smb2ChallengeSelect, defaultChallengeOptions);
    const values = defaultChallengeOptions.map((option) => option.value);
    smb2ChallengeSelect.value = values.includes(current) ? current : defaultChallengeOptions[0].value;
  }
  const difficulty = smb2ChallengeSelect.value;
  const stages = order[difficulty] ?? [];
  const options = stages.map((_, index) => ({
    value: String(index + 1),
    label: `Stage ${index + 1}`
  }));
  setSelectOptions(smb2ChallengeStageSelect, options);
}
function updateSmb1Stages() {
  if (!difficultySelect || !smb1StageSelect) {
    return;
  }
  const stages = getStageListForDifficulty(difficultySelect.value);
  const options = stages.map((stage, index) => ({
    value: String(index),
    label: stage.label
  }));
  setSelectOptions(smb1StageSelect, options);
}
function updateSmb2StoryOptions() {
  if (!smb2StoryWorldSelect || !smb2StoryStageSelect) {
    return;
  }
  const { gameSource } = resolveSelectedGameSource();
  const storyOrder = getSmb2LikeStoryOrder(gameSource);
  if (storyOrder.length === 0) {
    setSelectOptions(smb2StoryWorldSelect, []);
    setSelectOptions(smb2StoryStageSelect, []);
    return;
  }
  const worldOptions = storyOrder.map((_, index) => ({
    value: String(index + 1),
    label: `World ${index + 1}`
  }));
  setSelectOptions(smb2StoryWorldSelect, worldOptions);
  const currentWorld = Math.max(0, Math.min(storyOrder.length - 1, Number(smb2StoryWorldSelect.value ?? 1) - 1));
  smb2StoryWorldSelect.value = String(currentWorld + 1);
  const stageList = storyOrder[currentWorld] ?? [];
  const stageOptions = stageList.map((_, index) => ({
    value: String(index + 1),
    label: `Stage ${index + 1}`
  }));
  setSelectOptions(smb2StoryStageSelect, stageOptions);
  const currentStage = Math.max(0, Math.min(stageList.length - 1, Number(smb2StoryStageSelect.value ?? 1) - 1));
  smb2StoryStageSelect.value = String(currentStage + 1);
}
function updateSmb2ModeFields() {
  if (!smb2ModeSelect) {
    return;
  }
  const isChallenge = smb2ModeSelect.value === "challenge";
  document.getElementById("smb2-challenge-fields")?.classList.toggle("hidden", !isChallenge);
  document.getElementById("smb2-story-fields")?.classList.toggle("hidden", isChallenge);
}
function updateGameSourceFields() {
  const { gameSource } = resolveSelectedGameSource();
  const isSmb2Like = gameSource !== GAME_SOURCES.SMB1;
  smb1Fields?.classList.toggle("hidden", isSmb2Like);
  smb2Fields?.classList.toggle("hidden", !isSmb2Like);
  updateSmb2ModeFields();
  updateSmb2ChallengeStages();
  updateSmb2StoryOptions();
}
function buildSmb1CourseConfig() {
  const difficulty = difficultySelect?.value ?? "beginner";
  const stageIndex = Math.max(0, Number(smb1StageSelect?.value ?? 0));
  return { difficulty, stageIndex };
}
function buildSmb2CourseConfig() {
  const mode = smb2ModeSelect?.value === "story" ? "story" : "challenge";
  if (mode === "story") {
    const worldIndex = Math.max(0, Number(smb2StoryWorldSelect?.value ?? 1) - 1);
    const stageIndex2 = Math.max(0, Number(smb2StoryStageSelect?.value ?? 1) - 1);
    return { mode, worldIndex, stageIndex: stageIndex2 };
  }
  const difficulty = smb2ChallengeSelect?.value ?? "beginner";
  const stageIndex = Math.max(0, Number(smb2ChallengeStageSelect?.value ?? 1) - 1);
  return { mode, difficulty, stageIndex };
}
function buildMb2wsCourseConfig() {
  const mode = smb2ModeSelect?.value === "story" ? "story" : "challenge";
  if (mode === "story") {
    const worldIndex = Math.max(0, Number(smb2StoryWorldSelect?.value ?? 1) - 1);
    const stageIndex2 = Math.max(0, Number(smb2StoryStageSelect?.value ?? 1) - 1);
    return { mode, worldIndex, stageIndex: stageIndex2 };
  }
  const difficulty = smb2ChallengeSelect?.value ?? "beginner";
  const stageIndex = Math.max(0, Number(smb2ChallengeStageSelect?.value ?? 1) - 1);
  return { mode, difficulty, stageIndex };
}
async function startStage(difficulty) {
  setOverlayVisible(false);
  resumeButton.disabled = true;
  if (hudStatus) {
    hudStatus.textContent = "";
  }
  game.setReplayMode(false);
  game.setGameSource(activeGameSource);
  game.stageBasePath = getStageBasePath(activeGameSource);
  currentSmb2LikeMode = activeGameSource !== GAME_SOURCES.SMB1 && hasSmb2LikeMode(difficulty) ? difficulty.mode : null;
  void audio.resume();
  await game.start(difficulty);
}
function setReplayStatus(text) {
  if (replayStatus) {
    replayStatus.textContent = text;
  }
}
async function startReplay(replay) {
  setOverlayVisible(false);
  resumeButton.disabled = true;
  if (hudStatus) {
    hudStatus.textContent = "";
  }
  game.setReplayMode(true, true);
  activeGameSource = replay.gameSource;
  if (gameSourceSelect) {
    gameSourceSelect.value = replay.gameSource;
  }
  updateGameSourceFields();
  game.setGameSource(replay.gameSource);
  game.stageBasePath = getStageBasePath(replay.gameSource);
  currentSmb2LikeMode = null;
  game.course = null;
  void audio.resume();
  await game.loadStage(replay.stageId);
  if (game.ball && game.stage) {
    const startTick = Math.max(0, replay.inputStartTick ?? 0);
    game.introTotalFrames = startTick;
    game.introTimerFrames = startTick;
    game.cameraController?.initForStage(game.ball, game.ball.startRotY, game.stageRuntime);
  }
  game.replayInputStartTick = Math.max(0, replay.inputStartTick ?? 0);
  game.setInputFeed(replay.inputs);
  game.paused = false;
  while (game.simTick < game.replayInputStartTick) {
    game.update(game.fixedStep);
  }
  game.replayAutoFastForward = false;
  game.setFixedTickMode(false, 1);
  setReplayStatus(`Replay loaded (stage ${replay.stageId})`);
}
function downloadReplay(replay) {
  const label = String(replay.stageId).padStart(3, "0");
  const filename = `replay_${replay.gameSource}_st${label}.json`;
  const blob = new Blob([JSON.stringify(replay, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const link = document.createElement("a");
  link.href = url;
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  link.remove();
  setTimeout(() => URL.revokeObjectURL(url), 1e3);
}
function bindVolumeControl(input, output, apply) {
  if (!input) {
    return;
  }
  const update = () => {
    const value = Number(input.value) / 100;
    apply(value);
    if (output) {
      output.value = `${Math.round(value * 100)}%`;
      output.textContent = output.value;
    }
  };
  input.addEventListener("input", update);
  update();
}
function readStoredNumber(key, fallback) {
  const raw = localStorage.getItem(key);
  const value = raw === null ? NaN : Number(raw);
  return Number.isFinite(value) ? value : fallback;
}
function bindRangeControl(input, output, key, fallback, format, apply) {
  if (!input) {
    return;
  }
  const initial = readStoredNumber(key, fallback);
  input.value = String(initial);
  const update = () => {
    const value = Number(input.value);
    apply(value);
    if (output) {
      output.value = format(value);
      output.textContent = output.value;
    }
    localStorage.setItem(key, String(value));
  };
  input.addEventListener("input", update);
  update();
}
function updateFalloffCurve(power) {
  if (!inputFalloffPath) {
    return;
  }
  const steps = 24;
  let path = "M 0 100";
  for (let i = 1; i <= steps; i += 1) {
    const t = i / steps;
    const x = t * 100;
    const y = 100 - Math.pow(t, power) * 100;
    path += ` L ${x.toFixed(2)} ${y.toFixed(2)}`;
  }
  inputFalloffPath.setAttribute("d", path);
}
function updateInputPreview() {
  if (!inputPreview || !inputRawDot || !inputProcessedDot) {
    return;
  }
  const raw = game.input?.getRawInputPreview?.();
  if (!raw) {
    inputRawDot.style.opacity = "0";
    inputProcessedDot.style.opacity = "0";
    return;
  }
  const processed = game.input?.applyInputFalloffToStick?.(raw) ?? raw;
  inputRawDot.style.opacity = "1";
  inputProcessedDot.style.opacity = "1";
  const placeDot = (dot, value) => {
    const clampedX = clamp5(value.x, -1, 1);
    const clampedY = clamp5(value.y, -1, 1);
    const x = (clampedX + 1) / 2 * 100;
    const y = (clampedY + 1) / 2 * 100;
    dot.style.left = `${x}%`;
    dot.style.top = `${y}%`;
  };
  placeDot(inputRawDot, raw);
  placeDot(inputProcessedDot, processed);
}
function getConnectedGamepad() {
  const active = game.input?.getActiveGamepad?.();
  if (active?.connected) {
    return active;
  }
  const pads = navigator.getGamepads?.() ?? navigator.webkitGetGamepads?.();
  if (!pads) {
    return null;
  }
  for (const pad of pads) {
    if (pad?.connected) {
      return pad;
    }
  }
  return null;
}
function rebuildCalibrationGate() {
  const sectorAngle = Math.PI * 2 / 8;
  calibrationGate = calibrationSectorMax.map((length, i) => {
    const fallback = calibrationFallbackGate[i] ?? DEFAULT_PAD_GATE[i];
    const fallbackLength = Math.hypot(fallback[0], fallback[1]);
    const use = clamp5(length > 10 ? length : fallbackLength, 0, 127);
    const angle = i * sectorAngle;
    return [Math.cos(angle) * use, Math.sin(angle) * use];
  });
}
function drawCalibrationMap() {
  if (!gamepadCalibrationCtx || !gamepadCalibrationMap) {
    return;
  }
  const { width, height } = gamepadCalibrationMap;
  const centerX = width / 2;
  const centerY = height / 2;
  const scale = (Math.min(width, height) / 2 - 14) / 128;
  gamepadCalibrationCtx.clearRect(0, 0, width, height);
  gamepadCalibrationCtx.strokeStyle = "rgba(255, 255, 255, 0.12)";
  gamepadCalibrationCtx.lineWidth = 1;
  gamepadCalibrationCtx.beginPath();
  gamepadCalibrationCtx.moveTo(centerX, 12);
  gamepadCalibrationCtx.lineTo(centerX, height - 12);
  gamepadCalibrationCtx.moveTo(12, centerY);
  gamepadCalibrationCtx.lineTo(width - 12, centerY);
  gamepadCalibrationCtx.stroke();
  gamepadCalibrationCtx.fillStyle = "rgba(255, 255, 255, 0.45)";
  for (const sample of calibrationSamples) {
    const x = centerX + sample.x * scale;
    const y = centerY + sample.y * scale;
    gamepadCalibrationCtx.fillRect(x - 1, y - 1, 2, 2);
  }
  if (calibrationGate.length === 8) {
    gamepadCalibrationCtx.strokeStyle = "rgba(255, 159, 28, 0.9)";
    gamepadCalibrationCtx.lineWidth = 2;
    gamepadCalibrationCtx.beginPath();
    calibrationGate.forEach((point, index) => {
      const x = centerX + point[0] * scale;
      const y = centerY + point[1] * scale;
      if (index === 0) {
        gamepadCalibrationCtx.moveTo(x, y);
      } else {
        gamepadCalibrationCtx.lineTo(x, y);
      }
    });
    gamepadCalibrationCtx.closePath();
    gamepadCalibrationCtx.stroke();
  }
}
function startGamepadCalibration() {
  if (!gamepadCalibrationOverlay) {
    return;
  }
  calibrationActive = true;
  calibrationSamples = [];
  calibrationSectorMax = new Array(8).fill(0);
  calibrationFallbackGate = game.input?.getPadGate?.() ?? DEFAULT_PAD_GATE.map((point) => [point[0], point[1]]);
  calibrationGate = calibrationFallbackGate.map((point) => [point[0], point[1]]);
  gamepadCalibrationOverlay.classList.remove("hidden");
  gamepadCalibrationOverlay.setAttribute("aria-hidden", "false");
  drawCalibrationMap();
}
function stopGamepadCalibration() {
  if (!calibrationActive) {
    return;
  }
  calibrationActive = false;
  if (calibrationGate.length === 8) {
    game.input?.setPadGate?.(calibrationGate);
  }
  gamepadCalibrationOverlay?.classList.add("hidden");
  gamepadCalibrationOverlay?.setAttribute("aria-hidden", "true");
}
function updateGamepadCalibration() {
  if (!calibrationActive) {
    return;
  }
  const pad = getConnectedGamepad();
  if (!pad) {
    drawCalibrationMap();
    return;
  }
  if (pad.buttons?.some((button) => button.pressed)) {
    stopGamepadCalibration();
    return;
  }
  const rawX = clamp5((pad.axes[0] ?? 0) * 127, -128, 127);
  const rawY = clamp5((pad.axes[1] ?? 0) * 127, -128, 127);
  const magnitude = Math.hypot(rawX, rawY);
  if (magnitude > 6) {
    calibrationSamples.push({ x: rawX, y: rawY });
    if (calibrationSamples.length > 600) {
      calibrationSamples.shift();
    }
    const sectorAngle = Math.PI * 2 / 8;
    let angle = Math.atan2(rawY, rawX);
    if (angle < 0) {
      angle += Math.PI * 2;
    }
    const sector = Math.floor((angle + sectorAngle / 2) / sectorAngle) % 8;
    const axisAngle = sector * sectorAngle;
    const axisX = Math.cos(axisAngle);
    const axisY = Math.sin(axisAngle);
    const projection = rawX * axisX + rawY * axisY;
    const length = Math.abs(projection);
    if (length > calibrationSectorMax[sector]) {
      calibrationSectorMax[sector] = length;
      rebuildCalibrationGate();
    }
  }
  drawCalibrationMap();
}
function updateControlModeSettingsVisibility() {
  if (!controlModeSelect || !controlModeSettings) {
    return;
  }
  const hasOptions = controlModeSelect.options.length > 0;
  const pads = navigator.getGamepads?.() ?? navigator.webkitGetGamepads?.();
  const hasConnectedPad = !!pads && Array.from(pads).some((pad) => pad?.connected);
  const hasController = hasConnectedPad || !!game.input?.getActiveGamepad?.();
  const showSettings = hasOptions || hasController;
  controlModeSettings.classList.toggle("hidden", !showSettings);
  if (!hasOptions) {
    gyroSettings?.classList.add("hidden");
    touchSettings?.classList.add("hidden");
    inputFalloffBlock?.classList.toggle("hidden", !hasController);
    inputFalloffCurveWrap?.classList.toggle("hidden", !hasController);
    inputPreview?.classList.toggle("hidden", !hasController);
    gamepadCalibrationBlock?.classList.toggle("hidden", !hasController);
    return;
  }
  const mode = controlModeSelect.value;
  gyroSettings?.classList.toggle("hidden", mode !== "gyro");
  touchSettings?.classList.toggle("hidden", mode !== "touch");
  const showFalloff = mode === "touch" || hasController;
  inputFalloffBlock?.classList.toggle("hidden", !showFalloff);
  const hideCurve = mode === "gyro";
  inputFalloffCurveWrap?.classList.toggle("hidden", hideCurve);
  inputPreview?.classList.toggle("hidden", hideCurve);
  gamepadCalibrationBlock?.classList.toggle("hidden", !hasController);
}
function maybeUpdateControlModeSettings(now) {
  if (now - lastControlModeSettingsCheck < 1e3) {
    return;
  }
  lastControlModeSettingsCheck = now;
  updateControlModeSettingsVisibility();
}
function syncTouchPreviewVisibility() {
  const overlayVisible = !overlay.classList.contains("hidden");
  const mode = controlModeSelect?.value;
  const shouldPreview = overlayVisible && mode === "touch" && !isOverlayPanelNearBottom();
  game.input?.setTouchPreview?.(shouldPreview);
}
function isOverlayPanelNearBottom() {
  if (!overlayPanel) {
    return false;
  }
  const buffer = 24;
  return overlayPanel.scrollTop + overlayPanel.clientHeight >= overlayPanel.scrollHeight - buffer;
}
function renderFrame(now) {
  requestAnimationFrame(renderFrame);
  updateGyroHelper();
  maybeUpdateControlModeSettings(now);
  updateInputPreview();
  updateGamepadCalibration();
  if (!running || !viewerInput || !camera) {
    lastTime = now;
    return;
  }
  const dt = Math.max(0, now - lastTime);
  lastTime = now;
  const dtSeconds = dt / 1e3;
  if (!paused) {
    viewerInput.deltaTime = dt;
    viewerInput.time += dt;
  } else {
    viewerInput.deltaTime = 0;
  }
  game.update(dtSeconds);
  const shouldRender = interpolationEnabled || now - lastRenderTime >= RENDER_FRAME_MS;
  if (!shouldRender) {
    return;
  }
  if (!renderer || !gfxDevice || !swapChain || !renderReady) {
    lastTime = now;
    return;
  }
  lastRenderTime = now;
  resizeCanvasToDisplaySize(canvas);
  resizeCanvasToDisplaySize(hudCanvas);
  hudRenderer.resize(hudCanvas.width, hudCanvas.height);
  if (game.loadingStage) {
    const hudDelta2 = now - lastHudTime;
    lastHudTime = now;
    const hudDtFrames2 = game.paused ? 0 : hudDelta2 / 1e3 * 60;
    hudRenderer.update(game, hudDtFrames2);
    hudRenderer.render(game, dtSeconds);
    return;
  }
  const aspect = canvas.width / canvas.height;
  camera.clipSpaceNearZ = gfxDevice.queryVendorInfo().clipSpaceNearZ;
  camera.aspect = aspect;
  camera.setClipPlanes(5);
  viewerInput.backbufferWidth = canvas.width;
  viewerInput.backbufferHeight = canvas.height;
  swapChain.configureSwapChain(canvas.width, canvas.height);
  gfxDevice.beginFrame();
  viewerInput.onscreenTexture = swapChain.getOnscreenTexture();
  const interpolationAlpha = interpolationEnabled ? game.getInterpolationAlpha() : 1;
  const baseTimeFrames = game.getAnimTimeFrames(interpolationAlpha);
  const timeFrames = baseTimeFrames === null ? null : baseTimeFrames;
  syncState.timeFrames = timeFrames;
  syncState.bananas = game.getBananaRenderState(interpolationAlpha);
  syncState.jamabars = game.getJamabarRenderState(interpolationAlpha);
  syncState.bananaCollectedByAnimGroup = null;
  syncState.animGroupTransforms = game.getAnimGroupTransforms(interpolationAlpha);
  syncState.ball = game.getBallRenderState(interpolationAlpha);
  syncState.goalBags = game.getGoalBagRenderState(interpolationAlpha);
  syncState.goalTapes = game.getGoalTapeRenderState(interpolationAlpha);
  syncState.confetti = game.getConfettiRenderState(interpolationAlpha);
  syncState.effects = game.getEffectRenderState(interpolationAlpha);
  syncState.switches = game.getSwitchRenderState(interpolationAlpha);
  syncState.stageTilt = game.getStageTiltRenderState(interpolationAlpha);
  renderer.syncGameplayState(syncState);
  applyGameCamera(interpolationAlpha);
  const hudDelta = now - lastHudTime;
  lastHudTime = now;
  const hudDtFrames = game.paused ? 0 : hudDelta / 1e3 * 60;
  hudRenderer.update(game, hudDtFrames);
  renderer.render(gfxDevice, viewerInput);
  gfxDevice.endFrame();
  hudRenderer.render(game, dtSeconds);
}
function updateGyroHelper() {
  if (!controlModeSelect || !gyroHelper || !gyroHelperFrame) {
    return;
  }
  const hasGyroOption = Array.from(controlModeSelect.options).some((opt) => opt.value === "gyro");
  const showGyro = hasGyroOption && controlModeSelect.value === "gyro";
  gyroHelper.classList.toggle("hidden", !showGyro);
  if (controlModeField) {
    controlModeField.classList.toggle("hidden", controlModeSelect.options.length === 0);
  }
  updateControlModeSettingsVisibility();
  if (!showGyro) {
    gyroHelperDevice?.classList.remove("at-limit");
    return;
  }
  const sample = game.input?.getGyroSample?.();
  if (!sample || !sample.hasSample) {
    gyroHelperFrame.style.opacity = "0.5";
    gyroHelperDevice?.classList.remove("at-limit");
    return;
  }
  const deltaBeta = sample.baselineSet ? sample.beta - sample.baseBeta : sample.beta;
  const deltaGamma = sample.baselineSet ? sample.gamma - sample.baseGamma : sample.gamma;
  const maxAngle = game.input?.getGyroSensitivity?.() ?? 25;
  const x = clamp5(-deltaBeta, -maxAngle, maxAngle);
  const y = clamp5(deltaGamma, -maxAngle, maxAngle);
  gyroHelperFrame.style.opacity = "1";
  gyroHelperFrame.style.setProperty("--gyro-x", `${x}deg`);
  gyroHelperFrame.style.setProperty("--gyro-y", `${y}deg`);
  const atLimit = Math.abs(deltaBeta) >= maxAngle || Math.abs(deltaGamma) >= maxAngle;
  gyroHelperDevice?.classList.toggle("at-limit", atLimit);
}
setOverlayVisible(true);
startButton.disabled = false;
updatePackUi();
syncPackEnabled();
void initPackFromQuery().finally(() => {
  updateSmb2ChallengeStages();
  updateSmb2StoryOptions();
  updateSmb1Stages();
  updateGameSourceFields();
});
bindVolumeControl(musicVolumeInput, musicVolumeValue, (value) => {
  audio.setMusicVolume(value);
});
bindVolumeControl(sfxVolumeInput, sfxVolumeValue, (value) => {
  audio.setSfxVolume(value);
});
bindVolumeControl(announcerVolumeInput, announcerVolumeValue, (value) => {
  audio.setAnnouncerVolume(value);
});
bindRangeControl(
  gyroSensitivityInput,
  gyroSensitivityValue,
  "smb_gyro_sensitivity",
  25,
  (value) => `${Math.round(value)}\xB0`,
  (value) => {
    game.input?.setGyroSensitivity?.(value);
  }
);
bindRangeControl(
  joystickSizeInput,
  joystickSizeValue,
  "smb_touch_joystick_scale",
  1,
  (value) => `${value.toFixed(1)}x`,
  (value) => {
    game.input?.setJoystickScale?.(value);
  }
);
bindRangeControl(
  inputFalloffInput,
  inputFalloffValue,
  "smb_input_falloff",
  1,
  (value) => value.toFixed(2).replace(/\.00$/, ""),
  (value) => {
    game.input?.setInputFalloff?.(value);
    updateFalloffCurve(value);
  }
);
updateControlModeSettingsVisibility();
updateFalloffCurve(game.input?.inputFalloff ?? 1);
syncTouchPreviewVisibility();
updateFullscreenButtonVisibility();
function setPackPickerOpen(open) {
  if (!packPicker) {
    return;
  }
  packPicker.classList.toggle("hidden", !open);
}
packLoadButton?.addEventListener("click", () => {
  if (!packPicker) {
    return;
  }
  setPackPickerOpen(packPicker.classList.contains("hidden"));
});
packLoadZipButton?.addEventListener("click", () => {
  setPackPickerOpen(false);
  packFileInput?.click();
});
packLoadFolderButton?.addEventListener("click", () => {
  setPackPickerOpen(false);
  packFolderInput?.click();
});
packFileInput?.addEventListener("change", async () => {
  const file = packFileInput.files?.[0];
  packFileInput.value = "";
  if (!file) {
    return;
  }
  try {
    const pack = await loadPackFromZipFile(file);
    await applyLoadedPack(pack);
  } catch (error) {
    console.error(error);
    if (hudStatus) {
      hudStatus.textContent = "Failed to load pack.";
    }
  }
});
packFolderInput?.addEventListener("change", async () => {
  const files = packFolderInput.files;
  packFolderInput.value = "";
  if (!files || files.length === 0) {
    return;
  }
  try {
    const pack = await loadPackFromFileList(files);
    await applyLoadedPack(pack);
  } catch (error) {
    console.error(error);
    if (hudStatus) {
      hudStatus.textContent = "Failed to load pack.";
    }
  }
});
replaySaveButton?.addEventListener("click", () => {
  if (!game || !game.stage) {
    setReplayStatus("Replay: no stage active");
    return;
  }
  const replay = game.exportReplay();
  if (!replay) {
    setReplayStatus("Replay: no inputs recorded");
    return;
  }
  downloadReplay(replay);
  setReplayStatus(`Replay saved (stage ${replay.stageId})`);
});
replayLoadButton?.addEventListener("click", () => {
  replayFileInput?.click();
});
replayFileInput?.addEventListener("change", async () => {
  const file = replayFileInput.files?.[0];
  replayFileInput.value = "";
  if (!file) {
    return;
  }
  try {
    const text = await file.text();
    const replay = JSON.parse(text);
    if (!replay || replay.version !== 1 || !Array.isArray(replay.inputs)) {
      throw new Error("Invalid replay");
    }
    await startReplay(replay);
  } catch (error) {
    console.error(error);
    setReplayStatus("Replay: failed to load");
  }
});
smb2ModeSelect?.addEventListener("change", () => {
  updateSmb2ModeFields();
});
smb2ChallengeSelect?.addEventListener("change", () => {
  updateSmb2ChallengeStages();
});
smb2StoryWorldSelect?.addEventListener("change", () => {
  updateSmb2StoryOptions();
});
difficultySelect?.addEventListener("change", () => {
  updateSmb1Stages();
});
gameSourceSelect?.addEventListener("change", () => {
  syncPackEnabled();
  updateGameSourceFields();
});
controlModeSelect?.addEventListener("change", () => {
  updateControlModeSettingsVisibility();
  syncTouchPreviewVisibility();
});
fullscreenButton?.addEventListener("click", async () => {
  const root = document.documentElement;
  try {
    if (document.fullscreenElement || document.webkitFullscreenElement) {
      if (document.exitFullscreen) {
        await document.exitFullscreen();
      } else if (document.webkitExitFullscreen) {
        await document.webkitExitFullscreen?.();
      }
    } else if (root.requestFullscreen) {
      await root.requestFullscreen();
    } else if (root.webkitRequestFullscreen) {
      await root.webkitRequestFullscreen();
    }
  } catch {
  }
  updateFullscreenButtonVisibility();
});
document.addEventListener("fullscreenchange", () => {
  updateFullscreenButtonVisibility();
});
document.addEventListener("webkitfullscreenchange", () => {
  updateFullscreenButtonVisibility();
});
overlayPanel?.addEventListener("scroll", () => {
  syncTouchPreviewVisibility();
});
gamepadCalibrationButton?.addEventListener("click", () => {
  startGamepadCalibration();
});
gamepadCalibrationOverlay?.addEventListener("click", () => {
  stopGamepadCalibration();
});
window.addEventListener("gamepadconnected", () => {
  updateControlModeSettingsVisibility();
});
window.addEventListener("gamepaddisconnected", () => {
  updateControlModeSettingsVisibility();
});
if (interpolationToggle) {
  interpolationToggle.checked = true;
  interpolationEnabled = true;
}
startButton.addEventListener("click", () => {
  const resolved = resolveSelectedGameSource();
  activeGameSource = resolved.gameSource;
  const difficulty = activeGameSource === GAME_SOURCES.SMB2 ? buildSmb2CourseConfig() : activeGameSource === GAME_SOURCES.MB2WS ? buildMb2wsCourseConfig() : buildSmb1CourseConfig();
  startStage(difficulty).catch((error) => {
    if (hudStatus) {
      hudStatus.textContent = "Failed to load stage.";
    }
    console.error(error);
  });
});
resumeButton.addEventListener("click", () => {
  paused = false;
  void audio.resume();
  game.resume();
});
gyroRecalibrateButton?.addEventListener("click", () => {
  game.input?.recalibrateGyro?.();
});
mobileMenuButton?.addEventListener("click", () => {
  paused = true;
  game.pause();
});
window.addEventListener("keydown", (event) => {
  if (event.key === "Escape") {
    paused = true;
    game.pause();
  }
});
requestAnimationFrame(renderFrame);
//# sourceMappingURL=main.js.map
